from header_game_menus import *
from header_parties import *
from header_items import *
from header_mission_templates import *
from header_music import *
from header_terrain_types import *

from module_constants import *

####################################################################################################################
#  (menu-id, menu-flags, menu_text, mesh-name, [<operations>], [<options>]),
#
#   Each game menu is a tuple that contains the following fields:
#  
#  1) Game-menu id (string): used for referencing game-menus in other files.
#     The prefix menu_ is automatically added before each game-menu-id
#
#  2) Game-menu flags (int). See header_game_menus.py for a list of available flags.
#     You can also specify menu text color here, with the menu_text_color macro
#  3) Game-menu text (string).
#  4) mesh-name (string). Not currently used. Must be the string "none"
#  5) Operations block (list). A list of operations. See header_operations.py for reference.
#     The operations block is executed when the game menu is activated.
#  6) List of Menu options (List).
#     Each menu-option record is a tuple containing the following fields:
#   6.1) Menu-option-id (string) used for referencing game-menus in other files.
#        The prefix mno_ is automatically added before each menu-option.
#   6.2) Conditions block (list). This must be a valid operation block. See header_operations.py for reference. 
#        The conditions are executed for each menu option to decide whether the option will be shown to the player or not.
#   6.3) Menu-option text (string).
#   6.4) Consequences block (list). This must be a valid operation block. See header_operations.py for reference. 
#        The consequences are executed for the menu option that has been selected by the player.
#
#
# Note: The first Menu is the initial character creation menu.
####################################################################################################################

game_menus = [

	("start_game_options", 0, "You go for a stroll in the streets of your hometown, when you hear that King Robert has been gored to death by a large boar. The fish monger that you're speaking with tells you that Eddard Stark, the Hand of the King, tried to usurp the throne! But the valiant King Joffreys advisers managed to foil his plot, and peace has surely been restored. However, a few days later, a weary traveller arrives with more news. Following the imprisonment of Lord Stark, the northern lords marched south, to defeat the Lannisters and free their liege.  They ambushed the army of the Kingslayer, routed his forces and captured Ser Jaime, after which they broke the siege of Riverrun. All of a sudden, the odds seems to be turning against Joffrey, and his name is no longer shouted in the streets.  Making a quick decision, you decide to strike out, hurriedly selling off your meagre positions to a fat innkeeper, and packing only the most essential. You finally feel like you control your own destiny, and that whatever course you take, great deeds await you.",
	"none",
	[],
	[
		("choose_options",
		[],
		"Continue...",
		[
			(assign, "$g_add_bandit_heroes", 0),
			(call_script, "script_ccp_default_settings"),
			(start_presentation, "prsnt_ccp_character_creation")
		], "."),

		("start_mod",
		[
			(eq, 1, 0)
		],
		"Quick Character (for mod testing)",
		[
			(call_script, "script_ccp_default_settings"),
			(call_script, "script_ccp_end_presentation_begin_game"),
			(set_show_messages, 0),
			(troop_add_gold, "trp_player", 80000),
			(troop_set_name, "trp_player", "@Tester"),
			(party_set_name, "p_main_party", "@Tester"),
			(troop_equip_items, "trp_player"),
			(set_show_messages, 1),
			(change_screen_map)
		], "."),

		("go_back",
		[],
		"Go back",
		[
			(change_screen_quit)
		], ".")
	]
	),

	("start_phase_2", mnf_disable_all_keys, "{!}{s16}",
	"none",
	[
		(str_store_party_name, 1, "$g_starting_town"),
		(str_store_string, 16, "$g_journey_string")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(try_begin),
				(eq, "$g_gether_npcs", 1),
				(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
					(troop_set_slot, ":troop", slot_troop_cur_center, "$g_starting_town"),
				(try_end),
			(try_end),
			(party_set_flags, "$current_town", 524288, 0),
			(jump_to_menu, "mnu_start_phase_3")
		], ".")
	]
	),

	("start_game_3", mnf_disable_all_keys, "Choose your scenario:",
	"none",
	[
		(assign, "$g_custom_battle_scenario", 0),
		(assign, "$g_custom_battle_scenario", "$g_custom_battle_scenario")
	],
	[
		("go_back",
		[],
		"Go back",
		[
			(change_screen_quit)
		], ".")
	]
	),

	("tutorial", mnf_disable_all_keys, "You approach a field where the locals are training with weapons. You can practice here to improve your combat skills.",
	"none",
	[
		(try_begin),
			(eq, "$g_tutorial_entered", 1),
			(change_screen_quit),
		(else_try),
			(set_passage_menu, "mnu_tutorial"),
			(assign, "$g_tutorial_entered", 1),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(modify_visitors_at_site, "scn_tutorial_training_ground"),
			(reset_visitors, 0),
			(set_player_troop, "trp_player"),
			(assign, "$g_player_troop", "trp_player"),
			(troop_raise_attribute, "$g_player_troop", 0, 12),
			(troop_raise_attribute, "$g_player_troop", 1, 9),
			(troop_raise_attribute, "$g_player_troop", 3, 5),
			(troop_raise_skill, "$g_player_troop", 26, 3),
			(troop_raise_skill, "$g_player_troop", 25, 2),
			(troop_raise_skill, "$g_player_troop", 24, 3),
			(troop_raise_skill, "$g_player_troop", 35, 1),
			(troop_raise_skill, "$g_player_troop", 33, 5),
			(troop_raise_skill, "$g_player_troop", 27, 4),
			(troop_raise_skill, "$g_player_troop", 36, 1),
			(troop_raise_skill, "$g_player_troop", 23, 6),
			(troop_raise_proficiency_linear, "$g_player_troop", 0, 70),
			(troop_raise_proficiency_linear, "$g_player_troop", 1, 70),
			(troop_raise_proficiency_linear, "$g_player_troop", 2, 70),
			(troop_raise_proficiency_linear, "$g_player_troop", 4, 70),
			(troop_raise_proficiency_linear, "$g_player_troop", 5, 70),
			(troop_clear_inventory, "$g_player_troop"),
			(troop_add_item, "$g_player_troop", "itm_heraldic_cozur_2", 0),
			(troop_add_item, "$g_player_troop", "itm_bo_vae_t3_leather", 0),
			(troop_add_item, "$g_player_troop", "itm_practice_sword", 0),
			(troop_add_item, "$g_player_troop", "itm_we_sar_spear_staff_quarter", 0),
			(troop_equip_items, "$g_player_troop"),
			(set_visitor, 0, "trp_player"),
			(set_visitor, 32, "trp_tutorial_fighter_1"),
			(set_visitor, 33, "trp_tutorial_fighter_2"),
			(set_visitor, 34, "trp_tutorial_fighter_3"),
			(set_visitor, 35, "trp_tutorial_fighter_4"),
			(set_visitor, 40, "trp_tutorial_master_archer"),
			(set_visitor, 41, "trp_tutorial_archer_1"),
			(set_visitor, 42, "trp_tutorial_archer_1"),
			(set_visitor, 60, "trp_tutorial_master_horseman"),
			(set_visitor, 61, "trp_tutorial_rider_1"),
			(set_visitor, 62, "trp_tutorial_rider_1"),
			(set_visitor, 63, "trp_tutorial_rider_2"),
			(set_visitor, 64, "trp_tutorial_rider_2"),
			(set_jump_mission, "mt_tutorial_training_ground"),
			(jump_to_scene, "scn_tutorial_training_ground"),
			(change_screen_mission)
		], "."),

		("go_back_dot",
		[],
		"Go back.",
		[
			(change_screen_quit)
		], ".")
	]
	),

	("reports", 0, "Character Renown: {reg5}^Honor Rating: {reg6}^Force Morale: {reg8}^Force Size Limit: {reg7}^^{reg9?Next wage:^{s1}:}",
	"none",
	[
		(call_script, "script_game_get_party_companion_limit"),
		(assign, ":var_1", reg0),
		(assign, reg9, "$g_next_pay_time"),
		(str_store_party_name, 2, "p_test_scene"),
		(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
		(assign, reg5, ":player_renown"),
		(assign, reg6, "$player_honor"),
		(assign, reg7, ":var_1"),
		(party_get_morale, reg8, "p_main_party"),
		(str_clear, 1),
		(try_begin),
			(gt, "$g_next_pay_time", 0),
			(str_store_date, 1, "$g_next_pay_time"),
			(str_store_string, 1, "@ Next pay day: {s1}"),
		(try_end),
		(try_begin),
			(is_between, "$g_player_affiliated_troop", "trp_knight_1_1", "trp_heroes_end"),
			(str_store_troop_name, 5, "$g_player_affiliated_troop"),
			(str_store_string, 1, "@{s1}^^Affiliated to {s5}"),
		(try_end)
	],
	[
		("view_party_reports",
		[],
		"View Personal Reports",
		[
			(jump_to_menu, "mnu_personal_reports")
		], "."),

		("view_party_reports",
		[],
		"View Party Reports",
		[
			(jump_to_menu, "mnu_party_reports")
		], "."),

		("view_party_reports",
		[
			(ge, "$cheat_mode", 1)
		],
		"Cheat Menu",
		[
			(jump_to_menu, "mnu_cheat_reports")
		], "."),

		("dplmc_show_economic_report",
		[
			(eq, "$cheat_mode", 1)
		],
		"View prosperity report.",
		[
			(jump_to_menu, "mnu_dplmc_economic_report")
		], "."),

		("resume_travelling",
		[],
		"Resume travelling.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("reference_reports", 0, "Reference Material",
	"none",
	[],
	[
		("action_view_upgrade_trees",
		[],
		"View Upgrade Trees",
		[
			(val_clamp, "$temp_2", 0, 10),
			(try_begin),
				(eq, "$troop_trees", "trp_troop_tree_0"),
				(store_add, ":value", "$temp_2", "prsnt_upgrade_tree_1"),
			(else_try),
				(eq, "$troop_trees", "trp_troop_tree_1"),
				(store_add, ":value", "$temp_2", "prsnt_upgrade_tree_11"),
			(else_try),
				(eq, "$troop_trees", "trp_troop_tree_2"),
				(store_add, ":value", "$temp_2", "prsnt_upgrade_tree_21"),
			(try_end),
			(start_presentation, ":value")
		], "."),

		("action_view_all_items",
		[],
		"View All Items",
		[
			(assign, "$temp", 0),
			(start_presentation, "prsnt_all_items")
		], "."),

		("action_view_trade_ledger",
		[
			(store_item_kind_count, reg0, "itm_book_trade_ledger"),
			(ge, reg0, 1),
			(assign, reg60, 0),
			(troop_slot_ge, "trp_player", 155, 1),
			(troop_get_slot, ":player_155", "trp_player", 155),
			(call_script, "script_cf_array_is_array", ":player_155"),
			(call_script, "script_array_get_element", ":player_155", 0),
			(call_script, "script_array_get_size", reg0),
			(ge, reg0, 1),
			(assign, reg60, 1)
		],
		"View Your Trade Ledger.",
		[
			(assign, reg60, 0),
			(start_presentation, "prsnt_trade_ledger_basic")
		], "."),

		("action_view_trade_ledger_denied",
		[
			(store_item_kind_count, reg0, "itm_book_trade_ledger"),
			(ge, reg0, 1),
			(eq, reg60, 0),
			(disable_menu_option)
		],
		"Assess Items to start your Trade Ledger.",
		[], "."),

		("return",
		[],
		"Return",
		[
			(jump_to_menu, "mnu_reports")
		], ".")
	]
	),

	("kingdom_reports", 0, "Kingdom Reports",
	"none",
	[],
	[
		("view_faction_relations_report",
		[],
		"View Sovereign Relations",
		[
			(start_presentation, "prsnt_jrider_faction_relations_report")
		], "."),

		("lord_relations",
		[],
		"View Known Lords by Relation",
		[
			(assign, "$g_jrider_pres_called_from_menu", 1),
			(assign, "$g_character_presentation_type", 1),
			(start_presentation, "prsnt_jrider_character_relation_report")
		], "."),

		("return",
		[],
		"Return",
		[
			(jump_to_menu, "mnu_reports")
		], ".")
	]
	),

	("personal_reports", 0, "Personal Reports",
	"none",
	[],
	[
		("view_character_report",
		[],
		"View Character Report",
		[
			(jump_to_menu, "mnu_character_report")
		], "."),

		("view_affiliated_family_report",
		[
			(this_or_next|ge, "$cheat_mode", 1),
			(is_between, "$g_player_affiliated_troop", "fac_player_supporters_faction", "fac_kingdoms_end")
		],
		"View Affiliated Family Report",
		[
			(jump_to_menu, "mnu_dplmc_affiliated_family_report")
		], "."),

		("view_weekly_budget_report",
		[],
		"View Weekly Budget",
		[
			(assign, "$g_apply_budget_report_to_gold", 0),
			(start_presentation, "prsnt_budget_report")
		], "."),

		("return",
		[],
		"Return",
		[
			(jump_to_menu, "mnu_reports")
		], ".")
	]
	),

	("cheat_reports", 0, "Cheat Menu Reports",
	"none",
	[],
	[
		("cheat_faction_orders",
		[
			(ge, "$cheat_mode", 1)
		],
		"{!}Cheat: Faction orders.",
		[
			(jump_to_menu, "mnu_faction_orders")
		], "."),

		("status_check",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}NPC status check.",
		[
			(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
				(main_party_has_troop, ":troop"),
				(str_store_troop_name, 4, ":troop"),
				(troop_get_slot, reg3, ":troop", slot_troop_morality_state),
				(troop_get_slot, reg4, ":troop", slot_troop_2ary_morality_state),
				(troop_get_slot, reg5, ":troop", slot_troop_personalityclash_state),
				(troop_get_slot, reg6, ":troop", slot_troop_personalityclash2_state),
				(troop_get_slot, reg7, ":troop", slot_troop_personalitymatch_state),
				(display_message, "@{!}{s4}: M{reg3}, 2M{reg4}, PC{reg5}, 2PC{reg6}, PM{reg7}"),
			(try_end)
		], "."),

		("return",
		[],
		"Return",
		[
			(jump_to_menu, "mnu_reports")
		], ".")
	]
	),

	("party_reports", 0, "Party Reports",
	"none",
	[],
	[
		("view_party_size_report",
		[],
		"View force size report.",
		[
			(jump_to_menu, "mnu_party_size_report")
		], "."),

		("view_morale_report",
		[],
		"View force morale report.",
		[
			(jump_to_menu, "mnu_morale_report")
		], "."),

		("Companions_overview",
		[],
		"View companions overview.",
		[
			(assign, "$jq_in_market_menu", 0),
			(assign, ":var_1", 0),
			(try_for_range, reg3, "trp_npc1", "trp_kingdom_1_lord"),
				(main_party_has_troop, reg3),
				(val_add, ":var_1", 1),
			(try_end),
			(try_begin),
				(eq, ":var_1", 0),
				(display_message, "@No companions in party!", 0xffff0000),
			(else_try),
				(gt, "$jq_startpage", 1),
				(start_presentation, "prsnt_jq_extended_info"),
			(else_try),
				(start_presentation, "prsnt_jq_companions_quickview"),
			(try_end)
		], "."),

		("view_npc_mission_report",
		[],
		"View companion mission report.",
		[
			(jump_to_menu, "mnu_companion_report")
		], "."),

		("return",
		[],
		"Return",
		[
			(jump_to_menu, "mnu_reports")
		], ".")
	]
	),

	("custom_battle_scene", mnf_disable_all_keys|menu_text_color(0xff000000), "(NO TRANS)",
	"none",
	[],
	[
		("quick_battle_scene_1",
		[],
		"{!}quick battle scene 1",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_quick_battle_scene_1"),
			(change_screen_mission)
		], "."),

		("quick_battle_scene_2",
		[],
		"{!}quick battle scene 2",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_quick_battle_scene_2"),
			(change_screen_mission)
		], "."),

		("quick_battle_scene_3",
		[],
		"{!}quick battle scene 3",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_quick_battle_scene_3"),
			(change_screen_mission)
		], "."),

		("quick_battle_scene_4",
		[],
		"{!}quick battle scene 4",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_quick_battle_scene_4"),
			(change_screen_mission)
		], "."),

		("quick_battle_scene_5",
		[],
		"{!}quick battle scene 5",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_quick_battle_scene_5"),
			(change_screen_mission)
		], "."),

		("go_back",
		[],
		"{!}Go back",
		[
			(change_screen_quit)
		], ".")
	]
	),

	("custom_battle_end", mnf_disable_all_keys, "The battle is over. {s1} Your side killed {reg5} enemies and lost {reg6} troops over the battle. You personally slew {reg7} men in the fighting.",
	"none",
	[
		(music_set_situation, 0),
		(assign, reg5, "$g_custom_battle_team2_death_count"),
		(assign, reg6, "$g_custom_battle_team1_death_count"),
		(get_player_agent_kill_count, ":player_agent_kill_count"),
		(get_player_agent_kill_count, ":player_agent_kill_count_1", 1),
		(store_add, reg7, ":player_agent_kill_count", ":player_agent_kill_count_1"),
		(try_begin),
			(eq, "$g_battle_result", 1),
			(str_store_string, 1, "str_battle_won"),
		(else_try),
			(str_store_string, 1, "str_battle_lost"),
		(try_end),
		(try_begin),
			(ge, "$g_custom_battle_team2_death_count", 100),
			(unlock_achievement, 4),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue.",
		[
			(change_screen_quit)
		], ".")
	]
	),

	("start_game_0", mnf_disable_all_keys|menu_text_color(0xff000000), "Welcome, adventurer, to A Clash of Kings, a modification based on the 'A Song of Ice and Fire' series by George R. R. Martin for Mount and Blade: Warband version 1.143. Before beginning the game you must create your character. Remember that in the traditional medieval society depicted in this world, war and politics are usually dominated by male members of the nobility. That does not, however, mean that you should not choose to play a female character, or one who is not of noble birth. Male nobles may have a somewhat easier start, but women and commoners can attain all of the same goals -- and in fact may have a much more interesting, if more challenging, early game.",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$character_gender", 0),
			(assign, "$background_type", 6),
			(assign, "$background_answer_2", 8),
			(assign, "$background_answer_3", 0),
			(assign, "$background_answer_4", 5),
			(start_presentation, "prsnt_character_creation")
		], "."),

		("go_back",
		[],
		"Go back",
		[
			(change_screen_quit)
		], ".")
	]
	),

	("start_game_1", mnf_disable_all_keys|menu_text_color(0xff000000), "Select your character's gender.",
	"none",
	[
		(assign, "$g_disable_condescending_comments", 0)
	],
	[
		("start_male",
		[],
		"Male",
		[
			(troop_set_type, "trp_player", 0),
			(assign, "$character_gender", 0),
			(jump_to_menu, "mnu_start_character_1")
		], "."),

		("start_female",
		[],
		"Female",
		[
			(troop_set_type, "trp_player", 1),
			(assign, "$character_gender", 1),
			(jump_to_menu, "mnu_dplmc_start_select_prejudice")
		], "."),

		("go_back",
		[],
		"Go back",
		[
			(jump_to_menu, "mnu_start_game_0")
		], ".")
	]
	),

	("start_character_1", mnf_disable_all_keys, "You were born years ago. Your father was...",
	"none",
	[
		(str_clear, 10),
		(str_clear, 11),
		(str_clear, 12),
		(str_clear, 13),
		(str_clear, 14),
		(str_clear, 15)
	],
	[
		("start_noble",
		[],
		"An impoverished noble.",
		[
			(assign, "$background_type", 6),
			(assign, reg3, "$character_gender"),
			(str_store_string, 10, "@You came into the world a {reg3?daughter:son} of declining nobility, owning only the house in which they lived. However, despite your family's hardships, they afforded you a good education and trained you from childhood for the rigors of aristocracy and life at court."),
			(jump_to_menu, "mnu_start_character_2")
		], "."),

		("start_merchant",
		[],
		"A travelling merchant.",
		[
			(assign, "$background_type", 5),
			(assign, reg3, "$character_gender"),
			(str_store_string, 10, "@You were born the {reg3?daughter:son} of travelling merchants, always moving from place to place in search of a profit. Although your parents were wealthier than most and educated you as well as they could, you found little opportunity to make friends on the road, living mostly for the moments when you could sell something to somebody."),
			(jump_to_menu, "mnu_start_character_2")
		], "."),

		("start_guard",
		[],
		"A veteran warrior.",
		[
			(assign, "$background_type", 4),
			(assign, reg3, "$character_gender"),
			(str_store_string, 10, "@As a child, your family scrabbled out a meagre living from your father's wages as a guardsman to the local lord. It was not an easy existence, and you were too poor to get much of an education. You learned mainly how to defend yourself on the streets, with or without a weapon in hand."),
			(jump_to_menu, "mnu_start_character_2")
		], "."),

		("start_forester",
		[],
		"A hunter.",
		[
			(assign, "$background_type", 3),
			(assign, reg3, "$character_gender"),
			(troop_raise_skill, "trp_player", "skl_foraging", 1),
			(str_store_string, 11, "@{reg3?daughter:son}"),
			(str_store_string, 10, "@You were the {reg3?daughter:son} of a family who lived off the woods, doing whatever they needed to make ends meet. Hunting, woodcutting, making arrows, even a spot of poaching whenever things got tight. Winter was never a good time for your family as the cold took animals and people alike, but you always lived to see another dawn, though your brothers and sisters might not be so fortunate."),
			(jump_to_menu, "mnu_start_character_2")
		], "."),

		("start_nomad",
		[],
		"JON STEWART.",
		[
			(assign, "$background_type", 2),
			(assign, reg3, "$character_gender"),
			(str_store_string, 11, "@{reg3?daughter:son}"),
			(str_store_string, 10, "@You were a child of the dothraki sea, born to a tribe of wandering dothraki who lived in great camps throughout the arid grasslands. Like the other tribesmen, your family revered horses above almost everything else, and they taught you how to ride almost before you learned how to walk. "),
			(jump_to_menu, "mnu_start_character_2")
		], "."),

		("start_thief",
		[],
		"A thief.",
		[
			(assign, "$background_type", 1),
			(assign, reg3, "$character_gender"),
			(str_store_string, 10, "@As the {reg3?daughter:son} of a thief, you had very little 'formal' education. Instead you were out on the street, begging until you learned how to cut purses, cutting purses until you learned how to pick locks, all the way through your childhood. Still, these long years made you streetwise and sharp to the secrets of cities and shadowy backways."),
			(jump_to_menu, "mnu_start_character_2")
		], "."),

		("go_back",
		[],
		"Go back",
		[
			(jump_to_menu, "mnu_start_game_1")
		], ".")
	]
	),

	("start_character_2", 0, "{s10}^^ You started to learn about the world almost as soon as you could walk and talk. You spent your early life as...",
	"none",
	[],
	[
		("page",
		[],
		"A page at a nobleman's court.",
		[
			(assign, "$background_answer_2", 8),
			(assign, reg3, "$character_gender"),
			(str_store_string, 11, "@As a {reg3?girl:boy} growing out of childhood, you were sent to live in the court of one of the nobles of the land. There, your first lessons were in humility, as you waited upon the lords and ladies of the household. But from their cyvasse games, their gossip, even the poetry of great deeds and courtly love, you quickly began to learn about the adult world of conflict and competition. You also learned from the rough games of the other children, who battered at each other with sticks in imitation of their elders' swords."),
			(jump_to_menu, "mnu_start_character_3")
		], "."),

		("apprentice",
		[],
		"A craftsman's apprentice.",
		[
			(assign, "$background_answer_2", 7),
			(assign, reg3, "$character_gender"),
			(str_store_string, 11, "@As a {reg3?girl:boy} growing out of childhood, you apprenticed with a local craftsman to learn a trade. After years of hard work and study under your new master, he promoted you to journeyman and employed you as a fully paid craftsman for as long as you wished to stay."),
			(jump_to_menu, "mnu_start_character_3")
		], "."),

		("stockboy",
		[],
		"A shop assistant.",
		[
			(assign, "$background_answer_2", 4),
			(assign, reg3, "$character_gender"),
			(str_store_string, 11, "@As a {reg3?girl:boy} growing out of childhood, you apprenticed to a wealthy merchant, picking up the trade over years of working shops and driving caravans. You soon became adept at the art of buying low, selling high, and leaving the customer thinking they'd got the better deal."),
			(jump_to_menu, "mnu_start_character_3")
		], "."),

		("urchin",
		[],
		"A street urchin.",
		[
			(assign, "$background_answer_2", 6),
			(assign, reg3, "$character_gender"),
			(troop_raise_skill, "trp_player", "skl_foraging", 1),
			(str_store_string, 11, "@As a {reg3?girl:boy} growing out of childhood, you took to the streets, doing whatever you must to survive. Begging, thieving and working for gangs to earn your bread, you lived from day to day in this violent world, always one step ahead of the law and those who wished you ill."),
			(jump_to_menu, "mnu_start_character_3")
		], "."),

		("nomad",
		[],
		"A dothraki child.",
		[
			(assign, "$background_answer_2", 5),
			(assign, reg3, "$character_gender"),
			(str_store_string, 11, "@As a {reg3?girl:boy} growing out of childhood, you rode the great grass sea on a horse of your own, learning the ways of the grass and the desert. Although you sometimes went hungry, you became a skillful hunter and pathfinder in this trackless country. Your body too started to harden with muscle as you grew into the life of a dothraki {reg3?woman:man}."),
			(jump_to_menu, "mnu_start_character_3")
		], "."),

		("go_back",
		[],
		"Go back.",
		[
			(jump_to_menu, "mnu_start_character_1")
		], ".")
	]
	),

	("start_character_3", mnf_disable_all_keys, "{s11}^^ Then, as a young adult, life changed as it always does. You became...",
	"none",
	[
		(assign, reg3, "$character_gender")
	],
	[
		("squire",
		[
			(eq, "$character_gender", 0)
		],
		"A squire.",
		[
			(assign, "$background_answer_3", 0),
			(str_store_string, 14, "@{reg3?daughter:man}"),
			(str_store_string, 12, "@Though the distinction felt sudden to you, somewhere along the way you had become a {reg3?woman:man}, and the whole world seemed to change around you. When you were named squire to a noble at court, you practiced long hours with weapons, learning how to deal out hard knocks and how to take them, too. You were instructed in your obligations to your lord, and of your duties to those who might one day be your vassals. But in addition to learning the chivalric ideal, you also learned about the less uplifting side -- old warriors' stories of ruthless power politics, of betrayals and usurpations, of men who used guile as well as valor to achieve their aims."),
			(jump_to_menu, "mnu_start_character_4")
		], "."),

		("lady",
		[
			(eq, "$character_gender", 1)
		],
		"A lady-in-waiting.",
		[
			(assign, "$background_answer_3", 0),
			(str_store_string, 14, "@{reg3?daughter:man}"),
			(str_store_string, 13, "@{reg3?woman:man}"),
			(str_store_string, 12, "@Though the distinction felt sudden to you, somewhere along the way you had become a {s13}, and the whole world seemed to change around you. You joined the tightly-knit circle of women at court, ladies who all did proper ladylike things, the wives and mistresses of noble men as well as maidens who had yet to find a husband. However, even here you found politics at work as the ladies schemed for prominence and fought each other bitterly to catch the eye of whatever unmarried man was in fashion at court. You soon learned ways of turning these situations and goings-on to your advantage. With it came the realisation that you yourself could wield great influence in the world, if only you applied yourself with a little bit of subtlety."),
			(jump_to_menu, "mnu_start_character_4")
		], "."),

		("troubadour",
		[],
		"A singer.",
		[
			(assign, "$background_answer_3", 2),
			(str_store_string, 14, "@{reg3?daughter:man}"),
			(str_store_string, 13, "@{reg3?woman:man}"),
			(str_store_string, 12, "@Though the distinction felt sudden to you, somewhere along the way you had become a {s13}, and the whole world seemed to change around you. You set out on your own with nothing except the instrument slung over your back and your own voice. It was a poor existence, with many a hungry night when people failed to appreciate your play, but you managed to survive on your music alone. As the years went by you became adept at playing the drunken crowds in your taverns, and even better at talking anyone out of anything you wanted."),
			(jump_to_menu, "mnu_start_character_4")
		], "."),

		("student",
		[],
		"A citadel student.",
		[
			(assign, "$background_answer_3", 1),
			(str_store_string, 12, "@Though the distinction felt sudden to you, somewhere along the way you had become a {reg3?woman:man}, and the whole world seemed to change around you. You found yourself as a student in the citadel of Oldtown, where you studied economy, philosophy, and medicine. But not all your lessons were learned in the lecture halls. You may or may not have joined in with your fellows as they roamed the alleys in search of wine, women, and a good fight. However, you certainly were able to observe how a broken jaw is set, or how an angry townsman can be persuaded to set down his club and accept cash compensation for the destruction of his shop."),
			(jump_to_menu, "mnu_start_character_4")
		], "."),

		("peddler",
		[],
		"A goods peddler.",
		[
			(assign, "$background_answer_3", 4),
			(str_store_string, 14, "@{reg3?daughter:man}"),
			(str_store_string, 13, "@{reg3?woman:man}"),
			(str_store_string, 12, "@Though the distinction felt sudden to you, somewhere along the way you had become a {s13}, and the whole world seemed to change around you. Heeding the call of the open road, you travelled from village to village buying and selling what you could. It was not a rich existence, but you became a master at haggling even the most miserly elders into giving you a good price. Soon, you knew, you would be well-placed to start your own trading empire..."),
			(jump_to_menu, "mnu_start_character_4")
		], "."),

		("craftsman",
		[],
		"A smith.",
		[
			(assign, "$background_answer_3", 5),
			(str_store_string, 14, "@{reg3?daughter:man}"),
			(str_store_string, 13, "@{reg3?woman:man}"),
			(str_store_string, 12, "@Though the distinction felt sudden to you, somewhere along the way you had become a {s13}, and the whole world seemed to change around you. You pursued a career as a smith, crafting items of function and beauty out of simple metal. As time wore on you became a master of your trade, and fine work started to fetch fine prices. With food in your belly and logs on your fire, you could take pride in your work and your growing reputation."),
			(jump_to_menu, "mnu_start_character_4")
		], "."),

		("poacher",
		[],
		"A game poacher.",
		[
			(assign, "$background_answer_3", 6),
			(troop_raise_skill, "trp_player", "skl_foraging", 1),
			(str_store_string, 14, "@{reg3?daughter:man}"),
			(str_store_string, 13, "@{reg3?woman:man}"),
			(str_store_string, 12, "@Though the distinction felt sudden to you, somewhere along the way you had become a {s13}, and the whole world seemed to change around you. Dissatisfied with common men's desperate scrabble for coin, you took to your local lord's own forests and decided to help yourself to its bounty, laws be damned. You hunted stags, boars and geese and sold the precious meat under the table. You cut down trees right under the watchmen's noses and turned them into firewood that warmed many freezing homes during winter. All for a few silvers, of course."),
			(jump_to_menu, "mnu_start_character_4")
		], "."),

		("go_back",
		[],
		"Go back.",
		[
			(jump_to_menu, "mnu_start_character_2")
		], ".")
	]
	),

	("start_character_4", mnf_disable_all_keys, "{s12}^^But soon everything changed and you decided to strike out on your own as an adventurer. What made you take this decision was...",
	"none",
	[],
	[
		("revenge",
		[],
		"Personal revenge.",
		[
			(assign, "$background_answer_4", 5),
			(str_store_string, 13, "@Only you know exactly what caused you to give up your old life and become an adventurer. Still, it was not a difficult choice to leave, with the rage burning brightly in your heart. You want vengeance. You want justice. What was done to you cannot be undone, and these debts can only be paid in blood..."),
			(jump_to_menu, "mnu_choose_skill")
		], "."),

		("death",
		[],
		"The loss of a loved one.",
		[
			(assign, "$background_answer_4", 4),
			(str_store_string, 13, "@Only you know exactly what caused you to give up your old life and become an adventurer. All you can say is that you couldn't bear to stay, not with the memories of those you loved so close and so painful. Perhaps your new life will let you forget, or honour the name that you can no longer bear to speak..."),
			(jump_to_menu, "mnu_choose_skill")
		], "."),

		("wanderlust",
		[],
		"Wanderlust.",
		[
			(assign, "$background_answer_4", 3),
			(str_store_string, 13, "@Only you know exactly what caused you to give up your old life and become an adventurer. You're not even sure when your home became a prison, when the familiar became mundane, but your dreams of wandering have taken over your life. Whether you yearn for some faraway place or merely for the open road and the freedom to travel, you could no longer bear to stay in the same place. You simply went and never looked back..."),
			(jump_to_menu, "mnu_choose_skill")
		], "."),

		("disown",
		[],
		"Being forced out of your home.",
		[
			(assign, "$background_answer_4", 1),
			(str_store_string, 13, "@Only you know exactly what caused you to give up your old life and become an adventurer. However, you know you cannot go back. There's nothing to go back to. Whatever home you may have had is gone now, and you must face the fact that you're out in the wide wide world. Alone to sink or swim..."),
			(jump_to_menu, "mnu_choose_skill")
		], "."),

		("greed",
		[],
		"Lust for money and power.",
		[
			(assign, "$background_answer_4", 0),
			(str_store_string, 13, "@Only you know exactly what caused you to give up your old life and become an adventurer. To everyone else, it's clear that you're now motivated solely by personal gain. You want to be rich, powerful, respected, feared. You want to be the one whom others hurry to obey. You want people to know your name, and tremble whenever it is spoken. You want everything, and you won't let anyone stop you from having it..."),
			(jump_to_menu, "mnu_choose_skill")
		], "."),

		("go_back",
		[],
		"Go back.",
		[
			(jump_to_menu, "mnu_start_character_3")
		], ".")
	]
	),

	("choose_skill", mnf_disable_all_keys, "{s13}",
	"none",
	[
		(assign, "$current_string_reg", 10),
		(assign, ":var_1", 0),
		(try_begin),
			(eq, "$character_gender", 1),
			(str_store_string, 14, "str_woman"),
			(val_add, ":var_1", 1),
		(else_try),
			(str_store_string, 14, "str_man"),
		(try_end),
		(try_begin),
			(eq, "$background_type", 6),
			(str_store_string, 15, "str_noble"),
			(val_sub, ":var_1", 1),
		(else_try),
			(str_store_string, 15, "str_common"),
		(try_end),
		(try_begin),
			(eq, ":var_1", -1),
			(str_store_string, 16, "str_may_find_that_you_are_able_to_take_your_place_among_calradias_great_lords_relatively_quickly"),
		(else_try),
			(eq, ":var_1", 0),
			(str_store_string, 16, "str_may_face_some_difficulties_establishing_yourself_as_an_equal_among_calradias_great_lords"),
		(else_try),
			(eq, ":var_1", 1),
			(str_store_string, 16, "str_may_face_great_difficulties_establishing_yourself_as_an_equal_among_calradias_great_lords"),
		(try_end)
	],
	[
		("begin_adventuring",
		[],
		"Become an adventurer and ride to your destiny.",
		[
			(call_script, "script_start_adventuring_raise_skills"),
			(try_begin),
				(eq, "$background_type", 6),
				(jump_to_menu, "mnu_auto_return"),
				(start_presentation, "prsnt_banner_selection"),
			(else_try),
				(change_screen_return, 0),
			(try_end),
			(set_show_messages, 1)
		], "."),

		("go_back_dot",
		[],
		"Go back.",
		[
			(jump_to_menu, "mnu_start_character_4")
		], ".")
	]
	),

	("past_life_explanation", mnf_disable_all_keys, "{s3}",
	"none",
	[
		(try_begin),
			(gt, "$current_string_reg", 14),
			(assign, "$current_string_reg", 10),
		(try_end),
		(str_store_string_reg, 3, "$current_string_reg"),
		(try_begin),
			(ge, "$current_string_reg", 14),
			(str_store_string, 5, "@Back to the beginning..."),
		(else_try),
			(str_store_string, 5, "@View next segment..."),
		(try_end)
	],
	[
		("view_next",
		[],
		"{s5}",
		[
			(val_add, "$current_string_reg", 1),
			(jump_to_menu, "mnu_past_life_explanation")
		], "."),

		("continue",
		[],
		"Continue...",
		[], "."),

		("go_back_dot",
		[],
		"Go back.",
		[
			(jump_to_menu, "mnu_choose_skill")
		], ".")
	]
	),

	("auto_return", 0, "{!}This menu automatically returns to caller.",
	"none",
	[
		(change_screen_return, 0)
	],
	[]
	),

	("morale_report", 0, "{s1}",
	"none",
	[
		(call_script, "script_get_player_party_morale_values"),
		(assign, ":var_1", reg1),
		(assign, ":var_2", reg0),
		(assign, reg1, "$g_player_party_morale_modifier_party_size"),
		(try_begin),
			(gt, reg1, 0),
			(str_store_string, 2, "@{!} -"),
		(else_try),
			(str_store_string, 2, "str_space"),
		(try_end),
		(assign, reg2, "$g_player_party_morale_modifier_leadership"),
		(try_begin),
			(gt, reg2, 0),
			(str_store_string, 3, "@{!} +"),
		(else_try),
			(str_store_string, 3, "str_space"),
		(try_end),
		(try_begin),
			(gt, "$g_player_party_morale_modifier_no_food", 0),
			(assign, reg7, "$g_player_party_morale_modifier_no_food"),
			(str_store_string, 5, "@^No food:  -{reg7}"),
		(else_try),
			(str_store_string, 5, "str_space"),
		(try_end),
		(assign, reg3, "$g_player_party_morale_modifier_food"),
		(try_begin),
			(gt, reg3, 0),
			(str_store_string, 4, "@{!} +"),
		(else_try),
			(str_store_string, 4, "str_space"),
		(try_end),
		(try_begin),
			(gt, "$g_player_party_morale_modifier_debt", 0),
			(assign, reg6, "$g_player_party_morale_modifier_debt"),
			(str_store_string, 6, "@^Wage debt:  -{reg6}"),
		(else_try),
			(str_store_string, 6, "str_space"),
		(try_end),
		(party_get_morale, reg5, "p_main_party"),
		(store_sub, reg4, reg5, ":var_2"),
		(try_begin),
			(gt, reg4, 0),
			(str_store_string, 7, "@{!} +"),
		(else_try),
			(str_store_string, 7, "str_space"),
		(try_end),
		(store_sub, ":value", ":var_1", reg5),
		(store_skill_level, ":skill_level_leadership_player", "skl_leadership", "trp_player"),
		(try_begin),
			(gt, ":value", 0),
			(store_add, ":value_2", 20, ":skill_level_leadership_player"),
		(else_try),
			(store_sub, ":value_2", 20, ":skill_level_leadership_player"),
		(try_end),
		(store_mul, ":value_3", ":value", ":value_2"),
		(val_div, ":value_3", 100),
		(store_mul, ":value_4", ":value_3", 100),
		(val_div, ":value_4", ":value_2"),
		(try_begin),
			(neq, ":value_4", ":value"),
			(try_begin),
				(gt, ":value", 0),
				(val_add, ":value_3", 1),
			(else_try),
				(val_sub, ":value_3", 1),
			(try_end),
		(try_end),
		(store_add, reg10, reg5, ":value_3"),
		(val_clamp, reg10, 0, 100),
		(store_sub, reg8, reg10, reg5),
		(try_begin),
			(gt, reg8, 0),
			(str_store_string, 8, "@ +"),
		(else_try),
			(str_store_string, 8, "@ "),
		(try_end),
		(str_store_string, 1, "@Current force morale is {reg5}.^Current force morale modifiers are:^^Base morale:  +50^Party size: {s2}{reg1}^Leadership: {s3}{reg2}^Food variety: {s4}{reg3}{s5}{s6}^Recent events: {s7}{reg4}^TOTAL:  {reg5}^^Morale value to change: {s8}{reg8}^Prospective party morale: {reg10}^^^"),
		(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(faction_get_slot, ":faction_morale_of_player_troops", ":faction", slot_faction_morale_of_player_troops),
			(val_div, ":faction_morale_of_player_troops", 100),
			(neq, ":faction_morale_of_player_troops", 0),
			(assign, reg6, ":faction_morale_of_player_troops"),
			(str_store_faction_name, 9, ":faction"),
			(str_store_string, 1, "@{s1}Extra morale for {s9} troops : {reg6}^"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_party_reports")
		], ".")
	]
	),

	("courtship_relations", 0, "{s1}",
	"none",
	[
		(str_store_string, 1, "str_courtships_in_progress_"),
		(try_for_range, ":troop", "trp_knight_1_1_wife", "trp_heroes_end"),
			(troop_slot_eq, ":troop", slot_troop_met, 2),
			(call_script, "script_troop_get_relation_with_troop", "trp_player", ":troop"),
			(gt, reg0, 0),
			(assign, reg3, reg0),
			(str_store_troop_name, 2, ":troop"),
			(store_current_hours, ":current_hours"),
			(troop_get_slot, ":troop_last_talk_time", ":troop", slot_troop_last_talk_time),
			(val_sub, ":current_hours", ":troop_last_talk_time"),
			(store_div, ":value", ":current_hours", 24),
			(assign, reg4, ":value"),
			(str_store_string, 1, "str_s1_s2_relation_reg3_last_visit_reg4_days_ago"),
		(try_end),
		(str_store_string, 1, "str_s1__poems_known"),
		(try_begin),
			(gt, "$allegoric_poem_recitations", 0),
			(str_store_string, 1, "str_s1_storming_the_castle_of_love_allegoric"),
		(try_end),
		(try_begin),
			(gt, "$tragic_poem_recitations", 0),
			(str_store_string, 1, "str_s1_kais_and_layali_tragic"),
		(try_end),
		(try_begin),
			(gt, "$comic_poem_recitations", 0),
			(str_store_string, 1, "str_s1_a_conversation_in_the_garden_comic"),
		(try_end),
		(try_begin),
			(gt, "$heroic_poem_recitations", 0),
			(str_store_string, 1, "str_s1_helgered_and_kara_epic"),
		(try_end),
		(try_begin),
			(gt, "$mystic_poem_recitations", 0),
			(str_store_string, 1, "str_s1_a_hearts_desire_mystic"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_reports")
		], ".")
	]
	),

	("lord_relations", 0, "{s1}",
	"none",
	[
		(assign, ":var_1", 0),
		(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(troop_slot_ge, ":troop", 5, 1),
			(val_add, ":var_1", 1),
			(troop_set_slot, ":troop", slot_troop_temp_slot, 0),
		(try_end),
		(str_clear, 1),
		(try_for_range, ":unused", 0, ":var_1"),
			(assign, ":value", -100),
			(assign, ":value_2", -1),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(troop_slot_eq, ":troop", slot_troop_temp_slot, 0),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(troop_slot_ge, ":troop", 5, 1),
				(call_script, "script_troop_get_player_relation", ":troop"),
				(assign, ":var_6", reg0),
				(ge, ":var_6", ":value"),
				(assign, ":value", ":var_6"),
				(assign, ":value_2", ":troop"),
			(try_end),
			(gt, ":value_2", -1),
			(str_store_troop_name_link, 4, ":value_2"),
			(assign, reg4, ":value"),
			(str_store_string, 1, "@{!}{s1}^{s4}: {reg4}"),
			(troop_set_slot, ":value_2", slot_troop_temp_slot, 1),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_reports")
		], ".")
	]
	),

	("companion_report", 0, "{s7}{s1}",
	"none",
	[
		(str_clear, 1),
		(str_store_string, 7, "str_no_companions_in_service"),
		(try_begin),
			(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
			(try_begin),
				(call_script, "script_cf_dplmc_troop_is_female", "trp_player"),
				(str_store_string, 8, "str_husband"),
			(else_try),
				(str_store_string, 8, "str_wife"),
			(try_end),
			(try_begin),
				(le, ":player_spouse", 0),
				(troop_get_slot, ":player_spouse", "trp_player", slot_troop_betrothed),
				(str_store_string, 8, "str_betrothed"),
			(try_end),
			(gt, ":player_spouse", 0),
			(str_store_troop_name, 4, ":player_spouse"),
			(troop_get_slot, ":player_spouse_cur_center", ":player_spouse", slot_troop_cur_center),
			(try_begin),
				(is_between, ":player_spouse_cur_center", "p_town_1", "p_salt_mine"),
				(str_store_party_name, 5, ":player_spouse_cur_center"),
			(else_try),
				(troop_slot_eq, ":player_spouse", slot_troop_occupation, 2),
				(str_store_string, 5, "str_leading_party"),
			(else_try),
				(str_store_string, 5, "str_whereabouts_unknown"),
			(try_end),
			(str_store_string, 3, "str_s4_s8_s5"),
			(str_store_string, 2, 1),
			(str_store_string, 1, "str_s2_s3"),
		(try_end),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(ge, "$npc_to_rejoin_party", 0),
			(str_store_troop_name, 5, "$npc_to_rejoin_party"),
			(str_store_string, 1, "@{!}DEBUG -- {s1}^NPC in rejoin queue: {s5}^"),
		(try_end),
		(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
			(str_clear, 2),
			(str_clear, 3),
			(try_begin),
				(troop_get_slot, ":troop_days_on_mission", ":troop", slot_troop_days_on_mission),
				(troop_slot_eq, ":troop", slot_troop_occupation, 5),
				(str_store_troop_name, 4, ":troop"),
				(try_begin),
					(troop_slot_eq, ":troop", slot_troop_current_mission, 1),
					(str_store_string, 8, "str_gathering_support"),
					(try_begin),
						(eq, ":troop_days_on_mission", 1),
						(str_store_string, 5, "str_expected_back_imminently"),
					(else_try),
						(assign, reg3, ":troop_days_on_mission"),
						(str_store_string, 5, "str_expected_back_in_approximately_reg3_days"),
					(try_end),
				(else_try),
					(troop_slot_eq, ":troop", slot_troop_current_mission, 2),
					(troop_get_slot, ":troop_town_with_contacts", ":troop", slot_troop_town_with_contacts),
					(str_store_party_name, 11, ":troop_town_with_contacts"),
					(str_store_string, 8, "str_gathering_intelligence"),
					(try_begin),
						(eq, ":troop_days_on_mission", 1),
						(str_store_string, 5, "str_expected_back_imminently"),
					(else_try),
						(assign, reg3, ":troop_days_on_mission"),
						(str_store_string, 5, "str_expected_back_in_approximately_reg3_days"),
					(try_end),
				(else_try),
					(troop_slot_ge, ":troop", 151, 3),
					(neg|troop_slot_eq, ":troop", slot_troop_current_mission, 8),
					(troop_get_slot, ":troop_mission_object", ":troop", slot_troop_mission_object),
					(str_store_faction_name, 9, ":troop_mission_object"),
					(str_store_string, 8, "str_diplomatic_embassy_to_s9"),
					(try_begin),
						(eq, ":troop_days_on_mission", 1),
						(str_store_string, 5, "str_expected_back_imminently"),
					(else_try),
						(assign, reg3, ":troop_days_on_mission"),
						(str_store_string, 5, "str_expected_back_in_approximately_reg3_days"),
					(try_end),
				(else_try),
					(eq, ":troop", "$g_player_minister"),
					(str_store_string, 8, "str_serving_as_minister"),
					(try_begin),
						(is_between, "$g_player_court", "p_town_1", "p_salt_mine"),
						(str_store_party_name, 9, "$g_player_court"),
						(str_store_string, 5, "str_in_your_court_at_s9"),
					(else_try),
						(str_store_string, 5, "str_whereabouts_unknown"),
					(try_end),
				(else_try),
					(main_party_has_troop, ":troop"),
					(str_store_string, 8, "str_under_arms"),
					(str_store_string, 5, "str_in_your_party"),
				(else_try),
					(troop_slot_eq, ":troop", slot_troop_current_mission, 8),
					(str_store_string, 8, "str_attempting_to_rejoin_party"),
					(str_store_string, 5, "str_whereabouts_unknown"),
				(else_try),
					(troop_slot_ge, ":troop", 12, 1),
					(str_store_string, 8, "str_separated_from_party"),
					(str_store_string, 5, "str_whereabouts_unknown"),
				(else_try),
					(troop_set_slot, ":troop", slot_troop_current_mission, 8),
					(str_store_string, 8, "str_attempting_to_rejoin_party"),
					(str_store_string, 5, "str_whereabouts_unknown"),
					(try_begin),
						(ge, "$cheat_mode", 1),
						(troop_get_slot, reg2, ":troop", slot_troop_current_mission),
						(troop_get_slot, reg3, ":troop", slot_troop_days_on_mission),
						(troop_get_slot, reg4, ":troop", slot_troop_prisoner_of_party),
						(troop_get_slot, reg4, ":troop", slot_troop_playerparty_history),
						(display_message, "@{!}DEBUG: {s4} current mission: {reg2}, days on mission: {reg3}, prisoner: {reg4}, pphistory: {reg5}"),
					(try_end),
				(try_end),
				(str_store_string, 3, "str_s4_s8_s5"),
				(str_store_string, 2, 1),
				(str_store_string, 1, "str_s2_s3"),
				(str_clear, 7),
			(else_try),
				(neg|troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(troop_slot_ge, ":troop", 8, "p_town_1"),
				(str_store_troop_name, 4, ":troop"),
				(str_store_string, 8, "str_missing_after_battle"),
				(str_store_string, 5, "str_whereabouts_unknown"),
				(str_store_string, 3, "str_s4_s8_s5"),
				(str_store_string, 2, 1),
				(str_store_string, 1, "str_s2_s3"),
				(str_clear, 7),
			(try_end),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_reports")
		], ".")
	]
	),

	("faction_orders", 0, "{!}{s9}",
	"none",
	[
		(str_clear, 9),
		(store_current_hours, ":current_hours"),
		(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(faction_slot_eq, ":faction", slot_faction_state, 0),
			(neq, ":faction", "fac_player_supporters_faction"),
			(faction_get_slot, ":faction_ai_state", ":faction", slot_faction_ai_state),
			(try_begin),
				(faction_get_slot, ":faction_marshall", ":faction", slot_faction_marshall),
				(gt, ":faction_marshall", -1),
				(assign, ":value", ":faction_marshall"),
			(else_try),
				(faction_get_slot, ":value", ":faction", slot_faction_leader),
			(try_end),
			(call_script, "script_npc_decision_checklist_faction_ai_alt", ":value"),
			(assign, ":var_6", reg0),
			(str_store_string, 26, 14),
			(faction_get_slot, ":faction_ai_state_2", ":faction", slot_faction_ai_state),
			(faction_get_slot, ":faction_ai_object", ":faction", slot_faction_ai_object),
			(faction_get_slot, ":faction_marshall_2", ":faction", slot_faction_marshall),
			(faction_get_slot, ":faction_ai_offensive_max_followers", ":faction", slot_faction_ai_offensive_max_followers),
			(str_store_faction_name, 10, ":faction"),
			(try_begin),
				(faction_get_slot, ":faction_political_issue", ":faction", slot_faction_political_issue),
				(try_begin),
					(eq, ":faction_political_issue", 1),
					(str_store_string, 11, "@Appoint next marshal"),
				(else_try),
					(is_between, ":faction_political_issue", "p_town_1", "p_salt_mine"),
					(str_store_party_name, 12, ":faction_political_issue"),
					(str_store_string, 11, "@Award {s12} as fief"),
				(else_try),
					(eq, ":faction_political_issue", 0),
					(str_store_string, 11, "@None"),
				(else_try),
					(assign, reg3, ":faction_political_issue"),
					(str_store_string, 11, "@{!}Error ({reg3})"),
				(try_end),
				(store_current_hours, reg4),
				(faction_get_slot, ":faction_political_issue_time", ":faction", slot_faction_political_issue_time),
				(val_sub, reg4, ":faction_political_issue_time"),
				(str_store_string, 10, "@{!}{s10}^Faction political issue: {s11}"),
				(try_begin),
					(faction_slot_ge, ":faction", 64, 1),
					(str_store_string, 10, "@{!}{s10} (on agenda {reg4} hours)"),
				(try_end),
			(try_end),
			(assign, reg2, ":faction_ai_offensive_max_followers"),
			(try_begin),
				(eq, ":faction_ai_state_2", 0),
				(str_store_string, 11, "@{!}Defending"),
			(else_try),
				(eq, ":faction_ai_state_2", 1),
				(str_store_string, 11, "@{!}Gathering army"),
			(else_try),
				(eq, ":faction_ai_state_2", 2),
				(str_store_party_name, 11, ":faction_ai_object"),
				(str_store_string, 11, "@{!}Besieging {s11}"),
			(else_try),
				(eq, ":faction_ai_state_2", 3),
				(str_store_party_name, 11, ":faction_ai_object"),
				(str_store_string, 11, "@{!}Raiding {s11}"),
			(else_try),
				(eq, ":faction_ai_state_2", 4),
				(str_store_party_name, 11, ":faction_ai_object"),
				(str_store_string, 11, "str_attacking_enemy_army_near_s11"),
			(else_try),
				(eq, ":faction_ai_state_2", 6),
				(str_store_party_name, 11, ":faction_ai_object"),
				(str_store_string, 11, "str_holding_feast_at_s11"),
			(else_try),
				(eq, ":faction_ai_state_2", 5),
				(str_store_party_name, 11, ":faction_ai_object"),
				(str_store_string, 11, "@{!}Attacking enemies around {s11}"),
			(else_try),
				(assign, reg4, ":faction_ai_state_2"),
				(str_store_string, 11, "str_sfai_reg4"),
			(try_end),
			(try_begin),
				(lt, ":faction_marshall_2", 0),
				(str_store_string, 12, "@No one"),
			(else_try),
				(str_store_troop_name, 12, ":faction_marshall_2"),
				(troop_get_slot, reg21, ":faction_marshall_2", slot_troop_days_on_mission),
				(str_store_string, 12, "@{!}{s12} (controversy: {reg21})"),
			(try_end),
			(try_for_parties, ":var_13"),
				(party_slot_eq, ":var_13", slot_party_ai_state, 12),
				(store_faction_of_party, ":faction_of_party_var_13", ":var_13"),
				(eq, ":faction_of_party_var_13", ":faction"),
				(str_store_party_name, 38, ":var_13"),
				(str_store_string, 12, "@{!}{s12}^Screening party: {s38}"),
			(try_end),
			(try_begin),
				(this_or_next|eq, ":var_6", 0),
				(eq, ":var_6", 6),
				(store_current_hours, ":current_hours_2"),
				(faction_get_slot, ":faction_ai_current_state_started", ":faction", slot_faction_ai_current_state_started),
				(val_sub, ":current_hours_2", ":faction_ai_current_state_started"),
				(ge, ":current_hours_2", 18),
				(store_current_hours, ":current_hours_3"),
				(faction_set_slot, ":faction", slot_faction_ai_last_rest_time, ":current_hours_3"),
			(try_end),
			(try_begin),
				(neq, ":var_6", ":faction_ai_state"),
				(store_current_hours, ":current_hours_3"),
				(faction_set_slot, ":faction", slot_faction_ai_current_state_started, ":current_hours_3"),
			(try_end),
			(call_script, "script_evaluate_realm_stability", ":faction"),
			(assign, ":var_18", reg0),
			(assign, ":var_19", reg1),
			(faction_get_slot, ":faction_last_feast_concluded", ":faction", slot_faction_last_feast_concluded),
			(store_sub, ":value_2", ":current_hours", ":faction_last_feast_concluded"),
			(val_sub, ":value_2", 72),
			(faction_get_slot, ":faction_ai_current_state_started", ":faction", slot_faction_ai_current_state_started),
			(store_sub, ":current_hours_2", ":current_hours", ":faction_ai_current_state_started"),
			(faction_get_slot, ":faction_ai_last_offensive_time", ":faction", slot_faction_ai_last_offensive_time),
			(store_sub, ":value_3", ":current_hours", ":faction_ai_last_offensive_time"),
			(faction_get_slot, ":faction_ai_last_rest_time", ":faction", slot_faction_ai_last_rest_time),
			(store_sub, ":value_4", ":current_hours", ":faction_ai_last_rest_time"),
			(faction_get_slot, ":faction_ai_last_decisive_event", ":faction", slot_faction_ai_last_decisive_event),
			(store_sub, ":value_5", ":current_hours", ":faction_ai_last_decisive_event"),
			(assign, reg3, ":current_hours_2"),
			(assign, reg4, ":value_3"),
			(assign, reg5, ":value_2"),
			(assign, reg7, ":var_18"),
			(assign, reg8, ":var_19"),
			(assign, reg9, ":value_4"),
			(assign, reg10, ":value_5"),
			(str_store_string, 14, 26),
			(str_store_string, 9, "str_s9s10_current_state_s11_hours_at_current_state_reg3_current_strategic_thinking_s14_marshall_s12_since_the_last_offensive_ended_reg4_hours_since_the_decisive_event_reg10_hours_since_the_last_rest_reg9_hours_since_the_last_feast_ended_reg5_hours_percent_disgruntled_lords_reg7_percent_restless_lords_reg8__"),
		(try_end),
		(try_begin),
			(neg|is_between, "$g_cheat_selected_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(call_script, "script_get_next_active_kingdom", "fac_kingdoms_end"),
			(assign, "$g_cheat_selected_faction", reg0),
		(try_end),
		(str_store_faction_name, 10, "$g_cheat_selected_faction"),
		(str_store_string, 9, "@Selected faction is: {s10}^^{s9}")
	],
	[
		("faction_orders_next_faction",
		[],
		"{!}Select next faction.",
		[
			(call_script, "script_get_next_active_kingdom", "$g_cheat_selected_faction"),
			(assign, "$g_cheat_selected_faction", reg0),
			(jump_to_menu, "mnu_faction_orders")
		], "."),

		("faction_orders_political_collapse",
		[],
		"{!}CHEAT - Cause all lords in faction to fall out with their liege.",
		[
			(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(eq, ":faction_of_troop_troop", "$g_cheat_selected_faction"),
				(faction_get_slot, ":faction_of_troop_troop_leader", ":faction_of_troop_troop", slot_faction_leader),
				(call_script, "script_troop_change_relation_with_troop", ":troop", ":faction_of_troop_troop_leader", -200),
			(try_end)
		], "."),

		("faction_orders_defend",
		[],
		"{!}Force defend.",
		[
			(faction_set_slot, "$g_cheat_selected_faction", slot_faction_ai_state, 0),
			(faction_set_slot, "$g_cheat_selected_faction", slot_faction_ai_object, -1),
			(jump_to_menu, "mnu_faction_orders")
		], "."),

		("faction_orders_feast",
		[],
		"{!}Force feast.",
		[
			(assign, ":value", 0),
			(try_for_range, ":party", "p_town_1", "p_village_1"),
				(neg|party_slot_ge, ":party", 54, 1),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(eq, ":faction_of_party_party", "$g_cheat_selected_faction"),
				(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
				(troop_get_slot, ":party_town_lord_renown", ":party_town_lord", slot_troop_renown),
				(store_random_in_range, ":random_in_range_0_1000", 0, 1000),
				(val_add, ":party_town_lord_renown", ":random_in_range_0_1000"),
				(gt, ":party_town_lord_renown", ":value"),
				(assign, ":value", ":party_town_lord_renown"),
				(assign, ":var_7", ":party"),
			(try_end),
			(try_begin),
				(gt, ":var_7", "p_town_1"),
				(faction_set_slot, "$g_cheat_selected_faction", slot_faction_ai_state, 6),
				(faction_set_slot, "$g_cheat_selected_faction", slot_faction_ai_object, ":var_7"),
				(try_begin),
					(eq, "$g_player_eligible_feast_center_no", ":var_7"),
					(assign, "$g_player_eligible_feast_center_no", -1),
				(try_end),
				(store_current_hours, ":current_hours"),
				(faction_set_slot, "$g_cheat_selected_faction", slot_faction_last_feast_concluded, ":current_hours"),
			(try_end),
			(jump_to_menu, "mnu_faction_orders")
		], "."),

		("faction_orders_gather",
		[],
		"{!}Force gather army.",
		[
			(store_current_hours, ":current_hours"),
			(faction_set_slot, "$g_cheat_selected_faction", slot_faction_ai_state, 1),
			(faction_set_slot, "$g_cheat_selected_faction", slot_faction_ai_last_offensive_time, ":current_hours"),
			(faction_set_slot, "$g_cheat_selected_faction", slot_faction_ai_offensive_max_followers, 1),
			(faction_set_slot, "$g_cheat_selected_faction", slot_faction_ai_object, -1),
			(jump_to_menu, "mnu_faction_orders")
		], "."),

		("faction_orders_increase_time",
		[],
		"{!}Increase last offensive time by 24 hours.",
		[
			(faction_get_slot, ":g_cheat_selected_faction_ai_last_offensive_time", "$g_cheat_selected_faction", slot_faction_ai_last_offensive_time),
			(val_sub, ":g_cheat_selected_faction_ai_last_offensive_time", 24),
			(faction_set_slot, "$g_cheat_selected_faction", slot_faction_ai_last_offensive_time, ":g_cheat_selected_faction_ai_last_offensive_time"),
			(jump_to_menu, "mnu_faction_orders")
		], "."),

		("faction_orders_rethink",
		[],
		"{!}Force rethink.",
		[
			(call_script, "script_init_ai_calculation"),
			(call_script, "script_decide_faction_ai", "$g_cheat_selected_faction"),
			(jump_to_menu, "mnu_faction_orders")
		], "."),

		("faction_orders_rethink_all",
		[],
		"{!}Force rethink for all factions.",
		[
			(call_script, "script_recalculate_ais"),
			(jump_to_menu, "mnu_faction_orders")
		], "."),

		("enable_alt_ai",
		[
			(eq, "$g_use_alternative_ai", 2)
		],
		"{!}CHEAT! - enable alternative ai",
		[
			(assign, "$g_use_alternative_ai", 1),
			(jump_to_menu, "mnu_faction_orders")
		], "."),

		("disable_alt_ai",
		[
			(eq, "$g_use_alternative_ai", 2)
		],
		"{!}CHEAT! - disable alternative ai",
		[
			(assign, "$g_use_alternative_ai", 0),
			(jump_to_menu, "mnu_faction_orders")
		], "."),

		("faction_orders_init_econ",
		[],
		"{!}Initialize economic stats.",
		[
			(call_script, "script_initialize_economic_information"),
			(jump_to_menu, "mnu_faction_orders")
		], "."),

		("go_back_dot",
		[],
		"{!}Go back.",
		[
			(jump_to_menu, "mnu_reports")
		], ".")
	]
	),

	("character_report", 0, "{s9}",
	"none",
	[
		(try_begin),
			(gt, "$g_player_reading_book", 0),
			(player_has_item, "$g_player_reading_book"),
			(str_store_item_name, 8, "$g_player_reading_book"),
			(str_store_string, 9, "@You are currently reading: {s8}."),
		(else_try),
			(assign, "$g_player_reading_book", 0),
			(str_store_string, 9, "@You are not reading any books."),
		(try_end),
		(assign, ":var_1", 0),
		(assign, ":var_2", 0),
		(str_store_string, 6, "@none"),
		(str_store_string, 8, "@none"),
		(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
			(this_or_next|troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(troop_slot_eq, ":troop", slot_troop_occupation, 9),
			(call_script, "script_troop_get_player_relation", ":troop"),
			(assign, ":var_4", reg0),
			(try_begin),
				(gt, ":var_4", 20),
				(try_begin),
					(eq, ":var_1", 0),
					(str_store_troop_name, 8, ":troop"),
				(else_try),
					(eq, ":var_1", 1),
					(str_store_troop_name, 7, ":troop"),
					(str_store_string, 8, "@{s7} and {s8}"),
				(else_try),
					(str_store_troop_name, 7, ":troop"),
					(str_store_string, 8, "@{!}{s7}, {s8}"),
				(try_end),
				(val_add, ":var_1", 1),
			(else_try),
				(lt, ":var_4", -20),
				(try_begin),
					(eq, ":var_2", 0),
					(str_store_troop_name, 6, ":troop"),
				(else_try),
					(eq, ":var_2", 1),
					(str_store_troop_name, 5, ":troop"),
					(str_store_string, 6, "@{s5} and {s6}"),
				(else_try),
					(str_store_troop_name, 5, ":troop"),
					(str_store_string, 6, "@{!}{s5}, {s6}"),
				(try_end),
				(val_add, ":var_2", 1),
			(try_end),
		(try_end),
		(str_clear, 12),
		(try_begin),
			(gt, "$player_right_to_rule", 0),
			(assign, reg12, "$player_right_to_rule"),
			(str_store_string, 12, "str__right_to_rule_reg12"),
		(try_end),
		(str_clear, 15),
		(try_begin),
			(this_or_next|gt, "$claim_arguments_made", 0),
			(this_or_next|gt, "$ruler_arguments_made", 0),
			(this_or_next|gt, "$victory_arguments_made", 0),
			(this_or_next|gt, "$lords_arguments_made", 0),
			(eq, 1, 0),
			(assign, reg3, "$claim_arguments_made"),
			(assign, reg4, "$ruler_arguments_made"),
			(assign, reg5, "$victory_arguments_made"),
			(assign, reg6, "$lords_arguments_made"),
			(assign, reg7, "$benefit_arguments_made"),
			(str_store_string, 15, "str_political_arguments_made_legality_reg3_rights_of_lords_reg4_unificationpeace_reg5_rights_of_commons_reg6_fief_pledges_reg7"),
		(try_end),
		(assign, reg3, "$player_honor"),
		(troop_get_slot, reg2, "trp_player", slot_troop_renown),
		(str_store_string, 9, "str_renown_reg2_honour_rating_reg3s12_friends_s8_enemies_s6_s9"),
		(call_script, "script_get_number_of_hero_centers", "trp_player"),
		(assign, ":var_5", reg0),
		(try_begin),
			(gt, ":var_5", 0),
			(try_for_range, ":number", 0, ":var_5"),
				(call_script, "script_troop_get_leaded_center_with_index", "trp_player", ":number"),
				(assign, ":var_7", reg0),
				(try_begin),
					(eq, ":number", 0),
					(str_store_party_name, 8, ":var_7"),
				(else_try),
					(eq, ":number", 1),
					(str_store_party_name, 7, ":var_7"),
					(str_store_string, 8, "@{s7} and {s8}"),
				(else_try),
					(str_store_party_name, 7, ":var_7"),
					(str_store_string, 8, "@{!}{s7}, {s8}"),
				(try_end),
			(try_end),
			(str_store_string, 9, "@Your estates are: {s8}.^{s9}"),
		(try_end),
		(try_begin),
			(gt, "$players_kingdom", 0),
			(str_store_faction_name, 8, "$players_kingdom"),
			(try_begin),
				(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
				(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
				(ge, reg0, 50),
				(str_store_string, 9, "str_you_are_king_queen_of_s8_s9"),
			(else_try),
				(this_or_next|is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
				(neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
				(str_store_string, 9, "str_you_are_a_lord_lady_of_s8_s9"),
			(else_try),
				(str_store_string, 9, "str_you_are_king_queen_of_s8_s9"),
			(try_end),
		(try_end)
	],
	[
		("continue",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! - increase Right to Rule",
		[
			(val_add, "$player_right_to_rule", 10),
			(jump_to_menu, "mnu_character_report")
		], "."),

		("continue",
		[
			(eq, "$cheat_mode", 1),
			(str_store_troop_name, 14, "$g_talk_troop")
		],
		"{!}CHEAT! - increase your relation with {s14}",
		[
			(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 10),
			(jump_to_menu, "mnu_character_report")
		], "."),

		("continue",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! - increase honor",
		[
			(val_add, "$player_honor", 10),
			(jump_to_menu, "mnu_character_report")
		], "."),

		("continue",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! - increase renown",
		[
			(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
			(val_add, ":player_renown", 50),
			(troop_set_slot, "trp_player", slot_troop_renown, ":player_renown"),
			(jump_to_menu, "mnu_character_report")
		], "."),

		("continue",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! - increase persuasion",
		[
			(troop_raise_skill, "trp_player", "skl_persuasion", 1),
			(jump_to_menu, "mnu_character_report")
		], "."),

		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_reports")
		], ".")
	]
	),

	("party_size_report", 0, "{s1}",
	"none",
	[
		(call_script, "script_game_get_party_companion_limit"),
		(assign, ":var_1", reg0),
		(store_skill_level, ":skill_level_leadership_player", "skl_leadership", "trp_player"),
		(val_mul, ":skill_level_leadership_player", 5),
		(store_attribute_level, ":attribute_level_player_3", "trp_player", 3),
		(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
		(val_div, ":player_renown", 25),
		(try_begin),
			(gt, ":skill_level_leadership_player", 0),
			(str_store_string, 2, "@{!} +"),
		(else_try),
			(str_store_string, 2, "str_space"),
		(try_end),
		(try_begin),
			(gt, ":attribute_level_player_3", 0),
			(str_store_string, 3, "@{!} +"),
		(else_try),
			(str_store_string, 3, "str_space"),
		(try_end),
		(try_begin),
			(gt, ":player_renown", 0),
			(str_store_string, 4, "@{!} +"),
		(else_try),
			(str_store_string, 4, "str_space"),
		(try_end),
		(assign, reg5, ":var_1"),
		(assign, reg1, ":skill_level_leadership_player"),
		(assign, reg2, ":attribute_level_player_3"),
		(assign, reg3, ":player_renown"),
		(try_begin),
			(gt, reg9, 0),
			(str_store_string, 5, "@{!} +{reg9}"),
		(else_try),
			(str_store_string, 5, "str_space"),
		(try_end),
		(try_begin),
			(gt, reg8, 0),
			(str_store_string, 6, "@{!} +{reg8}"),
		(else_try),
			(str_store_string, 6, "str_space"),
		(try_end),
		(try_begin),
			(gt, reg7, 0),
			(str_store_string, 7, "@{!} +{reg7}"),
		(else_try),
			(str_store_string, 7, "str_space"),
		(try_end),
		(try_begin),
			(gt, reg6, 0),
			(str_store_string, 8, "@{!} +{reg6}"),
		(else_try),
			(str_store_string, 8, "str_space"),
		(try_end),
		(str_store_string, 1, "@Current party size limit is {reg5}.^Current party size modifiers are:^^Base size:  +30^Leadership: {s2}{reg1}^Charisma: {s3}{reg2}^Renown: {s4}{reg3}^^Lord: {s5}^Castles: {s6}^Marshall: {s7}^King: {s8}^TOTAL:  {reg5}")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_party_reports")
		], ".")
	]
	),

	("faction_relations_report", 0, "{s1}",
	"none",
	[
		(str_clear, 2),
		(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(faction_slot_eq, ":faction", slot_faction_state, 0),
			(neq, ":faction", "fac_player_supporters_faction"),
			(store_relation, ":relation_player_supporters_faction_faction", "fac_player_supporters_faction", ":faction"),
			(try_begin),
				(ge, ":relation_player_supporters_faction_faction", 90),
				(str_store_string, 3, "@Loyal"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", 80),
				(str_store_string, 3, "@Devoted"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", 70),
				(str_store_string, 3, "@Fond"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", 60),
				(str_store_string, 3, "@Gracious"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", 50),
				(str_store_string, 3, "@Friendly"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", 40),
				(str_store_string, 3, "@Supportive"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", 30),
				(str_store_string, 3, "@Favorable"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", 20),
				(str_store_string, 3, "@Cooperative"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", 10),
				(str_store_string, 3, "@Accepting"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", 0),
				(str_store_string, 3, "@Indifferent"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", -10),
				(str_store_string, 3, "@Suspicious"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", -20),
				(str_store_string, 3, "@Grumbling"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", -30),
				(str_store_string, 3, "@Hostile"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", -40),
				(str_store_string, 3, "@Resentful"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", -50),
				(str_store_string, 3, "@Angry"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", -60),
				(str_store_string, 3, "@Hateful"),
			(else_try),
				(ge, ":relation_player_supporters_faction_faction", -70),
				(str_store_string, 3, "@Revengeful"),
			(else_try),
				(str_store_string, 3, "@Vengeful"),
			(try_end),
			(str_store_faction_name, 4, ":faction"),
			(assign, reg1, ":relation_player_supporters_faction_faction"),
			(str_store_string, 2, "@{!}{s2}^{s4}: {reg1} ({s3})"),
		(try_end),
		(str_store_string, 1, "@Your relation with the sovereignties are:^{s2}")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_reports")
		], ".")
	]
	),

	("camp", mnf_scale_picture, "You find a suitable place to camp.^{s15}",
	"none",
	[
		(set_background_mesh, "mesh_pic_camp"),
		(str_clear, 15),
		(str_store_string, 15, "@ "),
		(try_begin),
			(party_get_slot, ":main_party_village_bound_center", "p_main_party", slot_village_bound_center),
			(this_or_next|ge, ":main_party_village_bound_center", 1),
			(party_slot_eq, "p_main_party", slot_village_market_town, 1),
			(str_store_string, 15, "str_entrench"),
		(try_end),
		(store_add, ":value", "$g_prisoner_recruit_last_time", 24),
		(store_current_hours, ":current_hours"),
		(try_begin),
			(ge, ":current_hours", ":value"),
			(str_store_string, 1, "@You can recruit your prisoners to your party now."),
		(else_try),
			(store_sub, reg1, ":value", ":current_hours"),
			(store_sub, reg2, reg1, 1),
			(str_store_string, 1, "@You need to wait {reg1} {reg2?hours:hour} to recruit your prisoners."),
		(try_end)
	],
	[
		("camp_recruit_prisoners",
		[
			(troops_can_join, 1),
			(store_current_hours, ":current_hours"),
			(val_sub, ":current_hours", 24),
			(ge, ":current_hours", "$g_prisoner_recruit_last_time"),
			(try_begin),
				(gt, "$g_prisoner_recruit_last_time", 0),
				(assign, "$g_prisoner_recruit_troop_id", 0),
				(assign, "$g_prisoner_recruit_size", 0),
				(assign, "$g_prisoner_recruit_last_time", 0),
			(try_end)
		],
		"Recruit some of your prisoners to your company.",
		[
			(jump_to_menu, "mnu_camp_recruit_prisoners")
		], "."),

		("camp_manage_inventory",
		[
			(assign, ":var_1", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
				(is_between, ":party_stack_troop_id_main_party_number", "trp_npc1", "trp_kingdom_1_lord"),
				(val_add, ":var_1", 1),
			(try_end),
			(gt, ":var_1", 0)
		],
		"Manage your companions' inventory.",
		[
			(troop_clear_inventory, "trp_temp_troop"),
			(assign, "$return_menu", "mnu_camp"),
			(assign, "$inventory_menu_offset", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
				(is_between, ":party_stack_troop_id_main_party_number", "trp_npc1", "trp_kingdom_1_lord"),
				(call_script, "script_transfer_inventory", ":party_stack_troop_id_main_party_number", "trp_temp_troop", 0),
			(try_end),
			(troop_sort_inventory, "trp_temp_troop"),
			(jump_to_menu, "mnu_manage_loot_pool")
		], "."),

		("camp_action",
		[],
		"Take an action.",
		[
			(jump_to_menu, "mnu_camp_action")
		], "."),

		("action_prebattle_custom_divisions",
		[],
		"Manage Split Troop Assignments.",
		[
			(start_presentation, "prsnt_prebattle_custom_divisions")
		], "."),

		("camp_wait_here",
		[],
		"Wait here for some time.",
		[
			(assign, "$g_camp_mode", 1),
			(assign, "$g_infinite_camping", 0),
			(assign, "$g_player_icon_state", 1),
			(try_begin),
				(party_is_active, "p_main_party"),
				(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
				(try_begin),
					(eq, ":current_terrain_main_party", 5),
					(unlock_achievement, 28),
				(else_try),
					(eq, ":current_terrain_main_party", 0),
					(assign, "$g_player_icon_state", 2),
					(party_set_flags, "p_main_party", 512, 1),
				(try_end),
			(try_end),
			(rest_for_hours_interactive, 8760, 5, 1),
			(change_screen_map)
		], "."),

		("camp_inspect",
		[
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(neq, ":current_terrain_main_party", 15)
		],
		"Inspect your camp.",
		[
			(call_script, "script_visit_camp")
		], "."),

		("camp_entrench",
		[
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(neq, ":current_terrain_main_party", 15),
			(party_slot_eq, "p_main_party", slot_village_bound_center, 0),
			(assign, ":value", 0),
			(try_for_parties, ":var_3"),
				(eq, ":value", 0),
				(party_slot_eq, ":var_3", slot_party_type, 22),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_var_3_main_party", ":var_3", "p_main_party"),
				(try_begin),
					(le, ":distance_to_party_from_party_var_3_main_party", 1),
					(str_store_string, 1, "@Return to your fortifications."),
					(assign, ":value", 1),
					(assign, "$current_camp_party", ":var_3"),
				(try_end),
			(try_end),
			(try_begin),
				(eq, ":value", 0),
				(call_script, "script_party_entrench_time"),
				(str_store_string, 1, "@Spend {reg5} hours entrenching your camp site."),
				(assign, "$current_camp_party", -1),
			(try_end)
		],
		"{s1}",
		[
			(assign, ":value", 0),
			(store_current_hours, ":current_hours"),
			(try_begin),
				(player_has_item, "itm_trade_tools"),
				(assign, ":value", 1),
			(try_end),
			(try_begin),
				(eq, ":value", 1),
				(try_begin),
					(lt, "$current_camp_party", 0),
					(call_script, "script_party_entrench_time"),
					(store_add, "$entrench_time", ":current_hours", reg5),
					(call_script, "script_change_player_party_morale", -10),
					(party_set_slot, "p_main_party", slot_village_bound_center, -1),
					(assign, "$g_camp_mode", 1),
					(assign, "$g_infinite_camping", 0),
					(assign, "$g_player_icon_state", 1),
					(rest_for_hours_interactive, 168, 5, 1),
					(change_screen_return),
				(else_try),
					(gt, "$current_camp_party", 0),
					(party_set_slot, "p_main_party", slot_village_bound_center, 1),
					(display_message, "@ You have returned to a fortified position."),
					(party_set_slot, "$current_camp_party", slot_village_state, 1),
					(party_clear_particle_systems, "$current_camp_party"),
					(assign, "$entrench_time", 0),
					(assign, "$g_camp_mode", 1),
					(assign, "$g_infinite_camping", 0),
					(assign, "$g_player_icon_state", 1),
					(jump_to_menu, "mnu_camp"),
				(try_end),
			(else_try),
				(eq, ":value", 0),
				(display_message, "@ You must have tools in inventory to entrench your camp site."),
				(jump_to_menu, "mnu_camp"),
			(try_end)
		], "."),

		("camp_mod_opition",
		[],
		"Mod Options.",
		[
			(start_presentation, "prsnt_mod_option")
		], "."),

		("camp_cheat",
		[
			(ge, "$cheat_mode", 1)
		],
		"CHEAT MENU!",
		[
			(jump_to_menu, "mnu_camp_cheat")
		], "."),

		("resume_travelling",
		[],
		"Resume travelling.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("camp_cheat", 0, "Select a cheat:",
	"none",
	[],
	[
		("camp_cheat_find_item",
		[],
		"Find an item...",
		[
			(jump_to_menu, "mnu_cheat_find_item")
		], "."),

		("camp_cheat_find_item",
		[],
		"Change weather..",
		[
			(jump_to_menu, "mnu_cheat_change_weather")
		], "."),

		("camp_cheat_1",
		[],
		"{!}Increase player renown.",
		[
			(str_store_string, 1, "@Your renown has increased by 100. "),
			(call_script, "script_change_troop_renown", "trp_player", 100),
			(jump_to_menu, "mnu_camp_cheat")
		], "."),

		("camp_cheat_2",
		[],
		"{!}Increase player honor.",
		[
			(assign, reg7, "$player_honor"),
			(val_add, reg7, 1),
			(display_message, "@You honor has increased by 1 and it is now {reg7}."),
			(val_add, "$player_honor", 1),
			(jump_to_menu, "mnu_camp_cheat")
		], "."),

		("camp_cheat_3",
		[],
		"{!}Update political notes.",
		[
			(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(call_script, "script_update_troop_political_notes", ":troop"),
			(try_end),
			(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(call_script, "script_update_faction_political_notes", ":faction"),
			(try_end)
		], "."),

		("camp_cheat_4",
		[],
		"{!}Update troop notes.",
		[
			(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(call_script, "script_update_troop_notes", ":troop"),
			(try_end),
			(try_for_range, ":troop_2", "trp_knight_1_1_wife", "trp_heroes_end"),
				(call_script, "script_update_troop_notes", ":troop_2"),
				(call_script, "script_update_troop_political_notes", ":troop_2"),
				(call_script, "script_update_troop_location_notes", ":troop_2", 0),
			(try_end)
		], "."),

		("camp_cheat_5",
		[],
		"{!}Scramble minstrels.",
		[
			(call_script, "script_update_tavern_minstrels")
		], "."),

		("camp_cheat_6",
		[],
		"{!}Infinite camp",
		[
			(assign, "$g_camp_mode", 1),
			(assign, "$g_infinite_camping", 1),
			(assign, "$g_player_icon_state", 1),
			(rest_for_hours_interactive, 87600, 20),
			(change_screen_return)
		], "."),

		("camp_cheat_7",
		[
			(troop_slot_ge, "trp_player", 30, 1)
		],
		"{!}Divorce player spouse",
		[
			(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
			(troop_set_slot, ":player_spouse", slot_troop_spouse, -1),
			(troop_set_slot, "trp_player", slot_troop_spouse, -1),
			(call_script, "script_change_player_relation_with_troop", ":player_spouse", -40),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(neq, ":troop", ":player_spouse"),
				(call_script, "script_dplmc_troop_get_family_relation_to_troop", ":player_spouse", ":troop"),
				(gt, reg0, 0),
				(val_mul, reg0, -2),
				(val_div, reg0, 3),
				(val_min, reg0, -1),
				(call_script, "script_change_player_relation_with_troop", ":troop", reg0),
			(try_end)
		], "."),

		("cheat_faction_orders",
		[
			(ge, "$cheat_mode", 1)
		],
		"{!}Cheat: Set Debug messages to All.",
		[
			(assign, "$cheat_mode", 1),
			(jump_to_menu, "mnu_camp_cheat")
		], "."),

		("cheat_faction_orders",
		[
			(ge, "$cheat_mode", 1),
			(neq, "$cheat_mode", 3)
		],
		"{!}Cheat: Set Debug messages to Econ Only.",
		[
			(assign, "$cheat_mode", 3),
			(jump_to_menu, "mnu_camp_cheat")
		], "."),

		("cheat_faction_orders",
		[
			(ge, "$cheat_mode", 1),
			(neq, "$cheat_mode", 4)
		],
		"{!}Cheat: Set Debug messages to Political Only.",
		[
			(assign, "$cheat_mode", 4),
			(jump_to_menu, "mnu_camp_cheat")
		], "."),

		("back_to_camp_menu",
		[],
		"{!}Back to camp menu.",
		[
			(jump_to_menu, "mnu_camp")
		], ".")
	]
	),

	("cheat_find_item", 0, "{!}Current item range: {reg5} to {reg6}",
	"none",
	[
		(assign, reg5, "$cheat_find_item_range_begin"),
		(store_add, reg6, "$cheat_find_item_range_begin", 96),
		(val_min, reg6, "itm_items_end"),
		(val_sub, reg6, 1)
	],
	[
		("cheat_find_item_next_range",
		[],
		"{!}Move to next item range.",
		[
			(val_add, "$cheat_find_item_range_begin", 96),
			(try_begin),
				(ge, "$cheat_find_item_range_begin", "itm_items_end"),
				(assign, "$cheat_find_item_range_begin", 0),
			(try_end),
			(jump_to_menu, "mnu_cheat_find_item")
		], "."),

		("cheat_find_item_choose_this",
		[],
		"{!}Choose from this range.",
		[
			(troop_clear_inventory, "trp_find_item_cheat"),
			(store_add, ":value", "$cheat_find_item_range_begin", 96),
			(val_min, ":value", "itm_items_end"),
			(store_sub, ":value_2", ":value", "$cheat_find_item_range_begin"),
			(try_for_range, ":number", 0, ":value_2"),
				(store_add, ":value_3", "$cheat_find_item_range_begin", ":number"),
				(troop_add_items, "trp_find_item_cheat", ":value_3", 1),
			(try_end),
			(change_screen_trade, "trp_find_item_cheat")
		], "."),

		("camp_action_4",
		[],
		"{!}Back to camp menu.",
		[
			(jump_to_menu, "mnu_camp")
		], ".")
	]
	),

	("cheat_change_weather", 0, "{!}Current cloud amount: {reg5}^Current Fog Strength: {reg6}",
	"none",
	[
		(get_global_cloud_amount, reg5),
		(get_global_haze_amount, reg6)
	],
	[
		("cheat_increase_cloud",
		[],
		"{!}Increase Cloud Amount.",
		[
			(get_global_cloud_amount, ":global_cloud_amount"),
			(val_add, ":global_cloud_amount", 5),
			(val_min, ":global_cloud_amount", 10),
			(set_global_cloud_amount, ":global_cloud_amount")
		], "."),

		("cheat_decrease_cloud",
		[],
		"{!}Decrease Cloud Amount.",
		[
			(get_global_cloud_amount, ":global_cloud_amount"),
			(val_sub, ":global_cloud_amount", 5),
			(val_max, ":global_cloud_amount", 0),
			(set_global_cloud_amount, ":global_cloud_amount")
		], "."),

		("cheat_increase_fog",
		[],
		"{!}Increase Fog Amount.",
		[
			(get_global_haze_amount, ":global_haze_amount"),
			(val_add, ":global_haze_amount", 5),
			(val_min, ":global_haze_amount", 10),
			(set_global_haze_amount, ":global_haze_amount")
		], "."),

		("cheat_decrease_fog",
		[],
		"{!}Decrease Fog Amount.",
		[
			(get_global_haze_amount, ":global_haze_amount"),
			(val_sub, ":global_haze_amount", 5),
			(val_max, ":global_haze_amount", 0),
			(set_global_haze_amount, ":global_haze_amount")
		], "."),

		("camp_action_4",
		[],
		"{!}Back to camp menu.",
		[
			(jump_to_menu, "mnu_camp")
		], ".")
	]
	),

	("camp_action", 0, "Choose an action:",
	"none",
	[],
	[
		("action_read_book",
		[],
		"Select a book to read.",
		[
			(jump_to_menu, "mnu_camp_action_read_book")
		], "."),

		("action_view_trade_ledger",
		[
			(store_item_kind_count, reg0, "itm_book_trade_ledger"),
			(ge, reg0, 1)
		],
		"Open your trade ledger.",
		[
			(assign, reg60, 0),
			(start_presentation, "prsnt_trade_ledger_basic")
		], "."),

		("action_change_party_name",
		[
			(troop_slot_ge, "trp_player", 7, 300)
		],
		"Change your party's name.",
		[
			(start_presentation, "prsnt_set_party_name")
		], "."),

		("action_rename_kingdom",
		[
			(eq, "$players_kingdom_name_set", 1),
			(faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
			(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player")
		],
		"Rename your sovereignty.",
		[
			(start_presentation, "prsnt_name_kingdom")
		], "."),

		("action_change_policies",
		[
			(gt, "$cheat_mode", 0),
			(eq, "$players_kingdom_name_set", 1),
			(faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
			(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player")
		],
		"{!}Cheat: Change kingdom policies",
		[
			(start_presentation, "prsnt_dplmc_policy_management")
		], "."),

		("jump_to_scene",
		[
			(eq, "$cheat_mode", 1)
		],
		"debug: test scene menu",
		[
			(jump_to_menu, "mnu_test_scene")
		], "."),

		("action_modify_banner",
		[
			(eq, "$freelancer_state", 0),
			(this_or_next|eq, "$g_player_banner_granted", 1),
			(eq, "$background_type", 6)
		],
		"Modify your noble banner.",
		[
			(start_presentation, "prsnt_banner_selection")
		], "."),

		("action_modify_factions_color",
		[],
		"Re-dye the factions.",
		[
			(assign, "$temp", 8),
			(start_presentation, "prsnt_change_all_factions_color")
		], "."),

		("action_export_import",
		[],
		"Export or import character history.",
		[
			(assign, "$g_player_troop", "trp_player"),
			(jump_to_menu, "mnu_export_import_npcs")
		], "."),

		("action_retire",
		[],
		"Retire from adventuring.",
		[
			(jump_to_menu, "mnu_retirement_verify")
		], "."),

		("camp_action_4",
		[],
		"Back to camp menu.",
		[
			(jump_to_menu, "mnu_camp")
		], ".")
	]
	),

	("export_import_npcs", mnf_enable_hot_keys, "Please choose a character, then press the C key to view and export or import the chosen character history.^^You choose {reg0?{s0}:none}.",
	"none",
	[
		(assign, reg0, "$g_player_troop"),
		(str_store_troop_name, 0, "$g_player_troop")
	],
	[
		("export_import_back",
		[],
		"Go back",
		[
			(assign, "$g_player_troop", "trp_player"),
			(set_player_troop, "$g_player_troop"),
			(jump_to_menu, "mnu_camp_action")
		], "."),

		("export_import_npc1",
		[
			(store_add, ":value", "trp_npc1", 0),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 0),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc2",
		[
			(store_add, ":value", "trp_npc1", 1),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 1),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc3",
		[
			(store_add, ":value", "trp_npc1", 2),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 2),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc4",
		[
			(store_add, ":value", "trp_npc1", 3),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 3),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc5",
		[
			(store_add, ":value", "trp_npc1", 4),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 4),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc6",
		[
			(store_add, ":value", "trp_npc1", 5),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 5),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc7",
		[
			(store_add, ":value", "trp_npc1", 6),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 6),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc8",
		[
			(store_add, ":value", "trp_npc1", 7),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 7),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc9",
		[
			(store_add, ":value", "trp_npc1", 8),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 8),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc10",
		[
			(store_add, ":value", "trp_npc1", 9),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 9),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc11",
		[
			(store_add, ":value", "trp_npc1", 10),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 10),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc12",
		[
			(store_add, ":value", "trp_npc1", 11),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 11),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_next",
		[],
		"Next page",
		[
			(jump_to_menu, "mnu_export_import_npcs_2")
		], ".")
	]
	),

	("export_import_npcs_2", mnf_enable_hot_keys, "Please choose a character, then press the C key to view and export or import the chosen character history.^^You choose {reg0?{s0}:none}.",
	"none",
	[
		(assign, reg0, "$g_player_troop"),
		(str_store_troop_name, 0, "$g_player_troop")
	],
	[
		("export_import_prev",
		[],
		"Previous page",
		[
			(jump_to_menu, "mnu_export_import_npcs")
		], "."),

		("export_import_npc13",
		[
			(store_add, ":value", "trp_npc1", 12),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 12),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc14",
		[
			(store_add, ":value", "trp_npc1", 13),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 13),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc15",
		[
			(store_add, ":value", "trp_npc1", 14),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 14),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc16",
		[
			(store_add, ":value", "trp_npc1", 15),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 15),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc17",
		[
			(store_add, ":value", "trp_npc1", 16),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 16),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc18",
		[
			(store_add, ":value", "trp_npc1", 17),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 17),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc19",
		[
			(store_add, ":value", "trp_npc1", 18),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 18),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc20",
		[
			(store_add, ":value", "trp_npc1", 19),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 19),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc21",
		[
			(store_add, ":value", "trp_npc1", 20),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 20),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc22",
		[
			(store_add, ":value", "trp_npc1", 21),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 21),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], "."),

		("export_import_npc23",
		[
			(store_add, ":value", "trp_npc1", 22),
			(str_store_troop_name, 0, ":value")
		],
		"{s0}",
		[
			(store_add, ":value", "trp_npc1", 22),
			(assign, "$g_player_troop", ":value"),
			(set_player_troop, "$g_player_troop")
		], ".")
	]
	),

	("camp_recruit_prisoners", 0, "You offer your prisoners freedom if they agree to join you as soldiers. {s18}",
	"none",
	[
		(assign, ":value", 0),
		(party_get_num_prisoner_stacks, ":num_prisoner_stacks_main_party", "p_main_party"),
		(try_for_range, ":number", 0, ":num_prisoner_stacks_main_party"),
			(party_prisoner_stack_get_troop_id, ":party_prisoner_stack_troop_id_main_party_number", "p_main_party", ":number"),
			(neg|troop_is_hero, ":party_prisoner_stack_troop_id_main_party_number"),
			(val_add, ":value", 1),
		(try_end),
		(try_begin),
			(eq, ":value", 0),
			(jump_to_menu, "mnu_camp_no_prisoners"),
		(else_try),
			(eq, "$g_prisoner_recruit_troop_id", 0),
			(store_current_hours, "$g_prisoner_recruit_last_time"),
			(store_random_in_range, ":random_in_range_0_100", 0, 100),
			(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
			(store_sub, ":value_2", 15, ":skill_level_persuasion_player"),
			(val_mul, ":value_2", 4),
			(try_begin),
				(lt, ":random_in_range_0_100", ":value_2"),
				(assign, "$g_prisoner_recruit_troop_id", -7),
			(else_try),
				(assign, ":value", 0),
				(party_get_num_prisoner_stacks, ":num_prisoner_stacks_main_party", "p_main_party"),
				(try_for_range, ":number", 0, ":num_prisoner_stacks_main_party"),
					(party_prisoner_stack_get_troop_id, ":party_prisoner_stack_troop_id_main_party_number", "p_main_party", ":number"),
					(neg|troop_is_hero, ":party_prisoner_stack_troop_id_main_party_number"),
					(val_add, ":value", 1),
				(try_end),
				(store_random_in_range, ":random_in_range_0_value", 0, ":value"),
				(try_for_range, ":number", 0, ":num_prisoner_stacks_main_party"),
					(party_prisoner_stack_get_troop_id, ":party_prisoner_stack_troop_id_main_party_number", "p_main_party", ":number"),
					(neg|troop_is_hero, ":party_prisoner_stack_troop_id_main_party_number"),
					(val_sub, ":random_in_range_0_value", 1),
					(lt, ":random_in_range_0_value", 0),
					(assign, ":num_prisoner_stacks_main_party", 0),
					(assign, "$g_prisoner_recruit_troop_id", ":party_prisoner_stack_troop_id_main_party_number"),
					(party_prisoner_stack_get_size, "$g_prisoner_recruit_size", "p_main_party", ":number"),
				(try_end),
			(try_end),
			(try_begin),
				(gt, "$g_prisoner_recruit_troop_id", 0),
				(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
				(val_min, "$g_prisoner_recruit_size", ":free_companions_capacity_main_party"),
				(assign, reg1, "$g_prisoner_recruit_size"),
				(gt, "$g_prisoner_recruit_size", 0),
				(try_begin),
					(gt, "$g_prisoner_recruit_size", 1),
					(assign, reg2, 1),
				(else_try),
					(assign, reg2, 0),
				(try_end),
				(str_store_troop_name_by_count, 1, "$g_prisoner_recruit_troop_id", "$g_prisoner_recruit_size"),
				(str_store_string, 18, "@{reg1} {s1} {reg2?accept:accepts} the offer."),
			(else_try),
				(str_store_string, 18, "@No one accepts the offer."),
			(try_end),
		(try_end)
	],
	[
		("camp_recruit_prisoners_accept",
		[
			(gt, "$g_prisoner_recruit_troop_id", 0)
		],
		"Take them.",
		[
			(remove_troops_from_prisoners, "$g_prisoner_recruit_troop_id", "$g_prisoner_recruit_size"),
			(party_add_members, "p_main_party", "$g_prisoner_recruit_troop_id", "$g_prisoner_recruit_size"),
			(store_mul, ":value", -3, "$g_prisoner_recruit_size"),
			(try_begin),
				(store_faction_of_troop, ":faction_of_troop_g_prisoner_recruit_troop_id", "$g_prisoner_recruit_troop_id"),
				(is_between, ":faction_of_troop_g_prisoner_recruit_troop_id", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(eq, ":faction_of_troop_g_prisoner_recruit_troop_id", "$players_kingdom"),
				(assign, ":value", 0),
				(assign, "$g_prisoner_recruit_troop_id", 0),
				(assign, "$g_prisoner_recruit_size", 0),
			(try_end),
			(val_add, "$g_persuasion_success_count", 1),
			(assign, reg1, "$g_persuasion_success_count"),
			(display_message, "@You have succeed to recruit prisoners for {reg1} times."),
			(try_begin),
				(le, "$g_persuasion_success_count", 250),
				(ge, "$g_persuasion_success_count", "$g_persuasion_success_limit"),
				(val_add, "$g_persuasion_success_limit", 50),
			(try_end),
			(call_script, "script_change_player_party_morale", ":value"),
			(jump_to_menu, "mnu_camp")
		], "."),

		("camp_recruit_prisoners_reject",
		[
			(gt, "$g_prisoner_recruit_troop_id", 0)
		],
		"Reject them.",
		[
			(jump_to_menu, "mnu_camp"),
			(assign, "$g_prisoner_recruit_troop_id", 0),
			(assign, "$g_prisoner_recruit_size", 0)
		], "."),

		("continue",
		[
			(le, "$g_prisoner_recruit_troop_id", 0)
		],
		"Go back.",
		[
			(jump_to_menu, "mnu_camp")
		], ".")
	]
	),

	("camp_no_prisoners", 0, "You have no prisoners to recruit from.",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_camp")
		], ".")
	]
	),

	("camp_action_read_book", 0, "Choose a book to read:",
	"none",
	[],
	[
		("action_read_book_1",
		[
			(store_add, ":value", "itm_book_tactics", 0),
			(player_has_item, ":value"),
			(item_slot_eq, ":value", slot_item_book_read, 0),
			(str_store_item_name, 1, ":value")
		],
		"{s1}.",
		[
			(store_add, ":value", "itm_book_tactics", 0),
			(assign, "$temp", ":value"),
			(jump_to_menu, "mnu_camp_action_read_book_start")
		], "."),

		("action_read_book_2",
		[
			(store_add, ":value", "itm_book_tactics", 1),
			(player_has_item, ":value"),
			(item_slot_eq, ":value", slot_item_book_read, 0),
			(str_store_item_name, 1, ":value")
		],
		"{s1}.",
		[
			(store_add, ":value", "itm_book_tactics", 1),
			(assign, "$temp", ":value"),
			(jump_to_menu, "mnu_camp_action_read_book_start")
		], "."),

		("action_read_book_3",
		[
			(store_add, ":value", "itm_book_tactics", 2),
			(player_has_item, ":value"),
			(item_slot_eq, ":value", slot_item_book_read, 0),
			(str_store_item_name, 1, ":value")
		],
		"{s1}.",
		[
			(store_add, ":value", "itm_book_tactics", 2),
			(assign, "$temp", ":value"),
			(jump_to_menu, "mnu_camp_action_read_book_start")
		], "."),

		("action_read_book_4",
		[
			(store_add, ":value", "itm_book_tactics", 3),
			(player_has_item, ":value"),
			(item_slot_eq, ":value", slot_item_book_read, 0),
			(str_store_item_name, 1, ":value")
		],
		"{s1}.",
		[
			(store_add, ":value", "itm_book_tactics", 3),
			(assign, "$temp", ":value"),
			(jump_to_menu, "mnu_camp_action_read_book_start")
		], "."),

		("action_read_book_5",
		[
			(store_add, ":value", "itm_book_tactics", 4),
			(player_has_item, ":value"),
			(item_slot_eq, ":value", slot_item_book_read, 0),
			(str_store_item_name, 1, ":value")
		],
		"{s1}.",
		[
			(store_add, ":value", "itm_book_tactics", 4),
			(assign, "$temp", ":value"),
			(jump_to_menu, "mnu_camp_action_read_book_start")
		], "."),

		("action_read_book_6",
		[
			(store_add, ":value", "itm_book_tactics", 5),
			(player_has_item, ":value"),
			(item_slot_eq, ":value", slot_item_book_read, 0),
			(str_store_item_name, 1, ":value")
		],
		"{s1}.",
		[
			(store_add, ":value", "itm_book_tactics", 5),
			(assign, "$temp", ":value"),
			(jump_to_menu, "mnu_camp_action_read_book_start")
		], "."),

		("action_read_book_7",
		[
			(store_add, ":value", "itm_book_tactics", 6),
			(player_has_item, ":value"),
			(item_slot_eq, ":value", slot_item_book_read, 0),
			(str_store_item_name, 1, ":value")
		],
		"{s1}.",
		[
			(store_add, ":value", "itm_book_tactics", 6),
			(assign, "$temp", ":value"),
			(jump_to_menu, "mnu_camp_action_read_book_start")
		], "."),

		("action_read_book_8",
		[
			(store_add, ":value", "itm_book_tactics", 7),
			(player_has_item, ":value"),
			(item_slot_eq, ":value", slot_item_book_read, 0),
			(str_store_item_name, 1, ":value")
		],
		"{s1}.",
		[
			(store_add, ":value", "itm_book_tactics", 7),
			(assign, "$temp", ":value"),
			(jump_to_menu, "mnu_camp_action_read_book_start")
		], "."),

		("action_read_book_9",
		[
			(store_add, ":value", "itm_book_tactics", 8),
			(player_has_item, ":value"),
			(item_slot_eq, ":value", slot_item_book_read, 0),
			(str_store_item_name, 1, ":value")
		],
		"{s1}.",
		[
			(store_add, ":value", "itm_book_tactics", 8),
			(assign, "$temp", ":value"),
			(jump_to_menu, "mnu_camp_action_read_book_start")
		], "."),

		("action_read_book_10",
		[
			(store_add, ":value", "itm_book_tactics", 9),
			(player_has_item, ":value"),
			(item_slot_eq, ":value", slot_item_book_read, 0),
			(str_store_item_name, 1, ":value")
		],
		"{s1}.",
		[
			(store_add, ":value", "itm_book_tactics", 9),
			(assign, "$temp", ":value"),
			(jump_to_menu, "mnu_camp_action_read_book_start")
		], "."),

		("action_read_book_11",
		[
			(store_add, ":value", "itm_book_tactics", 10),
			(player_has_item, ":value"),
			(item_slot_eq, ":value", slot_item_book_read, 0),
			(str_store_item_name, 1, ":value")
		],
		"{s1}.",
		[
			(store_add, ":value", "itm_book_tactics", 10),
			(assign, "$temp", ":value"),
			(jump_to_menu, "mnu_camp_action_read_book_start")
		], "."),

		("action_read_book_12",
		[
			(store_add, ":value", "itm_book_tactics", 11),
			(player_has_item, ":value"),
			(item_slot_eq, ":value", slot_item_book_read, 0),
			(str_store_item_name, 1, ":value")
		],
		"{s1}.",
		[
			(store_add, ":value", "itm_book_tactics", 11),
			(assign, "$temp", ":value"),
			(jump_to_menu, "mnu_camp_action_read_book_start")
		], "."),

		("action_read_book_13",
		[
			(store_add, ":value", "itm_book_tactics", 12),
			(player_has_item, ":value"),
			(item_slot_eq, ":value", slot_item_book_read, 0),
			(str_store_item_name, 1, ":value")
		],
		"{s1}.",
		[
			(store_add, ":value", "itm_book_tactics", 12),
			(assign, "$temp", ":value"),
			(jump_to_menu, "mnu_camp_action_read_book_start")
		], "."),

		("camp_action_4",
		[],
		"Back to camp menu.",
		[
			(jump_to_menu, "mnu_camp")
		], ".")
	]
	),

	("camp_action_read_book_start", 0, "{s1}",
	"none",
	[
		(assign, ":var_1", "$temp"),
		(str_store_item_name, 2, ":var_1"),
		(try_begin),
			(store_attribute_level, ":attribute_level_player_2", "trp_player", 2),
			(item_get_slot, ":var_1_intelligence_requirement", ":var_1", slot_item_intelligence_requirement),
			(le, ":var_1_intelligence_requirement", ":attribute_level_player_2"),
			(str_store_string, 1, "@You start reading {s2}. After a few pages, you feel you could learn a lot from this book. You decide to keep it close by and read whenever you have the time."),
			(assign, "$g_player_reading_book", ":var_1"),
		(else_try),
			(str_store_string, 1, "@You flip through the pages of {s2}, but you find the text confusing and difficult to follow. Try as you might, it soon gives you a headache, and you're forced to give up the attempt."),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_camp")
		], ".")
	]
	),

	("retirement_verify", 0, "You are at day {reg0}. Your current luck is {reg1}. Are you sure you want to retire?",
	"none",
	[
		(store_current_day, reg0),
		(assign, reg1, "$g_player_luck")
	],
	[
		("retire_yes",
		[],
		"Yes.",
		[
			(start_presentation, "prsnt_retirement")
		], "."),

		("retire_no",
		[],
		"No.",
		[
			(jump_to_menu, "mnu_camp")
		], ".")
	]
	),

	("end_game", 0, "The decision is made, and you resolve to give up your adventurer's life and settle down. You sell off your weapons and armour, gather up all your money, and ride off into the sunset....",
	"none",
	[],
	[
		("end_game_bye",
		[],
		"Farewell.",
		[
			(change_screen_quit)
		], ".")
	]
	),

	("cattle_herd", mnf_scale_picture, "You encounter a herd of cattle.",
	"none",
	[
		(play_sound, "snd_cow_moo"),
		(set_background_mesh, "mesh_pic_cattle")
	],
	[
		("cattle_drive_away",
		[],
		"Drive the cattle onward.",
		[
			(party_set_slot, "$g_encountered_party", slot_town_lord, 1),
			(party_set_ai_behavior, "$g_encountered_party", 10),
			(party_set_ai_object, "$g_encountered_party", "p_main_party"),
			(change_screen_return)
		], "."),

		("cattle_stop",
		[],
		"Bring the herd to a stop.",
		[
			(party_set_slot, "$g_encountered_party", slot_town_lord, 0),
			(party_set_ai_behavior, "$g_encountered_party", 0),
			(change_screen_return)
		], "."),

		("cattle_kill",
		[
			(assign, ":value", 1),
			(try_begin),
				(check_quest_active, "qst_move_cattle_herd"),
				(quest_slot_eq, "qst_move_cattle_herd", slot_quest_target_party, "$g_encountered_party"),
				(assign, ":value", 0),
			(try_end),
			(eq, ":value", 1)
		],
		"Slaughter some of the animals.",
		[
			(jump_to_menu, "mnu_cattle_herd_kill")
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("cattle_herd_kill", 0, "How many animals do you want to slaughter?",
	"none",
	[
		(party_get_num_companions, reg5, "$g_encountered_party")
	],
	[
		("cattle_kill_1",
		[
			(ge, reg5, 1)
		],
		"One.",
		[
			(call_script, "script_kill_cattle_from_herd", "$g_encountered_party", 1),
			(jump_to_menu, "mnu_cattle_herd_kill_end"),
			(change_screen_loot, "trp_temp_troop"),
			(play_sound, "snd_cow_slaughter")
		], "."),

		("cattle_kill_2",
		[
			(ge, reg5, 2)
		],
		"Two.",
		[
			(call_script, "script_kill_cattle_from_herd", "$g_encountered_party", 2),
			(jump_to_menu, "mnu_cattle_herd_kill_end"),
			(change_screen_loot, "trp_temp_troop"),
			(play_sound, "snd_cow_slaughter")
		], "."),

		("cattle_kill_3",
		[
			(ge, reg5, 3)
		],
		"Three.",
		[
			(call_script, "script_kill_cattle_from_herd", "$g_encountered_party", 3),
			(jump_to_menu, "mnu_cattle_herd_kill_end"),
			(change_screen_loot, "trp_temp_troop"),
			(play_sound, "snd_cow_slaughter")
		], "."),

		("cattle_kill_4",
		[
			(ge, reg5, 4)
		],
		"Four.",
		[
			(call_script, "script_kill_cattle_from_herd", "$g_encountered_party", 4),
			(jump_to_menu, "mnu_cattle_herd_kill_end"),
			(change_screen_loot, "trp_temp_troop"),
			(play_sound, "snd_cow_slaughter")
		], "."),

		("cattle_kill_5",
		[
			(ge, reg5, 5)
		],
		"Five.",
		[
			(call_script, "script_kill_cattle_from_herd", "$g_encountered_party", 5),
			(jump_to_menu, "mnu_cattle_herd_kill_end"),
			(change_screen_loot, "trp_temp_troop"),
			(play_sound, "snd_cow_slaughter")
		], "."),

		("go_back_dot",
		[],
		"Go back.",
		[
			(jump_to_menu, "mnu_cattle_herd")
		], ".")
	]
	),

	("cattle_herd_kill_end", 0, "{!}You shouldn't be reading this.",
	"none",
	[
		(change_screen_return)
	],
	[]
	),

	("arena_duel_fight", 0, "You and your opponent prepare to duel.",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$g_leave_encounter", 0),
			(try_begin),
				(is_between, "$g_encountered_party", "p_town_1", "p_castle_1"),
				(party_get_slot, ":g_encountered_party_town_arena", "$g_encountered_party", slot_town_arena),
			(else_try),
				(eq, "$g_start_arena_fight_at_nearest_town", 1),
				(assign, ":value", -1),
				(assign, ":value_2", 10000),
				(try_for_range, ":party", "p_town_1", "p_castle_1"),
					(store_distance_to_party_from_party, ":distance_to_party_from_party_party_g_encountered_party", ":party", "$g_encountered_party"),
					(lt, ":distance_to_party_from_party_party_g_encountered_party", ":value_2"),
					(assign, ":value_2", ":distance_to_party_from_party_party_g_encountered_party"),
					(assign, ":value", ":party"),
				(try_end),
				(try_begin),
					(ge, ":value", 0),
					(party_get_slot, ":g_encountered_party_town_arena", ":value", slot_town_arena),
				(try_end),
				(assign, "$g_start_arena_fight_at_nearest_town", 0),
			(else_try),
				(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
				(eq, ":current_terrain_main_party", 4),
				(assign, ":g_encountered_party_town_arena", "scn_training_ground_ranged_melee_3"),
			(else_try),
				(eq, ":current_terrain_main_party", 5),
				(assign, ":g_encountered_party_town_arena", "scn_training_ground_ranged_melee_4"),
			(else_try),
				(assign, ":g_encountered_party_town_arena", "scn_training_ground_ranged_melee_1"),
			(try_end),
			(modify_visitors_at_site, ":g_encountered_party_town_arena"),
			(reset_visitors),
			(set_visitor, 0, "trp_player"),
			(set_visitor, 1, "$g_duel_troop"),
			(set_jump_mission, "mt_duel_with_lord"),
			(jump_to_scene, ":g_encountered_party_town_arena"),
			(jump_to_menu, "mnu_arena_duel_conclusion"),
			(change_screen_mission)
		], ".")
	]
	),

	("arena_duel_conclusion", 0, "{!}{s11}",
	"none",
	[
		(try_begin),
			(eq, "$g_leave_encounter", 1),
			(change_screen_return),
		(try_end),
		(str_store_troop_name, 10, "$g_duel_troop"),
		(try_begin),
			(quest_slot_eq, "qst_duel_for_lady", slot_quest_target_troop, "$g_duel_troop"),
			(check_quest_failed, "qst_duel_for_lady"),
			(str_store_string, 11, "str_you_lie_stunned_for_several_minutes_then_stagger_to_your_feet_to_find_your_s10_standing_over_you_you_have_lost_the_duel"),
		(else_try),
			(quest_slot_eq, "qst_duel_for_lady", slot_quest_target_troop, "$g_duel_troop"),
			(check_quest_succeeded, "qst_duel_for_lady"),
			(str_store_string, 11, "str_s10_lies_in_the_arenas_dust_for_several_minutes_then_staggers_to_his_feet_you_have_won_the_duel"),
		(else_try),
			(quest_slot_eq, "qst_duel_courtship_rival", slot_quest_target_troop, "$g_duel_troop"),
			(check_quest_failed, "qst_duel_courtship_rival"),
			(str_store_string, 11, "str_you_lie_stunned_for_several_minutes_then_stagger_to_your_feet_to_find_your_s10_standing_over_you_you_have_lost_the_duel"),
		(else_try),
			(quest_slot_eq, "qst_duel_courtship_rival", slot_quest_target_troop, "$g_duel_troop"),
			(check_quest_succeeded, "qst_duel_courtship_rival"),
			(str_store_string, 11, "str_s10_lies_in_the_arenas_dust_for_several_minutes_then_staggers_to_his_feet_you_have_won_the_duel"),
		(else_try),
			(quest_slot_eq, "qst_duel_avenge_insult", slot_quest_target_troop, "$g_duel_troop"),
			(check_quest_succeeded, "qst_duel_avenge_insult"),
			(str_store_string, 11, "str_s10_lies_in_the_arenas_dust_for_several_minutes_then_staggers_to_his_feet_you_have_won_the_duel"),
		(else_try),
			(quest_slot_eq, "qst_duel_avenge_insult", slot_quest_target_troop, "$g_duel_troop"),
			(check_quest_failed, "qst_duel_avenge_insult"),
			(str_store_string, 11, "str_you_lie_stunned_for_several_minutes_then_stagger_to_your_feet_to_find_your_s10_standing_over_you_you_have_lost_the_duel"),
		(else_try),
			(quest_slot_eq, "qst_denounce_lord", slot_quest_target_troop, "$g_duel_troop"),
			(check_quest_succeeded, "qst_denounce_lord"),
			(str_store_string, 11, "str_s10_lies_in_the_arenas_dust_for_several_minutes_then_staggers_to_his_feet_you_have_won_the_duel"),
		(else_try),
			(quest_slot_eq, "qst_denounce_lord", slot_quest_target_troop, "$g_duel_troop"),
			(check_quest_failed, "qst_denounce_lord"),
			(str_store_string, 11, "str_you_lie_stunned_for_several_minutes_then_stagger_to_your_feet_to_find_your_s10_standing_over_you_you_have_lost_the_duel"),
		(else_try),
			(str_store_troop_name, 10, "$g_duel_troop"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(call_script, "script_get_meeting_scene"),
			(assign, ":var_1", reg0),
			(modify_visitors_at_site, ":var_1"),
			(reset_visitors),
			(set_visitor, 0, "trp_player"),
			(set_visitor, 17, "$g_duel_troop"),
			(set_jump_mission, "mt_conversation_encounter"),
			(jump_to_scene, ":var_1"),
			(assign, "$talk_context", 17),
			(change_screen_map_conversation, "$g_duel_troop")
		], ".")
	]
	),

	("simple_encounter", mnf_enable_hot_keys|mnf_scale_picture, "{s2} You have {reg10} troops fit for battle against their {reg11}. {s4}^{s15}",
	"none",
	[
		(str_clear, 4),
		(str_clear, 15),
		(str_store_string, 15, "@ "),
		(try_begin),
			(party_get_slot, ":main_party_village_bound_center", "p_main_party", slot_village_bound_center),
			(this_or_next|ge, ":main_party_village_bound_center", 1),
			(party_slot_eq, "p_main_party", slot_village_market_town, 1),
			(str_store_string, 15, "str_entrench"),
			(assign, "$cant_leave_encounter", 1),
		(try_end),
		(assign, "$g_enemy_party", "$g_encountered_party"),
		(assign, "$g_ally_party", -1),
		(call_script, "script_encounter_calculate_fit"),
		(try_begin),
			(eq, "$new_encounter", 1),
			(assign, "$new_encounter", 0),
			(assign, "$g_encounter_is_in_village", 0),
			(assign, "$g_encounter_type", 0),
			(try_begin),
				(party_slot_eq, "$g_enemy_party", slot_party_ai_state, 5),
				(party_get_slot, ":g_enemy_party_ai_object", "$g_enemy_party", slot_party_ai_object),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_g_enemy_party_ai_object_g_enemy_party", ":g_enemy_party_ai_object", "$g_enemy_party"),
				(try_begin),
					(lt, ":distance_to_party_from_party_g_enemy_party_ai_object_g_enemy_party", 4),
					(assign, "$g_encounter_is_in_village", ":g_enemy_party_ai_object"),
					(assign, "$g_encounter_type", 1),
				(try_end),
			(try_end),
			(try_begin),
				(gt, "$g_player_raiding_village", 0),
				(assign, "$g_encounter_is_in_village", "$g_player_raiding_village"),
				(assign, "$g_encounter_type", 2),
				(party_quick_attach_to_current_battle, "$g_encounter_is_in_village", 1),
				(str_store_string, 1, "@Villagers"),
				(display_message, "str_s1_joined_battle_enemy"),
			(else_try),
				(eq, "$g_encounter_type", 1),
				(party_quick_attach_to_current_battle, "$g_encounter_is_in_village", 0),
				(str_store_string, 1, "@Villagers"),
				(display_message, "str_s1_joined_battle_friend"),
			(try_end),
			(try_begin),
				(party_get_template_id, ":template_id_l_g_enemy_party", "$g_enemy_party"),
				(neq, ":template_id_l_g_enemy_party", "pt_routed_warriors"),
				(call_script, "script_let_nearby_parties_join_current_battle", 0, 0),
			(try_end),
			(call_script, "script_encounter_init_variables"),
			(assign, "$encountered_party_hostile", 0),
			(assign, "$encountered_party_friendly", 0),
			(try_begin),
				(gt, "$g_encountered_party_relation", 0),
				(neg|is_between, ":template_id_l_g_enemy_party", "pt_looters", "pt_merchant_caravan"),
				(assign, "$encountered_party_friendly", 1),
			(try_end),
			(try_begin),
				(party_get_template_id, ":template_id_l_g_enemy_party", "$g_enemy_party"),
				(eq, ":template_id_l_g_enemy_party", "pt_routed_warriors"),
				(assign, "$encountered_party_friendly", 0),
			(try_end),
			(try_begin),
				(lt, "$g_encountered_party_relation", 0),
				(assign, "$encountered_party_hostile", 1),
				(try_begin),
					(encountered_party_is_attacker),
					(assign, "$cant_leave_encounter", 1),
				(try_end),
			(try_end),
			(assign, "$talk_context", 2),
			(call_script, "script_setup_party_meeting", "$g_encountered_party"),
		(else_try),
			(try_begin),
				(eq, "$cant_leave_encounter", 1),
				(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
				(neq, ":current_terrain_main_party", 15),
				(call_script, "script_party_count_members_with_full_health", "p_main_party_backup"),
				(assign, ":var_6", reg0),
				(call_script, "script_party_count_members_with_full_health", "p_encountered_party_backup"),
				(val_add, ":var_6", reg0),
				(call_script, "script_party_count_members_with_full_health", "p_main_party"),
				(assign, ":var_7", reg0),
				(call_script, "script_party_count_members_with_full_health", "p_collective_enemy"),
				(val_add, ":var_7", reg0),
				(store_sub, ":value", ":var_6", 10),
				(lt, ":var_7", ":value"),
				(assign, "$cant_leave_encounter", 0),
			(try_end),
			(eq, "$g_leave_encounter", 1),
			(change_screen_return),
		(try_end),
		(try_begin),
			(party_is_active, "$g_encountered_party"),
			(str_store_party_name, 1, "$g_encountered_party"),
			(try_begin),
				(eq, "$g_encounter_type", 0),
				(str_store_string, 2, "@You have encountered {s1}."),
			(else_try),
				(eq, "$g_encounter_type", 1),
				(str_store_party_name, 3, "$g_encounter_is_in_village"),
				(str_store_string, 2, "@You have engaged {s1} while they were raiding {s3}."),
			(else_try),
				(eq, "$g_encounter_type", 2),
				(str_store_party_name, 3, "$g_encounter_is_in_village"),
				(str_store_string, 2, "@You were caught by {s1} while your forces were raiding {s3}."),
			(try_end),
		(try_end),
		(try_begin),
			(call_script, "script_party_count_members_with_full_health", "p_collective_enemy"),
			(assign, ":var_9", reg0),
			(assign, ":value_2", 0),
			(try_begin),
				(eq, "$g_battle_result", 1),
				(this_or_next|le, ":var_9", 0),
				(le, ":var_9", "$num_routed_enemies"),
				(assign, ":value_2", 1),
			(else_try),
				(eq, "$g_engaged_enemy", 1),
				(this_or_next|le, ":var_9", 0),
				(le, "$g_enemy_fit_for_battle", "$num_routed_enemies"),
				(ge, "$g_friend_fit_for_battle", 1),
				(assign, ":value_2", 1),
			(try_end),
			(this_or_next|eq, ":value_2", 1),
			(eq, "$g_enemy_surrenders", 1),
			(assign, "$g_next_menu", -1),
			(jump_to_menu, "mnu_total_victory"),
		(else_try),
			(call_script, "script_party_count_members_with_full_health", "p_main_party"),
			(assign, ":var_11", reg0),
			(assign, ":value_3", 0),
			(try_begin),
				(eq, "$g_battle_result", -1),
				(le, ":var_11", "$num_routed_us"),
				(assign, ":value_3", 1),
			(else_try),
				(eq, "$g_engaged_enemy", 1),
				(ge, "$g_enemy_fit_for_battle", 1),
				(le, "$g_friend_fit_for_battle", 0),
				(assign, ":value_3", 1),
			(try_end),
			(this_or_next|eq, ":value_3", 1),
			(eq, "$g_player_surrenders", 1),
			(assign, "$g_next_menu", "mnu_captivity_start_wilderness"),
			(jump_to_menu, "mnu_total_defeat"),
		(try_end),
		(try_begin),
			(this_or_next|eq, "$g_encountered_party_template", "pt_looters"),
			(this_or_next|eq, "$g_encountered_party_template", "pt_looters_r"),
			(eq, "$g_encountered_party_template", "pt_looters_e"),
			(set_background_mesh, "mesh_pic_bandits"),
		(else_try),
			(this_or_next|eq, "$g_encountered_party_template", "pt_mountain_bandits"),
			(this_or_next|eq, "$g_encountered_party_template", "pt_mountain_bandits_r"),
			(eq, "$g_encountered_party_template", "pt_mountain_bandits_e"),
			(set_background_mesh, "mesh_pic_mountain_bandits"),
		(else_try),
			(this_or_next|eq, "$g_encountered_party_template", "pt_steppe_bandits"),
			(this_or_next|eq, "$g_encountered_party_template", "pt_steppe_bandits_r"),
			(eq, "$g_encountered_party_template", "pt_steppe_bandits_e"),
			(set_background_mesh, "mesh_pic_steppe_bandits"),
		(else_try),
			(this_or_next|eq, "$g_encountered_party_template", "pt_sea_raiders"),
			(this_or_next|eq, "$g_encountered_party_template", "pt_sea_raiders_r"),
			(eq, "$g_encountered_party_template", "pt_sea_raiders_e"),
			(set_background_mesh, "mesh_pic_sea_raiders"),
		(else_try),
			(this_or_next|eq, "$g_encountered_party_template", "pt_forest_bandits"),
			(this_or_next|eq, "$g_encountered_party_template", "pt_forest_bandits_r"),
			(eq, "$g_encountered_party_template", "pt_forest_bandits_e"),
			(set_background_mesh, "mesh_pic_forest_bandits"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_deserters"),
			(set_background_mesh, "mesh_pic_deserters"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_slaver"),
			(set_background_mesh, "mesh_pic_slavers"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_escaped_slaves"),
			(set_background_mesh, "mesh_pic_bandits"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_clansmen"),
			(set_background_mesh, "mesh_pic_clansmen"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_raiders"),
			(set_background_mesh, "mesh_pic_raiders"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_outlaws"),
			(set_background_mesh, "mesh_pic_outlaws"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_rhoyne_outlaws"),
			(set_background_mesh, "mesh_pic_rhoyne_outlaws"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_crannogmen"),
			(set_background_mesh, "mesh_pic_crannogmen"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_taiga_bandits_e"),
			(set_background_mesh, "mesh_pic_forest_bandits"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_desert_bandits_e"),
			(set_background_mesh, "mesh_pic_desert_outlaws"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_elite_raiders"),
			(set_background_mesh, "mesh_pic_raiders"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_elite_wildlings"),
			(set_background_mesh, "mesh_pic_forest_bandits"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_elite_dothraki"),
			(set_background_mesh, "mesh_pic_steppe_bandits"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_beowulf_warband"),
			(set_background_mesh, "mesh_pic_defeat"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_wildfire_wights"),
			(set_background_mesh, "mesh_pic_prisoner_fem"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_new_template"),
			(set_background_mesh, "mesh_pic_rhoyne_outlaws"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_arrians"),
			(set_background_mesh, "mesh_pic_deserters"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_clansman_quest"),
			(set_background_mesh, "mesh_pic_clansmen"),
		(else_try),
			(eq, "$g_encountered_party_template", "pt_kingdom_hero_party"),
			(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_0", "$g_encountered_party", 0),
			(ge, ":party_stack_troop_id_g_encountered_party_0", 1),
			(troop_get_slot, ":party_stack_troop_id_g_encountered_party_0_original_faction", ":party_stack_troop_id_g_encountered_party_0", slot_troop_original_faction),
			(try_begin),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 31),
				(set_background_mesh, "mesh_pic_swad"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 32),
				(set_background_mesh, "mesh_pic_vaegir"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 33),
				(set_background_mesh, "mesh_pic_swad"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 34),
				(set_background_mesh, "mesh_pic_rhodock"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 35),
				(set_background_mesh, "mesh_pic_swad"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 36),
				(set_background_mesh, "mesh_pic_sarranid_encounter"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 37),
				(set_background_mesh, "mesh_pic_swad"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 38),
				(set_background_mesh, "mesh_pic_swad"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 39),
				(set_background_mesh, "mesh_pic_swad"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 40),
				(set_background_mesh, "mesh_pic_nord"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 41),
				(set_background_mesh, "mesh_pic_khergit"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 42),
				(set_background_mesh, "mesh_pic_khergit"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 43),
				(set_background_mesh, "mesh_pic_khergit"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 44),
				(set_background_mesh, "mesh_pic_khergit"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 45),
				(set_background_mesh, "mesh_pic_khergit"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 46),
				(set_background_mesh, "mesh_pic_khergit"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 47),
				(set_background_mesh, "mesh_pic_khergit"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 48),
				(set_background_mesh, "mesh_pic_nord"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 49),
				(set_background_mesh, "mesh_pic_swad"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 50),
				(set_background_mesh, "mesh_pic_sea_raiders"),
			(else_try),
				(eq, ":party_stack_troop_id_g_encountered_party_0_original_faction", 51),
				(set_background_mesh, "mesh_pic_steppe_bandits"),
			(try_end),
		(try_end),
		(str_store_troop_name, 7, "$g_player_troop"),
		(set_player_troop, "$g_player_troop"),
		(str_store_string, 4, "@^^Current Commander: {s7}"),
		(try_begin),
			(party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
			(str_store_string, 4, "@{s4}^^The troops you selected are ready to join you in battle."),
		(else_try),
			(str_store_string, 4, "@{s4}^^Your captains will deal with troop assignments."),
		(try_end),
		(try_begin),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
			(str_store_string, 4, "@{s4}^^Your orders have been sent to your captains."),
		(else_try),
			(str_store_string, 4, "@{s4}^^There is no tactical plan in place."),
		(try_end)
	],
	[
		("change_commander_simple_encounter",
		[
			(set_player_troop, "$g_player_troop")
		],
		"Change commander.",
		[
			(start_presentation, "prsnt_change_commander")
		], "."),

		("deployment",
		[
			(eq, "$encountered_party_friendly", 0),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(neq, ":current_terrain_main_party", 15),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0),
			(party_get_skill_level, ":skill_level_main_party_15", "p_main_party", 15),
			(ge, ":skill_level_main_party_15", 2),
			(call_script, "script_party_count_fit_for_battle", "p_collective_friends"),
			(assign, ":var_3", reg0),
			(call_script, "script_party_count_fit_for_battle", "p_collective_enemy"),
			(assign, ":var_4", reg0),
			(store_add, ":value", ":var_3", ":var_4"),
			(party_get_slot, ":main_party_center_accumulated_tariffs", "p_main_party", slot_center_accumulated_tariffs),
			(gt, ":value", ":main_party_center_accumulated_tariffs")
		],
		"Choose who will join you in battle.",
		[
			(assign, "$g_next_menu", "mnu_simple_encounter"),
			(start_presentation, "prsnt_prebattle_custom_deployment")
		], "."),

		("orders",
		[
			(eq, "$encountered_party_friendly", 0),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(neq, ":current_terrain_main_party", 15),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0),
			(party_get_skill_level, ":skill_level_main_party_15", "p_main_party", 15),
			(ge, ":skill_level_main_party_15", 2)
		],
		"Plan your battle with the enemy.",
		[
			(assign, "$g_next_menu", "mnu_simple_encounter"),
			(start_presentation, "prsnt_prebattle_orders")
		], "."),

		("do_orders",
		[
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1)
		],
		"Enough planning. To battle!",
		[
			(party_set_slot, "p_main_party", slot_center_shipyards, 0),
			(assign, "$g_battle_result", 0),
			(assign, "$g_engaged_enemy", 1),
			(party_get_template_id, ":template_id_l_g_encountered_party", "$g_encountered_party"),
			(try_begin),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_village_farmers"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_village_farmers_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_village_farmers_e"),
				(unlock_achievement, 27),
			(try_end),
			(call_script, "script_calculate_renown_value"),
			(call_script, "script_calculate_battle_advantage"),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(try_begin),
				(eq, "$g_encounter_type", 1),
				(assign, "$g_village_raid_evil", 0),
				(set_jump_mission, "mt_village_raid"),
				(party_get_slot, ":g_encounter_is_in_village_town_center", "$g_encounter_is_in_village", slot_town_center),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(eq, "$g_encounter_type", 2),
				(assign, "$g_village_raid_evil", 0),
				(set_jump_mission, "mt_village_raid"),
				(party_get_slot, ":g_encounter_is_in_village_town_center", "$g_encounter_is_in_village", slot_town_center),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(eq, "$g_encountered_party_template", "pt_wildfire_wights"),
				(assign, ":g_encounter_is_in_village_town_center", "scn_wildfire_wight_battle"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_9"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_10"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_11"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_12"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_13"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_14"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_poleboat_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_poleboat"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_poleboat_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_poleboat"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_poleboat_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_poleboat"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_9"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_rhoynar_ruins_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_rhoynar_ruins"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_rhoynar_ruins_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_rhoynar_ruins"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_rhoynar_ruins_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_rhoynar_ruins"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_203"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_51"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_111"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_106"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_101"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_83"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_85"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_94"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_49"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_141"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_110"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_103"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_99"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_18"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_13"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_202"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_15"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_12"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(set_jump_mission, "mt_lead_charge"),
				(call_script, "script_setup_random_scene"),
			(try_end),
			(assign, "$g_next_menu", "mnu_simple_encounter"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("clear_orders",
		[
			(this_or_next|party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1)
		],
		"Re-assess the situation.",
		[
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
				(party_set_slot, "p_main_party", slot_center_accumulated_rents, 0),
			(try_end),
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
				(party_set_slot, "p_main_party", slot_center_shipyards, 0),
				(party_set_slot, "p_main_party", slot_center_household_gardens, 0),
			(try_end),
			(jump_to_menu, "mnu_simple_encounter")
		], "."),

		("hold",
		[
			(eq, "$encountered_party_friendly", 0),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(neq, ":current_terrain_main_party", 15),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0),
			(party_get_skill_level, ":skill_level_main_party_15", "p_main_party", 15),
			(ge, ":skill_level_main_party_15", 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Take the field.",
		[
			(party_set_slot, "p_main_party", slot_center_household_gardens, 1),
			(party_get_slot, ":main_party_town_trade_good_prices_begin", "p_main_party", slot_town_trade_good_prices_begin),
			(try_begin),
				(gt, ":main_party_town_trade_good_prices_begin", 0),
				(party_set_slot, "p_main_party_backup", slot_town_trade_good_prices_begin, ":main_party_town_trade_good_prices_begin"),
			(try_end),
			(party_set_slot, "p_main_party", slot_town_trade_good_prices_begin, 910),
			(assign, "$g_battle_result", 0),
			(assign, "$g_engaged_enemy", 1),
			(party_get_template_id, ":template_id_l_g_encountered_party", "$g_encountered_party"),
			(try_begin),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_village_farmers"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_village_farmers_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_village_farmers_e"),
				(unlock_achievement, 27),
			(try_end),
			(call_script, "script_calculate_renown_value"),
			(call_script, "script_calculate_battle_advantage"),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(try_begin),
				(eq, "$g_encounter_type", 1),
				(assign, "$g_village_raid_evil", 0),
				(set_jump_mission, "mt_village_raid"),
				(party_get_slot, ":g_encounter_is_in_village_town_center", "$g_encounter_is_in_village", slot_town_center),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(eq, "$g_encounter_type", 2),
				(assign, "$g_village_raid_evil", 0),
				(set_jump_mission, "mt_village_raid"),
				(party_get_slot, ":g_encounter_is_in_village_town_center", "$g_encounter_is_in_village", slot_town_center),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(eq, "$g_encountered_party_template", "pt_wildfire_wights"),
				(assign, ":g_encounter_is_in_village_town_center", "scn_wildfire_wight_battle"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_9"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_10"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_11"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_12"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_13"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_14"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_poleboat_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_poleboat"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_poleboat_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_poleboat"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_poleboat_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_poleboat"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_9"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_rhoynar_ruins_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_rhoynar_ruins"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_rhoynar_ruins_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_rhoynar_ruins"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_rhoynar_ruins_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_rhoynar_ruins"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_203"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_51"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_111"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_106"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_101"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_83"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_85"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_94"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_49"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_141"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_110"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_103"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_99"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_18"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_13"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_202"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_15"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_12"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(set_jump_mission, "mt_lead_charge"),
				(call_script, "script_setup_random_scene"),
			(try_end),
			(assign, "$g_next_menu", "mnu_simple_encounter"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("follow",
		[
			(eq, "$encountered_party_friendly", 0),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(neq, ":current_terrain_main_party", 15),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0),
			(party_get_skill_level, ":skill_level_main_party_15", "p_main_party", 15),
			(ge, ":skill_level_main_party_15", 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Lead your troops.",
		[
			(party_set_slot, "p_main_party", slot_center_household_gardens, 1),
			(party_get_slot, ":main_party_town_trade_good_prices_begin", "p_main_party", slot_town_trade_good_prices_begin),
			(try_begin),
				(gt, ":main_party_town_trade_good_prices_begin", 0),
				(party_set_slot, "p_main_party_backup", slot_town_trade_good_prices_begin, ":main_party_town_trade_good_prices_begin"),
			(try_end),
			(party_set_slot, "p_main_party", slot_town_trade_good_prices_begin, 911),
			(assign, "$g_battle_result", 0),
			(assign, "$g_engaged_enemy", 1),
			(party_get_template_id, ":template_id_l_g_encountered_party", "$g_encountered_party"),
			(try_begin),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_village_farmers"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_village_farmers_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_village_farmers_e"),
				(unlock_achievement, 27),
			(try_end),
			(call_script, "script_calculate_renown_value"),
			(call_script, "script_calculate_battle_advantage"),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(try_begin),
				(eq, "$g_encounter_type", 1),
				(assign, "$g_village_raid_evil", 0),
				(set_jump_mission, "mt_village_raid"),
				(party_get_slot, ":g_encounter_is_in_village_town_center", "$g_encounter_is_in_village", slot_town_center),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(eq, "$g_encounter_type", 2),
				(assign, "$g_village_raid_evil", 0),
				(set_jump_mission, "mt_village_raid"),
				(party_get_slot, ":g_encounter_is_in_village_town_center", "$g_encounter_is_in_village", slot_town_center),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(eq, "$g_encountered_party_template", "pt_wildfire_wights"),
				(assign, ":g_encounter_is_in_village_town_center", "scn_wildfire_wight_battle"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_9"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_10"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_11"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_12"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_13"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_14"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_poleboat_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_poleboat"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_poleboat_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_poleboat"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_poleboat_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_poleboat"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_9"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_rhoynar_ruins_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_rhoynar_ruins"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_rhoynar_ruins_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_rhoynar_ruins"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_rhoynar_ruins_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_rhoynar_ruins"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_203"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_51"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_111"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_106"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_101"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_83"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_85"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_94"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_49"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_141"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_110"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_103"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_99"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_18"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_13"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_202"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_15"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_12"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(set_jump_mission, "mt_lead_charge"),
				(call_script, "script_setup_random_scene"),
			(try_end),
			(assign, "$g_next_menu", "mnu_simple_encounter"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("encounter_attack",
		[
			(eq, "$encountered_party_friendly", 0),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(neq, ":current_terrain_main_party", 15),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Charge the enemy.",
		[
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
				(party_set_slot, "p_main_party", slot_center_shipyards, 0),
			(try_end),
			(assign, "$g_battle_result", 0),
			(assign, "$g_engaged_enemy", 1),
			(party_get_template_id, ":template_id_l_g_encountered_party", "$g_encountered_party"),
			(try_begin),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_village_farmers"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_village_farmers_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_village_farmers_e"),
				(unlock_achievement, 27),
			(try_end),
			(call_script, "script_calculate_renown_value"),
			(call_script, "script_calculate_battle_advantage"),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(try_begin),
				(eq, "$g_encounter_type", 1),
				(assign, "$g_village_raid_evil", 0),
				(set_jump_mission, "mt_village_raid"),
				(party_get_slot, ":g_encounter_is_in_village_town_center", "$g_encounter_is_in_village", slot_town_center),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(eq, "$g_encounter_type", 2),
				(assign, "$g_village_raid_evil", 0),
				(set_jump_mission, "mt_village_raid"),
				(party_get_slot, ":g_encounter_is_in_village_town_center", "$g_encounter_is_in_village", slot_town_center),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(eq, "$g_encountered_party_template", "pt_wildfire_wights"),
				(assign, ":g_encounter_is_in_village_town_center", "scn_wildfire_wight_battle"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_1"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_dothraki_sea_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_dothraki_sea_2"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_9"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_10"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_11"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_12"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_13"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_forest_bog_14"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_forest_bog"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_abandoned_village_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_abandoned_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_poleboat_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_poleboat"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_poleboat_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_poleboat"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_poleboat_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_poleboat"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_old_mill_9"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_old_mill"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_orchard_essos_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_orchard"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_ruined_fort_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_ruined_fort"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_rhoynar_ruins_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_rhoynar_ruins"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_rhoynar_ruins_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_rhoynar_ruins"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_rhoynar_ruins_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_rhoynar_ruins"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_7"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_farmland_reach_8"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_farmland"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_lumber_camp_north_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_lumber_camp"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_westerlands_mine_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_mine"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_weirwood_north_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_weirwood"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_1"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_2"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_3"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_4"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_battlemap_barrow_5"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_battlemap_barrow"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_203"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_51"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_111"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_106"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_101"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_83"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_85"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_riverlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_94"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_49"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_141"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_110"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_103"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_99"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_westerlands_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_6"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_18"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_13"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_202"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_15"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(party_get_position, 1, "p_main_party"),
				(party_get_position, 2, "p_village_12"),
				(get_distance_between_positions, ":distance_between_positions_1_2", 1, 2),
				(lt, ":distance_between_positions_1_2", 300),
				(assign, ":g_encounter_is_in_village_town_center", "scn_northern_village"),
				(set_jump_mission, "mt_lead_charge"),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(set_jump_mission, "mt_lead_charge"),
				(call_script, "script_setup_random_scene"),
			(try_end),
			(assign, "$g_next_menu", "mnu_simple_encounter"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("encounter_attack",
		[
			(eq, "$encountered_party_friendly", 0),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(eq, ":current_terrain_main_party", 15),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Close in and board the enemy.",
		[
			(assign, "$g_battle_result", 0),
			(assign, "$g_engaged_enemy", 1),
			(call_script, "script_calculate_renown_value"),
			(call_script, "script_calculate_battle_advantage"),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(try_begin),
				(eq, "$g_encounter_type", 1),
				(assign, "$g_village_raid_evil", 0),
				(set_jump_mission, "mt_village_raid"),
				(party_get_slot, ":g_encounter_is_in_village_town_center", "$g_encounter_is_in_village", slot_town_center),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(eq, "$g_encounter_type", 2),
				(assign, "$g_village_raid_evil", 0),
				(set_jump_mission, "mt_village_raid"),
				(party_get_slot, ":g_encounter_is_in_village_town_center", "$g_encounter_is_in_village", slot_town_center),
				(jump_to_scene, ":g_encounter_is_in_village_town_center"),
			(else_try),
				(set_jump_mission, "mt_ship_battle"),
				(try_begin),
					(val_add, reg10, reg11),
					(gt, reg10, 60),
					(store_random_in_range, ":random_in_range_1_100", 1, 100),
					(try_begin),
						(is_between, ":random_in_range_1_100", 1, 50),
						(jump_to_scene, "scn_sea_1"),
					(else_try),
						(is_between, ":random_in_range_1_100", 51, 100),
						(jump_to_scene, "scn_sea_1"),
					(try_end),
				(else_try),
					(store_random_in_range, ":random_in_range_1_100", 1, 100),
					(try_begin),
						(is_between, ":random_in_range_1_100", 1, 50),
						(jump_to_scene, "scn_sea_2"),
					(else_try),
						(is_between, ":random_in_range_1_100", 51, 100),
						(jump_to_scene, "scn_sea_3"),
					(try_end),
				(try_end),
			(try_end),
			(assign, "$g_next_menu", "mnu_simple_encounter"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("encounter_order_attack",
		[
			(eq, "$encountered_party_friendly", 0),
			(call_script, "script_party_count_members_with_full_health", "p_main_party"),
			(ge, reg0, 4),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Order your troops to attack without you.",
		[
			(jump_to_menu, "mnu_order_attack_begin")
		], "."),

		("encounter_leave",
		[
			(eq, "$cant_leave_encounter", 0),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Leave.",
		[
			(try_begin),
				(eq, "$encountered_party_friendly", 0),
				(encountered_party_is_attacker),
				(call_script, "script_objectionable_action", 1, "str_flee_battle"),
			(try_end),
			(try_begin),
				(eq, "$encountered_party_friendly", 0),
				(party_get_num_companion_stacks, ":num_companion_stacks_encountered_party_backup", "p_encountered_party_backup"),
				(try_for_range, ":number", 0, ":num_companion_stacks_encountered_party_backup"),
					(party_stack_get_troop_id, ":party_stack_troop_id_encountered_party_backup_number", "p_encountered_party_backup", ":number"),
					(is_between, ":party_stack_troop_id_encountered_party_backup_number", "trp_npc1", "trp_knight_1_1_wife"),
					(troop_slot_eq, ":party_stack_troop_id_encountered_party_backup_number", slot_troop_occupation, 2),
					(store_faction_of_troop, ":faction_of_troop_party_stack_troop_id_encountered_party_backup_number", ":party_stack_troop_id_encountered_party_backup_number"),
					(call_script, "script_add_log_entry", 15, "trp_player", -1, ":party_stack_troop_id_encountered_party_backup_number", ":faction_of_troop_party_stack_troop_id_encountered_party_backup_number"),
				(try_end),
			(try_end),
			(leave_encounter),
			(change_screen_return)
		], "."),

		("encounter_retreat",
		[
			(eq, "$cant_leave_encounter", 1),
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(neq, ":current_terrain_main_party", 15),
			(call_script, "script_get_max_skill_of_player_party", "skl_tactics"),
			(assign, ":var_2", reg0),
			(val_add, ":var_2", 4),
			(call_script, "script_party_count_members_with_full_health", "p_collective_enemy", 0),
			(assign, ":var_3", reg0),
			(val_div, ":var_3", 2),
			(val_div, ":var_3", ":var_2"),
			(val_max, ":var_3", 1),
			(call_script, "script_party_count_fit_regulars", "p_main_party"),
			(assign, ":var_4", reg0),
			(ge, ":var_4", ":var_3"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Pull back, leaving some soldiers behind to cover your retreat.",
		[
			(jump_to_menu, "mnu_encounter_retreat_confirm")
		], "."),

		("encounter_surrender",
		[
			(eq, "$cant_leave_encounter", 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Surrender.",
		[
			(assign, "$g_player_surrenders", 1)
		], ".")
	]
	),

	("encounter_retreat_confirm", 0, "As the most tactically skilled avatar of your company, ({reg2}), {reg3?you devise:{s3} devises} a plan that will allow you and your men to escape with your lives, but you'll have to leave {reg4} soldiers behind to stop the enemy from giving chase.",
	"none",
	[
		(call_script, "script_get_max_skill_of_player_party", "skl_tactics"),
		(assign, ":var_1", reg0),
		(assign, ":var_2", reg1),
		(assign, reg2, ":var_1"),
		(val_add, ":var_1", 4),
		(call_script, "script_party_count_members_with_full_health", "p_collective_enemy", 0),
		(assign, ":var_3", reg0),
		(val_div, ":var_3", 2),
		(store_div, reg4, ":var_3", ":var_1"),
		(val_max, reg4, 1),
		(try_begin),
			(eq, ":var_2", "trp_player"),
			(assign, reg3, 1),
		(else_try),
			(assign, reg3, 0),
			(str_store_troop_name, 3, ":var_2"),
		(try_end)
	],
	[
		("leave_behind",
		[],
		"Go on. The sacrifice of these men will save the rest.",
		[
			(assign, ":var_1", reg4),
			(try_for_range, ":unused", 0, ":var_1"),
				(call_script, "script_cf_party_remove_random_regular_troop", "p_main_party"),
				(assign, ":var_3", reg0),
				(store_random_in_range, ":random_in_range_0_100", 0, 100),
				(ge, ":random_in_range_0_100", 30),
				(party_add_prisoners, "$g_encountered_party", ":var_3", 1),
			(try_end),
			(call_script, "script_change_player_party_morale", -20),
			(jump_to_menu, "mnu_encounter_retreat")
		], "."),

		("dont_leave_behind",
		[],
		"No. We leave no one behind.",
		[
			(jump_to_menu, "mnu_simple_encounter")
		], ".")
	]
	),

	("encounter_retreat", 0, "You tell {reg4} of your troops to hold the enemy while you retreat with the rest of your force.",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(call_script, "script_objectionable_action", 1, "str_flee_battle"),
			(party_get_num_companion_stacks, ":num_companion_stacks_encountered_party_backup", "p_encountered_party_backup"),
			(try_for_range, ":number", 0, ":num_companion_stacks_encountered_party_backup"),
				(party_stack_get_troop_id, ":party_stack_troop_id_encountered_party_backup_number", "p_encountered_party_backup", ":number"),
				(is_between, ":party_stack_troop_id_encountered_party_backup_number", "trp_npc1", "trp_knight_1_1_wife"),
				(troop_slot_eq, ":party_stack_troop_id_encountered_party_backup_number", slot_troop_occupation, 2),
				(store_faction_of_troop, ":faction_of_troop_party_stack_troop_id_encountered_party_backup_number", ":party_stack_troop_id_encountered_party_backup_number"),
				(call_script, "script_add_log_entry", 16, "trp_player", -1, ":party_stack_troop_id_encountered_party_backup_number", ":faction_of_troop_party_stack_troop_id_encountered_party_backup_number"),
			(try_end),
			(leave_encounter),
			(change_screen_return),
			(assign, "$g_move_fast", 1)
		], ".")
	]
	),

	("order_attack_begin", 0, "Your soldiers prepare to attack the enemy.",
	"none",
	[],
	[
		("order_attack_begin",
		[],
		"Order the attack to begin.",
		[
			(party_get_template_id, ":template_id_l_g_encountered_party", "$g_encountered_party"),
			(try_begin),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_village_farmers"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_village_farmers_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_village_farmers_e"),
				(unlock_achievement, 27),
			(try_end),
			(assign, "$g_engaged_enemy", 1),
			(jump_to_menu, "mnu_order_attack_2")
		], "."),

		("call_back",
		[],
		"Call them back.",
		[
			(jump_to_menu, "mnu_simple_encounter")
		], ".")
	]
	),

	("order_attack_2", mnf_disable_all_keys, "{s4}^^Your casualties: {s8}^^Enemy casualties: {s9}",
	"none",
	[
		(set_background_mesh, "mesh_pic_charge"),
		(call_script, "script_party_calculate_strength", "p_main_party", 1),
		(assign, ":var_1", reg0),
		(call_script, "script_party_calculate_strength", "p_collective_enemy", 0),
		(assign, ":var_2", reg0),
		(party_collect_attachments_to_party, "p_main_party", "p_collective_ally"),
		(call_script, "script_party_calculate_strength", "p_collective_ally", 1),
		(assign, ":var_3", reg0),
		(try_begin),
			(le, ":var_3", ":var_2"),
			(assign, ":value", ":var_3"),
		(else_try),
			(assign, ":value", ":var_2"),
		(try_end),
		(try_begin),
			(le, ":value", 25),
			(assign, ":value_2", 1),
		(else_try),
			(le, ":value", 50),
			(assign, ":value_2", 2),
		(else_try),
			(le, ":value", 75),
			(assign, ":value_2", 3),
		(else_try),
			(le, ":value", 125),
			(assign, ":value_2", 4),
		(else_try),
			(le, ":value", 200),
			(assign, ":value_2", 5),
		(else_try),
			(le, ":value", 400),
			(assign, ":value_2", 6),
		(else_try),
			(le, ":value", 800),
			(assign, ":value_2", 7),
		(else_try),
			(le, ":value", 1600),
			(assign, ":value_2", 8),
		(else_try),
			(le, ":value", 3200),
			(assign, ":value_2", 9),
		(else_try),
			(le, ":value", 6400),
			(assign, ":value_2", 10),
		(else_try),
			(le, ":value", 12800),
			(assign, ":value_2", 11),
		(else_try),
			(le, ":value", 25600),
			(assign, ":value_2", 12),
		(else_try),
			(le, ":value", 51200),
			(assign, ":value_2", 13),
		(else_try),
			(le, ":value", 102400),
			(assign, ":value_2", 14),
		(else_try),
			(assign, ":value_2", 15),
		(try_end),
		(val_div, ":var_1", ":value_2"),
		(val_max, ":var_1", 1),
		(val_div, ":var_2", ":value_2"),
		(val_max, ":var_2", 1),
		(val_div, ":var_3", ":value_2"),
		(val_max, ":var_3", 1),
		(store_mul, "$g_strength_contribution_of_player", ":var_1", 100),
		(val_div, "$g_strength_contribution_of_player", ":var_3"),
		(inflict_casualties_to_party_group, "p_main_party", ":var_2", "p_temp_casualties"),
		(call_script, "script_print_casualties_to_s0", "p_temp_casualties", 0),
		(str_store_string_reg, 8, 0),
		(try_begin),
			(ge, "$g_ally_party", 0),
			(inflict_casualties_to_party_group, "$g_ally_party", ":var_2", "p_temp_casualties"),
			(str_store_string_reg, 8, 0),
		(try_end),
		(inflict_casualties_to_party_group, "$g_encountered_party", ":var_3", "p_temp_casualties"),
		(party_get_num_companion_stacks, ":num_companion_stacks_temp_casualties", "p_temp_casualties"),
		(try_for_range, ":number", 0, ":num_companion_stacks_temp_casualties"),
			(party_stack_get_troop_id, ":party_stack_troop_id_temp_casualties_number", "p_temp_casualties", ":number"),
			(try_begin),
				(party_stack_get_size, ":party_stack_size_temp_casualties_number", "p_temp_casualties", ":number"),
				(gt, ":party_stack_size_temp_casualties_number", 0),
				(party_add_members, "p_total_enemy_casualties", ":party_stack_troop_id_temp_casualties_number", ":party_stack_size_temp_casualties_number"),
				(party_stack_get_num_wounded, ":party_stack_num_wounded_temp_casualties_number", "p_temp_casualties", ":number"),
				(gt, ":party_stack_num_wounded_temp_casualties_number", 0),
				(party_wound_members, "p_total_enemy_casualties", ":party_stack_troop_id_temp_casualties_number", ":party_stack_num_wounded_temp_casualties_number"),
			(try_end),
		(try_end),
		(call_script, "script_print_casualties_to_s0", "p_temp_casualties", 0),
		(str_store_string_reg, 9, 0),
		(party_collect_attachments_to_party, "$g_encountered_party", "p_collective_enemy"),
		(assign, "$no_soldiers_left", 0),
		(try_begin),
			(call_script, "script_party_count_members_with_full_health", "p_main_party"),
			(assign, ":var_11", reg0),
			(store_add, ":value_3", "$num_routed_us", 1),
			(le, ":var_11", ":value_3"),
			(assign, "$no_soldiers_left", 1),
			(str_store_string, 4, "str_order_attack_failure"),
		(else_try),
			(call_script, "script_party_count_members_with_full_health", "p_collective_enemy"),
			(assign, ":var_13", reg0),
			(this_or_next|le, ":var_13", 0),
			(le, ":var_13", "$num_routed_enemies"),
			(assign, ":value_4", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_collective_enemy", "p_collective_enemy"),
			(try_begin),
				(eq, ":num_companion_stacks_collective_enemy", 0),
				(assign, ":value_4", 1),
			(else_try),
				(party_stack_get_troop_id, ":party_stack_troop_id_collective_enemy_0", "p_collective_enemy", 0),
				(try_begin),
					(neg|troop_is_hero, ":party_stack_troop_id_collective_enemy_0"),
					(assign, ":value_4", 1),
				(else_try),
					(troop_is_wounded, ":party_stack_troop_id_collective_enemy_0"),
					(assign, ":value_4", 1),
				(try_end),
			(try_end),
			(eq, ":value_4", 1),
			(assign, "$g_battle_result", 1),
			(assign, "$no_soldiers_left", 1),
			(str_store_string, 4, "str_order_attack_success"),
		(else_try),
			(str_store_string, 4, "str_order_attack_continue"),
		(try_end)
	],
	[
		("order_attack_continue",
		[
			(eq, "$no_soldiers_left", 0)
		],
		"Order your soldiers to continue the attack.",
		[
			(jump_to_menu, "mnu_order_attack_2")
		], "."),

		("order_retreat",
		[
			(eq, "$no_soldiers_left", 0)
		],
		"Call your soldiers back.",
		[
			(jump_to_menu, "mnu_simple_encounter")
		], "."),

		("continue",
		[
			(eq, "$no_soldiers_left", 1)
		],
		"Continue...",
		[
			(jump_to_menu, "mnu_simple_encounter")
		], ".")
	]
	),

	("battle_debrief", mnf_disable_all_keys|mnf_scale_picture, "{s11}^^Your Casualties:{s8}{s10}^^Enemy Casualties:{s9}^^Kill count:{s12}",
	"none",
	[
		(try_begin),
			(eq, "$g_battle_result", 1),
			(call_script, "script_change_troop_renown", "trp_player", "$battle_renown_value"),
			(try_begin),
				(ge, "$g_encountered_party", 0),
				(party_is_active, "$g_encountered_party"),
				(party_get_template_id, ":template_id_l_g_encountered_party", "$g_encountered_party"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_kingdom_caravan_party"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_kingdom_caravan_party_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_kingdom_caravan_party_e"),
				(get_achievement_stat, ":achievement_stat_30_0", 30, 0),
				(get_achievement_stat, ":achievement_stat_30_1", 30, 1),
				(val_add, ":achievement_stat_30_1", 1),
				(set_achievement_stat, 30, 1, ":achievement_stat_30_1"),
				(try_begin),
					(ge, ":achievement_stat_30_0", 3),
					(ge, ":achievement_stat_30_1", 3),
					(unlock_achievement, 30),
				(try_end),
			(try_end),
			(try_begin),
				(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
				(eq, ":current_terrain_main_party", 4),
				(get_achievement_stat, ":achievement_stat_8_0", 8, 0),
				(val_add, ":achievement_stat_8_0", 1),
				(set_achievement_stat, 8, 0, ":achievement_stat_8_0"),
				(try_begin),
					(eq, ":achievement_stat_8_0", 10),
					(unlock_achievement, 8),
				(try_end),
			(try_end),
			(try_begin),
				(ge, "$g_enemy_party", 0),
				(party_is_active, "$g_enemy_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_g_enemy_party_0", "$g_enemy_party", 0),
				(troop_get_slot, ":troop_trees_846", "$troop_trees", 846),
				(eq, ":party_stack_troop_id_g_enemy_party_0", ":troop_trees_846"),
				(get_achievement_stat, ":achievement_stat_13_0", 13, 0),
				(val_add, ":achievement_stat_13_0", 1),
				(set_achievement_stat, 13, 0, ":achievement_stat_13_0"),
				(try_begin),
					(eq, ":achievement_stat_13_0", 10),
					(unlock_achievement, 13),
				(try_end),
			(try_end),
			(try_begin),
				(is_between, "$g_ally_party", "p_town_1", "p_village_1"),
				(unlock_achievement, 1),
			(try_end),
			(try_begin),
				(eq, "$g_joined_battle_to_help", 1),
				(unlock_achievement, 34),
			(try_end),
		(try_end),
		(assign, "$g_joined_battle_to_help", 0),
		(try_begin),
			(neq, "$g_player_troop", "trp_player"),
			(store_troop_health, "$g_player_end_hp", "trp_player"),
			(party_get_skill_level, ":skill_level_main_party_9", "p_main_party", 9),
			(val_mul, ":skill_level_main_party_9", 5),
			(le, "$g_player_end_hp", "$g_player_begin_hp"),
			(store_sub, ":value", "$g_player_begin_hp", "$g_player_end_hp"),
			(val_mul, ":value", ":skill_level_main_party_9"),
			(val_div, ":value", 100),
			(val_add, ":value", "$g_player_end_hp"),
			(troop_set_health, "trp_player", ":value"),
		(try_end),
		(call_script, "script_count_casualties_and_adjust_morale"),
		(call_script, "script_encounter_calculate_fit"),
		(call_script, "script_party_count_fit_regulars", "p_main_party"),
		(assign, "$playerparty_postbattle_regulars", reg0),
		(try_begin),
			(eq, "$g_battle_result", 1),
			(eq, "$g_enemy_fit_for_battle", 0),
			(str_store_string, 11, "@You were victorious!"),
			(try_begin),
				(gt, "$g_friend_fit_for_battle", 1),
				(set_background_mesh, "mesh_pic_victory"),
			(try_end),
		(else_try),
			(eq, "$g_battle_result", -1),
			(ge, "$g_enemy_fit_for_battle", 1),
			(this_or_next|le, "$g_friend_fit_for_battle", 0),
			(le, "$playerparty_postbattle_regulars", 0),
			(str_store_string, 11, "@Battle was lost. Your forces were utterly crushed."),
			(set_background_mesh, "mesh_pic_defeat"),
		(else_try),
			(eq, "$g_battle_result", -1),
			(str_store_string, 11, "@Your companions carry you away from the fighting."),
			(try_begin),
				(eq, 1, "$character_gender"),
				(set_background_mesh, "mesh_pic_wounded_fem"),
			(else_try),
				(set_background_mesh, "mesh_pic_wounded"),
			(try_end),
		(else_try),
			(eq, "$g_battle_result", 1),
			(str_store_string, 11, "@You have defeated the enemy."),
			(try_begin),
				(gt, "$g_friend_fit_for_battle", 1),
				(set_background_mesh, "mesh_pic_victory"),
			(try_end),
		(else_try),
			(eq, "$g_battle_result", 0),
			(str_store_string, 11, "@You have retreated from the fight."),
		(try_end),
		(try_begin),
			(gt, "$playerparty_prebattle_regulars", 9),
			(store_add, ":value_2", 3, "$g_battle_result"),
			(store_div, ":value_3", "$playerparty_prebattle_regulars", ":value_2"),
			(lt, "$playerparty_postbattle_regulars", ":value_3"),
			(call_script, "script_objectionable_action", 2, "str_excessive_casualties"),
		(try_end),
		(call_script, "script_print_casualties_to_s0", "p_player_casualties", 0),
		(str_store_string_reg, 8, 0),
		(call_script, "script_print_casualties_to_s0", "p_enemy_casualties", 0),
		(str_store_string_reg, 9, 0),
		(call_script, "script_print_kill_count_to_s0"),
		(str_store_string_reg, 12, 0),
		(str_clear, 10),
		(try_begin),
			(eq, "$any_allies_at_the_last_battle", 1),
			(call_script, "script_print_casualties_to_s0", "p_ally_casualties", 0),
			(str_store_string, 10, "@^^Ally Casualties:{s0}"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "$g_next_menu")
		], ".")
	]
	),

	("total_victory", 0, "You shouldn't be reading this... {s9}",
	"none",
	[
		(assign, ":value", 0),
		(try_begin),
			(eq, "$routed_party_added", 0),
			(assign, "$routed_party_added", 1),
			(call_script, "script_add_routed_party"),
		(try_end),
		(try_begin),
			(check_quest_active, "qst_track_down_bandits"),
			(neg|check_quest_succeeded, "qst_track_down_bandits"),
			(neg|check_quest_failed, "qst_track_down_bandits"),
			(quest_get_slot, ":track_down_bandits_target_party", "qst_track_down_bandits", slot_quest_target_party),
			(party_is_active, ":track_down_bandits_target_party"),
			(party_get_attached_to, ":attached_to_track_down_bandits_target_party", ":track_down_bandits_target_party"),
			(this_or_next|eq, ":track_down_bandits_target_party", "$g_enemy_party"),
			(eq, ":attached_to_track_down_bandits_target_party", "$g_enemy_party"),
			(call_script, "script_succeed_quest", "qst_track_down_bandits"),
		(try_end),
		(try_for_range, ":quest", "qst_deal_with_forest_bandit", "qst_quests_end"),
			(check_quest_active, ":quest"),
			(neg|check_quest_succeeded, ":quest"),
			(quest_get_slot, ":track_down_bandits_target_party", ":quest", slot_quest_target_party),
			(party_is_active, ":track_down_bandits_target_party"),
			(party_get_attached_to, ":attached_to_track_down_bandits_target_party", ":track_down_bandits_target_party"),
			(this_or_next|eq, ":track_down_bandits_target_party", "$g_enemy_party"),
			(eq, ":attached_to_track_down_bandits_target_party", "$g_enemy_party"),
			(call_script, "script_succeed_quest", ":quest"),
			(party_get_template_id, ":template_id_track_down_bandits_target_party", ":track_down_bandits_target_party"),
			(party_template_set_slot, ":template_id_track_down_bandits_target_party", 6, 0),
			(party_template_set_slot, ":template_id_track_down_bandits_target_party", 10, -1),
		(try_end),
		(try_begin),
			(gt, "$g_private_battle_with_troop", 0),
			(troop_slot_eq, "$g_private_battle_with_troop", slot_troop_leaded_party, "$g_encountered_party"),
			(assign, "$g_private_battle_with_troop", 0),
			(try_begin),
				(eq, "$g_disable_condescending_comments", 0),
				(assign, "$g_disable_condescending_comments", 1),
			(else_try),
				(eq, "$g_disable_condescending_comments", 2),
				(assign, "$g_disable_condescending_comments", 3),
			(try_end),
		(try_end),
		(party_get_num_companion_stacks, ":num_companion_stacks_collective_enemy", "p_collective_enemy"),
		(try_for_range, ":number", 0, ":num_companion_stacks_collective_enemy"),
			(party_stack_get_troop_id, ":party_stack_troop_id_collective_enemy_number", "p_collective_enemy", ":number"),
			(is_between, ":party_stack_troop_id_collective_enemy_number", "trp_knight_1_1", "trp_kingdom_1_pretender"),
			(troop_is_wounded, ":party_stack_troop_id_collective_enemy_number"),
			(party_add_members, "p_total_enemy_casualties", ":party_stack_troop_id_collective_enemy_number", 1),
		(try_end),
		(try_begin),
			(eq, "$thanked_by_ally_leader", 0),
			(assign, "$thanked_by_ally_leader", 1),
			(gt, "$g_ally_party", 0),
			(store_add, ":value_2", "$g_starting_strength_friends", "$g_starting_strength_enemy_party"),
			(val_sub, ":value_2", "$g_starting_strength_main_party"),
			(store_sub, ":value_3", "$g_starting_strength_friends", "$g_starting_strength_main_party"),
			(store_mul, ":value_4", ":value_3", 100),
			(val_add, ":value_2", 1),
			(val_div, ":value_4", ":value_2"),
			(store_sub, ":value_5", 100, ":value_4"),
			(store_mul, ":value_6", ":value_5", "$g_starting_strength_enemy_party"),
			(val_div, ":value_6", 3000),
			(val_min, ":value_6", 4),
			(store_mul, "$g_relation_boost", ":value_5", ":value_5"),
			(val_div, "$g_relation_boost", 700),
			(val_clamp, "$g_relation_boost", 0, 20),
			(party_get_num_companion_stacks, ":num_companion_stacks_l_g_ally_party", "$g_ally_party"),
			(gt, ":num_companion_stacks_l_g_ally_party", 0),
			(store_faction_of_party, ":faction_of_party_g_ally_party", "$g_ally_party"),
			(call_script, "script_change_player_relation_with_faction", ":faction_of_party_g_ally_party", ":value_6"),
			(party_stack_get_troop_id, ":party_stack_troop_id_g_ally_party", "$g_ally_party"),
			(party_stack_get_troop_dna, ":party_stack_troop_dna_g_ally_party_0", "$g_ally_party", 0),
			(try_begin),
				(troop_is_hero, ":party_stack_troop_id_g_ally_party"),
				(troop_get_slot, ":party_stack_troop_id_g_ally_party_player_relation", ":party_stack_troop_id_g_ally_party", slot_troop_player_relation),
				(assign, ":var_19", "$g_relation_boost"),
				(try_begin),
					(lt, ":party_stack_troop_id_g_ally_party_player_relation", -5),
					(val_div, ":var_19", 3),
				(try_end),
				(call_script, "script_change_player_relation_with_troop", ":party_stack_troop_id_g_ally_party", ":var_19"),
			(try_end),
			(neq, "$freelancer_state", 1),
			(assign, "$talk_context", 13),
			(call_script, "script_setup_troop_meeting", ":party_stack_troop_id_g_ally_party", ":party_stack_troop_dna_g_ally_party_0"),
		(else_try),
			(neq, "$freelancer_state", 1),
			(assign, ":value", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_collective_enemy", "p_total_enemy_casualties"),
			(try_for_range, ":value_7", "$last_defeated_hero", ":num_companion_stacks_collective_enemy"),
				(eq, ":value", 0),
				(party_stack_get_troop_id, ":party_stack_troop_id_collective_enemy_number", "p_total_enemy_casualties", ":value_7"),
				(party_stack_get_troop_dna, ":party_stack_troop_dna_total_enemy_casualties_value_7", "p_total_enemy_casualties", ":value_7"),
				(troop_is_hero, ":party_stack_troop_id_collective_enemy_number"),
				(store_faction_of_troop, ":faction_of_troop_party_stack_troop_id_collective_enemy_number", ":party_stack_troop_id_collective_enemy_number"),
				(try_begin),
					(store_relation, ":relation_faction_of_troop_party_stack_troop_id_collective_enemy_number_player_faction", ":faction_of_troop_party_stack_troop_id_collective_enemy_number", "fac_player_faction"),
					(ge, ":relation_faction_of_troop_party_stack_troop_id_collective_enemy_number_player_faction", 0),
					(str_store_troop_name, 4, ":party_stack_troop_id_collective_enemy_number"),
					(try_begin),
						(eq, "$cheat_mode", 1),
						(display_message, "@{!}{s4} skipped in p total enemy casualties capture queue because is friendly"),
					(try_end),
				(else_try),
					(try_begin),
						(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_0", "$g_encountered_party", 0),
						(is_between, ":party_stack_troop_id_g_encountered_party_0", "trp_npc1", "trp_knight_1_1_wife"),
						(troop_slot_eq, ":party_stack_troop_id_g_encountered_party_0", slot_troop_occupation, 2),
						(store_sub, ":value_8", ":party_stack_troop_id_g_encountered_party_0", "trp_npc1"),
						(get_achievement_stat, ":achievement_stat_7_value_8", 7, ":value_8"),
						(eq, ":achievement_stat_7_value_8", 1),
						(unlock_achievement, 7),
					(try_end),
					(store_add, "$last_defeated_hero", ":value_7", 1),
					(call_script, "script_remove_troop_from_prison", ":party_stack_troop_id_collective_enemy_number"),
					(troop_set_slot, ":party_stack_troop_id_collective_enemy_number", slot_troop_leaded_party, -1),
					(call_script, "script_cf_check_hero_can_escape_from_player", ":party_stack_troop_id_collective_enemy_number"),
					(str_store_troop_name, 1, ":party_stack_troop_id_collective_enemy_number"),
					(str_store_faction_name, 3, ":faction_of_troop_party_stack_troop_id_collective_enemy_number"),
					(str_store_string, 17, "@{s1} of the {s3} managed to escape."),
					(display_log_message, "@{!}{s17}"),
					(jump_to_menu, "mnu_enemy_slipped_away"),
					(assign, ":value", 1),
				(else_try),
					(store_add, "$last_defeated_hero", ":value_7", 1),
					(call_script, "script_remove_troop_from_prison", ":party_stack_troop_id_collective_enemy_number"),
					(troop_set_slot, ":party_stack_troop_id_collective_enemy_number", slot_troop_leaded_party, -1),
					(assign, "$talk_context", 9),
					(call_script, "script_setup_troop_meeting", ":party_stack_troop_id_collective_enemy_number", ":party_stack_troop_dna_total_enemy_casualties_value_7"),
					(assign, ":value", 1),
				(try_end),
			(try_end),
			(eq, ":value", 1),
		(else_try),
			(neq, "$freelancer_state", 1),
			(assign, ":value", 0),
			(party_get_num_prisoner_stacks, ":num_prisoner_stacks_collective_enemy", "p_collective_enemy"),
			(try_for_range, ":value_7", "$last_freed_hero", ":num_prisoner_stacks_collective_enemy"),
				(eq, ":value", 0),
				(party_prisoner_stack_get_troop_id, ":party_stack_troop_id_collective_enemy_number", "p_collective_enemy", ":value_7"),
				(troop_is_hero, ":party_stack_troop_id_collective_enemy_number"),
				(party_prisoner_stack_get_troop_dna, ":party_stack_troop_dna_total_enemy_casualties_value_7", "p_collective_enemy", ":value_7"),
				(store_add, "$last_freed_hero", ":value_7", 1),
				(assign, "$talk_context", 8),
				(call_script, "script_setup_troop_meeting", ":party_stack_troop_id_collective_enemy_number", ":party_stack_troop_dna_total_enemy_casualties_value_7"),
				(assign, ":value", 1),
			(try_end),
			(eq, ":value", 1),
		(else_try),
			(eq, "$capture_screen_shown", 0),
			(assign, "$capture_screen_shown", 1),
			(party_clear, "p_temp_party"),
			(assign, "$g_move_heroes", 0),
			(call_script, "script_party_add_wounded_members_as_prisoners", "p_temp_party", "p_total_enemy_casualties"),
			(call_script, "script_party_add_party_prisoners", "p_temp_party", "p_collective_enemy"),
			(try_begin),
				(call_script, "script_party_calculate_strength", "p_collective_friends_backup", 0),
				(assign, ":var_28", reg0),
				(gt, ":var_28", 0),
				(call_script, "script_party_calculate_strength", "p_main_party_backup", 0),
				(assign, ":var_29", reg0),
				(store_sub, ":value_9", ":var_28", ":var_29"),
				(store_mul, ":value_10", ":value_9", 1000),
				(val_div, ":value_10", ":var_28"),
				(assign, "$pin_number", ":value_10"),
				(party_clear, "p_temp_party_2"),
				(call_script, "script_move_members_with_ratio", "p_temp_party", "p_temp_party_2"),
				(try_begin),
					(gt, "$g_ally_party", 0),
					(distribute_party_among_party_group, "p_temp_party_2", "$g_ally_party"),
				(try_end),
			(try_end),
			(party_get_num_companions, ":num_companions_temp_party", "p_temp_party"),
			(party_get_num_prisoners, ":num_prisoners_temp_party", "p_temp_party"),
			(store_add, ":value_11", ":num_companions_temp_party", ":num_prisoners_temp_party"),
			(neq, "$freelancer_state", 1),
			(gt, ":value_11", 0),
			(change_screen_exchange_with_party, "p_temp_party"),
		(else_try),
			(eq, "$loot_screen_shown", 0),
			(assign, "$loot_screen_shown", 1),
			(try_begin),
				(gt, "$g_ally_party", 0),
				(call_script, "script_party_add_party", "$g_ally_party", "p_temp_party"),
			(else_try),
				(party_get_num_attached_parties, ":num_attached_parties_main_party", "p_main_party"),
				(gt, ":num_attached_parties_main_party", 0),
				(party_get_attached_party_with_rank, ":attached_party_with_rank_main_party_0", "p_main_party", 0),
				(call_script, "script_party_add_party", ":attached_party_with_rank_main_party_0", "p_temp_party"),
			(try_end),
			(troop_clear_inventory, "trp_temp_troop"),
			(call_script, "script_party_calculate_loot", "p_total_enemy_casualties"),
			(gt, reg0, 0),
			(troop_sort_inventory, "trp_temp_troop"),
			(assign, ":var_37", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_collective_enemy", "p_main_party"),
			(try_for_range, ":value_7", 0, ":num_companion_stacks_collective_enemy"),
				(party_stack_get_troop_id, ":party_stack_troop_id_collective_enemy_number", "p_main_party", ":value_7"),
				(is_between, ":party_stack_troop_id_collective_enemy_number", "trp_npc1", "trp_kingdom_1_lord"),
				(val_add, ":var_37", 1),
			(try_end),
			(try_begin),
				(gt, ":var_37", 0),
				(assign, "$return_menu", "mnu_total_victory"),
				(jump_to_menu, "mnu_manage_loot_pool"),
			(else_try),
				(change_screen_loot, "trp_temp_troop"),
			(try_end),
		(else_try),
			(try_begin),
				(le, "$g_ally_party", 0),
				(end_current_battle),
			(try_end),
			(call_script, "script_party_give_xp_and_gold", "p_total_enemy_casualties"),
			(try_begin),
				(eq, "$g_enemy_party", 0),
				(display_message, "str_error_string"),
			(try_end),
			(try_begin),
				(party_is_active, "$g_ally_party"),
				(call_script, "script_battle_political_consequences", "$g_enemy_party", "$g_ally_party"),
			(else_try),
				(call_script, "script_battle_political_consequences", "$g_enemy_party", "p_main_party"),
			(try_end),
			(call_script, "script_event_player_defeated_enemy_party", "$g_enemy_party"),
			(call_script, "script_clear_party_group", "$g_enemy_party"),
			(try_begin),
				(eq, "$g_next_menu", -1),
				(call_script, "script_post_battle_personality_clash_check"),
				(party_stack_get_troop_id, ":party_stack_troop_id_encountered_party_backup_0", "p_encountered_party_backup", 0),
				(try_begin),
					(is_between, ":party_stack_troop_id_encountered_party_backup_0", "trp_npc1", "trp_knight_1_1_wife"),
					(neg|is_between, "$g_encountered_party", "p_town_1", "p_salt_mine"),
					(store_faction_of_troop, ":faction_of_troop_party_stack_troop_id_encountered_party_backup_0", ":party_stack_troop_id_encountered_party_backup_0"),
					(try_begin),
						(eq, "$g_ally_party", 0),
						(call_script, "script_add_log_entry", 11, "trp_player", -1, ":party_stack_troop_id_encountered_party_backup_0", ":faction_of_troop_party_stack_troop_id_encountered_party_backup_0"),
						(try_begin),
							(eq, "$cheat_mode", 1),
							(display_message, "@{!}Victory comment. Player was alone"),
						(try_end),
					(else_try),
						(ge, "$g_strength_contribution_of_player", 40),
						(call_script, "script_add_log_entry", 11, "trp_player", -1, ":party_stack_troop_id_encountered_party_backup_0", ":faction_of_troop_party_stack_troop_id_encountered_party_backup_0"),
						(try_begin),
							(eq, "$cheat_mode", 1),
							(display_message, "@{!}Ordinary victory comment. The player provided at least 40 percent forces."),
						(try_end),
					(else_try),
						(gt, "$g_starting_strength_enemy_party", 1000),
						(call_script, "script_get_closest_center", "p_main_party"),
						(assign, ":var_40", reg0),
						(call_script, "script_add_log_entry", 19, "trp_player", ":var_40", -1, ":faction_of_troop_party_stack_troop_id_encountered_party_backup_0"),
						(try_begin),
							(eq, "$cheat_mode", 1),
							(display_message, "@{!}Player participation comment. The enemy had at least 1k starting strength."),
						(try_end),
					(else_try),
						(eq, "$cheat_mode", 1),
						(display_message, "@{!}No victory comment. The battle was small, and the player provided less than 40 percent of allied strength"),
					(try_end),
				(try_end),
				(val_add, "$g_total_victories", 1),
				(leave_encounter),
				(change_screen_return),
			(else_try),
				(eq, "$freelancer_state", 0),
				(try_begin),
					(eq, "$g_next_menu", "mnu_dplmc_town_riot_removed"),
					(jump_to_menu, "$g_next_menu"),
				(else_try),
					(eq, "$g_next_menu", "mnu_castle_taken"),
					(call_script, "script_add_log_entry", 10, "trp_player", "$g_encountered_party", -1, "$g_encountered_party_faction"),
					(store_current_hours, ":current_hours"),
					(faction_set_slot, "$players_kingdom", slot_faction_ai_last_decisive_event, ":current_hours"),
					(try_begin),
						(assign, ":value_12", 0),
						(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
						(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
						(ge, reg0, 50),
						(assign, ":value_12", 1),
						(assign, "$g_center_taken_by_player_faction", "$g_encountered_party"),
						(faction_get_slot, ":player_supporters_faction_leader", "fac_player_supporters_faction", slot_faction_leader),
						(try_begin),
							(eq, ":player_supporters_faction_leader", "trp_player"),
							(assign, ":player_supporters_faction_leader", "trp_heroes_end"),
							(try_for_range, ":troop", "trp_npc1", ":player_supporters_faction_leader"),
								(this_or_next|troop_slot_eq, 30, "trp_player"),
								(troop_slot_eq, "trp_player", slot_troop_spouse, ":troop"),
								(neg|troop_slot_ge, ":player_supporters_faction_leader", 8, 0),
								(neg|troop_slot_ge, ":player_supporters_faction_leader", 2, 11),
								(assign, ":player_supporters_faction_leader", ":troop"),
							(try_end),
						(try_end),
						(is_between, ":player_supporters_faction_leader", "trp_npc1", "trp_heroes_end"),
						(neg|troop_slot_ge, ":player_supporters_faction_leader", 8, 0),
						(neg|troop_slot_ge, ":player_supporters_faction_leader", 2, 11),
						(change_screen_return),
						(start_map_conversation, ":player_supporters_faction_leader", -1),
					(else_try),
						(neq, ":value_12", 1),
						(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
						(jump_to_menu, "$g_next_menu"),
					(else_try),
						(eq, "$players_kingdom", "fac_player_supporters_faction"),
						(assign, "$g_center_taken_by_player_faction", "$g_encountered_party"),
						(neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
						(faction_get_slot, ":player_supporters_faction_leader", "fac_player_supporters_faction", slot_faction_leader),
						(change_screen_return),
						(start_map_conversation, ":player_supporters_faction_leader", -1),
					(else_try),
						(this_or_next|eq, ":value_12", 1),
						(neg|is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
						(assign, "$g_center_taken_by_player_faction", "$g_encountered_party"),
						(assign, "$talk_context", 20),
						(change_screen_return),
						(party_template_get_slot, ":party_template_slot_troop_trees_657", "$troop_trees", 657),
						(assign, ":value_13", ":party_template_slot_troop_trees_657"),
						(assign, ":value_14", "$players_kingdom"),
						(try_begin),
							(neg|is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
							(party_template_get_slot, ":party_template_slot_troop_trees_612", "$troop_trees", 612),
							(assign, ":value_13", ":party_template_slot_troop_trees_612"),
							(assign, ":value_14", "$g_player_culture"),
							(this_or_next|is_between, ":value_14", "fac_kingdom_1", "fac_kingdoms_end"),
							(is_between, ":value_14", "fac_culture_1", "fac_player_faction"),
						(else_try),
							(neg|is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
							(is_between, "$g_player_court", "p_town_1", "p_salt_mine"),
							(party_slot_ge, "$g_player_court", 61, 1),
							(party_get_slot, ":value_14", "$g_player_court", slot_center_original_faction),
						(try_end),
						(try_begin),
							(is_between, ":value_14", "fac_player_supporters_faction", "fac_kingdoms_end"),
							(faction_get_slot, ":value_14", ":value_14", slot_faction_culture),
						(try_end),
						(try_begin),
							(is_between, ":value_14", "fac_culture_1", "fac_player_faction"),
							(neq, ":value_14", "fac_culture_1"),
							(faction_get_slot, reg0, ":value_14", slot_faction_messenger_troop),
							(ge, reg0, "trp_mercenary_n_townsman"),
							(assign, ":value_13", reg0),
						(try_end),
						(troop_get_slot, ":party_template_slot_troop_trees_657", "$troop_trees", 657),
						(assign, ":value_13", ":party_template_slot_troop_trees_657"),
						(assign, ":value_15", 0),
						(party_get_num_companion_stacks, ":num_companion_stacks_collective_enemy", "p_main_party"),
						(try_for_range, ":value_7", 0, ":num_companion_stacks_collective_enemy"),
							(party_stack_get_troop_id, ":party_stack_troop_id_collective_enemy_number", "p_main_party", ":value_7"),
							(neq, ":party_stack_troop_id_collective_enemy_number", "trp_player"),
							(party_stack_get_size, ":party_stack_size_main_party_value_7", "p_main_party", ":value_7"),
							(party_stack_get_num_wounded, ":party_stack_num_wounded_main_party_value_7", "p_main_party", ":value_7"),
							(troop_get_slot, ":main_party_player_routed_agents", "p_main_party", slot_troop_player_routed_agents),
							(assign, ":value_16", 0),
							(try_begin),
								(neg|troop_is_hero, ":party_stack_troop_id_collective_enemy_number"),
								(store_add, ":value_17", ":party_stack_num_wounded_main_party_value_7", ":main_party_player_routed_agents"),
								(gt, ":party_stack_size_main_party_value_7", ":value_17"),
								(assign, ":value_16", 1),
							(else_try),
								(troop_is_hero, ":party_stack_troop_id_collective_enemy_number"),
								(neg|troop_is_wounded, ":party_stack_troop_id_collective_enemy_number"),
								(assign, ":value_16", 1),
							(try_end),
							(eq, ":value_16", 1),
							(try_begin),
								(troop_is_hero, ":party_stack_troop_id_collective_enemy_number"),
								(troop_get_slot, ":party_stack_troop_id_collective_enemy_number_renown", ":party_stack_troop_id_collective_enemy_number", slot_troop_renown),
								(store_mul, ":value_18", ":party_stack_troop_id_collective_enemy_number_renown", 100),
								(val_add, ":value_18", 1000),
							(else_try),
								(store_character_level, ":character_level_party_stack_troop_id_collective_enemy_number", ":party_stack_troop_id_collective_enemy_number"),
								(assign, ":value_18", ":character_level_party_stack_troop_id_collective_enemy_number"),
							(try_end),
							(try_begin),
								(gt, ":value_18", ":value_15"),
								(assign, ":value_15", ":value_18"),
								(assign, ":value_13", ":party_stack_troop_id_collective_enemy_number"),
								(party_stack_get_troop_dna, ":party_stack_troop_dna_main_party_value_7", "p_main_party", ":value_7"),
							(try_end),
						(try_end),
						(start_map_conversation, ":value_13", ":party_stack_troop_dna_main_party_value_7"),
					(try_end),
				(try_end),
			(try_end),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[], ".")
	]
	),

	("enemy_slipped_away", 0, "{s17}",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_total_victory")
		], ".")
	]
	),

	("total_defeat", 0, "{!}You shouldn't be reading this...",
	"none",
	[
		(play_track, "track_min_captured", 1),
		(party_get_num_prisoner_stacks, ":num_prisoner_stacks_main_party", "p_main_party"),
		(try_for_range, ":number", 0, ":num_prisoner_stacks_main_party"),
			(party_prisoner_stack_get_troop_id, ":party_prisoner_stack_troop_id_main_party_number", "p_main_party", ":number"),
			(troop_is_hero, ":party_prisoner_stack_troop_id_main_party_number"),
			(call_script, "script_remove_troop_from_prison", ":party_prisoner_stack_troop_id_main_party_number"),
		(try_end),
		(try_begin),
			(party_is_active, "$g_ally_party"),
			(call_script, "script_battle_political_consequences", "$g_ally_party", "$g_enemy_party"),
		(else_try),
			(call_script, "script_battle_political_consequences", "p_main_party", "$g_enemy_party"),
		(try_end),
		(call_script, "script_loot_player_items", "$g_enemy_party"),
		(assign, "$g_move_heroes", 0),
		(party_clear, "p_temp_party"),
		(call_script, "script_party_add_party_prisoners", "p_temp_party", "p_main_party"),
		(call_script, "script_party_prisoners_add_party_companions", "p_temp_party", "p_main_party"),
		(distribute_party_among_party_group, "p_temp_party", "$g_enemy_party"),
		(assign, "$g_prison_heroes", 1),
		(call_script, "script_party_remove_all_companions", "p_main_party"),
		(assign, "$g_prison_heroes", 0),
		(assign, "$g_move_heroes", 1),
		(call_script, "script_party_remove_all_prisoners", "p_main_party"),
		(val_add, "$g_total_defeats", 1),
		(try_begin),
			(neq, "$g_player_surrenders", 1),
			(store_random_in_range, ":random_in_range_0_100", 0, 100),
			(ge, ":random_in_range_0_100", "$g_player_luck"),
			(jump_to_menu, "mnu_permanent_damage"),
		(else_try),
			(try_begin),
				(eq, "$g_next_menu", -1),
				(leave_encounter),
				(change_screen_return),
			(else_try),
				(jump_to_menu, "$g_next_menu"),
			(try_end),
		(try_end),
		(try_begin),
			(gt, "$g_ally_party", 0),
			(call_script, "script_party_wound_all_members", "$g_ally_party"),
		(try_end),
		(party_get_num_companion_stacks, ":num_companion_stacks_encountered_party_backup", "p_encountered_party_backup"),
		(try_for_range, ":number", 0, ":num_companion_stacks_encountered_party_backup"),
			(party_stack_get_troop_id, ":party_prisoner_stack_troop_id_main_party_number", "p_encountered_party_backup", ":number"),
			(is_between, ":party_prisoner_stack_troop_id_main_party_number", "trp_npc1", "trp_knight_1_1_wife"),
			(troop_slot_eq, ":party_prisoner_stack_troop_id_main_party_number", slot_troop_occupation, 2),
			(store_faction_of_troop, ":faction_of_troop_party_prisoner_stack_troop_id_main_party_number", ":party_prisoner_stack_troop_id_main_party_number"),
			(call_script, "script_add_log_entry", 14, "trp_player", -1, ":party_prisoner_stack_troop_id_main_party_number", ":faction_of_troop_party_prisoner_stack_troop_id_main_party_number"),
		(try_end)
	],
	[]
	),

	("permanent_damage", mnf_disable_all_keys, "{s0}",
	"none",
	[
		(assign, ":var_1", 1),
		(try_for_range, ":unused", 0, ":var_1"),
			(store_random_in_range, ":random_in_range_0_4", 0, 4),
			(store_attribute_level, ":attribute_level_player_random_in_range_0_4", "trp_player", ":random_in_range_0_4"),
			(try_begin),
				(gt, ":attribute_level_player_random_in_range_0_4", 3),
				(neq, ":random_in_range_0_4", 3),
				(try_begin),
					(eq, ":random_in_range_0_4", 0),
					(str_store_string, 0, "@Some of your tendons have been damaged in the battle. You lose 1 strength."),
				(else_try),
					(eq, ":random_in_range_0_4", 1),
					(str_store_string, 0, "@You took a nasty wound which will cause you to limp slightly even after it heals. You lose 1 agility."),
				(else_try),
					(str_store_string, 0, "@You have trouble thinking straight after the battle, perhaps from a particularly hard hit to your head, and frequent headaches now plague your existence. Your intelligence is reduced by 1."),
				(try_end),
			(else_try),
				(lt, ":var_1", 200),
				(val_add, ":var_1", 1),
			(try_end),
		(try_end),
		(try_begin),
			(eq, ":var_1", 200),
			(try_begin),
				(eq, "$g_next_menu", -1),
				(leave_encounter),
				(change_screen_return),
			(else_try),
				(jump_to_menu, "$g_next_menu"),
			(try_end),
		(else_try),
			(troop_raise_attribute, "trp_player", ":random_in_range_0_4", -1),
		(try_end)
	],
	[
		("s0",
		[
			(store_random_in_range, ":random_in_range_0_4", 0, 4),
			(try_begin),
				(eq, ":random_in_range_0_4", 0),
				(str_store_string, 0, "@Perhaps I'm getting unlucky..."),
			(else_try),
				(eq, ":random_in_range_0_4", 1),
				(str_store_string, 0, "@Retirement is starting to sound better and better."),
			(else_try),
				(eq, ":random_in_range_0_4", 2),
				(str_store_string, 0, "@No matter! I will persevere!"),
			(else_try),
				(eq, ":random_in_range_0_4", 3),
				(try_begin),
					(eq, 1, "$character_gender"),
					(str_store_string, 0, "@What did I do to deserve this?"),
				(else_try),
					(str_store_string, 0, "@I suppose it'll make for a good story, at least..."),
				(try_end),
			(try_end)
		],
		"{s0}",
		[
			(try_begin),
				(eq, "$g_next_menu", -1),
				(leave_encounter),
				(change_screen_return),
			(else_try),
				(jump_to_menu, "$g_next_menu"),
			(try_end)
		], ".")
	]
	),

	("pre_join", 0, "You come across a battle between {s2} and {s1}. You decide to...",
	"none",
	[
		(str_store_party_name, 1, "$g_encountered_party"),
		(str_store_party_name, 2, "$g_encountered_party_2"),
		(eq, "$freelancer_state", 1),
		(try_begin),
			(party_get_attached_to, ":attached_to_l_enlisted_party", "$enlisted_party"),
			(this_or_next|eq, "$enlisted_party", "$g_encountered_party_2"),
			(eq, ":attached_to_l_enlisted_party", "$g_encountered_party_2"),
			(select_enemy, 0),
			(assign, "$g_enemy_party", "$g_encountered_party"),
			(assign, "$g_ally_party", "$g_encountered_party_2"),
		(else_try),
			(select_enemy, 1),
			(assign, "$g_enemy_party", "$g_encountered_party_2"),
			(assign, "$g_ally_party", "$g_encountered_party"),
		(try_end),
		(jump_to_menu, "mnu_join_battle")
	],
	[
		("pre_join_help_attackers",
		[
			(store_faction_of_party, ":faction_of_party_g_encountered_party_2", "$g_encountered_party_2"),
			(store_relation, ":relation_faction_of_party_g_encountered_party_2_player_supporters_faction", ":faction_of_party_g_encountered_party_2", "fac_player_supporters_faction"),
			(try_begin),
				(eq, ":faction_of_party_g_encountered_party_2", "$players_kingdom"),
				(str_store_string, 21, "@Ally"),
			(else_try),
				(ge, ":relation_faction_of_party_g_encountered_party_2_player_supporters_faction", 10),
				(str_store_string, 21, "@Friend"),
			(else_try),
				(lt, ":relation_faction_of_party_g_encountered_party_2_player_supporters_faction", 0),
				(str_store_string, 21, "@Enemy"),
			(else_try),
				(str_store_string, 21, "@Neutral"),
			(try_end)
		],
		"Move in to help the {s2}. ({s21})",
		[
			(select_enemy, 0),
			(assign, "$g_enemy_party", "$g_encountered_party"),
			(assign, "$g_ally_party", "$g_encountered_party_2"),
			(jump_to_menu, "mnu_join_battle")
		], "."),

		("pre_join_help_defenders",
		[
			(store_faction_of_party, ":faction_of_party_g_encountered_party", "$g_encountered_party"),
			(store_relation, ":relation_faction_of_party_g_encountered_party_player_supporters_faction", ":faction_of_party_g_encountered_party", "fac_player_supporters_faction"),
			(try_begin),
				(eq, ":relation_faction_of_party_g_encountered_party_player_supporters_faction", "$players_kingdom"),
				(str_store_string, 21, "@Ally"),
			(else_try),
				(ge, ":relation_faction_of_party_g_encountered_party_player_supporters_faction", 10),
				(str_store_string, 21, "@Friend"),
			(else_try),
				(lt, ":relation_faction_of_party_g_encountered_party_player_supporters_faction", 0),
				(str_store_string, 21, "@Enemy"),
			(else_try),
				(str_store_string, 21, "@Neutral"),
			(try_end)
		],
		"Rush to the aid of the {s1}. ({s21})",
		[
			(select_enemy, 1),
			(assign, "$g_enemy_party", "$g_encountered_party_2"),
			(assign, "$g_ally_party", "$g_encountered_party"),
			(jump_to_menu, "mnu_join_battle")
		], "."),

		("pre_join_leave",
		[],
		"Don't get involved.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("join_battle", mnf_enable_hot_keys, "You are helping {s2} against {s1}. You have {reg10} troops fit for battle against the enemy's {reg11}. {s4}",
	"none",
	[
		(str_clear, 4),
		(str_store_party_name, 1, "$g_enemy_party"),
		(str_store_party_name, 2, "$g_ally_party"),
		(call_script, "script_encounter_calculate_fit"),
		(try_begin),
			(eq, "$new_encounter", 1),
			(assign, "$new_encounter", 0),
			(try_begin),
				(eq, "$freelancer_state", 1),
				(call_script, "script_let_nearby_parties_join_current_battle", 0, 0),
				(str_store_party_name, 1, "$g_enemy_party"),
			(try_end),
			(call_script, "script_encounter_init_variables"),
		(else_try),
			(eq, "$g_leave_encounter", 1),
			(change_screen_return),
		(try_end),
		(try_begin),
			(call_script, "script_party_count_members_with_full_health", "p_collective_enemy"),
			(assign, ":var_1", reg0),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$g_battle_result", 1),
				(this_or_next|le, ":var_1", 0),
				(le, ":var_1", "$num_routed_enemies"),
				(assign, ":value", 1),
			(else_try),
				(eq, "$g_engaged_enemy", 1),
				(le, "$g_enemy_fit_for_battle", 0),
				(ge, "$g_friend_fit_for_battle", 1),
				(assign, ":value", 1),
			(try_end),
			(this_or_next|eq, ":value", 1),
			(eq, "$g_enemy_surrenders", 1),
			(assign, "$g_next_menu", -1),
			(jump_to_menu, "mnu_total_victory"),
		(else_try),
			(call_script, "script_party_count_members_with_full_health", "p_collective_friends"),
			(assign, ":var_3", reg0),
			(assign, ":value_2", 0),
			(try_begin),
				(eq, "$g_battle_result", -1),
				(le, ":var_3", "$num_routed_allies"),
				(assign, ":value_2", 1),
			(try_end),
			(this_or_next|eq, ":value_2", 1),
			(eq, "$g_player_surrenders", 1),
			(leave_encounter),
			(change_screen_return),
		(try_end),
		(str_clear, 4),
		(neq, "$freelancer_state", 1),
		(str_store_troop_name, 7, "$g_player_troop"),
		(set_player_troop, "$g_player_troop"),
		(str_store_string, 4, "@^^Current Commander: {s7}"),
		(try_begin),
			(party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
			(str_store_string, 4, "@{s4}^^The troops you selected are ready to join you in battle."),
		(else_try),
			(str_store_string, 4, "@{s4}^^Your captains will deal with troop assignments."),
		(try_end),
		(try_begin),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
			(str_store_string, 4, "@{s4}^^Your orders have been sent to your captains."),
		(else_try),
			(str_store_string, 4, "@{s4}^^There is no tactical plan in place."),
		(try_end)
	],
	[
		("change_commander_join_battle",
		[
			(neq, "$freelancer_state", 1),
			(set_player_troop, "$g_player_troop")
		],
		"Change commander.",
		[
			(start_presentation, "prsnt_change_commander")
		], "."),

		("deployment",
		[
			(neq, "$freelancer_state", 1),
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(neq, ":current_terrain_main_party", 15),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0),
			(party_get_skill_level, ":skill_level_main_party_15", "p_main_party", 15),
			(ge, ":skill_level_main_party_15", 2),
			(call_script, "script_party_count_fit_for_battle", "p_collective_friends"),
			(assign, ":var_3", reg0),
			(call_script, "script_party_count_fit_for_battle", "p_collective_enemy"),
			(assign, ":var_4", reg0),
			(store_add, ":value", ":var_3", ":var_4"),
			(party_get_slot, ":main_party_center_accumulated_tariffs", "p_main_party", slot_center_accumulated_tariffs),
			(gt, ":value", ":main_party_center_accumulated_tariffs")
		],
		"Choose who will join you in battle.",
		[
			(assign, "$g_next_menu", "mnu_join_battle"),
			(start_presentation, "prsnt_prebattle_custom_deployment")
		], "."),

		("orders",
		[
			(neq, "$freelancer_state", 1),
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(neq, ":current_terrain_main_party", 15),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0),
			(party_get_skill_level, ":skill_level_main_party_15", "p_main_party", 15),
			(ge, ":skill_level_main_party_15", 2)
		],
		"Plan your battle with the enemy.",
		[
			(assign, "$g_next_menu", "mnu_join_battle"),
			(start_presentation, "prsnt_prebattle_orders")
		], "."),

		("do_orders",
		[
			(neq, "$freelancer_state", 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1)
		],
		"Enough planning. To battle!",
		[
			(party_set_slot, "p_main_party", slot_center_shipyards, 0),
			(party_set_next_battle_simulation_time, "$g_encountered_party", -1),
			(assign, "$g_battle_result", 0),
			(call_script, "script_calculate_renown_value"),
			(call_script, "script_calculate_battle_advantage"),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(set_jump_mission, "mt_lead_charge"),
			(call_script, "script_setup_random_scene"),
			(assign, "$g_next_menu", "mnu_join_battle"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("clear_orders",
		[
			(neq, "$freelancer_state", 1),
			(this_or_next|party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1)
		],
		"Re-assess the situation.",
		[
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
				(party_set_slot, "p_main_party", slot_center_accumulated_rents, 0),
			(try_end),
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
				(party_set_slot, "p_main_party", slot_center_shipyards, 0),
				(party_set_slot, "p_main_party", slot_center_household_gardens, 0),
			(try_end),
			(jump_to_menu, "mnu_join_battle")
		], "."),

		("hold",
		[
			(neq, "$freelancer_state", 1),
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(neq, ":current_terrain_main_party", 15),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0),
			(party_get_skill_level, ":skill_level_main_party_15", "p_main_party", 15),
			(ge, ":skill_level_main_party_15", 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Take the field.",
		[
			(party_set_slot, "p_main_party", slot_center_household_gardens, 1),
			(party_get_slot, ":main_party_town_trade_good_prices_begin", "p_main_party", slot_town_trade_good_prices_begin),
			(try_begin),
				(gt, ":main_party_town_trade_good_prices_begin", 0),
				(party_set_slot, "p_main_party_backup", slot_town_trade_good_prices_begin, ":main_party_town_trade_good_prices_begin"),
			(try_end),
			(party_set_slot, "p_main_party", slot_town_trade_good_prices_begin, 910),
			(party_set_next_battle_simulation_time, "$g_encountered_party", -1),
			(assign, "$g_battle_result", 0),
			(call_script, "script_calculate_renown_value"),
			(call_script, "script_calculate_battle_advantage"),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(set_jump_mission, "mt_lead_charge"),
			(call_script, "script_setup_random_scene"),
			(assign, "$g_next_menu", "mnu_join_battle"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("follow",
		[
			(neq, "$freelancer_state", 1),
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(neq, ":current_terrain_main_party", 15),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0),
			(party_get_skill_level, ":skill_level_main_party_15", "p_main_party", 15),
			(ge, ":skill_level_main_party_15", 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Lead your troops.",
		[
			(party_set_slot, "p_main_party", slot_center_household_gardens, 1),
			(party_get_slot, ":main_party_town_trade_good_prices_begin", "p_main_party", slot_town_trade_good_prices_begin),
			(try_begin),
				(gt, ":main_party_town_trade_good_prices_begin", 0),
				(party_set_slot, "p_main_party_backup", slot_town_trade_good_prices_begin, ":main_party_town_trade_good_prices_begin"),
			(try_end),
			(party_set_slot, "p_main_party", slot_town_trade_good_prices_begin, 911),
			(party_set_next_battle_simulation_time, "$g_encountered_party", -1),
			(assign, "$g_battle_result", 0),
			(call_script, "script_calculate_renown_value"),
			(call_script, "script_calculate_battle_advantage"),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(set_jump_mission, "mt_lead_charge"),
			(call_script, "script_setup_random_scene"),
			(assign, "$g_next_menu", "mnu_join_battle"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("join_attack",
		[
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(neq, ":current_terrain_main_party", 15),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Charge the enemy.",
		[
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
				(party_set_slot, "p_main_party", slot_center_shipyards, 0),
			(try_end),
			(party_set_next_battle_simulation_time, "$g_encountered_party", -1),
			(assign, "$g_battle_result", 0),
			(call_script, "script_calculate_renown_value"),
			(call_script, "script_calculate_battle_advantage"),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(set_jump_mission, "mt_lead_charge"),
			(call_script, "script_setup_random_scene"),
			(assign, "$g_next_menu", "mnu_join_battle"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("join_attack",
		[
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(this_or_next|eq, ":current_terrain_main_party", 7),
			(eq, ":current_terrain_main_party", 15),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Board the enemy",
		[
			(party_set_next_battle_simulation_time, "$g_encountered_party", -1),
			(assign, "$g_battle_result", 0),
			(call_script, "script_calculate_renown_value"),
			(call_script, "script_calculate_battle_advantage"),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(set_jump_mission, "mt_ship_battle"),
			(try_begin),
				(val_add, reg10, reg11),
				(gt, reg10, 60),
				(store_random_in_range, ":random_in_range_1_100", 1, 100),
				(try_begin),
					(is_between, ":random_in_range_1_100", 1, 50),
					(jump_to_scene, "scn_sea_1"),
				(else_try),
					(is_between, ":random_in_range_1_100", 51, 100),
					(jump_to_scene, "scn_sea_1"),
				(try_end),
			(else_try),
				(store_random_in_range, ":random_in_range_1_100", 1, 100),
				(try_begin),
					(is_between, ":random_in_range_1_100", 1, 50),
					(jump_to_scene, "scn_sea_2"),
				(else_try),
					(is_between, ":random_in_range_1_100", 51, 100),
					(jump_to_scene, "scn_sea_3"),
				(try_end),
			(try_end),
			(assign, "$g_next_menu", "mnu_join_battle"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("join_order_attack",
		[
			(neq, "$freelancer_state", 1),
			(call_script, "script_party_count_members_with_full_health", "p_main_party"),
			(ge, reg0, 3),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Order your troops to attack with your allies while you stay back.",
		[
			(assign, "$g_joined_battle_to_help", 1),
			(party_set_next_battle_simulation_time, "$g_encountered_party", -1),
			(jump_to_menu, "mnu_join_order_attack")
		], "."),

		("join_leave",
		[
			(neq, "$freelancer_state", 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Leave.",
		[
			(try_begin),
				(neg|troop_is_wounded, "$g_player_troop"),
				(call_script, "script_objectionable_action", 1, "str_flee_battle"),
				(party_stack_get_troop_id, ":party_stack_troop_id_g_enemy_party_0", "$g_enemy_party", 0),
				(is_between, ":party_stack_troop_id_g_enemy_party_0", "trp_npc1", "trp_knight_1_1_wife"),
				(call_script, "script_add_log_entry", 15, "trp_player", -1, ":party_stack_troop_id_g_enemy_party_0", -1),
			(try_end),
			(leave_encounter),
			(change_screen_return)
		], "."),

		("join_wounded",
		[
			(eq, "$freelancer_state", 1),
			(troop_is_wounded, "trp_player")
		],
		"You are too wounded to fight.",
		[
			(leave_encounter),
			(change_screen_map)
		], ".")
	]
	),

	("join_order_attack", mnf_disable_all_keys, "{s4}^^Your casualties: {s8}^^Allies' casualties: {s9}^^Enemy casualties: {s10}",
	"none",
	[
		(call_script, "script_party_calculate_strength", "p_main_party", 1),
		(assign, ":var_1", reg0),
		(val_div, ":var_1", 5),
		(call_script, "script_party_calculate_strength", "p_collective_friends", 0),
		(assign, ":var_2", reg0),
		(val_div, ":var_2", 5),
		(call_script, "script_party_calculate_strength", "p_collective_enemy", 0),
		(assign, ":var_3", reg0),
		(val_div, ":var_3", 5),
		(try_begin),
			(eq, ":var_2", 0),
			(store_div, ":value", ":var_3", 2),
		(else_try),
			(assign, ":value", ":var_3"),
			(val_mul, ":value", ":var_1"),
			(val_div, ":value", ":var_2"),
		(try_end),
		(val_sub, ":var_3", ":value"),
		(inflict_casualties_to_party_group, "p_main_party", ":value", "p_temp_casualties"),
		(call_script, "script_print_casualties_to_s0", "p_temp_casualties", 0),
		(str_store_string_reg, 8, 0),
		(inflict_casualties_to_party_group, "$g_enemy_party", ":var_2", "p_temp_casualties"),
		(party_get_num_companion_stacks, ":num_companion_stacks_temp_casualties", "p_temp_casualties"),
		(try_for_range, ":number", 0, ":num_companion_stacks_temp_casualties"),
			(party_stack_get_troop_id, ":party_stack_troop_id_temp_casualties_number", "p_temp_casualties", ":number"),
			(try_begin),
				(party_stack_get_size, ":party_stack_size_temp_casualties_number", "p_temp_casualties", ":number"),
				(gt, ":party_stack_size_temp_casualties_number", 0),
				(party_add_members, "p_total_enemy_casualties", ":party_stack_troop_id_temp_casualties_number", ":party_stack_size_temp_casualties_number"),
				(party_stack_get_num_wounded, ":party_stack_num_wounded_temp_casualties_number", "p_temp_casualties", ":number"),
				(gt, ":party_stack_num_wounded_temp_casualties_number", 0),
				(party_wound_members, "p_total_enemy_casualties", ":party_stack_troop_id_temp_casualties_number", ":party_stack_num_wounded_temp_casualties_number"),
			(try_end),
		(try_end),
		(call_script, "script_print_casualties_to_s0", "p_temp_casualties", 0),
		(str_store_string_reg, 10, 0),
		(call_script, "script_collect_friendly_parties"),
		(inflict_casualties_to_party_group, "$g_ally_party", ":var_3", "p_temp_casualties"),
		(call_script, "script_print_casualties_to_s0", "p_temp_casualties", 0),
		(str_store_string_reg, 9, 0),
		(party_collect_attachments_to_party, "$g_enemy_party", "p_collective_enemy"),
		(assign, "$no_soldiers_left", 0),
		(try_begin),
			(call_script, "script_party_count_members_with_full_health", "p_main_party"),
			(assign, ":var_10", reg0),
			(le, ":var_10", "$num_routed_us"),
			(assign, "$no_soldiers_left", 1),
			(str_store_string, 4, "str_join_order_attack_failure"),
		(else_try),
			(call_script, "script_party_count_members_with_full_health", "p_collective_enemy"),
			(assign, ":var_11", reg0),
			(this_or_next|le, ":var_11", 0),
			(le, ":var_11", "$num_routed_enemies"),
			(assign, "$g_battle_result", 1),
			(assign, "$no_soldiers_left", 1),
			(str_store_string, 4, "str_join_order_attack_success"),
		(else_try),
			(str_store_string, 4, "str_join_order_attack_continue"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_join_battle")
		], ".")
	]
	),

	("odin_cave", 0, "You arrive at an outlaw lair.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_cave")
	],
	[
		("enter",
		[
			(check_quest_active, "qst_odin_cave_quest")
		],
		"Enter the lair.",
		[
			(modify_visitors_at_site, "scn_odin_cave"),
			(reset_visitors, 0),
			(set_visitors, 1, "trp_odin_npc_1", 1),
			(set_visitors, 2, "trp_odin_npc_2", 1),
			(set_visitors, 3, "trp_odin_npc_3", 1),
			(set_visitors, 4, "trp_odin_npc_4", 1),
			(set_visitors, 5, "trp_odin_npc_5", 1),
			(set_jump_mission, "mt_odin_cave"),
			(jump_to_scene, "scn_odin_cave"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(change_screen_map)
		], ".")
	]
	),

	("horror_cave", 0, "You arrive at the old barrow. You can hear a faint murmur from the inside...",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_cave")
	],
	[
		("enter",
		[
			(check_quest_active, "qst_barrow_quest")
		],
		"Enter the barrow.",
		[
			(modify_visitors_at_site, "scn_horror_cave"),
			(reset_visitors, 0),
			(set_visitors, 1, "trp_horror_npc_1", 1),
			(set_visitors, 2, "trp_horror_npc_2", 1),
			(set_visitors, 3, "trp_horror_npc_3", 1),
			(set_visitors, 4, "trp_horror_npc_4", 1),
			(set_visitors, 5, "trp_horror_npc_5", 1),
			(set_jump_mission, "mt_horror_cave"),
			(jump_to_scene, "scn_horror_cave"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(change_screen_map)
		], ".")
	]
	),

	("brookwater_keep", 0, "You arrive at Brookwater Keep, the seat of House Darke.",
	"none",
	[
		(set_background_mesh, "mesh_pic_castlesnow")
	],
	[
		("enter",
		[
			(check_quest_active, "qst_tyrion_quest")
		],
		"Approach the keep.",
		[
			(modify_visitors_at_site, "scn_brookwater_keep"),
			(reset_visitors, 0),
			(set_visitors, 1, "trp_brookwater_npc_1", 1),
			(set_visitors, 2, "trp_brookwater_npc_2", 1),
			(set_visitors, 3, "trp_brookwater_npc_3", 1),
			(set_visitors, 4, "trp_brookwater_npc_4", 1),
			(set_visitors, 5, "trp_brookwater_npc_5", 1),
			(set_visitors, 6, "trp_brookwater_npc_6", 1),
			(set_visitors, 7, "trp_brookwater_npc_7", 1),
			(set_visitors, 8, "trp_brookwater_npc_8", 1),
			(set_visitors, 9, "trp_brookwater_npc_9", 1),
			(set_visitors, 10, "trp_ser_rike", 1),
			(set_jump_mission, "mt_brookwater_keep"),
			(jump_to_scene, "scn_brookwater_keep"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(change_screen_map)
		], ".")
	]
	),

	("haldon_bath", 0, "You arrive at a ruined public bath.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_ruins")
	],
	[
		("enter",
		[
			(check_quest_active, "qst_aegon_targaryen_quest")
		],
		"Search the ruins.",
		[
			(modify_visitors_at_site, "scn_haldon_bath"),
			(reset_visitors, 0),
			(set_visitors, 1, "trp_haldon_npc_1", 1),
			(set_visitors, 2, "trp_haldon_npc_2", 1),
			(set_visitors, 3, "trp_haldon_npc_3", 1),
			(set_visitors, 4, "trp_haldon_npc_4", 1),
			(set_visitors, 5, "trp_haldon_npc_5", 1),
			(set_visitors, 6, "trp_haldon_npc_6", 1),
			(set_visitors, 7, "trp_haldon_npc_7", 1),
			(set_visitors, 8, "trp_haldon_npc_8", 1),
			(set_visitors, 9, "trp_haldon_npc_9", 1),
			(set_visitors, 10, "trp_haldon_halfmaester", 1),
			(set_jump_mission, "mt_haldon_bath"),
			(jump_to_scene, "scn_haldon_bath"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(change_screen_map)
		], ".")
	]
	),

	("golden_company_camp", 0, "You arrive at the camp of the Golden Company.",
	"none",
	[
		(set_background_mesh, "mesh_pic_rhoyne_outlaws")
	],
	[
		("enter",
		[],
		"Enter the camp.",
		[
			(set_jump_mission, "mt_golden_company_camp"),
			(modify_visitors_at_site, "scn_golden_company_camp"),
			(reset_visitors),
			(set_visitor, 16, "trp_varys_npc_6"),
			(set_visitor, 17, "trp_golden_company_npc_1"),
			(set_visitor, 18, "trp_golden_company_npc_2"),
			(set_visitor, 19, "trp_golden_company_npc_3"),
			(set_visitor, 20, "trp_golden_company_npc_4"),
			(set_visitor, 21, "trp_golden_company_npc_5"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_golden_company_camp", slot_scene_visited, 1),
			(jump_to_scene, "scn_golden_company_camp"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("dragonstone_village", 0, "You arrive at the village.",
	"none",
	[
		(set_background_mesh, "mesh_pic_village_s")
	],
	[
		("enter",
		[
			(check_quest_active, "qst_dragonseed_quest")
		],
		"Enter the village.",
		[
			(modify_visitors_at_site, "scn_dragonstone_village"),
			(reset_visitors, 0),
			(set_visitors, 1, "trp_dragonseed_npc_1", 1),
			(set_visitors, 2, "trp_dragonseed_npc_2", 1),
			(set_visitors, 3, "trp_dragonseed_npc_3", 1),
			(set_visitors, 4, "trp_dragonseed_npc_4", 1),
			(set_visitors, 5, "trp_dragonseed_npc_5", 1),
			(set_visitors, 6, "trp_dragonseed_npc_6", 1),
			(set_visitors, 7, "trp_dragonseed_npc_7", 1),
			(set_visitors, 8, "trp_dragonseed_npc_8", 1),
			(set_visitors, 9, "trp_dragonseed_npc_9", 1),
			(set_visitors, 10, "trp_burlow", 1),
			(set_jump_mission, "mt_dragonstone_village"),
			(jump_to_scene, "scn_dragonstone_village"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(change_screen_map)
		], ".")
	]
	),

	("mole_town", 0, "You arrive at the outskirts of Mole Town.",
	"none",
	[
		(set_background_mesh, "mesh_pic_village_p")
	],
	[
		("enter",
		[
			(check_quest_active, "qst_nw_main_quest_first_quest")
		],
		"Attack the wildlings.",
		[
			(modify_visitors_at_site, "scn_mole_town"),
			(reset_visitors, 0),
			(set_visitors, 1, "trp_nights_watch_ranger", 1),
			(set_visitors, 2, "trp_nights_watch_ranger", 1),
			(set_visitors, 3, "trp_nights_watch_ranger", 1),
			(set_visitors, 4, "trp_nights_watch_ranger", 1),
			(set_visitors, 5, "trp_nights_watch_ranger", 1),
			(set_visitors, 6, "trp_nights_watch_ranger", 1),
			(set_visitors, 7, "trp_nights_watch_ranger", 1),
			(set_visitors, 8, "trp_nights_watch_ranger", 1),
			(set_visitors, 9, "trp_nights_watch_ranger", 1),
			(set_visitors, 10, "trp_nights_watch_ranger", 1),
			(set_visitors, 11, "trp_nights_watch_archer", 1),
			(set_visitors, 12, "trp_nights_watch_archer", 1),
			(set_visitors, 13, "trp_nights_watch_archer", 1),
			(set_visitors, 14, "trp_nights_watch_archer", 1),
			(set_visitors, 15, "trp_nights_watch_archer", 1),
			(set_visitors, 16, "trp_nw_styr", 1),
			(set_visitors, 17, "trp_nw_ygritte", 1),
			(set_visitors, 18, "trp_nw_big_boil", 1),
			(set_visitors, 19, "trp_nw_thenn", 1),
			(set_visitors, 20, "trp_nw_thenn", 1),
			(set_visitors, 21, "trp_nw_thenn", 1),
			(set_visitors, 22, "trp_nw_thenn", 1),
			(set_visitors, 23, "trp_nw_thenn", 1),
			(set_visitors, 24, "trp_nw_thenn", 1),
			(set_visitors, 25, "trp_nw_thenn", 1),
			(set_visitors, 26, "trp_nw_thenn", 1),
			(set_visitors, 27, "trp_nw_spearwife", 1),
			(set_visitors, 28, "trp_nw_spearwife", 1),
			(set_visitors, 29, "trp_nw_spearwife", 1),
			(set_visitors, 30, "trp_nw_spearwife", 1),
			(set_visitors, 31, "trp_nw_raider", 1),
			(set_visitors, 32, "trp_nw_raider", 1),
			(set_visitors, 33, "trp_nw_raider", 1),
			(set_visitors, 34, "trp_nw_raider", 1),
			(set_visitors, 35, "trp_nw_raider", 1),
			(set_visitors, 36, "trp_nw_raider", 1),
			(set_visitors, 37, "trp_nw_raider", 1),
			(set_visitors, 38, "trp_nw_raider", 1),
			(set_visitors, 39, "trp_nw_raider", 1),
			(set_visitors, 40, "trp_nw_raider", 1),
			(set_jump_mission, "mt_mole_town"),
			(jump_to_scene, "scn_mole_town"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(change_screen_map)
		], ".")
	]
	),

	("bridge_of_skulls", 0, "You arrive at the Bridge of Skulls.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_wall")
	],
	[
		("enter",
		[
			(check_quest_active, "qst_nw_main_quest_third_quest1")
		],
		"Rush to the aid of Bowen Marsh.",
		[
			(modify_visitors_at_site, "scn_bridge_of_skulls"),
			(reset_visitors, 0),
			(set_visitors, 1, "trp_nw_bowen_marsh", 1),
			(set_visitors, 2, "trp_nw_dolorous_edd", 1),
			(set_visitors, 3, "trp_nw_endrew_tarth", 1),
			(set_visitors, 4, "trp_nw_aladale_wynch", 1),
			(set_visitors, 5, "trp_nw_wallace_massey", 1),
			(set_visitors, 6, "trp_nw_dywen", 1),
			(set_visitors, 7, "trp_nights_watch_ranger", 2),
			(set_visitors, 8, "trp_nights_watch_ranger", 2),
			(set_visitors, 9, "trp_nights_watch_ranger", 2),
			(set_visitors, 10, "trp_nights_watch_ranger", 2),
			(set_visitors, 11, "trp_nights_watch_archer", 2),
			(set_visitors, 12, "trp_nights_watch_archer", 2),
			(set_visitors, 13, "trp_nights_watch_archer", 2),
			(set_visitors, 14, "trp_nights_watch_archer", 2),
			(set_visitors, 15, "trp_nights_watch_archer", 2),
			(set_visitors, 16, "trp_nw_weeper", 1),
			(set_visitors, 17, "trp_nw_brogg", 1),
			(set_visitors, 18, "trp_nw_gavin", 1),
			(set_visitors, 19, "trp_nw_doss", 1),
			(set_visitors, 20, "trp_nw_raider_archer", 4),
			(set_visitors, 21, "trp_nw_raider_archer", 4),
			(set_visitors, 22, "trp_nw_raider_archer", 4),
			(set_visitors, 23, "trp_nw_raider_archer", 4),
			(set_visitors, 24, "trp_nw_raider_archer", 4),
			(set_visitors, 25, "trp_nw_raider_archer", 4),
			(set_visitors, 26, "trp_nw_raider_archer", 4),
			(set_visitors, 27, "trp_nw_spearwife", 4),
			(set_visitors, 28, "trp_nw_spearwife", 4),
			(set_visitors, 29, "trp_nw_spearwife", 4),
			(set_visitors, 30, "trp_nw_spearwife", 4),
			(set_visitors, 31, "trp_nw_raider", 4),
			(set_visitors, 32, "trp_nw_raider", 4),
			(set_visitors, 33, "trp_nw_raider", 4),
			(set_visitors, 34, "trp_nw_raider", 4),
			(set_visitors, 35, "trp_nw_raider", 4),
			(set_visitors, 36, "trp_nw_raider", 4),
			(set_visitors, 37, "trp_nw_raider", 4),
			(set_visitors, 38, "trp_nw_raider", 4),
			(set_visitors, 39, "trp_nw_raider", 4),
			(set_visitors, 40, "trp_nw_raider", 4),
			(set_visitors, 41, "trp_nw_raider", 4),
			(set_visitors, 42, "trp_nw_raider", 4),
			(set_visitors, 43, "trp_nw_raider", 4),
			(set_visitors, 44, "trp_nw_raider", 4),
			(set_visitors, 45, "trp_nw_raider", 4),
			(set_visitors, 46, "trp_nights_watch_ranger", 2),
			(set_visitors, 47, "trp_nights_watch_ranger", 2),
			(set_visitors, 48, "trp_nights_watch_ranger", 2),
			(set_visitors, 49, "trp_nights_watch_ranger", 2),
			(set_visitors, 50, "trp_nights_watch_ranger", 2),
			(set_jump_mission, "mt_bridge_of_skulls"),
			(jump_to_scene, "scn_bridge_of_skulls"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(change_screen_map)
		], ".")
	]
	),

	("wall_tunnel", 0, "You arrive at the storerooms.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_wall")
	],
	[
		("enter",
		[
			(check_quest_active, "qst_nw_main_quest_fifth_quest")
		],
		"Rush to the aid of the Night's Watch!",
		[
			(modify_visitors_at_site, "scn_wall_tunnel"),
			(reset_visitors, 0),
			(set_visitors, 1, "trp_nw_jon_snow", 1),
			(set_visitors, 2, "trp_nw_pyp", 1),
			(set_visitors, 3, "trp_nw_grenn", 1),
			(set_visitors, 4, "trp_nights_watch_ranger", 4),
			(set_visitors, 5, "trp_nights_watch_ranger", 4),
			(set_visitors, 6, "trp_nights_watch_ranger", 4),
			(set_visitors, 7, "trp_nights_watch_ranger", 4),
			(set_visitors, 8, "trp_nights_watch_ranger", 4),
			(set_visitors, 9, "trp_nights_watch_ranger", 4),
			(set_visitors, 10, "trp_nights_watch_ranger", 4),
			(set_visitors, 11, "trp_nights_watch_archer", 4),
			(set_visitors, 12, "trp_nights_watch_archer", 4),
			(set_visitors, 13, "trp_nights_watch_archer", 4),
			(set_visitors, 14, "trp_nights_watch_archer", 4),
			(set_visitors, 15, "trp_nights_watch_archer", 4),
			(set_visitors, 16, "trp_nw_harma", 1),
			(set_visitors, 17, "trp_nw_wicker", 1),
			(set_visitors, 18, "trp_nw_elgorn", 1),
			(set_visitors, 19, "trp_nw_kol", 1),
			(set_visitors, 20, "trp_nw_raider_archer", 5),
			(set_visitors, 21, "trp_nw_raider_archer", 5),
			(set_visitors, 22, "trp_nw_raider_archer", 5),
			(set_visitors, 23, "trp_nw_raider_archer", 5),
			(set_visitors, 24, "trp_nw_raider_archer", 5),
			(set_visitors, 25, "trp_nw_raider_archer", 5),
			(set_visitors, 26, "trp_nw_raider_archer", 5),
			(set_visitors, 27, "trp_nw_spearwife", 5),
			(set_visitors, 28, "trp_nw_spearwife", 5),
			(set_visitors, 29, "trp_nw_spearwife", 5),
			(set_visitors, 30, "trp_nw_spearwife", 5),
			(set_visitors, 31, "trp_nw_raider", 5),
			(set_visitors, 32, "trp_nw_raider", 5),
			(set_visitors, 33, "trp_nw_raider", 5),
			(set_visitors, 34, "trp_nw_raider", 5),
			(set_visitors, 35, "trp_nw_raider", 5),
			(set_visitors, 36, "trp_nw_raider", 5),
			(set_visitors, 37, "trp_nw_raider", 5),
			(set_visitors, 38, "trp_nw_raider", 5),
			(set_visitors, 39, "trp_nw_raider", 5),
			(set_visitors, 40, "trp_nw_raider", 5),
			(set_visitors, 41, "trp_nw_raider", 5),
			(set_visitors, 42, "trp_nw_raider", 5),
			(set_visitors, 43, "trp_nw_raider", 5),
			(set_visitors, 44, "trp_nw_raider", 5),
			(set_visitors, 45, "trp_nw_raider", 5),
			(set_visitors, 46, "trp_nights_watch_ranger", 3),
			(set_visitors, 47, "trp_nights_watch_ranger", 3),
			(set_visitors, 48, "trp_nights_watch_ranger", 3),
			(set_visitors, 49, "trp_nights_watch_ranger", 3),
			(set_visitors, 50, "trp_nights_watch_ranger", 3),
			(set_jump_mission, "mt_wall_tunnel"),
			(jump_to_scene, "scn_wall_tunnel"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(change_screen_map)
		], ".")
	]
	),

	("dragonmont", 0, "You arrive at the Sunken Ruins.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_ruins")
	],
	[
		("enter",
		[],
		"Enter the ruins.",
		[
			(set_jump_mission, "mt_dragonmont_place"),
			(modify_visitors_at_site, "scn_dragonmont"),
			(reset_visitors),
			(set_visitor, 16, "trp_sajius"),
			(set_visitor, 17, "trp_comaelle"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_dragonmont", slot_scene_visited, 1),
			(jump_to_scene, "scn_dragonmont"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("sorrows", 0, "You arrive at the Sorrows.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_ruins")
	],
	[
		("enter",
		[],
		"Enter the ruins.",
		[
			(set_jump_mission, "mt_sorrows_place"),
			(modify_visitors_at_site, "scn_sorrows"),
			(reset_visitors),
			(set_visitor, 16, "trp_stoneman"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_sorrows", slot_scene_visited, 1),
			(jump_to_scene, "scn_sorrows"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("cairn_hall", 0, "You arrive at Cairnhall.",
	"none",
	[
		(set_background_mesh, "mesh_pic_village_p")
	],
	[
		("enter",
		[],
		"Enter the village.",
		[
			(set_jump_mission, "mt_cairn_hall"),
			(modify_visitors_at_site, "scn_cairn_hall"),
			(reset_visitors),
			(set_visitor, 16, "trp_terror_npc_3"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_cairn_hall", slot_scene_visited, 1),
			(jump_to_scene, "scn_cairn_hall"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("oldstones", 0, "You arrive at Oldstones.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_ruins")
	],
	[
		("enter",
		[],
		"Enter the ruins.",
		[
			(set_jump_mission, "mt_oldstones_place"),
			(modify_visitors_at_site, "scn_oldstones"),
			(reset_visitors),
			(set_visitor, 16, "trp_peddler_elbert"),
			(set_visitor, 17, "trp_peddler_polk"),
			(set_visitor, 18, "trp_peddler_randolf"),
			(set_visitor, 19, "trp_peddler_maester"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_oldstones", slot_scene_visited, 1),
			(jump_to_scene, "scn_oldstones"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_1", 0, "King's Landing is extremely populous, but rather unsightly and dirty compared to other cities, especially due to the poorer smallfolks tendency to build shanty settlements outside the city. The harbor itself is very large, and sellswords, thieves and deserters can often be found on the docks.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("choice_1_1",
		[
			(eq, "$g_port_1", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Recruit 5 Gold Cloak Deserters (250 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 250),
				(troop_remove_gold, "trp_player", 250),
				(party_add_members, "p_main_party", "trp_port_gold_cloak", 5),
				(assign, "$g_port_1", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("port_2", 0, "Duskendale lies off the coast of Blackwater Bay. Before the Conquest, it was, along with Maidenpool, the principal port on the eastern side of Westeros, but King's Landing has long since replaced it. South of the town is a rocky headland that shelters the harbor from the storms of the narrow sea and north of it rise chalk cliffs. A road runs beside the shore between the grey-green sea and low limestone hills. Fishing villages dot the road for miles.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_dragonstone")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_3", 0, "The natural harbor close to Rook's Rest is grey cliffs, many of them scorched and blackened, a testimony to the dragonfire that scoured the area when the dragons Sunfyre and Meleys fought in the skies above Rook's Rest during the Dance of the Dragons.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_dragonstone")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_4", 0, "Close to the Whispers lie an old and forgotten smuggler's cove, which nonetheless provides excellent anchorage. The cove lies beneath a jutting rock formation, containing the ancient ruins of a castle, and beneath the cliffs lie a beacon tower that has fallen off the protruding rocks.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_dragonstone")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_5", 0, "Claw Isle is the northernmost of the isles that are scattered around Blackwater Bay. An old valyrian colony, the island is smaller than Dragonstone and Driftmark, and there is no volcanic activity, though vents of steam often erupt from the caves and coves scattered around the island, startling travellers new to the island. The populace consists mostly of smallfolk who make their living fishing the Narrow Sea, though some sell their services as sellswords, many of whom favor the bow.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_dragonstone")
	],
	[
		("choice_1_1",
		[
			(eq, "$g_port_5", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Recruit 3 Claw Isle Archers (200 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(troop_remove_gold, "trp_player", 200),
				(party_add_members, "p_main_party", "trp_port_claw_isle_archer", 3),
				(assign, "$g_port_5", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("port_6", 0, "The volcanic isle of Dragonstone contains many coves and natural harbors, perfect for anchoring galleons and smaller vessels. However, the island is often hit by summer storms raging from across the Narrow Sea, crashing the ships anchored there against the cliffs and rocks of the volcanic mountainside, as happened to the Targaryen fleet during Robert's Rebellion.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_dragonstone")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_7", 0, "The port of Driftmark is the principal harbor for the ships anchoring at the island of Driftmark. During the reign of Lord Corlys Velaryon, the Sea Snake, the many ports of the island became the central shipping point for all commerce on the eastern shore of Westeros, eclipsing even King's Landing for a time.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_dragonstone")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_8", 0, "Sharp Point is where many Andal invaders landed and the chief amongst them was Togarion Bar Emmon, known as Togarion the Terrible, who crowned his brother-in-law as King of Massey's Hook and went to war against the Storm King.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_dragonstone")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_9", 0, "The island of Tarth is said to be very beautiful, with its mountains and waterfalls, its high meadows and shadowed vales. It is called the Sapphire Isle, for the striking blue seas in which it sits, and was once ruled by the Evenstar kings, who held dominion over the seas. The men and women of Tarth tell stories of the True Knight, Ser Galladon of Morne, and chivalry is held in high regard on the island. The knights of Tarth often congregate at the many natural harbors, hoping to find hire as sellswords on some of the many ships who pass by on their way to King's Landing and Gulltown.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("choice_1_1",
		[
			(eq, "$g_port_9", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Recruit 3 Tarth Knights (500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(party_add_members, "p_main_party", "trp_port_tarth_knight", 3),
				(assign, "$g_port_9", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("port_10", 0, "The castle of Griffin's Roost lies surrounded by red stone cliffs on three sides, which descend into the stormy waters of Shipbreaker Bay. The land-facing approach is a long natural ridge called the Griffin's Throat, which descend unto a beach that provides excellent anchorage.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_11", 0, "Greenstone is a small island to the east of the Rainwood. The Estermonts have a long tradition of sailing the seas, and the island was not conquered until Erich Durrandon, known as the Sailmaker, built a fleet to contest their dominion of the waves. The island contains no port, but there are plenty of coves.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_12", 0, "As with the other islands making up the Stepstones, Bloodstone contains many hidden coves and beaches sheltered from the storms that blow across the Narrow Seas.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_13", 0, "As with the other islands making up the Stepstones, Torturer's Deep contains many hidden coves and beaches sheltered from the storms that blow across the Narrow Seas.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_14", 0, "As with the other islands making up the Stepstones, Redstone contains many hidden coves and beaches sheltered from the storms that blow across the Narrow Seas.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_15", 0, "Tyrosh is far larger than the market towns of Westeros, being described by many travellers as boisterous and loud. At the mouth of its harbor lies the Bleeding Tower, where sellswords, thieves, slavers and corsairs congregate.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("choice_1_1",
		[
			(eq, "$g_port_15", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Recruit 5 Corsairs (300 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 300),
				(troop_remove_gold, "trp_player", 300),
				(party_add_members, "p_main_party", "trp_port_tyroshi_corsair", 5),
				(assign, "$g_port_15", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("port_16", 0, "As with the other islands making up the Stepstones, Last Refuge contains many hidden coves and beaches sheltered from the storms that blow across the Narrow Seas.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_17", 0, "The island of the Lovely Crag lies to the west of Lys, and is where many of the girls destined for the pleasure houses of Tyrosh and Myr are shipped out. The locals are more than willing to tell travellers how the island have gotten it's name, though anyone clever enough should be able to figure it out.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_18", 0, "The port of Lys lies in a bay, surrounded by high cliffs where palms gently sway in the breeze. Reckoned the most beautiful city in the world, as well as the one with the most pleasant climate, the city was originally founded by valyrian dragonlords who wished for a retreat from the fires of the Freehold. The dragonlords oft slept with their concubines on the island, which has led to a strong valyrian streak in the native population.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_19", 0, "The island of Wreckstone lies to the west of Lys, and like many islands in the area contain a plethora of caves and coves, excellent for ships to anchor in safely. First, however, they have to brave the many reefs and rocks that form a ring around the island. Many ships do not make it, giving the island its name.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_20", 0, "The island of the Farthest Reef is surrounded by many reefs, giving the island its name, that break up the waves. The shores of the island are quiet, and provide excellent anchorage for ships travelling to or from Slaver's Bay.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_volantis")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_21", 0, "Braavos is served by two main harbors. The Purple Harbor, in the north, is used by locals only, while the Ragman's Harbor in the west is where foreign ships are moored. All ships have to submit to inspection by the Sealord's customs officers at the Chequy Port. Scattered throughout the city are small wharves and landings for the fishermen and ferries. Sellswords are a rarity in Braavos, but axemen from the island of Ibben can sometimes be found selling their services in the taverns.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_braavos")
	],
	[
		("choice_1_1",
		[
			(eq, "$g_port_21", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Recruit 5 Ibben Axemen (300 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 300),
				(troop_remove_gold, "trp_player", 300),
				(party_add_members, "p_main_party", "trp_port_ibben_axeman", 5),
				(assign, "$g_port_21", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("port_22", 0, "The port of Lorath, also known as the Port of Mazes, lies in Lorath Bay, a place of tranquil but cold waters. The lorathi ply the Shivering Sea, trading with their colony of Morosh and the island of Ibben.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_lorath")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_23", 0, "The origins of Myr are murky and shrouded in legend, but none can dispute that the city contain an excellent harbor. In it, travellers can buy everything their hearts desire, even the famed sellsword crossbowmen of Myr, who often sell their services on the docks.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("choice_1_1",
		[
			(eq, "$g_port_23", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 10)
		],
		"Recruit 10 Myrman Crossbowmen (700 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 700),
				(troop_remove_gold, "trp_player", 700),
				(party_add_members, "p_main_party", "trp_port_myrish_crossbowmen", 10),
				(assign, "$g_port_23", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("port_24", 0, "Like all the islands making up the chain of islands known as the Three Sisters, Littlesister contains many coves and natural harbors, perfect for pirates and smugglers looking for a place to hide.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_three_sisters")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_25", 0, "Like all the islands making up the chain of islands known as the Three Sisters, Sweetsister contains many coves and natural harbors, perfect for pirates and smugglers looking for a place to hide.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_three_sisters")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_26", 0, "Like all the islands making up the chain of islands known as the Three Sisters, Longsister contains many coves and natural harbors, perfect for pirates and smugglers looking for a place to hide.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_three_sisters")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_27", 0, "Bear Island lies within the Bay of Ice, north of Deepwood Motte and south of the Frozen Shore. The island contains no man-made ports, but the protruding cliffs and rocks provide excellent anchorage for smaller vessels and longships. Sailors are told to take care though, as the large bears inhabiting the island are no strangers to extending their diet by preying on unwary foreigners.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_28", 0, "Like all the islands that make up the home of the ironborn, Blacktyde contains many natural harbors, coves and inlets, making for excellent anchorage.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ironborn")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_29", 0, "Like all the islands that make up the home of the ironborn, Orkmont contains many natural harbors, coves and inlets, making for excellent anchorage.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ironborn")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_30", 0, "Like all the islands that make up the home of the ironborn, Harlaw contains many natural harbors, coves and inlets, making for excellent anchorage.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ironborn")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_31", 0, "Lordsport provides safe anchor for those who wish to reach the castle of Pyke. The town still bears the mark the army of Robert Baratheon left on it, when his army landed on the island of Pyke years earlier and razed the town to the ground.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ironborn")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_32", 0, "Like all the islands that make up the home of the ironborn, Saltcliffe contains many natural harbors, coves and inlets, making for excellent anchorage.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ironborn")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_33", 0, "Like all the islands that make up the home of the ironborn, Old Wyk contains many natural harbors, coves and inlets, making for excellent anchorage.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ironborn")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_34", 0, "Like all the islands that make up the home of the ironborn, Great Wyk contains many natural harbors, coves and inlets, making for excellent anchorage.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ironborn")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_35", 0, "Like all the islands that make up the home of the ironborn, Nagga's Craddle contains many natural harbors, coves and inlets, making for excellent anchorage.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ironborn")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_36", 0, "The island of Fair Isle used to be the seat of of power of the Farman Kings. The lords of the island has always been the first defense against ironborn looking to raid the Westerlands, and the isle contains many natural harbors and coves where longships aplenty are anchored.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_westerlands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_37", 0, "The Shield Islands where given to their current inhabitans by the greatest of the Gardener kings, Garth the Goldenhand, after he drove the ironborn back into the sea. The islands provide excellent coverage from storms, and the men of the islands are adept at fighting in longships against reavers and pirates.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_reach")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_38", 0, "The port town of Ryamsport is located on the Arbor, in close vicinity to the castle. The harbor is busy, with ships from all over the world plying their trade in the waters around the island, looking to buy the famed Arbor wines.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_reach")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_39", 0, "Gulltown is one of the principal ports of the Seven Kingdoms, and was the first town conquered by the Andal invaders. The lords and smallfolk of the city hold chivalry in high regard, and knights can often be found at the harbor, selling their services.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_vale")
	],
	[
		("choice_1_1",
		[
			(eq, "$g_port_39", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Recruit 5 Gulltown Knights (700 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 700),
				(troop_remove_gold, "trp_player", 700),
				(party_add_members, "p_main_party", "trp_port_gulltown_knight", 5),
				(assign, "$g_port_39", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("port_40", 0, "Old Anchor is located east of Ironoaks, where the river flows into the Narrow Sea. During the Andal invasions, thousands of would-be conquerors landed at what would one day become Old Anchor, giving the location its name.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_vale")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_41", 0, "The Fingers are narrow peninsulas of the northeastern Vale of Arryn which extend out into the Narrow Sea and the Shivering Sea. Gull Point is windswept, treeless, bare and stony, but it is also where the first Andal invaders landed, and there are thousands of beaches and coves that provide excellent coverage from the storms ravaging the Narrow Sea.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_three_sisters")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_42", 0, "The Fingers are narrow peninsulas of the northeastern Vale of Arryn which extend out into the Narrow Sea and the Shivering Sea. Upcliff, an old castle by the sea, is where the reputed sorceress Ursula Upcliff held her husbands as thralls and declared herself bride of the Merling King. The area around Upcliff is perfect for longships seeking a safe place to weather the storms of the sea, and a major route for travellers out of White Harbor.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_three_sisters")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_43", 0, "The port city of White Harbor contains many sights. Seal Rock is a massive stone dominating the approaches to the Outer Harbor. It is crowned with a ringfort of weathered stones of the First Men that stood desolate and abandoned for centuries. The stone looms fifty feet above the waters, grey-green in color and seals often rest on it. The harbor itself is divided into the inner and outer harbors. The outer harbor is larger, but the inner harbor offers better anchorage and shelter by the city wall on one side and the looming mass of the Wolf's Den on another.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_44", 0, "The wolfswood is a great forest that extends far and wide. In ancient days, the ironborn would often reave along the coast, despite the rocky cliffs wrecking many ships. The men of the Wolfswood learned to arm themselves, and in time threw the invaders back into the sea. The tradition still exists, and many younger sons sell their sword to the highest bidder, that they may keep their blade sharp and bloody in the absence of the men they derisively call 'squids'.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("choice_1_1",
		[
			(eq, "$g_port_44", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Recruit 5 Wolfswood Champions (300 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 300),
				(troop_remove_gold, "trp_player", 300),
				(party_add_members, "p_main_party", "trp_port_wolfswood_champion", 5),
				(assign, "$g_port_44", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("port_45", 0, "The Stony Shore is an area along the western edge of the North. It is sparsely populated with only a few fishing villages, but the coastline is dotted with coves and natural harbors. The ironborn have often made use of these anchorages to land and raid the villages.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_46", 0, "Cape Kraken is an area along the western edge of the North. It is sparsely populated with only a few fishing villages, but the coastline is dotted with coves and natural harbors. The ironborn have often made use of these anchorages to land and raid the villages, carrying off and raping the women. This had lead to some maesters speculating that the people of Cape Kraken are closer kin to the ironborn than the northmen.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_47", 0, "The coastline close by Seagard is known for its tranquil seas and white beaches, making it a perfect place to land longships. The ironborn have taken great advantage of this for centuries, landing their forces and raiding the Riverlands. Seagard itself was built to warn the surrounding area of approaching invaders, and contain a large keep called the Booming Tower, where a great bronze bell is rung to warn the smallfolk when reavers are sighted.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_48", 0, "Lannisport is the third largest port in the Seven Kingdoms. Located where the Ocean Road and the River Road meet, the city is renowned for its goldsmiths and jewelry, and ships from all over the world call at the golden city of the Westerlands to exchange their goods for gold.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_westerlands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_49", 0, "The Sunset Harbor is a small harbor placed at the mouth of the Mander, the large river that runs through the Reach. First built by Garland the Bridegroom, it was supposed to guard the Mander against ironborn invaders, but turned out to be inadequate for that purpose, and was soon replaced by the Shield Islands.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_reach")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_50", 0, "Oldtown is the grandest city in the Seven Kingdoms, though the inhabitans of King's Landing contest this fact. The town is by far the oldest, having been built by the First Men. Trading ships from all over Westeros, as well as the Summer Islands, the Free Cities and other places across the Narrow Sea, constantly crowd into its harbors, looking to share in the bounty of the Reach.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_reach")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_51", 0, "While no more than a town by the standards of the Free Cities, Sunspear is the closest the dornish have to a city, and the principal port of the region. Ships from Lys, Tyrosh, Volantis and the Summer Isles ply their trade here, buying lemons, spices, pottery and peppers in the many stalls spread across the docks.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_dorne")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_52", 0, "The city of Volantis sits on a very deep harbor. The volantenes claim that the hundred isles of Braavos could be dropped into the harbor and disappear. Volantis spreads across the mouth of the Rhoyne and across the hills and marshes on both sides of the river, and it is the principal port in the south of Essos. Thousands of ships pass through each year, and many sellswords, whores, thieves and sorcerers sell their services at the docks.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_volantis")
	],
	[
		("choice_1_1",
		[
			(eq, "$g_port_52", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Recruit 5 Elyrian Javelinmen (250 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 250),
				(troop_remove_gold, "trp_player", 250),
				(party_add_members, "p_main_party", "trp_port_elyrian_javelinmen", 5),
				(assign, "$g_port_52", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("port_53", 0, "The Disputed Lands contain many coves, natural harbors and long tranquil beaches, perfect for all kinds of ships looking to anchor in order to trade, invade, or simply rest.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_54", 0, "The Sea of Myrth is a large sea that is situated along the western coast of Essos. To the north lies the Flatlands, to the south the Disputed Lands and to the west, the Narrow Sea. The area is well-known for its white beaches and blue waters, perfect for anchorage.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_55", 0, "The port of Pentos lies on the Bay of Pentos off the Narrow Sea, with the Flatlands plains and Velvet Hills to the east. Spicelords dominate the city, and ships ply the waters around the city fishing for mackerel and tuna. Due to the easy access across the Flatlands, dothraki warrior can often be found in the city, selling their swords to the highest bidder.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_pentos")
	],
	[
		("choice_1_1",
		[
			(eq, "$g_port_55", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 20)
		],
		"Recruit 20 Dothraki Sellswords (1500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1500),
				(troop_remove_gold, "trp_player", 1500),
				(party_add_members, "p_main_party", "trp_port_dothraki_sellswords", 20),
				(assign, "$g_port_55", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("port_56", 0, "Braavos sprawls across a hundred islands in a vast lagoon, and the nearby mainland is mostly marshland, that nonetheless provide an opportunity for ships to transport travellers to and from the city, while making it impossible for an army to lay siege to the city.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_braavos")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_57", 0, "The Shivering Sea is a frigid sea that begins beyond the Wall and extends east along the northern coast of Essos. The coastline is filled with jutting cliffs and protruding rocks, making it difficult to land and make anchorage, though there are also many excellent natural harbors.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_lorath")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_58", 0, "The Disputed Lands contain many coves, natural harbors and long tranquil beaches, perfect for all kinds of ships looking to anchor in order to trade, invade, or simply rest.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_59", 0, "The Sea of Myrth is a large sea that is situated along the western coast of Essos. To the north lies the Flatlands, to the south the Disputed Lands and to the west, the Narrow Sea. The area is well-known for its white beaches and blue waters, perfect for anchorage.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_60", 0, "Lorassyon is located on the opposite side of the largest of three islands surrounded by storm seas. The island is insignificant, except for the many fishing and whaling vessels that call there from time to time.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_lorath")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_61", 0, "Along the western coast of the Seven Kingdoms lie the Sunset Sea. Villages dot the coastline, many of them having sprouted up around coves and natural harbors that provide shelter from storms.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_westerlands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_62", 0, "The Weeping Town is no true city nor much of a town, but it is the closest the Stormlands have to a port town. Ships seldom land there, but some few fishing vessels can be found, mostly docking to sell their catch of cod and shrimp. The town lies close to the Rainwood, and sellswords from the deep forest can sometimes be found at the harbor selling their services.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("choice_1_1",
		[
			(eq, "$g_port_62", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 4)
		],
		"Recruit 4 Rainwood Axemen (100 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 100),
				(troop_remove_gold, "trp_player", 100),
				(party_add_members, "p_main_party", "trp_port_rainwood_axemen", 4),
				(assign, "$g_port_62", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("port_63", 0, "The Kingswood is a large forest that lies across the Blackwater Rush from King's Landing, and although a few smallfolk live in the forest, it's mostly used as the kings private hunting ground. The shores are filled with steep cliffs and ships often wreck themselves when they try to land. A few natural harbors do exist however, and the famed archers of the Kingswood can sometimes be hired at these locations.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("choice_1_1",
		[
			(eq, "$g_port_63", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 4)
		],
		"Recruit 4 Kingswood Archers (150 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 150),
				(troop_remove_gold, "trp_player", 150),
				(party_add_members, "p_main_party", "trp_port_kingswood_archers", 4),
				(assign, "$g_port_63", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("port_64", 0, "Saltpans has never been an important trading port but ships do call there from time to time, and the salt shipped out is widely sought after by merchants from Essos.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_65", 0, "Maidenpool was once one of the principal ports on the eastern side of Westeros, only surpassed by Duskendale. However, it has been steadily declining through the years, with King's Landing and Gulltown having long ago eclipsed the port in importance.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_66", 0, "The port of Aquos Dhaen lies in the Borderlands, the region fought over by Volantis and Lys for hundreds of years. Never one of the self-governed cities of Essos, Aquos Dhaen was ruled by a governor appointed by the Freehold of Valyria before the Doom.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("port_67", 0, "As with the other islands making up the Stepstones, Grey Gallows contains many hidden coves and beaches sheltered from the storms that blow across the Narrow Seas.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_disputed_lands")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("nunns_deep", 0, "You arrive at Nunn's Deep.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_cave")
	],
	[
		("enter",
		[],
		"Enter the mine.",
		[
			(set_jump_mission, "mt_nunns_deep_place"),
			(modify_visitors_at_site, "scn_nunns_deep"),
			(reset_visitors),
			(set_visitor, 16, "trp_guardsman_holger"),
			(set_visitor, 17, "trp_tom"),
			(set_visitor, 18, "trp_kyle"),
			(set_visitor, 20, "trp_guardsman_alyn"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_nunns_deep", slot_scene_visited, 1),
			(jump_to_scene, "scn_nunns_deep"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("summerhall", 0, "You arrive at the Ruins of Summerhall.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_ruins")
	],
	[
		("enter",
		[],
		"Enter the ruins.",
		[
			(set_jump_mission, "mt_summerhall_place"),
			(modify_visitors_at_site, "scn_summerhall"),
			(reset_visitors),
			(set_visitor, 16, "trp_old_crone"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_summerhall", slot_scene_visited, 1),
			(jump_to_scene, "scn_summerhall"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("saltpans_isles", 0, "You arrive at the Quiet Isle.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_septry")
	],
	[
		("enter",
		[],
		"Take a boat to the Quiet Isle.",
		[
			(set_jump_mission, "mt_saltpans_isles_place"),
			(modify_visitors_at_site, "scn_saltpans_isles"),
			(reset_visitors),
			(set_visitor, 16, "trp_saltpans_elder_brother"),
			(set_visitor, 17, "trp_saltpans_brother_1"),
			(set_visitor, 18, "trp_saltpans_brother_2"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_saltpans_isles", slot_scene_visited, 1),
			(jump_to_scene, "scn_saltpans_isles"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("isle_of_faces", 0, "You arrive at the Isle of Faces.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_septry")
	],
	[
		("enter",
		[],
		"Visit the Green Men.",
		[
			(set_jump_mission, "mt_isle_of_faces_place"),
			(modify_visitors_at_site, "scn_isle_of_faces"),
			(reset_visitors),
			(set_visitor, 16, "trp_green_man_1"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_isle_of_faces", slot_scene_visited, 1),
			(jump_to_scene, "scn_isle_of_faces"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("rodgars_hut", 0, "You arrive at Rodgars Hut.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_cave")
	],
	[
		("enter",
		[],
		"Visit Rodgar.",
		[
			(set_jump_mission, "mt_rodgar_place"),
			(modify_visitors_at_site, "scn_rodgars_hut"),
			(reset_visitors),
			(set_visitor, 16, "trp_beowulf_npc_2"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_rodgars_hut", slot_scene_visited, 1),
			(jump_to_scene, "scn_rodgars_hut"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("naggas_hill", 0, "You arrive at Nagga's Hill.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_septry")
	],
	[
		("enter",
		[],
		"Visit Nagga's bones.",
		[
			(set_jump_mission, "mt_naggas_hill_place"),
			(modify_visitors_at_site, "scn_naggas_hill"),
			(reset_visitors),
			(set_visitor, 16, "trp_jor_the_keeper"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_naggas_hill", slot_scene_visited, 1),
			(jump_to_scene, "scn_naggas_hill"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("tower_of_joy", 0, "You arrive at the Tower of Joy.",
	"none",
	[
		(set_background_mesh, "mesh_pic_village_s")
	],
	[
		("enter",
		[],
		"Visit the tower.",
		[
			(set_jump_mission, "mt_tower_of_joy_place"),
			(modify_visitors_at_site, "scn_tower_of_joy"),
			(reset_visitors),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_tower_of_joy", slot_scene_visited, 1),
			(jump_to_scene, "scn_tower_of_joy"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("bloodstone", 0, "You arrive at Bloodstone, the former stronghold of the long forgotten Kingdom of the Stepstones and the Narrow Sea.",
	"none",
	[
		(set_background_mesh, "mesh_pic_castledes")
	],
	[
		("enter",
		[],
		"Enter Bloodstone.",
		[
			(set_jump_mission, "mt_bloodstone_place"),
			(modify_visitors_at_site, "scn_bloodstone"),
			(reset_visitors),
			(set_visitor, 16, "trp_stepstone_npc_5"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_bloodstone", slot_scene_visited, 1),
			(jump_to_scene, "scn_bloodstone"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("harrentown", 0, "You arrive at the remains of Harrentown.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_ruins")
	],
	[
		("enter",
		[],
		"Enter the remains.",
		[
			(set_jump_mission, "mt_harrentown_place"),
			(modify_visitors_at_site, "scn_harrentown"),
			(reset_visitors),
			(set_visitor, 16, "trp_lommy"),
			(set_visitor, 17, "trp_arya"),
			(set_visitor, 18, "trp_hot_pie"),
			(set_visitor, 19, "trp_gendry"),
			(set_visitor, 20, "trp_cutjack"),
			(set_visitor, 21, "trp_koss"),
			(set_visitor, 22, "trp_kurz"),
			(set_visitor, 23, "trp_rorge"),
			(set_visitor, 24, "trp_biter"),
			(set_visitor, 25, "trp_jaqen"),
			(set_visitor, 26, "trp_yoren"),
			(set_visitor, 27, "trp_reysen"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_harrentown", slot_scene_visited, 1),
			(jump_to_scene, "scn_harrentown"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("illyrios_manse", 0, "You arrive at the manse of Illyrio Mopatis.",
	"none",
	[
		(set_background_mesh, "mesh_pic_village_s")
	],
	[
		("enter",
		[],
		"Enter the manse.",
		[
			(set_jump_mission, "mt_illyrios_manse_place"),
			(modify_visitors_at_site, "scn_illyrios_manse"),
			(reset_visitors),
			(set_visitor, 16, "trp_stepstone_npc_0"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_illyrios_manse", slot_scene_visited, 1),
			(jump_to_scene, "scn_illyrios_manse"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("water_gardens", 0, "You arrive at the Water Gardens.",
	"none",
	[
		(set_background_mesh, "mesh_pic_village_s")
	],
	[
		("enter",
		[],
		"Enter the gardens.",
		[
			(set_jump_mission, "mt_water_gardens"),
			(modify_visitors_at_site, "scn_water_gardens"),
			(reset_visitors),
			(set_visitor, 16, "trp_varys_npc_8"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_water_gardens", slot_scene_visited, 1),
			(jump_to_scene, "scn_water_gardens"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("black_cells_1", 0, "The dungeon of the Red Keep has four levels. On the upper level are cells with high narrow windows where common criminals are confined together. The second level has smaller, personal cells without windows for highborn captives. Torches in the halls cast light through the bars. The third level cells, the 'black cells', are smaller still, and have doors of wood so that no light enters them. These are reserved for the most vile and dangerous prisoners. The lowest level is used for torture. It is supposedly safer to go through the fourth level of the dungeons in darkness, because there are things one would not wish to see.",
	"none",
	[],
	[
		("enter",
		[],
		"Enter the cells.",
		[
			(set_jump_mission, "mt_black_cells_1"),
			(modify_visitors_at_site, "scn_black_cells_1"),
			(reset_visitors),
			(set_visitor, 16, "trp_varys_npc_2"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_black_cells_1", slot_scene_visited, 1),
			(jump_to_scene, "scn_black_cells_1"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("black_cells_2", 0, "The dungeon of the Red Keep has four levels. On the upper level are cells with high narrow windows where common criminals are confined together. The second level has smaller, personal cells without windows for highborn captives. Torches in the halls cast light through the bars. The third level cells, the 'black cells', are smaller still, and have doors of wood so that no light enters them. These are reserved for the most vile and dangerous prisoners. The lowest level is used for torture. It is supposedly safer to go through the fourth level of the dungeons in darkness, because there are things one would not wish to see.",
	"none",
	[],
	[
		("enter",
		[],
		"Enter the cells.",
		[
			(set_jump_mission, "mt_black_cells_2"),
			(modify_visitors_at_site, "scn_black_cells_2"),
			(reset_visitors),
			(set_visitor, 16, "trp_varys_npc_6"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_black_cells_2", slot_scene_visited, 1),
			(jump_to_scene, "scn_black_cells_2"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("thirsty_goat", 0, "The Thirsty Goat is an unsavory winesink, located in the outskirts of Sunspear in the area known as the Shadow City. The place is dark, damp and smells like rotten meat, vinegar and vomit, and is almost completely deserted.",
	"none",
	[],
	[
		("enter",
		[],
		"Enter the winesink.",
		[
			(set_jump_mission, "mt_thirsty_goat"),
			(modify_visitors_at_site, "scn_thirsty_goat"),
			(reset_visitors),
			(set_visitor, 16, "trp_varys_npc_8"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_thirsty_goat", slot_scene_visited, 1),
			(jump_to_scene, "scn_thirsty_goat"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("special_room_renly_quest_pitch", 0, "The Pitch Market in Gulltown is named for the many merchants peddling the substance they derive from the trees scattered across the Vale. While a plethora of other merchants also sell their items in the Pitch Market, it has always been known as the main market for the substance, going as far back as before the Andals invaded. Pitch is used for caulking ships, and the royal fleet have had a long standing contract with the merchants of Gulltown, providing pitch at a reduced rate, in return for protection when the merchant caravans sail through the Stepstones.",
	"none",
	[],
	[
		("enter",
		[
			(store_free_inventory_capacity, ":free_inventory_capacity"),
			(ge, ":free_inventory_capacity", 1)
		],
		"Buy 1 Barrel of Pitch (400 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 400),
				(troop_remove_gold, "trp_player", 400),
				(troop_add_item, "trp_player", "itm_barrel_of_pitch", 0),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_special_room_renly_quest_pitch")
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("special_room_painted_table", 0, "The Chamber of the Painted Table, located on the top floor of the Stone Drum in Dragonstone, is a large room, with old pillars of valyrian masonry, made before the Doom. The chamber holds a large table, carved and painted in the form of a detailed map of Westeros. Here, Aegon the Conqueror planned his invasion of Westeros along with his sisters, Visenya and Rhaenys.",
	"none",
	[],
	[
		("enter",
		[],
		"Enter the chamber.",
		[
			(set_jump_mission, "mt_special_room_painted_table"),
			(modify_visitors_at_site, "scn_special_room_painted_table"),
			(reset_visitors),
			(set_visitor, 16, "trp_ninestars_castellan"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_special_room_painted_table", slot_scene_visited, 1),
			(jump_to_scene, "scn_special_room_painted_table"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("special_room_coppersmiths_wynd", 0, "Coppersmith's Wynd is a street going through one of the moderately wealthy parts of King's Landing. The street originally housed the Guild of Coppersmiths, but they have long ago disappeared and visitors can now find a plethora of bookshops, spice dealers, scribes, goldsmiths and minor noble houses on the street.",
	"none",
	[],
	[
		("enter1",
		[
			(check_quest_active, "qst_citadel_quest_1")
		],
		"Visit Malkos Bookstore.",
		[
			(set_jump_mission, "mt_special_room_coppersmiths_wynd"),
			(modify_visitors_at_site, "scn_special_room_coppersmiths_wynd"),
			(reset_visitors),
			(set_visitor, 16, "trp_citadel_malko"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_special_room_coppersmiths_wynd", slot_scene_visited, 1),
			(jump_to_scene, "scn_special_room_coppersmiths_wynd"),
			(change_screen_mission)
		], "."),

		("enter2",
		[
			(check_quest_active, "qst_citadel_quest_5")
		],
		"Visit Malkos Bookstore.",
		[
			(set_jump_mission, "mt_special_room_coppersmiths_wynd"),
			(modify_visitors_at_site, "scn_special_room_coppersmiths_wynd"),
			(reset_visitors),
			(set_visitor, 16, "trp_citadel_malko_2"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_special_room_coppersmiths_wynd", slot_scene_visited, 1),
			(jump_to_scene, "scn_special_room_coppersmiths_wynd"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("special_room_iron_throne_room", 0, "The Great Hall is the throne room of the king of the Seven Kingdoms. The Iron Throne sits on a raised iron dais with high and narrow steps. A long carpet stretches from the throne to the Hall's great oak-and-bronze doors. The Hall itself is cavernous, and can sit a thousand people. It is oriented north to south, with high, narrow windows on the eastern and western walls. Skulls of the Targaryen dragons once adorned the walls, but Robert Baratheon had them taken down at the beginning of his reign.",
	"none",
	[],
	[
		("enter",
		[],
		"Enter the hall.",
		[
			(set_jump_mission, "mt_special_room_iron_throne_room"),
			(modify_visitors_at_site, "scn_special_room_iron_throne_room"),
			(reset_visitors),
			(set_visitor, 16, "trp_ninestars_castellan"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_special_room_iron_throne_room", slot_scene_visited, 1),
			(jump_to_scene, "scn_special_room_iron_throne_room"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("special_room_citadel", 0, "The Citadel is where the maesters convene, study, and train new members, and it is also the residence of the archmaesters. The Seneschal's Court is a great hall with stone floors and high, arched, windows. It's where the maesters convene with laymen, where acolytes gather and where the Gatekeeper controls access to the Seneschal, who is tasked with the government of the Citadel. The Archives, another section of the Citadel, contains the greatest collection of books, scrolls and ledgers in the known world, and is where many maesters spend decades of their life writing and compiling new works of knowledge.",
	"none",
	[],
	[
		("enter_citadel_1",
		[
			(eq, "$g_citadel_available", 1)
		],
		"Visit the Seneschal's Court.",
		[
			(set_jump_mission, "mt_special_room_citadel"),
			(modify_visitors_at_site, "scn_special_room_citadel"),
			(reset_visitors),
			(set_visitor, 16, "trp_citadel_harodon"),
			(set_visitor, 17, "trp_norren"),
			(set_visitor, 19, "trp_theobald"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_special_room_citadel", slot_scene_visited, 1),
			(jump_to_scene, "scn_special_room_citadel"),
			(change_screen_mission)
		], "."),

		("enter_citadel_2",
		[],
		"Visit the Archives.",
		[
			(set_jump_mission, "mt_special_room_archives"),
			(modify_visitors_at_site, "scn_special_room_archives"),
			(reset_visitors),
			(set_visitor, 16, "trp_citadel_credits"),
			(set_visitor, 17, "trp_citadel_castos"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_special_room_archives", slot_scene_visited, 1),
			(jump_to_scene, "scn_special_room_archives"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("ninestars_1", 0, "You arrive at Ninestars, the seat of House Templeton. You spot craftsmen setting up the tourney field, farmers bringing in supplies for the lords and ladies, young knights and squires practicing in the fields, riding at rings and bludgeoning each other with blunt swords and maces. Outside the walls, merchants have set up pavilions and tents, selling everything from apple pies and large chunks of cheese, to finely crafted tourney helmets, swords and large jugs of ale.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("enter",
		[
			(check_quest_active, "qst_starting_quest_1_3")
		],
		"Enter the castle courtyard.",
		[
			(set_jump_mission, "mt_ninestars_1"),
			(modify_visitors_at_site, "scn_ninestars_1"),
			(reset_visitors),
			(set_visitor, 16, "trp_ninestars_castellan"),
			(set_visitor, 17, "trp_addam_grafton"),
			(set_visitor, 18, "trp_jeffory_gaunt"),
			(set_visitor, 19, "trp_josmyn_gaunt"),
			(set_visitor, 20, "trp_manfred_rollingford"),
			(set_visitor, 21, "trp_omer_chyttering"),
			(set_visitor, 22, "trp_ninestars_guardsman_1"),
			(set_visitor, 23, "trp_ninestars_guardsman_2"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_ninestars_1", slot_scene_visited, 1),
			(jump_to_scene, "scn_ninestars_1"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("ninestars_2", mnf_disable_all_keys|menu_text_color(0xff000000), "Leaving the castle, you notice a great spectacle down by one of the pavilions. A man-at-arms, a young squire and a knight, with a surcoat showing seven black stripes and nine stars, are beating a young man, while a young woman looks on, a horrified look on her face. Moving nearer, she runs to your side, asking for your help. It seems the knight fondled her, and the young man, her betrothed, protested. That is when the knight hit him in the face with a steel gauntlet, and the man-at-arms started kicking him. Suddenly, the squire turns around and yank the woman away, taking hold of her hand, and breaking her wrist. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Hit the squire and attack the knight and his man-at-arms!",
		[
			(jump_to_menu, "mnu_ninestars_3")
		], "."),

		("choice_10_2",
		[],
		"Ignore the incident.",
		[
			(jump_to_menu, "mnu_ninestars_sights")
		], ".")
	]
	),

	("ninestars_sights", mnf_disable_all_keys|menu_text_color(0xff000000), "As you head towards the tents and pavilions of the merchants, you notice the smell of roasted boar, onions in gravy, pecan nuts in honey, carrots boiled with beans and thyme and all other sorts of delicious treats. The armorers, mummers and jugglers are not out yet, but you decide to treat yourself to a little something before continuing on your way. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Order a piece of roasted boar.",
		[
			(display_message, "@Delicious! The cook has seasoned it with pepper!"),
			(call_script, "script_end_quest", "qst_starting_quest_1_4"),
			(disable_party, "p_ninestars_1"),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Order a cake made of pecan nuts in honey.",
		[
			(display_message, "@Delicious! This cook knows what he's doing!"),
			(call_script, "script_end_quest", "qst_starting_quest_1_4"),
			(disable_party, "p_ninestars_1"),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Order a a jumble of carrots, beans and thyme.",
		[
			(display_message, "@Delicious! The cook has seasoned it with pepper!"),
			(call_script, "script_end_quest", "qst_starting_quest_1_4"),
			(disable_party, "p_ninestars_1"),
			(change_screen_return)
		], "."),

		("choice_10_4",
		[],
		"Order a thick, spicy, sausage.",
		[
			(display_message, "@Delicious! The cook has seasoned it with pepper!"),
			(call_script, "script_end_quest", "qst_starting_quest_1_4"),
			(disable_party, "p_ninestars_1"),
			(change_screen_return)
		], ".")
	]
	),

	("ninestars_trial_woods_failed", mnf_disable_all_keys|menu_text_color(0xff000000), "Ser Emrick and Ser Arreck smelled strongly of wine and ale, and must have been more than a little drunk. When you fell to the ground, they seem to have taken you for dead, as you've just woken up in the bushes beside the road. With a head that's like to split, you make your way down the road, only to find yourself close to Ninestars! You must have gone the wrong way!",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("bloodstone_haunt_failed", mnf_disable_all_keys|menu_text_color(0xff000000), "The pirates have knocked you out, but they appear to be quite drunk, and simply dump you into the ocean. You quickly regain consciousness and stagger unto dry land, just in time! As you turn around, you see the large fin of a great brown shark turn around and head back out towards deeper waters.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("ninestars_trial_woods_success", mnf_disable_all_keys|menu_text_color(0xff000000), "You hide the bodies of Ser Emrick and Ser Arreck in the woods, hoping that they weren't followed by anyone from the castle, but not before looting their bodies. Then you turn back towards Ninestars, to mask your tracks in case men are sent after you.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(troop_add_gold, "trp_player", 300),
			(troop_add_item, "trp_player", "itm_medium_tier_sword_2", 0),
			(troop_add_item, "trp_player", "itm_medium_tier_sword_2", 0),
			(troop_raise_attribute, "trp_player", 0, 1),
			(display_message, "@You've gained 1 strength."),
			(change_screen_return)
		], ".")
	]
	),

	("bloodstone_haunt_success", mnf_disable_all_keys|menu_text_color(0xff000000), "The pirates lie dead at your feet. As you loot their camp, you find nothing of interest, except for a few coins and an old sword.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(setup_quest_text, "qst_stepstone_quest5"),
			(str_store_string, 2, "@Perhaps someone in Tyrosh will reward you for dispatching the pirates."),
			(call_script, "script_start_quest", "qst_stepstone_quest5", "$g_talk_troop"),
			(troop_add_gold, "trp_player", 300),
			(troop_add_item, "trp_player", "itm_medium_tier_sword_2", 1),
			(troop_raise_attribute, "trp_player", 0, 1),
			(display_message, "@You've gained 1 strength."),
			(add_troop_to_site, "trp_stepstone_npc_6", "scn_town_46_castle", 1),
			(disable_party, "p_bloodstone_haunt"),
			(change_screen_return)
		], ".")
	]
	),

	("ninestars_3", mnf_disable_all_keys|menu_text_color(0xff000000), "As you start brawling with the men, guardsmen from the castle come running over, to break up the fight. Before they arrive, you manage to take a swing at the knight, and hit him right on the nose. Blood spurts forth, but in the meantime, the man-at-arms has managed to get his club ready, and hits you in the head, causing you to fall unconscious.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(jump_to_menu, "mnu_ninestars_4")
		], ".")
	]
	),

	("ninestars_4", 0, "As you wake up, you notice a dim light, and a moldy smell. Opening your eyes, you realise you're in some sort of dungeon. It feels like your head is being invaded by an army of aurochs, and your body is blue and yellow, covered in bruises. As you get to your feet, you hear voices outside the locked door and, trying to stand upright, you wait for the man outside to enter...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("enter",
		[],
		"Continue.",
		[
			(set_jump_mission, "mt_ninestars_prison"),
			(modify_visitors_at_site, "scn_ninestars_prison"),
			(reset_visitors),
			(set_visitor, 16, "trp_ninestars_castellan_prison"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_ninestars_prison", slot_scene_visited, 1),
			(jump_to_scene, "scn_ninestars_prison"),
			(change_screen_mission)
		], ".")
	]
	),

	("ninestars_5", mnf_disable_all_keys|menu_text_color(0xff000000), "As soon as Ser Alyn leaves the cell, you fall into a dreamless sleep. You're woken by the call of a rooster, and soon enough, the guards come to fetch you for the trial.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(jump_to_menu, "mnu_ninestars_6")
		], ".")
	]
	),

	("ninestars_6", mnf_disable_all_keys|menu_text_color(0xff000000), "As the guards escort you to the great hall of Ninestars, you notice a mass of noble lords and ladies. The knights attending the tourney, their wives and companions, their squires and attendants, all have turned out to watch the trial. You can hear whispers, snickers and quiet conversation, but have no way of knowing whether they're directed at you, or at Ser Raymun who has already arrived, wearing a doublet of yellow and black, and sporting a red, swollen, nose. As you make your way towards the dais where the three judges are seated, you see Ser Alyn smiling at you, but the two other judges scowl as if a nasty smell has followed you into the room. Ser Emrick and Ser Arreck Templeton, twins by the look of them, both have the look of warriors, broad shoulders, thick necks and flat bellies.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(jump_to_menu, "mnu_ninestars_7")
		], ".")
	]
	),

	("ninestars_7", mnf_disable_all_keys|menu_text_color(0xff000000), "As the trial begins, the judges ask if you have anything to say. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Demand a trial by combat!",
		[
			(jump_to_menu, "mnu_ninestars_11")
		], "."),

		("choice_10_2",
		[],
		"Stay silent.",
		[
			(jump_to_menu, "mnu_ninestars_8")
		], ".")
	]
	),

	("ninestars_8", mnf_disable_all_keys|menu_text_color(0xff000000), "As Ser Raymun lays his case before the judges, he starts to smirk. As he tells his tale of how you attacked him with no provocation, his eyes meet yours, and his smile grows wider. His tale contains a bit of truth, and with the two judges being his older brothers, you chances seem slim. Soon, the judges retreat to discuss the evidence laid before them, and all you can do is wait.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(jump_to_menu, "mnu_ninestars_9")
		], ".")
	]
	),

	("ninestars_9", mnf_disable_all_keys|menu_text_color(0xff000000), "As the judges return, you wait with baited breath. Ser Alyn, as the most senior of the judges, rises and pronounces the sentence. You won't lose a hand, he declares, but you'll receive fifty lashes for striking a relative of the local liege. The sentence is to be carried out immediatly, and the guards quickly surround you and drag you to the castle courtyard, where a big farmer stands ready with a whip. As the first lash strikes your back, you decide not to make a sound, but once the fifth strikes you, you forget all about your decision and the rest of the lashes fall to the sound of your screams.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(jump_to_menu, "mnu_ninestars_10")
		], ".")
	]
	),

	("ninestars_10", mnf_disable_all_keys|menu_text_color(0xff000000), "Once all the lashes have fallen, the local maester rushes to your side, taking you to his tower and giving you milk of the poppy. You quickly lose conscience, and when you wake up, hours have gone by. The maester tells you he's done all he can, and that you'll probably live, but that you lost a lot of blood and will likely feel the effect of the lashes for the rest of your life.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(troop_raise_attribute, "trp_player", 0, -2),
			(display_message, "@You've lost 2 strength.", 0x00ff0000),
			(troop_raise_attribute, "trp_player", 1, -1),
			(display_message, "@You've lost 1 agility.", 0x00ff0000),
			(call_script, "script_end_quest", "qst_starting_quest_1_5"),
			(disable_party, "p_ninestars_1"),
			(change_screen_return)
		], ".")
	]
	),

	("ninestars_10_1", mnf_disable_all_keys|menu_text_color(0xff000000), "Once all the lashes have fallen, the local maester rushes to your side, taking you to his tower and giving you milk of the poppy. You quickly lose conscience, and when you wake up, hours have gone by. The maester tells you he's done all he can, and that you'll probably live, but that you lost a lot of blood and will likely feel the effect of the lashes for the rest of your life. He also informs you that you've been banned from the castle, and is to leave as soon as you can walk. As the victor of the fight, Ser Raymun would usually be the new owner of your arms and armor, but as you loaned it from Ser Alyn, he'll receive nothing. The equipment was damaged and dented during the fight though, and Ser Alyn has taken some coin out of your belongings to pay for the repairs.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(troop_raise_attribute, "trp_player", 0, -2),
			(display_message, "@You've lost 2 strength.", 0x00ff0000),
			(troop_raise_attribute, "trp_player", 1, -1),
			(display_message, "@You've lost 1 agility.", 0x00ff0000),
			(troop_remove_gold, "trp_player", 250),
			(change_screen_return)
		], ".")
	]
	),

	("ninestars_11", mnf_disable_all_keys|menu_text_color(0xff000000), "The hall immediatly erupts into chaos, with knights and squires shouting, ladies gasping, servants clapping, Ser Raymun and his two brothers seething and Ser Alyn favoring you with a big grin. The guards look confused, unsure of what to do, until Ser Alyn calls for quiet. He declares a request for trial by combat within your rights, and that the gods will surely look upon the righteous with favor. When Ser Raymun asks if you will still lose a hand, when he defeats you and if decides to accept your yield, Ser Alyn decrees that the loser will receives fifty lashes. When the guards gather around you to escort you back to your cell, Ser Alyn tells them to stop, and instead bring you to his chambers.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(jump_to_menu, "mnu_ninestars_12")
		], ".")
	]
	),

	("ninestars_12", 0, "As the guards escort you to the castellans chambers, you notice some knights nodding their approval of your actions. It would seem Ser Raymun is not well liked.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("enter",
		[],
		"Continue.",
		[
			(set_jump_mission, "mt_ninestars_chambers"),
			(modify_visitors_at_site, "scn_ninestars_chambers"),
			(reset_visitors),
			(set_visitor, 16, "trp_ninestars_castellan_chambers"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_ninestars_chambers", slot_scene_visited, 1),
			(jump_to_scene, "scn_ninestars_chambers"),
			(change_screen_mission)
		], ".")
	]
	),

	("ninestars_13", mnf_disable_all_keys|menu_text_color(0xff000000), "As you lie down to sleep, you ponder how to defeat Ser Raymun. Soon, however, sleep overwhelms you, and suddenly dawn has arrived. Once again, the rooster wakens you, and Ser Alyn arrives with a servant carrying a plate with two sausages, three fried ducks eggs, a piece of new bread, fresh from the oven and a large piece of blood pudding. When you finish, the servants presents you with the armor provided by Ser Alyn, and helps you don it. He explains that Ser Raymun has asked for the trial to be fought on horseback, both of you starting with lances, and fighting on foot should either of you be struck from the saddle. Too soon, the servant tells you that the time has come, and you both descend the stairs of the keep, and begin walking towards the tourney ground.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(jump_to_menu, "mnu_ninestars_14")
		], ".")
	]
	),

	("ninestars_14", mnf_disable_all_keys|menu_text_color(0xff000000), "As you reach the tourney ground, smallfolk surrounds you. Grizzled old farmers shake your hand, and young peasant girls kiss your cheek. Young men pat your back, and a septon pushes through the crowd to bless you. You climb over the fence separating the tourney grounds and the surrounding fields, and mount your stallion. On the opposite end of the field, Ser Raymun is mounted on his own horse, holding a lance.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(jump_to_menu, "mnu_ninestars_15")
		], ".")
	]
	),

	("ninestars_trial_failed", mnf_disable_all_keys|menu_text_color(0xff000000), "As you regain your senses, you can see Ser Raymun standing over you. You notice his lips moving, but can't make out the words. He leans forward, and shouting into your face, asks if you yield. You manage to get a 'yes' through your bloody teeth, and Ser Raymun smirks at you, obviously pleased with himself. Rolling unto your side, you see the crowds sulking, obviously displeased with the result, and your performance. Some of the smallfolk have already started making their way away from the grounds, and a pair of noble ladies are giggling and pointing at you.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(jump_to_menu, "mnu_ninestars_trial_failed_1")
		], ".")
	]
	),

	("citadel_barrow_failed", mnf_disable_all_keys|menu_text_color(0xff000000), "You soon regain you senses, but see that the cultist has left the area. Your quest ends here.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_horror")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("citadel_barrow_success", mnf_disable_all_keys|menu_text_color(0xff000000), "The crazed cultist lies slain at your feet. You search the area for clues to what maester Cadwyn saw or found when he was in the area, but find nothing. The dead tree at the top of the hill is interesting though. On the stone in front of it is written the name 'YGG' in what can only be blood, and you can almost hear a faint whisper coming from somewhere. It's almost like it's coming from the tree.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_horror")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("ninestars_trial_failed_1", mnf_disable_all_keys|menu_text_color(0xff000000), "Soon, guards come to drag you to your cell, where they inform you that you'll receieve your punishment the next day. Despondent and tired, you fall asleep, and all too soon, the sun rises once again. The door to the cell is opened, and guards quickly surround you and drag you to the castle courtyard, where a big farmer stands ready with a whip. As the first lash strikes your back, you decide not to make a sound, but once the fifth strikes you, you forget all about your decision and the rest of the lashes fall to the sound of your screams.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(jump_to_menu, "mnu_ninestars_10_1")
		], ".")
	]
	),

	("ninestars_trial_success", mnf_disable_all_keys|menu_text_color(0xff000000), "As Ser Raymun falls to the ground, the stands erupt in cheers, and the smallfolk surrounding the tourney grounds shout your name. Blood leaking through his armor, Ser Raymun gives a final sigh, and then breathes his final breath. Exhausted yourself, you motion for a servant to help you get out of your armor and back into some comfortable clothes.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(jump_to_menu, "mnu_ninestars_trial_success_1"),
			(call_script, "script_change_troop_renown", "trp_player", 35),
			(troop_raise_attribute, "trp_player", 1, 2),
			(display_message, "@You've gained 2 agility.")
		], ".")
	]
	),

	("ninestars_trial_success_1", mnf_disable_all_keys|menu_text_color(0xff000000), "Suddenly, Ser Alyn appears at your side, taking hold of your arm and dragging you off towards the the woods. Still groggy from the fight, you can't make sense of what he's shouting, but then he points towards the castle gates. There, Ser Emrick and Ser Arreck are mounting their horses, and grabbing swords, obviously intending to revenge their little brother. Ser Alyn leads you towards the road leading towards Snakewood, and tells you to make haste, before the brothers can catch up to you. As a final gesture, with a broad smile on his face, he hands you a small bag, filled with clinking coins. 'I bet a good amount on you defeating Ser Raymun, and figured it was only just you should have your share' he says.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_10_1",
		[],
		"Continue.",
		[
			(jump_to_menu, "mnu_ninestars_trial_success_2"),
			(troop_add_gold, "trp_player", 1300)
		], ".")
	]
	),

	("ninestars_trial_success_2", mnf_disable_all_keys|menu_text_color(0xff000000), "Setting out, you make good speed towards the safety of Snakewood, but the brothers are mounted on fine horses, and they know the woods much better than you do. Soon, you can hear them coming up behind you, and you turn your horse around, ready to face them.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("enter",
		[],
		"Charge!",
		[
			(set_jump_mission, "mt_ninestars_trial_woods"),
			(modify_visitors_at_site, "scn_ninestars_trial_woods"),
			(reset_visitors),
			(set_visitor, 1, "trp_emrick_templeton"),
			(set_visitor, 2, "trp_arreck_templeton"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_ninestars_trial_woods", slot_scene_visited, 1),
			(jump_to_scene, "scn_ninestars_trial_woods"),
			(change_screen_mission)
		], ".")
	]
	),

	("bloodstone_haunt", mnf_disable_all_keys|menu_text_color(0xff000000), "Nearing the camp of the pirates, you can soon see the shapes of tents huddling around the abandoned ruins of a long-destroyed castle. You notice that the earth around you is oddly barren, almost as if it's been scorched by fire hot enough to eradicate all signs of life and melt the uppermost layer to a hard crust.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("enter",
		[],
		"Attack the pirates.",
		[
			(set_jump_mission, "mt_bloodstone_haunt"),
			(modify_visitors_at_site, "scn_bloodstone_haunt"),
			(reset_visitors),
			(set_visitor, 1, "trp_stepstone_pirate_1"),
			(set_visitor, 2, "trp_stepstone_pirate_2"),
			(set_visitor, 3, "trp_stepstone_pirate_3"),
			(set_visitor, 4, "trp_stepstone_pirate_4"),
			(set_visitor, 5, "trp_stepstone_pirate_5"),
			(set_visitor, 6, "trp_stepstone_pirate_6"),
			(set_visitor, 7, "trp_stepstone_pirate_7"),
			(set_visitor, 8, "trp_stepstone_pirate_8"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_bloodstone_haunt", slot_scene_visited, 1),
			(jump_to_scene, "scn_bloodstone_haunt"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("ninestars_15", 0, "In the stands surrounding the tourney grounds, knights, nobles, ladies, farmers and merchants are gathered. A septon is summoned to deplore the Father above to give strenght to the righteous and judge the men about to fight justly. A herald blows a trumpet, the signal to fight, and you tighten your grip on the horse.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("enter",
		[],
		"Charge!",
		[
			(set_jump_mission, "mt_ninestars_trial"),
			(modify_visitors_at_site, "scn_ninestars_trial"),
			(reset_visitors),
			(set_visitor, 1, "trp_raymun_templeton_trial"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_ninestars_trial", slot_scene_visited, 1),
			(jump_to_scene, "scn_ninestars_trial"),
			(change_screen_mission)
		], ".")
	]
	),

	("castle_black", 0, "You arrive at Castle Black, the main stronghold of the Night's Watch.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_wall")
	],
	[
		("enter",
		[],
		"Enter the courtyard.",
		[
			(set_jump_mission, "mt_castle_black_place"),
			(modify_visitors_at_site, "scn_castle_black"),
			(reset_visitors),
			(set_visitor, 16, "trp_nw_main_quest_first_1"),
			(set_visitor, 17, "trp_nw_clydas"),
			(set_visitor, 18, "trp_nw_black_jack"),
			(set_visitor, 19, "trp_nw_cellador"),
			(set_visitor, 20, "trp_nw_deaf_dick"),
			(set_visitor, 21, "trp_nw_hobb"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_castle_black", slot_scene_visited, 1),
			(jump_to_scene, "scn_castle_black"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("renly_quest_shore", 0, "You approach the small beach at the foot of the Dragonmont. In the distance, you see a lone, tall, figure, dressed in red. A great fire burns a few feet from her.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_septry")
	],
	[
		("enter",
		[
			(check_quest_active, "qst_renly_quest_1")
		],
		"Walk towards the fire.",
		[
			(set_jump_mission, "mt_renly_quest_shore"),
			(modify_visitors_at_site, "scn_renly_quest_shore"),
			(reset_visitors),
			(set_visitor, 16, "trp_renly_quest_melisandre"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_renly_quest_shore", slot_scene_visited, 1),
			(jump_to_scene, "scn_renly_quest_shore"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("renly_quest_rainwood", mnf_disable_all_keys|menu_text_color(0xff000000), "You enter the outskirts of the Rainwood. In the far distance, you can make out the huge tower at the center of Storm's End. From the distance, it looks like a huge spiked fist thrusting towards the sky in defiance.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("rainwood_fire",
		[
			(player_has_item, "itm_trade_oil"),
			(store_item_kind_count, reg0, "itm_barrel_of_pitch"),
			(ge, reg0, 10),
			(check_quest_active, "qst_renly_quest_3")
		],
		"Start a fire.",
		[
			(troop_remove_items, "trp_player", "itm_trade_oil", 1),
			(troop_remove_items, "trp_player", "itm_barrel_of_pitch", 10),
			(assign, "$g_renly_quest_turncloak", 1),
			(call_script, "script_end_quest", "qst_renly_quest_3"),
			(setup_quest_text, "qst_renly_quest_4"),
			(str_store_string, 2, "@Await the results of Melisandres mission to Storm's End."),
			(call_script, "script_start_quest", "qst_renly_quest_4", "$g_talk_troop"),
			(party_add_particle_system, "p_renly_quest_rainwood", "psys_map_village_fire"),
			(party_add_particle_system, "p_renly_quest_rainwood", "psys_map_village_fire_smoke"),
			(party_add_particle_system, "p_renly_quest_rainwood_fire_1", "psys_map_village_fire"),
			(party_add_particle_system, "p_renly_quest_rainwood_fire_1", "psys_map_village_fire_smoke"),
			(party_add_particle_system, "p_renly_quest_rainwood_fire_2", "psys_map_village_fire"),
			(party_add_particle_system, "p_renly_quest_rainwood_fire_2", "psys_map_village_fire_smoke"),
			(party_add_particle_system, "p_renly_quest_rainwood_fire_3", "psys_map_village_fire"),
			(party_add_particle_system, "p_renly_quest_rainwood_fire_3", "psys_map_village_fire_smoke"),
			(party_add_particle_system, "p_renly_quest_rainwood_fire_4", "psys_map_village_fire"),
			(party_add_particle_system, "p_renly_quest_rainwood_fire_4", "psys_map_village_fire_smoke"),
			(leave_encounter),
			(change_screen_return)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("citadel_septry", 0, "You arrive at a lonely septry, in the most remote part of the Vale, where the waters of the Neck dissipate. The countryside is barren and windswept, and only a few poor peasants make their home here, close to the mountains.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_septry")
	],
	[
		("enter",
		[],
		"Visit the septry.",
		[
			(set_jump_mission, "mt_citadel_septry"),
			(modify_visitors_at_site, "scn_citadel_septry"),
			(reset_visitors),
			(set_visitor, 16, "trp_citadel_septon"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_citadel_septry", slot_scene_visited, 1),
			(jump_to_scene, "scn_citadel_septry"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("citadel_holdings", 0, "You arrive at an old holdfast, the seat of Ser Elston. The structure is ancient, perched on the top of a looming hill, overlooking a minor village. The villagers eye you sullenly as you pass by, many of them looking oddly alike, until you realise that many of them are probably related. The air is somehow thick, and in the distance you can almost make out an old forest, the trees tall and gnarled, reaching for the sky.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_village_life")
	],
	[
		("enter",
		[],
		"Enter the holdfast.",
		[
			(set_jump_mission, "mt_citadel_holdings"),
			(modify_visitors_at_site, "scn_citadel_holdings"),
			(reset_visitors),
			(set_visitor, 16, "trp_citadel_knight"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_citadel_holdings", slot_scene_visited, 1),
			(jump_to_scene, "scn_citadel_holdings"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("citadel_barrow", 0, "Your journey to the barrow was harrowing. The ground in the area is squishy, watery and smells rotten. Vapors seep from the trees, many of them fallen over or moulding, and wildlife is almost non-existant, except for a few rats scurrying across your path. The barrow rises ahead of you, a cluster of stones on top of a hill, though much of the area is submerged in water. The air is putrid, filled with miasmas and all kinds of foul smells, and thick, somehow thick.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_horror")
	],
	[
		("enter",
		[],
		"Inspect the barrow.",
		[
			(set_jump_mission, "mt_citadel_barrow"),
			(modify_visitors_at_site, "scn_citadel_barrow"),
			(reset_visitors),
			(set_visitor, 1, "trp_citadel_cultist"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_citadel_barrow", slot_scene_visited, 1),
			(jump_to_scene, "scn_citadel_barrow"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("battlemap_dothraki_sea", 0, "Old and abandoned camps are scattered across Essos, where the 'Great Grass Sea', as the dothraki call it, or 'The Haunted Lands' as it is known amongst the inhabitants of the Free Cities, meet the area controlled by Qohor and Volantis. Ever since the Century of Blood, when the dothraki came out of the east to plunder and rape, the grass plains have been slowly extending westwards, as cities and towns have been burned by the khals, and farmland has been abandoned.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_village_life")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("battlemap_forest_bog", 0, "Bogs and mires are spread across the world, in the forests that separates the holdings of various lords and magisters. Many of them contain the remnants of long dead men, soldiers from the armies who have marched across the land since time immemorial.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("battlemap_abandoned_village", 0, "Abandoned villages are plentiful in the Riverlands. The region has been a battlefield time and time again, before the conquest and after. Robert's Rebellion left a new wake of broken homes and farmsteads in its wake, and the smallfolk of the region are yet to reclaim all the farmable land.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_village_life")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("battlemap_poleboat", 0, "The Greenblood is the main river of Dorne, and is the home of the Orphans of the Greenblood, descendants of the rhoynar who refused to change their ways to fit in with the rest of the dornish. They ply their trade in poleboats along the river, dreaming of the day they can return to Essos and the Mother Rhoyne.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ship")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("battlemap_old_mill", 0, "Old mills are scattered across Westeros, the remnants of old villages and hamlets, long forgotten and abandoned.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("battlemap_barrow", 0, "The barrowlands is a region in the North of wide, hilly plains covered with barrows, the ancient graves of the First Men. The largest hill, Great Barrow in Barrowton, is said to contain the grave of the First King of the First Men and a curse was supposedly placed on the Great Barrow, weakening and making corpselike any living man who dared to equal the First King. The smallfolk of the barrowlands shun the barrows, believing them the haunts of wights and revenants.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_horror")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("battlemap_weirwood_north", 0, "Lonely weirwoods are scattered across the North, with a few also remaining in the south, often having stood there for thousands of years. Weirwoods are sacred to the followers of the old gods, and many have faces carved into their trunks. In the North, weirwoods are used to bear witness to important ceremonies, and according to the maesters, they where also used as a place of human sacrifice in ages past.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("battlemap_mine_westerlands", 0, "The Westerlands are not the largest, most populous, or most fertile part of the Seven Kingdoms, but it is the richest. Full of hills and crags, the land is dotted with mines from which pour gold and silver in astonishing quantities.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_cave")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("battlemap_lumber_camp_north", 0, "Lumber camps are scattered all across the North, wherever forests are plenty. Foresters and crofters often live nearby, making a living from working in the woods. In the Dawn Age, massive forests covered Westeros, and a man could walk from the Stormlands to the North without ever stepping into sunlight. But the First Men came with bronze and fire and destroyed many of the great forests. In this age, many towns and cities have to import timber, both for fire and crafting, making the lumber trade a profitable enterprise for those lords who control the remaining woodland.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("battlemap_farmland_reach", 0, "The Reach contains thousands of villages, but in between these lie leagues and leagues of farmland. The peasants toil their lives away, working for great lords they'll never meet, and looking towards winter with dread. Rightly famed for its fertility, the Reach is known throughout the world for the apples, grapes, olives and many kinds of wheat farmed in what some call the 'Breadbasket of Westeros'.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("battlemap_orchard_essos", 0, "Essos contains thousands of villages, but in between these lie leagues and leagues of farmland and orchards. The peasants and slaves of the continent toil their lives away, working for magisters and merchant-princes they'll never meet, and always looking over the horizon for signs of the dothraki hordes.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("battlemap_ruined_fort", 0, "Across Essos lies many abandoned forts, remnants of valyrian traders and explorers, who sought to control the continent. Before the Doom, thousands of towns and forts where spread across the land, but many where abandoned when the dothraki came out of the east.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_ruins")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("battlemap_rhoynar_ruins", 0, "The rhoynar where a culture of river-faring people who dwelt on the banks of the immense river running through Essos, the Rhoyne. When the rhoynar came into contact with the city of Volantis, they fought many wars against them, and in the end Volantis sent to Valyria for aid. The valyrian lords came on their dragons in their hundreds, and burned the rhoynish armies. Afterwards, they descended on the great cities of the rhoynar and burned those too, leaving nothing but ruins.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_ruins")
	],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("nightfort", 0, "You arrive at the Nightfort.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_wall")
	],
	[
		("enter",
		[],
		"Enter the ruins.",
		[
			(set_jump_mission, "mt_nightfort_place"),
			(modify_visitors_at_site, "scn_nightfort"),
			(reset_visitors),
			(set_visitor, 16, "trp_bloodraven"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_nightfort", slot_scene_visited, 1),
			(jump_to_scene, "scn_nightfort"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("castle_black2", 0, "You arrive at Castle Black.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_wall")
	],
	[
		("enter",
		[],
		"Enter the courtyard.",
		[
			(set_jump_mission, "mt_castle_black_place2"),
			(modify_visitors_at_site, "scn_castle_black2"),
			(reset_visitors),
			(set_visitor, 16, "trp_nw_main_quest_first_2"),
			(set_visitor, 17, "trp_nw_clydas"),
			(set_visitor, 18, "trp_nw_black_jack"),
			(set_visitor, 19, "trp_nw_cellador"),
			(set_visitor, 20, "trp_nw_deaf_dick"),
			(set_visitor, 21, "trp_nw_hobb"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_castle_black2", slot_scene_visited, 1),
			(jump_to_scene, "scn_castle_black2"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("castle_black3", 0, "You arrive at Castle Black.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_wall")
	],
	[
		("enter",
		[],
		"Enter the courtyard.",
		[
			(set_jump_mission, "mt_castle_black_place3"),
			(modify_visitors_at_site, "scn_castle_black3"),
			(reset_visitors),
			(set_visitor, 16, "trp_nw_main_quest_second_2"),
			(set_visitor, 17, "trp_nw_clydas"),
			(set_visitor, 18, "trp_nw_black_jack"),
			(set_visitor, 19, "trp_nw_cellador"),
			(set_visitor, 20, "trp_nw_deaf_dick"),
			(set_visitor, 21, "trp_nw_hobb"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_castle_black3", slot_scene_visited, 1),
			(jump_to_scene, "scn_castle_black3"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("castle_black4", 0, "You arrive at Castle Black.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_wall")
	],
	[
		("enter",
		[],
		"Enter the courtyard.",
		[
			(set_jump_mission, "mt_castle_black_place4"),
			(modify_visitors_at_site, "scn_castle_black4"),
			(reset_visitors),
			(set_visitor, 16, "trp_nw_main_quest_fourth_1"),
			(set_visitor, 17, "trp_nw_clydas"),
			(set_visitor, 18, "trp_nw_black_jack"),
			(set_visitor, 19, "trp_nw_cellador"),
			(set_visitor, 20, "trp_nw_deaf_dick"),
			(set_visitor, 21, "trp_nw_hobb"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_castle_black4", slot_scene_visited, 1),
			(jump_to_scene, "scn_castle_black4"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("castle_black5", 0, "You arrive at Castle Black.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_wall")
	],
	[
		("enter",
		[],
		"Enter the courtyard.",
		[
			(set_jump_mission, "mt_castle_black_place5"),
			(modify_visitors_at_site, "scn_castle_black5"),
			(reset_visitors),
			(set_visitor, 16, "trp_nw_main_quest_fifth_1"),
			(set_visitor, 17, "trp_nw_clydas"),
			(set_visitor, 18, "trp_nw_black_jack"),
			(set_visitor, 19, "trp_nw_cellador"),
			(set_visitor, 20, "trp_nw_deaf_dick"),
			(set_visitor, 21, "trp_nw_hobb"),
			(set_visitor, 22, "trp_nw_main_quest_fifth_2"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_castle_black5", slot_scene_visited, 1),
			(jump_to_scene, "scn_castle_black5"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("shadow_tower", 0, "You arrive at the Shadow Tower.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_wall")
	],
	[
		("enter",
		[],
		"Enter the courtyard.",
		[
			(set_jump_mission, "mt_shadow_tower_place"),
			(modify_visitors_at_site, "scn_shadow_tower"),
			(reset_visitors),
			(set_visitor, 16, "trp_nw_main_quest_third_1"),
			(set_visitor, 17, "trp_nw_mullin"),
			(set_visitor, 18, "trp_nw_tom_barleycorn"),
			(set_visitor, 19, "trp_nw_luke"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_shadow_tower", slot_scene_visited, 1),
			(jump_to_scene, "scn_shadow_tower"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("shadow_tower2", 0, "You arrive at the Shadow Tower.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_wall")
	],
	[
		("enter",
		[],
		"Enter the courtyard.",
		[
			(set_jump_mission, "mt_shadow_tower_place2"),
			(modify_visitors_at_site, "scn_shadow_tower2"),
			(reset_visitors),
			(set_visitor, 16, "trp_nw_main_quest_third_2"),
			(set_visitor, 17, "trp_nw_mullin"),
			(set_visitor, 18, "trp_nw_tom_barleycorn"),
			(set_visitor, 19, "trp_nw_luke"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_shadow_tower2", slot_scene_visited, 1),
			(jump_to_scene, "scn_shadow_tower2"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("eastwatch", 0, "You arrive at Eastwatch-by-the-Sea.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_wall")
	],
	[
		("enter",
		[],
		"Enter the courtyard.",
		[
			(set_jump_mission, "mt_eastwatch_place"),
			(modify_visitors_at_site, "scn_eastwatch"),
			(reset_visitors),
			(set_visitor, 16, "trp_nw_main_quest_second_1"),
			(set_visitor, 17, "trp_nw_harmune"),
			(set_visitor, 18, "trp_nw_glendon"),
			(set_visitor, 19, "trp_nw_daeron"),
			(set_visitor, 20, "trp_nw_janos_slynt"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_eastwatch", slot_scene_visited, 1),
			(jump_to_scene, "scn_eastwatch"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("abandoned_holdfast", 0, "You arrive at the Abandoned Holdfast.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_ruins")
	],
	[
		("enter",
		[],
		"Enter the ruins.",
		[
			(set_jump_mission, "mt_abandoned_holdfast_place"),
			(modify_visitors_at_site, "scn_abandoned_holdfast"),
			(reset_visitors),
			(set_visitor, 16, "trp_wildfire_npc_5"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_abandoned_holdfast", slot_scene_visited, 1),
			(jump_to_scene, "scn_abandoned_holdfast"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("nightfort_rat_cook", 0, "Soon after eating the paste, you sense your vision blurring. The weirwood branches extruding from the walls seem to close in on you, and you loose all sense of time and space. When you wake up, you're still in the Nightfort, but it is as if something is not quite the same. The walls are no longer covered in dust and cobwebs, and fires burn in the alcoves.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_wall")
	],
	[
		("enter",
		[],
		"Continue.",
		[
			(set_jump_mission, "mt_nightfort_rat_cook"),
			(modify_visitors_at_site, "scn_nightfort_rat_cook"),
			(reset_visitors),
			(set_visitor, 16, "trp_rat_cook"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_nightfort_rat_cook", slot_scene_visited, 1),
			(jump_to_scene, "scn_nightfort_rat_cook"),
			(change_screen_mission)
		], ".")
	]
	),

	("nightfort_mad_axe", 0, "Finishing your talk with the mad cook, you feel time shifting, and everything grows dark. As you regain your sense of being, you find yourself still in the Nightfort, but the sun has set, and it's the dead of night. As you try to gain a sense of direction, you hear soft footsteps echoing from down the hall, and an odd dripping sound...",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_wall")
	],
	[
		("enter",
		[],
		"Continue.",
		[
			(modify_visitors_at_site, "scn_nightfort_mad_axe"),
			(reset_visitors, 0),
			(set_visitors, 1, "trp_mad_axe", 1),
			(set_jump_mission, "mt_nightfort_mad_axe"),
			(jump_to_scene, "scn_nightfort_mad_axe"),
			(change_screen_mission)
		], ".")
	]
	),

	("nightfort_nights_king", 0, "As you once again plunge into darkness, you can't help but notice how cold you feel. As you regain your senses, you feel the cold like tiny needles in your bones, and notice how your breath is visible in the frosty air...",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_wall")
	],
	[
		("enter",
		[],
		"Continue.",
		[
			(set_jump_mission, "mt_nightfort_nights_king"),
			(modify_visitors_at_site, "scn_nightfort_nights_king"),
			(reset_visitors),
			(set_visitor, 16, "trp_nights_king"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_nightfort_nights_king", slot_scene_visited, 1),
			(jump_to_scene, "scn_nightfort_nights_king"),
			(change_screen_mission)
		], ".")
	]
	),

	("yunkai_ship_1", 0, "You board the ship heading for Yunkai, in Slaver's Bay. The crew is a ragged and filthy bunch, foul-mouthed and lice-ridden. Upon boarding, you catch a glimpse of the slaves manning the oars. Naked to the waist, they're chained together by the ankles. The oarmaster is a big fat lyseni, with a pale belly, who wield a large whip. When you hear the whip crack for the first time, the oars begin going up and down, and soon the Spicy Maiden is on her way.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ship")
	],
	[
		("enter",
		[],
		"Continue.",
		[
			(set_jump_mission, "mt_yunkai_ship_1_place"),
			(modify_visitors_at_site, "scn_yunkai_ship_1"),
			(reset_visitors),
			(set_visitor, 16, "trp_bayle1"),
			(set_visitor, 17, "trp_yarin1"),
			(set_visitor, 18, "trp_sanor1"),
			(set_visitor, 19, "trp_jeorador1"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_yunkai_ship_1", slot_scene_visited, 1),
			(jump_to_scene, "scn_yunkai_ship_1"),
			(change_screen_mission)
		], ".")
	]
	),

	("yunkai_ship_2", 0, "As the ship sails on, you notice how the northern horizon becomes increasingly red and bright, almost like a sunset. You notice the crew muttering about demons, brimstone, and the cursed ruins of Valyria. Soon, the ship is engulfed in an unatural fog, and a sharp smell penetrates the air.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ship")
	],
	[
		("enter",
		[],
		"Continue.",
		[
			(set_jump_mission, "mt_yunkai_ship_2_place"),
			(modify_visitors_at_site, "scn_yunkai_ship_2"),
			(reset_visitors),
			(set_visitor, 16, "trp_bayle2"),
			(set_visitor, 17, "trp_yarin2"),
			(set_visitor, 18, "trp_sanor2"),
			(set_visitor, 19, "trp_jeorador2"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_yunkai_ship_2", slot_scene_visited, 1),
			(jump_to_scene, "scn_yunkai_ship_2"),
			(change_screen_mission)
		], ".")
	]
	),

	("yunkai_ship_3", 0, "Sailing onwards, the ship soon leaves the Smoking Sea behind, and the mood of the crew lightens. As the ship passes the Isle of Cedars, a monkey somehow manages to climb onboard, and the crew takes this as an omen. Apparently, a monkey aboard signals the favor of R'hllor. The effect of their cheering startles the monkey, and the morale of the crew is raised even further when it throws its excrement at the captain.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ship")
	],
	[
		("enter",
		[],
		"Continue.",
		[
			(set_jump_mission, "mt_yunkai_ship_3_place"),
			(modify_visitors_at_site, "scn_yunkai_ship_3"),
			(reset_visitors),
			(set_visitor, 16, "trp_bayle3"),
			(set_visitor, 17, "trp_yarin3"),
			(set_visitor, 18, "trp_sanor3"),
			(set_visitor, 19, "trp_jeorador3"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_yunkai_ship_3", slot_scene_visited, 1),
			(jump_to_scene, "scn_yunkai_ship_3"),
			(change_screen_mission)
		], ".")
	]
	),

	("yunkai", 0, "As the ship sails into the harbor of Yunkai, you notice a strong smell wafting off the city. It carries the usual smells of a great many people living together, sweat, smoke and shit, but with the additional scent of spices mixed in. As you step off the ship, you're quickly carried to the town square by the throng of people heading that same way.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_slavers_bay")
	],
	[
		("enter",
		[],
		"Continue.",
		[
			(set_jump_mission, "mt_yunkai_place"),
			(modify_visitors_at_site, "scn_yunkai"),
			(reset_visitors),
			(set_visitor, 16, "trp_morghaz"),
			(set_visitor, 17, "trp_chezdhar"),
			(set_visitor, 18, "trp_faezhar"),
			(set_visitor, 19, "trp_grazdan"),
			(set_visitor, 20, "trp_gramnan"),
			(set_visitor, 21, "trp_gora"),
			(set_visitor, 22, "trp_kroznok"),
			(set_visitor, 23, "trp_elkoz"),
			(set_visitor, 24, "trp_krazneko"),
			(set_visitor, 25, "trp_rakoz"),
			(set_visitor, 26, "trp_graznek"),
			(set_visitor, 27, "trp_grazdan_common"),
			(set_visitor, 28, "trp_hozrek"),
			(set_visitor, 29, "trp_gessala"),
			(set_visitor, 30, "trp_eleza"),
			(set_visitor, 31, "trp_hazza"),
			(set_visitor, 32, "trp_alyssa_yunkai"),
			(set_visitor, 33, "trp_galazza_common"),
			(set_visitor, 34, "trp_slave_1"),
			(set_visitor, 35, "trp_slave_2"),
			(set_visitor, 36, "trp_female_slave_1"),
			(set_visitor, 37, "trp_female_slave_2"),
			(set_visitor, 38, "trp_female_slave_3"),
			(set_visitor, 39, "trp_female_slave_4"),
			(set_visitor, 40, "trp_female_slave_5"),
			(set_visitor, 41, "trp_yunkai_soldier_1"),
			(set_visitor, 42, "trp_yunkai_soldier_2"),
			(set_visitor, 43, "trp_yunkai_soldier_3"),
			(set_visitor, 44, "trp_yunkai_soldier_4"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_yunkai", slot_scene_visited, 1),
			(jump_to_scene, "scn_yunkai"),
			(change_screen_mission)
		], ".")
	]
	),

	("yunkai_town_square", 0, "Having seen Yunkai, you ponder what to do next.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_slavers_bay")
	],
	[
		("enter1",
		[],
		"Continue exploring the city.",
		[
			(set_jump_mission, "mt_yunkai_place"),
			(modify_visitors_at_site, "scn_yunkai"),
			(reset_visitors),
			(set_visitor, 16, "trp_morghaz"),
			(set_visitor, 17, "trp_chezdhar"),
			(set_visitor, 18, "trp_faezhar"),
			(set_visitor, 19, "trp_grazdan"),
			(set_visitor, 20, "trp_gramnan"),
			(set_visitor, 21, "trp_gora"),
			(set_visitor, 22, "trp_kroznok"),
			(set_visitor, 23, "trp_elkoz"),
			(set_visitor, 24, "trp_krazneko"),
			(set_visitor, 25, "trp_rakoz"),
			(set_visitor, 26, "trp_graznek"),
			(set_visitor, 27, "trp_grazdan_common"),
			(set_visitor, 28, "trp_hozrek"),
			(set_visitor, 29, "trp_gessala"),
			(set_visitor, 30, "trp_eleza"),
			(set_visitor, 31, "trp_hazza"),
			(set_visitor, 32, "trp_alyssa_yunkai"),
			(set_visitor, 33, "trp_galazza_common"),
			(set_visitor, 34, "trp_slave_1"),
			(set_visitor, 35, "trp_slave_2"),
			(set_visitor, 36, "trp_female_slave_1"),
			(set_visitor, 37, "trp_female_slave_2"),
			(set_visitor, 38, "trp_female_slave_3"),
			(set_visitor, 39, "trp_female_slave_4"),
			(set_visitor, 40, "trp_female_slave_5"),
			(set_visitor, 41, "trp_yunkai_soldier_1"),
			(set_visitor, 42, "trp_yunkai_soldier_2"),
			(set_visitor, 43, "trp_yunkai_soldier_3"),
			(set_visitor, 44, "trp_yunkai_soldier_4"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_yunkai", slot_scene_visited, 1),
			(jump_to_scene, "scn_yunkai"),
			(change_screen_mission)
		], "."),

		("enter3",
		[],
		"Join a caravan to Meereen.",
		[
			(set_jump_mission, "mt_way_to_meereen_place"),
			(modify_visitors_at_site, "scn_way_to_meereen"),
			(reset_visitors),
			(set_visitor, 16, "trp_sebban"),
			(set_visitor, 17, "trp_seve"),
			(set_visitor, 18, "trp_norlea"),
			(set_visitor, 19, "trp_sammana"),
			(set_visitor, 20, "trp_dosera"),
			(set_visitor, 21, "trp_tamela"),
			(set_visitor, 22, "trp_alarys"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_way_to_meereen", slot_scene_visited, 1),
			(jump_to_scene, "scn_way_to_meereen"),
			(change_screen_mission)
		], "."),

		("enter2",
		[],
		"Return to Volantis.",
		[
			(set_jump_mission, "mt_yunkai_ship_4_place"),
			(modify_visitors_at_site, "scn_yunkai_ship_4"),
			(reset_visitors),
			(set_visitor, 16, "trp_floran"),
			(set_visitor, 17, "trp_maeldan"),
			(set_visitor, 18, "trp_ero"),
			(set_visitor, 19, "trp_olwan"),
			(set_visitor, 20, "trp_mheran"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_yunkai_ship_4", slot_scene_visited, 1),
			(jump_to_scene, "scn_yunkai_ship_4"),
			(change_screen_mission)
		], ".")
	]
	),

	("way_to_meereen", 0, "Heading onwards through the scorched canyons and flat hills that make up the greater part of Slaver's Bay, you finally see Meereen in the distance, the Great Pyramid towering above the city.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_slavers_bay")
	],
	[
		("enter",
		[],
		"Continue.",
		[
			(set_jump_mission, "mt_meereen_place"),
			(modify_visitors_at_site, "scn_meereen"),
			(reset_visitors),
			(set_visitor, 16, "trp_unsullied_1"),
			(set_visitor, 17, "trp_unsullied_2"),
			(set_visitor, 18, "trp_unsullied_3"),
			(set_visitor, 19, "trp_unsullied_4"),
			(set_visitor, 20, "trp_unsullied_5"),
			(set_visitor, 21, "trp_unsullied_6"),
			(set_visitor, 22, "trp_unsullied_7"),
			(set_visitor, 23, "trp_unsullied_8"),
			(set_visitor, 24, "trp_unsullied_9"),
			(set_visitor, 25, "trp_unsullied_10"),
			(set_visitor, 26, "trp_alkoz"),
			(set_visitor, 27, "trp_hazrak"),
			(set_visitor, 28, "trp_mazdhan"),
			(set_visitor, 29, "trp_zharak"),
			(set_visitor, 30, "trp_stepstone_npc_2"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_meereen", slot_scene_visited, 1),
			(jump_to_scene, "scn_meereen"),
			(change_screen_mission)
		], ".")
	]
	),

	("meereen_town_square", 0, "Having seen Meereen, you ponder what to do next.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_slavers_bay")
	],
	[
		("enter1",
		[],
		"Continue exploring the city.",
		[
			(set_jump_mission, "mt_meereen_place"),
			(modify_visitors_at_site, "scn_meereen"),
			(reset_visitors),
			(set_visitor, 16, "trp_unsullied_1"),
			(set_visitor, 17, "trp_unsullied_2"),
			(set_visitor, 18, "trp_unsullied_3"),
			(set_visitor, 19, "trp_unsullied_4"),
			(set_visitor, 20, "trp_unsullied_5"),
			(set_visitor, 21, "trp_unsullied_6"),
			(set_visitor, 22, "trp_unsullied_7"),
			(set_visitor, 23, "trp_unsullied_8"),
			(set_visitor, 24, "trp_unsullied_9"),
			(set_visitor, 25, "trp_unsullied_10"),
			(set_visitor, 26, "trp_alkoz"),
			(set_visitor, 27, "trp_hazrak"),
			(set_visitor, 28, "trp_mazdhan"),
			(set_visitor, 29, "trp_zharak"),
			(set_visitor, 30, "trp_stepstone_npc_2"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_meereen", slot_scene_visited, 1),
			(jump_to_scene, "scn_meereen"),
			(change_screen_mission)
		], "."),

		("enter2",
		[],
		"Request access to the throne room.",
		[
			(set_jump_mission, "mt_meereen_throne_room_place"),
			(modify_visitors_at_site, "scn_meereen_throne_room"),
			(reset_visitors),
			(set_visitor, 16, "trp_unsullied_11"),
			(set_visitor, 17, "trp_unsullied_12"),
			(set_visitor, 18, "trp_unsullied_13"),
			(set_visitor, 19, "trp_unsullied_14"),
			(set_visitor, 20, "trp_unsullied_15"),
			(set_visitor, 21, "trp_unsullied_16"),
			(set_visitor, 22, "trp_unsullied_17"),
			(set_visitor, 23, "trp_unsullied_18"),
			(set_visitor, 24, "trp_unsullied_19"),
			(set_visitor, 25, "trp_unsullied_20"),
			(set_visitor, 26, "trp_stepstone_npc_3"),
			(set_visitor, 27, "trp_stepstone_npc_4"),
			(set_visitor, 28, "trp_daario"),
			(set_visitor, 29, "trp_grey_worm"),
			(set_visitor, 30, "trp_reznak"),
			(set_visitor, 31, "trp_skahaz"),
			(set_visitor, 32, "trp_jhogo"),
			(set_visitor, 33, "trp_aggo"),
			(set_visitor, 34, "trp_rakharo"),
			(set_visitor, 35, "trp_galazza"),
			(set_visitor, 36, "trp_grazdam"),
			(set_visitor, 37, "trp_hizdahr"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_meereen_throne_room", slot_scene_visited, 1),
			(jump_to_scene, "scn_meereen_throne_room"),
			(change_screen_mission)
		], "."),

		("enter3",
		[],
		"Visit Daznak's Pit.",
		[
			(set_jump_mission, "mt_daznaks_pit_place"),
			(modify_visitors_at_site, "scn_daznaks_pit"),
			(reset_visitors),
			(set_visitor, 16, "trp_khrazz"),
			(set_visitor, 17, "trp_belaquo"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_daznaks_pit", slot_scene_visited, 1),
			(jump_to_scene, "scn_daznaks_pit"),
			(change_screen_mission)
		], "."),

		("enter4",
		[],
		"Return to Volantis.",
		[
			(set_jump_mission, "mt_yunkai_ship_4_place"),
			(modify_visitors_at_site, "scn_yunkai_ship_4"),
			(reset_visitors),
			(set_visitor, 16, "trp_floran"),
			(set_visitor, 17, "trp_maeldan"),
			(set_visitor, 18, "trp_ero"),
			(set_visitor, 19, "trp_olwan"),
			(set_visitor, 20, "trp_mheran"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_yunkai_ship_4", slot_scene_visited, 1),
			(jump_to_scene, "scn_yunkai_ship_4"),
			(change_screen_mission)
		], ".")
	]
	),

	("meereen_throne_room", 0, "You ponder what to do next.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_slavers_bay")
	],
	[
		("enter1",
		[],
		"Continue exploring the city.",
		[
			(set_jump_mission, "mt_meereen_place"),
			(modify_visitors_at_site, "scn_meereen"),
			(reset_visitors),
			(set_visitor, 16, "trp_unsullied_1"),
			(set_visitor, 17, "trp_unsullied_2"),
			(set_visitor, 18, "trp_unsullied_3"),
			(set_visitor, 19, "trp_unsullied_4"),
			(set_visitor, 20, "trp_unsullied_5"),
			(set_visitor, 21, "trp_unsullied_6"),
			(set_visitor, 22, "trp_unsullied_7"),
			(set_visitor, 23, "trp_unsullied_8"),
			(set_visitor, 24, "trp_unsullied_9"),
			(set_visitor, 25, "trp_unsullied_10"),
			(set_visitor, 26, "trp_alkoz"),
			(set_visitor, 27, "trp_hazrak"),
			(set_visitor, 28, "trp_mazdhan"),
			(set_visitor, 29, "trp_zharak"),
			(set_visitor, 30, "trp_stepstone_npc_2"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_meereen", slot_scene_visited, 1),
			(jump_to_scene, "scn_meereen"),
			(change_screen_mission)
		], "."),

		("enter2",
		[],
		"Request access to the throne room.",
		[
			(set_jump_mission, "mt_meereen_throne_room_place"),
			(modify_visitors_at_site, "scn_meereen_throne_room"),
			(reset_visitors),
			(set_visitor, 16, "trp_unsullied_11"),
			(set_visitor, 17, "trp_unsullied_12"),
			(set_visitor, 18, "trp_unsullied_13"),
			(set_visitor, 19, "trp_unsullied_14"),
			(set_visitor, 20, "trp_unsullied_15"),
			(set_visitor, 21, "trp_unsullied_16"),
			(set_visitor, 22, "trp_unsullied_17"),
			(set_visitor, 23, "trp_unsullied_18"),
			(set_visitor, 24, "trp_unsullied_19"),
			(set_visitor, 25, "trp_unsullied_20"),
			(set_visitor, 26, "trp_stepstone_npc_3"),
			(set_visitor, 27, "trp_stepstone_npc_4"),
			(set_visitor, 28, "trp_daario"),
			(set_visitor, 29, "trp_grey_worm"),
			(set_visitor, 30, "trp_reznak"),
			(set_visitor, 31, "trp_skahaz"),
			(set_visitor, 32, "trp_jhogo"),
			(set_visitor, 33, "trp_aggo"),
			(set_visitor, 34, "trp_rakharo"),
			(set_visitor, 35, "trp_galazza"),
			(set_visitor, 36, "trp_grazdam"),
			(set_visitor, 37, "trp_hizdahr"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_meereen_throne_room", slot_scene_visited, 1),
			(jump_to_scene, "scn_meereen_throne_room"),
			(change_screen_mission)
		], "."),

		("enter3",
		[],
		"Visit Daznak's Pit.",
		[
			(set_jump_mission, "mt_daznaks_pit_place"),
			(modify_visitors_at_site, "scn_daznaks_pit"),
			(reset_visitors),
			(set_visitor, 16, "trp_khrazz"),
			(set_visitor, 17, "trp_belaquo"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_daznaks_pit", slot_scene_visited, 1),
			(jump_to_scene, "scn_daznaks_pit"),
			(change_screen_mission)
		], "."),

		("enter4",
		[],
		"Return to Volantis.",
		[
			(set_jump_mission, "mt_yunkai_ship_4_place"),
			(modify_visitors_at_site, "scn_yunkai_ship_4"),
			(reset_visitors),
			(set_visitor, 16, "trp_floran"),
			(set_visitor, 17, "trp_maeldan"),
			(set_visitor, 18, "trp_ero"),
			(set_visitor, 19, "trp_olwan"),
			(set_visitor, 20, "trp_mheran"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_yunkai_ship_4", slot_scene_visited, 1),
			(jump_to_scene, "scn_yunkai_ship_4"),
			(change_screen_mission)
		], ".")
	]
	),

	("volantis_town", 0, "You've returned to Volantis.",
	"none",
	[],
	[
		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("donation_septry", 0, "You arrive at a septry.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_septry")
	],
	[
		("enter",
		[],
		"Visit the septry.",
		[
			(set_jump_mission, "mt_donation_septry_place"),
			(modify_visitors_at_site, "scn_donation_septry"),
			(reset_visitors),
			(set_visitor, 16, "trp_james_parr"),
			(set_visitor, 17, "trp_steff_van_oost"),
			(set_visitor, 18, "trp_keith_larson"),
			(set_visitor, 19, "trp_etienne_lacroix"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_donation_septry", slot_scene_visited, 1),
			(jump_to_scene, "scn_donation_septry"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("hillhall", 0, "You arrive at Hillhall.",
	"none",
	[
		(set_background_mesh, "mesh_pic_village_p")
	],
	[
		("enter",
		[],
		"Visit Hillhall.",
		[
			(set_jump_mission, "mt_hillhall_place"),
			(modify_visitors_at_site, "scn_hillhall"),
			(reset_visitors),
			(set_visitor, 16, "trp_wildfire_npc_2"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_hillhall", slot_scene_visited, 1),
			(jump_to_scene, "scn_hillhall"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("relic_septry", 0, "You arrive at a septry.",
	"none",
	[
		(set_background_mesh, "mesh_pic_event_septry")
	],
	[
		("enter",
		[],
		"Enter the septry courtyard.",
		[
			(set_jump_mission, "mt_septry_place"),
			(modify_visitors_at_site, "scn_relic_septry"),
			(reset_visitors),
			(set_visitor, 16, "trp_relic_npc_0"),
			(set_jump_entry, 0),
			(scene_set_slot, "scn_relic_septry", slot_scene_visited, 1),
			(jump_to_scene, "scn_relic_septry"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("zendar", mnf_auto_enter, "You enter the town of Zendar.",
	"none",
	[
		(reset_price_rates, 0),
		(set_price_rate_for_item, "itm_trade_tools", 70),
		(set_price_rate_for_item, "itm_trade_salt", 140)
	],
	[
		("zendar_enter",
		[],
		" ",
		[
			(set_jump_mission, "mt_town_default"),
			(jump_to_scene, "scn_zendar_center"),
			(change_screen_mission)
		], "Door_to_the_town_center."),

		("zendar_tavern",
		[],
		" ",
		[
			(set_jump_mission, "mt_town_default"),
			(jump_to_scene, "scn_the_happy_boar"),
			(change_screen_mission)
		], "Door_to_the_tavern."),

		("zendar_merchant",
		[],
		" ",
		[
			(set_jump_mission, "mt_town_default"),
			(jump_to_scene, "scn_zendar_merchant"),
			(change_screen_mission)
		], "Door_to_the_merchant."),

		("zendar_arena",
		[],
		" ",
		[
			(set_jump_mission, "mt_town_default"),
			(jump_to_scene, "scn_zendar_arena"),
			(change_screen_mission)
		], "Door_to_the_arena."),

		("town_1_leave",
		[],
		" ",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("salt_mine", mnf_auto_enter, "You enter the salt mine.",
	"none",
	[
		(reset_price_rates, 0),
		(set_price_rate_for_item, "itm_trade_salt", 55)
	],
	[
		("enter",
		[],
		"Enter.",
		[
			(set_jump_mission, "mt_town_center"),
			(jump_to_scene, "scn_salt_mine"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("four_ways_inn", mnf_auto_enter, "You arrive at the Four Ways Inn.",
	"none",
	[],
	[
		("enter",
		[],
		"Enter.",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_four_ways_inn"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("test_scene", 0, "You enter the test scene.",
	"none",
	[],
	[
		("leave",
		[],
		"Leave.",
		[
			(assign, "$temp_presentation_shown", 0),
			(leave_encounter),
			(change_screen_return)
		], "."),

		("enter",
		[
			(eq, "$temp_presentation_shown", 0)
		],
		"choose a siege camp",
		[
			(assign, "$temp_scene_type", 1),
			(start_presentation, "prsnt_scene_picker")
		], "."),

		("enter",
		[
			(eq, "$temp_presentation_shown", 0)
		],
		"choose a castle or town",
		[
			(assign, "$temp_scene_type", 2),
			(start_presentation, "prsnt_scene_picker")
		], "."),

		("jump",
		[
			(eq, "$temp_presentation_shown", 1)
		],
		"Jump to scene",
		[
			(assign, "$temp_presentation_shown", 0),
			(set_jump_mission, "mt_ai_training"),
			(try_begin),
				(eq, "$temp_scene_type", 1),
				(party_get_slot, ":g_presentation_obj_15_val_village_farmer_party", "$g_presentation_obj_15_val", slot_village_farmer_party),
			(else_try),
				(eq, "$temp_scene_type", 2),
				(party_get_slot, ":g_presentation_obj_15_val_village_farmer_party", "$g_presentation_obj_15_val", slot_town_center),
			(try_end),
			(jump_to_scene, ":g_presentation_obj_15_val_village_farmer_party"),
			(change_screen_mission)
		], "."),

		("enter",
		[
			(eq, "$temp_presentation_shown", 0)
		],
		"camp desert",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_camp_desert"),
			(change_screen_mission)
		], "."),

		("enter",
		[
			(eq, "$temp_presentation_shown", 0)
		],
		"camp desert forest",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_camp_desert_forest"),
			(change_screen_mission)
		], "."),

		("enter",
		[
			(eq, "$temp_presentation_shown", 0)
		],
		"camp plain",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_camp_plain"),
			(change_screen_mission)
		], "."),

		("enter",
		[
			(eq, "$temp_presentation_shown", 0)
		],
		"camp plain forest",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_camp_plain_forest"),
			(change_screen_mission)
		], "."),

		("enter",
		[
			(eq, "$temp_presentation_shown", 0)
		],
		"camp snow",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_camp_snow"),
			(change_screen_mission)
		], "."),

		("enter",
		[
			(eq, "$temp_presentation_shown", 0)
		],
		"camp snow forest",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_camp_snow_forest"),
			(change_screen_mission)
		], "."),

		("enter",
		[
			(eq, "$temp_presentation_shown", 0)
		],
		"camp steppe",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_camp_steppe"),
			(change_screen_mission)
		], "."),

		("enter",
		[
			(eq, "$temp_presentation_shown", 0)
		],
		"camp steppe forest",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_camp_steppe_forest"),
			(change_screen_mission)
		], ".")
	]
	),

	("battlefields", 0, "{!}Select a field...",
	"none",
	[],
	[
		("enter_f1",
		[],
		"{!}Field 1",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_field_1"),
			(change_screen_mission)
		], "."),

		("enter_f2",
		[],
		"{!}Field 2",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_field_2"),
			(change_screen_mission)
		], "."),

		("enter_f3",
		[],
		"{!}Field 3",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_field_3"),
			(change_screen_mission)
		], "."),

		("enter_f4",
		[],
		"{!}Field 4",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_field_4"),
			(change_screen_mission)
		], "."),

		("enter_f5",
		[],
		"{!}Field 5",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "scn_field_5"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("dhorak_keep", 0, "You enter the Dhorak Keep",
	"none",
	[],
	[
		("enter",
		[],
		"Enter.",
		[
			(set_jump_mission, "mt_town_center"),
			(jump_to_scene, "scn_dhorak_keep"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("join_siege_outside", mnf_scale_picture, "{s1} has come under siege by {s2}.",
	"none",
	[
		(str_store_party_name, 1, "$g_encountered_party"),
		(str_store_party_name, 2, "$g_encountered_party_2"),
		(try_begin),
			(eq, 1, "$character_gender"),
			(set_background_mesh, "mesh_pic_siege_sighted_fem"),
		(else_try),
			(set_background_mesh, "mesh_pic_siege_sighted"),
		(try_end),
		(eq, "$freelancer_state", 1),
		(try_begin),
			(store_faction_of_troop, ":faction_of_troop_enlisted_lord", "$enlisted_lord"),
			(store_relation, ":relation_faction_of_troop_enlisted_lord_g_encountered_party_faction", ":faction_of_troop_enlisted_lord", "$g_encountered_party_faction"),
			(this_or_next|eq, ":faction_of_troop_enlisted_lord", "$g_encountered_party_faction"),
			(ge, ":relation_faction_of_troop_enlisted_lord_g_encountered_party_faction", 0),
			(assign, "$g_defending_against_siege", 1),
			(assign, "$g_siege_first_encounter", 1),
			(jump_to_menu, "mnu_siege_started_defender"),
		(else_try),
			(jump_to_menu, "mnu_besiegers_camp_with_allies"),
		(try_end)
	],
	[
		("approach_besiegers",
		[
			(store_faction_of_party, ":faction_of_party_g_encountered_party_2", "$g_encountered_party_2"),
			(store_relation, ":relation_faction_of_party_g_encountered_party_2_player_supporters_faction", ":faction_of_party_g_encountered_party_2", "fac_player_supporters_faction"),
			(ge, ":relation_faction_of_party_g_encountered_party_2_player_supporters_faction", 0),
			(store_faction_of_party, ":faction_of_party_g_encountered_party_2", "$g_encountered_party"),
			(store_relation, ":relation_faction_of_party_g_encountered_party_2_player_supporters_faction", ":faction_of_party_g_encountered_party_2", "fac_player_supporters_faction"),
			(lt, ":relation_faction_of_party_g_encountered_party_2_player_supporters_faction", 0)
		],
		"Approach the siege camp.",
		[
			(jump_to_menu, "mnu_besiegers_camp_with_allies")
		], "."),

		("pass_through_siege",
		[
			(store_faction_of_party, ":faction_of_party_g_encountered_party", "$g_encountered_party"),
			(store_relation, ":relation_faction_of_party_g_encountered_party_player_supporters_faction", ":faction_of_party_g_encountered_party", "fac_player_supporters_faction"),
			(ge, ":relation_faction_of_party_g_encountered_party_player_supporters_faction", 0)
		],
		"Pass through the siege lines and enter {s1}.",
		[
			(jump_to_menu, "mnu_cut_siege_without_fight")
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], ".")
	]
	),

	("cut_siege_without_fight", 0, "The besiegers let you approach the gates without challenge.",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(try_begin),
				(this_or_next|eq, "$g_encountered_party_faction", "fac_player_supporters_faction"),
				(eq, "$g_encountered_party_faction", "$players_kingdom"),
				(jump_to_menu, "mnu_town"),
			(else_try),
				(jump_to_menu, "mnu_castle_outside"),
			(try_end)
		], ".")
	]
	),

	("besiegers_camp_with_allies", mnf_enable_hot_keys, "{s1} remains under siege. The banners of {s2} fly above the camp of the besiegers, where you and your men are welcomed. {s4}",
	"none",
	[
		(str_clear, 4),
		(str_store_party_name, 1, "$g_encountered_party"),
		(str_store_party_name, 2, "$g_encountered_party_2"),
		(assign, "$g_enemy_party", "$g_encountered_party"),
		(assign, "$g_ally_party", "$g_encountered_party_2"),
		(select_enemy, 0),
		(call_script, "script_encounter_calculate_fit"),
		(try_begin),
			(eq, "$new_encounter", 1),
			(assign, "$new_encounter", 0),
			(call_script, "script_encounter_init_variables"),
		(try_end),
		(try_begin),
			(eq, "$g_leave_encounter", 1),
			(change_screen_return),
		(else_try),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$g_battle_result", 1),
				(assign, ":value", 1),
			(else_try),
				(le, "$g_enemy_fit_for_battle", 0),
				(ge, "$g_friend_fit_for_battle", 1),
				(assign, ":value", 1),
			(try_end),
			(this_or_next|eq, ":value", 1),
			(eq, "$g_enemy_surrenders", 1),
			(call_script, "script_party_wound_all_members", "$g_enemy_party"),
			(leave_encounter),
			(change_screen_return),
		(else_try),
			(call_script, "script_party_count_members_with_full_health", "p_collective_friends"),
			(assign, ":var_2", reg0),
			(eq, "$g_battle_result", -1),
			(eq, ":var_2", 0),
			(leave_encounter),
			(change_screen_return),
		(try_end),
		(str_clear, 4),
		(neq, "$freelancer_state", 1),
		(str_store_troop_name, 7, "$g_player_troop"),
		(set_player_troop, "$g_player_troop"),
		(str_store_string, 4, "@^^Current Commander: {s7}"),
		(try_begin),
			(party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
			(str_store_string, 4, "@{s4}^^The troops you selected are ready to join you in battle."),
		(else_try),
			(str_store_string, 4, "@{s4}^^Your captains will deal with troop assignments."),
		(try_end),
		(try_begin),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
			(str_store_string, 4, "@{s4}^^Your orders have been sent to your captains."),
		(else_try),
			(str_store_string, 4, "@{s4}^^There is no tactical plan in place."),
		(try_end)
	],
	[
		("talk_to_siege_commander",
		[],
		"Request a meeting with the commander.",
		[
			(call_script, "script_get_meeting_scene"),
			(assign, ":var_1", reg0),
			(modify_visitors_at_site, ":var_1"),
			(reset_visitors),
			(set_visitor, 0, "trp_player"),
			(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_2_0", "$g_encountered_party_2", 0),
			(party_stack_get_troop_dna, ":party_stack_troop_dna_g_encountered_party_2_0", "$g_encountered_party_2", 0),
			(set_visitor, 17, ":party_stack_troop_id_g_encountered_party_2_0", ":party_stack_troop_dna_g_encountered_party_2_0"),
			(set_jump_mission, "mt_conversation_encounter"),
			(jump_to_scene, ":var_1"),
			(assign, "$talk_context", 4),
			(change_screen_map_conversation, ":party_stack_troop_id_g_encountered_party_2_0")
		], "."),

		("change_commander_besiegers_camp_with_allies",
		[
			(neq, "$freelancer_state", 1),
			(set_player_troop, "$g_player_troop")
		],
		"Change commander.",
		[
			(start_presentation, "prsnt_change_commander")
		], "."),

		("deployment",
		[
			(neq, "$freelancer_state", 1),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0),
			(party_get_skill_level, ":skill_level_main_party_15", "p_main_party", 15),
			(ge, ":skill_level_main_party_15", 2),
			(call_script, "script_party_count_fit_for_battle", "p_collective_friends"),
			(assign, ":var_2", reg0),
			(call_script, "script_party_count_fit_for_battle", "p_collective_enemy"),
			(assign, ":var_3", reg0),
			(store_add, ":value", ":var_2", ":var_3"),
			(party_get_slot, ":main_party_center_accumulated_tariffs", "p_main_party", slot_center_accumulated_tariffs),
			(gt, ":value", ":main_party_center_accumulated_tariffs")
		],
		"Choose who will join you in battle.",
		[
			(assign, "$g_next_menu", "mnu_besiegers_camp_with_allies"),
			(start_presentation, "prsnt_prebattle_custom_deployment")
		], "."),

		("orders",
		[
			(neq, "$freelancer_state", 1),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0),
			(party_get_skill_level, ":skill_level_main_party_15", "p_main_party", 15),
			(ge, ":skill_level_main_party_15", 2)
		],
		"Plan your battle with the enemy.",
		[
			(assign, "$g_next_menu", "mnu_besiegers_camp_with_allies"),
			(start_presentation, "prsnt_prebattle_orders")
		], "."),

		("do_orders",
		[
			(neq, "$freelancer_state", 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1)
		],
		"Enough planning. To battle!",
		[
			(party_set_slot, "p_main_party", slot_center_shipyards, 0),
			(assign, "$g_joined_battle_to_help", 1),
			(party_set_next_battle_simulation_time, "$g_encountered_party", -1),
			(try_begin),
				(check_quest_active, "qst_join_siege_with_army"),
				(quest_slot_eq, "qst_join_siege_with_army", slot_quest_target_center, "$g_encountered_party"),
				(add_xp_as_reward, 250),
				(call_script, "script_end_quest", "qst_join_siege_with_army"),
				(faction_get_slot, ":players_kingdom_marshall", "$players_kingdom", slot_faction_marshall),
				(str_store_troop_name_link, 9, ":players_kingdom_marshall"),
				(setup_quest_text, "qst_follow_army"),
				(call_script, "script_dplmc_store_troop_is_female", ":players_kingdom_marshall"),
				(str_store_string, 2, "@{s9} wants you to follow {reg0?her:his} army until further notice."),
				(call_script, "script_start_quest", "qst_follow_army", ":players_kingdom_marshall"),
				(assign, "$g_player_follow_army_warnings", 0),
			(try_end),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(party_get_slot, ":g_encountered_party_town_walls", "$g_encountered_party", slot_town_walls),
			(else_try),
				(party_get_slot, ":g_encountered_party_town_walls", "$g_encountered_party", slot_town_center),
			(try_end),
			(call_script, "script_calculate_battle_advantage"),
			(val_mul, reg0, 2),
			(val_div, reg0, 3),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_center_siege_with_belfry, 1),
				(set_jump_mission, "mt_castle_attack_walls_belfry"),
			(else_try),
				(set_jump_mission, "mt_castle_attack_walls_ladder"),
			(try_end),
			(jump_to_scene, ":g_encountered_party_town_walls"),
			(assign, "$g_siege_final_menu", "mnu_besiegers_camp_with_allies"),
			(assign, "$g_siege_battle_state", 1),
			(assign, "$g_next_menu", "mnu_castle_besiege_inner_battle"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("clear_orders",
		[
			(neq, "$freelancer_state", 1),
			(this_or_next|party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1)
		],
		"Re-assess the situation.",
		[
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
				(party_set_slot, "p_main_party", slot_center_accumulated_rents, 0),
			(try_end),
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
				(party_set_slot, "p_main_party", slot_center_shipyards, 0),
				(party_set_slot, "p_main_party", slot_center_household_gardens, 0),
			(try_end),
			(jump_to_menu, "mnu_besiegers_camp_with_allies")
		], "."),

		("join_siege_with_allies",
		[
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Join the next assault.",
		[
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
				(party_set_slot, "p_main_party", slot_center_shipyards, 0),
			(try_end),
			(assign, "$g_joined_battle_to_help", 1),
			(party_set_next_battle_simulation_time, "$g_encountered_party", -1),
			(try_begin),
				(check_quest_active, "qst_join_siege_with_army"),
				(quest_slot_eq, "qst_join_siege_with_army", slot_quest_target_center, "$g_encountered_party"),
				(add_xp_as_reward, 250),
				(call_script, "script_end_quest", "qst_join_siege_with_army"),
				(faction_get_slot, ":players_kingdom_marshall", "$players_kingdom", slot_faction_marshall),
				(str_store_troop_name_link, 9, ":players_kingdom_marshall"),
				(setup_quest_text, "qst_follow_army"),
				(call_script, "script_dplmc_store_troop_is_female", ":players_kingdom_marshall"),
				(str_store_string, 2, "@{s9} wants you to follow {reg0?her:his} army until further notice."),
				(call_script, "script_start_quest", "qst_follow_army", ":players_kingdom_marshall"),
				(assign, "$g_player_follow_army_warnings", 0),
			(try_end),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(party_get_slot, ":g_encountered_party_town_walls", "$g_encountered_party", slot_town_walls),
			(else_try),
				(party_get_slot, ":g_encountered_party_town_walls", "$g_encountered_party", slot_town_center),
			(try_end),
			(call_script, "script_calculate_battle_advantage"),
			(val_mul, reg0, 2),
			(val_div, reg0, 3),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_center_siege_with_belfry, 1),
				(set_jump_mission, "mt_castle_attack_walls_belfry"),
			(else_try),
				(set_jump_mission, "mt_castle_attack_walls_ladder"),
			(try_end),
			(jump_to_scene, ":g_encountered_party_town_walls"),
			(assign, "$g_siege_final_menu", "mnu_besiegers_camp_with_allies"),
			(assign, "$g_siege_battle_state", 1),
			(assign, "$g_next_menu", "mnu_castle_besiege_inner_battle"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("join_siege_stay_back",
		[
			(neq, "$freelancer_state", 1),
			(call_script, "script_party_count_members_with_full_health", "p_main_party"),
			(ge, reg0, 3),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Order your soldiers to join the next assault without you.",
		[
			(assign, "$g_joined_battle_to_help", 1),
			(party_set_next_battle_simulation_time, "$g_encountered_party", -1),
			(try_begin),
				(check_quest_active, "qst_join_siege_with_army"),
				(quest_slot_eq, "qst_join_siege_with_army", slot_quest_target_center, "$g_encountered_party"),
				(add_xp_as_reward, 100),
				(call_script, "script_end_quest", "qst_join_siege_with_army"),
				(faction_get_slot, ":players_kingdom_marshall", "$players_kingdom", slot_faction_marshall),
				(str_store_troop_name_link, 9, ":players_kingdom_marshall"),
				(setup_quest_text, "qst_follow_army"),
				(call_script, "script_dplmc_store_troop_is_female", ":players_kingdom_marshall"),
				(str_store_string, 2, "@{s9} wants you to follow {reg0?her:his} army until further notice."),
				(call_script, "script_start_quest", "qst_follow_army", ":players_kingdom_marshall"),
				(assign, "$g_player_follow_army_warnings", 0),
			(try_end),
			(jump_to_menu, "mnu_castle_attack_walls_with_allies_simulate")
		], "."),

		("leave",
		[
			(neq, "$freelancer_state", 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Leave.",
		[
			(leave_encounter),
			(change_screen_return)
		], "."),

		("join_wounded",
		[
			(eq, "$freelancer_state", 1),
			(troop_is_wounded, "trp_player")
		],
		"You are too wounded to fight.",
		[
			(leave_encounter),
			(change_screen_map)
		], ".")
	]
	),

	("castle_outside", mnf_scale_picture, "You are outside {s2}.{s11} {s3} {s4}",
	"none",
	[
		(assign, "$g_enemy_party", "$g_encountered_party"),
		(assign, "$g_ally_party", -1),
		(str_store_party_name, 2, "$g_encountered_party"),
		(call_script, "script_encounter_calculate_fit"),
		(assign, "$all_doors_locked", 1),
		(assign, "$current_town", "$g_encountered_party"),
		(try_begin),
			(eq, "$new_encounter", 1),
			(assign, "$new_encounter", 0),
			(call_script, "script_let_nearby_parties_join_current_battle", 1, 0),
			(call_script, "script_encounter_init_variables"),
			(assign, "$entry_to_town_forbidden", 0),
			(assign, "$sneaked_into_town", 0),
			(assign, "$town_entered", 0),
			(assign, "$encountered_party_hostile", 0),
			(assign, "$encountered_party_friendly", 0),
			(try_begin),
				(gt, "$g_player_besiege_town", 0),
				(neq, "$g_player_besiege_town", "$g_encountered_party"),
				(party_slot_eq, "$g_player_besiege_town", slot_center_is_besieged_by, "p_main_party"),
				(call_script, "script_lift_siege", "$g_player_besiege_town", 0),
				(assign, "$g_player_besiege_town", -1),
			(try_end),
			(try_begin),
				(lt, "$g_encountered_party_relation", 0),
				(assign, "$encountered_party_hostile", 1),
				(assign, "$entry_to_town_forbidden", 1),
			(try_end),
			(try_begin),
				(troop_get_slot, ":troop_trees_859", "$troop_trees", 859),
				(party_slot_eq, "$g_encountered_party", slot_village_infested_by_bandits, ":troop_trees_859"),
				(assign, "$encountered_party_hostile", 1),
				(assign, "$entry_to_town_forbidden", 1),
			(try_end),
			(assign, "$cant_sneak_into_town", 0),
			(try_begin),
				(eq, "$current_town", "$last_sneak_attempt_town"),
				(store_current_hours, reg2),
				(val_sub, reg2, "$last_sneak_attempt_time"),
				(lt, reg2, 12),
				(assign, "$cant_sneak_into_town", 1),
			(try_end),
		(else_try),
			(eq, "$g_leave_encounter", 1),
			(change_screen_return),
		(try_end),
		(str_clear, 4),
		(try_begin),
			(eq, "$entry_to_town_forbidden", 1),
			(try_begin),
				(eq, "$cant_sneak_into_town", 1),
				(str_store_string, 4, "str_sneaking_to_town_impossible"),
			(else_try),
				(str_store_string, 4, "str_entrance_to_town_forbidden"),
			(try_end),
		(try_end),
		(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
		(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
		(str_store_faction_name, 9, ":faction_of_party_current_town"),
		(try_begin),
			(ge, ":current_town_town_lord", 0),
			(str_store_troop_name, 8, ":current_town_town_lord"),
			(str_store_string, 7, "@{s8} of {s9}"),
		(try_end),
		(assign, ":var_4", reg0),
		(assign, ":var_5", reg4),
		(assign, reg0, 0),
		(assign, reg4, 0),
		(try_begin),
			(lt, ":current_town_town_lord", 1),
		(else_try),
			(call_script, "script_troop_get_family_relation_to_troop", ":current_town_town_lord", "trp_player"),
			(ge, reg0, 1),
		(else_try),
			(eq, ":faction_of_party_current_town", "$players_kingdom"),
			(is_between, ":faction_of_party_current_town", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(faction_slot_eq, ":faction_of_party_current_town", slot_faction_leader, ":current_town_town_lord"),
			(str_store_string, 11, "@liege"),
			(assign, reg0, 1),
		(else_try),
			(eq, ":faction_of_party_current_town", "$players_oath_renounced_against_kingdom"),
			(is_between, ":faction_of_party_current_town", "fac_kingdom_1", "fac_kingdoms_end"),
			(faction_slot_eq, ":faction_of_party_current_town", slot_faction_leader, ":current_town_town_lord"),
			(str_store_string, 11, "@former liege"),
			(assign, reg0, 1),
		(else_try),
			(this_or_next|neg|troop_is_hero, ":current_town_town_lord"),
			(troop_slot_eq, ":current_town_town_lord", slot_troop_met, 0),
		(else_try),
			(call_script, "script_dplmc_is_affiliated_family_member", ":current_town_town_lord"),
			(ge, reg0, 1),
			(try_begin),
				(ge, "$g_encountered_party_relation", 0),
				(str_store_string, 11, "str_dplmc_ally"),
			(else_try),
				(str_store_string, 11, "@affiliate"),
			(try_end),
		(else_try),
			(call_script, "script_troop_get_player_relation", ":current_town_town_lord"),
			(is_between, ":current_town_town_lord", "trp_npc1", "trp_kingdom_1_lord"),
			(neg|troop_slot_eq, ":current_town_town_lord", slot_troop_playerparty_history, 8),
			(try_begin),
				(ge, "$g_encountered_party_relation", 0),
				(ge, reg0, 50),
				(str_store_string, 11, "str_dplmc_ally"),
			(else_try),
				(ge, "$g_encountered_party_relation", 0),
				(ge, reg0, 20),
				(str_store_string, 11, "str_dplmc_friend"),
			(else_try),
				(str_store_string, 11, "@former companion"),
			(try_end),
			(assign, reg0, 1),
		(else_try),
			(lt, "$g_encountered_party_relation", 0),
			(assign, reg0, 0),
		(else_try),
			(val_div, reg0, 50),
			(ge, reg0, 1),
			(str_store_string, 11, "str_dplmc_friend"),
		(else_try),
			(eq, ":faction_of_party_current_town", "$players_kingdom"),
			(faction_slot_eq, ":faction_of_party_current_town", slot_faction_marshall, ":current_town_town_lord"),
			(str_store_string, 11, "@marshall"),
		(else_try),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", ":faction_of_party_current_town"),
			(val_add, reg0, 1),
			(val_sub, reg0, 50),
			(ge, reg0, 1),
			(str_store_string, 11, "@vassal"),
		(else_try),
			(assign, reg0, 0),
		(try_end),
		(try_begin),
			(party_slot_eq, "$current_town", slot_party_type, 2),
			(try_begin),
				(eq, ":current_town_town_lord", "trp_player"),
				(str_store_string, 11, "@ Your own banner flies over the castle gate."),
			(else_try),
				(ge, reg0, 1),
				(str_store_string, 11, "@ You see the banner of your {s11} {s7} over the castle gate."),
			(else_try),
				(ge, ":current_town_town_lord", 0),
				(str_store_string, 11, "@ You see the banner of {s7} over the castle gate."),
			(else_try),
				(is_between, ":faction_of_party_current_town", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(str_store_string, 11, "str__this_castle_is_temporarily_under_royal_control"),
			(else_try),
				(str_store_string, 11, "str__this_castle_does_not_seem_to_be_under_anyones_control"),
			(try_end),
		(else_try),
			(try_begin),
				(eq, ":current_town_town_lord", "trp_player"),
				(str_store_string, 11, "@ Your own banner flies over the town gates."),
			(else_try),
				(ge, reg0, 1),
				(str_store_string, 11, "@ You see the banner of your {s11} {s7} over the town gates."),
			(else_try),
				(ge, ":current_town_town_lord", 0),
				(str_store_string, 11, "@ You see the banner of {s7} over the town gates."),
			(else_try),
				(is_between, ":faction_of_party_current_town", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(str_store_string, 11, "str__this_town_is_temporarily_under_royal_control"),
			(else_try),
				(str_store_string, 11, "str__the_townspeople_seem_to_have_declared_their_independence"),
			(try_end),
		(try_end),
		(party_get_num_companions, reg7, "p_collective_enemy"),
		(assign, "$castle_undefended", 0),
		(str_clear, 3),
		(try_begin),
			(eq, reg7, 0),
			(assign, "$castle_undefended", 1),
			(str_store_string, 3, "str_castle_is_abondened"),
		(else_try),
			(troop_get_slot, ":troop_trees_859", "$troop_trees", 859),
			(party_slot_eq, "$g_encountered_party", slot_village_infested_by_bandits, ":troop_trees_859"),
			(str_store_string, 3, "str_dplmc_place_is_occupied_by_insurgents"),
		(else_try),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$g_encountered_party_faction", "$players_kingdom"),
				(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
				(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
				(ge, reg0, 50),
				(assign, ":value", 1),
			(try_end),
			(this_or_next|eq, ":value", 1),
			(eq, "$g_encountered_party_faction", "fac_player_supporters_faction"),
			(str_store_string, 3, "str_place_is_occupied_by_player"),
		(else_try),
			(lt, "$g_encountered_party_relation", 0),
			(str_store_string, 3, "str_place_is_occupied_by_enemy"),
		(else_try),
		(try_end),
		(assign, reg0, ":var_4"),
		(assign, reg4, ":var_5"),
		(try_begin),
			(eq, "$g_leave_town_outside", 1),
			(assign, "$g_leave_town_outside", 0),
			(assign, "$g_permitted_to_center", 0),
			(change_screen_return),
		(else_try),
			(check_quest_active, "qst_escort_lady"),
			(quest_slot_eq, "qst_escort_lady", slot_quest_target_center, "$g_encountered_party"),
			(quest_get_slot, ":escort_lady_object_troop", "qst_escort_lady", slot_quest_object_troop),
			(call_script, "script_get_meeting_scene"),
			(assign, ":value_2", reg0),
			(modify_visitors_at_site, ":value_2"),
			(reset_visitors),
			(set_visitor, 0, "trp_player"),
			(set_visitor, 17, ":escort_lady_object_troop"),
			(set_jump_mission, "mt_conversation_encounter"),
			(jump_to_scene, ":value_2"),
			(assign, "$talk_context", 10),
			(change_screen_map_conversation, ":escort_lady_object_troop"),
		(else_try),
			(check_quest_active, "qst_kidnapped_girl"),
			(quest_slot_eq, "qst_kidnapped_girl", slot_quest_giver_center, "$g_encountered_party"),
			(quest_slot_eq, "qst_kidnapped_girl", slot_quest_current_state, 3),
			(call_script, "script_get_meeting_scene"),
			(assign, ":value_2", reg0),
			(modify_visitors_at_site, ":value_2"),
			(reset_visitors),
			(set_visitor, 0, "trp_player"),
			(set_visitor, 17, "trp_kidnapped_girl"),
			(set_jump_mission, "mt_conversation_encounter"),
			(jump_to_scene, ":value_2"),
			(assign, "$talk_context", 10),
			(change_screen_map_conversation, "trp_kidnapped_girl"),
		(else_try),
			(eq, "$g_town_visit_after_rest", 1),
			(assign, "$g_town_visit_after_rest", 0),
			(jump_to_menu, "mnu_town"),
		(else_try),
			(troop_get_slot, ":troop_trees_859", "$troop_trees", 859),
			(party_slot_eq, "$g_encountered_party", slot_village_infested_by_bandits, ":troop_trees_859"),
			(try_begin),
				(eq, "$g_player_besiege_town", "$g_encountered_party"),
				(jump_to_menu, "mnu_castle_besiege"),
			(try_end),
		(else_try),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 2),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$g_encountered_party_faction", "$players_kingdom"),
				(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
				(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
				(ge, reg0, 50),
				(assign, ":value", 1),
			(try_end),
			(this_or_next|eq, ":value", 1),
			(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_lord, "trp_player"),
			(faction_slot_eq, "$g_encountered_party_faction", slot_faction_leader, "trp_player"),
			(jump_to_menu, "mnu_enter_your_own_castle"),
		(else_try),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 2),
			(ge, "$g_encountered_party_relation", 0),
			(this_or_next|eq, "$castle_undefended", 1),
			(this_or_next|eq, "$g_permitted_to_center", 1),
			(eq, "$g_encountered_party_faction", "$players_kingdom"),
			(jump_to_menu, "mnu_town"),
		(else_try),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
			(ge, "$g_encountered_party_relation", 0),
			(jump_to_menu, "mnu_town"),
		(else_try),
			(eq, "$g_player_besiege_town", "$g_encountered_party"),
			(jump_to_menu, "mnu_castle_besiege"),
		(try_end),
		(try_begin),
			(troop_get_slot, ":troop_trees_859", "$troop_trees", 859),
			(party_slot_eq, "$g_encountered_party", slot_village_infested_by_bandits, ":troop_trees_859"),
			(set_background_mesh, "mesh_pic_townriot"),
		(else_try),
			(call_script, "script_set_town_picture"),
		(try_end)
	],
	[
		("approach_gates",
		[
			(this_or_next|eq, "$entry_to_town_forbidden", 1),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 2)
		],
		"Approach the gates and hail the guard.",
		[
			(jump_to_menu, "mnu_castle_guard")
		], "."),

		("town_sneak",
		[
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(str_store_string, 7, "str_town"),
			(else_try),
				(str_store_string, 7, "str_castle"),
			(try_end),
			(eq, "$entry_to_town_forbidden", 1),
			(eq, "$cant_sneak_into_town", 0)
		],
		"Disguise yourself and try to sneak into the {s7}",
		[
			(faction_get_slot, ":g_encountered_party_faction_player_alarm", "$g_encountered_party_faction", slot_faction_player_alarm),
			(party_get_num_companions, ":num_companions_main_party", "p_main_party"),
			(party_get_num_prisoners, ":num_prisoners_main_party", "p_main_party"),
			(val_add, ":num_companions_main_party", ":num_prisoners_main_party"),
			(val_mul, ":num_companions_main_party", 2),
			(val_div, ":num_companions_main_party", 3),
			(store_add, ":value", ":g_encountered_party_faction_player_alarm", ":num_companions_main_party"),
			(store_random_in_range, ":random_in_range_0_100", 0, 100),
			(try_begin),
				(this_or_next|ge, ":random_in_range_0_100", ":value"),
				(eq, "$g_last_defeated_bandits_town", "$g_encountered_party"),
				(assign, "$g_last_defeated_bandits_town", 0),
				(assign, "$sneaked_into_town", 1),
				(assign, "$town_entered", 1),
				(jump_to_menu, "mnu_sneak_into_town_suceeded"),
				(assign, "$g_mt_mode", 1),
			(else_try),
				(jump_to_menu, "mnu_sneak_into_town_caught"),
			(try_end)
		], "."),

		("dplmc_riot_start_siege",
		[
			(party_slot_eq, "$g_encountered_party", slot_center_is_besieged_by, -1),
			(troop_get_slot, ":troop_trees_859", "$troop_trees", 859),
			(party_slot_eq, "$g_encountered_party", slot_village_infested_by_bandits, ":troop_trees_859"),
			(lt, "$g_encountered_party_2", 1),
			(call_script, "script_party_count_fit_for_battle", "p_main_party"),
			(gt, reg0, 5),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(assign, reg6, 1),
			(else_try),
				(assign, reg6, 0),
			(try_end)
		],
		"Besiege the {reg6?town:castle} to counter the insurgency.",
		[
			(assign, "$g_player_besiege_town", "$g_encountered_party"),
			(jump_to_menu, "mnu_castle_besiege")
		], "."),

		("dplmc_riot_negotiate",
		[
			(party_slot_eq, "$g_encountered_party", slot_center_is_besieged_by, -1),
			(troop_get_slot, ":troop_trees_859", "$troop_trees", 859),
			(party_slot_eq, "$g_encountered_party", slot_village_infested_by_bandits, ":troop_trees_859"),
			(lt, "$g_encountered_party_2", 1),
			(call_script, "script_party_count_fit_for_battle", "p_main_party"),
			(gt, reg0, 5),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(assign, reg6, 1),
			(else_try),
				(assign, reg6, 0),
			(try_end)
		],
		"Begin negotiations.",
		[
			(jump_to_menu, "mnu_dplmc_riot_negotiate")
		], "."),

		("castle_start_siege",
		[
			(troop_get_slot, ":troop_trees_859", "$troop_trees", 859),
			(neg|party_slot_eq, "$g_encountered_party", slot_village_infested_by_bandits, ":troop_trees_859"),
			(this_or_next|party_slot_eq, "$g_encountered_party", slot_center_is_besieged_by, -1),
			(party_slot_eq, "$g_encountered_party", slot_center_is_besieged_by, "p_main_party"),
			(store_relation, ":relation_g_encountered_party_faction_player_supporters_faction", "$g_encountered_party_faction", "fac_player_supporters_faction"),
			(lt, ":relation_g_encountered_party_faction_player_supporters_faction", 1),
			(lt, "$g_encountered_party_2", 1),
			(call_script, "script_party_count_fit_for_battle", "p_main_party"),
			(gt, reg0, 5),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(assign, reg6, 1),
			(else_try),
				(assign, reg6, 0),
			(try_end)
		],
		"Besiege the {reg6?town:castle}.",
		[
			(assign, "$g_player_besiege_town", "$g_encountered_party"),
			(store_relation, ":relation_player_supporters_faction_g_encountered_party_faction", "fac_player_supporters_faction", "$g_encountered_party_faction"),
			(val_min, ":relation_player_supporters_faction_g_encountered_party_faction", -40),
			(call_script, "script_set_player_relation_with_faction", "$g_encountered_party_faction", ":relation_player_supporters_faction_g_encountered_party_faction"),
			(call_script, "script_update_all_notes"),
			(jump_to_menu, "mnu_castle_besiege")
		], "."),

		("cheat_castle_start_siege",
		[
			(eq, "$cheat_mode", 1),
			(this_or_next|party_slot_eq, "$g_encountered_party", slot_center_is_besieged_by, -1),
			(party_slot_eq, "$g_encountered_party", slot_center_is_besieged_by, "p_main_party"),
			(store_relation, ":relation_g_encountered_party_faction_player_supporters_faction", "$g_encountered_party_faction", "fac_player_supporters_faction"),
			(ge, ":relation_g_encountered_party_faction_player_supporters_faction", 0),
			(lt, "$g_encountered_party_2", 1),
			(call_script, "script_party_count_fit_for_battle", "p_main_party"),
			(gt, reg0, 1),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(assign, reg6, 1),
			(else_try),
				(assign, reg6, 0),
			(try_end)
		],
		"{!}CHEAT: Besiege the {reg6?town:castle}...",
		[
			(assign, "$g_player_besiege_town", "$g_encountered_party"),
			(jump_to_menu, "mnu_castle_besiege")
		], "."),

		("castle_leave",
		[],
		"Leave.",
		[
			(change_screen_return, 0)
		], "."),

		("castle_cheat_interior",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! Interior.",
		[
			(set_jump_mission, "mt_ai_training"),
			(party_get_slot, ":current_town_town_castle", "$current_town", slot_town_castle),
			(jump_to_scene, ":current_town_town_castle"),
			(change_screen_mission)
		], "."),

		("castle_cheat_exterior",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! Exterior.",
		[
			(set_jump_mission, "mt_ai_training"),
			(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
			(jump_to_scene, ":current_town_town_center"),
			(change_screen_mission)
		], "."),

		("castle_cheat_town_walls",
		[
			(eq, "$cheat_mode", 1),
			(party_slot_eq, "$current_town", slot_party_type, 3)
		],
		"{!}CHEAT! Town Walls.",
		[
			(party_get_slot, ":current_town_town_walls", "$current_town", slot_town_walls),
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, ":current_town_town_walls"),
			(change_screen_mission)
		], ".")
	]
	),

	("castle_guard", mnf_scale_picture, "You approach the gate. The men on the walls watch you closely.",
	"none",
	[
		(call_script, "script_set_town_picture")
	],
	[
		("request_shelter",
		[
			(party_slot_eq, "$g_encountered_party", slot_party_type, 2),
			(ge, "$g_encountered_party_relation", 0)
		],
		"Request entry to the castle.",
		[
			(party_get_slot, ":g_encountered_party_town_lord", "$g_encountered_party", slot_town_lord),
			(try_begin),
				(lt, ":g_encountered_party_town_lord", 0),
				(jump_to_menu, "mnu_castle_entry_granted"),
			(else_try),
				(call_script, "script_troop_get_player_relation", ":g_encountered_party_town_lord"),
				(assign, ":var_2", reg0),
				(try_begin),
					(gt, ":var_2", -15),
					(jump_to_menu, "mnu_castle_entry_granted"),
				(else_try),
					(jump_to_menu, "mnu_castle_entry_denied"),
				(try_end),
			(try_end)
		], "."),

		("request_meeting_commander",
		[],
		"Request a meeting with someone.",
		[
			(jump_to_menu, "mnu_castle_meeting")
		], "."),

		("guard_leave",
		[],
		"Leave.",
		[
			(change_screen_return, 0)
		], ".")
	]
	),

	("castle_entry_granted", mnf_scale_picture, "After a brief wait, the guards open the gates for you and allow your party inside.",
	"none",
	[
		(call_script, "script_set_town_picture")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("castle_entry_denied", mnf_scale_picture, "The lord of this castle has forbidden you from coming inside these walls, and the guard sergeant informs you that his men will fire if you attempt to come any closer.",
	"none",
	[
		(call_script, "script_set_town_picture")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_castle_guard")
		], ".")
	]
	),

	("castle_meeting", mnf_scale_picture, "With whom do you want to meet?",
	"none",
	[
		(assign, "$num_castle_meeting_troops", 0),
		(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(call_script, "script_get_troop_attached_party", ":troop"),
			(eq, "$g_encountered_party", reg0),
			(troop_set_slot, "trp_temp_array_a", "$num_castle_meeting_troops", ":troop"),
			(val_add, "$num_castle_meeting_troops", 1),
		(try_end),
		(call_script, "script_set_town_picture")
	],
	[
		("guard_meet_s5",
		[
			(gt, "$num_castle_meeting_troops", 0),
			(troop_get_slot, ":temp_array_a_relations_begin", "trp_temp_array_a", slot_troop_relations_begin),
			(str_store_troop_name, 5, ":temp_array_a_relations_begin")
		],
		"{s5}.",
		[
			(troop_get_slot, "$castle_meeting_selected_troop", "trp_temp_array_a", slot_troop_relations_begin),
			(jump_to_menu, "mnu_castle_meeting_selected")
		], "."),

		("guard_meet_s5",
		[
			(gt, "$num_castle_meeting_troops", 1),
			(troop_get_slot, ":temp_array_a_1", "trp_temp_array_a", 1),
			(str_store_troop_name, 5, ":temp_array_a_1")
		],
		"{s5}.",
		[
			(troop_get_slot, "$castle_meeting_selected_troop", "trp_temp_array_a", 1),
			(jump_to_menu, "mnu_castle_meeting_selected")
		], "."),

		("guard_meet_s5",
		[
			(gt, "$num_castle_meeting_troops", 2),
			(troop_get_slot, ":temp_array_a_occupation", "trp_temp_array_a", slot_troop_occupation),
			(str_store_troop_name, 5, ":temp_array_a_occupation")
		],
		"{s5}.",
		[
			(troop_get_slot, "$castle_meeting_selected_troop", "trp_temp_array_a", slot_troop_occupation),
			(jump_to_menu, "mnu_castle_meeting_selected")
		], "."),

		("guard_meet_s5",
		[
			(gt, "$num_castle_meeting_troops", 3),
			(troop_get_slot, ":temp_array_a_state", "trp_temp_array_a", slot_troop_state),
			(str_store_troop_name, 5, ":temp_array_a_state")
		],
		"{s5}.",
		[
			(troop_get_slot, "$castle_meeting_selected_troop", "trp_temp_array_a", slot_troop_state),
			(jump_to_menu, "mnu_castle_meeting_selected")
		], "."),

		("guard_meet_s5",
		[
			(gt, "$num_castle_meeting_troops", 4),
			(troop_get_slot, ":temp_array_a_last_talk_time", "trp_temp_array_a", slot_troop_last_talk_time),
			(str_store_troop_name, 5, ":temp_array_a_last_talk_time")
		],
		"{s5}.",
		[
			(troop_get_slot, "$castle_meeting_selected_troop", "trp_temp_array_a", slot_troop_last_talk_time),
			(jump_to_menu, "mnu_castle_meeting_selected")
		], "."),

		("guard_meet_s5",
		[
			(gt, "$num_castle_meeting_troops", 5),
			(troop_get_slot, ":temp_array_a_met", "trp_temp_array_a", slot_troop_met),
			(str_store_troop_name, 5, ":temp_array_a_met")
		],
		"{s5}.",
		[
			(troop_get_slot, "$castle_meeting_selected_troop", "trp_temp_array_a", slot_troop_met),
			(jump_to_menu, "mnu_castle_meeting_selected")
		], "."),

		("guard_meet_s5",
		[
			(gt, "$num_castle_meeting_troops", 6),
			(troop_get_slot, ":temp_array_a_party_template", "trp_temp_array_a", slot_troop_party_template),
			(str_store_troop_name, 5, ":temp_array_a_party_template")
		],
		"{s5}.",
		[
			(troop_get_slot, "$castle_meeting_selected_troop", "trp_temp_array_a", slot_troop_party_template),
			(jump_to_menu, "mnu_castle_meeting_selected")
		], "."),

		("guard_meet_s5",
		[
			(gt, "$num_castle_meeting_troops", 7),
			(troop_get_slot, ":temp_array_a_renown", "trp_temp_array_a", slot_troop_renown),
			(str_store_troop_name, 5, ":temp_array_a_renown")
		],
		"{s5}.",
		[
			(troop_get_slot, "$castle_meeting_selected_troop", "trp_temp_array_a", slot_troop_renown),
			(jump_to_menu, "mnu_castle_meeting_selected")
		], "."),

		("guard_meet_s5",
		[
			(gt, "$num_castle_meeting_troops", 8),
			(troop_get_slot, ":temp_array_a_prisoner_of_party", "trp_temp_array_a", slot_troop_prisoner_of_party),
			(str_store_troop_name, 5, ":temp_array_a_prisoner_of_party")
		],
		"{s5}.",
		[
			(troop_get_slot, "$castle_meeting_selected_troop", "trp_temp_array_a", slot_troop_prisoner_of_party),
			(jump_to_menu, "mnu_castle_meeting_selected")
		], "."),

		("guard_meet_s5",
		[
			(gt, "$num_castle_meeting_troops", 9),
			(troop_get_slot, ":temp_array_a_present_at_event", "trp_temp_array_a", slot_troop_present_at_event),
			(str_store_troop_name, 5, ":temp_array_a_present_at_event")
		],
		"{s5}.",
		[
			(troop_get_slot, "$castle_meeting_selected_troop", "trp_temp_array_a", slot_troop_present_at_event),
			(jump_to_menu, "mnu_castle_meeting_selected")
		], "."),

		("forget_it",
		[],
		"Forget it.",
		[
			(jump_to_menu, "mnu_castle_guard")
		], ".")
	]
	),

	("castle_meeting_selected", 0, "Your request for a meeting is relayed inside, and finally {s6} appears in the courtyard to speak with you.",
	"none",
	[
		(str_store_troop_name, 6, "$castle_meeting_selected_troop")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_castle_outside"),
			(modify_visitors_at_site, "scn_conversation_scene"),
			(reset_visitors),
			(set_visitor, 0, "trp_player"),
			(set_visitor, 17, "$castle_meeting_selected_troop"),
			(set_jump_mission, "mt_conversation_encounter"),
			(jump_to_scene, "scn_conversation_scene"),
			(assign, "$talk_context", 3),
			(change_screen_map_conversation, "$castle_meeting_selected_troop")
		], ".")
	]
	),

	("castle_besiege", mnf_enable_hot_keys|mnf_scale_picture, "You are laying siege to {s1}. {s2} {s3} {s4} ^{s15}",
	"none",
	[
		(str_clear, 4),
		(try_begin),
			(eq, 1, "$character_gender"),
			(set_background_mesh, "mesh_pic_siege_sighted_fem"),
		(else_try),
			(set_background_mesh, "mesh_pic_siege_sighted"),
		(try_end),
		(assign, "$g_siege_force_wait", 0),
		(try_begin),
			(party_slot_eq, "$g_encountered_party", slot_center_is_besieged_by, -1),
			(party_set_slot, "$g_encountered_party", slot_center_is_besieged_by, "p_main_party"),
			(store_current_hours, ":current_hours"),
			(party_set_slot, "$g_encountered_party", slot_center_siege_begin_hours, ":current_hours"),
			(assign, "$g_siege_method", 0),
			(assign, "$g_siege_sallied_out_once", 0),
		(try_end),
		(party_get_slot, ":g_encountered_party_food_store", "$g_encountered_party", slot_party_food_store),
		(call_script, "script_center_get_food_consumption", "$g_encountered_party"),
		(assign, ":var_3", reg0),
		(assign, reg7, ":var_3"),
		(assign, reg8, ":g_encountered_party_food_store"),
		(store_div, reg3, ":g_encountered_party_food_store", ":var_3"),
		(try_begin),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
			(assign, reg6, 1),
		(else_try),
			(assign, reg6, 0),
		(try_end),
		(try_begin),
			(gt, reg3, 0),
			(str_store_string, 2, "@The {reg6?town's:castle's} food stores should last for {reg3} more days."),
		(else_try),
			(str_store_string, 2, "@The {reg6?town's:castle's} food stores have run out and the defenders are starving."),
		(try_end),
		(str_store_string, 3, "str_empty_string"),
		(try_begin),
			(ge, "$g_siege_method", 1),
			(store_current_hours, ":current_hours"),
			(try_begin),
				(lt, ":current_hours", "$g_siege_method_finish_hours"),
				(store_sub, reg9, "$g_siege_method_finish_hours", ":current_hours"),
				(try_begin),
					(eq, "$g_siege_method", 1),
					(str_store_string, 3, "@You're preparing to attack the walls, the work should finish in {reg9} hours."),
				(else_try),
					(eq, "$g_siege_method", 2),
					(str_store_string, 3, "@Your forces are building a siege tower. They estimate another {reg9} hours to complete the build."),
				(try_end),
			(else_try),
				(try_begin),
					(eq, "$g_siege_method", 1),
					(str_store_string, 3, "@You are ready to attack the walls at any time."),
				(else_try),
					(eq, "$g_siege_method", 2),
					(str_store_string, 3, "@The siege tower is built and ready to make an assault."),
				(try_end),
			(try_end),
		(try_end),
		(str_store_string, 15, "str_siege_camp_none"),
		(try_begin),
			(party_slot_eq, "p_main_party", slot_village_market_town, 1),
			(str_store_string, 15, "str_siege_camp_complete"),
		(else_try),
			(party_slot_eq, "p_main_party", slot_village_market_town, -1),
			(str_store_string, 15, "str_siege_camp_incomplete"),
		(try_end),
		(try_begin),
			(eq, "$g_castle_left_to_player", 1),
			(assign, "$g_castle_left_to_player", 0),
			(store_faction_of_party, ":faction_of_party_g_encountered_party", "$g_encountered_party"),
			(party_set_faction, "$g_encountered_party", "fac_neutral"),
			(party_get_num_attached_parties, ":num_attached_parties_l_g_encountered_party", "$g_encountered_party"),
			(try_for_range_backwards, ":var_6", 0, ":num_attached_parties_l_g_encountered_party"),
				(party_get_attached_party_with_rank, ":attached_party_with_rank_g_encountered_party_var_6", "$g_encountered_party", ":var_6"),
				(party_detach, ":attached_party_with_rank_g_encountered_party_var_6"),
				(party_get_slot, ":attached_party_with_rank_g_encountered_party_var_6_type", ":attached_party_with_rank_g_encountered_party_var_6", slot_party_type),
				(eq, ":attached_party_with_rank_g_encountered_party_var_6_type", 13),
				(store_faction_of_party, ":faction_of_party_attached_party_with_rank_g_encountered_party_var_6", ":attached_party_with_rank_g_encountered_party_var_6"),
				(call_script, "script_get_closest_walled_center_of_faction", ":attached_party_with_rank_g_encountered_party_var_6", ":faction_of_party_attached_party_with_rank_g_encountered_party_var_6"),
				(try_begin),
					(gt, reg0, 0),
					(call_script, "script_party_set_ai_state", ":attached_party_with_rank_g_encountered_party_var_6", 7, reg0),
				(else_try),
					(call_script, "script_party_set_ai_state", ":attached_party_with_rank_g_encountered_party_var_6", 4, "$g_encountered_party"),
				(try_end),
			(try_end),
			(call_script, "script_party_remove_all_companions", "$g_encountered_party"),
			(change_screen_return),
			(party_collect_attachments_to_party, "$g_encountered_party", "p_collective_enemy"),
			(call_script, "script_party_copy", "p_encountered_party_backup", "p_collective_enemy"),
			(party_set_faction, "$g_encountered_party", ":faction_of_party_g_encountered_party"),
		(try_end),
		(assign, "$g_enemy_party", "$g_encountered_party"),
		(assign, "$g_ally_party", -1),
		(str_store_party_name, 1, "$g_encountered_party"),
		(call_script, "script_encounter_calculate_fit"),
		(assign, reg11, "$g_enemy_fit_for_battle"),
		(assign, reg10, "$g_friend_fit_for_battle"),
		(try_begin),
			(eq, "$g_leave_encounter", 1),
			(change_screen_return),
		(else_try),
			(troop_get_slot, ":troop_trees_859", "$troop_trees", 859),
			(party_slot_eq, "$g_encountered_party", slot_village_infested_by_bandits, ":troop_trees_859"),
			(call_script, "script_party_count_fit_regulars", "p_collective_enemy"),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$g_battle_result", 1),
				(assign, ":value", 1),
			(else_try),
				(le, "$g_enemy_fit_for_battle", 0),
				(ge, "$g_friend_fit_for_battle", 1),
				(assign, ":value", 1),
			(try_end),
			(this_or_next|eq, ":value", 1),
			(eq, "$g_enemy_surrenders", 1),
			(assign, "$g_next_menu", "mnu_dplmc_town_riot_removed"),
			(jump_to_menu, "mnu_total_victory"),
		(else_try),
			(call_script, "script_party_count_fit_regulars", "p_collective_enemy"),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$g_battle_result", 1),
				(assign, ":value", 1),
			(else_try),
				(le, "$g_enemy_fit_for_battle", 0),
				(ge, "$g_friend_fit_for_battle", 1),
				(assign, ":value", 1),
			(try_end),
			(this_or_next|eq, ":value", 1),
			(eq, "$g_enemy_surrenders", 1),
			(party_set_slot, "p_main_party", slot_village_market_town, 0),
			(assign, "$g_next_menu", "mnu_castle_taken"),
			(jump_to_menu, "mnu_total_victory"),
		(else_try),
			(call_script, "script_party_count_members_with_full_health", "p_main_party"),
			(assign, ":var_12", reg0),
			(eq, "$g_battle_result", -1),
			(eq, ":var_12", 0),
			(assign, "$g_next_menu", "mnu_captivity_start_castle_defeat"),
			(party_set_slot, "p_main_party", slot_village_market_town, 0),
			(jump_to_menu, "mnu_total_defeat"),
		(try_end),
		(try_begin),
			(ge, "$g_siege_method", 1),
			(gt, "$g_friend_fit_for_battle", 3),
			(store_current_hours, ":current_hours"),
			(ge, ":current_hours", "$g_siege_method_finish_hours"),
			(str_store_troop_name, 7, "$g_player_troop"),
			(set_player_troop, "$g_player_troop"),
			(str_store_string, 4, "@^^Current Commander: {s7}"),
		(try_end),
		(try_begin),
			(party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
			(str_store_string, 4, "@{s4}^^The troops you selected are ready to join you in battle."),
		(else_try),
			(str_store_string, 4, "@{s4}^^Your captains will deal with troop assignments."),
		(try_end),
		(try_begin),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
			(str_store_string, 4, "@{s4}^^Your orders have been sent to your captains."),
		(else_try),
			(str_store_string, 4, "@{s4}^^There is no tactical plan in place."),
		(try_end)
	],
	[
		("siege_request_meeting",
		[
			(eq, "$cant_talk_to_enemy", 0)
		],
		"Call for a meeting with the castle commander.",
		[
			(assign, "$cant_talk_to_enemy", 1),
			(assign, "$g_enemy_surrenders", 0),
			(assign, "$g_castle_left_to_player", 0),
			(assign, "$talk_context", 7),
			(party_get_num_attached_parties, ":num_attached_parties_l_g_encountered_party", "$g_encountered_party"),
			(try_begin),
				(gt, ":num_attached_parties_l_g_encountered_party", 0),
				(party_get_attached_party_with_rank, ":attached_party_with_rank_g_encountered_party_0", "$g_encountered_party", 0),
				(call_script, "script_setup_party_meeting", ":attached_party_with_rank_g_encountered_party_0"),
			(else_try),
				(call_script, "script_setup_party_meeting", "$g_encountered_party"),
			(try_end)
		], "."),

		("wait_24_hours",
		[],
		"Wait until tomorrow.",
		[
			(assign, "$auto_besiege_town", "$g_encountered_party"),
			(assign, "$g_siege_force_wait", 1),
			(store_time_of_day, ":time_of_day"),
			(val_add, ":time_of_day", 1),
			(assign, ":var_2", 31),
			(val_sub, ":var_2", ":time_of_day"),
			(val_mod, ":var_2", 24),
			(val_add, ":var_2", 1),
			(rest_for_hours_interactive, ":var_2", 5, 1),
			(assign, "$cant_talk_to_enemy", 0),
			(change_screen_return)
		], "."),

		("siege_camp",
		[
			(party_slot_eq, "p_main_party", slot_village_market_town, 0),
			(player_has_item, "itm_trade_tools"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Entrench your position.",
		[
			(call_script, "script_party_entrench_time"),
			(assign, "$auto_besiege_town", "$g_encountered_party"),
			(assign, "$g_siege_force_wait", 1),
			(assign, ":var_1", reg5),
			(val_add, ":var_1", 2),
			(rest_for_hours_interactive, ":var_1", 5, 1),
			(party_set_slot, "p_main_party", slot_village_market_town, -1),
			(assign, "$cant_talk_to_enemy", 0),
			(change_screen_return)
		], "."),

		("siege_camp_interupted",
		[
			(party_slot_eq, "p_main_party", slot_village_market_town, -1),
			(player_has_item, "itm_trade_tools"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Continue to entrench your position",
		[
			(assign, "$auto_besiege_town", "$g_encountered_party"),
			(assign, "$g_siege_force_wait", 1),
			(rest_for_hours_interactive, 12, 5, 1),
			(assign, "$cant_talk_to_enemy", 0),
			(change_screen_return)
		], "."),

		("siege_camp_inspect",
		[
			(party_slot_eq, "p_main_party", slot_village_market_town, 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Inspect the siege camp.",
		[
			(assign, "$auto_besiege_town", "$g_encountered_party"),
			(assign, "$g_siege_force_wait", 1),
			(call_script, "script_visit_camp")
		], "."),

		("change_commander_castle_besiege",
		[
			(ge, "$g_siege_method", 1),
			(store_current_hours, ":current_hours"),
			(ge, ":current_hours", "$g_siege_method_finish_hours"),
			(set_player_troop, "$g_player_troop")
		],
		"Change commander.",
		[
			(start_presentation, "prsnt_change_commander")
		], "."),

		("deployment",
		[
			(neg|troop_is_wounded, "$g_player_troop"),
			(ge, "$g_siege_method", 1),
			(gt, "$g_friend_fit_for_battle", 3),
			(store_current_hours, ":current_hours"),
			(ge, ":current_hours", "$g_siege_method_finish_hours"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0),
			(party_get_skill_level, ":skill_level_main_party_15", "p_main_party", 15),
			(ge, ":skill_level_main_party_15", 2),
			(call_script, "script_party_count_fit_for_battle", "p_collective_friends"),
			(assign, ":var_3", reg0),
			(call_script, "script_party_count_fit_for_battle", "p_collective_enemy"),
			(assign, ":var_4", reg0),
			(store_add, ":value", ":var_3", ":var_4"),
			(party_get_slot, ":main_party_center_accumulated_tariffs", "p_main_party", slot_center_accumulated_tariffs),
			(gt, ":value", ":main_party_center_accumulated_tariffs")
		],
		"Choose who will join you in battle.",
		[
			(assign, "$g_next_menu", "mnu_castle_besiege"),
			(start_presentation, "prsnt_prebattle_custom_deployment")
		], "."),

		("orders",
		[
			(neg|troop_is_wounded, "$g_player_troop"),
			(ge, "$g_siege_method", 1),
			(gt, "$g_friend_fit_for_battle", 3),
			(store_current_hours, ":current_hours"),
			(ge, ":current_hours", "$g_siege_method_finish_hours"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0),
			(party_get_skill_level, ":skill_level_main_party_15", "p_main_party", 15),
			(ge, ":skill_level_main_party_15", 2)
		],
		"Plan your battle with the enemy.",
		[
			(assign, "$g_next_menu", "mnu_castle_besiege"),
			(start_presentation, "prsnt_prebattle_orders")
		], "."),

		("do_orders",
		[
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1)
		],
		"Enough planning. To battle!",
		[
			(party_set_slot, "p_main_party", slot_center_shipyards, 0),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(party_get_slot, ":g_encountered_party_town_walls", "$g_encountered_party", slot_town_walls),
			(else_try),
				(party_get_slot, ":g_encountered_party_town_walls", "$g_encountered_party", slot_town_center),
			(try_end),
			(call_script, "script_calculate_renown_value"),
			(call_script, "script_calculate_battle_advantage"),
			(assign, ":var_2", reg0),
			(val_mul, ":var_2", 2),
			(val_div, ":var_2", 3),
			(set_battle_advantage, ":var_2"),
			(set_party_battle_mode),
			(assign, "$g_siege_battle_state", 1),
			(assign, ":value", 0),
			(try_begin),
				(le, ":var_2", -4),
				(eq, "$g_siege_sallied_out_once", 0),
				(set_jump_mission, "mt_castle_attack_walls_defenders_sally"),
				(assign, "$g_siege_battle_state", 0),
				(assign, ":value", 1),
			(else_try),
				(party_slot_eq, "$current_town", slot_center_siege_with_belfry, 1),
				(set_jump_mission, "mt_castle_attack_walls_belfry"),
			(else_try),
				(set_jump_mission, "mt_castle_attack_walls_ladder"),
			(try_end),
			(assign, "$cant_talk_to_enemy", 0),
			(assign, "$g_siege_final_menu", "mnu_castle_besiege"),
			(assign, "$g_next_menu", "mnu_castle_besiege_inner_battle"),
			(assign, "$g_siege_method", 0),
			(jump_to_scene, ":g_encountered_party_town_walls"),
			(try_begin),
				(eq, ":value", 1),
				(jump_to_menu, "mnu_siege_attack_meets_sally"),
			(else_try),
				(jump_to_menu, "mnu_battle_debrief"),
				(change_screen_mission),
			(try_end)
		], "."),

		("clear_orders",
		[
			(this_or_next|party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1)
		],
		"Re-assess the situation.",
		[
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
				(party_set_slot, "p_main_party", slot_center_accumulated_rents, 0),
			(try_end),
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
				(party_set_slot, "p_main_party", slot_center_shipyards, 0),
				(party_set_slot, "p_main_party", slot_center_household_gardens, 0),
			(try_end),
			(jump_to_menu, "mnu_castle_besiege")
		], "."),

		("castle_lead_attack",
		[
			(neg|troop_is_wounded, "$g_player_troop"),
			(ge, "$g_siege_method", 1),
			(gt, "$g_friend_fit_for_battle", 3),
			(store_current_hours, ":current_hours"),
			(ge, ":current_hours", "$g_siege_method_finish_hours"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Lead your soldiers in an assault.",
		[
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
				(party_set_slot, "p_main_party", slot_center_shipyards, 0),
			(try_end),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(party_get_slot, ":g_encountered_party_town_walls", "$g_encountered_party", slot_town_walls),
			(else_try),
				(party_get_slot, ":g_encountered_party_town_walls", "$g_encountered_party", slot_town_center),
			(try_end),
			(call_script, "script_calculate_renown_value"),
			(call_script, "script_calculate_battle_advantage"),
			(assign, ":var_2", reg0),
			(val_mul, ":var_2", 2),
			(val_div, ":var_2", 3),
			(set_battle_advantage, ":var_2"),
			(set_party_battle_mode),
			(assign, "$g_siege_battle_state", 1),
			(assign, ":value", 0),
			(try_begin),
				(le, ":var_2", -4),
				(eq, "$g_siege_sallied_out_once", 0),
				(set_jump_mission, "mt_castle_attack_walls_defenders_sally"),
				(assign, "$g_siege_battle_state", 0),
				(assign, ":value", 1),
			(else_try),
				(party_slot_eq, "$current_town", slot_center_siege_with_belfry, 1),
				(set_jump_mission, "mt_castle_attack_walls_belfry"),
			(else_try),
				(set_jump_mission, "mt_castle_attack_walls_ladder"),
			(try_end),
			(assign, "$cant_talk_to_enemy", 0),
			(assign, "$g_siege_final_menu", "mnu_castle_besiege"),
			(assign, "$g_next_menu", "mnu_castle_besiege_inner_battle"),
			(assign, "$g_siege_method", 0),
			(jump_to_scene, ":g_encountered_party_town_walls"),
			(try_begin),
				(eq, ":value", 1),
				(jump_to_menu, "mnu_siege_attack_meets_sally"),
			(else_try),
				(jump_to_menu, "mnu_battle_debrief"),
				(change_screen_mission),
			(try_end)
		], "."),

		("attack_stay_back",
		[
			(ge, "$g_siege_method", 1),
			(gt, "$g_friend_fit_for_battle", 3),
			(store_current_hours, ":current_hours"),
			(ge, ":current_hours", "$g_siege_method_finish_hours"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Order your soldiers to attack while you stay back...",
		[
			(assign, "$cant_talk_to_enemy", 0),
			(jump_to_menu, "mnu_castle_attack_walls_simulate")
		], "."),

		("build_ladders",
		[
			(party_slot_eq, "$current_town", slot_center_siege_with_belfry, 0),
			(eq, "$g_siege_method", 0),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Prepare ladders to attack the walls.",
		[
			(jump_to_menu, "mnu_construct_ladders")
		], "."),

		("build_siege_tower",
		[
			(party_slot_eq, "$current_town", slot_center_siege_with_belfry, 1),
			(eq, "$g_siege_method", 0),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Build a siege tower.",
		[
			(jump_to_menu, "mnu_construct_siege_tower")
		], "."),

		("cheat_castle_lead_attack",
		[
			(eq, "$cheat_mode", 1),
			(eq, "$g_siege_method", 0),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"{!}CHEAT: Instant build equipments.",
		[
			(assign, "$g_siege_method", 1),
			(assign, "$g_siege_method_finish_hours", 0),
			(jump_to_menu, "mnu_castle_besiege")
		], "."),

		("cheat_conquer_castle",
		[
			(eq, "$cheat_mode", 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"{!}CHEAT: Instant conquer castle.",
		[
			(assign, "$g_next_menu", "mnu_castle_taken"),
			(jump_to_menu, "mnu_total_victory")
		], "."),

		("lift_siege",
		[
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Abandon the siege.",
		[
			(call_script, "script_lift_siege", "$g_player_besiege_town", 0),
			(assign, "$g_player_besiege_town", -1),
			(party_set_slot, "p_main_party", slot_village_market_town, 0),
			(change_screen_return)
		], ".")
	]
	),

	("siege_attack_meets_sally", mnf_scale_picture, "The defenders sally out to meet your assault.",
	"none",
	[
		(set_background_mesh, "mesh_pic_sally_out")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], ".")
	]
	),

	("castle_besiege_inner_battle", mnf_scale_picture, "{s1}",
	"none",
	[
		(try_begin),
			(eq, 1, "$character_gender"),
			(set_background_mesh, "mesh_pic_siege_sighted_fem"),
		(else_try),
			(set_background_mesh, "mesh_pic_siege_sighted"),
		(try_end),
		(assign, ":var_1", "$g_battle_result"),
		(call_script, "script_encounter_calculate_fit"),
		(str_store_string, 1, "@As a last defensive effort, you retreat to the main hall of the keep. You and your remaining soldiers will put up a desperate fight here. If you are defeated, there's no other place to fall back to."),
		(str_store_string, 1, "@You've been driven away from the walls. Now the attackers are pouring into the streets. IF you can defeat them, you can perhaps turn the tide and save the day."),
		(try_begin),
			(this_or_next|neq, ":var_1", 1),
			(this_or_next|le, "$g_friend_fit_for_battle", 0),
			(le, "$g_enemy_fit_for_battle", 0),
			(jump_to_menu, "$g_siege_final_menu"),
		(else_try),
			(call_script, "script_encounter_calculate_fit"),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
			(try_begin),
				(eq, "$g_siege_battle_state", 0),
				(eq, ":var_1", 1),
				(assign, "$g_battle_result", 0),
				(jump_to_menu, "$g_siege_final_menu"),
			(else_try),
				(eq, "$g_siege_battle_state", 1),
				(eq, ":var_1", 1),
				(str_store_string, 1, "@You've breached the town walls, but the stubborn defenders continue to resist you in the streets! You'll have to deal with them before you can attack the keep at the heart of the town."),
			(else_try),
				(eq, "$g_siege_battle_state", 2),
				(eq, ":var_1", 1),
				(str_store_string, 1, "@The town centre is yours, but the remaining defenders have retreated to the castle. It must fall before you can complete your victory."),
			(else_try),
				(jump_to_menu, "$g_siege_final_menu"),
			(try_end),
		(else_try),
			(try_begin),
				(eq, "$g_siege_battle_state", 0),
				(eq, ":var_1", 1),
				(assign, "$g_battle_result", 0),
				(jump_to_menu, "$g_siege_final_menu"),
			(else_try),
				(eq, "$g_siege_battle_state", 1),
				(eq, ":var_1", 1),
				(str_store_string, 1, "@The remaining defenders have retreated to the castle as a last defense. You must go in and crush any remaining resistance."),
			(else_try),
				(jump_to_menu, "$g_siege_final_menu"),
			(try_end),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(try_begin),
					(eq, "$g_siege_battle_state", 1),
					(party_get_slot, ":g_encountered_party_town_center", "$g_encountered_party", slot_town_center),
					(set_jump_mission, "mt_besiege_inner_battle_town_center"),
				(else_try),
					(party_get_slot, ":g_encountered_party_town_center", "$g_encountered_party", slot_town_castle),
					(set_jump_mission, "mt_besiege_inner_battle_castle"),
				(try_end),
			(else_try),
				(party_get_slot, ":g_encountered_party_town_center", "$g_encountered_party", slot_town_castle),
				(set_jump_mission, "mt_besiege_inner_battle_castle"),
			(try_end),
			(set_party_battle_mode),
			(jump_to_scene, ":g_encountered_party_town_center"),
			(val_add, "$g_siege_battle_state", 1),
			(assign, "$g_next_menu", "mnu_castle_besiege_inner_battle"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], ".")
	]
	),

	("construct_ladders", 0, "As the most architecturally learned avatar of your company, ({reg2}), {reg3?you estimate:{s3} estimates} that it will take {reg4} hours to build enough scaling ladders for the assault.",
	"none",
	[
		(call_script, "script_get_max_skill_of_player_party", "skl_engineer"),
		(assign, ":var_1", reg0),
		(assign, ":var_2", reg1),
		(assign, reg2, ":var_1"),
		(store_sub, reg4, 14, ":var_1"),
		(val_mul, reg4, 2),
		(val_div, reg4, 3),
		(try_begin),
			(eq, ":var_2", "trp_player"),
			(assign, reg3, 1),
		(else_try),
			(assign, reg3, 0),
			(str_store_troop_name, 3, ":var_2"),
		(try_end)
	],
	[
		("build_ladders_cont",
		[],
		"Do it.",
		[
			(assign, "$g_siege_method", 1),
			(store_current_hours, ":current_hours"),
			(call_script, "script_get_max_skill_of_player_party", "skl_engineer"),
			(store_sub, ":value", 14, reg0),
			(val_mul, ":value", 2),
			(val_div, ":value", 3),
			(store_add, "$g_siege_method_finish_hours", ":current_hours", ":value"),
			(assign, "$auto_besiege_town", "$current_town"),
			(rest_for_hours_interactive, 96, 5, 1),
			(change_screen_return)
		], "."),

		("go_back",
		[],
		"Go back.",
		[
			(jump_to_menu, "mnu_castle_besiege")
		], ".")
	]
	),

	("construct_siege_tower", 0, "As the most architecturally learned avatar of your company, ({reg2}), {reg3?you estimate:{s3} estimates} that building a siege tower will take {reg4} hours.",
	"none",
	[
		(call_script, "script_get_max_skill_of_player_party", "skl_engineer"),
		(assign, ":var_1", reg0),
		(assign, ":var_2", reg1),
		(assign, reg2, ":var_1"),
		(store_sub, reg4, 15, ":var_1"),
		(val_mul, reg4, 6),
		(try_begin),
			(eq, ":var_2", "trp_player"),
			(assign, reg3, 1),
		(else_try),
			(assign, reg3, 0),
			(str_store_troop_name, 3, ":var_2"),
		(try_end)
	],
	[
		("build_siege_tower_cont",
		[],
		"Start building.",
		[
			(assign, "$g_siege_method", 2),
			(store_current_hours, ":current_hours"),
			(call_script, "script_get_max_skill_of_player_party", "skl_engineer"),
			(store_sub, ":value", 15, reg0),
			(val_mul, ":value", 6),
			(store_add, "$g_siege_method_finish_hours", ":current_hours", ":value"),
			(assign, "$auto_besiege_town", "$current_town"),
			(rest_for_hours_interactive, 240, 5, 1),
			(change_screen_return)
		], "."),

		("go_back",
		[],
		"Go back.",
		[
			(jump_to_menu, "mnu_castle_besiege")
		], ".")
	]
	),

	("castle_attack_walls_simulate", mnf_disable_all_keys|mnf_scale_picture, "{s4}^^Your casualties:{s8}^^Enemy casualties were: {s9}",
	"none",
	[
		(try_begin),
			(set_background_mesh, "mesh_pic_siege_attack"),
		(try_end),
		(call_script, "script_party_calculate_strength", "p_main_party", 1),
		(assign, ":var_1", reg0),
		(val_div, ":var_1", 10),
		(call_script, "script_party_calculate_strength", "$g_encountered_party", 0),
		(assign, ":var_2", reg0),
		(val_div, ":var_2", 4),
		(inflict_casualties_to_party_group, "p_main_party", ":var_2", "p_temp_casualties"),
		(call_script, "script_print_casualties_to_s0", "p_temp_casualties", 0),
		(str_store_string_reg, 8, 0),
		(inflict_casualties_to_party_group, "$g_encountered_party", ":var_1", "p_temp_casualties"),
		(call_script, "script_print_casualties_to_s0", "p_temp_casualties", 0),
		(str_store_string_reg, 9, 0),
		(assign, "$no_soldiers_left", 0),
		(try_begin),
			(call_script, "script_party_count_members_with_full_health", "p_main_party"),
			(le, reg0, 0),
			(assign, "$no_soldiers_left", 1),
			(str_store_string, 4, "str_attack_walls_failure"),
		(else_try),
			(call_script, "script_party_count_members_with_full_health", "$g_encountered_party"),
			(le, reg0, 0),
			(assign, "$no_soldiers_left", 1),
			(assign, "$g_battle_result", 1),
			(str_store_string, 4, "str_attack_walls_success"),
		(else_try),
			(str_store_string, 4, "str_attack_walls_continue"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_castle_besiege")
		], ".")
	]
	),

	("castle_attack_walls_with_allies_simulate", mnf_disable_all_keys|mnf_scale_picture, "{s4}^^Your casualties: {s8}^^Allies' casualties: {s9}^^Enemy casualties: {s10}",
	"none",
	[
		(try_begin),
			(set_background_mesh, "mesh_pic_siege_attack"),
		(try_end),
		(call_script, "script_party_calculate_strength", "p_main_party", 1),
		(assign, ":var_1", reg0),
		(val_div, ":var_1", 10),
		(call_script, "script_party_calculate_strength", "p_collective_friends", 0),
		(assign, ":var_2", reg0),
		(val_div, ":var_2", 10),
		(val_max, ":var_2", 1),
		(call_script, "script_party_calculate_strength", "p_collective_enemy", 0),
		(assign, ":var_3", reg0),
		(val_div, ":var_3", 4),
		(try_begin),
			(eq, ":var_2", 0),
			(store_div, ":value", ":var_3", 2),
		(else_try),
			(assign, ":value", ":var_3"),
			(val_mul, ":value", ":var_1"),
			(val_div, ":value", ":var_2"),
		(try_end),
		(val_sub, ":var_3", ":value"),
		(inflict_casualties_to_party_group, "p_main_party", ":value", "p_temp_casualties"),
		(call_script, "script_print_casualties_to_s0", "p_temp_casualties", 0),
		(str_store_string_reg, 8, 0),
		(inflict_casualties_to_party_group, "$g_enemy_party", ":var_2", "p_temp_casualties"),
		(call_script, "script_print_casualties_to_s0", "p_temp_casualties", 0),
		(str_store_string_reg, 10, 0),
		(call_script, "script_collect_friendly_parties"),
		(inflict_casualties_to_party_group, "$g_ally_party", ":var_3", "p_temp_casualties"),
		(call_script, "script_print_casualties_to_s0", "p_temp_casualties", 0),
		(str_store_string_reg, 9, 0),
		(party_collect_attachments_to_party, "$g_enemy_party", "p_collective_enemy"),
		(assign, "$no_soldiers_left", 0),
		(try_begin),
			(call_script, "script_party_count_members_with_full_health", "p_main_party"),
			(le, reg0, 0),
			(assign, "$no_soldiers_left", 1),
			(str_store_string, 4, "str_attack_walls_failure"),
		(else_try),
			(call_script, "script_party_count_members_with_full_health", "p_collective_enemy"),
			(le, reg0, 0),
			(assign, "$no_soldiers_left", 1),
			(assign, "$g_battle_result", 1),
			(str_store_string, 4, "str_attack_walls_success"),
		(else_try),
			(str_store_string, 4, "str_attack_walls_continue"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_besiegers_camp_with_allies")
		], ".")
	]
	),

	("castle_taken_by_friends", 0, "Nothing to see here.",
	"none",
	[
		(party_clear, "$g_encountered_party"),
		(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_2_0", "$g_encountered_party_2", 0),
		(party_set_slot, "$g_encountered_party", slot_center_last_taken_by_troop, ":party_stack_troop_id_g_encountered_party_2_0"),
		(store_faction_of_troop, ":faction_of_troop_party_stack_troop_id_g_encountered_party_2_0", ":party_stack_troop_id_g_encountered_party_2_0"),
		(call_script, "script_change_center_prosperity", "$g_encountered_party", -5),
		(try_begin),
			(assign, ":value", 20),
			(is_between, "$g_encountered_party", "p_town_1", "p_castle_1"),
			(assign, ":value", 40),
		(try_end),
		(try_begin),
			(neq, ":faction_of_troop_party_stack_troop_id_g_encountered_party_2_0", "$g_encountered_party_faction"),
			(call_script, "script_faction_inflict_war_damage_on_faction", ":faction_of_troop_party_stack_troop_id_g_encountered_party_2_0", "$g_encountered_party_faction", ":value"),
		(try_end),
		(call_script, "script_give_center_to_faction", "$g_encountered_party", ":faction_of_troop_party_stack_troop_id_g_encountered_party_2_0"),
		(call_script, "script_add_log_entry", 18, "trp_player", "$g_encountered_party", 0, "$g_encountered_party_faction"),
		(change_screen_return)
	],
	[]
	),

	("castle_taken", mnf_disable_all_keys, "{s3} has fallen to your troops, and you now have full control of the {reg2?town:castle}. You can plunder spoils of war worth {reg3} coins.{reg1? You may station troops here to defend it against enemies who may try to recapture it. Also, you should select now whether you will hold the {reg2?town:castle} yourself or give it to a faithful vassal...:}",
	"none",
	[
		(party_clear, "$g_encountered_party"),
		(assign, ":value", 0),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", 1),
		(try_end),
		(try_begin),
			(this_or_next|eq, ":value", 1),
			(eq, "$players_kingdom", "fac_player_supporters_faction"),
			(party_get_slot, ":g_encountered_party_town_lord", "$g_encountered_party", slot_town_lord),
			(neq, ":g_encountered_party_town_lord", "trp_player"),
			(try_for_range, ":unused", 0, 4),
				(call_script, "script_cf_reinforce_party", "$g_encountered_party"),
			(try_end),
		(try_end),
		(call_script, "script_lift_siege", "$g_encountered_party", 0),
		(assign, "$g_player_besiege_town", -1),
		(party_set_slot, "$g_encountered_party", slot_center_last_taken_by_troop, "trp_player"),
		(store_current_hours, ":current_hours"),
		(party_set_slot, "$g_encountered_party", 403, ":current_hours"),
		(try_begin),
			(is_between, "$g_encountered_party", "p_town_1", "p_castle_1"),
			(store_random_in_range, ":random_in_range_4000_10000", 4000, 10000),
		(else_try),
			(store_random_in_range, ":random_in_range_4000_10000", 1000, 8000),
		(try_end),
		(val_div, ":random_in_range_4000_10000", 100),
		(val_mul, ":random_in_range_4000_10000", 100),
		(assign, "$diplomacy_var", ":random_in_range_4000_10000"),
		(assign, reg3, "$diplomacy_var"),
		(call_script, "script_change_troop_renown", "trp_player", 5),
		(assign, ":value_2", 20),
		(try_begin),
			(is_between, "$g_encountered_party", "p_town_1", "p_castle_1"),
			(assign, ":value_2", 40),
		(try_end),
		(call_script, "script_faction_inflict_war_damage_on_faction", "$players_kingdom", "$g_encountered_party_faction", ":value_2"),
		(try_begin),
			(is_between, "$players_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(neq, "$players_kingdom", "fac_player_supporters_faction"),
			(call_script, "script_give_center_to_faction", "$g_encountered_party", "$players_kingdom"),
			(call_script, "script_order_best_besieger_party_to_guard_center", "$g_encountered_party", "$players_kingdom"),
			(jump_to_menu, "mnu_castle_taken_2"),
		(else_try),
			(call_script, "script_give_center_to_faction", "$g_encountered_party", "fac_player_supporters_faction"),
			(call_script, "script_order_best_besieger_party_to_guard_center", "$g_encountered_party", "fac_player_supporters_faction"),
			(str_store_party_name, 3, "$g_encountered_party"),
			(assign, reg1, 0),
			(try_begin),
				(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
				(assign, reg1, 1),
			(try_end),
		(try_end),
		(assign, reg2, 0),
		(try_begin),
			(is_between, "$g_encountered_party", "p_town_1", "p_castle_1"),
			(assign, reg2, 1),
		(try_end)
	],
	[
		("dplmc_spoils_yourself",
		[],
		"Plunder it and keep the spoils all for yourself.",
		[
			(call_script, "script_change_center_prosperity", "$g_encountered_party", -8),
			(assign, ":value", 0),
			(try_begin),
				(is_between, "$players_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
				(ge, ":players_kingdom_leader", 0),
				(this_or_next|eq, ":players_kingdom_leader", "trp_player"),
				(this_or_next|troop_slot_eq, ":players_kingdom_leader", slot_troop_spouse, "trp_player"),
				(troop_slot_eq, "trp_player", slot_troop_spouse, ":players_kingdom_leader"),
				(assign, ":value", 1),
			(else_try),
				(eq, "$players_kingdom", "fac_player_supporters_faction"),
				(assign, ":value", 1),
			(try_end),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(this_or_next|eq, "$players_kingdom", ":faction_of_troop_troop"),
				(eq, "fac_player_supporters_faction", ":faction_of_troop_troop"),
				(this_or_next|eq, ":value", 1),
				(eq, "fac_player_supporters_faction", ":faction_of_troop_troop"),
				(call_script, "script_change_player_relation_with_troop", ":troop", -2),
			(try_end),
			(try_begin),
				(gt, "$g_player_chamberlain", 0),
				(call_script, "script_dplmc_pay_into_treasury", "$diplomacy_var"),
			(else_try),
				(troop_add_gold, "trp_player", "$diplomacy_var"),
			(try_end),
			(call_script, "script_change_player_honor", -3),
			(assign, "$auto_enter_town", "$g_encountered_party"),
			(change_screen_return)
		], "."),

		("dplmc_spoils_accompanying_vassals",
		[
			(is_between, "$players_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
			(this_or_next|eq, ":players_kingdom_leader", "trp_player"),
			(this_or_next|troop_slot_eq, ":players_kingdom_leader", slot_troop_spouse, "trp_player"),
			(eq, "$players_kingdom", "fac_player_supporters_faction"),
			(assign, ":var_2", 0),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(this_or_next|eq, "$players_kingdom", ":faction_of_troop_troop"),
				(eq, "fac_player_supporters_faction", ":faction_of_troop_troop"),
				(troop_get_slot, ":troop_leaded_party", ":troop", slot_troop_leaded_party),
				(ge, ":troop_leaded_party", 1),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_troop_leaded_party", "p_main_party", ":troop_leaded_party"),
				(le, ":distance_to_party_from_party_main_party_troop_leaded_party", 25),
				(val_add, ":var_2", 1),
			(try_end),
			(gt, ":var_2", 0)
		],
		"Plunder it and share the spoils between the vassals accompanying you and yourself.",
		[
			(assign, ":var_1", 1),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(this_or_next|eq, "$players_kingdom", ":faction_of_troop_troop"),
				(eq, "fac_player_supporters_faction", ":faction_of_troop_troop"),
				(troop_get_slot, ":troop_leaded_party", ":troop", slot_troop_leaded_party),
				(ge, ":troop_leaded_party", 1),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_troop_leaded_party", "p_main_party", ":troop_leaded_party"),
				(le, ":distance_to_party_from_party_main_party_troop_leaded_party", 25),
				(val_add, ":var_1", 1),
			(try_end),
			(store_div, ":value", "$diplomacy_var", ":var_1"),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(this_or_next|eq, "$players_kingdom", ":faction_of_troop_troop"),
				(eq, "fac_player_supporters_faction", ":faction_of_troop_troop"),
				(troop_get_slot, ":troop_leaded_party", ":troop", slot_troop_leaded_party),
				(ge, ":troop_leaded_party", 1),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_troop_leaded_party", "p_main_party", ":troop_leaded_party"),
				(le, ":distance_to_party_from_party_main_party_troop_leaded_party", 25),
				(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", ":value", ":troop"),
				(store_random_in_range, reg0, 0, 1000),
				(val_add, reg0, ":value"),
				(val_div, reg0, 1000),
				(gt, reg0, 0),
				(val_min, reg0, 4),
				(assign, ":var_7", reg0),
				(try_begin),
					(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
					(call_script, "script_dplmc_get_troop_morality_value", ":troop", 3),
					(try_begin),
						(gt, reg0, 0),
						(val_sub, ":var_7", reg0),
						(val_min, ":var_7", -1),
					(else_try),
						(lt, reg0, 0),
						(val_sub, ":var_7", reg0),
						(val_min, ":var_7", 5),
					(else_try),
						(this_or_next|troop_slot_eq, ":troop", slot_lord_reputation_type, 10),
						(this_or_next|troop_slot_eq, ":troop", slot_lord_reputation_type, 9),
						(troop_slot_eq, ":troop", slot_lord_reputation_type, 25),
						(val_sub, ":var_7", 1),
					(try_end),
				(try_end),
				(call_script, "script_change_player_relation_with_troop", ":troop", ":var_7"),
			(try_end),
			(val_div, "$diplomacy_var", ":var_1"),
			(try_begin),
				(gt, "$g_player_chamberlain", 0),
				(call_script, "script_dplmc_pay_into_treasury", "$diplomacy_var"),
			(else_try),
				(troop_add_gold, "trp_player", "$diplomacy_var"),
			(try_end),
			(call_script, "script_change_center_prosperity", "$g_encountered_party", -8),
			(call_script, "script_change_player_honor", -1),
			(assign, "$auto_enter_town", "$g_encountered_party"),
			(change_screen_return)
		], "."),

		("dplmc_spoils_all_vassals",
		[
			(is_between, "$players_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
			(this_or_next|eq, ":players_kingdom_leader", "trp_player"),
			(this_or_next|troop_slot_eq, ":players_kingdom_leader", slot_troop_spouse, "trp_player"),
			(eq, "$players_kingdom", "fac_player_supporters_faction")
		],
		"Plunder it and share the spoils equally between your vassals and yourself.",
		[
			(assign, ":var_1", 1),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(this_or_next|eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
				(eq, ":faction_of_troop_troop", "$players_kingdom"),
				(val_add, ":var_1", 1),
			(try_end),
			(store_div, ":value", "$diplomacy_var", ":var_1"),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(this_or_next|eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
				(eq, ":faction_of_troop_troop", "$players_kingdom"),
				(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", ":value", ":troop"),
				(store_random_in_range, reg0, 0, 1000),
				(val_add, reg0, ":value"),
				(val_div, reg0, 1000),
				(gt, reg0, 0),
				(val_min, reg0, 3),
				(assign, ":var_5", reg0),
				(try_begin),
					(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
					(call_script, "script_dplmc_get_troop_morality_value", ":troop", 3),
					(try_begin),
						(gt, reg0, 0),
						(val_sub, ":var_5", reg0),
						(val_min, ":var_5", -1),
					(else_try),
						(lt, reg0, 0),
						(val_sub, ":var_5", reg0),
						(val_min, ":var_5", 4),
					(else_try),
						(this_or_next|troop_slot_eq, ":troop", slot_lord_reputation_type, 10),
						(this_or_next|troop_slot_eq, ":troop", slot_lord_reputation_type, 9),
						(troop_slot_eq, ":troop", slot_lord_reputation_type, 25),
						(val_sub, ":var_5", 1),
					(try_end),
					(call_script, "script_change_player_relation_with_troop", ":troop", ":var_5"),
				(try_end),
			(try_end),
			(val_div, "$diplomacy_var", ":var_1"),
			(try_begin),
				(gt, "$g_player_chamberlain", 0),
				(call_script, "script_dplmc_pay_into_treasury", "$diplomacy_var"),
			(else_try),
				(troop_add_gold, "trp_player", "$diplomacy_var"),
			(try_end),
			(call_script, "script_change_center_prosperity", "$g_encountered_party", -8),
			(assign, "$auto_enter_town", "$g_encountered_party"),
			(change_screen_return)
		], "."),

		("continue",
		[],
		"Continue...",
		[
			(call_script, "script_change_center_prosperity", "$g_encountered_party", -3),
			(assign, "$auto_enter_town", "$g_encountered_party"),
			(change_screen_return)
		], ".")
	]
	),

	("castle_taken_2", mnf_disable_all_keys, "{s3} has fallen to your troops, and you now have full control of the castle. It is time to send word to {s9} about your victory. {s5}",
	"none",
	[
		(str_store_party_name, 3, "$g_encountered_party"),
		(str_clear, 5),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(str_store_troop_name, 9, ":players_kingdom_leader"),
		(try_begin),
			(eq, "$player_has_homage", 0),
			(assign, reg8, 0),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(assign, reg8, 1),
			(try_end),
			(call_script, "script_dplmc_store_troop_is_female", ":players_kingdom_leader"),
			(str_store_string, 5, "@However, since you are not a sworn {man/follower} of {s9}, there is no chance {reg0?she:he} would recognize you as the {lord/lady} of this {reg8?town:castle}."),
		(try_end)
	],
	[
		("castle_taken_claim",
		[
			(eq, "$player_has_homage", 1)
		],
		"Request that {s3} be awarded to you.",
		[
			(party_set_slot, "$g_encountered_party", slot_center_last_taken_by_troop, "trp_player"),
			(assign, "$g_castle_requested_by_player", "$current_town"),
			(assign, "$g_castle_requested_for_troop", "trp_player"),
			(assign, "$auto_enter_town", "$g_encountered_party"),
			(change_screen_return)
		], "."),

		("castle_taken_claim_2",
		[
			(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
			(is_between, ":player_spouse", "trp_npc1", "trp_knight_1_1_wife"),
			(troop_slot_eq, ":player_spouse", slot_troop_occupation, 2),
			(store_faction_of_troop, ":faction_of_troop_player_spouse", ":player_spouse"),
			(eq, ":faction_of_troop_player_spouse", "$players_kingdom")
		],
		"Request that {s3} be awarded to your {wife/husband}.",
		[
			(party_set_slot, "$g_encountered_party", slot_center_last_taken_by_troop, "trp_player"),
			(assign, "$g_castle_requested_by_player", "$current_town"),
			(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
			(assign, "$g_castle_requested_for_troop", ":player_spouse"),
			(assign, "$auto_enter_town", "$g_encountered_party"),
			(change_screen_return)
		], "."),

		("castle_taken_no_claim",
		[],
		"Ask no rewards.",
		[
			(party_set_slot, "$g_encountered_party", slot_center_last_taken_by_troop, -1),
			(assign, "$auto_enter_town", "$g_encountered_party"),
			(change_screen_return)
		], ".")
	]
	),

	("requested_castle_granted_to_player", mnf_scale_picture, "You receive a message from your liege, {s3}.^^ {reg4?She:He} has decided to grant {s2}{reg3? and the nearby village of {s4}:} to you, with all due incomes and titles, to hold in {reg4?her:his} name for as long as you maintain your oath of homage.",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(str_store_troop_name, 3, ":players_kingdom_leader"),
		(str_store_party_name, 2, "$g_center_to_give_to_player"),
		(try_begin),
			(party_slot_eq, "$g_center_to_give_to_player", slot_party_type, 2),
			(assign, reg3, 1),
			(try_for_range, ":party", "p_village_1", "p_salt_mine"),
				(party_slot_eq, ":party", slot_village_bound_center, "$g_center_to_give_to_player"),
				(str_store_party_name, 4, ":party"),
			(try_end),
		(else_try),
			(assign, reg3, 0),
		(try_end),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":players_kingdom_leader", 4)
	],
	[
		("continue",
		[],
		"Continue.",
		[
			(call_script, "script_give_center_to_lord", "$g_center_to_give_to_player", "trp_player", 0),
			(jump_to_menu, "mnu_give_center_to_player_2")
		], ".")
	]
	),

	("dk_invasion_start_warning", mnf_scale_picture, "Word has reached you that invaders have landed in the Stormlands. According to a man standing close by, who recounts one of the numerous rumors spreading across the land, they're half man, half beast. The man is shaking with fright as he describes their evil eyes, their black and golden armor, their helmets adorned with dragons, griffins and skulls. Supposively, they're the remnants of the men who have gone into exile in Essos over the years, twisted by greed, lust, loss and madness into wild beasts intent on setting the world afire.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands"),
		(try_begin),
			(troop_get_type, ":type_player", "trp_player"),
			(eq, ":type_player", 1),
			(str_store_string, 1, "@my lady"),
		(else_try),
			(str_store_string, 1, "@my lord"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dothraki_invasion", mnf_scale_picture, "Word has reached you that an invading dothraki horde has laid siege to the fair city of Selhorys. According to a stranger standing close by, it is the khalasar of Khal Pono, who styles himself ruler of the Khizra. Noticing your look of bewilderment, the man explains that Khizra means 'Marsh' in dothraki and that the dothraki hordes who have made their territory east of Volantis have often claimed rulership of the marshes surrounding the Painted Mountains.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_volantis"),
		(try_begin),
			(troop_get_type, ":type_player", "trp_player"),
			(eq, ":type_player", 1),
			(str_store_string, 1, "@my lady"),
		(else_try),
			(str_store_string, 1, "@my lord"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("wildling_invasion", mnf_scale_picture, "'Dire news, my lord!', shouts an old man standing a few feet from you. 'In the black of night, wildlings assaulted Last Hearth, and took the castle! The Wall has fallen, and savages roam free!' The man is clearly frightened and walks away muttering curses and something about giants and grumpkins.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north"),
		(try_begin),
			(troop_get_type, ":type_player", "trp_player"),
			(eq, ":type_player", 1),
			(str_store_string, 1, "@my lady"),
		(else_try),
			(str_store_string, 1, "@my lord"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("renly_quest_turncloak", mnf_scale_picture, "Word is spreading across the land. A shadow entered the chambers of Renly Baratheon, a shadow with the form of a man. If not for the valor of the Rainbow Guard, Renly would now be dead. The would-be king did not escape unharmed though, but took multiple wounds and rumors are spreading that he has been left bedridden and unable to take charge of his army.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(troop_set_health, "trp_kingdom_1_lord", 0),
			(call_script, "script_change_player_honor", -15),
			(call_script, "script_change_player_relation_with_troop", "trp_kingdom_1_lord", -100),
			(assign, "$g_renly_quest_turncloak", 2),
			(disable_party, "p_renly_quest_rainwood"),
			(disable_party, "p_renly_quest_rainwood_fire_1"),
			(disable_party, "p_renly_quest_rainwood_fire_2"),
			(disable_party, "p_renly_quest_rainwood_fire_3"),
			(disable_party, "p_renly_quest_rainwood_fire_4"),
			(change_screen_return)
		], ".")
	]
	),

	("renly_quest_turncloak_2", mnf_scale_picture, "Following the attempt on Renly Baratheons life, uncertainty has gripped the hearts of the storm lords. If Stannis has magic and shadowbinders at his command, then perhaps his cause is the one a wise man should support. Consequently, many of those who first joined Renly has turned their cloaks, proclaiming for Stannis instead. The Stormlands are now divided, and a bloody conflict is sure to follow, as brother fights brother.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(troop_set_health, "trp_kingdom_1_lord", 0),
			(call_script, "script_change_troop_faction", "trp_knight_1_1", "fac_kingdom_8"),
			(display_message, "@Lord Sebastion Errol has renounced his allegiance to The Stormlands, and joined Dragonstone"),
			(call_script, "script_troop_change_relation_with_troop", "trp_kingdom_8_lord", "trp_knight_1_1", 50),
			(call_script, "script_change_troop_faction", "trp_knight_1_2", "fac_kingdom_8"),
			(display_message, "@Lord Ralph Buckler has renounced his allegiance to The Stormlands, and joined Dragonstone"),
			(call_script, "script_troop_change_relation_with_troop", "trp_kingdom_8_lord", "trp_knight_1_2", 50),
			(call_script, "script_change_troop_faction", "trp_knight_1_5", "fac_kingdom_8"),
			(display_message, "@Lord Hugh Grandison has renounced his allegiance to The Stormlands, and joined Dragonstone"),
			(call_script, "script_troop_change_relation_with_troop", "trp_kingdom_8_lord", "trp_knight_1_5", 50),
			(call_script, "script_change_troop_faction", "trp_knight_1_7", "fac_kingdom_8"),
			(display_message, "@Lord Philip Fell has renounced his allegiance to The Stormlands, and joined Dragonstone"),
			(call_script, "script_troop_change_relation_with_troop", "trp_kingdom_8_lord", "trp_knight_1_7", 50),
			(call_script, "script_change_troop_faction", "trp_knight_1_10", "fac_kingdom_8"),
			(display_message, "@Ser Ronnet Connington has renounced his allegiance to The Stormlands, and joined Dragonstone"),
			(call_script, "script_troop_change_relation_with_troop", "trp_kingdom_8_lord", "trp_knight_1_10", 50),
			(call_script, "script_change_troop_faction", "trp_knight_1_11", "fac_kingdom_8"),
			(display_message, "@Lord Eldon Estermont has renounced his allegiance to The Stormlands, and joined Dragonstone"),
			(call_script, "script_troop_change_relation_with_troop", "trp_kingdom_8_lord", "trp_knight_1_11", 50),
			(call_script, "script_change_troop_faction", "trp_knight_1_14", "fac_kingdom_8"),
			(display_message, "@Ser Donnel Swann has renounced his allegiance to The Stormlands, and joined Dragonstone"),
			(call_script, "script_troop_change_relation_with_troop", "trp_kingdom_8_lord", "trp_knight_1_14", 50),
			(call_script, "script_change_troop_faction", "trp_knight_1_18", "fac_kingdom_8"),
			(display_message, "@Lord Gulian Swann has renounced his allegiance to The Stormlands, and joined Dragonstone"),
			(call_script, "script_troop_change_relation_with_troop", "trp_kingdom_8_lord", "trp_knight_1_18", 50),
			(assign, "$g_renly_quest_turncloak", 3),
			(change_screen_return)
		], ".")
	]
	),

	("renly_quest_turncloak_3", mnf_scale_picture, "Chaos has engulfed the Stormlands, and the cause of Renly Baratheon has lost much of its luster to the many lords who supported his cause with enthusiasm at the start. The men of the Reach, many of whom hold no love for the Baratheons, have themselves become divided in their loyalties. Though the Tyrells continue to support Renly Baratheon due to their ties of blood and friendship, many of the lesser lords of the realm do not feel they have the same obligation and have started wavering in their support of the Baratheon pretender.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_reach")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(troop_set_health, "trp_kingdom_1_lord", 0),
			(call_script, "script_end_quest", "qst_renly_quest_4"),
			(setup_quest_text, "qst_renly_quest_5"),
			(str_store_string, 2, "@Return to Stannis Baratheon."),
			(call_script, "script_start_quest", "qst_renly_quest_5", "$g_talk_troop"),
			(call_script, "script_change_troop_faction", "trp_knight_10_6", "fac_kingdom_8"),
			(display_message, "@Lord Martyn Mullendore has renounced his allegiance to The Reach, and joined Dragonstone"),
			(call_script, "script_troop_change_relation_with_troop", "trp_kingdom_8_lord", "trp_knight_10_6", 50),
			(call_script, "script_change_troop_faction", "trp_knight_10_11", "fac_kingdom_8"),
			(display_message, "@Ser Bryan Fossoway has renounced his allegiance to The Reach, and joined Dragonstone"),
			(call_script, "script_troop_change_relation_with_troop", "trp_kingdom_8_lord", "trp_knight_10_11", 50),
			(call_script, "script_change_troop_faction", "trp_knight_10_17", "fac_kingdom_8"),
			(display_message, "@Lord Elwood Meadows has renounced his allegiance to The Reach, and joined Dragonstone"),
			(call_script, "script_troop_change_relation_with_troop", "trp_kingdom_8_lord", "trp_knight_10_17", 50),
			(call_script, "script_change_troop_faction", "trp_knight_10_24", "fac_kingdom_8"),
			(display_message, "@Lord Alester Florent has renounced his allegiance to The Reach, and joined Dragonstone"),
			(call_script, "script_troop_change_relation_with_troop", "trp_kingdom_8_lord", "trp_knight_10_24", 50),
			(call_script, "script_change_troop_faction", "trp_knight_10_25", "fac_kingdom_8"),
			(display_message, "@Ser Jon Fossoway has renounced his allegiance to The Reach, and joined Dragonstone"),
			(call_script, "script_troop_change_relation_with_troop", "trp_kingdom_8_lord", "trp_knight_10_25", 50),
			(assign, "$g_renly_quest_turncloak", 4),
			(change_screen_return)
		], ".")
	]
	),

	("dk_invasion_start_warning_dorne_joins", mnf_scale_picture, "News has reached you that the dornish lords march to the aid of the pretender, the one who calls himself Aegon the Sixth. A woman standing close by recounts the rumor, something she picked up in a tavern not far from your location. Soon, the rumor is confirmed when a raven is intercepted, proclaiming Doran Martells support for his supposed nephew and urging all the loyal and true lords of Westeros to join the cause of the true heir to the Iron Throne.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_dorne"),
		(try_begin),
			(troop_get_type, ":type_player", "trp_player"),
			(eq, ":type_player", 1),
			(str_store_string, 1, "@my lady"),
		(else_try),
			(str_store_string, 1, "@my lord"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("conquest_kings_landing_dragonstone", mnf_scale_picture, "The forces of Stannis Baratheon have taken the capital city of King's Landing. Stannis now sits the Iron Throne, and the bastards Joffrey, Tommen and Myrcella have all been executed, as traitors and usurpers, along with their mother, Cersei Lannister. With the royal bastards dead, Tywin Lannister have quickly made peace with the northmen and proclaimed himself king, intending to restore the might of the long gone Kingdom of the Rock.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(call_script, "script_diplomacy_start_peace_between_kingdoms", "fac_kingdom_2", "fac_kingdom_9", 1),
			(troop_set_name, "trp_kingdom_9_lord", "@King Tywin Lannister"),
			(troop_set_plural_name, "trp_kingdom_9_lord", "@King Tywin Lannister"),
			(assign, "$g_conquest_kings_landing_dragonstone", 1),
			(change_screen_return)
		], ".")
	]
	),

	("conquest_kings_landing_stormlands", mnf_scale_picture, "The forces of Renly Baratheon have taken the capital city of King's Landing. Renly now sits the Iron Throne, and the bastards Joffrey, Tommen and Myrcella have all been executed, as traitors and usurpers, along with their mother, Cersei Lannister. With the royal bastards dead, Tywin Lannister have quickly made peace with the northmen and proclaimed himself king, intending to restore the might of the long gone Kingdom of the Rock.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(call_script, "script_diplomacy_start_peace_between_kingdoms", "fac_kingdom_2", "fac_kingdom_9", 1),
			(troop_set_name, "trp_kingdom_9_lord", "@King Tywin Lannister"),
			(troop_set_plural_name, "trp_kingdom_9_lord", "@King Tywin Lannister"),
			(assign, "$g_conquest_kings_landing_stormlands", 1),
			(change_screen_return)
		], ".")
	]
	),

	("conquest_kings_landing_reach", mnf_scale_picture, "The forces of the Reach have taken the capital city of King's Landing. Renly Baratheon now sits the Iron Throne, and the bastards Joffrey, Tommen and Myrcella have all been executed, as traitors and usurpers, along with their mother, Cersei Lannister. With the royal bastards dead, Tywin Lannister have quickly made peace with the northmen and proclaimed himself king, intending to restore the might of the long gone Kingdom of the Rock.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(call_script, "script_diplomacy_start_peace_between_kingdoms", "fac_kingdom_2", "fac_kingdom_9", 1),
			(troop_set_name, "trp_kingdom_9_lord", "@King Tywin Lannister"),
			(troop_set_plural_name, "trp_kingdom_9_lord", "@King Tywin Lannister"),
			(assign, "$g_conquest_kings_landing_reach", 1),
			(change_screen_return)
		], ".")
	]
	),

	("dk_stannis_start_warning", mnf_scale_picture, "A nearby man is whispering to his wife. Edging closer, you overhear part of their conversation. From what you can make out, it appears Stannis Baratheon has laid claim to the throne. When you confront the peasant, he confirms your suspicions, declaring Stannis an ungodly man, working with demons from beyond the edge of the world and plotting to tear down the Sept of Baelor.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_dragonstone"),
		(try_begin),
			(troop_get_type, ":type_player", "trp_player"),
			(eq, ":type_player", 1),
			(str_store_string, 1, "@my lady"),
		(else_try),
			(str_store_string, 1, "@my lord"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dk_renly_start_warning2", mnf_scale_picture, "You intercept a raven. A message is tied to its leg with golden thread, the paper fine and the ink exquisite. It urges all loyal lords to support Renly Baratheon as the only true king of the Seven Kingdoms by virtue of being the brother of the former king.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands"),
		(try_begin),
			(troop_get_type, ":type_player", "trp_player"),
			(eq, ":type_player", 1),
			(str_store_string, 1, "@my lady"),
		(else_try),
			(str_store_string, 1, "@my lord"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dk_renly_start_warning3", mnf_scale_picture, "You intercept another raven. They're everywhere! You unroll the message tied to its leg with green velvet. It is a proclamation from the Tyrells of Highgarden, urging all loyal and honorable lords to support Renly Baratheon as king of the Seven Kingdoms.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_reach"),
		(try_begin),
			(troop_get_type, ":type_player", "trp_player"),
			(eq, ":type_player", 1),
			(str_store_string, 1, "@my lady"),
		(else_try),
			(str_store_string, 1, "@my lord"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$g_war_of_five_kings", 1),
			(change_screen_return)
		], ".")
	]
	),

	("dk_north_start_warning", mnf_scale_picture, "A nearby man ask your permission to speak. Apparently, he heard a rumor about the ironmen. Supposively, they've begun raiding the northern cost, and Balon Greyjoy has crowned himself and once again sits the Seastone Chair as King of the Iron Islands.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ironborn"),
		(try_begin),
			(troop_get_type, ":type_player", "trp_player"),
			(eq, ":type_player", 1),
			(str_store_string, 1, "@my lady"),
		(else_try),
			(str_store_string, 1, "@my lord"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("requested_castle_granted_to_player_husband", mnf_scale_picture, "You receive a message from your liege, {s3}.^^ {reg4?She:He} has decided to grant {s2}{reg3? and the nearby village of {s4}:} to your husband, {s7}.",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(str_store_troop_name, 3, ":players_kingdom_leader"),
		(str_store_party_name, 2, "$g_center_to_give_to_player"),
		(try_begin),
			(party_slot_eq, "$g_center_to_give_to_player", slot_party_type, 2),
			(assign, reg3, 1),
			(try_for_range, ":party", "p_village_1", "p_salt_mine"),
				(party_slot_eq, ":party", slot_village_bound_center, "$g_center_to_give_to_player"),
				(str_store_party_name, 4, ":party"),
			(try_end),
		(else_try),
			(assign, reg3, 0),
		(try_end),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":players_kingdom_leader", 4),
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(str_store_troop_name, 11, ":player_spouse"),
		(str_store_string, 7, "str_to_your_husband_s11")
	],
	[
		("continue",
		[],
		"Continue.",
		[
			(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
			(call_script, "script_give_center_to_lord", "$g_center_to_give_to_player", ":player_spouse", 0)
		], ".")
	]
	),

	("requested_castle_granted_to_another", mnf_scale_picture, "You receive a message from your monarch, {s3}.^^ 'I was most pleased to hear of your valiant efforts in the capture of {s2}. Your victory has gladdened all our hearts. You also requested me to give you ownership of the castle, but that is a favour which I fear I cannot grant, as you already hold significant estates in my realm. Instead I have sent you {reg6} coins to cover the expenses of your campaign, but {s2} I give to {s5}.' ",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(str_store_troop_name, 3, ":players_kingdom_leader"),
		(str_store_party_name, 2, "$g_center_to_give_to_player"),
		(party_get_slot, ":g_center_to_give_to_player_town_lord", "$g_center_to_give_to_player", slot_town_lord),
		(str_store_troop_name, 5, ":g_center_to_give_to_player_town_lord"),
		(assign, reg6, 2500),
		(assign, "$g_castle_requested_by_player", -1),
		(assign, "$g_castle_requested_for_troop", -1)
	],
	[
		("accept_decision",
		[],
		"Accept the decision.",
		[
			(call_script, "script_troop_add_gold", "trp_player", reg6),
			(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
			(try_begin),
				(gt, ":players_kingdom_leader", 0),
				(neq, ":players_kingdom_leader", "trp_kingdom_heroes_including_player_begin"),
				(call_script, "script_dplmc_remove_gold_from_lord_and_holdings", reg6, ":players_kingdom_leader"),
			(try_end),
			(change_screen_return)
		], "."),

		("leave_faction",
		[],
		"You have been wronged! Renounce your oath to your liege! ",
		[
			(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
			(try_begin),
				(gt, ":players_kingdom_leader", 0),
				(neq, ":players_kingdom_leader", "trp_kingdom_heroes_including_player_begin"),
				(call_script, "script_dplmc_remove_gold_from_lord_and_holdings", reg6, ":players_kingdom_leader"),
			(try_end),
			(jump_to_menu, "mnu_leave_faction"),
			(call_script, "script_troop_add_gold", "trp_player", reg6)
		], ".")
	]
	),

	("requested_castle_granted_to_another_female", mnf_scale_picture, "You receive a message from your monarch, {s3}.^^ 'I was most pleased to hear of your valiant efforts in the capture of {s2}. Your victory has gladdened all our hearts. You also requested me to give ownership of the castle to your {wife/husband}, but that is a favour which I fear I cannot grant, as {she/he} already holds significant estates in my realm. Instead I have sent you {reg6} coins to cover the expenses of your campaign, but {s2} I give to {s5}.' ",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(str_store_troop_name, 3, ":players_kingdom_leader"),
		(str_store_party_name, 2, "$g_center_to_give_to_player"),
		(party_get_slot, ":g_center_to_give_to_player_town_lord", "$g_center_to_give_to_player", slot_town_lord),
		(str_store_troop_name, 5, ":g_center_to_give_to_player_town_lord"),
		(assign, reg6, 2500),
		(assign, "$g_castle_requested_by_player", -1),
		(assign, "$g_castle_requested_for_troop", -1)
	],
	[
		("accept_decision",
		[],
		"Accept the decision.",
		[
			(call_script, "script_troop_add_gold", "trp_player", reg6),
			(change_screen_return)
		], ".")
	]
	),

	("leave_faction", 0, "Renouncing your oath is a grave act. Your liege may condemn you and confiscate your lands and holdings. However, if you return them of your own free will, he may let the betrayal go without a fight.",
	"none",
	[],
	[
		("leave_faction_give_back",
		[],
		"Renounce your oath and give up your holdings.",
		[
			(call_script, "script_player_leave_faction", 1),
			(change_screen_return)
		], "."),

		("leave_faction_hold",
		[
			(str_store_party_name, 2, "$g_center_to_give_to_player")
		],
		"Renounce your oath and rule your lands, including {s2}, in your own name.",
		[
			(call_script, "script_give_center_to_lord", "$g_center_to_give_to_player", "trp_player", 0),
			(call_script, "script_player_leave_faction", 0),
			(call_script, "script_activate_player_faction", "trp_player"),
			(change_screen_return)
		], "."),

		("leave_faction_cancel",
		[],
		"Remain loyal and accept the decision.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("give_center_to_player", mnf_scale_picture, "Your lord offers to extend your fiefs! {s1} sends word that {reg4?she:he} is willing to grant {s2} to you in payment for your loyal service, adding it to your holdings. What is your answer?",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(store_faction_of_party, ":faction_of_party_g_center_to_give_to_player", "$g_center_to_give_to_player"),
		(faction_get_slot, ":faction_of_party_g_center_to_give_to_player_leader", ":faction_of_party_g_center_to_give_to_player", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female", ":faction_of_party_g_center_to_give_to_player_leader"),
		(assign, reg4, reg0),
		(str_store_troop_name, 1, ":faction_of_party_g_center_to_give_to_player_leader"),
		(str_store_party_name, 2, "$g_center_to_give_to_player")
	],
	[
		("give_center_to_player_accept",
		[],
		"Accept the offer.",
		[
			(call_script, "script_give_center_to_lord", "$g_center_to_give_to_player", "trp_player", 0),
			(jump_to_menu, "mnu_give_center_to_player_2")
		], "."),

		("give_center_to_player_reject",
		[],
		"Reject. You have no interest in holding {s2}.",
		[
			(party_set_slot, "$g_center_to_give_to_player", slot_town_lord, -3),
			(change_screen_return)
		], ".")
	]
	),

	("give_center_to_player_2", 0, "With a brief ceremony, you are officially confirmed as the new lord of {s2}{reg3? and its bound village {s4}:}. {reg3?They:It} will make a fine part of your fiefdom. You can now claim the rents and revenues from your personal estates there, draft soldiers from the populace, and manage the lands as you see fit. However, you are also expected to defend your fief and your people from harm, as well as maintaining the rule of law and order.",
	"none",
	[
		(str_store_party_name, 2, "$g_center_to_give_to_player"),
		(assign, reg3, 0),
		(try_begin),
			(party_slot_eq, "$g_center_to_give_to_player", slot_party_type, 2),
			(try_for_range, ":party", "p_village_1", "p_salt_mine"),
				(party_slot_eq, ":party", slot_village_bound_center, "$g_center_to_give_to_player"),
				(str_store_party_name, 4, ":party"),
				(assign, reg3, 1),
			(try_end),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("oath_fulfilled", 0, "You had a contract with {s1} to serve {reg4?her:him} for a certain duration. Your contract has now expired. What will you do?",
	"none",
	[
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female", ":players_kingdom_leader"),
		(assign, reg4, reg0),
		(str_store_troop_name, 1, ":players_kingdom_leader")
	],
	[
		("renew_oath",
		[
			(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
			(str_store_troop_name, 1, ":players_kingdom_leader")
		],
		"Renew your contract with {s1} for another month.",
		[
			(store_current_day, ":current_day"),
			(store_add, "$mercenary_service_next_renew_day", ":current_day", 30),
			(change_screen_return)
		], "."),

		("dont_renew_oath",
		[],
		"Become free of your bond.",
		[
			(call_script, "script_player_leave_faction", 1),
			(change_screen_return)
		], ".")
	]
	),

	("siege_started_defender", mnf_enable_hot_keys, "{s1} is launching an assault against the walls of {s2}. You have {reg10} troops fit for battle against the enemy's {reg11}. Your force's current commander is {s5}. You decide to... {s4}",
	"none",
	[
		(str_clear, 4),
		(select_enemy, 1),
		(assign, "$g_enemy_party", "$g_encountered_party_2"),
		(assign, "$g_ally_party", "$g_encountered_party"),
		(str_store_party_name, 1, "$g_enemy_party"),
		(str_store_party_name, 2, "$g_ally_party"),
		(call_script, "script_encounter_calculate_fit"),
		(try_begin),
			(eq, "$g_siege_first_encounter", 1),
			(call_script, "script_let_nearby_parties_join_current_battle", 0, 1),
			(call_script, "script_encounter_init_variables"),
		(try_end),
		(try_begin),
			(eq, "$g_siege_first_encounter", 0),
			(try_begin),
				(call_script, "script_party_count_members_with_full_health", "p_collective_enemy"),
				(assign, ":var_1", reg0),
				(call_script, "script_party_count_members_with_full_health", "p_collective_friends"),
				(assign, ":var_2", reg0),
				(assign, ":value", 0),
				(try_begin),
					(eq, "$g_battle_result", 1),
					(eq, ":var_1", 0),
					(assign, ":value", 1),
				(else_try),
					(eq, "$g_engaged_enemy", 1),
					(le, "$g_enemy_fit_for_battle", 0),
					(ge, "$g_friend_fit_for_battle", 1),
					(assign, ":value", 1),
				(try_end),
				(this_or_next|eq, ":value", 1),
				(eq, "$g_enemy_surrenders", 1),
				(assign, "$g_next_menu", -1),
				(jump_to_menu, "mnu_total_victory"),
			(else_try),
				(assign, ":value_2", 0),
				(try_begin),
					(this_or_next|eq, "$g_battle_result", -1),
					(troop_is_wounded, "trp_player"),
					(eq, ":var_2", 0),
					(assign, ":value_2", 1),
				(try_end),
				(this_or_next|eq, ":value_2", 1),
				(eq, "$g_player_surrenders", 1),
				(assign, "$g_next_menu", "mnu_captivity_start_under_siege_defeat"),
				(jump_to_menu, "mnu_total_defeat"),
			(else_try),
				(assign, ":value_3", 0),
				(try_begin),
					(eq, "$g_battle_result", 1),
					(assign, ":value_3", 1),
				(else_try),
					(eq, "$g_battle_result", 0),
					(store_div, ":value_4", "$g_enemy_fit_for_battle", 3),
					(lt, ":value_4", "$g_friend_fit_for_battle"),
					(assign, ":value_3", 1),
				(else_try),
					(store_random_in_range, ":random_in_range_0_100", 0, 100),
					(store_mul, ":value_5", ":var_2", 13),
					(val_div, ":value_5", 10),
					(ge, ":value_5", ":var_1"),
					(lt, ":random_in_range_0_100", 10),
					(neq, "$new_encounter", 1),
					(assign, ":value_3", 1),
				(try_end),
				(try_begin),
					(eq, ":value_3", 1),
					(party_get_slot, ":g_encountered_party_center_siege_hardness", "$g_encountered_party", slot_center_siege_hardness),
					(val_add, ":g_encountered_party_center_siege_hardness", 100),
					(party_set_slot, "$g_encountered_party", slot_center_siege_hardness, ":g_encountered_party_center_siege_hardness"),
					(party_set_slot, "$g_enemy_party", slot_party_retreat_flag, 1),
					(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
						(troop_slot_eq, ":troop", slot_troop_occupation, 2),
						(neg|troop_slot_ge, ":troop", 8, 0),
						(troop_get_slot, ":troop_leaded_party", ":troop", slot_troop_leaded_party),
						(gt, ":troop_leaded_party", 0),
						(party_slot_eq, ":troop_leaded_party", slot_party_ai_state, 1),
						(party_slot_eq, ":troop_leaded_party", slot_party_ai_object, "$g_encountered_party"),
						(party_slot_eq, ":troop_leaded_party", slot_party_ai_substate, 1),
						(call_script, "script_party_set_ai_state", ":troop_leaded_party", -1, -1),
						(call_script, "script_party_set_ai_state", ":troop_leaded_party", 1, "$g_encountered_party"),
					(try_end),
					(display_message, "@The enemy has been forced to retreat. The assault is over, but the siege continues."),
					(assign, "$g_battle_simulation_cancel_for_party", "$g_encountered_party"),
					(leave_encounter),
					(change_screen_return),
					(assign, "$g_battle_simulation_auto_enter_town_after_battle", "$g_encountered_party"),
				(try_end),
			(try_end),
		(try_end),
		(assign, "$g_siege_first_encounter", 0),
		(assign, "$new_encounter", 0),
		(str_clear, 4),
		(neq, "$freelancer_state", 1),
		(str_store_troop_name, 5, "$g_player_troop"),
		(set_player_troop, "$g_player_troop"),
		(try_begin),
			(party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
			(str_store_string, 4, "@{s4}^^The troops you selected are ready to join you in battle."),
		(else_try),
			(str_store_string, 4, "@{s4}^^Your captains will deal with troop assignments."),
		(try_end),
		(try_begin),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
			(str_store_string, 4, "@{s4}^^Your orders have been sent to your captains."),
		(else_try),
			(str_store_string, 4, "@{s4}^^There is no tactical plan in place."),
		(try_end)
	],
	[
		("dplmc_negotiate_with_besieger",
		[
			(neq, "$freelancer_state", 1),
			(party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
			(party_slot_ge, "$current_town", 54, 1)
		],
		"Negotiate with the besieger.",
		[
			(jump_to_menu, "mnu_dplmc_negotiate_besieger")
		], "."),

		("change_commander_siege_defender",
		[
			(neq, "$freelancer_state", 1),
			(set_player_troop, "$g_player_troop")
		],
		"Change commander.",
		[
			(start_presentation, "prsnt_change_commander")
		], "."),

		("deployment",
		[
			(neq, "$freelancer_state", 1),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0),
			(party_get_skill_level, ":skill_level_main_party_15", "p_main_party", 15),
			(ge, ":skill_level_main_party_15", 2),
			(call_script, "script_party_count_fit_for_battle", "p_collective_friends"),
			(assign, ":var_2", reg0),
			(call_script, "script_party_count_fit_for_battle", "p_collective_enemy"),
			(assign, ":var_3", reg0),
			(store_add, ":value", ":var_2", ":var_3"),
			(party_get_slot, ":main_party_center_accumulated_tariffs", "p_main_party", slot_center_accumulated_tariffs),
			(gt, ":value", ":main_party_center_accumulated_tariffs")
		],
		"Choose who will join you in battle.",
		[
			(assign, "$g_next_menu", "mnu_siege_started_defender"),
			(start_presentation, "prsnt_prebattle_custom_deployment")
		], "."),

		("orders",
		[
			(neq, "$freelancer_state", 1),
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0),
			(party_get_skill_level, ":skill_level_main_party_15", "p_main_party", 15),
			(ge, ":skill_level_main_party_15", 2)
		],
		"Plan your battle with the enemy.",
		[
			(assign, "$g_next_menu", "mnu_siege_started_defender"),
			(start_presentation, "prsnt_prebattle_orders")
		], "."),

		("do_orders",
		[
			(neq, "$freelancer_state", 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1)
		],
		"Enough planning. To battle!",
		[
			(party_set_slot, "p_main_party", slot_center_shipyards, 0),
			(party_set_next_battle_simulation_time, "$g_encountered_party", -1),
			(assign, "$g_battle_result", 0),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(party_get_slot, ":g_encountered_party_town_walls", "$g_encountered_party", slot_town_walls),
			(else_try),
				(party_get_slot, ":g_encountered_party_town_walls", "$g_encountered_party", slot_town_center),
			(try_end),
			(call_script, "script_calculate_battle_advantage"),
			(val_mul, reg0, 2),
			(val_div, reg0, 3),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(try_begin),
				(party_slot_eq, "$current_town", slot_center_siege_with_belfry, 1),
				(set_jump_mission, "mt_castle_attack_walls_belfry"),
			(else_try),
				(set_jump_mission, "mt_castle_attack_walls_ladder"),
			(try_end),
			(jump_to_scene, ":g_encountered_party_town_walls"),
			(assign, "$g_next_menu", "mnu_siege_started_defender"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("clear_orders",
		[
			(neq, "$freelancer_state", 1),
			(this_or_next|party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 1)
		],
		"Re-assess the situation.",
		[
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_accumulated_rents, 1),
				(party_set_slot, "p_main_party", slot_center_accumulated_rents, 0),
			(try_end),
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
				(party_set_slot, "p_main_party", slot_center_shipyards, 0),
				(party_set_slot, "p_main_party", slot_center_household_gardens, 0),
			(try_end),
			(jump_to_menu, "mnu_siege_started_defender")
		], "."),

		("siege_defender_join_battle",
		[
			(neg|troop_is_wounded, "$g_player_troop"),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Join the battle.",
		[
			(try_begin),
				(party_slot_eq, "p_main_party", slot_center_shipyards, 1),
				(party_set_slot, "p_main_party", slot_center_shipyards, 0),
			(try_end),
			(party_set_next_battle_simulation_time, "$g_encountered_party", -1),
			(assign, "$g_battle_result", 0),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(party_get_slot, ":g_encountered_party_town_walls", "$g_encountered_party", slot_town_walls),
			(else_try),
				(party_get_slot, ":g_encountered_party_town_walls", "$g_encountered_party", slot_town_center),
			(try_end),
			(call_script, "script_calculate_battle_advantage"),
			(val_mul, reg0, 2),
			(val_div, reg0, 3),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(try_begin),
				(party_slot_eq, "$current_town", slot_center_siege_with_belfry, 1),
				(set_jump_mission, "mt_castle_attack_walls_belfry"),
			(else_try),
				(set_jump_mission, "mt_castle_attack_walls_ladder"),
			(try_end),
			(jump_to_scene, ":g_encountered_party_town_walls"),
			(assign, "$g_next_menu", "mnu_siege_started_defender"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("siege_defender_troops_join_battle",
		[
			(neq, "$freelancer_state", 1),
			(call_script, "script_party_count_members_with_full_health", "p_main_party"),
			(this_or_next|troop_is_wounded, "trp_player"),
			(ge, reg0, 3),
			(party_slot_eq, "p_main_party", slot_center_shipyards, 0)
		],
		"Order your men to join the battle without you.",
		[
			(party_set_next_battle_simulation_time, "$g_encountered_party", -1),
			(select_enemy, 1),
			(assign, "$g_enemy_party", "$g_encountered_party_2"),
			(assign, "$g_ally_party", "$g_encountered_party"),
			(assign, "$g_siege_join", 1),
			(jump_to_menu, "mnu_siege_join_defense")
		], "."),

		("join_wounded",
		[
			(eq, "$freelancer_state", 1),
			(troop_is_wounded, "trp_player")
		],
		"You are too wounded to fight.",
		[
			(leave_encounter),
			(change_screen_map)
		], ".")
	]
	),

	("siege_join_defense", mnf_disable_all_keys, "{s4}^^Your casualties: {s8}^^Allies' casualties: {s9}^^Enemy casualties: {s10}",
	"none",
	[
		(try_begin),
			(eq, "$g_siege_join", 1),
			(call_script, "script_party_calculate_strength", "p_main_party", 1),
			(assign, ":value", reg0),
			(val_div, ":value", 5),
		(else_try),
			(assign, ":value", 0),
		(try_end),
		(call_script, "script_party_calculate_strength", "p_collective_ally", 0),
		(assign, ":var_2", reg0),
		(val_div, ":var_2", 5),
		(call_script, "script_party_calculate_strength", "p_collective_enemy", 0),
		(assign, ":var_3", reg0),
		(val_div, ":var_3", 10),
		(store_add, ":value_2", ":value", ":var_2"),
		(try_begin),
			(eq, ":value_2", 0),
			(store_div, ":value_3", ":var_3", 2),
		(else_try),
			(assign, ":value_3", ":var_3"),
			(val_mul, ":value_3", ":value"),
			(val_div, ":value_3", ":value_2"),
		(try_end),
		(val_sub, ":var_3", ":value_3"),
		(inflict_casualties_to_party_group, "p_main_party", ":value_3", "p_temp_casualties"),
		(call_script, "script_print_casualties_to_s0", "p_temp_casualties", 0),
		(str_store_string_reg, 8, 0),
		(inflict_casualties_to_party_group, "$g_ally_party", ":var_3", "p_temp_casualties"),
		(call_script, "script_print_casualties_to_s0", "p_temp_casualties", 0),
		(str_store_string_reg, 9, 0),
		(party_collect_attachments_to_party, "$g_ally_party", "p_collective_ally"),
		(inflict_casualties_to_party_group, "$g_enemy_party", ":value_2", "p_temp_casualties"),
		(call_script, "script_print_casualties_to_s0", "p_temp_casualties", 0),
		(str_store_string_reg, 10, 0),
		(party_collect_attachments_to_party, "$g_enemy_party", "p_collective_enemy"),
		(try_begin),
			(call_script, "script_party_count_members_with_full_health", "p_main_party"),
			(le, reg0, 0),
			(str_store_string, 4, "str_siege_defender_order_attack_failure"),
		(else_try),
			(call_script, "script_party_count_members_with_full_health", "p_collective_enemy"),
			(le, reg0, 0),
			(assign, "$g_battle_result", 1),
			(str_store_string, 4, "str_siege_defender_order_attack_success"),
		(else_try),
			(str_store_string, 4, "str_siege_defender_order_attack_continue"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_siege_started_defender")
		], ".")
	]
	),

	("enter_your_own_castle", 0, "{s10}",
	"none",
	[
		(try_begin),
			(is_between, "$players_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(try_begin),
				(eq, 1, "$character_gender"),
				(call_script, "script_dplmc_print_cultural_word_to_sreg", "trp_player", 5, 10),
			(else_try),
				(call_script, "script_dplmc_print_cultural_word_to_sreg", "trp_player", 4, 10),
			(try_end),
			(str_store_string, 10, "@As you approach, you are spotted by the castle guards, who welcome you and open the gates for their {s10}."),
		(else_try),
			(neg|is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(faction_get_slot, ":player_supporters_faction_leader", "fac_player_supporters_faction", slot_faction_leader),
			(eq, ":player_supporters_faction_leader", "trp_player"),
			(str_store_string, 10, "@As you approach, you are spotted by the castle guards, who welcome you and open the gates for their sovereign."),
		(else_try),
			(str_store_string, 10, "@As you approach, you are spotted by the castle guards, who welcome you and open the gates for their {lord/lady}."),
		(try_end),
		(str_store_party_name, 2, "$current_town")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("village", mnf_enable_hot_keys, "{s10} {s12}^{s11}^{s6}{s7}",
	"none",
	[
		(assign, "$current_town", "$g_encountered_party"),
		(call_script, "script_update_center_recon_notes", "$current_town"),
		(assign, "$g_defending_against_siege", 0),
		(assign, "$g_battle_result", 0),
		(assign, "$qst_collect_taxes_currently_collecting", 0),
		(assign, "$qst_train_peasants_against_bandits_currently_training", 0),
		(try_begin),
			(gt, "$auto_enter_menu_in_center", 0),
			(jump_to_menu, "$auto_enter_menu_in_center"),
			(assign, "$auto_enter_menu_in_center", 0),
		(try_end),
		(try_begin),
			(neq, "$g_player_raiding_village", "$current_town"),
			(assign, "$g_player_raiding_village", 0),
		(else_try),
			(jump_to_menu, "mnu_village_loot_continue"),
		(try_end),
		(try_begin),
			(eq, "$g_town_visit_after_rest", 1),
			(assign, "$g_town_visit_after_rest", 0),
		(try_end),
		(str_store_party_name, 2, "$current_town"),
		(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
		(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
		(str_store_faction_name, 9, ":faction_of_party_current_town"),
		(try_begin),
			(ge, ":current_town_town_lord", 0),
			(str_store_troop_name, 8, ":current_town_town_lord"),
			(str_store_string, 7, "@{s8} of {s9}"),
		(try_end),
		(str_clear, 10),
		(str_clear, 12),
		(try_begin),
			(neg|party_slot_eq, "$current_town", slot_village_state, 2),
			(str_store_string, 60, 2),
			(party_get_slot, ":current_town_town_prosperity", "$current_town", slot_town_prosperity),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(assign, reg4, ":current_town_town_prosperity"),
				(display_message, "@{!}Prosperity: {reg4}"),
			(try_end),
			(store_div, ":value", ":current_town_town_prosperity", 10),
			(val_min, ":value", 9),
			(val_add, ":value", "str_village_prosperity_0"),
			(str_store_string, 10, ":value"),
			(store_div, ":value", ":current_town_town_prosperity", 20),
			(val_min, ":value", 4),
			(try_begin),
				(is_between, "$current_town", "p_village_91", "p_salt_mine"),
				(val_add, ":value", "str_oasis_village_alt_prosperity_0"),
			(else_try),
				(val_add, ":value", "str_village_alt_prosperity_0"),
			(try_end),
			(str_store_string, 12, ":value"),
		(try_end),
		(str_clear, 11),
		(assign, ":var_5", reg0),
		(assign, ":var_6", reg4),
		(assign, reg0, 0),
		(assign, reg4, 0),
		(try_begin),
			(lt, ":current_town_town_lord", 1),
		(else_try),
			(call_script, "script_troop_get_family_relation_to_troop", ":current_town_town_lord", "trp_player"),
			(ge, reg0, 1),
		(else_try),
			(eq, ":faction_of_party_current_town", "$players_kingdom"),
			(is_between, ":faction_of_party_current_town", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(faction_slot_eq, ":faction_of_party_current_town", slot_faction_leader, ":current_town_town_lord"),
			(str_store_string, 11, "@liege"),
			(assign, reg0, 1),
		(else_try),
			(eq, ":faction_of_party_current_town", "$players_oath_renounced_against_kingdom"),
			(is_between, ":faction_of_party_current_town", "fac_kingdom_1", "fac_kingdoms_end"),
			(faction_slot_eq, ":faction_of_party_current_town", slot_faction_leader, ":current_town_town_lord"),
			(str_store_string, 11, "@former liege"),
			(assign, reg0, 1),
		(else_try),
			(this_or_next|neg|troop_is_hero, ":current_town_town_lord"),
			(troop_slot_eq, ":current_town_town_lord", slot_troop_met, 0),
		(else_try),
			(call_script, "script_dplmc_is_affiliated_family_member", ":current_town_town_lord"),
			(ge, reg0, 1),
			(try_begin),
				(ge, "$g_encountered_party_relation", 0),
				(str_store_string, 11, "str_dplmc_ally"),
			(else_try),
				(str_store_string, 11, "@affiliate"),
			(try_end),
		(else_try),
			(call_script, "script_troop_get_player_relation", ":current_town_town_lord"),
			(is_between, ":current_town_town_lord", "trp_npc1", "trp_kingdom_1_lord"),
			(neg|troop_slot_eq, ":current_town_town_lord", slot_troop_playerparty_history, 8),
			(try_begin),
				(ge, "$g_encountered_party_relation", 0),
				(ge, reg0, 50),
				(str_store_string, 11, "str_dplmc_ally"),
			(else_try),
				(ge, "$g_encountered_party_relation", 0),
				(ge, reg0, 20),
				(str_store_string, 11, "str_dplmc_friend"),
			(else_try),
				(str_store_string, 11, "@former companion"),
			(try_end),
			(assign, reg0, 1),
		(else_try),
			(lt, "$g_encountered_party_relation", 0),
			(assign, reg0, 0),
		(else_try),
			(val_div, reg0, 50),
			(ge, reg0, 1),
			(str_store_string, 11, "str_dplmc_friend"),
		(else_try),
			(eq, ":faction_of_party_current_town", "$players_kingdom"),
			(faction_slot_eq, ":faction_of_party_current_town", slot_faction_marshall, ":current_town_town_lord"),
			(str_store_string, 11, "@marshall"),
		(else_try),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", ":faction_of_party_current_town"),
			(val_add, reg0, 1),
			(val_sub, reg0, 50),
			(ge, reg0, 1),
			(str_store_string, 11, "@vassal"),
		(else_try),
			(assign, reg0, 0),
		(try_end),
		(try_begin),
			(party_slot_eq, "$current_town", slot_village_state, 2),
		(else_try),
			(eq, ":current_town_town_lord", "trp_player"),
			(str_store_string, 11, "@ This village and the surrounding lands belong to you."),
		(else_try),
			(ge, reg0, 1),
			(str_store_string, 11, "@ You remember that this village and the surrounding lands belong to your {s11} {s7}."),
		(else_try),
			(ge, ":current_town_town_lord", 0),
			(str_store_string, 11, "@ You remember that this village and the surrounding lands belong to {s7}."),
		(else_try),
			(str_store_string, 11, "@ These lands belong to no one."),
		(try_end),
		(assign, reg0, ":var_5"),
		(assign, reg4, ":var_6"),
		(str_clear, 7),
		(try_begin),
			(neg|party_slot_eq, "$current_town", slot_village_state, 2),
			(party_get_slot, ":current_town_center_player_relation", "$current_town", slot_center_player_relation),
			(call_script, "script_describe_center_relation_to_s3", ":current_town_center_player_relation"),
			(assign, reg9, ":current_town_center_player_relation"),
			(str_store_string, 7, "@{!} {s3} ({reg9})."),
		(try_end),
		(str_clear, 6),
		(try_begin),
			(party_slot_ge, "$current_town", 39, 1),
			(party_get_slot, ":current_town_village_infested_by_bandits", "$current_town", slot_village_infested_by_bandits),
			(store_character_level, ":character_level_player", "trp_player"),
			(store_add, "$qst_eliminate_bandits_infesting_village_num_bandits", ":character_level_player", 10),
			(val_mul, "$qst_eliminate_bandits_infesting_village_num_bandits", 12),
			(val_div, "$qst_eliminate_bandits_infesting_village_num_bandits", 10),
			(store_random_in_range, "$qst_eliminate_bandits_infesting_village_num_villagers", 25, 30),
			(assign, reg8, "$qst_eliminate_bandits_infesting_village_num_bandits"),
			(str_store_troop_name_by_count, 35, ":current_town_village_infested_by_bandits", "$qst_eliminate_bandits_infesting_village_num_bandits"),
			(str_store_string, 6, "@ The village is infested by {reg8} {s35}."),
			(assign, "$g_enemy_party", -1),
			(assign, "$g_ally_party", -1),
			(try_begin),
				(troop_get_slot, ":troop_trees_847", "$troop_trees", 847),
				(eq, ":current_town_village_infested_by_bandits", ":troop_trees_847"),
				(set_background_mesh, "mesh_pic_forest_bandits"),
			(else_try),
				(troop_get_slot, ":troop_trees_849", "$troop_trees", 849),
				(eq, ":current_town_village_infested_by_bandits", ":troop_trees_849"),
				(set_background_mesh, "mesh_pic_steppe_bandits"),
			(else_try),
				(troop_get_slot, ":troop_trees_850", "$troop_trees", 850),
				(eq, ":current_town_village_infested_by_bandits", ":troop_trees_850"),
				(set_background_mesh, "mesh_pic_steppe_bandits"),
			(else_try),
				(troop_get_slot, ":troop_trees_846", "$troop_trees", 846),
				(eq, ":current_town_village_infested_by_bandits", ":troop_trees_846"),
				(set_background_mesh, "mesh_pic_mountain_bandits"),
			(else_try),
				(troop_get_slot, ":troop_trees_848", "$troop_trees", 848),
				(eq, ":current_town_village_infested_by_bandits", ":troop_trees_848"),
				(set_background_mesh, "mesh_pic_sea_raiders"),
			(else_try),
				(troop_get_slot, ":troop_trees_859", "$troop_trees", 859),
				(eq, ":current_town_village_infested_by_bandits", ":troop_trees_859"),
				(str_store_string, 6, "@ The peasants hired mercenaries and are rebelling against you."),
				(set_background_mesh, "mesh_pic_villageriot"),
			(else_try),
				(set_background_mesh, "mesh_pic_bandits"),
			(try_end),
		(else_try),
			(check_quest_active, "qst_hunt_down_girl"),
			(party_slot_ge, "$current_town", 40, 1),
			(neq, ":faction_of_party_current_town", "fac_outlaws"),
			(party_get_slot, ":current_town_village_infested_by_bandits", "$current_town", 40),
			(store_character_level, ":character_level_player", "trp_player"),
			(store_add, "$qst_eliminate_wedding_infesting_village_num_guests", ":character_level_player", 10),
			(val_mul, "$qst_eliminate_wedding_infesting_village_num_guests", 12),
			(val_div, "$qst_eliminate_wedding_infesting_village_num_guests", 10),
			(assign, reg8, "$qst_eliminate_wedding_infesting_village_num_guests"),
			(str_store_troop_name_by_count, 35, ":current_town_village_infested_by_bandits", "$qst_eliminate_wedding_infesting_village_num_guests"),
			(str_store_string, 6, "@^A wedding is taking place here. People are singing and laughing... until they catch sight of you. The mood of the crowd quickly turns sour, and the men charge at you, wielding clubs and daggers."),
		(else_try),
			(check_quest_active, "qst_kidnapped_wife"),
			(quest_slot_eq, "qst_kidnapped_wife", slot_quest_giver_center, "$g_encountered_party"),
			(quest_slot_eq, "qst_kidnapped_wife", slot_quest_current_state, 3),
			(modify_visitors_at_site, "scn_conversation_scene"),
			(reset_visitors),
			(set_visitor, 0, "trp_player"),
			(set_visitor, 17, "trp_kidnapped_wife"),
			(set_jump_mission, "mt_conversation_encounter"),
			(jump_to_scene, "scn_conversation_scene"),
			(assign, "$talk_context", 10),
			(change_screen_map_conversation, "trp_kidnapped_wife"),
		(else_try),
			(party_slot_eq, "$current_town", slot_village_state, 2),
			(str_store_string, 6, "@ The village has been looted. A handful of souls scatter as you pass through the burnt out houses."),
			(try_begin),
				(neq, "$g_player_raid_complete", 1),
				(play_track, "track_min_empty_village", 1),
			(try_end),
			(set_background_mesh, "mesh_pic_looted_village"),
		(else_try),
			(party_slot_eq, "$current_town", slot_village_state, 1),
			(str_store_string, 6, "@ The village is being raided."),
		(else_try),
			(party_get_current_terrain, ":current_terrain_l_current_town", "$current_town"),
			(try_begin),
				(this_or_next|eq, ":current_terrain_l_current_town", 5),
				(eq, ":current_terrain_l_current_town", 13),
				(set_background_mesh, "mesh_pic_village_s"),
			(else_try),
				(this_or_next|eq, ":current_terrain_l_current_town", 2),
				(eq, ":current_terrain_l_current_town", 10),
				(set_background_mesh, "mesh_pic_village_p"),
			(else_try),
				(set_background_mesh, "mesh_pic_village_w"),
			(try_end),
		(try_end),
		(try_begin),
			(eq, "$g_player_raid_complete", 1),
			(assign, "$g_player_raid_complete", 0),
			(jump_to_menu, "mnu_village_loot_complete"),
		(else_try),
			(party_get_slot, ":current_town_village_raided_by", "$current_town", slot_village_raided_by),
			(gt, ":current_town_village_raided_by", 0),
		(try_end),
		(try_begin),
			(eq, "$g_leave_town", 1),
			(assign, "$g_leave_town", 0),
			(change_screen_return),
		(try_end),
		(try_begin),
			(store_time_of_day, ":time_of_day"),
			(ge, ":time_of_day", 5),
			(lt, ":time_of_day", 21),
			(assign, "$town_nighttime", 0),
		(else_try),
			(assign, "$town_nighttime", 1),
		(try_end)
	],
	[
		("village_manage",
		[
			(neg|party_slot_eq, "$current_town", slot_village_state, 2),
			(neg|party_slot_eq, "$current_town", slot_village_state, 1),
			(neg|party_slot_ge, "$current_town", 39, 1),
			(neg|party_slot_ge, "$current_town", 40, 1),
			(party_slot_eq, "$current_town", slot_town_lord, "trp_player")
		],
		"Manage this village.",
		[
			(assign, "$g_next_menu", "mnu_village"),
			(jump_to_menu, "mnu_center_manage")
		], "."),

		("recruit_volunteers",
		[
			(this_or_next|eq, "$current_town", "p_village_1"),
			(this_or_next|eq, "$current_town", "p_village_2"),
			(this_or_next|eq, "$current_town", "p_village_3"),
			(this_or_next|eq, "$current_town", "p_village_4"),
			(this_or_next|eq, "$current_town", "p_village_5"),
			(this_or_next|eq, "$current_town", "p_village_6"),
			(this_or_next|eq, "$current_town", "p_village_7"),
			(this_or_next|eq, "$current_town", "p_village_8"),
			(this_or_next|eq, "$current_town", "p_village_9"),
			(this_or_next|eq, "$current_town", "p_village_10"),
			(this_or_next|eq, "$current_town", "p_village_11"),
			(this_or_next|eq, "$current_town", "p_village_12"),
			(this_or_next|eq, "$current_town", "p_village_13"),
			(this_or_next|eq, "$current_town", "p_village_14"),
			(this_or_next|eq, "$current_town", "p_village_15"),
			(this_or_next|eq, "$current_town", "p_village_16"),
			(this_or_next|eq, "$current_town", "p_village_17"),
			(this_or_next|eq, "$current_town", "p_village_18"),
			(this_or_next|eq, "$current_town", "p_village_19"),
			(this_or_next|eq, "$current_town", "p_village_20"),
			(this_or_next|eq, "$current_town", "p_village_21"),
			(this_or_next|eq, "$current_town", "p_village_22"),
			(this_or_next|eq, "$current_town", "p_village_23"),
			(this_or_next|eq, "$current_town", "p_village_24"),
			(this_or_next|eq, "$current_town", "p_village_25"),
			(this_or_next|eq, "$current_town", "p_village_26"),
			(this_or_next|eq, "$current_town", "p_village_27"),
			(this_or_next|eq, "$current_town", "p_village_28"),
			(this_or_next|eq, "$current_town", "p_village_29"),
			(this_or_next|eq, "$current_town", "p_village_30"),
			(this_or_next|eq, "$current_town", "p_village_33"),
			(this_or_next|eq, "$current_town", "p_village_34"),
			(this_or_next|eq, "$current_town", "p_village_35"),
			(this_or_next|eq, "$current_town", "p_village_36"),
			(this_or_next|eq, "$current_town", "p_village_37"),
			(this_or_next|eq, "$current_town", "p_village_38"),
			(this_or_next|eq, "$current_town", "p_village_39"),
			(this_or_next|eq, "$current_town", "p_village_40"),
			(this_or_next|eq, "$current_town", "p_village_41"),
			(this_or_next|eq, "$current_town", "p_village_42"),
			(this_or_next|eq, "$current_town", "p_village_43"),
			(this_or_next|eq, "$current_town", "p_village_44"),
			(this_or_next|eq, "$current_town", "p_village_45"),
			(this_or_next|eq, "$current_town", "p_village_46"),
			(this_or_next|eq, "$current_town", "p_village_47"),
			(this_or_next|eq, "$current_town", "p_village_48"),
			(this_or_next|eq, "$current_town", "p_village_49"),
			(this_or_next|eq, "$current_town", "p_village_50"),
			(this_or_next|eq, "$current_town", "p_village_51"),
			(this_or_next|eq, "$current_town", "p_village_52"),
			(this_or_next|eq, "$current_town", "p_village_53"),
			(this_or_next|eq, "$current_town", "p_village_54"),
			(this_or_next|eq, "$current_town", "p_village_55"),
			(this_or_next|eq, "$current_town", "p_village_56"),
			(this_or_next|eq, "$current_town", "p_village_57"),
			(this_or_next|eq, "$current_town", "p_village_58"),
			(this_or_next|eq, "$current_town", "p_village_59"),
			(this_or_next|eq, "$current_town", "p_village_60"),
			(this_or_next|eq, "$current_town", "p_village_61"),
			(this_or_next|eq, "$current_town", "p_village_62"),
			(this_or_next|eq, "$current_town", "p_village_63"),
			(this_or_next|eq, "$current_town", "p_village_64"),
			(this_or_next|eq, "$current_town", "p_village_65"),
			(this_or_next|eq, "$current_town", "p_village_66"),
			(this_or_next|eq, "$current_town", "p_village_67"),
			(this_or_next|eq, "$current_town", "p_village_69"),
			(this_or_next|eq, "$current_town", "p_village_70"),
			(this_or_next|eq, "$current_town", "p_village_71"),
			(this_or_next|eq, "$current_town", "p_village_72"),
			(this_or_next|eq, "$current_town", "p_village_73"),
			(this_or_next|eq, "$current_town", "p_village_74"),
			(this_or_next|eq, "$current_town", "p_village_75"),
			(this_or_next|eq, "$current_town", "p_village_76"),
			(this_or_next|eq, "$current_town", "p_village_77"),
			(this_or_next|eq, "$current_town", "p_village_78"),
			(this_or_next|eq, "$current_town", "p_village_79"),
			(this_or_next|eq, "$current_town", "p_village_80"),
			(this_or_next|eq, "$current_town", "p_village_81"),
			(this_or_next|eq, "$current_town", "p_village_82"),
			(this_or_next|eq, "$current_town", "p_village_83"),
			(this_or_next|eq, "$current_town", "p_village_84"),
			(this_or_next|eq, "$current_town", "p_village_85"),
			(this_or_next|eq, "$current_town", "p_village_86"),
			(this_or_next|eq, "$current_town", "p_village_87"),
			(this_or_next|eq, "$current_town", "p_village_88"),
			(this_or_next|eq, "$current_town", "p_village_89"),
			(this_or_next|eq, "$current_town", "p_village_90"),
			(this_or_next|eq, "$current_town", "p_village_91"),
			(this_or_next|eq, "$current_town", "p_village_92"),
			(this_or_next|eq, "$current_town", "p_village_93"),
			(this_or_next|eq, "$current_town", "p_village_94"),
			(this_or_next|eq, "$current_town", "p_village_95"),
			(this_or_next|eq, "$current_town", "p_village_96"),
			(this_or_next|eq, "$current_town", "p_village_97"),
			(this_or_next|eq, "$current_town", "p_village_98"),
			(this_or_next|eq, "$current_town", "p_village_99"),
			(this_or_next|eq, "$current_town", "p_village_100"),
			(this_or_next|eq, "$current_town", "p_village_101"),
			(this_or_next|eq, "$current_town", "p_village_102"),
			(this_or_next|eq, "$current_town", "p_village_103"),
			(this_or_next|eq, "$current_town", "p_village_104"),
			(this_or_next|eq, "$current_town", "p_village_105"),
			(this_or_next|eq, "$current_town", "p_village_106"),
			(this_or_next|eq, "$current_town", "p_village_107"),
			(this_or_next|eq, "$current_town", "p_village_108"),
			(this_or_next|eq, "$current_town", "p_village_109"),
			(this_or_next|eq, "$current_town", "p_village_110"),
			(this_or_next|eq, "$current_town", "p_village_111"),
			(this_or_next|eq, "$current_town", "p_village_112"),
			(this_or_next|eq, "$current_town", "p_village_113"),
			(this_or_next|eq, "$current_town", "p_village_114"),
			(this_or_next|eq, "$current_town", "p_village_115"),
			(this_or_next|eq, "$current_town", "p_village_116"),
			(this_or_next|eq, "$current_town", "p_village_117"),
			(this_or_next|eq, "$current_town", "p_village_118"),
			(this_or_next|eq, "$current_town", "p_village_119"),
			(this_or_next|eq, "$current_town", "p_village_120"),
			(this_or_next|eq, "$current_town", "p_village_121"),
			(this_or_next|eq, "$current_town", "p_village_122"),
			(this_or_next|eq, "$current_town", "p_village_124"),
			(this_or_next|eq, "$current_town", "p_village_128"),
			(this_or_next|eq, "$current_town", "p_village_136"),
			(this_or_next|eq, "$current_town", "p_village_141"),
			(this_or_next|eq, "$current_town", "p_village_142"),
			(this_or_next|eq, "$current_town", "p_village_155"),
			(this_or_next|eq, "$current_town", "p_village_157"),
			(this_or_next|eq, "$current_town", "p_village_159"),
			(this_or_next|eq, "$current_town", "p_village_160"),
			(this_or_next|eq, "$current_town", "p_village_161"),
			(this_or_next|eq, "$current_town", "p_village_162"),
			(this_or_next|eq, "$current_town", "p_village_163"),
			(this_or_next|eq, "$current_town", "p_village_164"),
			(this_or_next|eq, "$current_town", "p_village_169"),
			(this_or_next|eq, "$current_town", "p_village_170"),
			(this_or_next|eq, "$current_town", "p_village_183"),
			(this_or_next|eq, "$current_town", "p_village_193"),
			(this_or_next|eq, "$current_town", "p_village_194"),
			(this_or_next|eq, "$current_town", "p_village_195"),
			(this_or_next|eq, "$current_town", "p_village_196"),
			(this_or_next|eq, "$current_town", "p_village_197"),
			(this_or_next|eq, "$current_town", "p_village_198"),
			(this_or_next|eq, "$current_town", "p_village_199"),
			(this_or_next|eq, "$current_town", "p_village_200"),
			(this_or_next|eq, "$current_town", "p_village_201"),
			(this_or_next|eq, "$current_town", "p_village_202"),
			(this_or_next|eq, "$current_town", "p_village_203"),
			(this_or_next|eq, "$current_town", "p_village_204"),
			(this_or_next|eq, "$current_town", "p_village_205"),
			(this_or_next|eq, "$current_town", "p_village_206"),
			(eq, "$current_town", "p_village_207"),
			(call_script, "script_cf_village_recruit_volunteers_cond")
		],
		"Recruit peasants.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_volunteers"),
			(try_end)
		], "."),

		("village_center",
		[
			(neg|party_slot_eq, "$current_town", slot_village_state, 2),
			(neg|party_slot_eq, "$current_town", slot_village_state, 1),
			(neg|party_slot_ge, "$current_town", 39, 1),
			(neg|party_slot_ge, "$current_town", 40, 1)
		],
		"Go to the village center.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
				(modify_visitors_at_site, ":current_town_town_center"),
				(reset_visitors),
				(party_get_slot, ":current_town_town_elder", "$current_town", slot_town_elder),
				(set_visitor, 11, ":current_town_town_elder"),
				(try_begin),
					(store_random_in_range, ":random_in_range_0_100", 0, 100),
					(ge, ":random_in_range_0_100", 0),
					(party_get_slot, ":current_town_444", "$current_town", 444),
					(set_visitor, 11, ":current_town_444"),
				(try_end),
				(try_begin),
					(gt, "$g_player_chamberlain", 0),
					(call_script, "script_dplmc_appoint_chamberlain"),
					(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
					(eq, ":current_town_town_lord", "trp_player"),
					(set_visitor, 9, "$g_player_chamberlain"),
				(try_end),
				(try_begin),
					(party_get_slot, ":main_party_465", "p_main_party", 465),
					(eq, ":main_party_465", 100),
					(assign, reg20, 0),
					(try_for_range, ":party", "p_town_1", "p_village_1"),
						(party_get_slot, ":current_town_town_lord", ":party", slot_town_lord),
						(eq, ":current_town_town_lord", "trp_player"),
						(val_add, reg20, 1),
					(try_end),
					(lt, reg20, 1),
					(party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
					(set_visitor, 9, "trp_custom_master"),
				(try_end),
				(call_script, "script_init_town_walkers"),
				(try_begin),
					(check_quest_active, "qst_hunt_down_fugitive"),
					(neg|is_currently_night),
					(quest_slot_eq, "qst_hunt_down_fugitive", slot_quest_target_center, "$current_town"),
					(neg|check_quest_succeeded, "qst_hunt_down_fugitive"),
					(neg|check_quest_failed, "qst_hunt_down_fugitive"),
					(set_visitor, 45, "trp_fugitive"),
				(else_try),
					(check_quest_active, "qst_hunt_down_girl"),
					(quest_slot_eq, "qst_hunt_down_girl", slot_quest_target_center, "$current_town"),
					(neg|check_quest_succeeded, "qst_hunt_down_girl"),
					(neg|check_quest_failed, "qst_hunt_down_girl"),
					(set_visitor, 45, "trp_runaway_girl"),
				(try_end),
				(set_jump_mission, "mt_village_center"),
				(jump_to_scene, ":current_town_town_center"),
				(change_screen_mission),
			(try_end)
		], "Door_to_the_village_center."),

		("dplmc_village_elder_meeting",
		[
			(neg|party_slot_eq, "$current_town", slot_village_state, 2),
			(neg|party_slot_eq, "$current_town", slot_village_state, 1),
			(neg|party_slot_ge, "$current_town", 39, 1),
			(party_get_slot, ":current_town_town_elder", "$current_town", slot_town_elder),
			(gt, ":current_town_town_elder", 0),
			(this_or_next|eq, "$cheat_mode", 1),
			(troop_slot_ge, ":current_town_town_elder", 5, 1)
		],
		"Meet the Village Elder.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
				(modify_visitors_at_site, ":current_town_town_center"),
				(reset_visitors),
				(party_get_slot, ":current_town_town_elder", "$current_town", slot_town_elder),
				(set_visitor, 11, ":current_town_town_elder"),
				(set_jump_mission, "mt_village_center"),
				(jump_to_scene, ":current_town_town_center"),
				(change_screen_map_conversation, ":current_town_town_elder"),
			(try_end)
		], "."),

		("dplmc_village_elder_meeting_denied",
		[
			(neg|party_slot_eq, "$current_town", slot_village_state, 2),
			(neg|party_slot_eq, "$current_town", slot_village_state, 1),
			(neg|party_slot_ge, "$current_town", 39, 1),
			(party_get_slot, ":current_town_town_elder", "$current_town", slot_town_elder),
			(gt, ":current_town_town_elder", 0),
			(eq, "$cheat_mode", 0),
			(troop_slot_eq, ":current_town_town_elder", slot_troop_met, 0),
			(disable_menu_option)
		],
		"You have not met the village elder yet.",
		[], "."),

		("village_buy_food",
		[
			(party_slot_eq, "$current_town", slot_village_state, 0),
			(neg|party_slot_ge, "$current_town", 39, 1),
			(neg|party_slot_ge, "$current_town", 40, 1)
		],
		"Buy supplies from the peasants.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(party_get_slot, ":current_town_town_elder", "$current_town", slot_town_elder),
				(change_screen_trade, ":current_town_town_elder"),
			(try_end)
		], "."),

		("village_attack_bandits",
		[
			(party_slot_ge, "$current_town", 39, 1),
			(troop_get_slot, ":troop_trees_859", "$troop_trees", 859),
			(neg|party_slot_eq, "$current_town", slot_village_infested_by_bandits, ":troop_trees_859")
		],
		"Attack the bandits.",
		[
			(party_get_slot, ":current_town_village_infested_by_bandits", "$current_town", slot_village_infested_by_bandits),
			(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
			(modify_visitors_at_site, ":current_town_town_center"),
			(reset_visitors),
			(set_visitors, 0, ":current_town_village_infested_by_bandits", "$qst_eliminate_bandits_infesting_village_num_bandits"),
			(troop_get_slot, ":troop_trees_602", "$troop_trees", 602),
			(set_visitors, 2, ":troop_trees_602", "$qst_eliminate_bandits_infesting_village_num_villagers"),
			(set_party_battle_mode),
			(set_battle_advantage, 0),
			(assign, "$g_battle_result", 0),
			(set_jump_mission, "mt_village_attack_bandits"),
			(jump_to_scene, ":current_town_town_center"),
			(assign, "$g_next_menu", "mnu_village_infest_bandits_result"),
			(jump_to_menu, "mnu_battle_debrief"),
			(assign, "$g_mt_mode", 1),
			(change_screen_mission)
		], "."),

		("village_attack_wedding",
		[
			(party_slot_ge, "$current_town", 40, 1),
			(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
			(neq, ":faction_of_party_current_town", "fac_outlaws"),
			(check_quest_active, "qst_hunt_down_girl")
		],
		"Attack the wedding guests.",
		[
			(party_get_slot, ":current_town_40", "$current_town", 40),
			(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
			(modify_visitors_at_site, ":current_town_town_center"),
			(reset_visitors),
			(set_visitors, 0, ":current_town_40", "$qst_eliminate_wedding_infesting_village_num_guests"),
			(set_party_battle_mode),
			(set_battle_advantage, 0),
			(assign, "$g_battle_result", 0),
			(set_jump_mission, "mt_village_attack_wedding"),
			(jump_to_scene, ":current_town_town_center"),
			(assign, "$g_next_menu", "mnu_village_wedding_result"),
			(jump_to_menu, "mnu_battle_debrief"),
			(assign, "$g_mt_mode", 1),
			(change_screen_mission)
		], "."),

		("village_wait",
		[
			(party_slot_eq, "$current_town", slot_center_has_manor, 1),
			(party_slot_eq, "$current_town", slot_town_lord, "trp_player")
		],
		"Wait here for some time.",
		[
			(assign, "$auto_enter_town", "$current_town"),
			(assign, "$g_last_rest_center", "$current_town"),
			(try_begin),
				(party_is_active, "p_main_party"),
				(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
				(try_begin),
					(eq, ":current_terrain_main_party", 5),
					(unlock_achievement, 28),
				(try_end),
			(try_end),
			(rest_for_hours_interactive, 168, 5, 1),
			(change_screen_return)
		], "."),

		("dplmc_village_counter_insurgency",
		[
			(troop_get_slot, ":troop_trees_859", "$troop_trees", 859),
			(party_slot_eq, "$current_town", slot_village_infested_by_bandits, ":troop_trees_859")
		],
		"Counter the insurgency.",
		[
			(store_random_in_range, ":random_in_range_-10_-5", -10, -5),
			(call_script, "script_change_player_relation_with_center", "$current_town", ":random_in_range_-10_-5"),
			(call_script, "script_calculate_battle_advantage"),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(assign, "$g_battle_result", 0),
			(assign, "$g_village_raid_evil", 1),
			(set_jump_mission, "mt_village_raid"),
			(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
			(jump_to_scene, ":current_town_town_center"),
			(assign, "$g_next_menu", "mnu_dplmc_village_riot_result"),
			(call_script, "script_objectionable_action", 3, "str_loot_village"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("dplmc_village_negotiate",
		[
			(troop_get_slot, ":troop_trees_859", "$troop_trees", 859),
			(party_slot_eq, "$current_town", slot_village_infested_by_bandits, ":troop_trees_859")
		],
		"Begin negotiations.",
		[
			(jump_to_menu, "mnu_dplmc_riot_negotiate")
		], "."),

		("collect_taxes_qst",
		[
			(party_slot_eq, "$current_town", slot_village_state, 0),
			(neg|party_slot_ge, "$current_town", 39, 1),
			(check_quest_active, "qst_collect_taxes"),
			(quest_get_slot, ":collect_taxes_giver_troop", "qst_collect_taxes", slot_quest_giver_troop),
			(quest_slot_eq, "qst_collect_taxes", slot_quest_target_center, "$current_town"),
			(neg|quest_slot_eq, "qst_collect_taxes", slot_quest_current_state, 4),
			(str_store_troop_name, 1, ":collect_taxes_giver_troop"),
			(quest_get_slot, reg5, "qst_collect_taxes", slot_quest_current_state)
		],
		"{reg5?Continue collecting taxes:Collect taxes} due to {s1}.",
		[
			(jump_to_menu, "mnu_collect_taxes")
		], "."),

		("train_peasants_against_bandits_qst",
		[
			(party_slot_eq, "$current_town", slot_village_state, 0),
			(check_quest_active, "qst_train_peasants_against_bandits"),
			(neg|check_quest_concluded, "qst_train_peasants_against_bandits"),
			(quest_slot_eq, "qst_train_peasants_against_bandits", slot_quest_target_center, "$current_town")
		],
		"Train the peasants.",
		[
			(jump_to_menu, "mnu_train_peasants_against_bandits")
		], "."),

		("village_hostile_action",
		[
			(party_slot_eq, "$current_town", slot_village_state, 0),
			(neg|party_slot_ge, "$current_town", 40, 1),
			(neg|party_slot_ge, "$current_town", 39, 1),
			(neq, "$players_kingdom", "$g_encountered_party_faction")
		],
		"Take a hostile action.",
		[
			(jump_to_menu, "mnu_village_hostile_action")
		], "."),

		("village_reports",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! Show reports.",
		[
			(jump_to_menu, "mnu_center_reports")
		], "."),

		("village_leave",
		[],
		"Leave...",
		[
			(change_screen_return, 0),
			(party_slot_eq, "$current_town", slot_village_state, 0),
			(neg|party_slot_ge, "$current_town", 39, 1),
			(try_begin),
				(eq, "$g_buy_foods_when_leaving", 1),
				(call_script, "script_auto_buy_food"),
			(try_end),
			(try_begin),
				(eq, "$g_sell_items_when_leaving", 1),
				(call_script, "script_auto_sell_all"),
			(try_end)
		], ".")
	]
	),

	("village_hostile_action", 0, "What action do you have in mind?",
	"none",
	[],
	[
		("village_take_food",
		[
			(party_slot_eq, "$current_town", slot_village_state, 0),
			(neg|party_slot_ge, "$current_town", 39, 1),
			(neg|party_slot_ge, "$current_town", 40, 1),
			(party_get_slot, ":current_town_town_elder", "$current_town", slot_town_elder),
			(assign, ":value", 0),
			(try_for_range, ":number", 10, 106),
				(troop_get_inventory_slot, ":inventory_slot_current_town_town_elder_number", ":current_town_town_elder", ":number"),
				(ge, ":inventory_slot_current_town_town_elder_number", 0),
				(assign, ":value", 1),
			(try_end),
			(eq, ":value", 1)
		],
		"Force the peasants to give you supplies.",
		[
			(jump_to_menu, "mnu_village_take_food_confirm")
		], "."),

		("village_steal_cattle",
		[
			(party_slot_eq, "$current_town", slot_village_state, 0),
			(party_slot_eq, "$current_town", slot_village_player_can_not_steal_cattle, 0),
			(neg|party_slot_ge, "$current_town", 39, 1),
			(neg|party_slot_ge, "$current_town", 40, 1),
			(party_get_slot, ":current_town_village_number_of_cattle", "$current_town", slot_village_number_of_cattle),
			(neg|party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
			(gt, ":current_town_village_number_of_cattle", 0)
		],
		"Steal cattle.",
		[
			(jump_to_menu, "mnu_village_steal_cattle_confirm")
		], "."),

		("village_loot",
		[
			(party_slot_eq, "$current_town", slot_village_state, 0),
			(neg|party_slot_ge, "$current_town", 39, 1),
			(neg|party_slot_ge, "$current_town", 40, 1),
			(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
			(store_relation, ":relation_player_supporters_faction_faction_of_party_current_town", "fac_player_supporters_faction", ":faction_of_party_current_town"),
			(lt, ":relation_player_supporters_faction_faction_of_party_current_town", 0)
		],
		"Loot and burn this village.",
		[
			(jump_to_menu, "mnu_village_start_attack")
		], "."),

		("forced_recruits",
		[
			(party_slot_eq, "$current_town", 455, 0)
		],
		"Attempt to forcefully recruit some villagers.",
		[
			(party_get_slot, ":current_town_center_volunteer_troop_type", "$current_town", slot_center_volunteer_troop_type),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(try_begin),
				(gt, ":free_companions_capacity_main_party", 0),
				(call_script, "script_change_player_relation_with_center", "$current_town", -20),
				(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
				(try_begin),
					(neq, ":faction_of_party_current_town", "$players_kingdom"),
					(call_script, "script_change_player_relation_with_faction_ex", ":faction_of_party_current_town", -5),
				(try_end),
				(store_random_in_range, ":random_in_range_0_10", 0, 10),
				(store_random_in_range, ":random_in_range_2_20", 2, 20),
				(try_begin),
					(gt, ":random_in_range_2_20", ":free_companions_capacity_main_party"),
					(assign, ":random_in_range_2_20", ":free_companions_capacity_main_party"),
				(try_end),
				(try_begin),
					(ge, ":random_in_range_0_10", 3),
					(party_add_members, "p_main_party", ":current_town_center_volunteer_troop_type", ":random_in_range_2_20"),
					(party_set_slot, "$current_town", slot_center_volunteer_troop_amount, 0),
					(party_set_slot, "$current_town", 455, 1),
					(assign, reg1, ":random_in_range_2_20"),
					(display_message, "@You and your men persuaded {reg1} villagers to join you."),
					(change_screen_return),
				(else_try),
					(display_message, "@When the villagers see you and your men approach, they take off as quick as they can. It was fast enough to escape you."),
					(party_set_slot, "$current_town", 455, 2),
					(change_screen_map),
				(try_end),
			(else_try),
				(display_message, "@You have no room left in your party."),
			(try_end)
		], "."),

		("forget_it",
		[],
		"Forget it.",
		[
			(jump_to_menu, "mnu_village")
		], ".")
	]
	),

	("recruit_volunteers", 0, "{s18}",
	"none",
	[
		(party_get_slot, ":current_town_center_volunteer_troop_type", "$current_town", slot_center_volunteer_troop_type),
		(party_get_slot, ":current_town_center_volunteer_troop_amount", "$current_town", slot_center_volunteer_troop_amount),
		(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(store_div, ":value", ":troop_gold_player", 10),
		(assign, ":var_6", ":free_companions_capacity_main_party"),
		(val_min, ":var_6", ":value"),
		(try_begin),
			(gt, ":var_6", 0),
			(val_min, ":current_town_center_volunteer_troop_amount", ":var_6"),
		(try_end),
		(assign, reg5, ":current_town_center_volunteer_troop_amount"),
		(assign, reg7, 0),
		(try_begin),
			(gt, ":current_town_center_volunteer_troop_amount", ":value"),
			(assign, reg7, 1),
		(try_end),
		(try_begin),
			(eq, ":current_town_center_volunteer_troop_amount", 0),
			(str_store_string, 18, "@No one here seems to be willing to join you."),
		(else_try),
			(store_mul, reg6, ":current_town_center_volunteer_troop_amount", 10),
			(assign, ":value_2", 0),
			(try_begin),
				(party_get_slot, ":current_town_136", "$current_town", 136),
				(gt, ":current_town_136", 0),
				(store_random_in_range, ":random_in_range_0_100", 0, 100),
				(assign, reg30, ":random_in_range_0_100"),
				(lt, ":random_in_range_0_100", 25),
				(store_random_in_range, ":random_in_range_0_1", 0, 1),
				(assign, reg31, ":random_in_range_0_1"),
				(troop_get_upgrade_troop, ":upgrade_troop_current_town_center_volunteer_troop_type_random_in_range_0_1", ":current_town_center_volunteer_troop_type", ":random_in_range_0_1"),
				(try_begin),
					(le, ":upgrade_troop_current_town_center_volunteer_troop_type_random_in_range_0_1", 0),
					(troop_get_upgrade_troop, ":upgrade_troop_current_town_center_volunteer_troop_type_random_in_range_0_1", ":current_town_center_volunteer_troop_type", 0),
				(try_end),
				(gt, ":upgrade_troop_current_town_center_volunteer_troop_type_random_in_range_0_1", 0),
				(store_div, ":value_3", ":current_town_center_volunteer_troop_amount", 3),
				(store_sub, ":value_2", ":current_town_center_volunteer_troop_amount", ":value_3"),
				(assign, reg3, ":value_2"),
				(assign, reg4, ":upgrade_troop_current_town_center_volunteer_troop_type_random_in_range_0_1"),
				(str_store_troop_name_by_count, 4, ":upgrade_troop_current_town_center_volunteer_troop_type_random_in_range_0_1", ":value_2"),
			(try_end),
			(try_begin),
				(str_store_troop_name_by_count, 3, ":current_town_center_volunteer_troop_type", ":current_town_center_volunteer_troop_amount"),
				(try_begin),
					(eq, reg5, 1),
					(str_store_string, 18, "@One {s3} volunteers to follow you."),
				(else_try),
					(try_begin),
						(gt, ":value_2", 0),
						(str_store_string, 18, "@{reg5} {s3} volunteer to follow you As well as {s4}."),
					(else_try),
						(str_store_string, 18, "@{reg5} {s3} volunteer to follow you."),
					(try_end),
				(try_end),
				(set_background_mesh, "mesh_pic_recruits"),
			(try_end)
	],
	[
		("continue_not_enough_gold",
		[
			(eq, reg7, 1)
		],
		"I don't have enough money...",
		[
			(jump_to_menu, "mnu_village")
		], "."),

		("continue",
		[
			(eq, reg7, 0),
			(eq, reg5, 0)
		],
		"Continue...",
		[
			(party_set_slot, "$current_town", slot_center_volunteer_troop_amount, -1),
			(jump_to_menu, "mnu_village")
		], "."),

		("recruit_them",
		[
			(eq, reg7, 0),
			(gt, reg5, 0)
		],
		"Recruit them ({reg6} coins).",
		[
			(call_script, "script_village_recruit_volunteers_recruit"),
			(jump_to_menu, "mnu_village")
		], "."),

		("forget_it",
		[
			(eq, reg7, 0),
			(gt, reg5, 0)
		],
		"Forget it.",
		[
			(jump_to_menu, "mnu_village")
		], ".")
	]
	),

	("village_hunt_down_fugitive_defeated", 0, "A heavy blow from the fugitive sends you to the ground, and your vision spins and goes dark. Time passes. When you open your eyes again you find yourself battered and bloody, but luckily none of the wounds appear to be lethal.",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_village")
		], ".")
	]
	),

	("village_infest_bandits_result", mnf_scale_picture, "{s9}",
	"none",
	[
		(try_begin),
			(eq, "$g_battle_result", 1),
			(jump_to_menu, "mnu_village_infestation_removed"),
		(else_try),
			(str_store_string, 9, "@Try as you might, you could not defeat the bandits. Infuriated, they raze the village to the ground to punish the peasants, and then leave the burning wasteland behind to find greener pastures to plunder."),
			(set_background_mesh, "mesh_pic_looted_village"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(party_set_slot, "$g_encountered_party", slot_village_infested_by_bandits, 0),
			(call_script, "script_village_set_state", "$current_town", 2),
			(party_set_slot, "$current_town", slot_village_raid_progress, 0),
			(party_set_slot, "$current_town", slot_village_recover_progress, 0),
			(try_begin),
				(check_quest_active, "qst_eliminate_bandits_infesting_village"),
				(quest_slot_eq, "qst_eliminate_bandits_infesting_village", slot_quest_target_center, "$g_encountered_party"),
				(call_script, "script_change_player_relation_with_center", "$g_encountered_party", -5),
				(call_script, "script_fail_quest", "qst_eliminate_bandits_infesting_village"),
				(call_script, "script_end_quest", "qst_eliminate_bandits_infesting_village"),
			(else_try),
				(check_quest_active, "qst_deal_with_bandits_at_lords_village"),
				(quest_slot_eq, "qst_deal_with_bandits_at_lords_village", slot_quest_target_center, "$g_encountered_party"),
				(call_script, "script_change_player_relation_with_center", "$g_encountered_party", -4),
				(call_script, "script_fail_quest", "qst_deal_with_bandits_at_lords_village"),
				(call_script, "script_end_quest", "qst_deal_with_bandits_at_lords_village"),
			(else_try),
				(call_script, "script_change_player_relation_with_center", "$g_encountered_party", -3),
			(try_end),
			(jump_to_menu, "mnu_village")
		], ".")
	]
	),

	("village_infestation_removed", mnf_disable_all_keys, "In a battle worthy of song, you and your men drive the bandits out of the village, making it safe once more. The villagers have little left in the way of wealth after their ordeal, but they offer you all they can find.",
	"none",
	[
		(party_get_slot, ":g_encountered_party_village_infested_by_bandits", "$g_encountered_party", slot_village_infested_by_bandits),
		(party_set_slot, "$g_encountered_party", slot_village_infested_by_bandits, 0),
		(party_clear, "p_temp_party"),
		(party_add_members, "p_temp_party", ":g_encountered_party_village_infested_by_bandits", "$qst_eliminate_bandits_infesting_village_num_bandits"),
		(assign, "$g_strength_contribution_of_player", 50),
		(call_script, "script_party_give_xp_and_gold", "p_temp_party"),
		(try_begin),
			(check_quest_active, "qst_eliminate_bandits_infesting_village"),
			(quest_slot_eq, "qst_eliminate_bandits_infesting_village", slot_quest_target_center, "$g_encountered_party"),
			(call_script, "script_end_quest", "qst_eliminate_bandits_infesting_village"),
			(call_script, "script_change_player_relation_with_center", "$g_encountered_party", 5),
		(else_try),
			(check_quest_active, "qst_deal_with_bandits_at_lords_village"),
			(quest_slot_eq, "qst_deal_with_bandits_at_lords_village", slot_quest_target_center, "$g_encountered_party"),
			(call_script, "script_succeed_quest", "qst_deal_with_bandits_at_lords_village"),
			(call_script, "script_change_player_relation_with_center", "$g_encountered_party", 3),
		(else_try),
			(call_script, "script_change_player_relation_with_center", "$g_encountered_party", 4),
		(try_end),
		(party_get_slot, ":current_town_town_elder", "$current_town", slot_town_elder),
		(try_for_range, ":number", 10, 106),
			(store_random_in_range, ":random_in_range_0_100", 0, 100),
			(lt, ":random_in_range_0_100", 70),
			(troop_set_inventory_slot, ":current_town_town_elder", ":number", -1),
		(try_end)
	],
	[
		("village_bandits_defeated_accept",
		[],
		"Take it as your just due.",
		[
			(jump_to_menu, "mnu_village"),
			(party_get_slot, ":current_town_town_elder", "$current_town", slot_town_elder),
			(troop_sort_inventory, ":current_town_town_elder"),
			(change_screen_loot, ":current_town_town_elder")
		], "."),

		("village_bandits_defeated_cont",
		[],
		"Refuse, stating that they need these items more than you do.",
		[
			(call_script, "script_change_player_relation_with_center", "$g_encountered_party", 3),
			(call_script, "script_change_player_honor", 1),
			(jump_to_menu, "mnu_village")
		], ".")
	]
	),

	("village_wedding_result", mnf_scale_picture, "{s9}",
	"none",
	[
		(try_begin),
			(eq, "$g_battle_result", 1),
			(jump_to_menu, "mnu_village_wedding_suppressed"),
		(else_try),
			(str_store_string, 9, "@Try as you might, you could not defeat the wedding party. They go back to their feast, laughing and joking, and leave you to lick your wounds."),
			(set_background_mesh, "mesh_pic_defeat"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_village")
		], ".")
	]
	),

	("village_wedding_suppressed", mnf_disable_all_keys, "You trample the wedding guests underfoot and establish a semblance of order. As you pick through the corpses, you find the bridegroom has been slain but there is no sign of the bride. You will have to search the village.",
	"none",
	[
		(party_set_slot, "$g_encountered_party", 40, 0),
		(call_script, "script_change_player_relation_with_center", "$g_encountered_party", -5)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_village")
		], ".")
	]
	),

	("center_manage", 0, "{s19}^{reg6?^^You are currently building {s7}. The building will be completed after {reg8} day{reg9?s:}.:}",
	"none",
	[
		(assign, ":var_1", 0),
		(str_clear, 18),
		(try_begin),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 4),
			(assign, ":value", 130),
			(assign, ":value_2", 135),
			(str_store_string, 17, "@village"),
		(else_try),
			(assign, ":value", 134),
			(assign, ":value_2", 136),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
			(str_store_string, 17, "@town"),
		(else_try),
			(str_store_string, 17, "@castle"),
		(try_end),
		(try_for_range, ":var_4", ":value", ":value_2"),
			(party_slot_ge, "$g_encountered_party", ":var_4", 1),
			(val_add, ":var_1", 1),
			(call_script, "script_get_improvement_details", ":var_4"),
			(try_begin),
				(eq, ":var_1", 1),
				(str_store_string, 18, "@{!}{s0}"),
			(else_try),
				(str_store_string, 18, "@{!}{s18}, {s0}"),
			(try_end),
		(try_end),
		(try_begin),
			(eq, ":var_1", 0),
			(str_store_string, 19, "@The {s17} has no improvements."),
		(else_try),
			(str_store_string, 19, "@The {s17} has the following improvements:{s18}."),
		(try_end),
		(assign, reg6, 0),
		(try_begin),
			(party_get_slot, ":g_encountered_party_center_current_improvement", "$g_encountered_party", slot_center_current_improvement),
			(gt, ":g_encountered_party_center_current_improvement", 0),
			(call_script, "script_get_improvement_details", ":g_encountered_party_center_current_improvement"),
			(str_store_string, 7, 0),
			(assign, reg6, 1),
			(store_current_hours, ":current_hours"),
			(party_get_slot, ":g_encountered_party_center_improvement_end_hour", "$g_encountered_party", slot_center_improvement_end_hour),
			(val_sub, ":g_encountered_party_center_improvement_end_hour", ":current_hours"),
			(store_div, reg8, ":g_encountered_party_center_improvement_end_hour", 24),
			(val_max, reg8, 1),
			(store_sub, reg9, reg8, 1),
		(try_end)
	],
	[
		("castle_recruit_troops",
		[
			(this_or_next|party_slot_eq, "$g_encountered_party", slot_party_type, 3),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 2),
			(party_slot_eq, "$g_encountered_party", slot_town_lord, "trp_player")
		],
		"Recruit some troops.",
		[
			(start_presentation, "prsnt_recruit_plan")
		], "."),

		("castle_sort_troops",
		[
			(this_or_next|party_slot_eq, "$g_encountered_party", slot_party_type, 3),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 2),
			(party_slot_eq, "$g_encountered_party", slot_town_lord, "trp_player"),
			(party_get_num_companion_stacks, ":num_companion_stacks_l_g_encountered_party", "$g_encountered_party"),
			(ge, ":num_companion_stacks_l_g_encountered_party", 2)
		],
		"Sort the defenders.",
		[
			(assign, "$g_cur_stack", -1),
			(start_presentation, "prsnt_sort_the_defenders")
		], "."),

		("center_build_manor",
		[
			(eq, reg6, 0),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 4),
			(party_slot_eq, "$g_encountered_party", slot_center_has_manor, 0)
		],
		"Build a manor.",
		[
			(assign, "$g_improvement_type", 130),
			(jump_to_menu, "mnu_center_improve")
		], "."),

		("center_build_fish_pond",
		[
			(eq, reg6, 0),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 4),
			(party_slot_eq, "$g_encountered_party", slot_center_has_fish_pond, 0)
		],
		"Build a mill.",
		[
			(assign, "$g_improvement_type", 131),
			(jump_to_menu, "mnu_center_improve")
		], "."),

		("center_build_watch_tower",
		[
			(eq, reg6, 0),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 4),
			(party_slot_eq, "$g_encountered_party", slot_center_has_watch_tower, 0)
		],
		"Build a watch tower.",
		[
			(assign, "$g_improvement_type", 132),
			(jump_to_menu, "mnu_center_improve")
		], "."),

		("center_build_school",
		[
			(eq, reg6, 0),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 4),
			(party_slot_eq, "$g_encountered_party", slot_center_has_school, 0)
		],
		"Build a school.",
		[
			(assign, "$g_improvement_type", 133),
			(jump_to_menu, "mnu_center_improve")
		], "."),

		("center_build_messenger_post",
		[
			(eq, reg6, 0),
			(party_slot_eq, "$g_encountered_party", slot_center_has_messenger_post, 0)
		],
		"Build a messenger post.",
		[
			(assign, "$g_improvement_type", 134),
			(jump_to_menu, "mnu_center_improve")
		], "."),

		("center_build_prisoner_tower",
		[
			(eq, reg6, 0),
			(this_or_next|party_slot_eq, "$g_encountered_party", slot_party_type, 3),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 2),
			(party_slot_eq, "$g_encountered_party", slot_center_has_prisoner_tower, 0)
		],
		"Build a prisoner tower.",
		[
			(assign, "$g_improvement_type", 135),
			(jump_to_menu, "mnu_center_improve")
		], "."),

		("center_build_barracks",
		[
			(eq, reg6, 0),
			(this_or_next|party_slot_eq, "$g_encountered_party", slot_party_type, 3),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 2),
			(party_slot_eq, "$g_encountered_party", 136, 0)
		],
		"Build a training yard.",
		[
			(assign, "$g_improvement_type", 136),
			(jump_to_menu, "mnu_center_improve")
		], "."),

		("go_back_dot",
		[],
		"Go back.",
		[
			(jump_to_menu, "$g_next_menu")
		], ".")
	]
	),

	("center_improve", 0, "{s19} As the most architecturally learned avatar of your company, ({reg2}), {reg3?you reckon:{s3} reckons} that building the {s4} will cost you {reg5} coins and will take {reg6} days.",
	"none",
	[
		(call_script, "script_get_improvement_details", "$g_improvement_type"),
		(assign, ":var_1", reg0),
		(str_store_string, 4, 0),
		(str_store_string, 19, 1),
		(call_script, "script_get_max_skill_of_player_party", "skl_engineer"),
		(assign, ":var_2", reg0),
		(assign, ":var_3", reg1),
		(assign, reg2, ":var_2"),
		(store_sub, ":value", 20, ":var_2"),
		(val_mul, ":var_1", ":value"),
		(val_div, ":var_1", 20),
		(store_div, ":value_2", ":var_1", 100),
		(val_add, ":value_2", 3),
		(assign, reg5, ":var_1"),
		(assign, reg6, ":value_2"),
		(try_begin),
			(eq, ":var_3", "trp_player"),
			(assign, reg3, 1),
		(else_try),
			(assign, reg3, 0),
			(str_store_troop_name, 3, ":var_3"),
		(try_end)
	],
	[
		("dplmc_improve_cont",
		[
			(gt, "$g_player_chamberlain", 0),
			(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
			(ge, ":troop_gold_household_possessions", reg5)
		],
		"Go on. (Pay from treasury)",
		[
			(call_script, "script_dplmc_withdraw_from_treasury", reg5),
			(party_set_slot, "$g_encountered_party", slot_center_current_improvement, "$g_improvement_type"),
			(store_current_hours, ":current_hours"),
			(store_mul, ":value", reg6, 24),
			(val_add, ":value", ":current_hours"),
			(party_set_slot, "$g_encountered_party", slot_center_improvement_end_hour, ":value"),
			(jump_to_menu, "mnu_center_manage")
		], "."),

		("improve_cont",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(ge, ":troop_gold_player", reg5)
		],
		"Go on.",
		[
			(troop_remove_gold, "trp_player", reg5),
			(party_set_slot, "$g_encountered_party", slot_center_current_improvement, "$g_improvement_type"),
			(store_current_hours, ":current_hours"),
			(store_mul, ":value", reg6, 24),
			(val_add, ":value", ":current_hours"),
			(party_set_slot, "$g_encountered_party", slot_center_improvement_end_hour, ":value"),
			(jump_to_menu, "mnu_center_manage")
		], "."),

		("forget_it",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
			(this_or_next|ge, ":troop_gold_household_possessions", reg5),
			(ge, ":troop_gold_player", reg5)
		],
		"Forget it.",
		[
			(jump_to_menu, "mnu_center_manage")
		], "."),

		("improve_not_enough_gold",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
			(this_or_next|lt, ":troop_gold_household_possessions", reg5),
			(lt, ":troop_gold_player", reg5)
		],
		"I don't have enough money for that.",
		[
			(jump_to_menu, "mnu_center_manage")
		], ".")
	]
	),

	("town_bandits_failed", mnf_disable_all_keys, "{s4} {s5}",
	"none",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(store_div, ":value", ":troop_gold_player", 30),
		(store_random_in_range, ":random_in_range_40_100", 40, 100),
		(val_add, ":value", ":random_in_range_40_100"),
		(val_min, ":value", ":troop_gold_player"),
		(troop_remove_gold, "trp_player", ":value"),
		(party_set_slot, "$current_town", slot_center_has_bandits, 0),
		(party_get_num_companions, ":num_companions_main_party", "p_main_party"),
		(str_store_string, 4, "@The assasins beat you down and leave you for dead. ."),
		(str_store_string, 4, "@You have fallen. The bandits quickly search your body for every coin they can find, then vanish into the night. They have left you alive, if only barely."),
		(try_begin),
			(gt, ":num_companions_main_party", 2),
			(str_store_string, 5, "@Luckily some of your companions come to search for you when you do not return, and find you lying by the side of the road. They hurry you to safety and dress your wounds."),
		(else_try),
			(str_store_string, 5, "@Luckily some passing townspeople find you lying by the side of the road, and recognise you as something other than a simple beggar. They carry you to the nearest inn and dress your wounds."),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("town_bandits_succeeded", mnf_disable_all_keys, "The bandits fall before you as wheat to a scythe! Soon you stand alone in the streets while most of your attackers lie unconscious, dead or dying. Searching the bodies, you find a purse which must have belonged to a previous victim of these brutes. Or perhaps, it was given to them by someone who wanted to arrange a suitable ending to your life.",
	"none",
	[
		(party_set_slot, "$current_town", slot_center_has_bandits, 0),
		(assign, "$g_last_defeated_bandits_town", "$g_encountered_party"),
		(try_begin),
			(check_quest_active, "qst_deal_with_night_bandits"),
			(neg|check_quest_succeeded, "qst_deal_with_night_bandits"),
			(quest_slot_eq, "qst_deal_with_night_bandits", slot_quest_target_center, "$g_encountered_party"),
			(call_script, "script_succeed_quest", "qst_deal_with_night_bandits"),
		(try_end),
		(store_mul, ":value", "$num_center_bandits", 117),
		(add_xp_to_troop, ":value", "trp_player"),
		(store_mul, ":value_2", "$num_center_bandits", 50),
		(call_script, "script_troop_add_gold", "trp_player", ":value_2")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("village_steal_cattle_confirm", 0, "As the most skilled pilferer of your company, ({reg2}), {reg3?you reckon:{s1} reckons} that you can steal as many as {reg4} heads of village's cattle.",
	"none",
	[
		(call_script, "script_get_max_skill_of_player_party", "skl_looting"),
		(assign, reg2, reg0),
		(assign, ":var_1", reg1),
		(try_begin),
			(eq, ":var_1", "trp_player"),
			(assign, reg3, 1),
		(else_try),
			(assign, reg3, 0),
			(str_store_troop_name, 1, ":var_1"),
		(try_end),
		(call_script, "script_calculate_amount_of_cattle_can_be_stolen", "$current_town"),
		(assign, reg4, reg0)
	],
	[
		("village_steal_cattle_confirm",
		[],
		"Go on.",
		[
			(rest_for_hours_interactive, 3, 5, 1),
			(assign, "$auto_menu", "mnu_village_steal_cattle"),
			(change_screen_return)
		], "."),

		("forget_it",
		[],
		"Forget it.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("village_steal_cattle", mnf_disable_all_keys, "{s1}",
	"none",
	[
		(call_script, "script_calculate_amount_of_cattle_can_be_stolen", "$current_town"),
		(assign, ":var_1", reg0),
		(val_add, ":var_1", 1),
		(store_random_in_range, ":random_in_range_0_var_1", 0, ":var_1"),
		(party_set_slot, "$current_town", slot_village_player_can_not_steal_cattle, 1),
		(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
		(try_begin),
			(le, ":random_in_range_0_var_1", 0),
			(call_script, "script_change_player_relation_with_center", "$current_town", -3),
			(str_store_string, 1, "@You fail to steal any cattle."),
		(else_try),
			(assign, reg17, ":random_in_range_0_var_1"),
			(store_sub, reg12, ":random_in_range_0_var_1", 1),
			(try_begin),
				(gt, ":current_town_town_lord", 0),
				(call_script, "script_change_player_relation_with_troop", ":current_town_town_lord", -3),
				(call_script, "script_add_log_entry", 66, "trp_player", "$current_town", ":current_town_town_lord", "$g_encountered_party_faction"),
			(try_end),
			(call_script, "script_change_player_relation_with_center", "$current_town", -5),
			(str_store_string, 1, "@You drive away {reg17} {reg12?heads:head} of cattle from the village's herd."),
			(try_begin),
				(eq, ":random_in_range_0_var_1", 3),
				(unlock_achievement, 31),
			(try_end),
			(call_script, "script_create_cattle_herd", "$current_town", ":random_in_range_0_var_1"),
			(party_get_slot, ":current_town_village_number_of_cattle", "$current_town", slot_village_number_of_cattle),
			(val_sub, ":current_town_village_number_of_cattle", ":random_in_range_0_var_1"),
			(party_set_slot, "$current_town", slot_village_number_of_cattle, ":current_town_village_number_of_cattle"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("village_take_food_confirm", 0, "It will be difficult to force and threaten the peasants into giving their precious supplies. You think you will need at least one hour.",
	"none",
	[],
	[
		("village_take_food_confirm",
		[],
		"Go ahead.",
		[
			(rest_for_hours_interactive, 1, 5, 0),
			(assign, "$auto_enter_town", "$current_town"),
			(assign, "$g_town_visit_after_rest", 1),
			(assign, "$auto_enter_menu_in_center", "mnu_village_take_food"),
			(change_screen_return)
		], "."),

		("forget_it",
		[],
		"Forget it.",
		[
			(jump_to_menu, "mnu_village_hostile_action")
		], ".")
	]
	),

	("village_take_food", 0, "The villagers grudgingly bring out what they have for you.",
	"none",
	[
		(call_script, "script_party_count_members_with_full_health", "p_main_party"),
		(assign, ":var_1", reg0),
		(call_script, "script_party_count_members_with_full_health", "$current_town"),
		(assign, ":var_2", reg0),
		(try_begin),
			(lt, ":var_1", 6),
			(ge, ":var_2", 40),
			(neg|party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
			(jump_to_menu, "mnu_village_start_attack"),
		(try_end)
	],
	[
		("take_supplies",
		[],
		"Take the supplies.",
		[
			(try_begin),
				(party_slot_ge, "$current_town", 26, -55),
				(try_begin),
					(party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
					(call_script, "script_change_player_relation_with_center", "$current_town", -1),
				(else_try),
					(call_script, "script_change_player_relation_with_center", "$current_town", -3),
				(try_end),
			(try_end),
			(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
			(try_begin),
				(gt, ":current_town_town_lord", 1),
				(call_script, "script_change_player_relation_with_troop", ":current_town_town_lord", -1),
			(try_end),
			(party_get_slot, ":current_town_town_elder", "$current_town", slot_town_elder),
			(party_get_skill_level, ":skill_level_main_party_looting", "p_main_party", "skl_looting"),
			(val_mul, ":skill_level_main_party_looting", 3),
			(store_sub, ":value", 70, ":skill_level_main_party_looting"),
			(try_for_range, ":number", 10, 106),
				(store_random_in_range, ":random_in_range_0_100", 0, 100),
				(lt, ":random_in_range_0_100", ":value"),
				(troop_set_inventory_slot, ":current_town_town_elder", ":number", -1),
			(try_end),
			(call_script, "script_objectionable_action", 3, "str_steal_from_villagers"),
			(call_script, "script_add_log_entry", 2, "trp_player", "$current_town", -1, -1),
			(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
			(call_script, "script_faction_inflict_war_damage_on_faction", "$players_kingdom", ":faction_of_party_current_town", 5),
			(jump_to_menu, "mnu_village"),
			(troop_sort_inventory, ":current_town_town_elder"),
			(change_screen_loot, ":current_town_town_elder")
		], "."),

		("let_them_keep_it",
		[],
		"Let them keep it.",
		[
			(jump_to_menu, "mnu_village")
		], ".")
	]
	),

	("village_start_attack", mnf_disable_all_keys|mnf_scale_picture, "Some of the angry villagers grab their tools and prepare to resist you. It looks like you'll have a fight on your hands if you continue.",
	"none",
	[
		(set_background_mesh, "mesh_pic_villageriot"),
		(call_script, "script_party_count_members_with_full_health", "p_main_party"),
		(assign, ":var_1", reg0),
		(call_script, "script_party_count_members_with_full_health", "$current_town"),
		(assign, ":var_2", reg0),
		(try_begin),
			(gt, ":var_1", 100),
			(jump_to_menu, "mnu_village_loot_no_resist"),
		(else_try),
			(this_or_next|eq, ":var_2", 0),
			(eq, "$g_battle_result", 1),
			(try_begin),
				(eq, "$g_battle_result", 1),
				(store_random_in_range, ":random_in_range_-30_-15", -30, -15),
				(call_script, "script_change_player_relation_with_center", "$current_town", ":random_in_range_-30_-15"),
				(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
				(gt, ":current_town_town_lord", 0),
				(call_script, "script_change_player_relation_with_troop", ":current_town_town_lord", -3),
			(try_end),
			(jump_to_menu, "mnu_village_loot_no_resist"),
		(else_try),
			(eq, "$g_battle_result", -1),
			(jump_to_menu, "mnu_village_loot_defeat"),
		(try_end)
	],
	[
		("village_raid_attack",
		[],
		"Charge them.",
		[
			(store_random_in_range, ":random_in_range_-10_-5", -10, -5),
			(call_script, "script_change_player_relation_with_center", "$current_town", ":random_in_range_-10_-5"),
			(try_begin),
				(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
				(gt, ":current_town_town_lord", 0),
				(call_script, "script_change_player_relation_with_troop", ":current_town_town_lord", -3),
			(try_end),
			(call_script, "script_calculate_battle_advantage"),
			(set_battle_advantage, reg0),
			(set_party_battle_mode),
			(assign, "$g_battle_result", 0),
			(assign, "$g_village_raid_evil", 1),
			(set_jump_mission, "mt_village_raid"),
			(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
			(jump_to_scene, ":current_town_town_center"),
			(assign, "$g_next_menu", "mnu_village_start_attack"),
			(call_script, "script_diplomacy_party_attacks_neutral", "p_main_party", "$g_encountered_party"),
			(call_script, "script_objectionable_action", 3, "str_loot_village"),
			(jump_to_menu, "mnu_battle_debrief"),
			(change_screen_mission)
		], "."),

		("village_raid_leave",
		[],
		"Leave this village alone.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("village_loot_no_resist", 0, "The villagers here are few and frightened, and they quickly scatter and run before you. The village is at your mercy.",
	"none",
	[],
	[
		("village_loot",
		[],
		"Plunder the village, then raze it.",
		[
			(call_script, "script_village_set_state", "$current_town", 1),
			(party_set_slot, "$current_town", slot_village_raided_by, "p_main_party"),
			(assign, "$g_player_raiding_village", "$current_town"),
			(try_begin),
				(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
				(store_relation, ":relation_players_kingdom_faction_of_party_current_town", "$players_kingdom", ":faction_of_party_current_town"),
				(ge, ":relation_players_kingdom_faction_of_party_current_town", 0),
				(call_script, "script_diplomacy_party_attacks_neutral", "p_main_party", "$current_town"),
			(try_end),
			(rest_for_hours_interactive, 3, 5, 1),
			(change_screen_return)
		], "."),

		("village_raid_leave",
		[],
		"Leave this village alone.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("village_loot_complete", mnf_disable_all_keys, "On your orders your troops sack the village, pillaging everything of any value, and then put the buildings to the torch. From the coins and valuables that are found, you get your share of {reg1} coins.",
	"none",
	[
		(get_achievement_stat, ":achievement_stat_30_0", 30, 0),
		(get_achievement_stat, ":achievement_stat_30_1", 30, 1),
		(val_add, ":achievement_stat_30_0", 1),
		(set_achievement_stat, 30, 0, ":achievement_stat_30_0"),
		(try_begin),
			(ge, ":achievement_stat_30_0", 3),
			(ge, ":achievement_stat_30_1", 3),
			(unlock_achievement, 30),
		(try_end),
		(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
		(try_begin),
			(gt, ":current_town_town_lord", 0),
			(call_script, "script_change_player_relation_with_troop", ":current_town_town_lord", -5),
		(try_end),
		(store_random_in_range, ":random_in_range_-35_-25", -35, -25),
		(call_script, "script_change_player_relation_with_center", "$current_town", ":random_in_range_-35_-25"),
		(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
		(store_relation, ":relation_faction_of_party_current_town_player_supporters_faction", ":faction_of_party_current_town", "fac_player_supporters_faction"),
		(try_begin),
			(lt, ":relation_faction_of_party_current_town_player_supporters_faction", 0),
			(call_script, "script_change_player_relation_with_faction", ":faction_of_party_current_town", -3),
		(try_end),
		(assign, ":var_7", 50),
		(party_get_slot, ":current_town_town_prosperity", "$current_town", slot_town_prosperity),
		(store_mul, ":value", ":current_town_town_prosperity", 5),
		(val_add, ":var_7", ":value"),
		(call_script, "script_troop_add_gold", "trp_player", ":var_7"),
		(assign, ":var_10", 3),
		(store_div, ":value_2", ":var_7", 100),
		(val_add, ":var_10", ":value_2"),
		(faction_get_slot, ":faction_of_party_current_town_morale_of_player_troops", ":faction_of_party_current_town", slot_faction_morale_of_player_troops),
		(store_mul, ":value_3", ":var_10", 200),
		(val_sub, ":faction_of_party_current_town_morale_of_player_troops", ":value_3"),
		(faction_set_slot, ":faction_of_party_current_town", slot_faction_morale_of_player_troops, ":faction_of_party_current_town_morale_of_player_troops"),
		(call_script, "script_objectionable_action", 3, "str_loot_village"),
		(assign, reg1, ":var_7")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_close"),
			(call_script, "script_calculate_amount_of_cattle_can_be_stolen", "$current_town"),
			(assign, ":var_1", reg0),
			(val_mul, ":var_1", 3),
			(val_div, ":var_1", 2),
			(party_get_slot, ":current_town_village_number_of_cattle", "$current_town", slot_village_number_of_cattle),
			(val_min, ":var_1", ":current_town_village_number_of_cattle"),
			(val_add, ":var_1", 1),
			(store_random_in_range, ":random_in_range_0_var_1", 0, ":var_1"),
			(try_begin),
				(gt, ":random_in_range_0_var_1", 0),
				(call_script, "script_create_cattle_herd", "$current_town", ":random_in_range_0_var_1"),
				(val_sub, ":current_town_village_number_of_cattle", ":random_in_range_0_var_1"),
				(party_set_slot, "$current_town", slot_village_number_of_cattle, ":current_town_village_number_of_cattle"),
			(try_end),
			(troop_clear_inventory, "trp_temp_troop"),
			(reset_item_probabilities, 100),
			(try_for_range, ":item", "itm_trade_spice", "itm_trade_dummy01"),
				(store_item_value, ":item_value_item", ":item"),
				(val_max, ":item_value_item", 50),
				(store_sub, ":value", "$current_town", "p_town_1"),
				(val_add, ":value", "trp_town_1_merchant"),
				(store_item_kind_count, ":item_kind_count_item_value", ":item", ":value"),
				(assign, reg31, ":item_kind_count_item_value"),
				(try_begin),
					(le, ":item_kind_count_item_value", 0),
					(val_mul, ":item_value_item", 2),
				(else_try),
					(val_sub, ":item_kind_count_item_value", 1),
					(store_mul, ":value_2", ":item_kind_count_item_value", 15),
					(val_clamp, ":value_2", 0, 76),
					(val_mul, ":value_2", ":item_value_item"),
					(val_div, ":value_2", 100),
					(val_sub, ":item_value_item", ":value_2"),
				(try_end),
				(assign, reg32, ":item_value_item"),
				(store_div, ":value_3", 1500, ":item_value_item"),
				(val_clamp, ":value_3", 3, 31),
				(assign, reg33, ":value_3"),
				(set_item_probability_in_merchandise, ":item", ":value_3"),
			(try_end),
			(party_get_skill_level, ":skill_level_main_party_looting", "p_main_party", "skl_looting"),
			(val_mul, ":skill_level_main_party_looting", 2),
			(store_add, ":value_4", ":skill_level_main_party_looting", 25),
			(troop_add_merchandise, "trp_temp_troop", 11, ":value_4"),
			(troop_sort_inventory, "trp_temp_troop"),
			(change_screen_loot, "trp_temp_troop")
		], ".")
	]
	),

	("village_loot_defeat", mnf_scale_picture, "Fighting with courage and determination, the villagers manage to hold together and drive off your forces.",
	"none",
	[
		(set_background_mesh, "mesh_pic_villageriot")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("village_loot_continue", 0, "Do you wish to continue looting this village?",
	"none",
	[],
	[
		("disembark_yes",
		[],
		"Yes.",
		[
			(rest_for_hours, 3, 5, 1),
			(change_screen_return)
		], "."),

		("disembark_no",
		[],
		"No.",
		[
			(call_script, "script_village_set_state", "$current_town", 0),
			(party_set_slot, "$current_town", slot_village_raided_by, -1),
			(assign, "$g_player_raiding_village", 0),
			(change_screen_return)
		], ".")
	]
	),

	("close", 0, "Nothing.",
	"none",
	[
		(change_screen_return)
	],
	[]
	),

	("town", mnf_enable_hot_keys|mnf_scale_picture, "{s10} {s14}^{s11}{s12}{s13}",
	"none",
	[
		(try_begin),
			(eq, "$sneaked_into_town", 1),
			(call_script, "script_music_set_situation_with_culture", 16384),
		(else_try),
			(call_script, "script_music_set_situation_with_culture", 65536),
		(try_end),
		(store_encountered_party, "$current_town"),
		(try_begin),
			(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
			(ge, ":current_town_town_lord", 0),
			(set_fixed_point_multiplier, 100),
			(position_set_x, 0, 70),
			(position_set_y, 0, 5),
			(position_set_z, 0, 75),
			(set_game_menu_tableau_mesh, "tableau_troop_note_mesh", ":current_town_town_lord", 0),
		(try_end),
		(call_script, "script_update_center_recon_notes", "$current_town"),
		(assign, "$g_defending_against_siege", 0),
		(str_clear, 3),
		(party_get_battle_opponent, ":battle_opponent_l_current_town", "$current_town"),
		(store_faction_of_party, ":faction_of_party_g_encountered_party", "$g_encountered_party"),
		(store_relation, ":relation_faction_of_party_g_encountered_party_player_supporters_faction", ":faction_of_party_g_encountered_party", "fac_player_supporters_faction"),
		(try_begin),
			(gt, ":battle_opponent_l_current_town", 0),
			(ge, ":relation_faction_of_party_g_encountered_party_player_supporters_faction", 0),
			(store_faction_of_party, ":faction_of_party_battle_opponent_l_current_town", ":battle_opponent_l_current_town"),
			(store_relation, ":relation_faction_of_party_battle_opponent_l_current_town_player_supporters_faction", ":faction_of_party_battle_opponent_l_current_town", "fac_player_supporters_faction"),
			(lt, ":relation_faction_of_party_battle_opponent_l_current_town_player_supporters_faction", 0),
			(assign, "$g_defending_against_siege", 1),
			(assign, "$g_siege_first_encounter", 1),
			(jump_to_menu, "mnu_siege_started_defender"),
		(try_end),
		(try_begin),
			(is_between, "$g_encountered_party", "p_town_1", "p_castle_1"),
			(store_sub, ":value", "$g_encountered_party", "p_town_1"),
			(set_achievement_stat, 26, ":value", 1),
			(assign, ":value_2", 0),
			(try_for_range, ":party", "p_town_1", "p_castle_1"),
				(store_sub, ":value", ":party", "p_town_1"),
				(get_achievement_stat, ":achievement_stat_26_value", 26, ":value"),
				(eq, ":achievement_stat_26_value", 0),
				(assign, ":value_2", 1),
			(try_end),
			(try_begin),
				(eq, ":value_2", 0),
				(unlock_achievement, 26),
			(try_end),
		(try_end),
		(assign, "$qst_collect_taxes_currently_collecting", 0),
		(try_begin),
			(gt, "$quest_auto_menu", 0),
			(jump_to_menu, "$quest_auto_menu"),
			(assign, "$quest_auto_menu", 0),
		(try_end),
		(try_begin),
			(eq, "$g_town_assess_trade_goods_after_rest", 1),
			(assign, "$g_town_assess_trade_goods_after_rest", 0),
			(jump_to_menu, "mnu_town_trade_assessment"),
		(try_end),
		(assign, "$talk_context", 0),
		(assign, "$all_doors_locked", 0),
		(try_begin),
			(eq, "$g_town_visit_after_rest", 1),
			(assign, "$g_town_visit_after_rest", 0),
			(assign, "$town_entered", 1),
		(try_end),
		(try_begin),
			(eq, "$g_leave_town", 1),
			(assign, "$g_leave_town", 0),
			(assign, "$g_permitted_to_center", 0),
			(leave_encounter),
			(change_screen_return),
		(try_end),
		(str_store_party_name, 2, "$current_town"),
		(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
		(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
		(str_store_faction_name, 9, ":faction_of_party_current_town"),
		(try_begin),
			(ge, ":current_town_town_lord", 0),
			(str_store_troop_name, 8, ":current_town_town_lord"),
			(str_store_string, 7, "@{s8} of {s9}"),
		(try_end),
		(try_begin),
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(str_store_string, 60, 2),
			(party_get_slot, ":current_town_town_prosperity", "$current_town", slot_town_prosperity),
			(try_begin),
				(ge, "$cheat_mode", 1),
				(assign, reg4, ":current_town_town_prosperity"),
				(display_message, "@{!}DEBUG -- Prosperity: {reg4}"),
			(try_end),
			(store_div, ":value_3", ":current_town_town_prosperity", 10),
			(val_min, ":value_3", 9),
			(val_add, ":value_3", "str_town_prosperity_0"),
			(str_store_string, 10, ":value_3"),
			(store_div, ":value_3", ":current_town_town_prosperity", 20),
			(val_min, ":value_3", 4),
			(val_add, ":value_3", "str_town_alt_prosperity_0"),
			(str_store_string, 14, ":value_3"),
		(else_try),
			(str_clear, 14),
			(str_store_string, 10, "@You are at {s2}."),
		(try_end),
		(assign, ":var_14", reg0),
		(assign, ":var_15", reg4),
		(assign, reg0, 0),
		(assign, reg4, 0),
		(try_begin),
			(lt, ":current_town_town_lord", 1),
		(else_try),
			(call_script, "script_troop_get_family_relation_to_troop", ":current_town_town_lord", "trp_player"),
			(ge, reg0, 1),
		(else_try),
			(eq, ":faction_of_party_current_town", "$players_kingdom"),
			(is_between, ":faction_of_party_current_town", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(faction_slot_eq, ":faction_of_party_current_town", slot_faction_leader, ":current_town_town_lord"),
			(str_store_string, 11, "@liege"),
			(assign, reg0, 1),
		(else_try),
			(eq, ":faction_of_party_current_town", "$players_oath_renounced_against_kingdom"),
			(is_between, ":faction_of_party_current_town", "fac_kingdom_1", "fac_kingdoms_end"),
			(faction_slot_eq, ":faction_of_party_current_town", slot_faction_leader, ":current_town_town_lord"),
			(str_store_string, 11, "@former liege"),
			(assign, reg0, 1),
		(else_try),
			(this_or_next|neg|troop_is_hero, ":current_town_town_lord"),
			(troop_slot_eq, ":current_town_town_lord", slot_troop_met, 0),
		(else_try),
			(call_script, "script_dplmc_is_affiliated_family_member", ":current_town_town_lord"),
			(ge, reg0, 1),
			(try_begin),
				(ge, "$g_encountered_party_relation", 0),
				(str_store_string, 11, "str_dplmc_ally"),
			(else_try),
				(str_store_string, 11, "@affiliate"),
			(try_end),
		(else_try),
			(call_script, "script_troop_get_player_relation", ":current_town_town_lord"),
			(is_between, ":current_town_town_lord", "trp_npc1", "trp_kingdom_1_lord"),
			(neg|troop_slot_eq, ":current_town_town_lord", slot_troop_playerparty_history, 8),
			(try_begin),
				(ge, "$g_encountered_party_relation", 0),
				(ge, reg0, 50),
				(str_store_string, 11, "str_dplmc_ally"),
			(else_try),
				(ge, "$g_encountered_party_relation", 0),
				(ge, reg0, 20),
				(str_store_string, 11, "str_dplmc_friend"),
			(else_try),
				(str_store_string, 11, "@former companion"),
			(try_end),
			(assign, reg0, 1),
		(else_try),
			(lt, "$g_encountered_party_relation", 0),
			(assign, reg0, 0),
		(else_try),
			(val_div, reg0, 50),
			(ge, reg0, 1),
			(str_store_string, 11, "str_dplmc_friend"),
		(else_try),
			(eq, ":faction_of_party_current_town", "$players_kingdom"),
			(faction_slot_eq, ":faction_of_party_current_town", slot_faction_marshall, ":current_town_town_lord"),
			(str_store_string, 11, "@marshall"),
		(else_try),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", ":faction_of_party_current_town"),
			(val_add, reg0, 1),
			(val_sub, reg0, 50),
			(ge, reg0, 1),
			(str_store_string, 11, "@vassal"),
		(else_try),
			(assign, reg0, 0),
		(try_end),
		(try_begin),
			(party_slot_eq, "$current_town", slot_party_type, 2),
			(try_begin),
				(eq, ":current_town_town_lord", "trp_player"),
				(str_store_string, 11, "@ Your own banner flies over the castle gate."),
			(else_try),
				(ge, reg0, 1),
				(str_store_string, 11, "@ You see the banner of your {s11} {s7} over the castle gate."),
			(else_try),
				(gt, ":current_town_town_lord", -1),
				(troop_slot_eq, ":current_town_town_lord", slot_troop_spouse, "trp_player"),
				(str_store_string, 11, "str__you_see_the_banner_of_your_wifehusband_s7_over_the_castle_gate"),
			(else_try),
				(ge, ":current_town_town_lord", 0),
				(str_store_string, 11, "@ You see the banner of {s7} over the castle gate."),
			(else_try),
				(str_store_string, 11, "@ This castle has no garrison."),
			(try_end),
		(else_try),
			(try_begin),
				(eq, ":current_town_town_lord", "trp_player"),
				(str_store_string, 11, "@ Your own banner flies over the town gates."),
			(else_try),
				(ge, reg0, 1),
				(str_store_string, 11, "@ The banner of your {s11} {s7} flies over the town gates."),
			(else_try),
				(gt, ":current_town_town_lord", -1),
				(troop_slot_eq, ":current_town_town_lord", slot_troop_spouse, "trp_player"),
				(str_store_string, 11, "str__the_banner_of_your_wifehusband_s7_flies_over_the_town_gates"),
			(else_try),
				(ge, ":current_town_town_lord", 0),
				(str_store_string, 11, "@ You see the banner of {s7} over the town gates."),
			(else_try),
				(str_store_string, 11, "@ This town has no garrison."),
			(try_end),
		(try_end),
		(assign, reg0, ":var_14"),
		(assign, reg4, ":var_15"),
		(str_clear, 12),
		(try_begin),
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(party_get_slot, ":current_town_center_player_relation", "$current_town", slot_center_player_relation),
			(call_script, "script_describe_center_relation_to_s3", ":current_town_center_player_relation"),
			(assign, reg9, ":current_town_center_player_relation"),
			(str_store_string, 12, "@{!} {s3} ({reg9})."),
		(try_end),
		(str_clear, 13),
		(try_begin),
			(gt, "$entry_to_town_forbidden", 0),
			(str_store_string, 13, "@ You have successfully sneaked in."),
		(else_try),
			(faction_slot_eq, ":faction_of_party_current_town", slot_faction_ai_state, 6),
			(faction_slot_eq, ":faction_of_party_current_town", slot_faction_ai_object, "$current_town"),
			(str_store_string, 13, "str__the_lord_is_currently_holding_a_feast_in_his_hall"),
		(try_end),
		(try_begin),
			(store_time_of_day, reg12),
			(ge, reg12, 5),
			(lt, reg12, 21),
			(assign, "$town_nighttime", 0),
		(else_try),
			(assign, "$town_nighttime", 1),
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(str_store_string, 13, "str_town_nighttime"),
		(try_end),
		(try_begin),
			(party_slot_ge, "$current_town", 156, 1),
			(neg|is_currently_night),
			(party_set_slot, "$current_town", slot_town_has_tournament, 1),
			(str_store_string, 13, "@{s13} A melee will be held here soon."),
		(try_end),
		(assign, "$castle_undefended", 0),
		(party_get_num_companions, ":num_companions_collective_enemy", "p_collective_enemy"),
		(try_begin),
			(eq, ":num_companions_collective_enemy", 0),
			(assign, "$castle_undefended", 1),
		(try_end),
		(call_script, "script_set_town_picture")
	],
	[
		("castle_castle",
		[
			(party_slot_eq, "$current_town", slot_party_type, 2),
			(eq, "$sneaked_into_town", 0),
			(str_clear, 1),
			(try_begin),
				(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
				(faction_slot_eq, ":faction_of_party_current_town", slot_faction_ai_state, 6),
				(faction_slot_eq, ":faction_of_party_current_town", slot_faction_ai_object, "$current_town"),
				(str_store_string, 1, "str__join_the_feast"),
			(try_end)
		],
		"Go to the Lord's hall{s1}.",
		[
			(try_begin),
				(this_or_next|eq, "$all_doors_locked", 1),
				(eq, "$sneaked_into_town", 1),
				(display_message, "str_door_locked", 0xffffaaaa),
			(else_try),
				(this_or_next|neq, "$players_kingdom", "$g_encountered_party_faction"),
				(neg|troop_slot_ge, "trp_player", 7, 50),
				(neg|troop_slot_ge, "trp_player", 7, 125),
				(neq, "$g_player_eligible_feast_center_no", "$current_town"),
				(faction_slot_eq, "$g_encountered_party_faction", slot_faction_ai_state, 6),
				(faction_slot_eq, "$g_encountered_party_faction", slot_faction_ai_object, "$g_encountered_party"),
				(neg|check_quest_active, "qst_wed_betrothed"),
				(neg|check_quest_active, "qst_wed_betrothed_female"),
				(neg|troop_slot_ge, "trp_player", 30, "trp_npc1"),
				(jump_to_menu, "mnu_cannot_enter_court"),
			(else_try),
				(assign, "$town_entered", 1),
				(call_script, "script_enter_court", "$current_town"),
			(try_end)
		], "Door_to_the_castle."),

		("join_tournament",
		[
			(neg|is_currently_night),
			(party_slot_ge, "$current_town", 156, 1)
		],
		"Join the melee.",
		[
			(call_script, "script_fill_tournament_participants_troop", "$current_town", 1),
			(assign, "$g_tournament_cur_tier", 0),
			(assign, "$g_tournament_player_team_won", -1),
			(assign, "$g_tournament_bet_placed", 0),
			(assign, "$g_tournament_bet_win_amount", 0),
			(assign, "$g_tournament_last_bet_tier", -1),
			(assign, "$g_tournament_next_num_teams", 0),
			(assign, "$g_tournament_next_team_size", 0),
			(jump_to_menu, "mnu_town_tournament")
		], "."),

		("town_castle",
		[
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(eq, "$entry_to_town_forbidden", 0),
			(str_clear, 1),
			(try_begin),
				(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
				(faction_slot_eq, ":faction_of_party_current_town", slot_faction_ai_state, 6),
				(faction_slot_eq, ":faction_of_party_current_town", slot_faction_ai_object, "$current_town"),
				(str_store_string, 1, "str__join_the_feast"),
			(try_end)
		],
		"Go to the castle{s1}.",
		[
			(try_begin),
				(this_or_next|eq, "$all_doors_locked", 1),
				(eq, "$sneaked_into_town", 1),
				(display_message, "str_door_locked", 0xffffaaaa),
			(else_try),
				(this_or_next|neq, "$players_kingdom", "$g_encountered_party_faction"),
				(neg|troop_slot_ge, "trp_player", 7, 50),
				(neg|troop_slot_ge, "trp_player", 7, 125),
				(neq, "$g_player_eligible_feast_center_no", "$current_town"),
				(faction_slot_eq, "$g_encountered_party_faction", slot_faction_ai_state, 6),
				(faction_slot_eq, "$g_encountered_party_faction", slot_faction_ai_object, "$g_encountered_party"),
				(neg|check_quest_active, "qst_wed_betrothed"),
				(neg|check_quest_active, "qst_wed_betrothed_female"),
				(neg|troop_slot_ge, "trp_player", 30, "trp_npc1"),
				(jump_to_menu, "mnu_cannot_enter_court"),
			(else_try),
				(assign, "$town_entered", 1),
				(call_script, "script_enter_court", "$current_town"),
			(try_end)
		], "Door_to_the_castle."),

		("town_center",
		[
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(this_or_next|eq, "$entry_to_town_forbidden", 0),
			(eq, "$sneaked_into_town", 1)
		],
		"Take a walk around the streets.",
		[
			(try_begin),
				(eq, "$talk_context", 18),
				(assign, "$talk_context", 19),
				(assign, "$g_mt_mode", 3),
				(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
				(faction_get_slot, ":faction_of_party_current_town_quick_battle_tier_1_archer", ":faction_of_party_current_town", slot_faction_quick_battle_tier_1_archer),
				(faction_get_slot, ":faction_of_party_current_town_quick_battle_tier_1_archer_2", ":faction_of_party_current_town", slot_faction_quick_battle_tier_1_archer),
				(faction_get_slot, ":faction_of_party_current_town_quick_battle_tier_2_archer", ":faction_of_party_current_town", slot_faction_quick_battle_tier_2_archer),
				(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
				(modify_visitors_at_site, ":current_town_town_center"),
				(reset_visitors),
				(try_begin),
					(party_get_slot, ":current_town_260", "$current_town", 260),
					(store_current_hours, ":current_hours"),
					(store_add, ":value", ":current_town_260", 4),
					(neg|is_between, ":current_hours", ":current_town_260", ":value"),
					(store_time_of_day, ":time_of_day"),
					(try_begin),
						(ge, ":time_of_day", 6),
						(lt, ":time_of_day", 22),
						(set_visitors, 25, ":faction_of_party_current_town_quick_battle_tier_1_archer", 2),
						(set_visitors, 26, ":faction_of_party_current_town_quick_battle_tier_1_archer", 1),
						(set_visitors, 27, ":faction_of_party_current_town_quick_battle_tier_1_archer_2", 2),
						(set_visitors, 28, ":faction_of_party_current_town_quick_battle_tier_2_archer", 1),
					(else_try),
						(set_visitors, 25, ":faction_of_party_current_town_quick_battle_tier_1_archer", 1),
						(set_visitors, 26, ":faction_of_party_current_town_quick_battle_tier_1_archer", 1),
						(set_visitors, 27, ":faction_of_party_current_town_quick_battle_tier_1_archer_2", 1),
						(set_visitors, 28, ":faction_of_party_current_town_quick_battle_tier_2_archer", 1),
					(try_end),
				(else_try),
					(store_time_of_day, ":time_of_day"),
					(try_begin),
						(ge, ":time_of_day", 6),
						(lt, ":time_of_day", 22),
						(set_visitors, 25, ":faction_of_party_current_town_quick_battle_tier_1_archer", 1),
						(set_visitors, 26, ":faction_of_party_current_town_quick_battle_tier_1_archer", 0),
						(set_visitors, 27, ":faction_of_party_current_town_quick_battle_tier_1_archer_2", 1),
						(set_visitors, 28, ":faction_of_party_current_town_quick_battle_tier_2_archer", 0),
					(else_try),
						(set_visitors, 25, ":faction_of_party_current_town_quick_battle_tier_1_archer", 1),
						(set_visitors, 26, ":faction_of_party_current_town_quick_battle_tier_1_archer", 0),
						(set_visitors, 27, ":faction_of_party_current_town_quick_battle_tier_1_archer_2", 0),
						(set_visitors, 28, ":faction_of_party_current_town_quick_battle_tier_2_archer", 0),
					(try_end),
				(try_end),
				(set_jump_mission, "mt_town_center"),
				(jump_to_scene, ":current_town_town_center"),
				(change_screen_mission),
			(else_try),
				(assign, "$talk_context", 0),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
				(modify_visitors_at_site, ":current_town_town_center"),
				(reset_visitors),
				(assign, "$g_mt_mode", 0),
				(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
				(try_begin),
					(neq, ":faction_of_party_current_town", "fac_player_supporters_faction"),
					(faction_get_slot, ":g_encountered_party_faction_castle_guard_troop", "$g_encountered_party_faction", slot_faction_castle_guard_troop),
					(faction_get_slot, ":g_encountered_party_faction_town_walker_male_troop", "$g_encountered_party_faction", slot_faction_town_walker_male_troop),
					(faction_get_slot, ":faction_of_party_current_town_quick_battle_tier_1_archer", ":faction_of_party_current_town", slot_faction_quick_battle_tier_2_infantry),
					(faction_get_slot, ":faction_of_party_current_town_quick_battle_tier_1_archer_2", ":faction_of_party_current_town", slot_faction_quick_battle_tier_1_archer),
				(else_try),
					(party_get_slot, ":current_town_center_original_faction", "$current_town", slot_center_original_faction),
					(faction_get_slot, ":g_encountered_party_faction_castle_guard_troop", ":current_town_center_original_faction", slot_faction_castle_guard_troop),
					(faction_get_slot, ":g_encountered_party_faction_town_walker_male_troop", ":current_town_center_original_faction", slot_faction_town_walker_male_troop),
					(faction_get_slot, ":faction_of_party_current_town_quick_battle_tier_1_archer", ":current_town_center_original_faction", slot_faction_quick_battle_tier_2_infantry),
					(faction_get_slot, ":faction_of_party_current_town_quick_battle_tier_1_archer_2", ":current_town_center_original_faction", slot_faction_quick_battle_tier_1_archer),
				(try_end),
				(try_begin),
					(party_get_slot, ":current_town_260", "$current_town", 260),
					(store_current_hours, ":current_hours"),
					(store_add, ":value", ":current_town_260", 4),
					(neg|is_between, ":current_hours", ":current_town_260", ":value"),
					(set_visitor, 23, ":g_encountered_party_faction_town_walker_male_troop"),
				(try_end),
				(set_visitor, 24, ":g_encountered_party_faction_castle_guard_troop"),
				(try_begin),
					(gt, ":faction_of_party_current_town_quick_battle_tier_1_archer", 0),
					(assign, reg0, ":faction_of_party_current_town_quick_battle_tier_1_archer_2"),
					(assign, reg1, ":faction_of_party_current_town_quick_battle_tier_1_archer_2"),
					(assign, reg2, ":faction_of_party_current_town_quick_battle_tier_1_archer"),
					(assign, reg3, ":faction_of_party_current_town_quick_battle_tier_1_archer"),
				(else_try),
					(troop_get_slot, ":troop_trees_666", "$troop_trees", 666),
					(assign, reg0, ":troop_trees_666"),
					(troop_get_slot, ":troop_trees_668", "$troop_trees", 668),
					(assign, reg1, ":troop_trees_668"),
					(troop_get_slot, ":troop_trees_667", "$troop_trees", 667),
					(assign, reg2, ":troop_trees_667"),
					(troop_get_slot, ":troop_trees_673", "$troop_trees", 673),
					(assign, reg3, ":troop_trees_673"),
				(try_end),
				(shuffle_range, 0, 4),
				(try_begin),
					(party_get_slot, ":current_town_260", "$current_town", 260),
					(store_current_hours, ":current_hours"),
					(store_add, ":value", ":current_town_260", 4),
					(neg|is_between, ":current_hours", ":current_town_260", ":value"),
					(set_visitor, 25, reg0),
					(set_visitor, 26, reg1),
					(set_visitor, 27, reg2),
					(set_visitor, 28, reg3),
				(try_end),
				(party_get_slot, ":current_town_town_armorer", "$current_town", slot_town_armorer),
				(set_visitor, 9, ":current_town_town_armorer"),
				(party_get_slot, ":current_town_town_armorer", "$current_town", slot_town_weaponsmith),
				(set_visitor, 10, ":current_town_town_armorer"),
				(party_get_slot, ":current_town_town_armorer", "$current_town", slot_town_elder),
				(set_visitor, 11, ":current_town_town_armorer"),
				(party_get_slot, ":current_town_town_armorer", "$current_town", slot_town_horse_merchant),
				(set_visitor, 12, ":current_town_town_armorer"),
				(call_script, "script_init_town_walkers"),
				(set_jump_mission, "mt_town_center"),
				(assign, ":value_2", 256),
				(try_begin),
					(store_random_in_range, ":random_in_range_0_100", 0, 100),
					(ge, ":random_in_range_0_100", 0),
					(party_get_slot, ":current_town_444", "$current_town", 444),
					(store_random_in_range, ":random_in_range_9_12", 9, 12),
					(set_visitor, ":random_in_range_9_12", ":current_town_444"),
				(try_end),
				(try_begin),
					(eq, "$sneaked_into_town", 1),
					(assign, ":value_2", 447),
				(try_end),
				(mission_tpl_entry_set_override_flags, "mt_town_center", 0, ":value_2"),
				(mission_tpl_entry_set_override_flags, "mt_town_center", 2, ":value_2"),
				(mission_tpl_entry_set_override_flags, "mt_town_center", 3, ":value_2"),
				(mission_tpl_entry_set_override_flags, "mt_town_center", 4, ":value_2"),
				(mission_tpl_entry_set_override_flags, "mt_town_center", 5, ":value_2"),
				(mission_tpl_entry_set_override_flags, "mt_town_center", 6, ":value_2"),
				(mission_tpl_entry_set_override_flags, "mt_town_center", 7, ":value_2"),
				(try_begin),
					(eq, "$town_entered", 0),
					(assign, "$town_entered", 1),
					(eq, "$town_nighttime", 0),
					(set_jump_entry, 1),
				(try_end),
				(jump_to_scene, ":current_town_town_center"),
				(change_screen_mission),
			(try_end)
		], "Door_to_the_town_center."),

		("town_tavern",
		[
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(this_or_next|eq, "$entry_to_town_forbidden", 0),
			(eq, "$sneaked_into_town", 1)
		],
		"Visit the tavern.",
		[
			(try_begin),
				(eq, "$all_doors_locked", 1),
				(display_message, "str_door_locked", 0xffffaaaa),
			(else_try),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(assign, "$town_entered", 1),
				(set_jump_mission, "mt_town_default"),
				(mission_tpl_entry_set_override_flags, "mt_town_default", 0, 256),
				(try_begin),
					(eq, "$sneaked_into_town", 1),
					(mission_tpl_entry_set_override_flags, "mt_town_default", 0, 447),
				(try_end),
				(party_get_slot, ":current_town_town_tavern", "$current_town", slot_town_tavern),
				(jump_to_scene, ":current_town_town_tavern"),
				(scene_set_slot, ":current_town_town_tavern", slot_scene_visited, 1),
				(assign, "$talk_context", 14),
				(call_script, "script_initialize_tavern_variables"),
				(store_random_in_range, ":random_in_range_0_4", 0, 4),
				(modify_visitors_at_site, ":current_town_town_tavern"),
				(reset_visitors),
				(assign, ":var_3", 17),
				(try_begin),
					(eq, "$cheat_mode", 1),
					(troop_get_slot, ":belligerent_drunk_cur_center", "trp_belligerent_drunk", slot_troop_cur_center),
					(try_begin),
						(eq, "$cheat_mode", 0),
					(else_try),
						(is_between, ":belligerent_drunk_cur_center", "p_town_1", "p_salt_mine"),
						(str_store_party_name, 4, ":belligerent_drunk_cur_center"),
						(display_message, "str_belligerent_drunk_in_s4"),
					(else_try),
						(display_message, "str_belligerent_drunk_not_found"),
					(try_end),
					(troop_get_slot, ":fight_promoter_cur_center", "trp_fight_promoter", slot_troop_cur_center),
					(try_begin),
						(eq, "$cheat_mode", 0),
					(else_try),
						(is_between, ":fight_promoter_cur_center", "p_town_1", "p_salt_mine"),
						(str_store_party_name, 4, ":fight_promoter_cur_center"),
						(display_message, "str_roughlooking_character_in_s4"),
					(else_try),
						(display_message, "str_roughlooking_character_not_found"),
					(try_end),
				(try_end),
				(try_begin),
					(store_current_hours, ":current_hours"),
					(store_sub, ":value", ":current_hours", "$g_last_assassination_attempt_time"),
					(gt, ":value", 168),
					(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
						(this_or_next|is_between, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
						(troop_slot_eq, ":troop", slot_troop_occupation, 2),
						(neg|troop_slot_ge, ":troop", 2, 11),
						(this_or_next|troop_slot_eq, ":troop", slot_lord_reputation_type, 24),
						(this_or_next|troop_slot_eq, ":troop", slot_lord_reputation_type, 8),
						(troop_slot_eq, ":troop", slot_lord_reputation_type, 5),
						(troop_get_slot, ":troop_leaded_party", ":troop", slot_troop_leaded_party),
						(party_is_active, ":troop_leaded_party"),
						(party_get_attached_to, ":attached_to_troop_leaded_party", ":troop_leaded_party"),
						(eq, ":attached_to_troop_leaded_party", "$g_encountered_party"),
						(call_script, "script_troop_get_relation_with_troop", "trp_player", ":troop"),
						(lt, reg0, -20),
						(assign, "$g_last_assassination_attempt_time", ":current_hours"),
						(troop_set_slot, "trp_hired_assassin", slot_troop_cur_center, "$g_encountered_party"),
					(try_end),
					(lt, "$g_last_assassination_attempt_time", ":current_hours"),
					(neg|troop_slot_eq, "trp_hired_assassin", slot_troop_cur_center, "$g_encountered_party"),
					(try_for_range, ":troop_2", "trp_knight_1_1_wife", "trp_heroes_end"),
						(troop_slot_eq, ":troop_2", slot_troop_cur_center, "$g_encountered_party"),
						(troop_slot_eq, ":troop_2", slot_lord_reputation_type, 24),
						(troop_slot_eq, ":troop_2", slot_troop_occupation, 6),
						(call_script, "script_troop_get_player_relation", ":troop_2"),
						(lt, reg0, 1),
						(try_begin),
							(ge, reg0, -20),
							(troop_slot_ge, ":troop_2", 30, 1),
							(troop_get_slot, reg0, ":troop_2", slot_troop_spouse),
							(call_script, "script_troop_get_player_relation", reg0),
						(try_end),
						(lt, reg0, -20),
						(assign, "$g_last_assassination_attempt_time", ":current_hours"),
						(troop_set_slot, "trp_hired_assassin", slot_troop_cur_center, "$g_encountered_party"),
					(try_end),
				(try_end),
				(try_begin),
					(eq, "$g_starting_town", "$current_town"),
					(this_or_next|neg|check_quest_finished, "qst_collect_men"),
					(this_or_next|neg|check_quest_finished, "qst_learn_where_merchant_brother_is"),
					(this_or_next|neg|check_quest_finished, "qst_save_relative_of_merchant"),
					(this_or_next|neg|check_quest_finished, "qst_save_town_from_bandits"),
					(eq, "$g_do_one_more_meeting_with_merchant", 1),
					(assign, ":value_2", 0),
					(try_begin),
						(eq, "$g_encountered_party_faction", "fac_kingdom_1"),
						(assign, ":value_2", "trp_swadian_merchant"),
					(else_try),
						(eq, "$g_encountered_party_faction", "fac_kingdom_2"),
						(assign, ":value_2", "trp_vaegir_merchant"),
					(else_try),
						(eq, "$g_encountered_party_faction", "fac_kingdom_3"),
						(assign, ":value_2", "trp_khergit_merchant"),
					(else_try),
						(eq, "$g_encountered_party_faction", "fac_kingdom_4"),
						(assign, ":value_2", "trp_nord_merchant"),
					(else_try),
						(eq, "$g_encountered_party_faction", "fac_kingdom_5"),
						(assign, ":value_2", "trp_rhodok_merchant"),
					(else_try),
						(eq, "$g_encountered_party_faction", "fac_kingdom_6"),
						(assign, ":value_2", "trp_sarranid_merchant"),
					(try_end),
					(gt, ":value_2", 0),
					(set_visitor, ":var_3", ":value_2"),
					(val_add, ":var_3", 1),
				(try_end),
				(try_begin),
					(eq, ":random_in_range_0_4", 0),
					(call_script, "script_setup_tavern_attacker", ":var_3"),
					(val_add, ":var_3", 1),
				(try_end),
				(try_begin),
					(eq, 1, 0),
					(troop_slot_eq, "trp_fight_promoter", slot_troop_cur_center, "$current_town"),
					(set_visitor, ":var_3", "trp_fight_promoter"),
					(val_add, ":var_3", 1),
				(try_end),
				(party_get_slot, ":current_town_center_npc_volunteer_troop_type", "$current_town", slot_center_npc_volunteer_troop_type),
				(party_get_slot, ":current_town_center_npc_volunteer_troop_amount", "$current_town", slot_center_npc_volunteer_troop_amount),
				(try_begin),
					(gt, ":current_town_center_npc_volunteer_troop_type", 0),
					(gt, ":current_town_center_npc_volunteer_troop_amount", 0),
					(set_visitor, ":var_3", ":current_town_center_npc_volunteer_troop_type"),
					(val_add, ":var_3", 1),
				(try_end),
				(party_get_slot, ":current_town_104", "$current_town", 104),
				(party_get_slot, ":current_town_105", "$current_town", 105),
				(try_begin),
					(gt, ":current_town_105", 0),
					(gt, ":current_town_104", 0),
					(set_visitor, ":var_3", ":current_town_104"),
					(val_add, ":var_3", 1),
				(try_end),
				(try_begin),
					(eq, ":random_in_range_0_4", 1),
					(call_script, "script_setup_tavern_attacker", ":var_3"),
					(val_add, ":var_3", 1),
				(try_end),
				(try_for_range, ":troop_3", "trp_npc1", "trp_kingdom_1_lord"),
					(troop_slot_eq, ":troop_3", slot_troop_occupation, 0),
					(troop_slot_eq, ":troop_3", slot_troop_cur_center, "$current_town"),
					(neg|troop_slot_ge, ":troop_3", 8, "p_town_1"),
					(set_visitor, ":var_3", ":troop_3"),
					(val_add, ":var_3", 1),
				(try_end),
				(try_begin),
					(eq, ":random_in_range_0_4", 2),
					(call_script, "script_setup_tavern_attacker", ":var_3"),
					(val_add, ":var_3", 1),
				(try_end),
				(try_begin),
					(party_get_slot, ":current_town_center_ransom_broker", "$current_town", slot_center_ransom_broker),
					(gt, ":current_town_center_ransom_broker", 0),
					(assign, reg0, ":current_town_center_ransom_broker"),
					(assign, reg1, "$current_town"),
					(set_visitor, ":var_3", ":current_town_center_ransom_broker"),
					(val_add, ":var_3", 1),
				(else_try),
					(is_between, "$g_talk_troop", "trp_ransom_broker_1", "trp_tavern_traveler_1"),
					(store_add, ":value_3", "$current_town", 9),
					(try_begin),
						(ge, ":value_3", "p_castle_1"),
						(val_sub, ":value_3", 22),
					(try_end),
					(is_between, ":value_3", "p_town_1", "p_salt_mine"),
					(party_slot_eq, ":value_3", slot_party_type, 3),
					(try_begin),
						(eq, "$cheat_mode", 1),
						(str_store_party_name, 3, "$current_town"),
						(str_store_party_name, 4, ":value_3"),
						(display_message, "@{!}DEBUG - Current town is {s3}, but also checking {s4}"),
					(try_end),
					(party_get_slot, ":current_town_center_ransom_broker", ":value_3", slot_center_ransom_broker),
					(gt, ":current_town_center_ransom_broker", 0),
					(set_visitor, ":var_3", ":current_town_center_ransom_broker"),
					(val_add, ":var_3", 1),
				(try_end),
				(try_begin),
					(party_get_slot, ":current_town_center_tavern_traveler", "$current_town", slot_center_tavern_traveler),
					(gt, ":current_town_center_tavern_traveler", 0),
					(set_visitor, ":var_3", ":current_town_center_tavern_traveler"),
					(val_add, ":var_3", 1),
				(try_end),
				(try_begin),
					(party_get_slot, ":current_town_center_tavern_minstrel", "$current_town", slot_center_tavern_minstrel),
					(gt, ":current_town_center_tavern_minstrel", 0),
					(set_visitor, ":var_3", ":current_town_center_tavern_minstrel"),
					(val_add, ":var_3", 1),
				(else_try),
					(store_add, ":value_3", "$current_town", 9),
					(try_begin),
						(ge, ":value_3", "p_castle_1"),
						(val_sub, ":value_3", 22),
					(try_end),
					(party_get_slot, ":current_town_center_tavern_minstrel", ":value_3", slot_center_tavern_minstrel),
					(gt, ":current_town_center_tavern_minstrel", 0),
					(set_visitor, ":var_3", ":current_town_center_tavern_minstrel"),
					(val_add, ":var_3", 1),
				(try_end),
				(try_begin),
					(party_get_slot, ":main_party_465", "p_main_party", 465),
					(neq, ":main_party_465", 100),
					(try_begin),
						(neg|is_between, ":main_party_465", "p_town_1", "p_castle_1"),
						(store_random_in_range, ":random_in_range_0_20", 0, 20),
						(eq, ":random_in_range_0_20", 3),
						(set_visitor, ":var_3", "trp_custom_master"),
						(val_add, ":var_3", 1),
					(else_try),
						(eq, "$current_town", ":main_party_465"),
						(set_visitor, ":var_3", "trp_custom_master"),
						(val_add, ":var_3", 1),
					(try_end),
				(try_end),
				(try_begin),
					(party_get_slot, ":current_town_center_tavern_bookseller", "$current_town", slot_center_tavern_bookseller),
					(gt, ":current_town_center_tavern_bookseller", 0),
					(set_visitor, ":var_3", ":current_town_center_tavern_bookseller"),
					(val_add, ":var_3", 1),
				(try_end),
				(try_begin),
					(eq, ":random_in_range_0_4", 3),
					(call_script, "script_setup_tavern_attacker", ":var_3"),
					(val_add, ":var_3", 1),
				(try_end),
				(try_begin),
					(neg|check_quest_active, "qst_eliminate_bandits_infesting_village"),
					(neg|check_quest_active, "qst_deal_with_bandits_at_lords_village"),
					(assign, ":value_4", "p_salt_mine"),
					(try_for_range, ":party", "p_village_1", ":value_4"),
						(party_slot_eq, ":party", slot_village_bound_center, "$current_town"),
						(party_slot_ge, ":party", 39, 1),
						(neg|party_slot_eq, ":party", slot_town_lord, "trp_player"),
						(set_visitor, ":var_3", "trp_mercenary_infantry_1"),
						(val_add, ":var_3", 1),
						(assign, ":value_4", 0),
					(try_end),
				(try_end),
				(try_for_range, ":number", 32, 41),
					(party_get_slot, ":current_town_town_prosperity", "$current_town", slot_town_prosperity),
					(val_div, ":current_town_town_prosperity", 20),
					(store_random_in_range, ":random_in_range_current_town_town_prosperity_100", ":current_town_town_prosperity", 100),
					(gt, ":random_in_range_current_town_town_prosperity_100", 50),
					(try_begin),
						(val_mod, ":random_in_range_current_town_town_prosperity_100", 10),
						(try_begin),
							(eq, ":random_in_range_current_town_town_prosperity_100", 0),
							(store_random_in_range, ":random_in_range_swadian_town_walker_m_average_swadian_village_walker_m_average", "trp_swadian_town_walker_m_average", "trp_swadian_village_walker_m_average"),
						(else_try),
							(store_random_in_range, ":random_in_range_current_town_town_prosperity_100", 54, 56),
							(faction_get_slot, ":g_encountered_party_faction_culture", "$g_encountered_party_faction", slot_faction_culture),
							(faction_get_slot, ":random_in_range_swadian_town_walker_m_average_swadian_village_walker_m_average", ":g_encountered_party_faction_culture", ":random_in_range_current_town_town_prosperity_100"),
						(try_end),
						(store_random_in_range, ":random_in_range_0_1000", 0, 1000),
						(mission_tpl_entry_clear_override_items, "mt_town_default", ":number"),
						(store_random_in_range, ":random_in_range_current_town_town_prosperity_100", 0, 10),
						(try_begin),
							(party_slot_ge, "$current_town", 156, 1),
							(val_add, ":random_in_range_current_town_town_prosperity_100", 1),
						(try_end),
						(try_begin),
							(gt, ":random_in_range_current_town_town_prosperity_100", 3),
							(mission_tpl_entry_add_override_item, "mt_town_default", ":number", "itm_dedal_kufel"),
						(try_end),
						(set_visitor, ":number", ":random_in_range_swadian_town_walker_m_average_swadian_village_walker_m_average", ":random_in_range_0_1000"),
					(try_end),
				(try_end),
				(change_screen_mission),
			(try_end)
		], "Door_to_the_tavern."),

		("town_merchant",
		[
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(eq, 1, 0),
			(eq, "$town_nighttime", 0),
			(this_or_next|eq, "$entry_to_town_forbidden", 0),
			(eq, "$sneaked_into_town", 1)
		],
		"Speak with the merchant.",
		[
			(try_begin),
				(this_or_next|eq, "$all_doors_locked", 1),
				(eq, "$town_nighttime", 1),
				(display_message, "str_door_locked", 0xffffaaaa),
			(else_try),
				(assign, "$town_entered", 1),
				(set_jump_mission, "mt_town_default"),
				(mission_tpl_entry_set_override_flags, "mt_town_default", 0, 256),
				(try_begin),
					(eq, "$sneaked_into_town", 1),
					(mission_tpl_entry_set_override_flags, "mt_town_default", 0, 447),
				(try_end),
				(party_get_slot, ":current_town_town_store", "$current_town", slot_town_store),
				(jump_to_scene, ":current_town_town_store"),
				(scene_set_slot, ":current_town_town_store", slot_scene_visited, 1),
				(change_screen_mission),
			(try_end)
		], "Door_to_the_shop."),

		("town_arena",
		[
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(eq, "$sneaked_into_town", 0)
		],
		"Enter the arena.",
		[
			(try_begin),
				(this_or_next|eq, "$all_doors_locked", 1),
				(eq, "$town_nighttime", 1),
				(display_message, "str_door_locked", 0xffffaaaa),
			(else_try),
				(assign, "$g_mt_mode", 2),
				(assign, "$town_entered", 1),
				(set_jump_mission, "mt_arena_melee_fight"),
				(party_get_slot, ":current_town_town_arena", "$current_town", slot_town_arena),
				(modify_visitors_at_site, ":current_town_town_arena"),
				(reset_visitors),
				(set_visitor, 43, "trp_mercenary_infantry_2"),
				(set_visitor, 44, "trp_mercenary_infantry_3"),
				(set_jump_entry, 50),
				(jump_to_scene, ":current_town_town_arena"),
				(scene_set_slot, ":current_town_town_arena", slot_scene_visited, 1),
				(change_screen_mission),
			(try_end)
		], "Door_to_the_arena."),

		("town_dungeon",
		[
			(eq, 1, 0)
		],
		"Never: Enter the prison.",
		[
			(try_begin),
				(eq, "$talk_context", 18),
				(gt, "$g_main_attacker_agent", 0),
				(neg|agent_is_alive, "$g_main_attacker_agent"),
				(agent_get_troop_id, ":troop_id_l_g_main_attacker_agent", "$g_main_attacker_agent"),
				(try_begin),
					(eq, "$g_encountered_party_faction", "fac_player_supporters_faction"),
					(party_get_slot, ":current_town_center_original_faction", "$current_town", slot_center_original_faction),
				(else_try),
					(assign, ":current_town_center_original_faction", "$g_encountered_party_faction"),
				(try_end),
				(faction_slot_eq, ":current_town_center_original_faction", slot_faction_castle_guard_troop, ":troop_id_l_g_main_attacker_agent"),
				(call_script, "script_deduct_casualties_from_garrison"),
				(call_script, "script_enter_dungeon", "$current_town", "mt_visit_town_castle"),
			(else_try),
				(eq, "$all_doors_locked", 1),
				(display_message, "str_door_locked", 0xffffaaaa),
			(else_try),
				(this_or_next|party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
				(eq, "$g_encountered_party_faction", "$players_kingdom"),
				(assign, "$town_entered", 1),
				(call_script, "script_enter_dungeon", "$current_town", "mt_visit_town_castle"),
			(else_try),
				(display_message, "str_door_locked", 0xffffaaaa),
			(try_end)
		], "Door_to_the_dungeon."),

		("castle_inspect",
		[
			(party_slot_eq, "$current_town", slot_party_type, 2)
		],
		"Take a walk around the courtyard.",
		[
			(try_begin),
				(eq, "$talk_context", 18),
				(assign, "$talk_context", 19),
				(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
				(modify_visitors_at_site, ":current_town_town_center"),
				(reset_visitors),
				(assign, ":value", 40),
				(party_get_num_companion_stacks, ":num_companion_stacks_l_g_encountered_party", "$g_encountered_party"),
				(try_for_range, ":number", 0, ":num_companion_stacks_l_g_encountered_party"),
					(party_get_slot, ":current_town_260", "$current_town", 260),
					(store_current_hours, ":current_hours"),
					(store_add, ":value_2", ":current_town_260", 4),
					(this_or_next|eq, ":value", 40),
					(neg|is_between, ":current_hours", ":current_town_260", ":value_2"),
					(lt, ":value", 47),
					(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_number", "$g_encountered_party", ":number"),
					(neg|troop_is_hero, ":party_stack_troop_id_g_encountered_party_number"),
					(party_stack_get_size, ":party_stack_size_g_encountered_party_number", "$g_encountered_party", ":number"),
					(party_stack_get_num_wounded, ":party_stack_num_wounded_g_encountered_party_number", "$g_encountered_party", ":number"),
					(val_sub, ":party_stack_size_g_encountered_party_number", ":party_stack_num_wounded_g_encountered_party_number"),
					(gt, ":party_stack_size_g_encountered_party_number", 0),
					(party_stack_get_troop_dna, ":party_stack_troop_dna_g_encountered_party_number", "$g_encountered_party", ":number"),
					(set_visitor, ":value", ":party_stack_troop_id_g_encountered_party_number", ":party_stack_troop_dna_g_encountered_party_number"),
					(val_add, ":value", 1),
				(try_end),
				(set_visitor, 7, "$g_player_troop"),
				(set_jump_mission, "mt_castle_visit"),
				(jump_to_scene, ":current_town_town_center"),
				(change_screen_mission),
			(else_try),
				(assign, "$talk_context", 0),
				(assign, "$g_mt_mode", 0),
				(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
				(modify_visitors_at_site, ":current_town_town_center"),
				(reset_visitors),
				(try_begin),
					(neq, "$g_encountered_party_faction", "fac_player_supporters_faction"),
					(faction_get_slot, ":g_encountered_party_faction_castle_guard_troop", "$g_encountered_party_faction", slot_faction_castle_guard_troop),
				(else_try),
					(party_get_slot, ":current_town_center_original_faction", "$current_town", slot_center_original_faction),
					(faction_get_slot, ":g_encountered_party_faction_castle_guard_troop", ":current_town_center_original_faction", slot_faction_castle_guard_troop),
				(try_end),
				(set_visitor, 24, ":g_encountered_party_faction_castle_guard_troop"),
				(try_begin),
					(store_random_in_range, ":random_in_range_0_100", 0, 100),
					(ge, ":random_in_range_0_100", 0),
					(party_get_slot, ":current_town_444", "$current_town", 444),
					(set_visitor, 24, ":current_town_444"),
				(try_end),
				(assign, ":value", 40),
				(party_get_num_companion_stacks, ":num_companion_stacks_l_g_encountered_party", "$g_encountered_party"),
				(try_for_range, ":number", 0, ":num_companion_stacks_l_g_encountered_party"),
					(party_get_slot, ":current_town_260", "$current_town", 260),
					(store_current_hours, ":current_hours"),
					(store_add, ":value_2", ":current_town_260", 4),
					(neg|is_between, ":current_hours", ":value_2", ":current_town_260"),
					(lt, ":value", 47),
					(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_number", "$g_encountered_party", ":number"),
					(neg|troop_is_hero, ":party_stack_troop_id_g_encountered_party_number"),
					(party_stack_get_size, ":party_stack_size_g_encountered_party_number", "$g_encountered_party", ":number"),
					(party_stack_get_num_wounded, ":party_stack_num_wounded_g_encountered_party_number", "$g_encountered_party", ":number"),
					(val_sub, ":party_stack_size_g_encountered_party_number", ":party_stack_num_wounded_g_encountered_party_number"),
					(gt, ":party_stack_size_g_encountered_party_number", 0),
					(party_stack_get_troop_dna, ":party_stack_troop_dna_g_encountered_party_number", "$g_encountered_party", ":number"),
					(set_visitor, ":value", ":party_stack_troop_id_g_encountered_party_number", ":party_stack_troop_dna_g_encountered_party_number"),
					(val_add, ":value", 1),
				(try_end),
				(try_begin),
					(eq, "$town_entered", 0),
					(assign, "$town_entered", 1),
				(try_end),
				(set_jump_entry, 1),
				(assign, ":value_3", 256),
				(try_begin),
					(eq, "$sneaked_into_town", 1),
					(assign, ":value_3", 447),
				(try_end),
				(set_jump_mission, "mt_castle_visit"),
				(mission_tpl_entry_set_override_flags, "mt_castle_visit", 0, ":value_3"),
				(mission_tpl_entry_set_override_flags, "mt_castle_visit", 1, ":value_3"),
				(mission_tpl_entry_set_override_flags, "mt_castle_visit", 2, ":value_3"),
				(mission_tpl_entry_set_override_flags, "mt_castle_visit", 3, ":value_3"),
				(mission_tpl_entry_set_override_flags, "mt_castle_visit", 4, ":value_3"),
				(mission_tpl_entry_set_override_flags, "mt_castle_visit", 5, ":value_3"),
				(mission_tpl_entry_set_override_flags, "mt_castle_visit", 6, ":value_3"),
				(mission_tpl_entry_set_override_flags, "mt_castle_visit", 7, ":value_3"),
				(jump_to_scene, ":current_town_town_center"),
				(change_screen_mission),
			(try_end)
		], "To_the_castle_courtyard."),

		("town_enterprise",
		[
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(party_get_slot, ":current_town_center_player_enterprise", "$current_town", slot_center_player_enterprise),
			(gt, ":current_town_center_player_enterprise", 1),
			(eq, "$entry_to_town_forbidden", 0),
			(call_script, "script_get_enterprise_name", ":current_town_center_player_enterprise"),
			(str_store_string, 3, reg0)
		],
		"Visit your {s3}.",
		[
			(store_sub, ":value", "$current_town", "p_town_1"),
			(store_add, ":value_2", "trp_town_1_master_craftsman", ":value"),
			(party_get_slot, ":current_town_center_player_enterprise", "$current_town", slot_center_player_enterprise),
			(assign, ":value_3", "scn_enterprise_mill"),
			(try_begin),
				(eq, ":current_town_center_player_enterprise", "itm_trade_bread"),
				(assign, ":value_3", "scn_enterprise_mill"),
			(else_try),
				(eq, ":current_town_center_player_enterprise", "itm_trade_ale"),
				(assign, ":value_3", "scn_enterprise_brewery"),
			(else_try),
				(eq, ":current_town_center_player_enterprise", "itm_trade_oil"),
				(assign, ":value_3", "scn_enterprise_oil_press"),
			(else_try),
				(eq, ":current_town_center_player_enterprise", "itm_trade_wine"),
				(assign, ":value_3", "scn_enterprise_winery"),
			(else_try),
				(eq, ":current_town_center_player_enterprise", "itm_trade_leatherwork"),
				(assign, ":value_3", "scn_enterprise_tannery"),
			(else_try),
				(eq, ":current_town_center_player_enterprise", "itm_trade_wool_cloth"),
				(assign, ":value_3", "scn_enterprise_wool_weavery"),
			(else_try),
				(eq, ":current_town_center_player_enterprise", "itm_trade_linen"),
				(assign, ":value_3", "scn_enterprise_linen_weavery"),
			(else_try),
				(eq, ":current_town_center_player_enterprise", "itm_trade_velvet"),
				(assign, ":value_3", "scn_enterprise_dyeworks"),
			(else_try),
				(eq, ":current_town_center_player_enterprise", "itm_trade_tools"),
				(assign, ":value_3", "scn_enterprise_smithy"),
			(try_end),
			(modify_visitors_at_site, ":value_3"),
			(reset_visitors),
			(set_visitor, 0, "trp_player"),
			(set_visitor, 17, ":value_2"),
			(set_jump_mission, "mt_town_default"),
			(jump_to_scene, ":value_3"),
			(change_screen_mission)
		], "Door_to_your_enterprise."),

		("visit_lady",
		[
			(neg|troop_slot_ge, "trp_player", 30, "trp_knight_1_1_wife"),
			(assign, "$love_interest_in_town", 0),
			(assign, "$love_interest_in_town_2", 0),
			(assign, "$love_interest_in_town_3", 0),
			(assign, "$love_interest_in_town_4", 0),
			(assign, "$love_interest_in_town_5", 0),
			(assign, "$love_interest_in_town_6", 0),
			(assign, "$love_interest_in_town_7", 0),
			(assign, "$love_interest_in_town_8", 0),
			(try_for_range, ":troop", "trp_knight_1_1_wife", "trp_heroes_end"),
				(troop_slot_eq, ":troop", slot_troop_cur_center, "$current_town"),
				(call_script, "script_get_kingdom_lady_social_determinants", ":troop"),
				(assign, ":var_2", reg0),
				(troop_slot_eq, ":troop", slot_troop_spouse, -1),
				(ge, ":var_2", 0),
				(this_or_next|troop_slot_ge, ":troop", 5, 2),
				(troop_slot_eq, ":var_2", slot_troop_love_interests_end, 1),
				(neg|troop_slot_eq, ":troop", slot_troop_met, 4),
				(try_begin),
					(eq, "$love_interest_in_town", 0),
					(assign, "$love_interest_in_town", ":troop"),
				(else_try),
					(eq, "$love_interest_in_town_2", 0),
					(assign, "$love_interest_in_town_2", ":troop"),
				(else_try),
					(eq, "$love_interest_in_town_3", 0),
					(assign, "$love_interest_in_town_3", ":troop"),
				(else_try),
					(eq, "$love_interest_in_town_4", 0),
					(assign, "$love_interest_in_town_4", ":troop"),
				(else_try),
					(eq, "$love_interest_in_town_5", 0),
					(assign, "$love_interest_in_town_5", ":troop"),
				(else_try),
					(eq, "$love_interest_in_town_6", 0),
					(assign, "$love_interest_in_town_6", ":troop"),
				(else_try),
					(eq, "$love_interest_in_town_7", 0),
					(assign, "$love_interest_in_town_7", ":troop"),
				(else_try),
					(eq, "$love_interest_in_town_8", 0),
					(assign, "$love_interest_in_town_8", ":troop"),
				(try_end),
			(try_end),
			(gt, "$love_interest_in_town", 0)
		],
		"Attempt to visit a lady",
		[
			(jump_to_menu, "mnu_lady_visit")
		], "Door_to_the_garden."),

		("trade_with_merchants",
		[
			(party_slot_eq, "$current_town", slot_party_type, 3)
		],
		"Go to the marketplace.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_town_trade"),
			(try_end)
		], "."),

		("walled_center_manage",
		[
			(party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
			(assign, reg0, 1),
			(try_begin),
				(party_slot_eq, "$current_town", slot_party_type, 2),
				(assign, reg0, 0),
			(try_end)
		],
		"Manage this {reg0?town:castle}.",
		[
			(assign, "$g_next_menu", "mnu_town"),
			(jump_to_menu, "mnu_center_manage")
		], "."),

		("walled_center_move_court",
		[
			(neg|party_slot_eq, "$current_town", slot_village_state, 5),
			(assign, ":value", 0),
			(try_begin),
				(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
				(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
				(ge, reg0, 50),
				(assign, ":value", 1),
			(try_end),
			(this_or_next|eq, ":value", 1),
			(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
			(party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
			(this_or_next|eq, "$g_encountered_party_faction", "$players_kingdom"),
			(eq, "$g_encountered_party_faction", "fac_player_supporters_faction"),
			(this_or_next|eq, ":value", 1),
			(eq, "$g_encountered_party_faction", "fac_player_supporters_faction"),
			(neq, "$g_player_court", "$current_town")
		],
		"Move your court here.",
		[
			(jump_to_menu, "mnu_establish_court")
		], "."),

		("castle_station_troops",
		[
			(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
			(str_clear, 10),
			(assign, ":value", 0),
			(try_begin),
				(eq, ":current_town_town_lord", "trp_player"),
				(assign, ":value", 1),
			(else_try),
				(store_faction_of_party, ":faction_of_party_g_encountered_party", "$g_encountered_party"),
				(eq, ":faction_of_party_g_encountered_party", "fac_player_supporters_faction"),
				(neg|party_slot_ge, "$g_encountered_party", 7, "trp_npc1"),
				(assign, ":value", 1),
			(else_try),
				(lt, ":current_town_town_lord", 0),
				(store_faction_of_party, ":faction_of_party_g_encountered_party_2", "$g_encountered_party"),
				(eq, "$players_kingdom", ":faction_of_party_g_encountered_party_2"),
				(eq, "$g_encountered_party", "$g_castle_requested_by_player"),
				(str_store_string, 10, "str_retrieve_garrison_warning"),
				(assign, ":value", 1),
			(else_try),
				(lt, ":current_town_town_lord", 0),
				(store_faction_of_party, ":faction_of_party_g_encountered_party_2", "$g_encountered_party"),
				(eq, "$players_kingdom", ":faction_of_party_g_encountered_party_2"),
				(store_party_size_wo_prisoners, ":party_size_wo_prisoners_g_encountered_party", "$g_encountered_party"),
				(eq, ":party_size_wo_prisoners_g_encountered_party", 0),
				(str_store_string, 10, "str_retrieve_garrison_warning"),
				(assign, ":value", 1),
			(else_try),
				(party_slot_ge, "$g_encountered_party", 7, "trp_npc1"),
				(store_faction_of_party, ":faction_of_party_g_encountered_party_2", "$g_encountered_party"),
				(eq, "$players_kingdom", ":faction_of_party_g_encountered_party_2"),
				(this_or_next|troop_slot_eq, ":current_town_town_lord", slot_troop_spouse, "trp_player"),
				(troop_slot_eq, "trp_player", slot_troop_spouse, ":current_town_town_lord"),
				(this_or_next|is_between, ":current_town_town_lord", "trp_npc1", "trp_heroes_end"),
				(troop_slot_eq, "trp_player", slot_troop_spouse, ":current_town_town_lord"),
				(assign, ":value", 1),
			(try_end),
			(eq, ":value", 1)
		],
		"Manage the garrison {s10}",
		[
			(change_screen_exchange_members, 1)
		], "."),

		("dplmc_castle_give_troops",
		[
			(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
			(store_faction_of_party, ":faction_of_party_g_encountered_party", "$g_encountered_party"),
			(is_between, ":faction_of_party_g_encountered_party", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(neq, ":current_town_town_lord", "trp_player"),
			(ge, ":current_town_town_lord", "trp_npc1"),
			(neg|troop_slot_eq, "trp_player", slot_troop_spouse, ":current_town_town_lord"),
			(neg|troop_slot_eq, ":current_town_town_lord", slot_troop_spouse, "trp_player"),
			(call_script, "script_dplmc_player_can_give_troops_to_troop", ":current_town_town_lord"),
			(ge, reg0, 1)
		],
		"Give troops to the garrison (cannot remove)",
		[
			(change_screen_give_members, "$current_town")
		], "."),

		("castle_wait",
		[
			(this_or_next|ge, "$g_encountered_party_relation", 0),
			(eq, "$castle_undefended", 1),
			(assign, ":value", 1),
			(str_clear, 1),
			(try_begin),
				(neg|party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
				(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
				(neg|party_slot_eq, "$current_town", slot_town_lord, ":player_spouse"),
				(party_slot_ge, "$current_town", 7, "trp_player"),
				(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
				(neq, ":faction_of_party_current_town", "fac_player_supporters_faction"),
				(party_get_num_companions, ":num_companions_main_party", "p_main_party"),
				(store_div, reg1, ":num_companions_main_party", 4),
				(val_add, reg1, 1),
				(str_store_string, 1, "@ ({reg1} coins per night)"),
				(store_troop_gold, ":troop_gold_player", "trp_player"),
				(lt, ":troop_gold_player", reg1),
				(assign, ":value", 0),
			(try_end),
			(eq, ":value", 1)
		],
		"Wait here for some time{s1}.",
		[
			(assign, "$auto_enter_town", "$current_town"),
			(assign, "$g_town_visit_after_rest", 1),
			(assign, "$g_last_rest_center", "$current_town"),
			(assign, "$g_last_rest_payment_until", -1),
			(try_begin),
				(party_is_active, "p_main_party"),
				(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
				(try_begin),
					(eq, ":current_terrain_main_party", 5),
					(unlock_achievement, 28),
				(try_end),
			(try_end),
			(rest_for_hours_interactive, 168, 5, 0),
			(change_screen_return)
		], "."),

		("town_alley",
		[
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT: Go to the alley.",
		[
			(party_get_slot, reg11, "$current_town", slot_town_alley),
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, reg11),
			(change_screen_mission)
		], "."),

		("collect_taxes_qst",
		[
			(check_quest_active, "qst_collect_taxes"),
			(quest_slot_eq, "qst_collect_taxes", slot_quest_target_center, "$current_town"),
			(neg|quest_slot_eq, "qst_collect_taxes", slot_quest_current_state, 4),
			(quest_get_slot, ":collect_taxes_giver_troop", "qst_collect_taxes", slot_quest_giver_troop),
			(str_store_troop_name, 1, ":collect_taxes_giver_troop"),
			(quest_get_slot, reg5, "qst_collect_taxes", slot_quest_current_state)
		],
		"{reg5?Continue collecting taxes:Collect taxes} due to {s1}.",
		[
			(jump_to_menu, "mnu_collect_taxes")
		], "."),

		("dplmc_guild_master_meeting",
		[
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(assign, ":value", 1),
			(else_try),
				(party_get_slot, ":current_town_town_elder", "$current_town", slot_town_elder),
				(ge, ":current_town_town_elder", 1),
				(neg|troop_slot_eq, ":current_town_town_elder", slot_troop_met, 0),
				(assign, ":value", 1),
			(else_try),
				(this_or_next|eq, "$current_town", "p_town_6"),
				(eq, "$g_starting_town", "$current_town"),
				(assign, ":value", 1),
			(try_end),
			(neq, ":value", 0),
			(this_or_next|eq, "$entry_to_town_forbidden", 0),
			(eq, "$sneaked_into_town", 1)
		],
		"Meet the Guild Master.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
				(modify_visitors_at_site, ":current_town_town_center"),
				(reset_visitors),
				(party_get_slot, ":current_town_town_elder", "$current_town", slot_town_elder),
				(set_visitor, 11, ":current_town_town_elder"),
				(set_jump_mission, "mt_town_center"),
				(jump_to_scene, ":current_town_town_center"),
				(change_screen_map_conversation, ":current_town_town_elder"),
			(try_end)
		], "."),

		("dplmc_guild_master_meeting_denied",
		[
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(this_or_next|eq, "$entry_to_town_forbidden", 0),
			(eq, "$sneaked_into_town", 1),
			(party_get_slot, ":current_town_town_elder", "$current_town", slot_town_elder),
			(gt, ":current_town_town_elder", 0),
			(eq, "$cheat_mode", 0),
			(neq, "$g_starting_town", "$current_town"),
			(neq, "$current_town", "p_town_6"),
			(troop_slot_eq, ":current_town_town_elder", slot_troop_met, 0),
			(disable_menu_option)
		],
		"You have not met the Guild Master yet.",
		[], "."),

		("town_bank",
		[
			(eq, "$current_town", "p_town_17")
		],
		"Visit the Iron Bank of Braavos.",
		[
			(assign, reg10, 0),
			(start_presentation, "prsnt_bank")
		], "."),

		("recruit_nobles",
		[
			(this_or_next|eq, "$current_town", "p_town_1"),
			(this_or_next|eq, "$current_town", "p_town_3"),
			(this_or_next|eq, "$current_town", "p_town_6"),
			(this_or_next|eq, "$current_town", "p_town_8"),
			(this_or_next|eq, "$current_town", "p_town_9"),
			(this_or_next|eq, "$current_town", "p_town_16"),
			(this_or_next|eq, "$current_town", "p_town_18"),
			(this_or_next|eq, "$current_town", "p_town_19"),
			(this_or_next|eq, "$current_town", "p_town_20"),
			(this_or_next|eq, "$current_town", "p_town_23"),
			(this_or_next|eq, "$current_town", "p_town_24"),
			(this_or_next|eq, "$current_town", "p_town_25"),
			(this_or_next|eq, "$current_town", "p_town_26"),
			(this_or_next|eq, "$current_town", "p_town_27"),
			(this_or_next|eq, "$current_town", "p_town_30"),
			(this_or_next|eq, "$current_town", "p_town_31"),
			(this_or_next|eq, "$current_town", "p_town_32"),
			(this_or_next|eq, "$current_town", "p_town_33"),
			(this_or_next|eq, "$current_town", "p_town_34"),
			(this_or_next|eq, "$current_town", "p_town_35"),
			(this_or_next|eq, "$current_town", "p_town_41"),
			(eq, "$current_town", "p_town_42"),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond")
		],
		"Recruit volunteers.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_nobles"),
			(try_end)
		], "."),

		("recruit_sellswords_braavos",
		[
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_town_17")
		],
		"Recruit sellswords.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_sellswords_braavos"),
			(try_end)
		], "."),

		("recruit_sellswords_lorath",
		[
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_town_38")
		],
		"Recruit sellswords.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_sellswords_lorath"),
			(try_end)
		], "."),

		("recruit_sellswords_pentos",
		[
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_town_12")
		],
		"Recruit sellswords.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_sellswords_pentos"),
			(try_end)
		], "."),

		("recruit_sellswords_norvos",
		[
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_town_51")
		],
		"Recruit sellswords.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_sellswords_norvos"),
			(try_end)
		], "."),

		("recruit_sellswords_qohor",
		[
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_town_44")
		],
		"Recruit sellswords.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_sellswords_qohor"),
			(try_end)
		], "."),

		("recruit_sellswords_myr",
		[
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_town_45")
		],
		"Recruit sellswords.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_sellswords_myr"),
			(try_end)
		], "."),

		("recruit_sellswords_tyrosh",
		[
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_town_46")
		],
		"Recruit sellswords.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_sellswords_tyrosh"),
			(try_end)
		], "."),

		("recruit_sellswords_lys",
		[
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_town_40")
		],
		"Recruit sellswords.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_sellswords_lys"),
			(try_end)
		], "."),

		("recruit_sellswords_volantis",
		[
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_town_47")
		],
		"Recruit sellswords.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_sellswords_volantis"),
			(try_end)
		], "."),

		("special_room_painted_table",
		[
			(eq, "$current_town", "p_town_23")
		],
		"Visit the Chamber of the Painted Table.",
		[
			(try_begin),
				(jump_to_menu, "mnu_special_room_painted_table"),
			(try_end)
		], "."),

		("special_room_renly_quest_pitch",
		[
			(check_quest_active, "qst_renly_quest_3"),
			(eq, "$current_town", "p_town_8")
		],
		"Visit the Pitch Market.",
		[
			(try_begin),
				(jump_to_menu, "mnu_special_room_renly_quest_pitch"),
			(try_end)
		], "."),

		("special_room_coppersmiths_wynd",
		[
			(eq, "$current_town", "p_town_16")
		],
		"Visit Coppersmiths Wynd.",
		[
			(try_begin),
				(jump_to_menu, "mnu_special_room_coppersmiths_wynd"),
			(try_end)
		], "."),

		("special_room_iron_throne_room",
		[
			(eq, "$current_town", "p_town_16")
		],
		"Visit the Great Hall.",
		[
			(try_begin),
				(jump_to_menu, "mnu_special_room_iron_throne_room"),
			(try_end)
		], "."),

		("special_room_citadel",
		[
			(eq, "$current_town", "p_town_32")
		],
		"Visit the Citadel.",
		[
			(try_begin),
				(jump_to_menu, "mnu_special_room_citadel"),
			(try_end)
		], "."),

		("black_cells_1",
		[
			(eq, "$g_black_cells_1", 1),
			(eq, "$current_town", "p_town_16")
		],
		"Enter the Black Cells of the Red Keep.",
		[
			(try_begin),
				(jump_to_menu, "mnu_black_cells_1"),
			(try_end)
		], "."),

		("black_cells_2",
		[
			(eq, "$g_black_cells_2", 1),
			(eq, "$current_town", "p_town_16")
		],
		"Enter the Black Cells of the Red Keep.",
		[
			(try_begin),
				(jump_to_menu, "mnu_black_cells_2"),
			(try_end)
		], "."),

		("thirsty_goat",
		[
			(eq, "$g_thirsty_goat", 1),
			(eq, "$current_town", "p_town_19")
		],
		"Visit the Thirsty Goat.",
		[
			(try_begin),
				(jump_to_menu, "mnu_thirsty_goat"),
			(try_end)
		], "."),

		("recruit_white_harbor_town",
		[
			(eq, "$g_white_harbor", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_town_31")
		],
		"Visit Fishfoot Yard.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_white_harbor"),
			(try_end)
		], "."),

		("recruit_barrowton_town",
		[
			(eq, "$g_barrowton", 0),
			(eq, "$g_barrowton", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_town_41")
		],
		"Visit Roddy's Street.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_barrowton"),
			(try_end)
		], "."),

		("recruit_deepwood_motte_town",
		[
			(eq, "$g_deepwood_motte", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_castle_22")
		],
		"Visit the Sheepfold.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_deepwood_motte"),
			(try_end)
		], "."),

		("recruit_raventree_hall_town",
		[
			(eq, "$g_raventree_hall", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_castle_89")
		],
		"Visit the Godswood.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_raventree_hall"),
			(try_end)
		], "."),

		("recruit_stone_hedge_town",
		[
			(eq, "$g_stone_hedge", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_castle_86")
		],
		"Visit the Village.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_stone_hedge"),
			(try_end)
		], "."),

		("recruit_crossing_town",
		[
			(eq, "$g_crossing", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_castle_37")
		],
		"Visit the Toll House.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_crossing"),
			(try_end)
		], "."),

		("recruit_sarsfield_town",
		[
			(eq, "$g_sarsfield", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_castle_54")
		],
		"Visit the Clinking Coin Inn.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_sarsfield"),
			(try_end)
		], "."),

		("recruit_banefort_town",
		[
			(eq, "$g_banefort", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_castle_31")
		],
		"Visit the Woods of the Hooded Man.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_banefort"),
			(try_end)
		], "."),

		("recruit_casterly_rock_town",
		[
			(eq, "$g_casterly_rock", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_castle_52")
		],
		"Visit the Barracks.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_casterly_rock"),
			(try_end)
		], "."),

		("recruit_lannisport_town",
		[
			(eq, "$g_lannisport", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_town_24")
		],
		"Visit the Harbor.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_lannisport"),
			(try_end)
		], "."),

		("recruit_runestone_town",
		[
			(eq, "$g_runestone", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_castle_23")
		],
		"Visit the Tourney Grounds.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_runestone"),
			(try_end)
		], "."),

		("recruit_longbow_hall_town",
		[
			(eq, "$g_longbow_hall", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_castle_35")
		],
		"Visit the Hunters Gate.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_longbow_hall"),
			(try_end)
		], "."),

		("recruit_nightsong_town",
		[
			(eq, "$g_nightsong", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_castle_50")
		],
		"Visit the Marching Field.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_nightsong"),
			(try_end)
		], "."),

		("recruit_stonehelm_town",
		[
			(eq, "$g_stonehelm", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_castle_132")
		],
		"Visit the Ten Bells.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_stonehelm"),
			(try_end)
		], "."),

		("recruit_oldtown_town",
		[
			(eq, "$g_oldtown", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_town_32")
		],
		"Visit the Thieve's Market.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_oldtown"),
			(try_end)
		], "."),

		("recruit_arbor_town",
		[
			(eq, "$g_arbor", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_castle_72")
		],
		"Visit Stonecrab Cay.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_arbor"),
			(try_end)
		], "."),

		("recruit_skyreach_town",
		[
			(eq, "$g_skyreach", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_castle_80")
		],
		"Visit the Hawk Gate.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_skyreach"),
			(try_end)
		], "."),

		("recruit_driftmark_town",
		[
			(eq, "$g_driftmark", 0),
			(call_script, "script_cf_town_castle_recruit_volunteers_cond"),
			(eq, "$current_town", "p_castle_137")
		],
		"Visit the Ruins of Spicetown.",
		[
			(try_begin),
				(call_script, "script_cf_enter_center_location_bandit_check"),
			(else_try),
				(jump_to_menu, "mnu_recruit_driftmark"),
			(try_end)
		], "."),

		("town_leave",
		[],
		"Leave...",
		[
			(assign, "$g_permitted_to_center", 0),
			(change_screen_return, 0),
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(try_begin),
				(eq, "$g_buy_foods_when_leaving", 1),
				(call_script, "script_auto_buy_food"),
			(try_end),
			(try_begin),
				(eq, "$g_sell_items_when_leaving", 1),
				(call_script, "script_auto_sell_all"),
			(try_end)
		], "Leave_Area."),

		("castle_cheat_interior",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! Interior.",
		[
			(set_jump_mission, "mt_ai_training"),
			(party_get_slot, ":current_town_town_castle", "$current_town", slot_town_castle),
			(jump_to_scene, ":current_town_town_castle"),
			(change_screen_mission)
		], "."),

		("castle_cheat_town_exterior",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! Exterior.",
		[
			(try_begin),
				(party_slot_eq, "$current_town", slot_party_type, 2),
				(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
			(else_try),
				(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
			(try_end),
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, ":current_town_town_center"),
			(change_screen_mission)
		], "."),

		("castle_cheat_dungeon",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! Prison.",
		[
			(set_jump_mission, "mt_ai_training"),
			(party_get_slot, ":current_town_town_prison", "$current_town", slot_town_prison),
			(jump_to_scene, ":current_town_town_prison"),
			(change_screen_mission)
		], "."),

		("castle_cheat_town_walls",
		[
			(eq, "$cheat_mode", 1),
			(party_slot_eq, "$current_town", slot_party_type, 3)
		],
		"{!}CHEAT! Town Walls.",
		[
			(party_get_slot, ":current_town_town_walls", "$current_town", slot_town_walls),
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, ":current_town_town_walls"),
			(change_screen_mission)
		], "."),

		("cheat_town_start_siege",
		[
			(eq, "$cheat_mode", 1),
			(party_slot_eq, "$g_encountered_party", slot_center_is_besieged_by, -1),
			(lt, "$g_encountered_party_2", 1),
			(call_script, "script_party_count_fit_for_battle", "p_main_party"),
			(gt, reg0, 1),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(assign, reg6, 1),
			(else_try),
				(assign, reg6, 0),
			(try_end)
		],
		"{!}CHEAT: Besiege the {reg6?town:castle}...",
		[
			(assign, "$g_player_besiege_town", "$g_encountered_party"),
			(jump_to_menu, "mnu_castle_besiege")
		], "."),

		("center_reports",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! Show reports.",
		[
			(jump_to_menu, "mnu_center_reports")
		], "."),

		("sail_from_port",
		[
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT: Sail from port.",
		[
			(assign, "$g_player_icon_state", 2),
			(party_set_flags, "p_main_party", 512, 1),
			(party_get_position, 1, "p_main_party"),
			(map_get_water_position_around_position, 2, 1, 6),
			(party_set_position, "p_main_party", 2),
			(assign, "$g_main_ship_party", -1),
			(change_screen_return)
		], ".")
	]
	),

	("cannot_enter_court", 0, "There is a feast in progress in the lord's hall, but you are not of sufficient status to be invited inside. Perhaps increasing your renown would win you admittance -- or you might also try distinguishing yourself at the melee while the feast is in progress...",
	"none",
	[],
	[
		("continue",
		[],
		"Continue",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("lady_visit", 0, "Whom do you wish to visit?",
	"none",
	[],
	[
		("visit_lady_1",
		[
			(gt, "$love_interest_in_town", 0),
			(str_store_troop_name, 12, "$love_interest_in_town")
		],
		"Visit {s12}",
		[
			(assign, "$love_interest_in_town", "$love_interest_in_town"),
			(jump_to_menu, "mnu_garden")
		], "."),

		("visit_lady_2",
		[
			(gt, "$love_interest_in_town_2", 0),
			(str_store_troop_name, 12, "$love_interest_in_town_2")
		],
		"Visit {s12}",
		[
			(assign, "$love_interest_in_town", "$love_interest_in_town_2"),
			(jump_to_menu, "mnu_garden")
		], "."),

		("visit_lady_3",
		[
			(gt, "$love_interest_in_town_3", 0),
			(str_store_troop_name, 12, "$love_interest_in_town_3")
		],
		"Visit {s12}",
		[
			(assign, "$love_interest_in_town", "$love_interest_in_town_3"),
			(jump_to_menu, "mnu_garden")
		], "Door_to_the_garden."),

		("visit_lady_4",
		[
			(gt, "$love_interest_in_town_4", 0),
			(str_store_troop_name, 12, "$love_interest_in_town_4")
		],
		"Visit {s12}",
		[
			(assign, "$love_interest_in_town", "$love_interest_in_town_4"),
			(jump_to_menu, "mnu_garden")
		], "."),

		("visit_lady_5",
		[
			(gt, "$love_interest_in_town_5", 0),
			(str_store_troop_name, 12, "$love_interest_in_town_5")
		],
		"Visit {s12}",
		[
			(assign, "$love_interest_in_town", "$love_interest_in_town_5"),
			(jump_to_menu, "mnu_garden")
		], "."),

		("visit_lady_6",
		[
			(gt, "$love_interest_in_town_6", 0),
			(str_store_troop_name, 12, "$love_interest_in_town_6")
		],
		"Visit {s12}",
		[
			(assign, "$love_interest_in_town", "$love_interest_in_town_6"),
			(jump_to_menu, "mnu_garden")
		], "."),

		("visit_lady_7",
		[
			(gt, "$love_interest_in_town_7", 0),
			(str_store_troop_name, 12, "$love_interest_in_town_7")
		],
		"Visit {s12}",
		[
			(assign, "$love_interest_in_town", "$love_interest_in_town_7"),
			(jump_to_menu, "mnu_garden")
		], "."),

		("visit_lady_8",
		[
			(gt, "$love_interest_in_town_8", 0),
			(str_store_troop_name, 12, "$love_interest_in_town_8")
		],
		"Visit {s12}",
		[
			(assign, "$love_interest_in_town", "$love_interest_in_town_8"),
			(jump_to_menu, "mnu_garden")
		], "."),

		("leave",
		[],
		"Leave",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("town_tournament_lost", 0, "You have been eliminated from the melee.{s8}",
	"none",
	[
		(str_clear, 8),
		(try_begin),
			(this_or_next|neq, "$players_kingdom", "$g_encountered_party_faction"),
			(neg|troop_slot_ge, "trp_player", 7, 50),
			(neg|troop_slot_ge, "trp_player", 7, 125),
			(gt, "$g_player_tournament_placement", 4),
			(faction_slot_eq, "$g_encountered_party_faction", slot_faction_ai_state, 6),
			(faction_slot_eq, "$g_encountered_party_faction", slot_faction_ai_object, "$g_encountered_party"),
			(str_store_string, 8, "str__however_you_have_sufficiently_distinguished_yourself_to_be_invited_to_attend_the_ongoing_feast_in_the_lords_castle"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_town_tournament_won_by_another")
		], ".")
	]
	),

	("town_tournament_won", mnf_disable_all_keys, "You have won the melee of {s3}! You are filled with pride as the crowd cheers your name, the young women throwing flowers and handkerchiefs your way and the men hollering congratulations. In addition to honour, fame and glory, you earn a prize of {reg9} coins. {s8}",
	"none",
	[
		(str_store_party_name, 3, "$current_town"),
		(call_script, "script_change_troop_renown", "trp_player", 15),
		(store_random_in_range, ":random_in_range_0_32", 0, 32),
		(try_begin),
			(eq, ":random_in_range_0_32", 0),
			(troop_add_item, "trp_player", "itm_fi_broad_axe", 0),
			(display_message, "@The ruler of {s3} applauds your valiant victory, and gift you a massive two-handed axe.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 1),
			(troop_add_item, "trp_player", "itm_fi_claymore", 0),
			(display_message, "@A jubilant merchant of {s3} gift you a fine great sword.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 2),
			(troop_add_item, "trp_player", "itm_bow_f_decorated_bow", 0),
			(display_message, "@A lady of {s3} applauds your victory, and gift you a fine bow.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 3),
			(troop_add_item, "trp_player", "itm_bow_f_decorated_bow", 0),
			(display_message, "@One of the nobles of {s3} gift you a fine bow, decorated by a master craftsman.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 4),
			(troop_add_item, "trp_player", "itm_bow_f_decorated_bow", 0),
			(display_message, "@The ruler of {s3} gift you a fine bow.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 5),
			(troop_add_item, "trp_player", "itm_bow_f_decorated_bow", 0),
			(display_message, "@The ruler of {s3} gift you a fine bow, decorated by a master craftsman.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 6),
			(troop_add_item, "trp_player", "itm_high_tier_sword_1", 0),
			(display_message, "@The nobles and merchants of {s3} gift you a fine sword, crafted by a master weaponsmith.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 7),
			(troop_add_item, "trp_player", "itm_high_tier_sword_2", 0),
			(display_message, "@A young maiden from a noble house gift you a fine sword, crafted by the best weaponsmith in {s3}.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 8),
			(troop_add_item, "trp_player", "itm_high_tier_saber_1", 0),
			(display_message, "@A young nobleman gift you a fine curved sword, crafted by the best blacksmith in {s3}.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 9),
			(troop_add_item, "trp_player", "itm_high_tier_sword_2", 0),
			(display_message, "@A young knight gift you sword, finely wrought and decorated with silver.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 10),
			(troop_add_item, "trp_player", "itm_destrier_1", 0),
			(display_message, "@A wealthy merchant from {s3} gift you a fine destrier.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 11),
			(troop_add_item, "trp_player", "itm_destrier_2", 0),
			(display_message, "@The ruler of {s3} gift you a fine destrier, the best one in his stables.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 12),
			(troop_add_item, "trp_player", "itm_mackie_dagger", 0),
			(display_message, "@The local septon gift you a fine valyrian dagger, wrought in dragonflame.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 13),
			(troop_add_item, "trp_player", "itm_heavy_cutting_axe", 0),
			(display_message, "@A jubilant young man gift you a sturdy axe.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 14),
			(troop_add_item, "trp_player", "itm_courser_1", 0),
			(display_message, "@A jubilant young maiden gift you a fine looking courser, well-trained and fast.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 15),
			(troop_add_item, "trp_player", "itm_courser_2", 0),
			(display_message, "@A jubilant young merchant gift you a fine looking courser.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 16),
			(troop_add_item, "trp_player", "itm_palfrey_1", 0),
			(display_message, "@A shy young maiden from {s3} gift you a fine looking palfrey.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 17),
			(troop_add_item, "trp_player", "itm_palfrey_2", 0),
			(display_message, "@The ruler of {s3} gift you a fine palfrey, the best one in his stables.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 18),
			(troop_add_gold, "trp_player", 800),
			(display_message, "@The leading merchant of {s3} gift you a heavy bag of silver, as a reward for your valiant victory.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 19),
			(troop_add_gold, "trp_player", 100),
			(display_message, "@One of the constables of {s3} gift you a small bag of silver, with his thanks. Apparently, he won a lot of silver betting on you.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 20),
			(troop_add_gold, "trp_player", 300),
			(display_message, "@A distant cousin of the ruler of {s3} gift you a small bag of silver.", 0x00b399cc),
		(else_try),
			(eq, ":random_in_range_0_32", 21),
			(troop_add_gold, "trp_player", 5000),
			(display_message, "@The ruler of {s3} gift you a heavy bag of silver, as a reward for your valiant victory in the melee.", 0x00b399cc),
		(else_try),
			(display_message, "@The nobles and merchants of {s3} applaud your valiant victory, and apologize for not having a suitable gift for you.", 0x00b399cc),
		(try_end),
		(call_script, "script_change_player_relation_with_center", "$current_town", 2),
		(assign, reg9, 200),
		(add_xp_to_troop, 250, "trp_player"),
		(troop_add_gold, "trp_player", reg9),
		(str_clear, 8),
		(store_add, ":value", "$g_tournament_bet_placed", "$g_tournament_bet_win_amount"),
		(try_begin),
			(gt, "$g_tournament_bet_win_amount", 0),
			(assign, reg8, ":value"),
			(str_store_string, 8, "@Moreover, you earn {reg8} coins from the clever bets you placed on yourself..."),
		(try_end),
		(try_begin),
			(this_or_next|neq, "$players_kingdom", "$g_encountered_party_faction"),
			(neg|troop_slot_ge, "trp_player", 7, 70),
			(neg|troop_slot_ge, "trp_player", 7, 145),
			(faction_slot_eq, "$g_encountered_party_faction", slot_faction_ai_state, 6),
			(faction_slot_eq, "$g_encountered_party_faction", slot_faction_ai_object, "$g_encountered_party"),
			(str_store_string, 8, "str_s8_you_are_also_invited_to_attend_the_ongoing_feast_in_the_castle"),
		(try_end),
		(troop_add_gold, "trp_player", ":value"),
		(assign, ":value_2", 0),
		(store_div, ":value_2", "$g_tournament_bet_win_amount", 5),
		(party_get_slot, ":current_town_town_player_odds", "$current_town", slot_town_player_odds),
		(val_sub, ":current_town_town_player_odds", ":value_2"),
		(val_max, ":current_town_town_player_odds", 250),
		(party_set_slot, "$current_town", slot_town_player_odds, ":current_town_town_player_odds"),
		(call_script, "script_play_victorious_sound"),
		(unlock_achievement, 33)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("town_tournament_won_by_another", mnf_disable_all_keys, "As the only {reg3?fighter:man} to remain undefeated this day, {s1} wins the love of the smallfolk and the glory of this melee.",
	"none",
	[
		(call_script, "script_get_num_tournament_participants"),
		(store_sub, ":value", reg0, 1),
		(try_begin),
			(troop_slot_eq, "trp_tournament_participants", slot_troop_relations_begin, 0),
			(troop_set_slot, "trp_tournament_participants", slot_troop_relations_begin, -1),
			(val_sub, ":value", 1),
		(try_end),
		(call_script, "script_remove_tournament_participants_randomly", ":value"),
		(call_script, "script_sort_tournament_participant_troops"),
		(troop_get_slot, ":tournament_participants_relations_begin", "trp_tournament_participants", slot_troop_relations_begin),
		(str_store_troop_name, 1, ":tournament_participants_relations_begin"),
		(try_begin),
			(troop_is_hero, ":tournament_participants_relations_begin"),
			(call_script, "script_change_troop_renown", ":tournament_participants_relations_begin", 20),
		(try_end),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":tournament_participants_relations_begin", 3)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("town_tournament", mnf_disable_all_keys, "{s1}You are at tier {reg0} of the melee, with {reg1} participants remaining. In the next round, there will be {reg2} teams with {reg3} {reg4?fighters:fighter} each.",
	"none",
	[
		(party_set_slot, "$current_town", slot_town_has_tournament, 0),
		(call_script, "script_sort_tournament_participant_troops"),
		(call_script, "script_get_num_tournament_participants"),
		(assign, ":var_1", reg0),
		(try_begin),
			(neg|troop_slot_eq, "trp_tournament_participants", slot_troop_relations_begin, 0),
			(assign, ":value", 0),
			(store_div, ":value", "$g_tournament_bet_placed", 5),
			(party_get_slot, ":current_town_town_player_odds", "$current_town", slot_town_player_odds),
			(val_add, ":current_town_town_player_odds", ":value"),
			(val_min, ":current_town_town_player_odds", 4000),
			(party_set_slot, "$current_town", slot_town_player_odds, ":current_town_town_player_odds"),
			(jump_to_menu, "mnu_town_tournament_lost"),
		(else_try),
			(eq, ":var_1", 1),
			(jump_to_menu, "mnu_town_tournament_won"),
		(else_try),
			(try_begin),
				(le, "$g_tournament_next_num_teams", 0),
				(call_script, "script_get_random_tournament_team_amount_and_size"),
				(assign, "$g_tournament_next_num_teams", reg0),
				(assign, "$g_tournament_next_team_size", reg1),
			(try_end),
			(assign, reg2, "$g_tournament_next_num_teams"),
			(assign, reg3, "$g_tournament_next_team_size"),
			(store_sub, reg4, reg3, 1),
			(str_clear, 1),
			(try_begin),
				(eq, "$g_tournament_player_team_won", 1),
				(str_store_string, 1, "@Victory is yours! You have won this melee, but now you must prepare yourself for the next round. "),
			(else_try),
				(eq, "$g_tournament_player_team_won", 0),
				(str_store_string, 1, "@You have been bested in this melee, but the master of ceremonies declares a recognition of your skill and bravery, allowing you to take part in the next round. "),
			(try_end),
			(assign, reg1, ":var_1"),
			(store_add, reg0, "$g_tournament_cur_tier", 1),
		(try_end)
	],
	[
		("tournament_view_participants",
		[],
		"View participants.",
		[
			(jump_to_menu, "mnu_tournament_participants")
		], "."),

		("tournament_bet",
		[
			(neq, "$g_tournament_cur_tier", "$g_tournament_last_bet_tier")
		],
		"Place a bet on yourself.",
		[
			(jump_to_menu, "mnu_tournament_bet")
		], "."),

		("tournament_join_next_fight",
		[],
		"Fight in the next round.",
		[
			(party_get_slot, ":current_town_town_arena", "$current_town", slot_town_arena),
			(modify_visitors_at_site, ":current_town_town_arena"),
			(reset_visitors),
			(assign, "$g_player_tournament_placement", "$g_tournament_cur_tier"),
			(try_begin),
				(gt, "$g_player_tournament_placement", 4),
				(assign, "$g_player_eligible_feast_center_no", "$current_town"),
			(try_end),
			(val_add, "$g_tournament_cur_tier", 1),
			(store_mul, "$g_tournament_num_participants_for_fight", "$g_tournament_next_num_teams", "$g_tournament_next_team_size"),
			(troop_set_slot, "trp_tournament_participants", slot_troop_relations_begin, -1),
			(troop_set_slot, "trp_temp_array_a", slot_troop_relations_begin, "trp_player"),
			(try_for_range, ":number", 1, "$g_tournament_num_participants_for_fight"),
				(call_script, "script_get_random_tournament_participant"),
				(troop_set_slot, "trp_temp_array_a", ":number", reg0),
			(try_end),
			(call_script, "script_shuffle_troop_slots", "trp_temp_array_a", 0, "$g_tournament_num_participants_for_fight"),
			(try_for_range, ":number", 0, 4),
				(troop_set_slot, "trp_temp_array_b", ":number", ":number"),
			(try_end),
			(call_script, "script_shuffle_troop_slots", "trp_temp_array_b", 0, 4),
			(assign, ":var_3", 0),
			(try_for_range, ":number_2", 0, "$g_tournament_next_num_teams"),
				(troop_get_slot, ":temp_array_b_number_2", "trp_temp_array_b", ":number_2"),
				(try_for_range, ":number", 0, 8),
					(troop_set_slot, "trp_temp_array_c", ":number", ":number"),
				(try_end),
				(call_script, "script_shuffle_troop_slots", "trp_temp_array_c", 0, 8),
				(try_for_range, ":number_3", 0, "$g_tournament_next_team_size"),
					(store_mul, ":value", ":temp_array_b_number_2", 8),
					(troop_get_slot, ":temp_array_c_number_3", "trp_temp_array_c", ":number_3"),
					(val_add, ":value", ":temp_array_c_number_3"),
					(troop_get_slot, ":temp_array_a_var_3", "trp_temp_array_a", ":var_3"),
					(set_visitor, ":value", ":temp_array_a_var_3"),
					(val_add, ":var_3", 1),
				(try_end),
			(try_end),
			(assign, "$g_tournament_next_num_teams", 0),
			(assign, "$g_tournament_next_team_size", 0),
			(assign, "$g_mt_mode", 3),
			(party_get_slot, ":current_town_center_original_faction", "$current_town", slot_center_original_faction),
			(assign, ":var_11", 0),
			(assign, ":value_2", "p_castle_1"),
			(try_for_range, ":party", "p_town_1", ":value_2"),
				(try_begin),
					(eq, ":party", "$current_town"),
					(assign, ":value_2", 0),
				(else_try),
					(party_slot_eq, ":party", slot_center_original_faction, ":current_town_center_original_faction"),
					(val_add, ":var_11", 1),
				(try_end),
			(try_end),
			(set_jump_mission, "mt_arena_melee_fight"),
			(jump_to_scene, ":current_town_town_arena"),
			(change_screen_mission)
		], "."),

		("leave_tournament",
		[],
		"Withdraw from the melee.",
		[
			(jump_to_menu, "mnu_tournament_withdraw_verify")
		], ".")
	]
	),

	("tournament_withdraw_verify", 0, "Are you sure you want to withdraw from the melee?",
	"none",
	[],
	[
		("tournament_withdraw_yes",
		[],
		"Yes. This is a pointless affectation.",
		[
			(jump_to_menu, "mnu_town_tournament_won_by_another")
		], "."),

		("tournament_withdraw_no",
		[],
		"No, not as long as there is a chance of glory!",
		[
			(jump_to_menu, "mnu_town_tournament")
		], ".")
	]
	),

	("tournament_bet", 0, "The odds against you are {reg5} to {reg6}.{reg1? You have already bet {reg1} coins on yourself, and if you win, you will earn {reg2} coins.:} How much do you want to bet?",
	"none",
	[
		(assign, reg1, "$g_tournament_bet_placed"),
		(store_add, reg2, "$g_tournament_bet_win_amount", "$g_tournament_bet_placed"),
		(call_script, "script_get_win_amount_for_tournament_bet"),
		(assign, ":var_1", reg0),
		(assign, ":value", 100000),
		(assign, ":value_2", 1),
		(assign, ":value_3", 1),
		(try_for_range, ":number", 1, 50),
			(try_for_range, ":number_2", 1, 50),
				(store_mul, ":value_4", 100, ":number"),
				(val_div, ":value_4", ":number_2"),
				(store_sub, ":value_5", ":var_1", ":value_4"),
				(val_abs, ":value_5"),
				(lt, ":value_5", ":value"),
				(assign, ":value", ":value_5"),
				(assign, ":value_2", ":number_2"),
				(assign, ":value_3", ":number"),
			(try_end),
		(try_end),
		(assign, reg5, ":value_3"),
		(assign, reg6, ":value_2")
	],
	[
		("bet_100_denars",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(ge, ":troop_gold_player", 100)
		],
		"100 coins.",
		[
			(assign, "$temp", 100),
			(jump_to_menu, "mnu_tournament_bet_confirm")
		], "."),

		("bet_50_denars",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(ge, ":troop_gold_player", 50)
		],
		"50 coins.",
		[
			(assign, "$temp", 50),
			(jump_to_menu, "mnu_tournament_bet_confirm")
		], "."),

		("bet_20_denars",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(ge, ":troop_gold_player", 20)
		],
		"20 coins.",
		[
			(assign, "$temp", 20),
			(jump_to_menu, "mnu_tournament_bet_confirm")
		], "."),

		("bet_10_denars",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(ge, ":troop_gold_player", 10)
		],
		"10 coins.",
		[
			(assign, "$temp", 10),
			(jump_to_menu, "mnu_tournament_bet_confirm")
		], "."),

		("bet_5_denars",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(ge, ":troop_gold_player", 5)
		],
		"5 coins.",
		[
			(assign, "$temp", 5),
			(jump_to_menu, "mnu_tournament_bet_confirm")
		], "."),

		("go_back_dot",
		[],
		"Go back.",
		[
			(jump_to_menu, "mnu_town_tournament")
		], ".")
	]
	),

	("tournament_bet_confirm", 0, "If you bet {reg1} coins, you will earn {reg2} coins if you win the melee. Is that all right?",
	"none",
	[
		(call_script, "script_get_win_amount_for_tournament_bet"),
		(assign, ":var_1", reg0),
		(val_mul, ":var_1", "$temp"),
		(val_div, ":var_1", 100),
		(assign, reg1, "$temp"),
		(assign, reg2, ":var_1")
	],
	[
		("tournament_bet_accept",
		[],
		"Go ahead.",
		[
			(call_script, "script_tournament_place_bet", "$temp"),
			(jump_to_menu, "mnu_town_tournament")
		], "."),

		("tournament_bet_cancel",
		[],
		"Forget it.",
		[
			(jump_to_menu, "mnu_tournament_bet")
		], ".")
	]
	),

	("tournament_participants", 0, "You ask one of the criers for the names of the melee participants. They are:^{s11}",
	"none",
	[
		(str_clear, 11),
		(call_script, "script_sort_tournament_participant_troops"),
		(call_script, "script_get_num_tournament_participants"),
		(assign, ":var_1", reg0),
		(try_for_range, ":number", 0, ":var_1"),
			(troop_get_slot, ":tournament_participants_number", "trp_tournament_participants", ":number"),
			(str_store_troop_name, 12, ":tournament_participants_number"),
			(str_store_string, 11, "@{!}{s11}^{s12}"),
		(try_end)
	],
	[
		("go_back_dot",
		[],
		"Go back.",
		[
			(jump_to_menu, "mnu_town_tournament")
		], ".")
	]
	),

	("collect_taxes", mnf_disable_all_keys, "As the most skilled tradesman of your company, ({reg2}), {reg3?you expect:{s1} expects} that collecting taxes from here will take {reg4} days...",
	"none",
	[
		(call_script, "script_get_max_skill_of_player_party", "skl_trade"),
		(assign, ":var_1", reg0),
		(assign, reg2, reg0),
		(assign, ":var_2", reg1),
		(try_begin),
			(eq, ":var_2", "trp_player"),
			(assign, reg3, 1),
		(else_try),
			(assign, reg3, 0),
			(str_store_troop_name, 1, ":var_2"),
		(try_end),
		(assign, ":value", 3000),
		(try_begin),
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(assign, ":value", 6000),
		(try_end),
		(try_begin),
			(quest_slot_eq, "qst_collect_taxes", slot_quest_current_state, 0),
			(store_add, ":value_2", ":var_1", 30),
			(try_begin),
				(party_slot_eq, "$current_town", slot_party_type, 3),
				(store_div, "$qst_collect_taxes_total_hours", 5040, ":value_2"),
			(else_try),
				(store_div, "$qst_collect_taxes_total_hours", 2160, ":value_2"),
			(try_end),
			(call_script, "script_party_count_fit_for_battle", "p_main_party"),
			(val_add, reg0, 20),
			(val_mul, "$qst_collect_taxes_total_hours", 20),
			(val_div, "$qst_collect_taxes_total_hours", reg0),
			(quest_set_slot, "qst_collect_taxes", slot_quest_target_amount, "$qst_collect_taxes_total_hours"),
			(store_div, ":value_3", "$qst_collect_taxes_total_hours", 20),
			(store_div, ":value_4", "$qst_collect_taxes_total_hours", 4),
			(assign, ":var_7", ":value_4"),
			(store_mul, ":value_5", "$qst_collect_taxes_total_hours", 3),
			(val_div, ":value_5", 4),
			(val_mul, ":value", 2),
			(store_div, "$qst_collect_taxes_hourly_income", ":value", "$qst_collect_taxes_total_hours"),
			(store_random_in_range, "$qst_collect_taxes_menu_counter", ":value_3", ":value_4"),
			(store_random_in_range, "$qst_collect_taxes_unrest_counter", ":var_7", ":value_5"),
			(assign, "$qst_collect_taxes_halve_taxes", 0),
		(try_end),
		(quest_get_slot, ":collect_taxes_target_amount", "qst_collect_taxes", slot_quest_target_amount),
		(store_div, ":value_6", ":collect_taxes_target_amount", 24),
		(val_mul, ":value_6", 24),
		(try_begin),
			(lt, ":value_6", ":collect_taxes_target_amount"),
			(val_add, ":value_6", 24),
		(try_end),
		(val_div, ":value_6", 24),
		(assign, reg4, ":value_6")
	],
	[
		("start_collecting",
		[],
		"Start collecting.",
		[
			(assign, "$qst_collect_taxes_currently_collecting", 1),
			(try_begin),
				(quest_slot_eq, "qst_collect_taxes", slot_quest_current_state, 0),
				(quest_set_slot, "qst_collect_taxes", slot_quest_current_state, 1),
			(try_end),
			(rest_for_hours_interactive, 1000, 5, 0),
			(assign, "$auto_enter_town", "$current_town"),
			(assign, "$g_town_visit_after_rest", 1),
			(change_screen_return)
		], "."),

		("collect_later",
		[],
		"Put it off until later.",
		[
			(try_begin),
				(party_slot_eq, "$current_town", slot_party_type, 3),
				(jump_to_menu, "mnu_town"),
			(else_try),
				(jump_to_menu, "mnu_village"),
			(try_end)
		], ".")
	]
	),

	("collect_taxes_complete", mnf_disable_all_keys, "You've collected {reg3} coins in taxes from {s3}. {s19} will be expecting you to take the money to {reg4?her:him}.",
	"none",
	[
		(str_store_party_name, 3, "$current_town"),
		(quest_get_slot, ":collect_taxes_giver_troop", "qst_collect_taxes", slot_quest_giver_troop),
		(str_store_troop_name, 19, ":collect_taxes_giver_troop"),
		(assign, reg4, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":collect_taxes_giver_troop"),
			(assign, reg4, 1),
		(try_end),
		(quest_get_slot, reg3, "qst_collect_taxes", slot_quest_gold_reward),
		(try_begin),
			(eq, "$qst_collect_taxes_halve_taxes", 0),
			(call_script, "script_change_player_relation_with_center", "$current_town", -2),
		(try_end),
		(call_script, "script_succeed_quest", "qst_collect_taxes")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("collect_taxes_rebels_killed", 0, "Your quick action and strong arm have successfully put down the revolt. Surely, anyone with a mind to rebel against you will think better of it after this.",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_map)
		], ".")
	]
	),

	("collect_taxes_failed", mnf_disable_all_keys, "You could collect only {reg3} coins as tax from {s3} before the revolt broke out. {s1} won't be happy, but some silver will placate {reg4?her:him} better than nothing at all...",
	"none",
	[
		(str_store_party_name, 3, "$current_town"),
		(quest_get_slot, ":collect_taxes_giver_troop", "qst_collect_taxes", slot_quest_giver_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":collect_taxes_giver_troop"),
		(assign, reg4, reg0),
		(str_store_troop_name, 1, ":collect_taxes_giver_troop"),
		(quest_get_slot, reg3, "qst_collect_taxes", slot_quest_gold_reward),
		(call_script, "script_fail_quest", "qst_collect_taxes"),
		(quest_set_slot, "qst_collect_taxes", slot_quest_current_state, 4),
		(rest_for_hours, 0, 0, 0)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_map)
		], ".")
	]
	),

	("collect_taxes_revolt_warning", 0, "The people of {s3} are outraged at your demands and decry it as nothing more than extortion. They're getting very restless, and they may react badly if you keep pressing them.",
	"none",
	[
		(str_store_party_name, 3, "$current_town")
	],
	[
		("continue_collecting_taxes",
		[],
		"Ignore them and continue.",
		[
			(change_screen_return)
		], "."),

		("halve_taxes",
		[
			(quest_get_slot, ":collect_taxes_giver_troop", "qst_collect_taxes", slot_quest_giver_troop),
			(str_store_troop_name, 1, ":collect_taxes_giver_troop")
		],
		"Agree to reduce your collection by half. ({s1} may be upset)",
		[
			(assign, "$qst_collect_taxes_halve_taxes", 1),
			(change_screen_return)
		], ".")
	]
	),

	("collect_taxes_revolt", 0, "You are interrupted while collecting the taxes at {s3}. A large band of angry {reg9?peasants:townsmen} is marching nearer, shouting about the exorbitant taxes and waving torches and weapons. It looks like they aim to fight you!",
	"none",
	[
		(str_store_party_name, 3, "$current_town"),
		(assign, reg9, 0),
		(try_begin),
			(party_slot_eq, "$current_town", slot_party_type, 4),
			(assign, reg9, 1),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(set_jump_mission, "mt_back_alley_revolt"),
			(quest_get_slot, ":collect_taxes_target_center", "qst_collect_taxes", slot_quest_target_center),
			(try_begin),
				(party_slot_eq, ":collect_taxes_target_center", slot_party_type, 3),
				(party_get_slot, ":collect_taxes_target_center_town_alley", ":collect_taxes_target_center", slot_town_alley),
			(else_try),
				(party_get_slot, ":collect_taxes_target_center_town_alley", ":collect_taxes_target_center", slot_town_center),
			(try_end),
			(modify_visitors_at_site, ":collect_taxes_target_center_town_alley"),
			(reset_visitors),
			(assign, ":var_3", 6),
			(store_character_level, ":character_level_player", "trp_player"),
			(val_div, ":character_level_player", 5),
			(val_add, ":var_3", ":character_level_player"),
			(set_visitors, 1, "trp_tax_rebel", ":var_3"),
			(jump_to_scene, ":collect_taxes_target_center_town_alley"),
			(change_screen_mission)
		], ".")
	]
	),

	("train_peasants_against_bandits", 0, "As the most experienced taskmaster of your company, ({reg2}), {reg3?you expect:{s1} expects} that getting some peasants ready for practice will take {reg4} hours.",
	"none",
	[
		(call_script, "script_get_max_skill_of_player_party", "skl_trainer"),
		(assign, ":var_1", reg0),
		(assign, reg2, reg0),
		(assign, ":var_2", reg1),
		(try_begin),
			(eq, ":var_2", "trp_player"),
			(assign, reg3, 1),
		(else_try),
			(assign, reg3, 0),
			(str_store_troop_name, 1, ":var_2"),
		(try_end),
		(store_sub, ":value", 20, ":var_1"),
		(val_mul, ":value", 3),
		(val_div, ":value", 5),
		(store_sub, reg4, ":value", "$qst_train_peasants_against_bandits_num_hours_trained")
	],
	[
		("make_preparation",
		[],
		"Train them.",
		[
			(assign, "$qst_train_peasants_against_bandits_currently_training", 1),
			(rest_for_hours_interactive, 1000, 5, 0),
			(assign, "$auto_enter_town", "$current_town"),
			(assign, "$g_town_visit_after_rest", 1),
			(change_screen_return)
		], "."),

		("train_later",
		[],
		"Put it off until later.",
		[
			(jump_to_menu, "mnu_village")
		], ".")
	]
	),

	("train_peasants_against_bandits_ready", 0, "You put the peasants through the basics of soldiering, discipline and obedience. You think {reg0} of them {reg1?have:has} fully grasped the training and {reg1?are:is} ready for some practice.",
	"none",
	[
		(store_character_level, ":character_level_player", "trp_player"),
		(val_div, ":character_level_player", 10),
		(val_add, ":character_level_player", 1),
		(quest_get_slot, ":train_peasants_against_bandits_target_amount", "qst_train_peasants_against_bandits", slot_quest_target_amount),
		(quest_get_slot, ":train_peasants_against_bandits_current_state", "qst_train_peasants_against_bandits", slot_quest_current_state),
		(val_sub, ":train_peasants_against_bandits_target_amount", ":train_peasants_against_bandits_current_state"),
		(assign, ":var_4", ":character_level_player"),
		(val_min, ":var_4", ":train_peasants_against_bandits_target_amount"),
		(val_add, ":var_4", 1),
		(store_random_in_range, ":random_in_range_1_var_4", 1, ":var_4"),
		(assign, "$g_train_peasants_against_bandits_num_peasants", ":random_in_range_1_var_4"),
		(assign, reg0, ":random_in_range_1_var_4"),
		(store_sub, reg1, ":random_in_range_1_var_4", 1),
		(str_store_troop_name_by_count, 0, "trp_trainee_peasant", ":random_in_range_1_var_4")
	],
	[
		("peasant_start_practice",
		[],
		"Start the practice fight.",
		[
			(set_jump_mission, "mt_village_training"),
			(quest_get_slot, ":train_peasants_against_bandits_target_center", "qst_train_peasants_against_bandits", slot_quest_target_center),
			(party_get_slot, ":train_peasants_against_bandits_target_center_town_center", ":train_peasants_against_bandits_target_center", slot_town_center),
			(modify_visitors_at_site, ":train_peasants_against_bandits_target_center_town_center"),
			(reset_visitors),
			(set_visitor, 0, "trp_player"),
			(set_visitors, 1, "trp_trainee_peasant", "$g_train_peasants_against_bandits_num_peasants"),
			(set_jump_entry, 11),
			(jump_to_scene, ":train_peasants_against_bandits_target_center_town_center"),
			(jump_to_menu, "mnu_train_peasants_against_bandits_training_result"),
			(music_set_situation, 0),
			(change_screen_mission)
		], ".")
	]
	),

	("train_peasants_against_bandits_training_result", mnf_disable_all_keys, "{s0}",
	"none",
	[
		(assign, reg5, "$g_train_peasants_against_bandits_num_peasants"),
		(str_store_troop_name_by_count, 0, "trp_trainee_peasant", "$g_train_peasants_against_bandits_num_peasants"),
		(try_begin),
			(eq, "$g_train_peasants_against_bandits_training_succeeded", 0),
			(str_store_string, 0, "@You were beaten. The peasants are heartened by their success, but the lesson you wanted to teach them probably didn't get through..."),
		(else_try),
			(str_store_string, 0, "@After beating your last opponent, you explain to the peasants how to better defend themselves against such an attack. Hopefully they'll take the experience on board and will be prepared next time."),
			(quest_get_slot, ":train_peasants_against_bandits_current_state", "qst_train_peasants_against_bandits", slot_quest_current_state),
			(val_add, ":train_peasants_against_bandits_current_state", "$g_train_peasants_against_bandits_num_peasants"),
			(quest_set_slot, "qst_train_peasants_against_bandits", slot_quest_current_state, ":train_peasants_against_bandits_current_state"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(try_begin),
				(quest_get_slot, ":train_peasants_against_bandits_current_state", "qst_train_peasants_against_bandits", slot_quest_current_state),
				(quest_slot_eq, "qst_train_peasants_against_bandits", slot_quest_target_amount, ":train_peasants_against_bandits_current_state"),
				(jump_to_menu, "mnu_train_peasants_against_bandits_attack"),
			(else_try),
				(change_screen_map),
			(try_end)
		], ".")
	]
	),

	("train_peasants_against_bandits_attack", 0, "As you get ready to continue the training, a sentry from the village runs up to you, shouting alarums. The bandits have been spotted on the horizon, riding hard for {s3}. The elder begs that you organize your newly-trained militia and face them.",
	"none",
	[
		(str_store_party_name, 3, "$current_town")
	],
	[
		("peasants_against_bandits_attack_resist",
		[],
		"Prepare for a fight!",
		[
			(store_random_in_range, ":random_in_range_0_3", 0, 3),
			(try_begin),
				(eq, ":random_in_range_0_3", 0),
				(troop_get_slot, ":troop_trees_844", "$troop_trees", 844),
				(assign, ":value", ":troop_trees_844"),
			(else_try),
				(eq, ":random_in_range_0_3", 1),
				(troop_get_slot, ":troop_trees_846", "$troop_trees", 846),
				(assign, ":value", ":troop_trees_846"),
			(else_try),
				(troop_get_slot, ":troop_trees_847", "$troop_trees", 847),
				(assign, ":value", ":troop_trees_847"),
			(try_end),
			(party_get_slot, ":g_encountered_party_town_center", "$g_encountered_party", slot_town_center),
			(modify_visitors_at_site, ":g_encountered_party_town_center"),
			(reset_visitors),
			(store_character_level, ":character_level_player", "trp_player"),
			(val_div, ":character_level_player", 2),
			(store_add, ":value_2", ":character_level_player", 16),
			(store_add, ":value_3", ":value_2", 6),
			(store_random_in_range, ":random_in_range_0_3", ":value_2", ":value_3"),
			(set_visitors, 0, ":value", ":random_in_range_0_3"),
			(assign, ":var_10", ":value_3"),
			(set_visitors, 2, "trp_trainee_peasant", ":var_10"),
			(set_party_battle_mode),
			(set_battle_advantage, 0),
			(assign, "$g_battle_result", 0),
			(set_jump_mission, "mt_village_attack_bandits"),
			(jump_to_scene, ":g_encountered_party_town_center"),
			(assign, "$g_next_menu", "mnu_train_peasants_against_bandits_attack_result"),
			(jump_to_menu, "mnu_battle_debrief"),
			(assign, "$g_mt_mode", 2),
			(change_screen_mission)
		], ".")
	]
	),

	("train_peasants_against_bandits_attack_result", mnf_disable_all_keys|mnf_scale_picture, "{s9}",
	"none",
	[
		(try_begin),
			(eq, "$g_battle_result", 1),
			(str_store_string, 9, "@The bandits are broken! Those few who remain alive and conscious run off with their tails between their legs, terrified of the peasants and their new champion."),
			(call_script, "script_succeed_quest", "qst_train_peasants_against_bandits"),
			(jump_to_menu, "mnu_train_peasants_against_bandits_success"),
		(else_try),
			(call_script, "script_fail_quest", "qst_train_peasants_against_bandits"),
			(str_store_string, 9, "@Try as you might, you could not defeat the bandits. Infuriated, they raze the village to the ground to punish the peasants, and then leave the burning wasteland behind to find greener pastures to plunder."),
			(set_background_mesh, "mesh_pic_looted_village"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(try_begin),
				(call_script, "script_village_set_state", "$current_town", 2),
				(party_set_slot, "$current_town", slot_village_raid_progress, 0),
				(party_set_slot, "$current_town", slot_village_recover_progress, 0),
				(call_script, "script_change_player_relation_with_center", "$g_encountered_party", -3),
				(call_script, "script_end_quest", "qst_train_peasants_against_bandits"),
			(try_end),
			(change_screen_map)
		], ".")
	]
	),

	("train_peasants_against_bandits_success", mnf_disable_all_keys, "The bandits are broken! Those few who remain run off with their tails between their legs, terrified of the peasants and their new champion. The villagers have little left in the way of wealth after their ordeal, but they offer you all they can find to show their gratitude.",
	"none",
	[
		(party_clear, "p_temp_party"),
		(call_script, "script_end_quest", "qst_train_peasants_against_bandits"),
		(call_script, "script_change_player_relation_with_center", "$g_encountered_party", 4),
		(party_get_slot, ":current_town_town_elder", "$current_town", slot_town_elder),
		(try_for_range, ":number", 10, 106),
			(store_random_in_range, ":random_in_range_0_100", 0, 100),
			(lt, ":random_in_range_0_100", 50),
			(troop_set_inventory_slot, ":current_town_town_elder", ":number", -1),
		(try_end),
		(call_script, "script_add_log_entry", 4, "trp_player", "$current_town", -1, -1)
	],
	[
		("village_bandits_defeated_accept",
		[],
		"Take it as your just due.",
		[
			(jump_to_menu, "mnu_auto_return_to_map"),
			(party_get_slot, ":current_town_town_elder", "$current_town", slot_town_elder),
			(troop_sort_inventory, ":current_town_town_elder"),
			(change_screen_loot, ":current_town_town_elder")
		], "."),

		("village_bandits_defeated_cont",
		[],
		"Refuse, stating that they need these items more than you do.",
		[
			(call_script, "script_change_player_relation_with_center", "$g_encountered_party", 3),
			(call_script, "script_change_player_honor", 1),
			(change_screen_map)
		], ".")
	]
	),

	("disembark", 0, "Do you wish to disembark?",
	"none",
	[],
	[
		("disembark_yes",
		[],
		"Yes.",
		[
			(assign, "$g_player_icon_state", 0),
			(party_set_flags, "p_main_party", 512, 0),
			(party_get_position, 1, "p_main_party"),
			(party_set_position, "p_main_party", 0),
			(change_screen_return)
		], "."),

		("disembark_no",
		[],
		"No.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("ship_reembark", 0, "Do you wish to embark?",
	"none",
	[],
	[
		("reembark_yes",
		[],
		"Yes.",
		[
			(assign, "$g_player_icon_state", 2),
			(party_set_flags, "p_main_party", 512, 1),
			(party_get_position, 1, "p_main_party"),
			(map_get_water_position_around_position, 2, 1, 6),
			(party_set_position, "p_main_party", 2),
			(assign, "$g_main_ship_party", "$g_encountered_party"),
			(disable_party, "$g_encountered_party"),
			(change_screen_return)
		], "."),

		("reembark_no",
		[],
		"No.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("center_reports", 0, "Town Name: {s1}^Rent Income: {reg1} denars^Tariff Income: {reg2} denars^Food Stock: for {reg3} days",
	"none",
	[
		(party_get_slot, ":g_encountered_party_food_store", "$g_encountered_party", slot_party_food_store),
		(call_script, "script_center_get_food_consumption", "$g_encountered_party"),
		(assign, ":var_2", reg0),
		(try_begin),
			(gt, ":var_2", 0),
			(store_div, reg3, ":g_encountered_party_food_store", ":var_2"),
		(else_try),
			(assign, reg3, 9999),
		(try_end),
		(str_store_party_name, 1, "$g_encountered_party"),
		(party_get_slot, reg1, "$g_encountered_party", slot_center_accumulated_rents),
		(party_get_slot, reg2, "$g_encountered_party", slot_center_accumulated_tariffs)
	],
	[
		("to_price_and_productions",
		[],
		"Show prices and productions.",
		[
			(jump_to_menu, "mnu_price_and_production")
		], "."),

		("go_back_dot",
		[],
		"Go back.",
		[
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 4),
				(jump_to_menu, "mnu_village"),
			(else_try),
				(jump_to_menu, "mnu_town"),
			(try_end)
		], ".")
	]
	),

	("price_and_production", 0, "Productions are:^(Note: base/modified by raw materials/modified by materials plus prosperity)^{s1}^^Price factors are:^{s2}",
	"none",
	[
		(assign, ":var_1", 0),
		(assign, ":var_2", 0),
		(try_for_range, ":party", "p_town_1", "p_castle_1"),
			(call_script, "script_center_get_goods_availability", ":party"),
			(val_add, ":var_1", reg0),
		(try_end),
		(try_for_range, ":party", "p_village_1", "p_salt_mine"),
			(call_script, "script_center_get_goods_availability", ":party"),
			(val_add, ":var_2", reg0),
		(try_end),
		(val_div, ":var_2", 110),
		(val_div, ":var_1", 22),
		(call_script, "script_center_get_goods_availability", "$g_encountered_party"),
		(assign, reg1, ":var_1"),
		(assign, reg2, ":var_2"),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(str_store_string, 1, "str___hardship_index_reg0_avg_towns_reg1_avg_villages_reg2__"),
			(display_message, "@{!}DEBUG - {s1}"),
		(try_end),
		(try_for_range, ":item", "itm_trade_spice", "itm_trade_dummy01"),
			(neq, ":item", "itm_trade_pork"),
			(neq, ":item", "itm_trade_chicken"),
			(neq, ":item", "itm_trade_butter"),
			(neq, ":item", "itm_trade_cattle_meat"),
			(neq, ":item", "itm_trade_cabbages"),
			(call_script, "script_center_get_production", "$g_encountered_party", ":item"),
			(assign, ":var_5", reg0),
			(assign, ":var_6", reg2),
			(assign, ":var_7", reg1),
			(call_script, "script_center_get_consumption", "$g_encountered_party", ":item"),
			(assign, ":var_8", reg2),
			(assign, ":var_9", reg1),
			(assign, ":var_10", reg0),
			(store_sub, ":value", ":item", "itm_trade_spice"),
			(val_add, ":value", 267),
			(party_get_slot, ":g_encountered_party_value", "$g_encountered_party", ":value"),
			(assign, ":var_13", 0),
			(assign, ":var_14", 0),
			(assign, ":var_15", 0),
			(assign, ":var_16", 0),
			(try_for_range, ":party", "p_town_1", "p_salt_mine"),
				(neg|is_between, ":party", "p_castle_1", "p_village_1"),
				(val_add, ":var_13", 1),
				(call_script, "script_center_get_production", ":party", ":item"),
				(assign, ":var_17", reg2),
				(call_script, "script_center_get_consumption", ":party", ":item"),
				(store_add, ":value_2", reg1, reg2),
				(party_get_slot, ":party_value", ":party", ":value"),
				(val_add, ":var_14", ":party_value"),
				(val_add, ":var_15", ":var_17"),
				(val_add, ":var_16", ":value_2"),
			(try_end),
			(assign, ":var_20", ":var_15"),
			(assign, ":var_21", ":var_16"),
			(val_div, ":var_14", ":var_13"),
			(val_div, ":var_15", ":var_13"),
			(val_div, ":var_16", ":var_13"),
			(str_store_item_name, 3, ":item"),
			(assign, reg1, ":var_6"),
			(assign, reg2, ":var_7"),
			(assign, reg3, ":var_5"),
			(assign, reg4, ":g_encountered_party_value"),
			(assign, reg5, ":var_15"),
			(assign, reg6, ":var_14"),
			(assign, reg7, ":var_8"),
			(assign, reg8, ":var_9"),
			(assign, reg9, ":var_10"),
			(assign, reg10, ":var_16"),
			(item_get_slot, ":item_production_slot", ":item", slot_item_production_slot),
			(party_get_slot, ":g_encountered_party_item_production_slot", "$g_encountered_party", ":item_production_slot"),
			(assign, reg11, ":g_encountered_party_item_production_slot"),
			(assign, reg12, ":var_20"),
			(assign, reg13, ":var_21"),
			(item_get_slot, ":item_production_string", ":item", slot_item_production_string),
			(str_store_string, 4, ":item_production_string"),
			(str_store_string, 1, "str___s3_price_=_reg4_calradian_average_reg6_capital_reg11_s4_base_reg1modified_by_raw_material_reg2modified_by_prosperity_reg3_calradian_average_production_base_reg5_total_reg12_consumed_reg7used_as_raw_material_reg8modified_total_reg9_calradian_consumption_base_reg10_total_reg13s1_"),
		(try_end)
	],
	[
		("go_back_dot",
		[],
		"Go back.",
		[
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 4),
				(jump_to_menu, "mnu_village"),
			(else_try),
				(jump_to_menu, "mnu_town"),
			(try_end)
		], ".")
	]
	),

	("town_trade", 0, "You head towards the marketplace.",
	"none",
	[
		(try_begin),
			(eq, "$jq_just_visited_CO", 1),
			(assign, "$jq_just_visited_CO", 0),
			(assign, ":var_1", "$jq_current_shop"),
			(change_screen_trade, ":var_1"),
		(try_end)
	],
	[
		("auto_sell",
		[],
		"Sell items automatically.",
		[
			(assign, "$g_next_menu", "mnu_town"),
			(jump_to_menu, "mnu_trade_auto_sell_begin")
		], "."),

		("assess_prices",
		[
			(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
			(store_relation, ":relation_faction_of_party_current_town_player_supporters_faction", ":faction_of_party_current_town", "fac_player_supporters_faction"),
			(ge, ":relation_faction_of_party_current_town_player_supporters_faction", 0)
		],
		"Assess the local prices.",
		[
			(jump_to_menu, "mnu_town_trade_assessment_begin")
		], "."),

		("trade_with_arms_merchant",
		[
			(party_slot_ge, "$current_town", 21, 1)
		],
		"Trade with the arms merchant.",
		[
			(party_get_slot, ":current_town_town_weaponsmith", "$current_town", slot_town_weaponsmith),
			(assign, "$jq_current_town", "$current_town"),
			(assign, "$jq_current_shop", ":current_town_town_weaponsmith"),
			(change_screen_trade, ":current_town_town_weaponsmith")
		], "."),

		("trade_with_armor_merchant",
		[
			(party_slot_ge, "$current_town", 22, 1)
		],
		"Trade with the armor merchant.",
		[
			(party_get_slot, ":current_town_town_armorer", "$current_town", slot_town_armorer),
			(assign, "$jq_current_town", "$current_town"),
			(assign, "$jq_current_shop", ":current_town_town_armorer"),
			(change_screen_trade, ":current_town_town_armorer")
		], "."),

		("trade_with_horse_merchant",
		[
			(party_slot_ge, "$current_town", 24, 1)
		],
		"Trade with the horse merchant.",
		[
			(party_get_slot, ":current_town_town_horse_merchant", "$current_town", slot_town_horse_merchant),
			(assign, "$jq_current_town", "$current_town"),
			(assign, "$jq_current_shop", ":current_town_town_horse_merchant"),
			(change_screen_trade, ":current_town_town_horse_merchant")
		], "."),

		("trade_with_goods_merchant",
		[
			(party_slot_ge, "$current_town", 23, 1)
		],
		"Trade with the goods merchant.",
		[
			(party_get_slot, ":current_town_town_merchant", "$current_town", slot_town_merchant),
			(assign, "$jq_current_town", "$current_town"),
			(assign, "$jq_current_shop", ":current_town_town_merchant"),
			(change_screen_trade, ":current_town_town_merchant")
		], "."),

		("auto_buy_food",
		[],
		"Buy food automatically.",
		[
			(assign, "$g_next_menu", "mnu_town"),
			(jump_to_menu, "mnu_trade_auto_buy_food_begin")
		], "."),

		("Companions_overview",
		[],
		"Companions overview.",
		[
			(assign, "$jq_in_market_menu", 1),
			(assign, ":var_1", 0),
			(try_for_range, reg3, "trp_npc1", "trp_kingdom_1_lord"),
				(main_party_has_troop, reg3),
				(val_add, ":var_1", 1),
			(try_end),
			(try_begin),
				(eq, ":var_1", 0),
				(display_message, "@No companions in party!", 0xffff0000),
			(else_try),
				(gt, "$jq_startpage", 1),
				(start_presentation, "prsnt_jq_extended_info"),
			(else_try),
				(start_presentation, "prsnt_jq_companions_quickview"),
			(try_end)
		], "."),

		("back_to_town_menu",
		[],
		"Head back.",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("trade_auto_sell_begin", 0, "Items in the inventory of companions which selected as the type for sell and their prices below {reg1} coins will be sold to {reg2?all merchants:the elder} in current {reg2?town:village} automatically. Specifically foods, trade goods and books will never be sold.^^You can change some settings here freely.",
	"none",
	[
		(assign, reg1, "$g_auto_sell_price_limit"),
		(try_begin),
			(is_between, "$current_town", "p_town_1", "p_castle_1"),
			(assign, reg2, 1),
		(else_try),
			(assign, reg2, 0),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(call_script, "script_auto_sell_all"),
			(jump_to_menu, "$g_next_menu")
		], "."),

		("change_settings",
		[],
		"Change settings.",
		[
			(start_presentation, "prsnt_auto_sell_options")
		], "."),

		("go_back",
		[],
		"Go back",
		[
			(jump_to_menu, "$g_next_menu")
		], ".")
	]
	),

	("trade_auto_buy_food_begin", 0, "You will buy food according to the shopping list of foods automatically. Do you want to continue?^^You can view and configure the shopping list here.",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(call_script, "script_auto_buy_food"),
			(jump_to_menu, "$g_next_menu")
		], "."),

		("change_shopping_list_of_food",
		[],
		"Configure the shopping list of foods.",
		[
			(start_presentation, "prsnt_shopping_list_of_food")
		], "."),

		("go_back",
		[],
		"Go back",
		[
			(jump_to_menu, "$g_next_menu")
		], ".")
	]
	),

	("town_trade_assessment_begin", 0, "You overhear several discussions about the price of trade goods across the local area.^You listen closely, trying to work out the best deals around.",
	"none",
	[
		(str_clear, 42)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$auto_enter_town", "$current_town"),
			(assign, "$g_town_assess_trade_goods_after_rest", 1),
			(call_script, "script_get_max_skill_of_player_party", "skl_trade"),
			(val_div, reg0, 2),
			(store_sub, ":value", 6, reg0),
			(assign, "$g_last_rest_center", "$current_town"),
			(assign, "$g_last_rest_payment_until", -1),
			(rest_for_hours, ":value", 5, 0),
			(change_screen_return)
		], "."),

		("go_back",
		[],
		"Go back",
		[
			(jump_to_menu, "mnu_town_trade")
		], ".")
	]
	),

	("town_trade_assessment", mnf_disable_all_keys, "As the most skilled tradesman of your company, ({reg2}), {reg3?you try to figure out:{s1} tries to figure out} the best goods to trade in. {s2}",
	"none",
	[
		(call_script, "script_get_max_skill_of_player_party", "skl_trade"),
		(assign, ":var_1", reg0),
		(assign, ":var_2", reg1),
		(assign, ":var_3", 0),
		(assign, ":value", -1),
		(assign, ":value_2", -1),
		(assign, ":value_3", 0),
		(assign, ":value_4", -1),
		(assign, ":value_5", -1),
		(assign, ":value_6", 0),
		(assign, ":value_7", -1),
		(assign, ":value_8", -1),
		(assign, ":value_9", 0),
		(assign, ":value_10", -1),
		(assign, ":value_11", -1),
		(assign, ":value_12", 0),
		(assign, ":value_13", -1),
		(assign, ":value_14", -1),
		(assign, ":value_15", 0),
		(store_sub, ":value_16", "p_village_1", "p_town_1"),
		(store_sub, ":value_17", "itm_trade_dummy01", "itm_trade_spice"),
		(store_mul, ":value_18", ":value_16", ":value_17"),
		(val_mul, ":value_18", ":var_1"),
		(val_div, ":value_18", 20),
		(assign, ":var_22", "$g_encountered_party"),
		(try_for_range, ":unused", 0, ":value_18"),
			(store_random_in_range, ":random_in_range_trade_spice_trade_dummy01", "itm_trade_spice", "itm_trade_dummy01"),
			(store_random_in_range, ":random_in_range_town_1_castle_1", "p_town_1", "p_castle_1"),
			(party_get_slot, ":var_22_town_merchant", ":var_22", slot_town_merchant),
			(assign, ":var_27", 0),
			(try_for_range, ":number", 10, 106),
				(troop_get_inventory_slot, ":inventory_slot_var_22_town_merchant_number", ":var_22_town_merchant", ":number"),
				(try_begin),
					(eq, ":inventory_slot_var_22_town_merchant_number", ":random_in_range_trade_spice_trade_dummy01"),
					(val_add, ":var_27", 1),
				(try_end),
			(try_end),
			(ge, ":var_27", 1),
			(assign, ":var_30", 0),
			(try_begin),
				(eq, ":random_in_range_trade_spice_trade_dummy01", ":value"),
				(eq, ":random_in_range_town_1_castle_1", ":value_2"),
				(val_add, ":var_30", 1),
			(try_end),
			(try_begin),
				(eq, ":random_in_range_trade_spice_trade_dummy01", ":value_4"),
				(eq, ":random_in_range_town_1_castle_1", ":value_5"),
				(val_add, ":var_30", 1),
			(try_end),
			(try_begin),
				(eq, ":random_in_range_trade_spice_trade_dummy01", ":value_7"),
				(eq, ":random_in_range_town_1_castle_1", ":value_8"),
				(val_add, ":var_30", 1),
			(try_end),
			(try_begin),
				(eq, ":random_in_range_trade_spice_trade_dummy01", ":value_10"),
				(eq, ":random_in_range_town_1_castle_1", ":value_11"),
				(val_add, ":var_30", 1),
			(try_end),
			(try_begin),
				(eq, ":random_in_range_trade_spice_trade_dummy01", ":value_13"),
				(eq, ":random_in_range_town_1_castle_1", ":value_14"),
				(val_add, ":var_30", 1),
			(try_end),
			(le, ":var_30", 1),
			(store_item_value, ":item_value_random_in_range_trade_spice_trade_dummy01", ":random_in_range_trade_spice_trade_dummy01"),
			(assign, "$g_encountered_party", ":var_22"),
			(call_script, "script_game_get_item_buy_price_factor", ":random_in_range_trade_spice_trade_dummy01"),
			(store_mul, ":value_19", ":item_value_random_in_range_trade_spice_trade_dummy01", reg0),
			(val_div, ":value_19", 100),
			(val_max, ":value_19", 1),
			(assign, "$g_encountered_party", ":random_in_range_town_1_castle_1"),
			(call_script, "script_game_get_item_sell_price_factor", ":random_in_range_trade_spice_trade_dummy01"),
			(store_mul, ":value_20", ":item_value_random_in_range_trade_spice_trade_dummy01", reg0),
			(val_div, ":value_20", 100),
			(val_max, ":value_20", 1),
			(store_sub, ":value_21", ":value_20", ":value_19"),
			(try_begin),
				(this_or_next|eq, ":value", ":random_in_range_trade_spice_trade_dummy01"),
				(this_or_next|eq, ":value_4", ":random_in_range_trade_spice_trade_dummy01"),
				(this_or_next|eq, ":value_7", ":random_in_range_trade_spice_trade_dummy01"),
				(this_or_next|eq, ":value_10", ":random_in_range_trade_spice_trade_dummy01"),
				(eq, ":value_13", ":random_in_range_trade_spice_trade_dummy01"),
				(try_begin),
					(eq, ":value", ":random_in_range_trade_spice_trade_dummy01"),
					(gt, ":value_21", ":value_3"),
					(assign, ":value", ":random_in_range_trade_spice_trade_dummy01"),
					(assign, ":value_2", ":random_in_range_town_1_castle_1"),
					(assign, ":value_3", ":value_21"),
				(else_try),
					(eq, ":value_4", ":random_in_range_trade_spice_trade_dummy01"),
					(gt, ":value_21", ":value_6"),
					(assign, ":value_4", ":random_in_range_trade_spice_trade_dummy01"),
					(assign, ":value_5", ":random_in_range_town_1_castle_1"),
					(assign, ":value_6", ":value_21"),
				(else_try),
					(eq, ":value_7", ":random_in_range_trade_spice_trade_dummy01"),
					(gt, ":value_21", ":value_9"),
					(assign, ":value_7", ":random_in_range_trade_spice_trade_dummy01"),
					(assign, ":value_8", ":random_in_range_town_1_castle_1"),
					(assign, ":value_9", ":value_21"),
				(else_try),
					(eq, ":value_10", ":random_in_range_trade_spice_trade_dummy01"),
					(gt, ":value_21", ":value_12"),
					(assign, ":value_10", ":random_in_range_trade_spice_trade_dummy01"),
					(assign, ":value_11", ":random_in_range_town_1_castle_1"),
					(assign, ":value_12", ":value_21"),
				(else_try),
					(eq, ":value_13", ":random_in_range_trade_spice_trade_dummy01"),
					(gt, ":value_21", ":value_15"),
					(assign, ":value_13", ":random_in_range_trade_spice_trade_dummy01"),
					(assign, ":value_14", ":random_in_range_town_1_castle_1"),
					(assign, ":value_15", ":value_21"),
				(try_end),
			(else_try),
				(try_begin),
					(gt, ":value_21", ":value_3"),
					(val_add, ":var_3", 1),
					(val_min, ":var_3", 5),
					(assign, ":value_13", ":value_10"),
					(assign, ":value_14", ":value_11"),
					(assign, ":value_15", ":value_12"),
					(assign, ":value_10", ":value_7"),
					(assign, ":value_11", ":value_8"),
					(assign, ":value_12", ":value_9"),
					(assign, ":value_7", ":value_4"),
					(assign, ":value_8", ":value_5"),
					(assign, ":value_9", ":value_6"),
					(assign, ":value_4", ":value"),
					(assign, ":value_5", ":value_2"),
					(assign, ":value_6", ":value_3"),
					(assign, ":value", ":random_in_range_trade_spice_trade_dummy01"),
					(assign, ":value_2", ":random_in_range_town_1_castle_1"),
					(assign, ":value_3", ":value_21"),
				(else_try),
					(gt, ":value_21", ":value_6"),
					(val_add, ":var_3", 1),
					(val_min, ":var_3", 5),
					(assign, ":value_13", ":value_10"),
					(assign, ":value_14", ":value_11"),
					(assign, ":value_15", ":value_12"),
					(assign, ":value_10", ":value_7"),
					(assign, ":value_11", ":value_8"),
					(assign, ":value_12", ":value_9"),
					(assign, ":value_7", ":value_4"),
					(assign, ":value_8", ":value_5"),
					(assign, ":value_9", ":value_6"),
					(assign, ":value_4", ":random_in_range_trade_spice_trade_dummy01"),
					(assign, ":value_5", ":random_in_range_town_1_castle_1"),
					(assign, ":value_6", ":value_21"),
				(else_try),
					(gt, ":value_21", ":value_9"),
					(val_add, ":var_3", 1),
					(val_min, ":var_3", 5),
					(assign, ":value_13", ":value_10"),
					(assign, ":value_14", ":value_11"),
					(assign, ":value_15", ":value_12"),
					(assign, ":value_10", ":value_7"),
					(assign, ":value_11", ":value_8"),
					(assign, ":value_12", ":value_9"),
					(assign, ":value_7", ":random_in_range_trade_spice_trade_dummy01"),
					(assign, ":value_8", ":random_in_range_town_1_castle_1"),
					(assign, ":value_9", ":value_21"),
				(else_try),
					(gt, ":value_21", ":value_12"),
					(val_add, ":var_3", 1),
					(val_min, ":var_3", 5),
					(assign, ":value_13", ":value_10"),
					(assign, ":value_14", ":value_11"),
					(assign, ":value_15", ":value_12"),
					(assign, ":value_10", ":random_in_range_trade_spice_trade_dummy01"),
					(assign, ":value_11", ":random_in_range_town_1_castle_1"),
					(assign, ":value_12", ":value_21"),
				(else_try),
					(gt, ":value_21", ":value_15"),
					(val_add, ":var_3", 1),
					(val_min, ":var_3", 5),
					(assign, ":value_13", ":value_10"),
					(assign, ":value_14", ":value_11"),
					(assign, ":value_15", ":value_12"),
				(try_end),
			(try_end),
		(try_end),
		(assign, "$g_encountered_party", ":var_22"),
		(str_clear, 3),
		(assign, reg2, ":var_1"),
		(try_begin),
			(eq, ":var_2", "trp_player"),
			(assign, reg3, 1),
		(else_try),
			(assign, reg3, 0),
			(str_store_troop_name, 1, ":var_2"),
		(try_end),
		(try_begin),
			(le, ":var_3", 0),
			(str_store_string, 2, "@However, {reg3?You are:{s1} is} unable to find any trade goods that would bring a profit."),
		(else_try),
			(try_begin),
				(ge, ":value_13", 0),
				(assign, reg6, ":value_15"),
				(str_store_item_name, 4, ":value_13"),
				(str_store_party_name, 5, ":value_14"),
				(str_store_string, 3, "@^Buying {s4} here and selling it at {s5} would bring a profit of {reg6} coins per item.{s3}"),
			(try_end),
			(try_begin),
				(ge, ":value_10", 0),
				(assign, reg6, ":value_12"),
				(str_store_item_name, 4, ":value_10"),
				(str_store_party_name, 5, ":value_11"),
				(str_store_string, 3, "@^Buying {s4} here and selling it at {s5} would bring a profit of {reg6} coins per item.{s3}"),
			(try_end),
			(try_begin),
				(ge, ":value_7", 0),
				(assign, reg6, ":value_9"),
				(str_store_item_name, 4, ":value_7"),
				(str_store_party_name, 5, ":value_8"),
				(str_store_string, 3, "@^Buying {s4} here and selling it at {s5} would bring a profit of {reg6} coins per item.{s3}"),
			(try_end),
			(try_begin),
				(ge, ":value_4", 0),
				(assign, reg6, ":value_6"),
				(str_store_item_name, 4, ":value_4"),
				(str_store_party_name, 5, ":value_5"),
				(str_store_string, 3, "@^Buying {s4} here and selling it at {s5} would bring a profit of {reg6} coins per item.{s3}"),
			(try_end),
			(try_begin),
				(ge, ":value", 0),
				(assign, reg6, ":value_3"),
				(str_store_item_name, 4, ":value"),
				(str_store_party_name, 5, ":value_2"),
				(str_store_string, 3, "@^Buying {s4} here and selling it at {s5} would bring a profit of {reg6} coins per item.{s3}"),
			(try_end),
			(try_begin),
				(gt, ":var_3", 0),
				(store_item_kind_count, reg0, "itm_book_trade_ledger"),
				(ge, reg0, 1),
				(assign, ":value_22", ":var_3"),
				(val_min, ":value_22", 3),
				(call_script, "script_trade_ledger_write", ":value_22", "trp_player", ":value", ":value_2", ":value_3", ":value_4", ":value_5", ":value_6", ":value_7", ":value_8", ":value_9"),
				(gt, ":var_3", ":value_22"),
				(store_sub, ":value_22", ":var_3", ":value_22"),
				(call_script, "script_trade_ledger_write", ":value_22", "trp_player", ":value_10", ":value_11", ":value_12", ":value_13", ":value_14", ":value_15"),
			(try_end),
			(try_begin),
				(troop_slot_ge, "trp_player", 155, 1),
				(troop_get_slot, ":player_155", "trp_player", 155),
				(call_script, "script_cf_array_is_array", ":player_155"),
				(call_script, "script_array_get_size", ":player_155"),
				(gt, reg0, 5),
				(assign, ":var_37", reg0),
				(try_for_range, ":number_2", 5, ":var_37"),
					(call_script, "script_cf_array_get_element", ":player_155", ":number_2"),
					(is_between, reg0, "itm_trade_spice", "itm_trade_dummy01"),
					(neq, ":value", reg0),
					(neq, ":value_4", reg0),
					(neq, ":value_7", reg0),
					(neq, ":value_10", reg0),
					(neq, ":value_13", reg0),
					(assign, ":var_39", reg0),
					(party_get_slot, ":current_town_town_merchant", "$current_town", slot_town_merchant),
					(store_item_kind_count, reg0, ":var_39", ":current_town_town_merchant"),
					(ge, reg0, 1),
					(store_mul, ":value_18", ":value_16", ":var_1"),
					(val_div, ":value_18", 10),
					(assign, ":value_23", 0),
					(assign, ":value_24", -1),
					(try_for_range, ":unused", 0, ":value_18"),
						(store_random_in_range, ":random_in_range_town_1_castle_1", "p_town_1", "p_castle_1"),
						(neq, ":random_in_range_town_1_castle_1", ":value_24"),
						(store_item_value, ":item_value_var_39", ":var_39"),
						(assign, "$g_encountered_party", ":var_22"),
						(call_script, "script_game_get_item_buy_price_factor", ":var_39"),
						(store_mul, ":value_25", ":item_value_var_39", reg0),
						(val_div, ":value_25", 100),
						(val_max, ":value_25", 1),
						(assign, "$g_encountered_party", ":random_in_range_town_1_castle_1"),
						(call_script, "script_game_get_item_sell_price_factor", ":var_39"),
						(store_mul, ":value_26", ":item_value_var_39", reg0),
						(val_div, ":value_26", 100),
						(val_max, ":value_26", 1),
						(store_sub, ":value_21", ":value_26", ":value_25"),
						(gt, ":value_21", ":value_23"),
						(assign, ":value_24", ":random_in_range_town_1_castle_1"),
						(assign, ":value_23", ":value_21"),
					(try_end),
					(neq, ":value_24", -1),
					(str_store_item_name, 4, ":var_39"),
					(str_store_party_name, 5, ":value_24"),
					(str_store_string, 3, "@^Buying {s4} here and selling it at {s5} would bring a profit of {reg6} coins per item.{s3}"),
					(call_script, "script_trade_ledger_write", 1, "trp_player", ":var_39", ":value_24", ":value_23"),
				(try_end),
				(assign, "$g_encountered_party", ":var_22"),
			(try_end),
			(str_store_string, 2, "@{reg3?You find:{s1} finds} out the following:^{s3}"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_town_trade")
		], ".")
	]
	),

	("sneak_into_town_suceeded", 0, "Disguised in the garments of a poor pilgrim, you fool the guards and make your way into the town.",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$sneaked_into_town", 1),
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("sneak_into_town_caught", 0, "As you try to sneak in, one of the guards recognizes you and raises the alarm! You must flee back through the gates before all the guards in the town come down on you!",
	"none",
	[
		(assign, "$auto_menu", "mnu_captivity_start_castle_surrender")
	],
	[
		("sneak_caught_fight",
		[],
		"Try to fight your way out!",
		[
			(assign, "$all_doors_locked", 1),
			(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
			(modify_visitors_at_site, ":current_town_town_center"),
			(reset_visitors),
			(try_begin),
				(this_or_next|eq, "$talk_context", 19),
				(eq, "$talk_context", 18),
				(set_jump_entry, 7),
			(else_try),
				(party_slot_eq, "$current_town", slot_party_type, 3),
				(set_jump_entry, 0),
			(else_try),
				(set_jump_entry, 1),
			(try_end),
			(set_jump_mission, "mt_sneak_caught_fight"),
			(set_passage_menu, "mnu_town"),
			(jump_to_scene, ":current_town_town_center"),
			(change_screen_mission)
		], "."),

		("sneak_caught_surrender",
		[],
		"Surrender.",
		[
			(jump_to_menu, "mnu_captivity_start_castle_surrender")
		], ".")
	]
	),

	("sneak_into_town_caught_dispersed_guards", 0, "You drive off the guards and cover your trail before running off, easily losing your pursuers in the maze of streets.",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$sneaked_into_town", 1),
			(assign, "$town_entered", 1),
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("sneak_into_town_caught_ran_away", 0, "You make your way back through the gates and quickly retreat to the safety of the countryside.{s11}",
	"none",
	[
		(str_clear, 11),
		(assign, ":value", 0),
		(assign, ":value_2", "trp_heroes_end"),
		(try_for_range, ":troop", "trp_npc1", ":value_2"),
			(try_begin),
				(troop_slot_eq, ":troop", slot_troop_mission_participation, 4),
				(assign, "$talk_context", 8),
				(assign, reg14, ":troop"),
				(call_script, "script_setup_troop_meeting", ":troop", -1),
				(troop_set_slot, ":troop", slot_troop_mission_participation, -1),
				(troop_get_slot, ":troop_prisoner_of_party", ":troop", slot_troop_prisoner_of_party),
				(party_remove_prisoners, ":troop_prisoner_of_party", ":troop", 1),
				(troop_set_slot, ":troop", slot_troop_prisoner_of_party, -1),
				(assign, ":value_2", -1),
			(else_try),
				(troop_slot_eq, ":troop", slot_troop_mission_participation, 5),
				(str_store_troop_name, 12, ":troop"),
				(try_begin),
					(eq, ":value", 0),
					(str_store_string, 11, "str_s11_unfortunately_s12_was_wounded_and_had_to_be_left_behind"),
				(else_try),
					(str_store_string, 11, "str_s11_also_s12_was_wounded_and_had_to_be_left_behind"),
				(try_end),
				(assign, ":value", 1),
			(try_end),
			(troop_set_slot, ":troop", slot_troop_mission_participation, 0),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$auto_menu", -1),
			(store_encountered_party, "$last_sneak_attempt_town"),
			(store_current_hours, "$last_sneak_attempt_time"),
			(change_screen_return)
		], ".")
	]
	),

	("enemy_offer_ransom_for_prisoner", 0, "{s2} offers you a sum of {reg12} coins in silver if you are willing to sell them {s1}.",
	"none",
	[
		(call_script, "script_calculate_ransom_amount_for_troop", "$g_ransom_offer_troop"),
		(assign, reg12, reg0),
		(str_store_troop_name, 1, "$g_ransom_offer_troop"),
		(store_faction_of_troop, ":faction_of_troop_g_ransom_offer_troop", "$g_ransom_offer_troop"),
		(str_store_faction_name, 2, ":faction_of_troop_g_ransom_offer_troop")
	],
	[
		("ransom_accept",
		[],
		"Accept the offer.",
		[
			(try_begin),
				(gt, "$g_player_chamberlain", 0),
				(call_script, "script_dplmc_pay_into_treasury", reg12),
			(else_try),
				(troop_add_gold, "trp_player", reg12),
			(try_end),
			(assign, ":var_1", reg12),
			(assign, ":value", "$g_ransom_offer_troop"),
			(store_faction_of_troop, ":faction_of_troop_g_ransom_offer_troop", "$g_ransom_offer_troop"),
			(try_begin),
				(is_between, "$g_ransom_offer_troop", "trp_knight_1_1_wife", "trp_heroes_end"),
				(neg|troop_slot_eq, "$g_ransom_offer_troop", slot_troop_occupation, 2),
				(neg|troop_slot_ge, "$g_ransom_offer_troop", 11, 1),
				(try_begin),
					(troop_get_slot, ":g_ransom_offer_troop_spouse", "$g_ransom_offer_troop", slot_troop_spouse),
					(this_or_next|is_between, ":g_ransom_offer_troop_spouse", "trp_npc1", "trp_knight_1_1_wife"),
					(troop_slot_eq, ":g_ransom_offer_troop_spouse", slot_troop_occupation, 2),
					(store_faction_of_troop, ":faction_of_troop_g_ransom_offer_troop_spouse", ":g_ransom_offer_troop_spouse"),
					(eq, ":faction_of_troop_g_ransom_offer_troop", ":faction_of_troop_g_ransom_offer_troop_spouse"),
					(neg|troop_slot_ge, ":g_ransom_offer_troop_spouse", 2, 11),
					(assign, ":value", ":g_ransom_offer_troop_spouse"),
				(else_try),
					(troop_get_slot, ":g_ransom_offer_troop_spouse", "$g_ransom_offer_troop", slot_troop_father),
					(this_or_next|is_between, ":g_ransom_offer_troop_spouse", "trp_npc1", "trp_knight_1_1_wife"),
					(troop_slot_eq, ":g_ransom_offer_troop_spouse", slot_troop_occupation, 2),
					(store_faction_of_troop, ":faction_of_troop_g_ransom_offer_troop_spouse", ":g_ransom_offer_troop_spouse"),
					(eq, ":faction_of_troop_g_ransom_offer_troop", ":faction_of_troop_g_ransom_offer_troop_spouse"),
					(neg|troop_slot_ge, ":g_ransom_offer_troop_spouse", 2, 11),
					(assign, ":value", ":g_ransom_offer_troop_spouse"),
				(else_try),
					(troop_get_slot, ":g_ransom_offer_troop_spouse", "$g_ransom_offer_troop", slot_troop_guardian),
					(this_or_next|is_between, ":g_ransom_offer_troop_spouse", "trp_npc1", "trp_knight_1_1_wife"),
					(troop_slot_eq, ":g_ransom_offer_troop_spouse", slot_troop_occupation, 2),
					(store_faction_of_troop, ":faction_of_troop_g_ransom_offer_troop_spouse", ":g_ransom_offer_troop_spouse"),
					(eq, ":faction_of_troop_g_ransom_offer_troop", ":faction_of_troop_g_ransom_offer_troop_spouse"),
					(neg|troop_slot_ge, ":g_ransom_offer_troop_spouse", 2, 11),
					(assign, ":value", ":g_ransom_offer_troop_spouse"),
				(else_try),
					(troop_get_slot, ":g_ransom_offer_troop_spouse", "$g_ransom_offer_troop", slot_troop_mother),
					(this_or_next|is_between, ":g_ransom_offer_troop_spouse", "trp_npc1", "trp_knight_1_1_wife"),
					(troop_slot_eq, ":g_ransom_offer_troop_spouse", slot_troop_occupation, 2),
					(store_faction_of_troop, ":faction_of_troop_g_ransom_offer_troop_spouse", ":g_ransom_offer_troop_spouse"),
					(eq, ":faction_of_troop_g_ransom_offer_troop", ":faction_of_troop_g_ransom_offer_troop_spouse"),
					(neg|troop_slot_ge, ":g_ransom_offer_troop_spouse", 2, 11),
					(assign, ":value", ":g_ransom_offer_troop_spouse"),
				(try_end),
			(try_end),
			(try_begin),
				(ge, ":var_1", 0),
				(ge, ":value", 1),
				(troop_is_hero, ":value"),
				(game_get_reduce_campaign_ai, ":game_reduce_campaign_ai"),
				(try_begin),
					(eq, ":game_reduce_campaign_ai", 0),
					(val_div, ":var_1", 2),
				(else_try),
					(eq, ":game_reduce_campaign_ai", 1),
					(val_mul, ":var_1", 3),
					(val_div, ":var_1", 4),
				(try_end),
				(call_script, "script_dplmc_remove_gold_from_lord_and_holdings", ":var_1", ":value"),
			(try_end),
			(party_remove_prisoners, "$g_ransom_offer_party", "$g_ransom_offer_troop", 1),
			(call_script, "script_remove_troop_from_prison", "$g_ransom_offer_troop"),
			(try_begin),
				(troop_get_type, ":type_player", "trp_player"),
				(eq, ":type_player", 1),
				(get_achievement_stat, ":achievement_stat_75_1", 75, 1),
				(val_add, ":achievement_stat_75_1", 1),
				(set_achievement_stat, 75, 1, ":achievement_stat_75_1"),
				(eq, ":achievement_stat_75_1", 3),
				(unlock_achievement, 75),
			(try_end),
			(change_screen_return)
		], "."),

		("ransom_reject",
		[],
		"Reject the offer.",
		[
			(try_begin),
				(troop_slot_eq, "$g_ransom_offer_troop", slot_lord_reputation_type, 2),
				(call_script, "script_change_player_relation_with_troop", "$g_ransom_offer_troop", -6),
			(else_try),
				(troop_slot_eq, "$g_ransom_offer_troop", slot_lord_reputation_type, 5),
				(call_script, "script_change_player_relation_with_troop", "$g_ransom_offer_troop", -5),
			(else_try),
				(call_script, "script_change_player_relation_with_troop", "$g_ransom_offer_troop", -4),
			(try_end),
			(call_script, "script_change_player_honor", -1),
			(assign, "$g_ransom_offer_rejected", 1),
			(assign, ":var_1", reg0),
			(store_faction_of_troop, ":faction_of_troop_g_ransom_offer_troop", "$g_ransom_offer_troop"),
			(try_begin),
				(is_between, "$g_ransom_offer_troop", "trp_knight_1_1_wife", "trp_heroes_end"),
				(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
				(assign, ":var_3", reg0),
				(store_faction_of_troop, ":faction_of_troop_g_ransom_offer_troop", ":var_3"),
				(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
					(troop_slot_ge, ":troop", 2, 2),
					(neg|troop_slot_ge, ":troop", 2, 9),
					(neq, "$g_ransom_offer_troop", ":troop"),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(assign, ":value", 20),
					(try_begin),
						(neq, ":faction_of_troop_troop", ":faction_of_troop_g_ransom_offer_troop"),
						(neg|is_between, ":troop", "trp_knight_1_1_wife", "trp_heroes_end"),
						(assign, ":value", 40),
					(try_end),
					(assign, ":value_2", 0),
					(try_begin),
						(this_or_next|troop_slot_eq, ":troop", slot_troop_spouse, "$g_ransom_offer_troop"),
						(this_or_next|troop_slot_eq, "$g_ransom_offer_troop", slot_troop_spouse, ":troop"),
						(eq, ":var_3", ":troop"),
						(assign, ":value_2", -4),
					(else_try),
						(eq, ":troop", 34, "$g_ransom_offer_troop"),
						(assign, ":value_2", -4),
					(else_try),
						(call_script, "script_troop_get_family_relation_to_troop", "$g_ransom_offer_troop", ":troop"),
						(ge, reg0, 14),
						(assign, ":value_2", -3),
					(else_try),
						(ge, reg0, 10),
						(assign, ":value_2", -2),
					(else_try),
						(ge, reg0, 2),
						(assign, ":value_2", -1),
					(else_try),
						(call_script, "script_troop_get_relation_with_troop", ":troop", "$g_ransom_offer_troop"),
						(ge, reg0, ":value"),
						(this_or_next|is_between, ":troop", "trp_knight_1_1_wife", "trp_heroes_end"),
						(eq, ":faction_of_troop_troop", ":faction_of_troop_g_ransom_offer_troop"),
						(assign, ":value_2", -1),
					(else_try),
						(ge, ":var_3", 1),
						(call_script, "script_troop_get_relation_with_troop", ":troop", ":var_3"),
						(ge, reg0, ":value"),
						(assign, ":value_2", -1),
					(try_end),
					(lt, ":value_2", 0),
					(try_begin),
						(troop_slot_eq, ":troop", slot_lord_reputation_type, 2),
						(val_mul, ":value_2", 3),
						(val_sub, ":value_2", 1),
						(val_div, ":value_2", 2),
					(try_end),
					(call_script, "script_change_player_relation_with_troop", ":troop", ":value_2"),
				(try_end),
			(else_try),
				(is_between, "$g_ransom_offer_troop", "trp_npc1", "trp_knight_1_1_wife"),
				(try_for_range, ":troop_2", "trp_npc1", "trp_heroes_end"),
					(this_or_next|is_between, ":troop_2", "trp_npc1", "trp_knight_1_1_wife"),
					(troop_slot_eq, ":troop_2", slot_troop_occupation, 2),
					(neg|troop_slot_eq, ":troop_2", slot_troop_occupation, 15),
					(neg|troop_slot_ge, ":troop_2", 2, 11),
					(neq, ":troop_2", "$g_ransom_offer_troop"),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop_2"),
					(assign, ":value_2", 0),
					(call_script, "script_troop_get_family_relation_to_troop", "$g_ransom_offer_troop", ":troop_2"),
					(try_begin),
						(ge, reg0, 10),
						(assign, ":value_2", -1),
					(try_end),
					(call_script, "script_troop_get_relation_with_troop", ":troop_2", "$g_ransom_offer_troop"),
					(try_begin),
						(ge, reg0, 20),
						(eq, ":faction_of_troop_troop", ":faction_of_troop_g_ransom_offer_troop"),
						(val_sub, ":value_2", 1),
					(else_try),
						(ge, reg0, 40),
						(val_sub, ":value_2", 1),
					(else_try),
						(lt, reg0, 0),
						(assign, ":value_2", 0),
					(try_end),
					(lt, ":value_2", 0),
					(try_begin),
						(troop_slot_eq, ":troop_2", slot_lord_reputation_type, 2),
						(val_mul, ":value_2", 3),
						(val_sub, ":value_2", 1),
						(val_div, ":value_2", 2),
					(try_end),
					(call_script, "script_change_player_relation_with_troop", ":troop_2", ":value_2"),
				(try_end),
				(try_for_range, ":troop_3", "trp_knight_1_1_wife", "trp_heroes_end"),
					(neg|troop_slot_eq, ":troop_3", slot_troop_occupation, 2),
					(neg|troop_slot_eq, ":troop_3", slot_troop_occupation, 15),
					(neg|troop_slot_ge, ":troop_3", 2, 11),
					(neq, ":troop_3", "$g_ransom_offer_troop"),
					(assign, ":value_2", 0),
					(call_script, "script_troop_get_family_relation_to_troop", ":troop_3", "$g_ransom_offer_troop"),
					(try_begin),
						(ge, reg0, 14),
						(assign, ":value_2", -3),
					(else_try),
						(ge, reg0, 10),
						(assign, ":value_2", -2),
					(else_try),
						(ge, reg0, 2),
						(assign, ":value_2", -1),
					(else_try),
						(call_script, "script_troop_get_relation_with_troop", ":troop_3", "$g_ransom_offer_troop"),
						(ge, reg0, 20),
						(assign, ":value_2", -1),
					(try_end),
					(lt, ":value_2", 0),
					(call_script, "script_change_player_relation_with_troop", ":troop_3", ":value_2"),
				(try_end),
			(try_end),
			(assign, reg0, ":var_1"),
			(change_screen_return)
		], ".")
	]
	),

	("training_ground", 0, "You approach a training field where you can practice your martial skills. What kind of training do you want to do?",
	"none",
	[
		(store_add, "$g_training_ground_melee_training_scene", "scn_training_ground_ranged_melee_1", "$g_encountered_party"),
		(val_sub, "$g_training_ground_melee_training_scene", "p_training_ground_1"),
		(try_begin),
			(ge, "$g_training_ground_training_count", 3),
			(assign, "$g_training_ground_training_count", 0),
			(rest_for_hours, 1, 5, 1),
			(assign, "$auto_enter_town", "$g_encountered_party"),
			(change_screen_return),
		(try_end)
	],
	[
		("camp_trainer",
		[],
		"Speak with the trainer.",
		[
			(set_jump_mission, "mt_training_ground_trainer_talk"),
			(modify_visitors_at_site, "$g_training_ground_melee_training_scene"),
			(reset_visitors),
			(set_jump_entry, 5),
			(jump_to_scene, "$g_training_ground_melee_training_scene"),
			(change_screen_mission),
			(music_set_situation, 0)
		], "."),

		("camp_train_melee",
		[
			(neg|troop_is_wounded, "trp_player"),
			(call_script, "script_party_count_fit_for_battle", "p_main_party"),
			(gt, reg0, 1)
		],
		"Sparring practice.",
		[
			(assign, "$g_mt_mode", 1),
			(jump_to_menu, "mnu_training_ground_selection_details_melee_1"),
			(music_set_situation, 0)
		], "."),

		("camp_train_archery",
		[],
		"Ranged weapon practice.",
		[
			(jump_to_menu, "mnu_training_ground_selection_details_ranged_1"),
			(music_set_situation, 0)
		], "."),

		("camp_train_mounted",
		[],
		"Horseback practice.",
		[
			(assign, "$g_mt_mode", 3),
			(jump_to_menu, "mnu_training_ground_selection_details_mounted"),
			(music_set_situation, 0)
		], "."),

		("go_to_track",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}Cheat: Go to track.",
		[
			(set_jump_mission, "mt_ai_training"),
			(store_add, ":value", "scn_training_ground_horse_track_1", "$g_encountered_party"),
			(val_sub, ":value", "p_training_ground_1"),
			(jump_to_scene, ":value"),
			(change_screen_mission)
		], "."),

		("go_to_range",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}Cheat: Go to range.",
		[
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, "$g_training_ground_melee_training_scene"),
			(change_screen_mission)
		], "."),

		("leave",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("training_ground_selection_details_melee_1", 0, "How many opponents will you go against?",
	"none",
	[
		(call_script, "script_write_fit_party_members_to_stack_selection", "p_main_party", 1),
		(troop_get_slot, "$temp", "trp_stack_selection_amounts", 1),
		(assign, "$temp_2", 1)
	],
	[
		("camp_train_melee_num_men_1",
		[
			(ge, "$temp", 1)
		],
		"One.",
		[
			(assign, "$temp", 1),
			(jump_to_menu, "mnu_training_ground_selection_details_melee_2")
		], "."),

		("camp_train_melee_num_men_2",
		[
			(ge, "$temp", 2)
		],
		"Two.",
		[
			(assign, "$temp", 2),
			(jump_to_menu, "mnu_training_ground_selection_details_melee_2")
		], "."),

		("camp_train_melee_num_men_3",
		[
			(ge, "$temp", 3)
		],
		"Three.",
		[
			(assign, "$temp", 3),
			(jump_to_menu, "mnu_training_ground_selection_details_melee_2")
		], "."),

		("camp_train_melee_num_men_4",
		[
			(ge, "$temp", 4)
		],
		"Four.",
		[
			(assign, "$temp", 4),
			(jump_to_menu, "mnu_training_ground_selection_details_melee_2")
		], "."),

		("go_back_dot",
		[],
		"Cancel.",
		[
			(jump_to_menu, "mnu_training_ground")
		], ".")
	]
	),

	("training_ground_selection_details_melee_2", 0, "Choose your opponent #{reg1}:",
	"none",
	[
		(assign, reg1, "$temp_2"),
		(troop_get_slot, "$temp_3", "trp_stack_selection_amounts", slot_troop_relations_begin)
	],
	[
		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 1)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 1)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 2)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 2)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 3)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 3)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 4)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 4)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 5)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 5)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 6)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 6)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 7)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 7)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 8)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 8)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 9)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 9)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 10)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 10)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 11)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 11)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 12)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 12)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 13)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 13)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 14)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 14)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 15)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 15)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 16)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 16)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 17)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 17)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 18)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 18)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 19)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 19)
		], "."),

		("s0",
		[
			(call_script, "script_cf_training_ground_sub_routine_1_for_melee_details", 20)
		],
		"{s0}",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", 20)
		], "."),

		("training_ground_selection_details_melee_random",
		[],
		"Choose randomly.",
		[
			(call_script, "script_training_ground_sub_routine_2_for_melee_details", -1)
		], "."),

		("go_back_dot",
		[],
		"Go back.",
		[
			(jump_to_menu, "mnu_training_ground")
		], ".")
	]
	),

	("training_ground_selection_details_mounted", 0, "What kind of weapon do you want to train with?",
	"none",
	[],
	[
		("camp_train_mounted_details_1",
		[],
		"One handed weapon.",
		[
			(call_script, "script_start_training_at_training_ground", 2, 0)
		], "."),

		("camp_train_mounted_details_2",
		[],
		"Polearm.",
		[
			(call_script, "script_start_training_at_training_ground", 4, 0)
		], "."),

		("camp_train_mounted_details_3",
		[],
		"Bow.",
		[
			(call_script, "script_start_training_at_training_ground", 8, 0)
		], "."),

		("camp_train_mounted_details_4",
		[],
		"Thrown weapon.",
		[
			(call_script, "script_start_training_at_training_ground", 10, 0)
		], "."),

		("go_back_dot",
		[],
		"Go back.",
		[
			(jump_to_menu, "mnu_training_ground")
		], ".")
	]
	),

	("training_ground_selection_details_ranged_1", 0, "What kind of ranged weapon do you want to train with?",
	"none",
	[],
	[
		("camp_train_ranged_weapon_bow",
		[],
		"Bow and arrows.",
		[
			(assign, "$g_mt_mode", 2),
			(assign, "$temp", 8),
			(jump_to_menu, "mnu_training_ground_selection_details_ranged_2")
		], "."),

		("camp_train_ranged_weapon_crossbow",
		[],
		"Crossbow.",
		[
			(assign, "$g_mt_mode", 2),
			(assign, "$temp", 9),
			(jump_to_menu, "mnu_training_ground_selection_details_ranged_2")
		], "."),

		("camp_train_ranged_weapon_thrown",
		[],
		"Throwing Knives.",
		[
			(assign, "$g_mt_mode", 2),
			(assign, "$temp", 10),
			(jump_to_menu, "mnu_training_ground_selection_details_ranged_2")
		], "."),

		("go_back_dot",
		[],
		"Go back.",
		[
			(jump_to_menu, "mnu_training_ground")
		], ".")
	]
	),

	("training_ground_selection_details_ranged_2", 0, "What range do you want to practice at?",
	"none",
	[],
	[
		("camp_train_ranged_details_1",
		[],
		"10 yards.",
		[
			(call_script, "script_start_training_at_training_ground", "$temp", 10)
		], "."),

		("camp_train_ranged_details_2",
		[],
		"20 yards.",
		[
			(call_script, "script_start_training_at_training_ground", "$temp", 20)
		], "."),

		("camp_train_ranged_details_3",
		[],
		"30 yards.",
		[
			(call_script, "script_start_training_at_training_ground", "$temp", 30)
		], "."),

		("camp_train_ranged_details_4",
		[],
		"40 yards.",
		[
			(call_script, "script_start_training_at_training_ground", "$temp", 40)
		], "."),

		("camp_train_ranged_details_5",
		[
			(eq, "$g_mt_mode", 2)
		],
		"50 yards.",
		[
			(call_script, "script_start_training_at_training_ground", "$temp", 50)
		], "."),

		("camp_train_ranged_details_6",
		[
			(eq, "$g_mt_mode", 2)
		],
		"60 yards.",
		[
			(call_script, "script_start_training_at_training_ground", "$temp", 60)
		], "."),

		("camp_train_ranged_details_7",
		[
			(eq, "$g_mt_mode", 2)
		],
		"70 yards.",
		[
			(call_script, "script_start_training_at_training_ground", "$temp", 70)
		], "."),

		("go_back_dot",
		[],
		"Go back.",
		[
			(jump_to_menu, "mnu_training_ground")
		], ".")
	]
	),

	("training_ground_description", 0, "{s0}",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_scene, "$g_training_ground_training_scene"),
			(change_screen_mission)
		], ".")
	]
	),

	("training_ground_training_result", mnf_disable_all_keys, "{s7}{s2}",
	"none",
	[
		(store_skill_level, ":skill_level_trainer_player", "skl_trainer", "trp_player"),
		(store_add, ":value", 5, ":skill_level_trainer_player"),
		(call_script, "script_write_fit_party_members_to_stack_selection", "p_main_party", 1),
		(str_clear, 2),
		(troop_get_slot, ":stack_selection_amounts_1", "trp_stack_selection_amounts", 1),
		(troop_get_slot, ":stack_selection_amounts_relations_begin", "trp_stack_selection_amounts", slot_troop_relations_begin),
		(try_begin),
			(gt, "$g_training_ground_training_success_ratio", 0),
			(store_mul, ":value_2", "$g_training_ground_training_success_ratio", "$g_training_ground_training_success_ratio"),
			(try_begin),
				(eq, "$g_training_ground_training_success_ratio", 100),
				(val_mul, ":value_2", 2),
			(try_end),
			(try_begin),
				(eq, "$g_mt_mode", 1),
				(val_div, ":value_2", 2),
			(try_end),
			(val_div, ":value_2", 10),
			(try_begin),
				(gt, ":stack_selection_amounts_1", 8),
				(val_mul, ":value_2", 3),
				(assign, ":value_3", ":stack_selection_amounts_1"),
				(convert_to_fixed_point, ":value_3"),
				(store_sqrt, ":value_3", ":value_3"),
				(convert_to_fixed_point, ":value_2"),
				(val_div, ":value_2", ":value_3"),
			(try_end),
			(store_mul, ":value_4", ":value_2", ":value"),
			(val_div, ":value_4", 10),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(store_add, ":value_5", ":stack_selection_amounts_relations_begin", 2),
			(try_for_range, ":number", 2, ":value_5"),
				(troop_get_slot, ":stack_selection_amounts_number", "trp_stack_selection_amounts", ":number"),
				(troop_get_slot, ":stack_selection_ids_number", "trp_stack_selection_ids", ":number"),
				(assign, ":value_6", ":num_companion_stacks_main_party"),
				(try_for_range, ":number_2", 0, ":value_6"),
					(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number_2", "p_main_party", ":number_2"),
					(eq, ":party_stack_troop_id_main_party_number_2", ":stack_selection_ids_number"),
					(assign, ":value_6", 0),
					(call_script, "script_cf_training_ground_sub_routine_for_training_result", ":stack_selection_ids_number", ":number_2", ":stack_selection_amounts_number", ":value_4"),
					(str_store_troop_name_by_count, 1, ":stack_selection_ids_number", ":stack_selection_amounts_number"),
					(assign, reg1, ":stack_selection_amounts_number"),
					(str_store_string, 2, "@{s2}^{reg1} {s1} earned {reg0} experience."),
				(try_end),
			(try_end),
			(try_begin),
				(eq, "$g_mt_mode", 1),
				(store_mul, ":value_7", ":value_2", 3),
				(val_div, ":value_7", 2),
				(try_for_range, ":number_3", 0, "$g_training_ground_training_num_enemies"),
					(troop_get_slot, ":stack_selection_ids_number", "trp_temp_array_a", ":number_3"),
					(assign, ":value_6", ":num_companion_stacks_main_party"),
					(try_for_range, ":number_2", 0, ":value_6"),
						(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number_2", "p_main_party", ":number_2"),
						(eq, ":party_stack_troop_id_main_party_number_2", ":stack_selection_ids_number"),
						(assign, ":value_6", 0),
						(call_script, "script_cf_training_ground_sub_routine_for_training_result", ":stack_selection_ids_number", ":number_2", 1, ":value_7"),
						(str_store_troop_name, 1, ":stack_selection_ids_number"),
						(str_store_string, 2, "@{s2}^{s1} earned an additional {reg0} experience."),
					(try_end),
				(try_end),
			(try_end),
			(try_begin),
				(call_script, "script_cf_training_ground_sub_routine_for_training_result", "trp_player", -1, 1, ":value_2"),
				(str_store_string, 2, "@^You earned {reg0} experience.{s2}"),
			(try_end),
		(try_end),
		(try_begin),
			(eq, "$g_training_ground_training_success_ratio", 0),
			(str_store_string, 7, "@The training didn't go well at all."),
		(else_try),
			(lt, "$g_training_ground_training_success_ratio", 25),
			(str_store_string, 7, "@The training didn't go well at all."),
		(else_try),
			(lt, "$g_training_ground_training_success_ratio", 50),
			(str_store_string, 7, "@The training didn't go very well."),
		(else_try),
			(lt, "$g_training_ground_training_success_ratio", 75),
			(str_store_string, 7, "@The training went quite well."),
		(else_try),
			(lt, "$g_training_ground_training_success_ratio", 99),
			(str_store_string, 7, "@The training went very well."),
		(else_try),
			(str_store_string, 7, "@The training went perfectly."),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_training_ground")
		], ".")
	]
	),

	("marshall_selection_candidate_ask", 0, "{s15} will soon select a new marshall for {s23}. Some of the lords have suggested your name as a likely candidate.",
	"none",
	[
		(try_begin),
			(eq, "$g_presentation_marshall_selection_ended", 1),
			(change_screen_return),
		(try_end),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(str_store_troop_name, 15, ":players_kingdom_leader"),
		(str_store_faction_name, 23, "$players_kingdom")
	],
	[
		("marshall_candidate_accept",
		[],
		"Let {s15} learn that you are willing to serve as marshall.",
		[
			(start_presentation, "prsnt_marshall_selection")
		], "."),

		("marshall_candidate_reject",
		[],
		"Tell everyone that you are too busy these days.",
		[
			(try_begin),
				(eq, "$g_presentation_marshall_selection_max_renown_2_troop", "trp_player"),
				(assign, "$g_presentation_marshall_selection_max_renown_2", "$g_presentation_marshall_selection_max_renown_3"),
				(assign, "$g_presentation_marshall_selection_max_renown_2_troop", "$g_presentation_marshall_selection_max_renown_3_troop"),
			(else_try),
				(assign, "$g_presentation_marshall_selection_max_renown_1", "$g_presentation_marshall_selection_max_renown_2"),
				(assign, "$g_presentation_marshall_selection_max_renown_1_troop", "$g_presentation_marshall_selection_max_renown_2_troop"),
				(assign, "$g_presentation_marshall_selection_max_renown_2", "$g_presentation_marshall_selection_max_renown_3"),
				(assign, "$g_presentation_marshall_selection_max_renown_2_troop", "$g_presentation_marshall_selection_max_renown_3_troop"),
			(try_end),
			(start_presentation, "prsnt_marshall_selection")
		], ".")
	]
	),

	("captivity_avoid_wilderness", 0, "Suddenly all the world goes black around you. Many hours later you regain your conciousness and find yourself at the spot you fell. Your enemies must have taken you up for dead and left you there. However, it seems that none of your wound were lethal, and altough you feel awful, you find out that can still walk. You get up and try to look for any other survivors from your party.",
	"none",
	[],
	[]
	),

	("captivity_start_wilderness", 0, "Stub",
	"none",
	[
		(assign, "$g_player_is_captive", 1),
		(try_begin),
			(eq, "$g_player_surrenders", 1),
			(jump_to_menu, "mnu_captivity_start_wilderness_surrender"),
		(else_try),
			(jump_to_menu, "mnu_captivity_start_wilderness_defeat"),
		(try_end)
	],
	[]
	),

	("captivity_start_wilderness_surrender", 0, "Stub",
	"none",
	[
		(assign, "$g_player_is_captive", 1),
		(assign, "$auto_menu", -1),
		(assign, "$capturer_party", "$g_encountered_party"),
		(jump_to_menu, "mnu_captivity_wilderness_taken_prisoner")
	],
	[]
	),

	("captivity_start_wilderness_defeat", 0, "Your enemies take you prisoner.",
	"none",
	[
		(assign, "$g_player_is_captive", 1),
		(assign, "$auto_menu", -1),
		(assign, "$capturer_party", "$g_encountered_party"),
		(try_begin),
			(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_0", "$g_encountered_party", 0),
			(is_between, ":party_stack_troop_id_g_encountered_party_0", "trp_npc1", "trp_knight_1_1_wife"),
			(troop_slot_eq, ":party_stack_troop_id_g_encountered_party_0", slot_troop_occupation, 2),
			(store_sub, ":value", ":party_stack_troop_id_g_encountered_party_0", "trp_npc1"),
			(set_achievement_stat, 7, ":value", 1),
		(try_end),
		(jump_to_menu, "mnu_captivity_wilderness_taken_prisoner")
	],
	[]
	),

	("captivity_start_castle_surrender", 0, "Stub",
	"none",
	[
		(assign, "$g_player_is_captive", 1),
		(assign, "$auto_menu", -1),
		(assign, "$capturer_party", "$g_encountered_party"),
		(jump_to_menu, "mnu_captivity_castle_taken_prisoner")
	],
	[]
	),

	("captivity_start_castle_defeat", 0, "Stub",
	"none",
	[
		(assign, "$g_player_is_captive", 1),
		(assign, "$auto_menu", -1),
		(assign, "$capturer_party", "$g_encountered_party"),
		(jump_to_menu, "mnu_captivity_castle_taken_prisoner")
	],
	[]
	),

	("captivity_start_under_siege_defeat", 0, "Your enemies take you prisoner.",
	"none",
	[
		(assign, "$g_player_is_captive", 1),
		(assign, "$auto_menu", -1),
		(assign, "$capturer_party", "$g_encountered_party"),
		(jump_to_menu, "mnu_captivity_castle_taken_prisoner")
	],
	[]
	),

	("captivity_wilderness_taken_prisoner", mnf_scale_picture, "Your enemies take you prisoner.",
	"none",
	[
		(try_begin),
			(party_get_current_terrain, ":current_terrain_l_capturer_party", "$capturer_party"),
			(neq, ":current_terrain_l_capturer_party", 15),
			(set_background_mesh, "mesh_pic_prisoner_wilderness"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
				(main_party_has_troop, ":troop"),
				(neg|troop_slot_eq, "trp_player", slot_troop_spouse, ":troop"),
				(store_random_in_range, ":random_in_range_0_100", 0, 100),
				(lt, ":random_in_range_0_100", 30),
				(remove_member_from_party, ":troop", "p_main_party"),
				(troop_set_slot, ":troop", slot_troop_occupation, 0),
				(troop_set_slot, ":troop", slot_troop_playerparty_history, 1),
				(assign, "$last_lost_companion", ":troop"),
				(store_faction_of_party, ":faction_of_party_g_encountered_party", "$g_encountered_party"),
				(troop_set_slot, ":troop", slot_troop_playerparty_history_string, ":faction_of_party_g_encountered_party"),
				(troop_set_health, ":troop", 100),
				(store_random_in_range, ":random_in_range_town_1_castle_1", "p_town_1", "p_castle_1"),
				(troop_set_slot, ":troop", slot_troop_cur_center, ":random_in_range_town_1_castle_1"),
				(assign, ":value", 1000),
				(try_for_range, ":party", "p_town_1", "p_castle_1"),
					(store_faction_of_party, ":faction_of_party_party", ":party"),
					(store_relation, ":relation_faction_of_party_party_player_faction", ":faction_of_party_party", "fac_player_faction"),
					(ge, ":relation_faction_of_party_party_player_faction", 0),
					(store_distance_to_party_from_party, ":distance_to_party_from_party_party_main_party", ":party", "p_main_party"),
					(lt, ":distance_to_party_from_party_party_main_party", ":value"),
					(assign, ":value", ":distance_to_party_from_party_party_main_party"),
					(troop_set_slot, ":troop", slot_troop_cur_center, ":party"),
				(try_end),
			(try_end),
			(try_for_parties, ":var_10"),
				(party_slot_eq, ":var_10", 451, 200),
				(remove_party, ":var_10"),
			(try_end),
			(set_camera_follow_party, "$capturer_party"),
			(assign, "$g_player_is_captive", 1),
			(store_random_in_range, ":random_in_range_10_30", 10, 30),
			(call_script, "script_event_player_captured_as_prisoner"),
			(call_script, "script_stay_captive_for_hours", ":random_in_range_10_30"),
			(assign, "$auto_menu", "mnu_captivity_wilderness_check"),
			(change_screen_return)
		], ".")
	]
	),

	("captivity_wilderness_check", 0, "stub",
	"none",
	[
		(try_begin),
			(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
			(eq, ":current_terrain_main_party", 15),
			(assign, reg1, 0),
			(try_begin),
				(set_fixed_point_multiplier, 10),
				(party_get_position, 1, "p_main_party"),
				(map_get_land_position_around_position, 2, 1, 10),
				(position_get_x, ":position_x_2", 2),
				(position_get_y, ":position_y_2", 2),
				(val_div, ":position_x_2", 10),
				(val_div, ":position_y_2", 10),
				(try_begin),
					(le, ":position_x_2", -134),
					(ge, ":position_y_2", 116),
					(assign, reg1, 1),
				(else_try),
					(le, ":position_x_2", -100),
					(le, ":position_y_2", 103),
					(assign, reg1, 1),
				(try_end),
				(eq, reg1, 0),
				(jump_to_menu, "mnu_captivity_end_sea_escape"),
			(else_try),
				(call_script, "script_stay_captive_for_hours", 1),
				(assign, "$auto_menu", "mnu_captivity_wilderness_check"),
				(change_screen_return),
			(try_end),
		(else_try),
			(jump_to_menu, "mnu_captivity_end_wilderness_escape"),
		(try_end)
	],
	[]
	),

	("captivity_end_sea_escape", mnf_scale_picture, "After painful days of being dragged about as a prisoner, you find a chance and escape from your captors!",
	"none",
	[
		(play_cue_track, "track_min_empty_village")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$g_player_is_captive", 0),
			(assign, "$g_player_icon_state", 0),
			(party_set_flags, "p_main_party", 512, 0),
			(try_begin),
				(party_is_active, "$capturer_party"),
				(party_set_position, "p_main_party", 2),
			(try_end),
			(call_script, "script_set_parties_around_player_ignore_player", 2, 4),
			(assign, "$g_player_icon_state", 0),
			(set_camera_follow_party, "p_main_party"),
			(rest_for_hours, 0, 0, 0),
			(assign, "$g_move_fast", 1),
			(change_screen_return)
		], ".")
	]
	),

	("captivity_end_wilderness_escape", mnf_scale_picture, "After painful days of being dragged about as a prisoner, you find a chance and escape from your captors!",
	"none",
	[
		(play_cue_track, "track_min_empty_village"),
		(try_begin),
			(eq, 1, "$character_gender"),
			(set_background_mesh, "mesh_pic_escape_1_fem"),
		(else_try),
			(set_background_mesh, "mesh_pic_escape_1"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$g_player_is_captive", 0),
			(try_begin),
				(party_is_active, "$capturer_party"),
				(party_relocate_near_party, "p_main_party", "$capturer_party", 2),
			(try_end),
			(call_script, "script_set_parties_around_player_ignore_player", 2, 4),
			(assign, "$g_player_icon_state", 0),
			(set_camera_follow_party, "p_main_party"),
			(rest_for_hours, 0, 0, 0),
			(assign, "$g_move_fast", 1),
			(change_screen_return)
		], ".")
	]
	),

	("captivity_castle_taken_prisoner", 0, "You are quickly surrounded by guards who take away your weapons. With curses and insults, they throw you into the dungeon where you must while away the miserable days of your captivity.",
	"none",
	[
		(try_begin),
			(eq, 1, "$character_gender"),
			(set_background_mesh, "mesh_pic_prisoner_fem"),
		(else_try),
			(set_background_mesh, "mesh_pic_prisoner_man"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$g_player_is_captive", 1),
			(store_random_in_range, ":random_in_range_16_22", 16, 22),
			(call_script, "script_event_player_captured_as_prisoner"),
			(call_script, "script_stay_captive_for_hours", ":random_in_range_16_22"),
			(assign, "$auto_menu", "mnu_captivity_castle_check"),
			(change_screen_return)
		], ".")
	]
	),

	("captivity_rescue_lord_taken_prisoner", 0, "You remain in disguise for as long as possible before revealing yourself. The guards are outraged and beat you savagely before throwing you back into the cell for God knows how long...",
	"none",
	[
		(try_begin),
			(eq, 1, "$character_gender"),
			(set_background_mesh, "mesh_pic_prisoner_fem"),
		(else_try),
			(set_background_mesh, "mesh_pic_prisoner_man"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$g_player_is_captive", 1),
			(store_random_in_range, ":random_in_range_16_22", 16, 22),
			(call_script, "script_event_player_captured_as_prisoner"),
			(call_script, "script_stay_captive_for_hours", ":random_in_range_16_22"),
			(assign, "$auto_menu", "mnu_captivity_castle_check"),
			(change_screen_return)
		], ".")
	]
	),

	("captivity_castle_check", 0, "stub",
	"none",
	[
		(store_random_in_range, reg7, 0, 10),
		(try_begin),
			(party_is_active, "$capturer_party"),
			(store_faction_of_party, ":faction_of_party_capturer_party", "$capturer_party"),
			(is_between, ":faction_of_party_capturer_party", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(store_relation, ":relation_faction_of_party_capturer_party_player_faction", ":faction_of_party_capturer_party", "fac_player_faction"),
			(ge, ":relation_faction_of_party_capturer_party_player_faction", 0),
			(jump_to_menu, "mnu_captivity_end_exchanged_with_prisoner"),
		(else_try),
			(lt, reg7, 4),
			(store_character_level, ":character_level_player", "trp_player"),
			(store_mul, "$player_ransom_amount", ":character_level_player", 50),
			(val_add, "$player_ransom_amount", 100),
			(store_troop_gold, reg3, "trp_player"),
			(store_div, ":value", reg3, 20),
			(val_add, "$player_ransom_amount", ":value"),
			(gt, reg3, "$player_ransom_amount"),
			(jump_to_menu, "mnu_captivity_end_propose_ransom"),
		(else_try),
			(lt, reg7, 7),
			(jump_to_menu, "mnu_captivity_end_exchanged_with_prisoner"),
		(else_try),
			(jump_to_menu, "mnu_captivity_castle_remain"),
		(try_end)
	],
	[]
	),

	("captivity_end_exchanged_with_prisoner", 0, "After days of imprisonment, you are finally set free when your captors exchange you with another prisoner.",
	"none",
	[
		(play_cue_track, "track_min_empty_village")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$g_player_is_captive", 0),
			(try_begin),
				(party_is_active, "$capturer_party"),
				(party_relocate_near_party, "p_main_party", "$capturer_party", 2),
			(try_end),
			(call_script, "script_set_parties_around_player_ignore_player", 2, 12),
			(assign, "$g_player_icon_state", 0),
			(set_camera_follow_party, "p_main_party"),
			(rest_for_hours, 0, 0, 0),
			(change_screen_return)
		], ".")
	]
	),

	("captivity_end_propose_ransom", 0, "You spend long hours in the sunless dank of the dungeon, more than you can count. Suddenly one of your captors enters your cell with an offer; he proposes to free you in return for {reg5} coins of your hidden wealth. You decide to...",
	"none",
	[
		(assign, reg5, "$player_ransom_amount")
	],
	[
		("captivity_end_ransom_accept",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(ge, ":troop_gold_player", "$player_ransom_amount")
		],
		"Accept the offer.",
		[
			(play_cue_track, "track_min_empty_village"),
			(assign, "$g_player_is_captive", 0),
			(troop_remove_gold, "trp_player", "$player_ransom_amount"),
			(try_begin),
				(party_is_active, "$capturer_party"),
				(party_relocate_near_party, "p_main_party", "$capturer_party", 1),
			(try_end),
			(call_script, "script_set_parties_around_player_ignore_player", 2, 6),
			(assign, "$g_player_icon_state", 0),
			(set_camera_follow_party, "p_main_party"),
			(rest_for_hours, 0, 0, 0),
			(change_screen_return)
		], "."),

		("captivity_end_ransom_deny",
		[],
		"Refuse him, wait for something better.",
		[
			(assign, "$g_player_is_captive", 1),
			(store_random_in_range, reg8, 16, 22),
			(call_script, "script_stay_captive_for_hours", reg8),
			(assign, "$auto_menu", "mnu_captivity_castle_check"),
			(change_screen_return)
		], ".")
	]
	),

	("captivity_castle_remain", mnf_disable_all_keys|mnf_scale_picture, "More days pass in the darkness of your cell. You get through them as best you can, enduring the kicks and curses of the guards, watching your underfed body waste away more and more...",
	"none",
	[
		(try_begin),
			(eq, 1, "$character_gender"),
			(set_background_mesh, "mesh_pic_prisoner_fem"),
		(else_try),
			(set_background_mesh, "mesh_pic_prisoner_man"),
		(try_end),
		(store_random_in_range, ":random_in_range_16_22", 16, 22),
		(call_script, "script_stay_captive_for_hours", ":random_in_range_16_22"),
		(assign, "$auto_menu", "mnu_captivity_castle_check")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$g_player_is_captive", 1),
			(change_screen_return)
		], ".")
	]
	),

	("kingdom_army_quest_report_to_army", mnf_scale_picture, "{s8} sends word that {reg4?she:he} wishes you to join {reg4?her:his} new military campaign. You need to bring at least {reg13} troops to the army, and are instructed to raise more men with all due haste if you do not have enough.",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(quest_get_slot, ":report_to_army_target_troop", "qst_report_to_army", slot_quest_target_troop),
		(quest_get_slot, ":report_to_army_target_amount", "qst_report_to_army", slot_quest_target_amount),
		(call_script, "script_get_information_about_troops_position", ":report_to_army_target_troop", 0),
		(str_clear, 9),
		(try_begin),
			(eq, reg0, 1),
			(str_store_string, 9, 1),
		(try_end),
		(str_store_troop_name, 8, ":report_to_army_target_troop"),
		(assign, reg13, ":report_to_army_target_amount"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":report_to_army_target_troop", 4)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(quest_get_slot, ":report_to_army_target_troop", "qst_report_to_army", slot_quest_target_troop),
			(quest_get_slot, ":report_to_army_target_amount", "qst_report_to_army", slot_quest_target_amount),
			(str_store_troop_name_link, 13, ":report_to_army_target_troop"),
			(assign, reg13, ":report_to_army_target_amount"),
			(setup_quest_text, "qst_report_to_army"),
			(str_store_string, 2, "@{s13} asked you to report to {reg4?her:him} with at least {reg13} troops."),
			(call_script, "script_start_quest", "qst_report_to_army", ":report_to_army_target_troop"),
			(call_script, "script_report_quest_troop_positions", "qst_report_to_army", ":report_to_army_target_troop", 3),
			(change_screen_return)
		], ".")
	]
	),

	("kingdom_army_quest_messenger", mnf_scale_picture, "{s8} sends word that {reg4?she:he} wishes to speak with you about a task {reg4?she:he} needs performed. {reg4?She:He} requests you to come and see {reg4?her:him} as soon as possible.",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(faction_get_slot, ":players_kingdom_marshall", "$players_kingdom", slot_faction_marshall),
		(call_script, "script_dplmc_store_troop_is_female", ":players_kingdom_marshall"),
		(assign, reg4, reg0),
		(str_store_troop_name, 8, ":players_kingdom_marshall")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("kingdom_army_quest_join_siege_order", mnf_scale_picture, "{s8} sends word that you are to join the siege of {s9} in preparation for a full assault. Your troops are to take {s9} at all costs.",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(faction_get_slot, ":players_kingdom_marshall", "$players_kingdom", slot_faction_marshall),
		(quest_get_slot, ":join_siege_with_army_target_center", "qst_join_siege_with_army", slot_quest_target_center),
		(str_store_troop_name, 8, ":players_kingdom_marshall"),
		(str_store_party_name, 9, ":join_siege_with_army_target_center")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(call_script, "script_end_quest", "qst_follow_army"),
			(quest_get_slot, ":join_siege_with_army_target_center", "qst_join_siege_with_army", slot_quest_target_center),
			(faction_get_slot, ":players_kingdom_marshall", "$players_kingdom", slot_faction_marshall),
			(str_store_troop_name_link, 13, ":players_kingdom_marshall"),
			(str_store_party_name_link, 14, ":join_siege_with_army_target_center"),
			(setup_quest_text, "qst_join_siege_with_army"),
			(str_store_string, 2, "@{s13} ordered you to join the assault against {s14}."),
			(call_script, "script_start_quest", "qst_join_siege_with_army", ":players_kingdom_marshall"),
			(change_screen_return)
		], ".")
	]
	),

	("kingdom_army_follow_failed", mnf_scale_picture, "You have failed to follow {s8}. The marshal assumes that you were otherwise engaged, but would have appreciated your support.",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(faction_get_slot, ":players_kingdom_marshall", "$players_kingdom", slot_faction_marshall),
		(str_store_troop_name, 8, ":players_kingdom_marshall"),
		(call_script, "script_abort_quest", "qst_follow_army", 1)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("invite_player_to_faction_without_center", mnf_scale_picture, "You receive an offer of vassalage!^^ {s8} of {s9} has sent a royal herald to bring you an invititation in {reg4?her:his} own hand. You would be granted the honour of becoming a vassal {lord/lady} of {s9}, and in return {s8} asks you to swear an oath of homage to {reg4?her:him} and fight in {reg4?her:his} military campaigns, although {reg4?she:he} offers you no lands or titles. {reg4?She:He} will surely be offended if you do not take the offer...",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(faction_get_slot, "$g_invite_faction_lord", "$g_invite_faction", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female", "$g_invite_faction_lord"),
		(assign, reg4, reg0),
		(str_store_troop_name, 8, "$g_invite_faction_lord"),
		(str_store_faction_name, 9, "$g_invite_faction")
	],
	[
		("faction_accept",
		[],
		"Accept!",
		[
			(str_store_troop_name, 1, "$g_invite_faction_lord"),
			(setup_quest_text, "qst_join_faction"),
			(str_store_troop_name_link, 3, "$g_invite_faction_lord"),
			(str_store_faction_name_link, 4, "$g_invite_faction"),
			(quest_set_slot, "qst_join_faction", slot_quest_giver_troop, "$g_invite_faction_lord"),
			(quest_set_slot, "qst_join_faction", slot_quest_expiration_days, 30),
			(quest_set_slot, "qst_join_faction", slot_quest_failure_consequence, 0),
			(str_store_string, 2, "@Find and speak with {s3} of {s4} to give {reg4?her:him} your oath of homage."),
			(call_script, "script_start_quest", "qst_join_faction", "$g_invite_faction_lord"),
			(call_script, "script_report_quest_troop_positions", "qst_join_faction", "$g_invite_faction_lord", 3),
			(jump_to_menu, "mnu_invite_player_to_faction_accepted")
		], "."),

		("faction_reject",
		[],
		"Decline the invitation.",
		[
			(call_script, "script_change_player_relation_with_troop", "$g_invite_faction_lord", -3),
			(call_script, "script_change_player_relation_with_faction", "$g_invite_faction", -10),
			(assign, "$g_invite_faction", 0),
			(assign, "$g_invite_faction_lord", 0),
			(assign, "$g_invite_offered_center", 0),
			(change_screen_return)
		], ".")
	]
	),

	("invite_player_to_faction", mnf_scale_picture, "You receive an offer of vassalage!^^ {s8} of {s9} has sent a royal herald to bring you an invitation in {reg4?her:his} own hand. You would be granted the honour of becoming a vassal {lord/lady} of {s9}, and in return {s8} asks you to swear an oath of homage to {reg4?her:him} and fight in {reg4?her:his} military campaigns, offering you the fief of {s2} for your loyal service. {reg4?She:He} will surely be offended if you do not take the offer...",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(faction_get_slot, "$g_invite_faction_lord", "$g_invite_faction", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female", "$g_invite_faction_lord"),
		(assign, reg4, reg0),
		(str_store_troop_name, 8, "$g_invite_faction_lord"),
		(str_store_faction_name, 9, "$g_invite_faction"),
		(str_store_party_name, 2, "$g_invite_offered_center")
	],
	[
		("faction_accept",
		[],
		"Accept!",
		[
			(str_store_troop_name, 1, "$g_invite_faction_lord"),
			(setup_quest_text, "qst_join_faction"),
			(str_store_troop_name_link, 3, "$g_invite_faction_lord"),
			(str_store_faction_name_link, 4, "$g_invite_faction"),
			(quest_set_slot, "qst_join_faction", slot_quest_giver_troop, "$g_invite_faction_lord"),
			(quest_set_slot, "qst_join_faction", slot_quest_expiration_days, 30),
			(str_store_string, 2, "@Find and speak with {s3} of {s4} to give {reg4?her:him} your oath of homage."),
			(call_script, "script_start_quest", "qst_join_faction", "$g_invite_faction_lord"),
			(call_script, "script_report_quest_troop_positions", "qst_join_faction", "$g_invite_faction_lord", 3),
			(jump_to_menu, "mnu_invite_player_to_faction_accepted")
		], "."),

		("faction_reject",
		[],
		"Decline the invitation.",
		[
			(call_script, "script_change_player_relation_with_troop", "$g_invite_faction_lord", -3),
			(assign, "$g_invite_faction", 0),
			(assign, "$g_invite_faction_lord", 0),
			(assign, "$g_invite_offered_center", 0),
			(change_screen_return)
		], ".")
	]
	),

	("invite_player_to_faction_accepted", 0, "In order to become a vassal, you must swear an oath of homage to {s3}. You shall have to find {reg4?her:him} and give {reg4?her:him} your oath in person. {s5}",
	"none",
	[
		(call_script, "script_get_information_about_troops_position", "$g_invite_faction_lord", 0),
		(str_store_troop_name, 3, "$g_invite_faction_lord"),
		(str_store_string, 5, "@{!}{s1}")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("question_peace_offer", 0, "You Receive a Peace Offer^^{s1} offers you a peace agreement. What is your answer?",
	"none",
	[
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0),
		(store_relation, ":relation_player_supporters_faction_g_notification_menu_var1", "fac_player_supporters_faction", "$g_notification_menu_var1"),
		(try_begin),
			(ge, ":relation_player_supporters_faction_g_notification_menu_var1", 0),
			(change_screen_return),
		(try_end)
	],
	[
		("peace_offer_accept",
		[],
		"Accept",
		[
			(call_script, "script_diplomacy_start_peace_between_kingdoms", "fac_player_supporters_faction", "$g_notification_menu_var1", 1),
			(change_screen_return)
		], "."),

		("dplmc_peace_offer_terms",
		[],
		"Dictate the peace terms",
		[
			(start_presentation, "prsnt_dplmc_peace_terms")
		], "."),

		("peace_offer_reject",
		[],
		"Reject",
		[
			(call_script, "script_change_player_relation_with_faction", "$g_notification_menu_var1", -5),
			(change_screen_return)
		], ".")
	]
	),

	("notification_truce_expired", 0, "Truce Has Expired^^The truce between {s1} and {s2} has expired.",
	"none",
	[
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(str_store_faction_name, 2, "$g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0)
	],
	[
		("continue",
		[],
		"Continue",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_feast_quest_expired", 0, "{s10}",
	"none",
	[
		(str_store_string, 10, "str_feast_quest_expired")
	],
	[
		("continue",
		[],
		"Continue",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_sortie_possible", 0, "Enemy Sighted: Enemies have been sighted outside the walls of {s4}, and {s5} and others are preparing for a sortie. You may join them if you wish.",
	"none",
	[
		(str_store_party_name, 4, "$g_notification_menu_var1"),
		(party_stack_get_troop_id, ":party_stack_troop_id_g_notification_menu_var2_0", "$g_notification_menu_var2", 0),
		(str_store_troop_name, 5, ":party_stack_troop_id_g_notification_menu_var2_0")
	],
	[
		("continue",
		[],
		"Continue",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_casus_belli_expired", 0, "Sovereignty Fails to Respond^^Envoys of {s2} have caused discord in the realm of {s1}, and {s3} as a result has suffered a loss of face...^",
	"none",
	[
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(str_store_faction_name, 2, "$g_notification_menu_var2"),
		(faction_get_slot, ":g_notification_menu_var1_leader", "$g_notification_menu_var1", slot_faction_leader),
		(str_store_troop_name, 3, ":g_notification_menu_var1_leader"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":g_notification_menu_var1_leader", 4),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0)
	],
	[
		("continue",
		[],
		"Continue",
		[
			(call_script, "script_faction_follows_controversial_policy", "$g_notification_menu_var1", 81),
			(change_screen_return)
		], ".")
	]
	),

	("notification_lord_defects", 0, "Defection: {s4} has abandoned {s5} and joined {s7}, taking {reg4?her:his} fiefs with {reg4?her:him}",
	"none",
	[
		(assign, ":var_1", "$g_notification_menu_var1"),
		(assign, ":var_2", "$g_notification_menu_var2"),
		(str_store_troop_name, 4, ":var_1"),
		(str_store_faction_name, 5, ":var_2"),
		(store_faction_of_troop, ":faction_of_troop_var_1", ":var_1"),
		(str_store_faction_name, 7, ":faction_of_troop_var_1"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":var_1", 4)
	],
	[
		("continue",
		[],
		"Continue",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_treason_indictment", 0, "Treason Indictment^^{s9}",
	"none",
	[
		(assign, ":var_1", "$g_notification_menu_var1"),
		(assign, ":var_2", "$g_notification_menu_var2"),
		(faction_get_slot, ":var_2_leader", ":var_2", slot_faction_leader),
		(try_begin),
			(eq, ":var_1", "trp_player"),
			(str_store_troop_name, 7, ":var_2_leader"),
			(str_store_string, 9, "str_you_have_been_indicted_for_treason_to_s7_your_properties_have_been_confiscated_and_you_would_be_well_advised_to_flee_for_your_life"),
		(else_try),
			(str_store_troop_name, 4, ":var_1"),
			(str_store_faction_name, 5, ":var_2"),
			(str_store_troop_name, 6, ":var_2_leader"),
			(call_script, "script_dplmc_store_troop_is_female_reg", ":var_1", 4),
			(store_faction_of_troop, ":faction_of_troop_var_1", ":var_1"),
			(try_begin),
				(is_between, ":faction_of_troop_var_1", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(str_store_faction_name, 10, ":faction_of_troop_var_1"),
				(str_store_string, 11, "str_with_the_s10"),
			(else_try),
				(str_store_string, 11, "str_outside_calradia"),
			(try_end),
			(str_store_string, 9, "str_by_order_of_s6_s4_of_the_s5_has_been_indicted_for_treason_the_lord_has_been_stripped_of_all_reg4herhis_properties_and_has_fled_for_reg4herhis_life_he_is_rumored_to_have_gone_into_exile_s11"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_border_incident", 0, "Border incident^^Word reaches you that {s9}. Though you don't know whether or not the rumors are true, you do know one thing -- this seemingly minor incident has raised passions among {s4}, making it easier for them to go to war against {s3}, if they want it...",
	"none",
	[
		(assign, ":var_1", "$g_notification_menu_var1"),
		(assign, ":var_2", "$g_notification_menu_var2"),
		(store_faction_of_party, ":faction_of_party_var_1", ":var_1"),
		(try_begin),
			(eq, ":var_2", -1),
			(party_get_slot, ":var_1_center_original_faction", ":var_1", slot_center_original_faction),
			(try_begin),
				(this_or_next|eq, ":var_1_center_original_faction", ":faction_of_party_var_1"),
				(neg|faction_slot_eq, ":var_1_center_original_faction", slot_faction_state, 0),
				(party_get_slot, ":var_1_center_original_faction", ":var_1", slot_center_ex_faction),
			(try_end),
			(str_store_party_name, 1, ":var_1"),
			(str_store_faction_name, 3, ":faction_of_party_var_1"),
			(str_store_faction_name, 4, ":var_1_center_original_faction"),
			(faction_get_slot, ":var_1_center_original_faction_leader", ":var_1_center_original_faction", slot_faction_leader),
			(str_store_troop_name, 5, ":var_1_center_original_faction_leader"),
			(str_store_string, 9, "str_local_notables_from_s1_a_village_claimed_by_the_s4_have_been_mistreated_by_their_overlords_from_the_s3_and_petition_s5_for_protection"),
			(display_log_message, "@There has been an alleged border incident: {s9}"),
			(call_script, "script_add_log_entry", 75, ":var_1", -1, -1, ":faction_of_party_var_1"),
		(else_try),
			(store_faction_of_party, ":var_1_center_original_faction", ":var_2"),
			(str_store_party_name, 1, ":var_1"),
			(str_store_party_name, 2, ":var_2"),
			(store_random_in_range, ":random_in_range_0_3", 0, 3),
			(try_begin),
				(eq, ":random_in_range_0_3", 0),
				(str_store_string, 9, "str_villagers_from_s1_stole_some_cattle_from_s2"),
				(display_log_message, "@There has been an alleged border incident: {s9}"),
				(call_script, "script_add_log_entry", 72, ":var_1", ":var_2", -1, ":faction_of_party_var_1"),
			(else_try),
				(eq, ":random_in_range_0_3", 1),
				(str_store_string, 9, "str_villagers_from_s1_abducted_a_woman_from_a_prominent_family_in_s2_to_marry_one_of_their_boys"),
				(display_log_message, "@There has been an alleged border incident: {s9}"),
				(call_script, "script_add_log_entry", 73, ":var_1", ":var_2", -1, ":faction_of_party_var_1"),
			(else_try),
				(eq, ":random_in_range_0_3", 2),
				(str_store_string, 9, "str_villagers_from_s1_killed_some_farmers_from_s2_in_a_fight_over_the_diversion_of_a_stream"),
				(display_log_message, "@There has been an alleged border incident: {s9}"),
				(call_script, "script_add_log_entry", 74, ":var_1", ":var_2", -1, ":faction_of_party_var_1"),
			(try_end),
		(try_end),
		(str_store_faction_name, 3, ":faction_of_party_var_1"),
		(str_store_faction_name, 4, ":var_1_center_original_faction"),
		(store_add, ":value", ":faction_of_party_var_1", 130),
		(val_sub, ":value", "fac_player_supporters_faction"),
		(faction_set_slot, ":var_1_center_original_faction", ":value", 30)
	],
	[
		("continue",
		[],
		"Continue",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_player_faction_active", 0, "You now possess land in your name and are not the subject of another noble. This makes you a ruler in your own right, with your court temporarily located at {s12}. However, the other sovereigns will at first consider you a threat, for if any upstart warlord can grab a throne, then their own legitimacy is called into question.^^You may find it desirable at this time to pledge yourself to an existing kingdom. If you want to continue as a sovereign ruler, then your first priority should be to establish an independent right to rule. You can establish your right to rule through several means -- marrying into a high-born family, recruiting new lords, governing your lands, treating with other rulers, or dispatching your companions on missions.^^At any rate, your first step should be to appoint a chief minister from among your companions, to handle affairs of state. Different companions have different capabilities.^You may appoint new ministers from time to time. You may also change the location of your court, by speaking to the minister.",
	"none",
	[
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "fac_player_supporters_faction", 0),
		(unlock_achievement, 52),
		(play_track, "track_coronation"),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(lt, "$g_player_court", "p_town_1"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(assign, "$g_player_court", ":party"),
			(try_for_range, ":troop", "trp_knight_1_1_wife", "trp_heroes_end"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 6),
				(neg|troop_slot_ge, ":troop", 10, 0),
				(neg|troop_slot_ge, ":troop", 8, 0),
				(try_begin),
					(this_or_next|troop_slot_eq, "trp_player", slot_troop_spouse, ":troop"),
					(troop_slot_eq, ":troop", slot_troop_spouse, "trp_player"),
					(troop_set_slot, ":troop", slot_troop_cur_center, "$g_player_court"),
				(else_try),
					(troop_slot_eq, ":troop", slot_troop_spouse, -1),
					(this_or_next|troop_slot_eq, ":troop", slot_troop_father, "trp_player"),
					(this_or_next|troop_slot_eq, ":troop", slot_troop_mother, "trp_player"),
					(troop_slot_eq, ":troop", slot_troop_guardian, "trp_player"),
					(troop_set_slot, ":troop", slot_troop_cur_center, "$g_player_court"),
				(try_end),
			(try_end),
			(str_store_party_name, 12, "$g_player_court"),
		(try_end)
	],
	[
		("appoint_spouse",
		[
			(troop_slot_ge, "trp_player", 30, 1),
			(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
			(neg|troop_slot_eq, ":player_spouse", slot_troop_occupation, 2),
			(neg|troop_slot_ge, ":player_spouse", 2, 11),
			(call_script, "script_dplmc_store_troop_is_female", ":player_spouse"),
			(str_store_troop_name, 10, ":player_spouse")
		],
		"Appoint your {reg0?wife:husband}, {s10}...",
		[
			(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
			(assign, "$g_player_minister", ":player_spouse"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("dplmc_appoint_spouse_plus_1",
		[
			(troop_slot_ge, "trp_player", 30, 1),
			(assign, ":value", -1),
			(try_for_range_backwards, ":var_2", "trp_npc1", "trp_heroes_end"),
				(troop_slot_eq, ":var_2", slot_troop_spouse, "trp_player"),
				(neg|troop_slot_eq, "trp_player", slot_troop_spouse, ":var_2"),
				(neg|troop_slot_ge, ":var_2", 2, 11),
				(neg|troop_slot_eq, ":var_2", slot_troop_occupation, 2),
				(assign, ":value", ":var_2"),
			(try_end),
			(ge, ":value", 1),
			(call_script, "script_dplmc_store_troop_is_female", ":value"),
			(str_store_troop_name, 10, ":value")
		],
		"Appoint your {reg0?wife:husband}, {s10}...",
		[
			(assign, ":value", -1),
			(try_for_range_backwards, ":var_2", "trp_npc1", "trp_heroes_end"),
				(troop_slot_eq, ":var_2", slot_troop_spouse, "trp_player"),
				(neg|troop_slot_eq, "trp_player", slot_troop_spouse, ":var_2"),
				(neg|troop_slot_ge, ":var_2", 2, 11),
				(neg|troop_slot_eq, ":var_2", slot_troop_occupation, 2),
				(assign, ":value", ":var_2"),
			(try_end),
			(try_begin),
				(lt, ":value", 1),
				(troop_get_slot, ":value", "trp_player", slot_troop_spouse),
			(try_end),
			(assign, "$g_player_minister", ":value"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc1",
		[
			(main_party_has_troop, "trp_npc1"),
			(str_store_troop_name, 10, "trp_npc1")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc1"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc2",
		[
			(main_party_has_troop, "trp_npc2"),
			(str_store_troop_name, 10, "trp_npc2")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc2"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc3",
		[
			(main_party_has_troop, "trp_npc3"),
			(str_store_troop_name, 10, "trp_npc3")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc3"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc4",
		[
			(main_party_has_troop, "trp_npc4"),
			(str_store_troop_name, 10, "trp_npc4")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc4"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc5",
		[
			(main_party_has_troop, "trp_npc5"),
			(str_store_troop_name, 10, "trp_npc5")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc5"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc6",
		[
			(main_party_has_troop, "trp_npc6"),
			(str_store_troop_name, 10, "trp_npc6")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc6"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc7",
		[
			(main_party_has_troop, "trp_npc7"),
			(str_store_troop_name, 10, "trp_npc7")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc7"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc8",
		[
			(main_party_has_troop, "trp_npc8"),
			(str_store_troop_name, 10, "trp_npc8")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc8"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc9",
		[
			(main_party_has_troop, "trp_npc9"),
			(str_store_troop_name, 10, "trp_npc9")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc9"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc10",
		[
			(main_party_has_troop, "trp_npc10"),
			(str_store_troop_name, 10, "trp_npc10")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc10"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc11",
		[
			(main_party_has_troop, "trp_npc11"),
			(str_store_troop_name, 10, "trp_npc11")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc11"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc12",
		[
			(main_party_has_troop, "trp_npc12"),
			(str_store_troop_name, 10, "trp_npc12")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc12"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc13",
		[
			(main_party_has_troop, "trp_npc13"),
			(str_store_troop_name, 10, "trp_npc13")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc13"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc14",
		[
			(main_party_has_troop, "trp_npc14"),
			(str_store_troop_name, 10, "trp_npc14")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc14"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc15",
		[
			(main_party_has_troop, "trp_npc15"),
			(str_store_troop_name, 10, "trp_npc15")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc15"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc16",
		[
			(main_party_has_troop, "trp_npc16"),
			(str_store_troop_name, 10, "trp_npc16")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc16"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc17",
		[
			(main_party_has_troop, "trp_npc17"),
			(str_store_troop_name, 10, "trp_npc17")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc17"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc18",
		[
			(main_party_has_troop, "trp_npc18"),
			(str_store_troop_name, 10, "trp_npc18")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc18"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc19",
		[
			(main_party_has_troop, "trp_npc19"),
			(str_store_troop_name, 10, "trp_npc19")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc19"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc20",
		[
			(main_party_has_troop, "trp_npc20"),
			(str_store_troop_name, 10, "trp_npc20")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc20"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc21",
		[
			(main_party_has_troop, "trp_npc21"),
			(str_store_troop_name, 10, "trp_npc21")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc21"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc22",
		[
			(main_party_has_troop, "trp_npc22"),
			(str_store_troop_name, 10, "trp_npc22")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc22"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc23",
		[
			(main_party_has_troop, "trp_npc23"),
			(str_store_troop_name, 10, "trp_npc23")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc23"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc24",
		[
			(main_party_has_troop, "trp_npc24"),
			(str_store_troop_name, 10, "trp_npc24")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc24"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc25",
		[
			(main_party_has_troop, "trp_npc25"),
			(str_store_troop_name, 10, "trp_npc25")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc25"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc26",
		[
			(main_party_has_troop, "trp_npc26"),
			(str_store_troop_name, 10, "trp_npc26")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc26"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_npc27",
		[
			(main_party_has_troop, "trp_npc27"),
			(str_store_troop_name, 10, "trp_npc27")
		],
		"Appoint {s10}",
		[
			(assign, "$g_player_minister", "trp_npc27"),
			(jump_to_menu, "mnu_minister_confirm")
		], "."),

		("appoint_default",
		[],
		"Appoint a prominent citizen from the area...",
		[
			(assign, "$g_player_minister", "trp_temporary_minister"),
			(troop_set_faction, "trp_temporary_minister", "fac_player_supporters_faction"),
			(jump_to_menu, "mnu_minister_confirm")
		], ".")
	]
	),

	("minister_confirm", 0, "{s9}can be found at your court in {s12}. You should consult periodically, to avoid the accumulation of unresolved issues that may sap your authority...",
	"none",
	[
		(try_begin),
			(eq, "$players_kingdom_name_set", 1),
			(change_screen_return),
		(try_end),
		(try_begin),
			(eq, "$g_player_minister", "trp_temporary_minister"),
			(str_store_string, 9, "str_your_new_minister_"),
		(else_try),
			(str_store_troop_name, 10, "$g_player_minister"),
			(str_store_string, 9, "str_s10_is_your_new_minister_and_"),
		(try_end),
		(try_begin),
			(main_party_has_troop, "$g_player_minister"),
			(remove_member_from_party, "$g_player_minister", "p_main_party"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(start_presentation, "prsnt_name_kingdom")
		], ".")
	]
	),

	("notification_court_lost", 0, "{s12}",
	"none",
	[
		(try_begin),
			(is_between, "$g_player_court", "p_town_1", "p_salt_mine"),
			(str_store_party_name, 10, "$g_player_court"),
			(str_store_party_name, 11, "$g_player_court"),
		(else_try),
			(str_store_string, 10, "str_your_previous_court_some_time_ago"),
			(str_store_string, 11, "str_your_previous_court_some_time_ago"),
		(try_end),
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(assign, "$g_player_court", -1),
		(str_store_string, 14, "str_after_to_the_fall_of_s11_your_court_has_nowhere_to_go"),
		(try_begin),
			(this_or_next|neg|is_between, ":value", "fac_kingdom_1", "fac_kingdoms_end"),
			(neg|faction_slot_eq, ":value", slot_faction_state, 0),
			(faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 2),
			(str_store_string, 14, "str_as_you_no_longer_maintain_an_independent_kingdom_you_no_longer_maintain_a_court"),
		(try_end),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(eq, "$g_player_court", -1),
			(troop_get_slot, ":troop_trees_859", "$troop_trees", 859),
			(neg|party_slot_eq, ":party", slot_village_infested_by_bandits, ":troop_trees_859"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(this_or_next|eq, ":value", ":faction_of_party_party"),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(neg|party_slot_ge, ":party", 7, "trp_npc1"),
			(assign, "$g_player_court", ":party"),
			(try_begin),
				(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
				(is_between, ":player_spouse", "trp_knight_1_1_wife", "trp_heroes_end"),
				(neg|troop_slot_eq, ":player_spouse", slot_troop_occupation, 2),
				(neg|troop_slot_ge, ":player_spouse", 2, 11),
				(neg|troop_slot_ge, ":player_spouse", 8, 1),
				(troop_set_slot, ":player_spouse", slot_troop_cur_center, "$g_player_court"),
				(str_store_party_name, 11, "$g_player_court"),
			(try_end),
			(str_store_string, 14, "str_due_to_the_fall_of_s10_your_court_has_been_relocated_to_s12"),
		(try_end),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(eq, "$g_player_court", -1),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(this_or_next|eq, ":value", ":faction_of_party_party"),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(assign, "$g_player_court", ":party"),
			(try_begin),
				(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
				(is_between, ":player_spouse", "trp_knight_1_1_wife", "trp_heroes_end"),
				(neg|troop_slot_eq, ":player_spouse", slot_troop_occupation, 2),
				(neg|troop_slot_ge, ":player_spouse", 2, 11),
				(neg|troop_slot_ge, ":player_spouse", 8, 1),
				(troop_set_slot, ":player_spouse", slot_troop_cur_center, "$g_player_court"),
			(try_end),
			(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
			(str_store_party_name, 11, "$g_player_court"),
			(str_store_troop_name, 9, ":party_town_lord"),
			(str_store_string, 14, "str_after_to_the_fall_of_s10_your_faithful_vassal_s9_has_invited_your_court_to_s11_"),
		(try_end),
		(try_begin),
			(this_or_next|neg|is_between, ":value", "fac_kingdom_1", "fac_kingdoms_end"),
			(neg|faction_slot_eq, ":value", slot_faction_state, 0),
			(faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 2),
			(str_store_string, 14, "str_as_you_no_longer_maintain_an_independent_kingdom_you_no_longer_maintain_a_court"),
		(try_end),
		(str_store_string, 12, 14)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_player_faction_deactive", 0, "Your sovereignty no longer holds fief to any land.",
	"none",
	[
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "fac_player_supporters_faction", 0)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(try_begin),
			(try_end),
			(assign, "$g_player_minister", -1),
			(change_screen_return)
		], ".")
	]
	),

	("notification_player_wedding_day", mnf_scale_picture, "{s8} wishes to inform you that preparations for your wedding at {s10} have been complete, and that your presence is expected imminently .",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(str_store_troop_name, 8, "$g_notification_menu_var1"),
		(str_store_party_name, 10, "$g_notification_menu_var2")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_player_kingdom_holds_feast", mnf_scale_picture, "{s11}",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(str_store_troop_name, 8, "$g_notification_menu_var1"),
		(store_faction_of_troop, ":faction_of_troop_g_notification_menu_var1", "$g_notification_menu_var1"),
		(str_store_faction_name, 9, ":faction_of_troop_g_notification_menu_var1"),
		(str_store_party_name, 10, "$g_notification_menu_var2"),
		(str_clear, 12),
		(try_begin),
			(check_quest_active, "qst_wed_betrothed"),
			(quest_get_slot, ":wed_betrothed_giver_troop", "qst_wed_betrothed", slot_quest_giver_troop),
			(store_faction_of_troop, ":faction_of_troop_wed_betrothed_giver_troop", ":wed_betrothed_giver_troop"),
			(eq, ":faction_of_troop_wed_betrothed_giver_troop", "$players_kingdom"),
			(str_store_string, 12, "str_feast_wedding_opportunity"),
		(try_end),
		(str_store_string, 11, "str_s8_wishes_to_inform_you_that_the_lords_of_s9_will_be_gathering_for_a_feast_at_his_great_hall_in_s10_and_invites_you_to_be_part_of_this_august_assembly"),
		(try_begin),
			(eq, "$g_notification_menu_var1", 0),
			(str_store_string, 11, "str_the_great_lords_of_your_kingdom_plan_to_gather_at_your_hall_in_s10_for_a_feast"),
		(try_end),
		(str_store_string, 11, "@{!}{s11}{s12}"),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(store_current_hours, ":current_hours"),
			(faction_get_slot, ":players_kingdom_last_feast_concluded", "$players_kingdom", slot_faction_last_feast_concluded),
			(val_sub, ":current_hours", ":players_kingdom_last_feast_concluded"),
			(assign, reg4, ":current_hours"),
			(display_message, "@{!}DEBUG -- Hours since last feast started: {reg4}"),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_center_under_siege", 0, "{s1} has been besieged by {s2} of {s3}!",
	"none",
	[
		(str_store_party_name, 1, "$g_notification_menu_var1"),
		(str_store_troop_name, 2, "$g_notification_menu_var2"),
		(store_faction_of_troop, ":faction_of_troop_g_notification_menu_var2", "$g_notification_menu_var2"),
		(str_store_faction_name, 3, ":faction_of_troop_g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 62),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_center_note_mesh", "$g_notification_menu_var1", 0)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_village_raided", 0, "Enemies have Laid Waste to a Fief^^{s1} has been raided by {s2} of {s3}!",
	"none",
	[
		(str_store_party_name, 1, "$g_notification_menu_var1"),
		(str_store_troop_name, 2, "$g_notification_menu_var2"),
		(store_faction_of_troop, ":faction_of_troop_g_notification_menu_var2", "$g_notification_menu_var2"),
		(str_store_faction_name, 3, ":faction_of_troop_g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 62),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_center_note_mesh", "$g_notification_menu_var1", 0)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_village_raid_started", 0, "Your Village is under Attack!^^{s2} of {s3} is laying waste to {s1}.",
	"none",
	[
		(str_store_party_name, 1, "$g_notification_menu_var1"),
		(str_store_troop_name, 2, "$g_notification_menu_var2"),
		(store_faction_of_troop, ":faction_of_troop_g_notification_menu_var2", "$g_notification_menu_var2"),
		(str_store_faction_name, 3, ":faction_of_troop_g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 62),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_center_note_mesh", "$g_notification_menu_var1", 0)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_one_faction_left", 0, "Calradia Conquered by One Kingdom^^{s1} has defeated all rivals and stands as the sole kingdom.",
	"none",
	[
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(try_begin),
			(is_between, "$g_notification_menu_var1", "fac_kingdom_1", "fac_kingdoms_end"),
			(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_for_menu", "$g_notification_menu_var1", 0),
		(else_try),
			(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0),
		(try_end),
		(try_begin),
			(faction_slot_eq, "$g_notification_menu_var1", slot_faction_leader, "trp_player"),
			(unlock_achievement, 44),
		(else_try),
			(unlock_achievement, 53),
		(try_end),
		(try_begin),
			(troop_get_type, ":type_player", "trp_player"),
			(eq, ":type_player", 1),
			(unlock_achievement, 78),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_oath_renounced_faction_defeated", 0, "Your Old Faction was Defeated^^You won the battle against {s1}! This ends your struggle which started after you renounced your oath to them.",
	"none",
	[
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(try_begin),
			(is_between, "$g_notification_menu_var1", "fac_kingdom_1", "fac_kingdoms_end"),
			(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_for_menu", "$g_notification_menu_var1", 0),
		(else_try),
			(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_center_lost", 0, "An Estate was Lost^^You have lost {s1} to {s2}.",
	"none",
	[
		(str_store_party_name, 1, "$g_notification_menu_var1"),
		(str_store_faction_name, 2, "$g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 62),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_center_note_mesh", "$g_notification_menu_var1", 0)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_troop_left_players_faction", 0, "Betrayal!^^{s1} has left {s2} and joined {s3}.",
	"none",
	[
		(str_store_troop_name, 1, "$g_notification_menu_var1"),
		(str_store_faction_name, 2, "$players_kingdom"),
		(str_store_faction_name, 3, "$g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 55),
		(position_set_y, 0, 20),
		(position_set_z, 0, 100),
		(set_game_menu_tableau_mesh, "tableau_troop_note_mesh", "$g_notification_menu_var1", 0)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_troop_joined_players_faction", 0, "Good news!^^ {s1} has left {s2} and joined {s3}.",
	"none",
	[
		(str_store_troop_name, 1, "$g_notification_menu_var1"),
		(str_store_faction_name, 2, "$g_notification_menu_var2"),
		(str_store_faction_name, 3, "$players_kingdom"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 55),
		(position_set_y, 0, 20),
		(position_set_z, 0, 100),
		(set_game_menu_tableau_mesh, "tableau_troop_note_mesh", "$g_notification_menu_var1", 0)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_war_declared", 0, "Declaration of War^^{s1} has declared war against {s2}!",
	"none",
	[
		(try_begin),
			(str_store_faction_name, 1, "$g_notification_menu_var1"),
			(str_store_faction_name, 2, "$g_notification_menu_var2"),
		(try_end),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(store_sub, ":value", "$g_notification_menu_var1", "fac_player_supporters_faction"),
		(store_sub, ":value_2", "$g_notification_menu_var2", "fac_player_supporters_faction"),
		(val_mul, ":value", 128),
		(val_add, ":value", ":value_2"),
		(set_game_menu_tableau_mesh, "tableau_2_factions_mesh", ":value", 0)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_peace_declared", 0, "Peace Agreement^^{s1} and {s2} have made peace!^{s57}",
	"none",
	[
		(try_begin),
			(eq, 1, 0),
			(eq, "$g_include_diplo_explanation", "$g_notification_menu_var1"),
			(assign, "$g_include_diplo_explanation", 0),
		(else_try),
			(str_clear, 57),
		(try_end),
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(str_store_faction_name, 2, "$g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(store_sub, ":value", "$g_notification_menu_var1", "fac_player_supporters_faction"),
		(store_sub, ":value_2", "$g_notification_menu_var2", "fac_player_supporters_faction"),
		(val_mul, ":value", 128),
		(val_add, ":value", ":value_2"),
		(set_game_menu_tableau_mesh, "tableau_2_factions_mesh", ":value", 0)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_faction_defeated", 0, "An independent faction has ceased to exist.",
	"none",
	[
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(try_begin),
			(is_between, "$g_notification_menu_var1", "fac_kingdom_1", "fac_kingdoms_end"),
			(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_for_menu", "$g_notification_menu_var1", 0),
		(else_try),
			(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(try_begin),
				(is_between, "$supported_pretender", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
				(troop_slot_eq, "$supported_pretender", slot_troop_original_faction, "$g_notification_menu_var1"),
				(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
					(troop_slot_eq, ":troop", slot_troop_occupation, 2),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
					(troop_set_faction, ":troop", "$g_notification_menu_var1"),
					(call_script, "script_troop_set_title_according_to_faction", ":troop", "$g_notification_menu_var1"),
					(try_begin),
						(this_or_next|eq, "$g_notification_menu_var1", "$players_kingdom"),
						(eq, "$g_notification_menu_var1", "fac_player_supporters_faction"),
						(call_script, "script_check_concilio_calradi_achievement"),
					(try_end),
				(else_try),
					(troop_slot_eq, ":troop", slot_troop_occupation, 2),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(eq, ":faction_of_troop_troop", "$g_notification_menu_var1"),
					(call_script, "script_troop_change_relation_with_troop", ":troop", "trp_player", 5),
				(try_end),
				(try_for_parties, ":var_3"),
					(store_faction_of_party, ":faction_of_troop_troop", ":var_3"),
					(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
					(party_set_faction, ":var_3", "$g_notification_menu_var1"),
				(try_end),
				(assign, "$players_kingdom", "$g_notification_menu_var1"),
				(try_begin),
					(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
					(is_between, ":player_spouse", "trp_knight_1_1_wife", "trp_heroes_end"),
					(troop_set_faction, ":player_spouse", "$g_notification_menu_var1"),
				(try_end),
				(call_script, "script_add_notification_menu", "mnu_notification_rebels_switched_to_faction", "$g_notification_menu_var1", "$supported_pretender"),
				(faction_set_slot, "$g_notification_menu_var1", slot_faction_state, 0),
				(faction_set_slot, "fac_player_supporters_faction", slot_faction_state, 2),
				(faction_get_slot, ":g_notification_menu_var1_leader", "$g_notification_menu_var1", slot_faction_leader),
				(troop_set_slot, ":g_notification_menu_var1_leader", slot_troop_change_to_faction, "fac_commoners"),
				(faction_set_slot, "$g_notification_menu_var1", slot_faction_leader, "$supported_pretender"),
				(troop_set_faction, "$supported_pretender", "$g_notification_menu_var1"),
				(faction_get_slot, ":g_notification_menu_var1_marshall", "$g_notification_menu_var1", slot_faction_marshall),
				(try_begin),
					(ge, ":g_notification_menu_var1_marshall", 0),
					(troop_get_slot, ":g_notification_menu_var1_marshall_leaded_party", ":g_notification_menu_var1_marshall", slot_troop_leaded_party),
					(party_is_active, ":g_notification_menu_var1_marshall_leaded_party"),
					(party_set_marshall, ":g_notification_menu_var1_marshall_leaded_party", 0),
				(try_end),
				(faction_set_slot, "$g_notification_menu_var1", slot_faction_marshall, "trp_player"),
				(faction_set_slot, "$g_notification_menu_var1", slot_faction_ai_state, 0),
				(faction_set_slot, "$g_notification_menu_var1", slot_faction_ai_object, -1),
				(troop_set_slot, "$supported_pretender", slot_troop_occupation, 2),
				(troop_set_slot, "$supported_pretender", slot_troop_renown, 1000),
				(party_remove_members, "p_main_party", "$supported_pretender", 1),
				(call_script, "script_set_player_relation_with_faction", "$g_notification_menu_var1", 0),
				(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
					(faction_slot_eq, ":faction", slot_faction_state, 0),
					(neq, ":faction", "$g_notification_menu_var1"),
					(store_relation, ":relation_faction_player_supporters_faction", ":faction", "fac_player_supporters_faction"),
					(set_relation, ":faction", "$g_notification_menu_var1", ":relation_faction_player_supporters_faction"),
				(try_end),
				(assign, "$supported_pretender", 0),
				(assign, "$supported_pretender_old_faction", 0),
				(assign, "$g_recalculate_ais", 1),
				(call_script, "script_update_all_notes"),
			(try_end),
			(change_screen_return)
		], ".")
	]
	),

	("notification_kingdom_restoration", 0, "{s10} have renounced their allegiance to {s12} and declared themselves the rulers of {s11}.",
	"none",
	[
		(str_clear, 0),
		(assign, ":var_1", 0),
		(try_for_range, ":troop", "trp_knight_1_1", "trp_kingdom_1_pretender"),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(eq, ":faction_of_troop_troop", "$g_notification_menu_var2"),
			(troop_get_slot, ":troop_original_faction", ":troop", slot_troop_original_faction),
			(eq, ":troop_original_faction", "$g_notification_menu_var1"),
			(call_script, "script_change_troop_faction", ":troop", "$g_notification_menu_var1"),
			(val_add, ":var_1", 1),
			(try_begin),
				(eq, ":var_1", 1),
				(str_store_troop_name, 1, ":troop"),
				(str_store_string, 0, "@{s1}"),
			(else_try),
				(eq, ":var_1", 2),
				(str_store_troop_name, 1, ":troop"),
				(str_store_string, 0, "@{s1} and {s0}"),
			(else_try),
				(ge, ":var_1", 3),
				(str_store_troop_name, 1, ":troop"),
				(str_store_string, 0, "@{s1}, {s0}"),
			(try_end),
		(try_end),
		(str_store_string_reg, 10, 0),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_for_menu", "$g_notification_menu_var1", 0),
		(str_store_faction_name, 11, "$g_notification_menu_var1"),
		(str_store_faction_name, 12, "$g_notification_menu_var2")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
				(neq, ":faction", "$g_notification_menu_var1"),
				(neq, ":faction", "$g_notification_menu_var2"),
				(call_script, "script_diplomacy_start_peace_between_kingdoms", ":faction", "$g_notification_menu_var1", 0),
			(try_end),
			(call_script, "script_diplomacy_start_war_between_kingdoms", "$g_notification_menu_var2", "$g_notification_menu_var1", 1),
			(call_script, "script_update_all_notes"),
			(change_screen_return)
		], ".")
	]
	),

	("notification_rebels_switched_to_faction", 0, "Rebellion Success^^ Your rebellion is victorious! Your faction now has the sole claim to the title of {s11}, with {s12} as the single ruler.",
	"none",
	[
		(str_store_faction_name, 11, "$g_notification_menu_var1"),
		(str_store_troop_name, 12, "$g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(try_begin),
			(is_between, "$g_notification_menu_var1", "fac_kingdom_1", "fac_kingdoms_end"),
			(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_for_menu", "$g_notification_menu_var1", 0),
		(else_try),
			(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0),
		(try_end)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$talk_context", 15),
			(start_map_conversation, "$g_notification_menu_var2", -1),
			(change_screen_return)
		], ".")
	]
	),

	("notification_player_should_consult", 0, "{reg0?Your minister:{s11}} send word that there are problems brewing in the realm which, if left untreated, could sap your authority. You should consult with {reg4?her:him} at your earliest convenience",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(setup_quest_text, "qst_consult_with_minister"),
			(str_store_troop_name, 11, "$g_player_minister"),
			(str_store_party_name, 12, "$g_player_court"),
			(str_store_string, 2, "str_consult_with_s11_at_your_court_in_s12"),
			(call_script, "script_start_quest", "qst_consult_with_minister", -1),
			(assign, reg4, 0),
			(try_begin),
				(call_script, "script_cf_dplmc_troop_is_female", "$g_player_minister"),
				(assign, reg4, 1),
			(try_end),
			(assign, reg0, 1),
			(try_begin),
				(is_between, "$g_player_minister", "trp_npc1", "trp_heroes_end"),
				(assign, reg0, 0),
			(try_end),
			(quest_set_slot, "qst_consult_with_minister", slot_quest_expiration_days, 30),
			(quest_set_slot, "qst_consult_with_minister", slot_quest_giver_troop, "$g_player_minister"),
			(change_screen_return)
		], ".")
	]
	),

	("notification_player_feast_in_progress", 0, "Feast in Preparation^^Your {wife/husband} has started preparations for a feast in your hall in {s11}",
	"none",
	[
		(str_store_party_name, 11, "$g_notification_menu_var1")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_lady_requests_visit", 0, "An elderly woman approaches your party and passes one of your men a letter, sealed in plain wax. It is addressed to you. When you break the seal, you see it is from {s15}. It reads, 'I so enjoyed your last visit. {s14} I am currently in {s10}.{s12}'",
	"none",
	[
		(assign, ":var_1", "$g_notification_menu_var1"),
		(assign, ":var_2", "$g_notification_menu_var2"),
		(str_store_troop_name, 15, ":var_1"),
		(str_store_party_name, 10, ":var_2"),
		(store_current_hours, ":current_hours"),
		(troop_get_slot, ":var_1_last_talk_time", ":var_1", slot_troop_last_talk_time),
		(val_sub, ":current_hours", ":var_1_last_talk_time"),
		(call_script, "script_get_kingdom_lady_social_determinants", ":var_1"),
		(assign, ":var_5", reg0),
		(str_store_troop_name, 16, ":var_5"),
		(call_script, "script_troop_get_family_relation_to_troop", ":var_5", ":var_1"),
		(str_clear, 14),
		(try_begin),
			(lt, ":current_hours", 336),
			(try_begin),
				(troop_slot_eq, ":var_1", slot_lord_reputation_type, 23),
				(str_store_string, 14, "str_as_brief_as_our_separation_has_been_the_longing_in_my_heart_to_see_you_has_made_it_seem_as_many_years"),
			(else_try),
				(str_store_string, 14, "str_although_it_has_only_been_a_short_time_since_your_departure_but_i_would_be_most_pleased_to_see_you_again"),
			(try_end),
		(else_try),
			(ge, ":current_hours", 336),
			(try_begin),
				(troop_slot_eq, ":var_1", slot_lord_reputation_type, 24),
				(str_store_string, 14, "str_although_i_have_received_no_word_from_you_for_quite_some_time_i_am_sure_that_you_must_have_been_very_busy_and_that_your_failure_to_come_see_me_in_no_way_indicates_that_your_attentions_to_me_were_insincere_"),
			(else_try),
				(troop_slot_eq, ":var_1", slot_lord_reputation_type, 25),
				(str_store_string, 14, "str_i_trust_that_you_have_comported_yourself_in_a_manner_becoming_a_gentleman_during_our_long_separation_"),
			(else_try),
				(str_store_string, 14, "str_it_has_been_many_days_since_you_came_and_i_would_very_much_like_to_see_you_again"),
			(try_end),
		(try_end),
		(str_clear, 12),
		(str_clear, 18),
		(assign, ":var_6", reg4),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":var_5", 4),
		(try_begin),
			(troop_slot_eq, ":var_5", slot_troop_love_interests_end, 0),
			(str_store_string, 12, "str__you_should_ask_my_s11_s16s_permission_but_i_have_no_reason_to_believe_that_he_will_prevent_you_from_coming_to_see_me"),
			(str_store_string, 18, "str__you_should_first_ask_her_s11_s16s_permission"),
		(else_try),
			(troop_slot_eq, ":var_5", slot_troop_love_interests_end, -1),
			(str_store_string, 12, "str__alas_as_we_know_my_s11_s16_will_not_permit_me_to_see_you_however_i_believe_that_i_can_arrange_away_for_you_to_enter_undetected"),
		(else_try),
			(troop_slot_eq, ":var_5", slot_troop_love_interests_end, 1),
			(str_store_string, 12, "str__as_my_s11_s16_has_already_granted_permission_for_you_to_see_me_i_shall_expect_your_imminent_arrival"),
		(try_end),
		(assign, reg4, ":var_6")
	],
	[
		("continue_visit_yes",
		[],
		"Tell the woman to inform her mistress that you will come shortly",
		[
			(assign, ":var_1", "$g_notification_menu_var1"),
			(str_store_troop_name_link, 3, ":var_1"),
			(str_store_party_name_link, 4, "$g_notification_menu_var2"),
			(str_store_string, 2, "str_visit_s3_who_was_last_at_s4s18"),
			(call_script, "script_start_quest", "qst_visit_lady", ":var_1"),
			(quest_set_slot, "qst_visit_lady", slot_quest_giver_troop, ":var_1"),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(quest_get_slot, ":visit_lady_giver_troop", "qst_visit_lady", slot_quest_giver_troop),
				(str_store_troop_name, 2, ":visit_lady_giver_troop"),
				(display_message, "str_giver_troop_=_s2"),
			(try_end),
			(quest_set_slot, "qst_visit_lady", slot_quest_expiration_days, 30),
			(change_screen_return)
		], "."),

		("continue_visit_no",
		[],
		"Tell the woman to inform her mistress that you are indisposed",
		[
			(troop_set_slot, "$g_notification_menu_var1", slot_troop_love_interest_3, 1),
			(change_screen_return)
		], ".")
	]
	),

	("garden", 0, "{s12}",
	"none",
	[
		(call_script, "script_get_kingdom_lady_social_determinants", "$love_interest_in_town"),
		(assign, ":var_1", reg0),
		(str_store_troop_name, 11, "$love_interest_in_town"),
		(try_begin),
			(call_script, "script_npc_decision_checklist_male_guardian_assess_suitor", ":var_1", "trp_player"),
			(lt, reg0, 0),
			(troop_set_slot, ":var_1", slot_troop_love_interests_end, -1),
		(try_end),
		(assign, "$nurse_assists_entry", 0),
		(try_begin),
			(troop_slot_eq, ":var_1", slot_troop_love_interests_end, 1),
			(str_store_string, 12, "str_the_guards_at_the_gate_have_been_ordered_to_allow_you_through_you_might_be_imagining_things_but_you_think_one_of_them_may_have_given_you_a_wink"),
		(else_try),
			(call_script, "script_troop_get_relation_with_troop", "trp_player", "$love_interest_in_town"),
			(gt, reg0, 0),
			(assign, ":value", 0),
			(try_begin),
				(check_quest_active, "qst_visit_lady"),
				(quest_slot_eq, "qst_visit_lady", slot_quest_giver_troop, "$love_interest_in_town"),
				(assign, ":value", 1),
			(else_try),
				(check_quest_active, "qst_formal_marriage_proposal"),
				(quest_slot_eq, "qst_formal_marriage_proposal", slot_quest_giver_troop, "$love_interest_in_town"),
				(this_or_next|check_quest_succeeded, "qst_formal_marriage_proposal"),
				(check_quest_failed, "qst_formal_marriage_proposal"),
				(assign, ":value", 1),
			(else_try),
				(check_quest_active, "qst_duel_courtship_rival"),
				(quest_slot_eq, "qst_duel_courtship_rival", slot_quest_giver_troop, "$love_interest_in_town"),
				(this_or_next|check_quest_succeeded, "qst_duel_courtship_rival"),
				(check_quest_failed, "qst_duel_courtship_rival"),
				(assign, ":value", 1),
			(try_end),
			(try_begin),
				(store_current_hours, ":current_hours"),
				(troop_get_slot, ":love_interest_in_town_last_talk_time", "$love_interest_in_town", slot_troop_last_talk_time),
				(val_sub, ":current_hours", ":love_interest_in_town_last_talk_time"),
				(this_or_next|ge, ":current_hours", 96),
				(eq, ":value", 1),
				(try_begin),
					(is_between, "$g_encountered_party", "p_town_1", "p_castle_1"),
					(str_store_string, 12, "str_the_guards_glare_at_you_and_you_know_better_than_to_ask_permission_to_enter_however_as_you_walk_back_towards_your_lodgings_an_elderly_lady_dressed_in_black_approaches_you_i_am_s11s_nurse_she_whispers_urgently_don_this_dress_and_throw_the_hood_over_your_face_i_will_smuggle_you_inside_the_castle_to_meet_her_in_the_guise_of_a_skullery_maid__the_guards_will_not_look_too_carefully_but_i_beg_you_for_all_of_our_sakes_be_discrete"),
					(assign, "$nurse_assists_entry", 1),
				(else_try),
					(str_store_string, 12, "str_the_guards_glare_at_you_and_you_know_better_than_to_ask_permission_to_enter_however_as_you_walk_back_towards_your_lodgings_an_elderly_lady_dressed_in_black_approaches_you_i_am_s11s_nurse_she_whispers_urgently_wait_for_a_while_by_the_spring_outside_the_walls_i_will_smuggle_her_ladyship_out_to_meet_you_dressed_in_the_guise_of_a_shepherdess_but_i_beg_you_for_all_of_our_sakes_be_discrete"),
					(assign, "$nurse_assists_entry", 2),
				(try_end),
			(else_try),
				(str_store_string, 12, "str_the_guards_glare_at_you_and_you_know_better_than_to_ask_permission_to_enter_however_as_you_walk_back_towards_your_lodgings_an_elderly_lady_dressed_in_black_approaches_you_i_am_s11s_nurse_she_whispers_urgently_her_ladyship_asks_me_to_say_that_yearns_to_see_you_but_that_you_should_bide_your_time_a_bit_her_ladyship_says_that_to_arrange_a_clandestine_meeting_so_soon_after_your_last_encounter_would_be_too_dangerous"),
			(try_end),
		(else_try),
			(str_store_string, 12, "str_the_guards_glare_at_you_and_you_know_better_than_to_ask_permission_to_enter"),
		(try_end)
	],
	[
		("enter",
		[
			(call_script, "script_get_kingdom_lady_social_determinants", "$love_interest_in_town"),
			(troop_slot_eq, reg0, slot_troop_love_interests_end, 1)
		],
		"Enter",
		[
			(jump_to_menu, "mnu_town"),
			(call_script, "script_setup_meet_lady", "$love_interest_in_town", "$g_encountered_party")
		], "."),

		("nurse_1",
		[
			(eq, "$nurse_assists_entry", 1)
		],
		"Go with the nurse",
		[
			(jump_to_menu, "mnu_town"),
			(call_script, "script_setup_meet_lady", "$love_interest_in_town", "$g_encountered_party")
		], "."),

		("nurse_2",
		[
			(eq, "$nurse_assists_entry", 2)
		],
		"Wait by the spring",
		[
			(jump_to_menu, "mnu_town"),
			(call_script, "script_setup_meet_lady", "$love_interest_in_town", "$g_encountered_party")
		], "."),

		("leave",
		[],
		"Leave",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("kill_local_merchant_begin", 0, "You spot your victim and follow him, observing as he turns a corner into a dark alley. This will surely be your best opportunity to attack him.",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(set_jump_mission, "mt_back_alley_kill_local_merchant"),
			(party_get_slot, ":qst_kill_local_merchant_center_town_alley", "$qst_kill_local_merchant_center", slot_town_alley),
			(modify_visitors_at_site, ":qst_kill_local_merchant_center_town_alley"),
			(reset_visitors),
			(set_visitor, 0, "trp_player"),
			(set_visitor, 1, "trp_local_merchant"),
			(jump_to_menu, "mnu_town"),
			(jump_to_scene, ":qst_kill_local_merchant_center_town_alley"),
			(change_screen_mission)
		], ".")
	]
	),

	("bar_brawl_begin", 0, "You wait until a young boy comes running down the street. '{My lord! My lord!/My Lady!}' he cries. 'The troublemakers have left the tavern and are coming this way. Be ready!'",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(store_character_level, ":character_level_player", "trp_player"),
			(try_begin),
				(is_between, ":character_level_player", 0, 15),
				(set_jump_mission, "mt_back_alley_bar_brawl"),
			(else_try),
				(set_jump_mission, "mt_back_alley_bar_brawl2"),
			(try_end),
			(party_get_slot, ":qst_bar_brawl_center_town_center", "$qst_bar_brawl_center", slot_town_center),
			(modify_visitors_at_site, ":qst_bar_brawl_center_town_center"),
			(reset_visitors),
			(assign, "$all_doors_locked", 1),
			(try_begin),
				(is_between, ":character_level_player", 0, 15),
				(set_visitor, 0, "trp_player"),
				(set_visitor, 1, "trp_tough"),
				(set_visitor, 2, "trp_tough"),
				(set_visitor, 3, "trp_tough"),
			(else_try),
				(set_visitor, 0, "trp_player"),
				(set_visitor, 1, "trp_tough2"),
				(set_visitor, 2, "trp_tough2"),
				(set_visitor, 3, "trp_tough2"),
			(try_end),
			(jump_to_menu, "mnu_town"),
			(jump_to_scene, ":qst_bar_brawl_center_town_center"),
			(change_screen_mission)
		], ".")
	]
	),

	("debug_alert_from_s65", 0, "DEBUG ALERT: {s65}",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$debug_message_in_queue", 0),
			(change_screen_return)
		], ".")
	]
	),

	("auto_return_to_map", 0, "stub",
	"none",
	[
		(change_screen_map)
	],
	[]
	),

	("bandit_lair", 0, "{s3}",
	"none",
	[
		(try_begin),
			(eq, "$loot_screen_shown", 1),
			(try_begin),
				(eq, "$troop_trees", "trp_troop_tree_0"),
				(assign, ":value", "pt_forest_bandits"),
				(assign, ":value_2", "pt_looters_r"),
			(else_try),
				(eq, "$troop_trees", "trp_troop_tree_1"),
				(assign, ":value", "pt_forest_bandits_r"),
				(assign, ":value_2", "pt_looters_e"),
			(else_try),
				(eq, "$troop_trees", "trp_troop_tree_2"),
				(assign, ":value", "pt_forest_bandits_e"),
				(assign, ":value_2", "pt_deserters"),
			(try_end),
			(try_for_range, ":var_3", ":value", ":value_2"),
				(party_template_slot_eq, ":var_3", slot_party_template_lair_party, "$g_encountered_party"),
				(party_template_set_slot, ":var_3", slot_party_template_lair_party, 0),
			(try_end),
			(try_begin),
				(ge, "$g_encountered_party", 0),
				(party_is_active, "$g_encountered_party"),
				(party_get_template_id, ":template_id_l_g_encountered_party", "$g_encountered_party"),
				(neq, ":template_id_l_g_encountered_party", "pt_looter_lair"),
				(neq, ":template_id_l_g_encountered_party", "pt_looter_lair_r"),
				(neq, ":template_id_l_g_encountered_party", "pt_looter_lair_e"),
				(remove_party, "$g_encountered_party"),
			(try_end),
			(assign, "$g_leave_encounter", 0),
			(change_screen_return),
		(else_try),
			(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_0", "$g_encountered_party", 0),
			(str_store_troop_name_plural, 4, ":party_stack_troop_id_g_encountered_party_0"),
			(str_store_string, 5, "str_bandit_approach_defile"),
			(try_begin),
				(troop_slot_eq, "$troop_trees", 851, ":party_stack_troop_id_g_encountered_party_0"),
				(str_store_string, 5, "str_bandit_approach_defile"),
			(else_try),
				(troop_slot_eq, "$troop_trees", 846, ":party_stack_troop_id_g_encountered_party_0"),
				(str_store_string, 5, "str_bandit_approach_cliffs"),
			(else_try),
				(troop_slot_eq, "$troop_trees", 847, ":party_stack_troop_id_g_encountered_party_0"),
				(str_store_string, 5, "str_bandit_approach_swamp"),
			(else_try),
				(troop_slot_eq, "$troop_trees", 850, ":party_stack_troop_id_g_encountered_party_0"),
				(str_store_string, 5, "str_bandit_approach_swamp"),
			(else_try),
				(troop_slot_eq, "$troop_trees", 849, ":party_stack_troop_id_g_encountered_party_0"),
				(str_store_string, 5, "str_bandit_approach_thickets"),
			(else_try),
				(troop_slot_eq, "$troop_trees", 848, ":party_stack_troop_id_g_encountered_party_0"),
				(str_store_string, 5, "str_bandit_approach_cove"),
			(try_end),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_ai_substate, 0),
				(str_store_string, 3, "str_bandit_hideout_preattack"),
			(else_try),
				(party_get_template_id, ":template_id_l_g_encountered_party", "$g_encountered_party"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_looter_lair"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_looter_lair_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_looter_lair_e"),
				(party_slot_eq, "$g_encountered_party", slot_party_ai_substate, 1),
				(str_store_string, 3, "str_lost_startup_hideout_attack"),
			(else_try),
				(party_slot_eq, "$g_encountered_party", slot_party_ai_substate, 1),
				(str_store_string, 3, "str_bandit_hideout_failure"),
			(else_try),
				(party_slot_eq, "$g_encountered_party", slot_party_ai_substate, 2),
				(str_store_string, 3, "str_bandit_hideout_success"),
			(try_end),
		(try_end)
	],
	[
		("continue_1",
		[
			(party_slot_eq, "$g_encountered_party", slot_party_ai_substate, 0)
		],
		"Attack the hideout...",
		[
			(party_set_slot, "$g_encountered_party", slot_party_ai_substate, 1),
			(party_get_template_id, ":template_id_l_g_encountered_party", "$g_encountered_party"),
			(assign, "$g_enemy_party", "$g_encountered_party"),
			(try_begin),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_sea_raider_lair"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_sea_raider_lair_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_sea_raider_lair_e"),
				(troop_get_slot, ":troop_trees_848", "$troop_trees", 848),
				(assign, ":value", "scn_lair_sea_raiders"),
			(else_try),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_forest_bandit_lair"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_forest_bandit_lair_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_forest_bandit_lair_e"),
				(troop_get_slot, ":troop_trees_848", "$troop_trees", 847),
				(assign, ":value", "scn_lair_forest_bandits"),
			(else_try),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_desert_bandit_lair"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_desert_bandit_lair_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_desert_bandit_lair_e"),
				(troop_get_slot, ":troop_trees_848", "$troop_trees", 851),
				(assign, ":value", "scn_lair_desert_bandits"),
			(else_try),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_mountain_bandit_lair"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_mountain_bandit_lair_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_mountain_bandit_lair_e"),
				(troop_get_slot, ":troop_trees_848", "$troop_trees", 846),
				(assign, ":value", "scn_lair_mountain_bandits"),
			(else_try),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_taiga_bandit_lair"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_taiga_bandit_lair_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_taiga_bandit_lair_e"),
				(troop_get_slot, ":troop_trees_848", "$troop_trees", 850),
				(assign, ":value", "scn_lair_taiga_bandits"),
			(else_try),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_steppe_bandit_lair"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_steppe_bandit_lair_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_steppe_bandit_lair_e"),
				(troop_get_slot, ":troop_trees_848", "$troop_trees", 849),
				(assign, ":value", "scn_lair_steppe_bandits"),
			(else_try),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_looter_lair"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_looter_lair_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_looter_lair_e"),
				(troop_get_slot, ":troop_trees_848", "$troop_trees", 843),
				(store_faction_of_party, ":faction_of_party_g_starting_town", "$g_starting_town"),
				(try_begin),
					(eq, ":faction_of_party_g_starting_town", "fac_kingdom_1"),
					(assign, ":value", "scn_lair_forest_bandits"),
				(else_try),
					(eq, ":faction_of_party_g_starting_town", "fac_kingdom_2"),
					(assign, ":value", "scn_lair_taiga_bandits"),
				(else_try),
					(eq, ":faction_of_party_g_starting_town", "fac_kingdom_3"),
					(assign, ":value", "scn_lair_steppe_bandits"),
				(else_try),
					(eq, ":faction_of_party_g_starting_town", "fac_kingdom_4"),
					(assign, ":value", "scn_lair_sea_raiders"),
				(else_try),
					(eq, ":faction_of_party_g_starting_town", "fac_kingdom_5"),
					(assign, ":value", "scn_lair_mountain_bandits"),
				(else_try),
					(eq, ":faction_of_party_g_starting_town", "fac_kingdom_6"),
					(assign, ":value", "scn_lair_desert_bandits"),
				(try_end),
			(try_end),
			(modify_visitors_at_site, ":value"),
			(reset_visitors),
			(store_character_level, ":character_level_player", "trp_player"),
			(store_add, ":value_2", 5, ":character_level_player"),
			(val_div, ":value_2", 3),
			(try_for_range, ":unused", 0, ":value_2"),
				(store_random_in_range, ":random_in_range_2_11", 2, 11),
				(set_visitor, ":random_in_range_2_11", ":troop_trees_848", 1),
			(try_end),
			(party_clear, "p_temp_casualties"),
			(set_party_battle_mode),
			(set_battle_advantage, 0),
			(assign, "$g_battle_result", 0),
			(set_jump_mission, "mt_bandit_lair"),
			(jump_to_scene, ":value"),
			(change_screen_mission)
		], "."),

		("leave_no_attack",
		[
			(party_slot_eq, "$g_encountered_party", slot_party_ai_substate, 0)
		],
		"Leave...",
		[
			(change_screen_return)
		], "."),

		("leave_victory",
		[
			(party_slot_eq, "$g_encountered_party", slot_party_ai_substate, 2)
		],
		"Continue...",
		[
			(try_begin),
				(eq, "$troop_trees", "trp_troop_tree_0"),
				(assign, ":value", "pt_forest_bandits"),
				(assign, ":value_2", "pt_looters_r"),
			(else_try),
				(eq, "$troop_trees", "trp_troop_tree_1"),
				(assign, ":value", "pt_forest_bandits_r"),
				(assign, ":value_2", "pt_looters_e"),
			(else_try),
				(eq, "$troop_trees", "trp_troop_tree_2"),
				(assign, ":value", "pt_forest_bandits_e"),
				(assign, ":value_2", "pt_deserters"),
			(try_end),
			(try_for_range, ":var_3", ":value", ":value_2"),
				(party_template_slot_eq, ":var_3", slot_party_template_lair_party, "$g_encountered_party"),
				(party_template_set_slot, ":var_3", slot_party_template_lair_party, 0),
			(try_end),
			(party_get_template_id, ":template_id_l_g_encountered_party", "$g_encountered_party"),
			(try_begin),
				(neq, ":template_id_l_g_encountered_party", "pt_looter_lair"),
				(neq, ":template_id_l_g_encountered_party", "pt_looter_lair_r"),
				(neq, ":template_id_l_g_encountered_party", "pt_looter_lair_e"),
				(check_quest_active, "qst_destroy_bandit_lair"),
				(quest_slot_eq, "qst_destroy_bandit_lair", slot_quest_target_party, "$g_encountered_party"),
				(call_script, "script_succeed_quest", "qst_destroy_bandit_lair"),
			(try_end),
			(assign, "$g_leave_encounter", 0),
			(change_screen_return),
			(try_begin),
				(eq, "$loot_screen_shown", 0),
				(assign, "$loot_screen_shown", 1),
				(try_begin),
					(gt, "$g_ally_party", 0),
					(call_script, "script_party_add_party", "$g_ally_party", "p_temp_party"),
				(else_try),
					(party_get_num_attached_parties, ":num_attached_parties_main_party", "p_main_party"),
					(gt, ":num_attached_parties_main_party", 0),
					(party_get_attached_party_with_rank, ":attached_party_with_rank_main_party_0", "p_main_party", 0),
					(call_script, "script_party_add_party", ":attached_party_with_rank_main_party_0", "p_temp_party"),
				(try_end),
				(troop_clear_inventory, "trp_temp_troop"),
				(party_get_num_companion_stacks, ":num_companion_stacks_temp_casualties", "p_temp_casualties"),
				(try_for_range, ":number", 0, ":num_companion_stacks_temp_casualties"),
					(party_stack_get_troop_id, ":party_stack_troop_id_temp_casualties_number", "p_temp_casualties", ":number"),
					(try_begin),
						(party_stack_get_size, ":party_stack_size_temp_casualties_number", "p_temp_casualties", ":number"),
						(party_stack_get_troop_id, ":party_stack_troop_id_temp_casualties_number", "p_temp_casualties", ":number"),
						(gt, ":party_stack_size_temp_casualties_number", 0),
						(party_add_members, "p_total_enemy_casualties", ":party_stack_troop_id_temp_casualties_number", ":party_stack_size_temp_casualties_number"),
						(party_stack_get_num_wounded, ":party_stack_num_wounded_temp_casualties_number", "p_temp_casualties", ":number"),
						(gt, ":party_stack_num_wounded_temp_casualties_number", 0),
						(party_wound_members, "p_total_enemy_casualties", ":party_stack_troop_id_temp_casualties_number", ":party_stack_num_wounded_temp_casualties_number"),
					(try_end),
				(try_end),
				(call_script, "script_party_calculate_loot", "p_total_enemy_casualties"),
				(gt, reg0, 0),
				(troop_sort_inventory, "trp_temp_troop"),
				(assign, ":var_12", 0),
				(party_get_num_companion_stacks, ":num_companion_stacks_temp_casualties", "p_main_party"),
				(try_for_range, ":number", 0, ":num_companion_stacks_temp_casualties"),
					(party_stack_get_troop_id, ":party_stack_troop_id_temp_casualties_number", "p_main_party", ":number"),
					(is_between, ":party_stack_troop_id_temp_casualties_number", "trp_npc1", "trp_kingdom_1_lord"),
					(val_add, ":var_12", 1),
				(try_end),
				(try_begin),
					(gt, ":var_12", 0),
					(assign, "$return_menu", "mnu_bandit_lair"),
					(jump_to_menu, "mnu_manage_loot_pool"),
				(else_try),
					(change_screen_loot, "trp_temp_troop"),
				(try_end),
			(try_end),
			(try_begin),
				(ge, "$g_encountered_party", 0),
				(party_is_active, "$g_encountered_party"),
				(party_get_template_id, ":template_id_l_g_encountered_party", "$g_encountered_party"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_looter_lair"),
				(this_or_next|eq, ":template_id_l_g_encountered_party", "pt_looter_lair_r"),
				(eq, ":template_id_l_g_encountered_party", "pt_looter_lair_e"),
				(remove_party, "$g_encountered_party"),
			(try_end)
		], "."),

		("leave_defeat",
		[
			(party_slot_eq, "$g_encountered_party", slot_party_ai_substate, 1)
		],
		"Continue...",
		[
			(try_begin),
				(eq, "$troop_trees", "trp_troop_tree_0"),
				(assign, ":value", "pt_forest_bandits"),
				(assign, ":value_2", "pt_looters_r"),
			(else_try),
				(eq, "$troop_trees", "trp_troop_tree_1"),
				(assign, ":value", "pt_forest_bandits_r"),
				(assign, ":value_2", "pt_looters_e"),
			(else_try),
				(eq, "$troop_trees", "trp_troop_tree_2"),
				(assign, ":value", "pt_forest_bandits_e"),
				(assign, ":value_2", "pt_deserters"),
			(try_end),
			(try_for_range, ":var_3", ":value", ":value_2"),
				(party_template_slot_eq, ":var_3", slot_party_template_lair_party, "$g_encountered_party"),
				(party_template_set_slot, ":var_3", slot_party_template_lair_party, 0),
			(try_end),
			(try_begin),
				(party_get_template_id, ":template_id_l_g_encountered_party", "$g_encountered_party"),
				(neq, ":template_id_l_g_encountered_party", "pt_looter_lair"),
				(neq, ":template_id_l_g_encountered_party", "pt_looter_lair_r"),
				(neq, ":template_id_l_g_encountered_party", "pt_looter_lair_e"),
				(check_quest_active, "qst_destroy_bandit_lair"),
				(quest_slot_eq, "qst_destroy_bandit_lair", slot_quest_target_party, "$g_encountered_party"),
				(call_script, "script_fail_quest", "qst_destroy_bandit_lair"),
			(try_end),
			(try_begin),
				(ge, "$g_encountered_party", 0),
				(party_is_active, "$g_encountered_party"),
				(party_get_template_id, ":template_id_l_g_encountered_party", "$g_encountered_party"),
				(neq, ":template_id_l_g_encountered_party", "pt_looter_lair"),
				(neq, ":template_id_l_g_encountered_party", "pt_looter_lair_r"),
				(neq, ":template_id_l_g_encountered_party", "pt_looter_lair_e"),
				(remove_party, "$g_encountered_party"),
			(try_end),
			(assign, "$g_leave_encounter", 0),
			(try_begin),
				(party_is_active, "$g_encountered_party"),
				(party_set_slot, "$g_encountered_party", slot_party_ai_substate, 0),
			(try_end),
			(change_screen_return)
		], ".")
	]
	),

	("notification_player_faction_political_issue_resolved", 0, "After consulting with the peers of the realm, {s10} has decided to confer {s11} on {s12}.",
	"none",
	[
		(assign, ":var_1", "$g_notification_menu_var1"),
		(assign, ":var_2", "$g_notification_menu_var2"),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(str_store_troop_name, 10, ":players_kingdom_leader"),
		(try_begin),
			(eq, ":var_1", 1),
			(str_store_string, 11, "str_the_marshalship"),
		(else_try),
			(str_store_party_name, 11, ":var_1"),
		(try_end),
		(str_store_troop_name, 12, ":var_2")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_player_faction_political_issue_resolved_for_player", 0, "After consulting with the peers of the realm, {s10} has decided to confer {s11} on you. You may decline the honor, but it will probably mean that you will not receive other awards for a little while.{s12}",
	"none",
	[
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(str_store_troop_name, 10, ":players_kingdom_leader"),
		(faction_get_slot, ":players_kingdom_political_issue", "$players_kingdom", slot_faction_political_issue),
		(try_begin),
			(eq, ":players_kingdom_political_issue", 1),
			(str_store_string, 11, "str_the_marshalship"),
			(str_store_string, 12, "@^^Note that so long as you remain marshal, the lords of the realm will be expecting you to lead them on campaign. So, if you are awaiting a feast, either for a wedding or for other purposes, you may wish to resign the marshalship by speaking to your liege."),
		(else_try),
			(str_clear, 12),
			(str_store_party_name, 11, ":players_kingdom_political_issue"),
		(try_end)
	],
	[
		("accept",
		[],
		"Accept the honor",
		[
			(faction_get_slot, ":players_kingdom_political_issue", "$players_kingdom", slot_faction_political_issue),
			(try_begin),
				(eq, ":players_kingdom_political_issue", 1),
				(call_script, "script_check_and_finish_active_army_quests_for_faction", "$players_kingdom"),
				(call_script, "script_appoint_faction_marshall", "$players_kingdom", "trp_player"),
				(unlock_achievement, 41),
			(else_try),
				(call_script, "script_give_center_to_lord", ":players_kingdom_political_issue", "trp_player", 0),
			(try_end),
			(faction_set_slot, "$players_kingdom", slot_faction_political_issue, 0),
			(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(eq, ":faction_of_troop_troop", "$players_kingdom"),
				(troop_set_slot, ":troop", slot_troop_stance_on_faction_issue, -1),
			(try_end),
			(change_screen_return)
		], "."),

		("decline",
		[],
		"Decline the honor",
		[
			(faction_get_slot, ":players_kingdom_political_issue", "$players_kingdom", slot_faction_political_issue),
			(try_begin),
				(is_between, ":players_kingdom_political_issue", "p_town_1", "p_salt_mine"),
				(assign, "$g_dont_give_fief_to_player_days", 30),
			(else_try),
				(assign, "$g_dont_give_marshalship_to_player_days", 30),
			(try_end),
			(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(eq, ":faction_of_troop_troop", "$players_kingdom"),
				(troop_set_slot, ":troop", slot_troop_stance_on_faction_issue, -1),
			(try_end),
			(change_screen_return)
		], ".")
	]
	),

	("start_phase_3", mnf_disable_all_keys, "{s16}^^Follwing a long trek through the Rainwood, you finally see the Weeping Town in the distance. You are exhausted by the time you find the inn, where you quickly stash your belongings, and go in search of a decent tavern where you can have a well-deserved dinner. According to an old blind man, sitting in the corner between two buildings and drinking a mug of stale ale, a kraken has been seen off the coast of Dorne, and a five-headed calf has been born, killing its mother in the process, surely an omen to be taken seriously. Dismissing the old fool as crazy, you continue towards the tavern. All of a sudden, you hear a sound that stands the hairs of your neck on end -- the rasp of a blade sliding from its scabbard...",
	"none",
	[
		(assign, ":value", 1),
		(try_begin),
			(eq, "$current_startup_quest_phase", 1),
			(try_begin),
				(eq, "$g_killed_first_bandit", 1),
				(str_store_string, 11, "str_killed_bandit_at_alley_fight"),
			(else_try),
				(str_store_string, 11, "str_wounded_by_bandit_at_alley_fight"),
			(try_end),
			(jump_to_menu, "mnu_start_phase_4"),
			(assign, ":value", 0),
		(else_try),
			(eq, "$current_startup_quest_phase", 3),
			(try_begin),
				(eq, "$g_killed_first_bandit", 1),
				(str_store_string, 11, "str_killed_bandit_at_alley_fight"),
			(else_try),
				(str_store_string, 11, "str_wounded_by_bandit_at_alley_fight"),
			(try_end),
			(jump_to_menu, "mnu_start_phase_4"),
			(assign, ":value", 0),
		(try_end),
		(str_store_party_name, 1, "$g_starting_town"),
		(str_clear, 16),
		(eq, ":value", 1)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(assign, "$g_starting_town", "$current_town"),
			(call_script, "script_player_arrived"),
			(party_set_morale, "p_main_party", 100),
			(set_encountered_party, "$current_town"),
			(call_script, "script_prepare_alley_to_fight")
		], ".")
	]
	),

	("start_phase_4", mnf_disable_all_keys, "{s11}",
	"none",
	[
		(assign, ":value", 1),
		(try_begin),
			(eq, "$current_startup_quest_phase", 2),
			(change_screen_return),
			(assign, ":value", 0),
		(else_try),
			(eq, "$current_startup_quest_phase", 3),
			(str_store_string, 11, "str_merchant_and_you_call_some_townsmen_and_guards_to_get_ready_and_you_get_out_from_tavern"),
		(else_try),
			(eq, "$current_startup_quest_phase", 4),
			(try_begin),
				(eq, "$g_killed_first_bandit", 1),
				(str_store_string, 11, "str_town_fight_ended_you_and_citizens_cleaned_town_from_bandits"),
			(else_try),
				(str_store_string, 11, "str_town_fight_ended_you_and_citizens_cleaned_town_from_bandits_you_wounded"),
			(try_end),
		(try_end),
		(eq, ":value", 1)
	],
	[
		("continue",
		[
			(this_or_next|eq, "$current_startup_quest_phase", 1),
			(eq, "$current_startup_quest_phase", 4)
		],
		"Continue...",
		[
			(assign, "$town_entered", 1),
			(try_begin),
				(eq, "$current_town", "p_town_1"),
				(assign, ":value", "trp_nord_merchant"),
				(assign, ":value_2", "scn_town_1_room"),
			(else_try),
				(eq, "$current_town", "p_town_1"),
				(assign, ":value", "trp_rhodok_merchant"),
				(assign, ":value_2", "scn_town_1_room"),
			(else_try),
				(eq, "$current_town", "p_town_6"),
				(assign, ":value", "trp_swadian_merchant"),
				(assign, ":value_2", "scn_town_6_room"),
			(else_try),
				(eq, "$current_town", "p_town_8"),
				(assign, ":value", "trp_vaegir_merchant"),
				(assign, ":value_2", "scn_town_8_room"),
			(else_try),
				(eq, "$current_town", "p_town_1"),
				(assign, ":value", "trp_khergit_merchant"),
				(assign, ":value_2", "scn_town_1_room"),
			(else_try),
				(eq, "$current_town", "p_town_19"),
				(assign, ":value", "trp_sarranid_merchant"),
				(assign, ":value_2", "scn_town_19_room"),
			(try_end),
			(modify_visitors_at_site, ":value_2"),
			(reset_visitors),
			(set_visitor, 0, "trp_player"),
			(set_visitor, 9, ":value"),
			(assign, "$talk_context", 21),
			(assign, "$dialog_with_merchant_ended", 0),
			(set_jump_mission, "mt_meeting_merchant"),
			(jump_to_scene, ":value_2"),
			(change_screen_mission)
		], "."),

		("continue",
		[
			(eq, "$current_startup_quest_phase", 3)
		],
		"Continue...",
		[
			(call_script, "script_prepare_town_to_fight")
		], ".")
	]
	),

	("lost_tavern_duel", mnf_disable_all_keys, "{s11}",
	"none",
	[
		(try_begin),
			(agent_get_troop_id, ":troop_id_l_g_main_attacker_agent", "$g_main_attacker_agent"),
			(eq, ":troop_id_l_g_main_attacker_agent", "trp_belligerent_drunk"),
			(str_store_string, 11, "str_lost_tavern_duel_ordinary"),
		(else_try),
			(agent_get_troop_id, ":troop_id_l_g_main_attacker_agent", "$g_main_attacker_agent"),
			(eq, ":troop_id_l_g_main_attacker_agent", "trp_hired_assassin"),
			(str_store_string, 11, "str_lost_tavern_duel_assassin"),
		(try_end),
		(troop_set_slot, "trp_hired_assassin", slot_troop_cur_center, -1)
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("establish_court", mnf_disable_all_keys, "To establish {s4} as your court will require a small refurbishment. In particular, you will need a set of tools and a bolt of linen. it may also take a short while for some of your followers to relocate here. Do you wish to proceed?",
	"none",
	[
		(str_store_party_name, 4, "$g_encountered_party")
	],
	[
		("establish",
		[
			(player_has_item, "itm_trade_tools"),
			(player_has_item, "itm_trade_linen")
		],
		"Establish {s4} as your court",
		[
			(assign, "$g_player_court", "$current_town"),
			(troop_remove_item, "trp_player", "itm_trade_tools"),
			(troop_remove_item, "trp_player", "itm_trade_linen"),
			(jump_to_menu, "mnu_town")
		], "."),

		("continue",
		[],
		"Hold off...",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("notification_relieved_as_marshal", mnf_disable_all_keys, "{s4} wishes to inform you that your services as marshal are no longer required. In honor of valiant efforts on behalf of the realm over the last {reg4} days, however, {reg8?she:he} offers you a purse of {reg5} coins.",
	"none",
	[
		(assign, reg4, "$g_player_days_as_marshal"),
		(store_div, ":value", "$g_player_days_as_marshal", 4),
		(val_min, ":value", 20),
		(store_mul, ":value_2", "$g_player_days_as_marshal", 50),
		(val_max, ":value_2", 200),
		(val_min, ":value_2", 4000),
		(troop_add_gold, "trp_player", ":value_2"),
		(call_script, "script_change_troop_renown", "trp_player", ":value"),
		(assign, "$g_player_days_as_marshal", 0),
		(assign, "$g_dont_give_marshalship_to_player_days", 15),
		(assign, reg5, ":value_2"),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(str_store_troop_name, 4, ":players_kingdom_leader"),
		(assign, ":var_4", reg0),
		(call_script, "script_dplmc_store_troop_is_female", ":players_kingdom_leader"),
		(assign, reg8, reg0),
		(assign, reg0, ":var_4")
	],
	[
		("continue",
		[],
		"Continue",
		[
			(change_screen_return)
		], ".")
	]
	),

	("notification_give_liege_gift", 0, "A messenger boy, riding hard, gallops up to you. He stops and wheels his horse, which paws the ground impatiently. He hands you a package, and with that, he is gone.",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("manage_loot_pool", 0, "{s10}",
	"none",
	[
		(assign, "$pool_troop", "trp_temp_troop"),
		(assign, reg20, 0),
		(troop_get_inventory_capacity, ":inventory_capacity_l_pool_troop", "$pool_troop"),
		(try_for_range, ":number", 0, ":inventory_capacity_l_pool_troop"),
			(troop_get_inventory_slot, ":inventory_slot_pool_troop_number", "$pool_troop", ":number"),
			(ge, ":inventory_slot_pool_troop_number", 0),
			(val_add, reg20, 1),
		(try_end),
		(try_begin),
			(eq, reg20, 0),
			(str_store_string, 10, "str_item_pool_no_items"),
			(str_store_string, 20, "str_item_pool_leave"),
		(else_try),
			(eq, reg20, 1),
			(str_store_string, 10, "str_item_pool_one_item"),
			(str_store_string, 20, "str_item_pool_abandon"),
		(else_try),
			(str_store_string, 10, "str_item_pool_many_items"),
			(str_store_string, 20, "str_item_pool_abandon"),
		(try_end)
	],
	[
		("loot",
		[],
		"Access the item pool.",
		[
			(change_screen_loot, "$pool_troop")
		], "."),

		("auto_loot_leave_with_nothing",
		[
			(gt, reg20, 0),
			(assign, reg1, "$g_price_threshold_for_picking"),
			(gt, reg1, 0)
		],
		"Pick the items which price higher than {reg1} coins and continue.",
		[
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
				(is_between, ":party_stack_troop_id_main_party_number", "trp_npc1", "trp_kingdom_1_lord"),
				(call_script, "script_transfer_special_inventory", "$pool_troop", ":party_stack_troop_id_main_party_number"),
			(try_end),
			(call_script, "script_sort_food", "trp_player"),
			(jump_to_menu, "$return_menu")
		], "."),

		("auto_loot_leave",
		[],
		"{s20}",
		[
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
				(is_between, ":party_stack_troop_id_main_party_number", "trp_npc1", "trp_kingdom_1_lord"),
				(call_script, "script_transfer_inventory", "$pool_troop", ":party_stack_troop_id_main_party_number", 1),
			(try_end),
			(call_script, "script_sort_food", "trp_player"),
			(jump_to_menu, "$return_menu")
		], ".")
	]
	),

	("auto_loot", 0, "Your companions will automatically grab items from the item pool based on their pre-selected upgrade options. Companions listed first in the party order will have first pick. Any equipment no longer needed will be placed back into the item pool. Are you sure you wish to do this?",
	"none",
	[],
	[
		("No",
		[],
		"No, I've changed my mind.",
		[
			(jump_to_menu, "mnu_manage_loot_pool")
		], "."),

		("Yes",
		[],
		"Yes, perform the upgrading.",
		[
			(call_script, "script_auto_loot_all"),
			(jump_to_menu, "mnu_manage_loot_pool")
		], ".")
	]
	),

	("choose_options_1", 0, "Choose the troop trees you'd like to use. Once choosen you can't change it.^^The Native tree is very simple and straight forward, while the Expanded tree is complex with a lot of options and variety. The Reworked tree is a compromise between both other trees.",
	"none",
	[],
	[
		("native_troop_trees",
		[],
		"Native troop trees",
		[
			(assign, "$troop_trees", "trp_troop_tree_0"),
			(call_script, "script_initialize_troop_tree_sets"),
			(jump_to_menu, "mnu_choose_options_2")
		], "."),

		("reworked_troop_trees",
		[],
		"Reworked troop trees",
		[
			(assign, "$troop_trees", "trp_troop_tree_1"),
			(call_script, "script_initialize_troop_tree_sets"),
			(jump_to_menu, "mnu_choose_options_2")
		], "."),

		("expanded_troop_trees",
		[],
		"Expanded troop trees",
		[
			(assign, "$troop_trees", "trp_troop_tree_2"),
			(call_script, "script_initialize_troop_tree_sets"),
			(jump_to_menu, "mnu_choose_options_2")
		], "."),

		("go_back",
		[],
		"Go back",
		[
			(jump_to_menu, "mnu_start_game_options")
		], ".")
	]
	),

	("choose_options_2", 0, "Assemble all companions at the tavern of the first encountered town?^^When you assemble them, you might take a look upstairs in the tavern, since a lot of companions might be lingering in the hallway, sitting on the stairs or inspecting their rooms. If your favorite companion isn't present, you might want to quit and re-enter the tavern: sometimes they don't all fit.",
	"none",
	[],
	[
		("yes_npcs",
		[],
		"Yes",
		[
			(assign, "$g_gether_npcs", 1),
			(jump_to_menu, "mnu_choose_options_3")
		], "."),

		("no_npcs",
		[],
		"No",
		[
			(assign, "$g_gether_npcs", 0),
			(jump_to_menu, "mnu_choose_options_3")
		], "."),

		("go_back",
		[],
		"Go back",
		[
			(jump_to_menu, "mnu_choose_options_1")
		], ".")
	]
	),

	("choose_options_3", 0, "Do you wish to play with the fog of war?",
	"none",
	[],
	[
		("yes_npcs",
		[],
		"Yes",
		[
			(assign, "$g_fog", 1),
			(jump_to_menu, "mnu_choose_options_end"),
			(try_for_range, ":party", "p_town_1", "p_bridge_14"),
				(party_set_slot, ":party", 454, 1),
				(party_set_flags, ":party", 16384, 0),
			(try_end)
		], "."),

		("no_npcs",
		[],
		"No",
		[
			(assign, "$g_fog", 0),
			(jump_to_menu, "mnu_choose_options_end")
		], "."),

		("go_back",
		[],
		"Go back",
		[
			(jump_to_menu, "mnu_choose_options_2")
		], ".")
	]
	),

	("choose_options_end", 0, "Game options selection complete.",
	"none",
	[],
	[
		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_start_game_0"),
			(assign, "$g_date", 0)
		], "."),

		("go_back",
		[],
		"Go back",
		[
			(jump_to_menu, "mnu_choose_options_3")
		], ".")
	]
	),

	("town_menu_cheats", 0, "CHEATS.",
	"none",
	[],
	[
		("town_alley",
		[
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT: Go to the alley.",
		[
			(party_get_slot, reg11, "$current_town", slot_town_alley),
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, reg11),
			(change_screen_mission)
		], "."),

		("castle_cheat_interior",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! Interior.",
		[
			(set_jump_mission, "mt_ai_training"),
			(party_get_slot, ":current_town_town_castle", "$current_town", slot_town_castle),
			(jump_to_scene, ":current_town_town_castle"),
			(change_screen_mission)
		], "."),

		("castle_cheat_town_exterior",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! Exterior.",
		[
			(try_begin),
				(party_slot_eq, "$current_town", slot_party_type, 2),
				(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
			(else_try),
				(party_get_slot, ":current_town_town_center", "$current_town", slot_town_center),
			(try_end),
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, ":current_town_town_center"),
			(change_screen_mission)
		], "."),

		("castle_cheat_dungeon",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! Prison.",
		[
			(set_jump_mission, "mt_ai_training"),
			(party_get_slot, ":current_town_town_prison", "$current_town", slot_town_prison),
			(jump_to_scene, ":current_town_town_prison"),
			(change_screen_mission)
		], "."),

		("castle_cheat_town_walls",
		[
			(eq, "$cheat_mode", 1),
			(party_slot_eq, "$current_town", slot_party_type, 3)
		],
		"{!}CHEAT! Town Walls.",
		[
			(party_get_slot, ":current_town_town_walls", "$current_town", slot_town_walls),
			(set_jump_mission, "mt_ai_training"),
			(jump_to_scene, ":current_town_town_walls"),
			(change_screen_mission)
		], "."),

		("center_reports",
		[
			(eq, "$cheat_mode", 1)
		],
		"{!}CHEAT! Show reports.",
		[
			(jump_to_menu, "mnu_center_reports")
		], "."),

		("cheat_town_start_siege",
		[
			(eq, "$cheat_mode", 1),
			(party_slot_eq, "$g_encountered_party", slot_center_is_besieged_by, -1),
			(lt, "$g_encountered_party_2", 1),
			(call_script, "script_party_count_fit_for_battle", "p_main_party"),
			(gt, reg0, 1),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(assign, reg6, 1),
			(else_try),
				(assign, reg6, 0),
			(try_end)
		],
		"{!}CHEAT: Besiege the {reg6?town:castle}...",
		[
			(assign, "$g_player_besiege_town", "$g_encountered_party"),
			(jump_to_menu, "mnu_castle_besiege")
		], "."),

		("back_to_town_menu",
		[],
		"Head back.",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("dplmc_notification_alliance_declared", 0, "Alliance Agreement^^{s1} and {s2} have formed an alliance!^{s57}",
	"none",
	[
		(str_clear, 57),
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(str_store_faction_name, 2, "$g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(store_sub, ":value", "$g_notification_menu_var1", "fac_player_supporters_faction"),
		(store_sub, ":value_2", "$g_notification_menu_var2", "fac_player_supporters_faction"),
		(val_mul, ":value", 128),
		(val_add, ":value", ":value_2"),
		(set_game_menu_tableau_mesh, "tableau_2_factions_mesh", ":value", 0)
	],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_notification_defensive_declared", 0, "Defensive Pact^^{s1} and {s2} have agreed to a defensive pact!^{s57}",
	"none",
	[
		(str_clear, 57),
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(str_store_faction_name, 2, "$g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(store_sub, ":value", "$g_notification_menu_var1", "fac_player_supporters_faction"),
		(store_sub, ":value_2", "$g_notification_menu_var2", "fac_player_supporters_faction"),
		(val_mul, ":value", 128),
		(val_add, ":value", ":value_2"),
		(set_game_menu_tableau_mesh, "tableau_2_factions_mesh", ":value", 0)
	],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_notification_trade_declared", 0, "Trade Agreement^^{s1} and {s2} have signed a trade agreement!^{s57}",
	"none",
	[
		(str_clear, 57),
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(str_store_faction_name, 2, "$g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(store_sub, ":value", "$g_notification_menu_var1", "fac_player_supporters_faction"),
		(store_sub, ":value_2", "$g_notification_menu_var2", "fac_player_supporters_faction"),
		(val_mul, ":value", 128),
		(val_add, ":value", ":value_2"),
		(set_game_menu_tableau_mesh, "tableau_2_factions_mesh", ":value", 0)
	],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_notification_nonaggression_declared", 0, "Non-aggression Treaty^^{s1} and {s2} have concluded a non-aggression treaty!^{s57}",
	"none",
	[
		(str_clear, 57),
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(str_store_faction_name, 2, "$g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(store_sub, ":value", "$g_notification_menu_var1", "fac_player_supporters_faction"),
		(store_sub, ":value_2", "$g_notification_menu_var2", "fac_player_supporters_faction"),
		(val_mul, ":value", 128),
		(val_add, ":value", ":value_2"),
		(set_game_menu_tableau_mesh, "tableau_2_factions_mesh", ":value", 0)
	],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_question_alliance_offer", 0, "You Receive an Alliance Offer^^{s1} wants to form an alliance with you. What is your answer?",
	"none",
	[
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0)
	],
	[
		("dplmc_alliance_offer_accept",
		[],
		"Accept",
		[
			(call_script, "script_dplmc_start_alliance_between_kingdoms", "fac_player_supporters_faction", "$g_notification_menu_var1", 1),
			(change_screen_return)
		], "."),

		("dplmc_alliance_offer_reject",
		[],
		"Reject",
		[
			(call_script, "script_change_player_relation_with_faction", "$g_notification_menu_var1", -2),
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_question_defensive_offer", 0, "You Receive a Pact Offer^^{s1} offers you a defensive pact. What is your answer?",
	"none",
	[
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0)
	],
	[
		("dplmc_defensive_offer_accept",
		[],
		"Accept",
		[
			(call_script, "script_dplmc_start_defensive_between_kingdoms", "fac_player_supporters_faction", "$g_notification_menu_var1", 1),
			(change_screen_return)
		], "."),

		("dplmc_defensive_offer_reject",
		[],
		"Reject",
		[
			(call_script, "script_change_player_relation_with_faction", "$g_notification_menu_var1", -2),
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_question_trade_offer", 0, "You Receive a Pact Offer^^{s1} offers you a trade pact. What is your answer?",
	"none",
	[
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0)
	],
	[
		("dplmc_trade_offer_accept",
		[],
		"Accept",
		[
			(call_script, "script_dplmc_start_trade_between_kingdoms", "fac_player_supporters_faction", "$g_notification_menu_var1", 1),
			(change_screen_return)
		], "."),

		("dplmc_trade_offer_reject",
		[],
		"Reject",
		[
			(call_script, "script_change_player_relation_with_faction", "$g_notification_menu_var1", -2),
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_question_nonaggression_offer", 0, "You Receive a Pact Offer^^{s1} offers you a non-aggression treaty. What is your answer?",
	"none",
	[
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0)
	],
	[
		("dplmc_nonaggression_offer_accept",
		[],
		"Accept",
		[
			(call_script, "script_dplmc_start_nonaggression_between_kingdoms", "fac_player_supporters_faction", "$g_notification_menu_var1", 1),
			(change_screen_return)
		], "."),

		("dplmc_nonaggression_offer_reject",
		[],
		"Reject",
		[
			(call_script, "script_change_player_relation_with_faction", "$g_notification_menu_var1", -2),
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_notification_alliance_expired", 0, "Alliance Has Expired^^The alliance between {s1} and {s2} has expired and was degraded to a defensive pact.",
	"none",
	[
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(str_store_faction_name, 2, "$g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0)
	],
	[
		("dplmc_continue",
		[],
		"Continue",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_notification_defensive_expired", 0, "Defensive Pact Has Expired^^The defensive pact between {s1} and {s2} has expired and was degraded to a trade agreement.",
	"none",
	[
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(str_store_faction_name, 2, "$g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0)
	],
	[
		("dplmc_continue",
		[],
		"Continue",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_notification_trade_expired", 0, "Trade Agreement Has Expired^^The trade agreement between {s1} and {s2} has expired and was degraded to a non-aggression treaty.",
	"none",
	[
		(str_store_faction_name, 1, "$g_notification_menu_var1"),
		(str_store_faction_name, 2, "$g_notification_menu_var2"),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0)
	],
	[
		("dplmc_continue",
		[],
		"Continue",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_dictate_terms", mnf_disable_all_keys|menu_text_color(0xff000000), "Dictate your peace terms.",
	"none",
	[
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0)
	],
	[
		("dplmc_demand_4000",
		[
			(gt, "$g_player_chamberlain", 0)
		],
		"Demand 4000 coins",
		[
			(call_script, "script_npc_decision_checklist_peace_or_war", "$g_notification_menu_var1", "fac_player_supporters_faction", -1),
			(assign, ":var_1", reg0),
			(store_random_in_range, ":random_in_range_0_4", 0, 4),
			(call_script, "script_change_player_relation_with_faction", "$g_notification_menu_var1", -3),
			(try_begin),
				(le, ":random_in_range_0_4", ":var_1"),
				(call_script, "script_dplmc_pay_into_treasury", 4000),
				(call_script, "script_diplomacy_start_peace_between_kingdoms", "$g_notification_menu_var1", "fac_player_supporters_faction", 1),
				(change_screen_return),
			(else_try),
				(jump_to_menu, "mnu_dplmc_deny_terms"),
			(try_end)
		], "."),

		("dplmc_demand_8000",
		[
			(gt, "$g_player_chamberlain", 0)
		],
		"Demand 8000 coins",
		[
			(call_script, "script_npc_decision_checklist_peace_or_war", "$g_notification_menu_var1", "fac_player_supporters_faction", -1),
			(assign, ":var_1", reg0),
			(val_mul, ":var_1", 2),
			(store_random_in_range, ":random_in_range_0_10", 0, 10),
			(call_script, "script_change_player_relation_with_faction", "$g_notification_menu_var1", -5),
			(try_begin),
				(le, ":random_in_range_0_10", ":var_1"),
				(call_script, "script_dplmc_pay_into_treasury", 8000),
				(call_script, "script_diplomacy_start_peace_between_kingdoms", "$g_notification_menu_var1", "fac_player_supporters_faction", 1),
				(change_screen_return),
			(else_try),
				(jump_to_menu, "mnu_dplmc_deny_terms"),
			(try_end)
		], "."),

		("dplmc_demand_castle",
		[
			(assign, ":value", 100),
			(assign, "$demanded_castle", -1),
			(assign, ":value_2", "fac_player_supporters_faction"),
			(try_begin),
				(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
				(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
				(ge, reg0, 50),
				(assign, ":value_2", "$players_kingdom"),
			(try_end),
			(try_for_range, ":party", "p_castle_1", "p_village_1"),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(eq, ":faction_of_party_party", "$g_notification_menu_var1"),
				(try_for_range, ":party_2", "p_town_1", "p_salt_mine"),
					(store_faction_of_party, ":faction_of_party_party_2", ":party_2"),
					(this_or_next|eq, ":value_2", ":faction_of_party_party_2"),
					(eq, ":faction_of_party_party_2", "fac_player_supporters_faction"),
					(store_distance_to_party_from_party, ":distance_to_party_from_party_party_2_party", ":party_2", ":party"),
					(lt, ":distance_to_party_from_party_party_2_party", ":value"),
					(assign, ":value", ":distance_to_party_from_party_party_2_party"),
					(assign, "$demanded_castle", ":party"),
					(str_store_party_name, 2, ":party"),
				(try_end),
			(try_end),
			(is_between, "$demanded_castle", "p_castle_1", "p_village_1")
		],
		"Demand {s2}.",
		[
			(call_script, "script_npc_decision_checklist_peace_or_war", "$g_notification_menu_var1", "fac_player_supporters_faction", -1),
			(assign, ":var_1", reg0),
			(val_mul, ":var_1", 2),
			(store_random_in_range, ":random_in_range_0_12", 0, 12),
			(call_script, "script_change_player_relation_with_faction", "$g_notification_menu_var1", -6),
			(try_begin),
				(le, ":random_in_range_0_12", ":var_1"),
				(assign, ":value", 0),
				(try_begin),
					(party_get_slot, ":demanded_castle_town_lord", "$demanded_castle", slot_town_lord),
					(ge, ":demanded_castle_town_lord", 1),
					(neg|troop_slot_ge, ":demanded_castle_town_lord", 8, 0),
					(try_begin),
						(this_or_next|troop_slot_eq, ":demanded_castle_town_lord", slot_troop_home, "$demanded_castle"),
						(party_slot_eq, "$demanded_castle", 402, ":demanded_castle_town_lord"),
						(store_random_in_range, ":random_in_range_0_12", 0, 24),
						(assign, ":value", 1),
						(le, ":random_in_range_0_12", ":var_1"),
						(assign, ":value", 0),
					(else_try),
						(troop_get_slot, ":demanded_castle_town_lord_original_faction", ":demanded_castle_town_lord", slot_troop_original_faction),
						(party_slot_eq, "$demanded_castle", slot_center_original_faction, ":demanded_castle_town_lord_original_faction"),
						(store_random_in_range, ":random_in_range_0_12", 0, 12),
						(assign, ":value", 1),
						(le, ":random_in_range_0_12", ":var_1"),
						(assign, ":value", 0),
					(try_end),
				(try_end),
				(eq, ":value", 0),
				(assign, ":value_2", "fac_player_supporters_faction"),
				(try_begin),
					(neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
					(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
					(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
					(ge, reg0, 50),
					(assign, ":value_2", "$players_kingdom"),
				(try_end),
				(call_script, "script_give_center_to_faction", "$demanded_castle", ":value_2"),
				(call_script, "script_diplomacy_start_peace_between_kingdoms", "$g_notification_menu_var1", ":value_2", 1),
				(change_screen_return),
			(else_try),
				(jump_to_menu, "mnu_dplmc_deny_terms"),
			(try_end)
		], "."),

		("dplmc_go_back",
		[],
		"Go back",
		[
			(jump_to_menu, "mnu_question_peace_offer")
		], ".")
	]
	),

	("dplmc_deny_terms", mnf_disable_all_keys|menu_text_color(0xff000000), "{s1} refuses your terms and is breaking off of negotiations.",
	"none",
	[
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "$g_notification_menu_var1", 0)
	],
	[
		("dplmc_continue",
		[],
		"Continue",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_village_riot_result", mnf_scale_picture, "{s9}",
	"none",
	[
		(try_begin),
			(eq, "$g_battle_result", 1),
			(jump_to_menu, "mnu_dplmc_village_riot_removed"),
		(else_try),
			(set_background_mesh, "mesh_pic_villageriot"),
			(str_store_string, 9, "@Try as you might, you could not defeat the rebelling village."),
		(try_end)
	],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(call_script, "script_change_player_relation_with_center", "$g_encountered_party", -3),
			(jump_to_menu, "mnu_village")
		], ".")
	]
	),

	("dplmc_village_riot_removed", mnf_disable_all_keys, "In bloody battle you and your men slaughter the rebels and regain control over the village. But there is not much left you can control.",
	"none",
	[
		(set_background_mesh, "mesh_pic_looted_village"),
		(party_set_slot, "$g_encountered_party", slot_village_infested_by_bandits, 0),
		(call_script, "script_village_set_state", "$current_town", 2)
	],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_village")
		], ".")
	]
	),

	("dplmc_town_riot_removed", mnf_disable_all_keys, "In bloody battle you and your men slaughter the rebels and regain control over the town.",
	"none",
	[],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(party_set_slot, "$g_encountered_party", slot_village_infested_by_bandits, 0),
			(assign, "$new_encounter", 1),
			(try_begin),
				(party_get_slot, ":g_encountered_party_town_lord", "$g_encountered_party", slot_town_lord),
				(troop_get_slot, ":g_encountered_party_town_lord_banner_scene_prop", ":g_encountered_party_town_lord", slot_troop_banner_scene_prop),
				(gt, ":g_encountered_party_town_lord_banner_scene_prop", 0),
				(val_sub, ":g_encountered_party_town_lord_banner_scene_prop", "spr_banner_a"),
				(val_add, ":g_encountered_party_town_lord_banner_scene_prop", "icon_banner_01"),
				(party_set_banner_icon, "$g_encountered_party", ":g_encountered_party_town_lord_banner_scene_prop"),
			(try_end),
			(jump_to_menu, "mnu_castle_outside")
		], ".")
	]
	),

	("dplmc_riot_negotiate", mnf_disable_all_keys, "You approach the angry crowd and begin negotiations. The leader of the riot demands {reg0} coins. He agrees to lay down arms if you are willing to pay.",
	"none",
	[
		(party_get_slot, ":g_encountered_party_center_player_relation", "$g_encountered_party", slot_center_player_relation),
		(val_min, ":g_encountered_party_center_player_relation", 0),
		(try_begin),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
			(val_sub, ":g_encountered_party_center_player_relation", 75),
			(set_background_mesh, "mesh_pic_townriot"),
		(else_try),
			(val_sub, ":g_encountered_party_center_player_relation", 50),
			(set_background_mesh, "mesh_pic_villageriot"),
		(try_end),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(val_add, ":g_encountered_party_center_player_relation", ":skill_level_persuasion_player"),
		(val_mul, ":g_encountered_party_center_player_relation", ":g_encountered_party_center_player_relation"),
		(assign, reg0, ":g_encountered_party_center_player_relation")
	],
	[
		("dplmc_pay_riot_treasury",
		[
			(gt, "$g_player_chamberlain", 0),
			(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
			(ge, ":troop_gold_household_possessions", reg0)
		],
		"Induce your seneschal to pay the money from the treasury.",
		[
			(call_script, "script_dplmc_withdraw_from_treasury", reg0),
			(party_set_slot, "$g_encountered_party", slot_village_infested_by_bandits, 0),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(jump_to_menu, "mnu_castle_outside"),
			(else_try),
				(jump_to_menu, "mnu_village"),
			(try_end)
		], "."),

		("dplmc_pay_riot_cash",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(ge, ":troop_gold_player", reg0)
		],
		"Pay cash.",
		[
			(troop_remove_gold, "trp_player", reg0),
			(party_set_slot, "$g_encountered_party", slot_village_infested_by_bandits, 0),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(jump_to_menu, "mnu_castle_outside"),
			(else_try),
				(jump_to_menu, "mnu_village"),
			(try_end)
		], "."),

		("dplmc_back",
		[],
		"Back...",
		[
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(jump_to_menu, "mnu_castle_outside"),
			(else_try),
				(jump_to_menu, "mnu_village"),
			(try_end)
		], ".")
	]
	),

	("dplmc_notification_riot", 0, "The peasants of {s1} launched a riot against you! In a surprise attack, men loyal to you have been slain. The remainder joined the angry crowd.",
	"none",
	[
		(str_store_party_name, 1, "$g_notification_menu_var1"),
		(try_begin),
			(party_slot_eq, "$g_notification_menu_var1", slot_party_type, 3),
			(set_background_mesh, "mesh_pic_townriot"),
		(else_try),
			(set_background_mesh, "mesh_pic_villageriot"),
		(try_end)
	],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_notification_appoint_chamberlain", 0, "As a lord of a fief you can now appoint a seneschal who resides at you court for a weekly salary of 15 coins. He will handle all financial affairs like collecting and determining taxes, paying wages and managing your estate. In addition he supervises money transfers between sovereigns giving you more diplomatic options.",
	"none",
	[],
	[
		("dplmc_appoint_default",
		[],
		"Appoint a prominent nobleman from the area.",
		[
			(call_script, "script_dplmc_appoint_chamberlain"),
			(jump_to_menu, "mnu_dplmc_chamberlain_confirm")
		], "."),

		("dplmc_continue",
		[],
		"Proceed without seneschal.",
		[
			(assign, "$g_player_chamberlain", -1),
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_chamberlain_confirm", 0, "Your seneschal can be found at your court. You should consult him if you want to give him any financial advice or you need greater amounts of money. You should always make sure that there is enough money in the treasury to pay for political affairs.",
	"none",
	[],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_notification_appoint_constable", 0, "As a lord of a fief you can now appoint a castellan who resides at you court for a weekly salary of 15 coins. He will recruit new troops and provide information about your army.",
	"none",
	[],
	[
		("dplmc_appoint_default",
		[],
		"Appoint a prominent nobleman from the area.",
		[
			(call_script, "script_dplmc_appoint_constable"),
			(jump_to_menu, "mnu_dplmc_constable_confirm")
		], "."),

		("dplmc_continue",
		[],
		"Proceed without castellan.",
		[
			(assign, "$g_player_constable", -1),
			(assign, "$g_constable_training_center", -1),
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_constable_confirm", 0, "Your castellan can be found at your court. You should consult him if you want to recruit new troops or get detailed information about your standing army.",
	"none",
	[],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_notification_appoint_chancellor", 0, "As a lord of a fief you can now appoint a chancellor who resides at you court for a weekly salary of 20 coins. He will be the keeper of your seal and conduct the correspondence between you and other important persons.",
	"none",
	[],
	[
		("dplmc_appoint_default",
		[],
		"Appoint a prominent nobleman from the area.",
		[
			(call_script, "script_dplmc_appoint_chancellor"),
			(jump_to_menu, "mnu_dplmc_chancellor_confirm")
		], "."),

		("dplmc_continue",
		[],
		"Proceed without maester.",
		[
			(assign, "$g_player_chancellor", -1),
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_chancellor_confirm", 0, "Your chancellor can be found at your court. You should consult him if you want to send messages or gifts.",
	"none",
	[],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_deserters", 0, "Some of your men don't believe that you will pay their wages and desert. Overall you lose: {s11} men.",
	"none",
	[
		(set_background_mesh, "mesh_pic_deserters"),
		(store_random_in_range, ":random_in_range_1_g_notification_menu_var1", 1, "$g_notification_menu_var1"),
		(call_script, "script_dplmc_player_troops_leave", ":random_in_range_1_g_notification_menu_var1"),
		(str_store_string, 11, "@{reg0}")
	],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_negotiate_besieger", 0, "You appear with a white flag at the top of the wall. After a while a negotiator of {s11} approaches you. He demands {s6} and all associated villages as well as {reg0} coins for safe conduct.",
	"none",
	[
		(party_get_slot, ":current_town_center_is_besieged_by", "$current_town", slot_center_is_besieged_by),
		(party_stack_get_troop_id, ":party_stack_troop_id_current_town_center_is_besieged_by_0", ":current_town_center_is_besieged_by", 0),
		(str_store_troop_name, 11, ":party_stack_troop_id_current_town_center_is_besieged_by_0"),
		(store_faction_of_troop, ":faction_of_troop_party_stack_troop_id_current_town_center_is_besieged_by_0", ":party_stack_troop_id_current_town_center_is_besieged_by_0"),
		(party_get_num_companions, ":num_companions_current_town_center_is_besieged_by", ":current_town_center_is_besieged_by"),
		(try_for_parties, ":var_5"),
			(ge, ":var_5", "p_spawn_points_end"),
			(neq, ":var_5", ":current_town_center_is_besieged_by"),
			(store_faction_of_party, ":faction_of_party_var_5", ":var_5"),
			(eq, ":faction_of_party_var_5", ":faction_of_troop_party_stack_troop_id_current_town_center_is_besieged_by_0"),
			(party_is_active, ":var_5"),
			(party_slot_eq, ":var_5", slot_party_ai_state, 11),
			(party_slot_eq, ":var_5", slot_party_ai_object, ":current_town_center_is_besieged_by"),
			(party_is_active, ":current_town_center_is_besieged_by"),
			(store_distance_to_party_from_party, ":distance_to_party_from_party_var_5_current_town_center_is_besieged_by", ":var_5", ":current_town_center_is_besieged_by"),
			(lt, ":distance_to_party_from_party_var_5_current_town_center_is_besieged_by", 25),
			(party_get_num_companions, ":num_companions_var_5", ":var_5"),
			(val_add, ":num_companions_current_town_center_is_besieged_by", ":num_companions_var_5"),
		(try_end),
		(assign, ":var_9", 0),
		(party_get_num_companion_stacks, ":num_companion_stacks_l_current_town", "$current_town"),
		(try_for_range, ":number", 0, ":num_companion_stacks_l_current_town"),
			(party_stack_get_size, ":party_stack_size_current_town_number", "$current_town", ":number"),
			(val_add, ":var_9", ":party_stack_size_current_town_number"),
		(try_end),
		(val_sub, ":num_companions_current_town_center_is_besieged_by", ":var_9"),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(val_mul, ":skill_level_persuasion_player", 10),
		(store_sub, "$diplomacy_var", ":num_companions_current_town_center_is_besieged_by", ":skill_level_persuasion_player"),
		(val_mul, "$diplomacy_var", 4),
		(call_script, "script_calculate_ransom_amount_for_troop", "trp_player"),
		(val_add, "$diplomacy_var", reg0),
		(val_max, "$diplomacy_var", 500),
		(val_div, "$diplomacy_var", 100),
		(val_mul, "$diplomacy_var", 100),
		(assign, reg0, "$diplomacy_var"),
		(str_store_party_name, 6, "$current_town")
	],
	[
		("dplmc_comply_treasury",
		[
			(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
			(ge, ":troop_gold_household_possessions", "$diplomacy_var")
		],
		"Comply and induce your seneschal to pay the money from the treasury.",
		[
			(call_script, "script_dplmc_withdraw_from_treasury", "$diplomacy_var"),
			(party_get_slot, ":current_town_center_is_besieged_by", "$current_town", slot_center_is_besieged_by),
			(party_stack_get_troop_id, ":party_stack_troop_id_current_town_center_is_besieged_by_0", ":current_town_center_is_besieged_by", 0),
			(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", "$diplomacy_var", ":party_stack_troop_id_current_town_center_is_besieged_by_0"),
			(call_script, "script_dplmc_player_center_surrender", "$current_town"),
			(change_screen_return)
		], "."),

		("dplmc_comply",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(ge, ":troop_gold_player", "$diplomacy_var")
		],
		"Comply and pay the money cash.",
		[
			(troop_remove_gold, "trp_player", "$diplomacy_var"),
			(party_get_slot, ":current_town_center_is_besieged_by", "$current_town", slot_center_is_besieged_by),
			(party_stack_get_troop_id, ":party_stack_troop_id_current_town_center_is_besieged_by_0", ":current_town_center_is_besieged_by", 0),
			(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", "$diplomacy_var", ":party_stack_troop_id_current_town_center_is_besieged_by_0"),
			(call_script, "script_dplmc_player_center_surrender", "$current_town"),
			(change_screen_return)
		], "."),

		("dplmc_break_off",
		[],
		"Break off negotiations.",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("dplmc_messenger", 0, "Sire, I found {s10} and delivered your message. {reg4?Her:His} answer was {s11}.",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(str_store_troop_name, 10, "$g_notification_menu_var1"),
		(try_begin),
			(eq, "$g_notification_menu_var2", 1),
			(str_store_string, 11, "@positive"),
		(else_try),
			(str_store_string, 11, "@negative"),
		(try_end),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$g_notification_menu_var1"),
			(assign, reg4, 1),
		(else_try),
			(assign, reg4, 0),
		(try_end)
	],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_scout", 0, "Your spy returned from {s10}^^{s11}{s12}",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(str_store_party_name, 10, "$g_notification_menu_var1"),
		(call_script, "script_game_get_center_note", "$g_notification_menu_var1", 0),
		(str_store_string, 11, "@{!}{s0}"),
		(try_begin),
			(this_or_next|is_between, "$g_notification_menu_var1", "p_town_1", "p_castle_1"),
			(is_between, "$g_notification_menu_var1", "p_castle_1", "p_village_1"),
			(party_get_slot, ":g_notification_menu_var1_food_store", "$g_notification_menu_var1", slot_party_food_store),
			(call_script, "script_center_get_food_consumption", "$g_notification_menu_var1"),
			(assign, ":var_2", reg0),
			(store_div, reg6, ":g_notification_menu_var1_food_store", ":var_2"),
			(store_party_size, reg5, "$g_notification_menu_var1"),
			(str_store_string, 11, "@{s11}^^ The current garrison consists of {reg5} men.^The food stock lasts for {reg6} days."),
		(try_end),
		(str_clear, 12),
		(party_get_num_attached_parties, ":num_attached_parties_l_g_notification_menu_var1", "$g_notification_menu_var1"),
		(try_begin),
			(gt, ":num_attached_parties_l_g_notification_menu_var1", 0),
			(str_store_string, 12, "@^^Additional the following parties are currently inside:^"),
			(try_for_range, ":number", 0, ":num_attached_parties_l_g_notification_menu_var1"),
				(party_get_attached_party_with_rank, ":attached_party_with_rank_g_notification_menu_var1_number", "$g_notification_menu_var1", ":number"),
				(str_store_party_name, 3, ":attached_party_with_rank_g_notification_menu_var1_number"),
				(store_party_size, reg1, ":attached_party_with_rank_g_notification_menu_var1_number"),
				(str_store_string, 12, "@{s12} {s3} with {reg1} troops.^"),
			(try_end),
		(try_end),
		(call_script, "script_update_center_recon_notes", "$g_notification_menu_var1")
	],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_domestic_policy", 0, "You can now shape the domestic policy of your sovereignty. Do you want to change your policy now?",
	"none",
	[
		(try_begin),
			(eq, "$g_players_policy_set", 1),
			(change_screen_return),
		(try_end),
		(set_fixed_point_multiplier, 100),
		(position_set_x, 0, 65),
		(position_set_y, 0, 30),
		(position_set_z, 0, 170),
		(set_game_menu_tableau_mesh, "tableau_faction_note_mesh_banner", "fac_player_supporters_faction", 0)
	],
	[
		("dplmc_yes",
		[],
		"Yes, I want to change the domestic policy.",
		[
			(start_presentation, "prsnt_dplmc_policy_management")
		], "."),

		("dplmc_no",
		[],
		"No, I don't want to change the domestic policy.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_affiliate_end", 0, "{!}{s11}",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger"),
		(str_store_troop_name, 9, "$g_notification_menu_var1"),
		(try_begin),
			(eq, "$g_notification_menu_var2", "$g_notification_menu_var1"),
			(str_store_string, 11, "@{playername}, ^^I always knew you were a bad egg, since the day you have pledged allegiance to my clan. ^Did you really think you could set my family against me? You've dropped your mask, you snake! You are an infliction, and I will not bear it anymore. ^Hereby, I disown and ban you from my house. I have urged my family to fight you, and I will warn Calradia lords about your infamy. ^Tremble with fear, you have a deadly enemy! ^^{s9}."),
		(else_try),
			(ge, "$g_notification_menu_var2", "trp_tournament_master"),
			(troop_is_hero, "$g_notification_menu_var2"),
			(str_store_troop_name, 10, "$g_notification_menu_var2"),
			(call_script, "script_dplmc_store_troop_is_female", "$g_notification_menu_var1"),
			(assign, reg1, reg0),
			(store_faction_of_troop, ":faction_of_troop_g_notification_menu_var2", "$g_notification_menu_var2"),
			(try_begin),
				(gt, ":faction_of_troop_g_notification_menu_var2", 0),
				(faction_get_slot, ":faction_of_troop_g_notification_menu_var2", ":faction_of_troop_g_notification_menu_var2", slot_faction_leader),
				(gt, ":faction_of_troop_g_notification_menu_var2", 0),
				(call_script, "script_dplmc_store_troop_is_female", ":faction_of_troop_g_notification_menu_var2"),
				(eq, reg0, 1),
				(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_notification_menu_var2", 5, 11),
				(assign, reg1, 1),
			(else_try),
				(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_notification_menu_var2", 4, 11),
				(assign, reg1, 0),
			(try_end),
			(str_store_string, 11, "@{playername},^^ I've received a letter from {s9}, telling me about your disgraceful jiggery-pokery. In the present circumstances, {s9} could not provide evidence. But unlike you, {reg1?she:he} is a distinguished member of my family; and since all these years, I never had any reason to distrust {reg1?her:him}. I take {reg1?her:him} charges for granted. ^Hopefully, you failed to breakup my family unit. Hereby I reject your pledge : you are no longer related to my house. Each membership will retaliate against you in all conscience... ^I would be ashamed to confess how you maliciously fooled me, so I will not challenge you, to not be accountable for your death to my {s11}. However I'm not used to telling {reg0?her:him} about every rat I crush in the wilderness, and someday I may find you there ! ^^{s10}"),
		(try_end)
	],
	[
		("dplmc_continue",
		[],
		"Continue...",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dplmc_preferences", 0, "Diplomacy 4.2 (November 27, 2011) Preferences{s0}",
	"none",
	[
		(troop_get_slot, reg0, "trp_dplmc_chamberlain", 165),
		(str_clear, 0),
		(try_begin),
			(neq, reg0, 0),
			(store_mod, ":value", reg0, 128),
			(this_or_next|lt, reg0, 0),
			(neq, ":value", 68),
			(str_store_string, 0, "@{!}{s0}^^ WARNING: Unexpected version value in slot dplmc slot troop affiliated in trp dplmc chamberlain: {reg0}"),
		(else_try),
			(ge, "$cheat_mode", 1),
			(val_div, reg0, 128),
			(str_store_string, 0, "@{!}{s0}^^ DEBUG: Internal update code for current saved game is {reg0}.  Update code for the current release is 111127."),
		(try_end)
	],
	[
		("dplmc_disable_horse_speed",
		[
			(eq, "$g_dplmc_horse_speed", 0)
		],
		"Disable Diplomacy horse speed.",
		[
			(assign, "$g_dplmc_horse_speed", 1),
			(jump_to_menu, "mnu_dplmc_preferences")
		], "."),

		("dplmc_enable_horse_speed",
		[
			(eq, "$g_dplmc_horse_speed", 1)
		],
		"Enable Diplomacy horse speed.",
		[
			(assign, "$g_dplmc_horse_speed", 0),
			(jump_to_menu, "mnu_dplmc_preferences")
		], "."),

		("dplmc_disable_battle_continuation",
		[
			(eq, "$g_dplmc_battle_continuation", 0)
		],
		"Disable Diplomacy battle continuation.",
		[
			(assign, "$g_dplmc_battle_continuation", 1),
			(jump_to_menu, "mnu_dplmc_preferences")
		], "."),

		("dplmc_enable_battle_continuation",
		[
			(eq, "$g_dplmc_battle_continuation", 1)
		],
		"Enable Diplomacy battle continuation.",
		[
			(assign, "$g_dplmc_battle_continuation", 0),
			(jump_to_menu, "mnu_dplmc_preferences")
		], "."),

		("dplmc_disable_terrain_advantage",
		[
			(eq, "$g_dplmc_terrain_advantage", 0)
		],
		"Disable terrain advantage in Autocalc battles (currently this feature is Enabled).",
		[
			(assign, "$g_dplmc_terrain_advantage", -1),
			(jump_to_menu, "mnu_dplmc_preferences")
		], "."),

		("dplmc_enable_terrain_advantage",
		[
			(eq, "$g_dplmc_terrain_advantage", -1)
		],
		"Enable terrain advantage in Autocalc battles (currently this feature is Disabled).",
		[
			(assign, "$g_dplmc_terrain_advantage", 0),
			(jump_to_menu, "mnu_dplmc_preferences")
		], "."),

		("dplmc_reset_terrain_advantage",
		[
			(neq, "$g_dplmc_terrain_advantage", -1),
			(neq, "$g_dplmc_terrain_advantage", 0),
			(assign, reg0, "$g_dplmc_terrain_advantage")
		],
		"You used a saved game from another mod: g dplmc terrain advantage = {reg0} (click to reset)",
		[
			(assign, "$g_dplmc_terrain_advantage", 0),
			(jump_to_menu, "mnu_dplmc_preferences")
		], "."),

		("dplmc_toggle_lord_recycling_a",
		[
			(eq, "$g_dplmc_lord_recycling", -1)
		],
		"Enable lords returning from exile (currently disabled)",
		[
			(assign, "$g_dplmc_lord_recycling", 0)
		], "."),

		("dplmc_toggle_lord_recycling_b",
		[
			(this_or_next|eq, "$g_dplmc_lord_recycling", 1),
			(eq, "$g_dplmc_lord_recycling", 0)
		],
		"Disable lords returning from exile (currently enabled)",
		[
			(assign, "$g_dplmc_lord_recycling", -1)
		], "."),

		("dplmc_toggle_lord_recycling_reset",
		[
			(neq, "$g_dplmc_lord_recycling", -1),
			(neq, "$g_dplmc_lord_recycling", 0),
			(neq, "$g_dplmc_lord_recycling", 1),
			(assign, reg0, "$g_dplmc_lord_recycling")
		],
		"You used a saved game from another mod: g dplmc lord recycling = {reg0} (click to reset)",
		[
			(assign, "$g_dplmc_lord_recycling", 0),
			(jump_to_menu, "mnu_dplmc_preferences")
		], "."),

		("dplmc_toggle_ai_changes_a",
		[
			(eq, "$g_dplmc_ai_changes", -1)
		],
		"Enable AI changes (currently disabled)",
		[
			(assign, "$g_dplmc_ai_changes", 0)
		], "."),

		("dplmc_toggle_ai_changes_b",
		[
			(eq, "$g_dplmc_ai_changes", 0)
		],
		"Increase AI changes (currently low)",
		[
			(assign, "$g_dplmc_ai_changes", 1)
		], "."),

		("dplmc_toggle_ai_changes_c",
		[
			(eq, "$g_dplmc_ai_changes", 1)
		],
		"Increase AI changes (currently medium)",
		[
			(assign, "$g_dplmc_ai_changes", 2)
		], "."),

		("dplmc_toggle_ai_changes_d",
		[
			(eq, "$g_dplmc_ai_changes", 2)
		],
		"Disable AI changes (currently high/experimental)",
		[
			(assign, "$g_dplmc_ai_changes", -1)
		], "."),

		("dplmc_reset_ai_changes",
		[
			(neq, "$g_dplmc_ai_changes", -1),
			(neq, "$g_dplmc_ai_changes", 0),
			(neq, "$g_dplmc_ai_changes", 1),
			(neq, "$g_dplmc_ai_changes", 2),
			(assign, reg0, "$g_dplmc_ai_changes")
		],
		"You used a saved game from another mod: g dplmc ai changes = {reg0} (click to reset)",
		[
			(assign, "$g_dplmc_ai_changes", 0),
			(jump_to_menu, "mnu_dplmc_preferences")
		], "."),

		("dplmc_toggle_gold_changes_a",
		[
			(eq, "$g_dplmc_gold_changes", -1)
		],
		"Set economic & behavioral changes to low (current mode: disabled)",
		[
			(assign, "$g_dplmc_gold_changes", 0)
		], "."),

		("dplmc_toggle_gold_changes_b",
		[
			(eq, "$g_dplmc_gold_changes", 0)
		],
		"Set economic & behavioral changes to medium (current mode: low)",
		[
			(assign, "$g_dplmc_gold_changes", 1)
		], "."),

		("dplmc_toggle_gold_changes_c",
		[
			(eq, "$g_dplmc_gold_changes", 1)
		],
		"Set economic & behavioral changes to high/experimental (current mode: medium)",
		[
			(assign, "$g_dplmc_gold_changes", 2)
		], "."),

		("dplmc_toggle_gold_changes_d",
		[
			(eq, "$g_dplmc_gold_changes", 2)
		],
		"Disable economic & behavioral changes (current mode: high/experimental)",
		[
			(assign, "$g_dplmc_gold_changes", -1)
		], "."),

		("dplmc_reset_gold_changes",
		[
			(neq, "$g_dplmc_gold_changes", -1),
			(neq, "$g_dplmc_gold_changes", 0),
			(neq, "$g_dplmc_gold_changes", 1),
			(neq, "$g_dplmc_gold_changes", 2),
			(assign, reg0, "$g_dplmc_gold_changes")
		],
		"You used a saved game from another mod: g dplmc gold changes = {reg0} (click to reset)",
		[
			(assign, "$g_dplmc_gold_changes", 0),
			(jump_to_menu, "mnu_dplmc_preferences")
		], "."),

		("dplmc_switch_woman_prejudice_1",
		[
			(this_or_next|eq, "$g_disable_condescending_comments", 0),
			(eq, "$g_disable_condescending_comments", 1)
		],
		"Change prejudice level (current level is default)",
		[
			(val_add, "$g_disable_condescending_comments", 2),
			(jump_to_menu, "mnu_dplmc_preferences")
		], "."),

		("dplmc_switch_woman_prejudice_2",
		[
			(this_or_next|eq, "$g_disable_condescending_comments", 2),
			(eq, "$g_disable_condescending_comments", 3)
		],
		"Change prejudice level (current level is off)",
		[
			(val_sub, "$g_disable_condescending_comments", 4),
			(jump_to_menu, "mnu_dplmc_preferences")
		], "."),

		("dplmc_switch_woman_prejudice_3",
		[
			(this_or_next|eq, "$g_disable_condescending_comments", -1),
			(eq, "$g_disable_condescending_comments", -2)
		],
		"Change prejudice level (current level is high)",
		[
			(val_add, "$g_disable_condescending_comments", 2),
			(jump_to_menu, "mnu_dplmc_preferences")
		], "."),

		("dplmc_back",
		[],
		"Back...",
		[
			(jump_to_menu, "mnu_camp")
		], ".")
	]
	),

	("dplmc_affiliated_family_report", 0, "{s0}",
	"none",
	[
		(str_clear, 0),
		(str_clear, 1),
		(try_for_range, ":troop", "trp_kingdom_heroes_including_player_begin", "trp_heroes_end"),
			(try_begin),
				(eq, ":troop", "trp_kingdom_heroes_including_player_begin"),
				(assign, ":troop", "trp_player"),
			(try_end),
			(call_script, "script_dplmc_store_troop_is_eligible_for_affiliate_messages", ":troop"),
			(this_or_next|eq, ":troop", "trp_player"),
			(ge, reg0, 1),
			(str_clear, 1),
			(str_store_string, 0, "str_dplmc_s0_newline_s1"),
			(try_begin),
				(eq, ":troop", "trp_player"),
				(str_store_string, 1, "@{playername}"),
			(else_try),
				(call_script, "script_get_information_about_troops_position", ":troop", 0),
			(try_end),
			(str_store_string, 0, "str_dplmc_s0_newline_s1"),
			(try_begin),
				(neq, "trp_player", ":troop"),
				(call_script, "script_troop_get_player_relation", ":troop"),
				(assign, reg1, reg0),
				(str_store_string, 1, "str_relation_reg1"),
				(str_store_string, 0, "str_dplmc_s0_newline_s1"),
			(try_end),
			(try_begin),
				(neg|troop_slot_ge, ":troop", 8, 0),
				(troop_get_slot, ":troop_leaded_party", ":troop", slot_troop_leaded_party),
				(this_or_next|eq, ":troop_leaded_party", 0),
				(ge, ":troop_leaded_party", "p_spawn_points_end"),
				(this_or_next|eq, ":troop", "trp_player"),
				(neq, ":troop_leaded_party", "p_main_party"),
				(party_is_active, ":troop_leaded_party"),
				(assign, reg0, 0),
				(party_get_num_companions, reg1, ":troop_leaded_party"),
				(str_store_string, 1, "@Troops: {reg1}"),
				(str_store_string, 0, "str_dplmc_s0_newline_s1"),
			(try_end),
		(try_end)
	],
	[
		("lord_relations",
		[],
		"View list of all known lords by relation.",
		[
			(jump_to_menu, "mnu_lord_relations")
		], "."),

		("continue",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_reports")
		], ".")
	]
	),

	("dplmc_start_select_prejudice", mnf_disable_all_keys|menu_text_color(0xff000000), "In the traditional medieval society depicted in the game, war and politics are usually dominated by male members of the nobility.  Beacuse of this, a female character can face initial prejudice, and some opportunities open to men will not be available (although a woman will also have some opportunities a man will not).  Some players might find distasteful, so if you want you can ignore that aspect of society in Calradia.^^You can later change your mind through the options in the Camp menu.",
	"none",
	[],
	[
		("dplmc_start_prejudice_yes",
		[],
		"I do not mind encountering sexism.",
		[
			(assign, "$g_disable_condescending_comments", 0),
			(jump_to_menu, "mnu_start_character_1")
		], "."),

		("dplmc_start_prejudice_no",
		[],
		"I would prefer not to encounter as much sexism.",
		[
			(assign, "$g_disable_condescending_comments", 2),
			(jump_to_menu, "mnu_start_character_1")
		], "."),

		("go_back",
		[],
		"Go back",
		[
			(jump_to_menu, "mnu_start_game_1")
		], ".")
	]
	),

	("dplmc_economic_report", 0, "{s0}",
	"none",
	[
		(str_clear, 0),
		(str_clear, 1),
		(assign, reg0, 0),
		(str_store_string, 0, "@Prosperity Report^"),
		(try_for_range, ":number", 0, "fac_kingdoms_end"),
			(this_or_next|eq, ":number", 0),
			(is_between, ":number", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(this_or_next|eq, ":number", 0),
			(faction_slot_eq, ":number", slot_faction_state, 0),
			(try_begin),
				(eq, ":number", 0),
				(str_store_string, 1, "@Total"),
			(else_try),
				(faction_get_slot, reg0, ":number", slot_faction_adjective),
				(gt, reg0, 0),
				(str_store_string, 1, reg0),
			(else_try),
				(str_store_faction_name, 1, ":number"),
			(try_end),
			(assign, ":value", 0),
			(assign, ":value_2", 0),
			(assign, ":value_3", 0),
			(assign, ":value_4", 0),
			(assign, ":value_5", 0),
			(assign, ":value_6", 0),
			(assign, ":value_7", 0),
			(try_for_range, ":party", "p_town_1", "p_castle_1"),
				(store_faction_of_party, reg0, ":party"),
				(this_or_next|eq, ":number", 0),
				(eq, reg0, ":number"),
				(val_add, ":value_7", 1),
				(party_get_slot, reg0, ":party", slot_town_prosperity),
				(val_add, ":value", reg0),
				(try_begin),
					(lt, reg0, 20),
					(val_add, ":value_6", 1),
				(else_try),
					(lt, reg0, 40),
					(val_add, ":value_5", 1),
				(else_try),
					(lt, reg0, 60),
					(val_add, ":value_4", 1),
				(else_try),
					(lt, reg0, 80),
					(val_add, ":value_3", 1),
				(else_try),
					(val_add, ":value_2", 1),
				(try_end),
			(try_end),
			(assign, reg0, ":value_7"),
			(val_max, reg0, 1),
			(store_div, reg0, ":value", reg0),
			(str_store_string, 0, "@{s0}^{s1} Average Town Prosperity: {reg0}"),
			(assign, reg0, ":value_2"),
			(try_begin),
				(this_or_next|eq, ":number", 0),
				(gt, reg0, 0),
				(str_store_string, 0, "@{s0}^{s1} towns with prosperity 80-100: {reg0}"),
			(try_end),
			(assign, reg0, ":value_3"),
			(try_begin),
				(this_or_next|eq, ":number", 0),
				(gt, reg0, 0),
				(str_store_string, 0, "@{s0}^{s1} towns with prosperity 60-79: {reg0}"),
			(try_end),
			(assign, reg0, ":value_4"),
			(try_begin),
				(this_or_next|eq, ":number", 0),
				(gt, reg0, 0),
				(str_store_string, 0, "@{s0}^{s1} towns with prosperity 40-59: {reg0}"),
			(try_end),
			(assign, reg0, ":value_5"),
			(try_begin),
				(this_or_next|eq, ":number", 0),
				(gt, reg0, 0),
				(str_store_string, 0, "@{s0}^{s1} towns with prosperity 20-39: {reg0}"),
			(try_end),
			(assign, reg0, ":value_6"),
			(try_begin),
				(this_or_next|eq, ":number", 0),
				(gt, reg0, 0),
				(str_store_string, 0, "@{s0}^{s1} towns with prosperity 0-19: {reg0}"),
			(try_end),
			(str_store_string, 0, "@{!}{s0}^"),
			(assign, ":value", 0),
			(assign, ":value_2", 0),
			(assign, ":value_3", 0),
			(assign, ":value_4", 0),
			(assign, ":value_5", 0),
			(assign, ":value_6", 0),
			(assign, ":value_7", 0),
			(try_for_range, ":party", "p_village_1", "p_salt_mine"),
				(store_faction_of_party, reg0, ":party"),
				(this_or_next|eq, ":number", 0),
				(eq, reg0, ":number"),
				(val_add, ":value_7", 1),
				(party_get_slot, reg0, ":party", slot_town_prosperity),
				(val_add, ":value", reg0),
				(try_begin),
					(lt, reg0, 20),
					(val_add, ":value_6", 1),
				(else_try),
					(lt, reg0, 40),
					(val_add, ":value_5", 1),
				(else_try),
					(lt, reg0, 60),
					(val_add, ":value_4", 1),
				(else_try),
					(lt, reg0, 80),
					(val_add, ":value_3", 1),
				(else_try),
					(val_add, ":value_2", 1),
				(try_end),
			(try_end),
			(assign, reg0, ":value_7"),
			(val_max, reg0, 1),
			(store_div, reg0, ":value", reg0),
			(str_store_string, 0, "@{s0}^{s1} Average Village Prosperity: {reg0}"),
			(try_begin),
				(this_or_next|eq, ":number", 0),
				(gt, ":value_2", 0),
				(assign, reg0, ":value_2"),
				(str_store_string, 0, "@{s0}^{s1} villages with prosperity 80-100: {reg0}"),
			(try_end),
			(try_begin),
				(this_or_next|eq, ":number", 0),
				(gt, ":value_3", 0),
				(assign, reg0, ":value_3"),
				(str_store_string, 0, "@{s0}^{s1} villages with prosperity 60-79: {reg0}"),
			(try_end),
			(try_begin),
				(this_or_next|eq, ":number", 0),
				(gt, ":value_4", 0),
				(assign, reg0, ":value_4"),
				(str_store_string, 0, "@{s0}^{s1} villages with prosperity 40-59: {reg0}"),
			(try_end),
			(try_begin),
				(this_or_next|eq, ":number", 0),
				(gt, ":value_5", 0),
				(assign, reg0, ":value_5"),
				(str_store_string, 0, "@{s0}^{s1} villages with prosperity 20-39: {reg0}"),
			(try_end),
			(try_begin),
				(this_or_next|eq, ":number", 0),
				(gt, ":value_6", 0),
				(assign, reg0, ":value_6"),
				(str_store_string, 0, "@{s0}^{s1} villages with prosperity 0-19: {reg0}"),
			(try_end),
			(str_store_string, 0, "@{!}{s0}^"),
		(try_end)
	],
	[
		("dplmc_back",
		[],
		"Continue...",
		[
			(jump_to_menu, "mnu_reports")
		], ".")
	]
	),

	("upgrade_to_hero", 0, "You notice that one or more of your warriors exceeds your expectations in battle. ^You walk towards the lines of your troops, and ...",
	"none",
	[
		(assign, reg11, 0),
		(assign, reg12, 0),
		(assign, reg13, 0),
		(assign, reg14, 0),
		(assign, "$g_upgrade_talk", 0)
	],
	[
		("hero_1",
		[
			(assign, reg10, "trp_swadian_n_hero1"),
			(assign, ":var_1", reg10),
			(assign, ":value", 0),
			(try_for_range, ":troop", ":var_1", "trp_town_1_seneschal"),
				(eq, ":value", 0),
				(troop_get_slot, ":troop_occupation", ":troop", slot_troop_occupation),
				(gt, ":troop_occupation", 0),
				(neq, ":troop_occupation", 2),
				(neq, ":troop_occupation", 5),
				(main_party_has_troop, ":troop_occupation"),
				(assign, ":value", 1),
				(assign, reg11, ":troop"),
			(try_end),
			(eq, ":value", 1),
			(str_store_troop_name, 1, reg11)
		],
		"stop to talk to {s1}",
		[
			(assign, ":var_1", reg11),
			(troop_get_slot, ":var_1_occupation", ":var_1", slot_troop_occupation),
			(assign, reg20, ":var_1_occupation"),
			(assign, reg21, ":var_1"),
			(assign, "$g_upgrade_talk", 1),
			(start_map_conversation, ":var_1_occupation"),
			(change_screen_return)
		], "."),

		("hero_2",
		[
			(ge, reg11, reg10),
			(store_add, ":value", reg11, 1),
			(assign, ":value_2", 0),
			(try_for_range, ":troop", ":value", "trp_town_1_seneschal"),
				(eq, ":value_2", 0),
				(troop_get_slot, ":troop_occupation", ":troop", slot_troop_occupation),
				(gt, ":troop_occupation", 0),
				(neq, ":troop_occupation", 2),
				(neq, ":troop_occupation", 5),
				(main_party_has_troop, ":troop_occupation"),
				(assign, ":value_2", 1),
				(assign, reg12, ":troop"),
			(try_end),
			(eq, ":value_2", 1),
			(str_store_troop_name, 1, reg12)
		],
		"stop to talk to {s1}",
		[
			(assign, ":var_1", reg12),
			(troop_get_slot, ":var_1_occupation", ":var_1", slot_troop_occupation),
			(assign, reg20, ":var_1_occupation"),
			(assign, reg21, ":var_1"),
			(assign, "$g_upgrade_talk", 1),
			(start_map_conversation, ":var_1_occupation"),
			(change_screen_return)
		], "."),

		("hero_3",
		[
			(gt, reg12, reg11),
			(store_add, ":value", reg12, 1),
			(assign, ":value_2", 0),
			(try_for_range, ":troop", ":value", "trp_town_1_seneschal"),
				(eq, ":value_2", 0),
				(troop_get_slot, ":troop_occupation", ":troop", slot_troop_occupation),
				(gt, ":troop_occupation", 0),
				(neq, ":troop_occupation", 2),
				(neq, ":troop_occupation", 5),
				(main_party_has_troop, ":troop_occupation"),
				(assign, ":value_2", 1),
				(assign, reg13, ":troop"),
			(try_end),
			(eq, ":value_2", 1),
			(str_store_troop_name, 1, reg13)
		],
		"stop to talk to {s1}",
		[
			(assign, ":var_1", reg13),
			(troop_get_slot, ":var_1_occupation", ":var_1", slot_troop_occupation),
			(assign, reg20, ":var_1_occupation"),
			(assign, reg21, ":var_1"),
			(assign, "$g_upgrade_talk", 1),
			(start_map_conversation, ":var_1_occupation"),
			(change_screen_return)
		], "."),

		("hero_4",
		[
			(gt, reg13, reg12),
			(store_add, ":value", reg13, 1),
			(assign, ":value_2", 0),
			(try_for_range, ":troop", ":value", "trp_town_1_seneschal"),
				(eq, ":value_2", 0),
				(troop_get_slot, ":troop_occupation", ":troop", slot_troop_occupation),
				(gt, ":troop_occupation", 0),
				(neq, ":troop_occupation", 2),
				(neq, ":troop_occupation", 5),
				(main_party_has_troop, ":troop_occupation"),
				(assign, ":value_2", 1),
				(assign, reg14, ":troop"),
			(try_end),
			(eq, ":value_2", 1),
			(str_store_troop_name, 1, reg14)
		],
		"stop to talk to {s1}",
		[
			(assign, ":var_1", reg14),
			(troop_get_slot, ":var_1_occupation", ":var_1", slot_troop_occupation),
			(assign, reg20, ":var_1_occupation"),
			(assign, reg21, ":var_1"),
			(assign, "$g_upgrade_talk", 1),
			(start_map_conversation, ":var_1_occupation"),
			(change_screen_return)
		], "."),

		("prev",
		[
			(gt, reg10, "trp_swadian_n_hero1"),
			(assign, ":var_1", reg10),
			(assign, ":var_2", 0),
			(try_for_range_backwards, ":var_3", ":var_1", "trp_swadian_n_hero1"),
				(lt, ":var_2", 4),
				(troop_get_slot, ":var_3_occupation", ":var_3", slot_troop_occupation),
				(gt, ":var_3_occupation", 0),
				(neq, ":var_3_occupation", 2),
				(neq, ":var_3_occupation", 5),
				(main_party_has_troop, ":var_3_occupation"),
				(assign, reg15, ":var_3"),
				(val_add, ":var_2", 1),
			(try_end),
			(gt, ":var_2", 0)
		],
		"go to the previous lines",
		[
			(assign, reg10, reg15),
			(jump_to_menu, "mnu_upgrade_to_hero")
		], "."),

		("next",
		[
			(gt, reg14, reg13),
			(store_add, ":value", reg14, 1),
			(assign, ":value_2", 0),
			(try_for_range, ":troop", ":value", "trp_town_1_seneschal"),
				(eq, ":value_2", 0),
				(troop_get_slot, ":troop_occupation", ":troop", slot_troop_occupation),
				(gt, ":troop_occupation", 0),
				(neq, ":troop_occupation", 2),
				(neq, ":troop_occupation", 5),
				(main_party_has_troop, ":troop_occupation"),
				(assign, ":value_2", 1),
			(try_end),
			(eq, ":value_2", 1)
		],
		"go to the next lines",
		[
			(store_add, reg10, reg14, 1),
			(jump_to_menu, "mnu_upgrade_to_hero")
		], "."),

		("close",
		[],
		"close",
		[
			(assign, "$g_upgrade_talk", 1),
			(change_screen_map)
		], ".")
	]
	),

	("entrenched_camp", mnf_scale_picture, "  Your fortifications are complete.    ",
	"none",
	[
		(set_background_mesh, "mesh_pic_camp")
	],
	[
		("camp_wait_here",
		[],
		"Wait here for some time.",
		[
			(assign, "$g_infinite_camping", 0),
			(try_begin),
				(party_is_active, "p_main_party"),
				(party_get_current_terrain, ":current_terrain_main_party", "p_main_party"),
				(try_begin),
					(eq, ":current_terrain_main_party", 5),
					(unlock_achievement, 28),
				(try_end),
			(try_end),
			(rest_for_hours_interactive, 8760, 5, 1),
			(change_screen_map)
		], "."),

		("camp_inspect",
		[],
		"Inspect your camp.",
		[
			(call_script, "script_visit_camp")
		], "."),

		("resume_travelling",
		[],
		"Resume travelling.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_01_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "Two farmers, one very tall and lanky, the other low and stocky, were presented to you, to discuss the ownership of a calf. Apparently their fields were bordering and the tall farmer had a bull that impregnated a cow belonging to the other farmer.The stocky farmer said the calf was his because it was his cow giving birth. The tall farmer claimed the calf to be his, being the offspring of his best bull, or at least financial compensation.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_01_1n",
		[],
		"The owner of the cow is right. The calf is yours, just like the cow is.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], "."),

		("choice_01_2n",
		[],
		"The owner of the bull is right. The bull is his and the calf too.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], "."),

		("choice_01_3n",
		[],
		"The owner of the cow will keep the calf, and offer financial compensation to the owner of the bull.",
		[
			(change_screen_return)
		], "."),

		("choice_01_4n",
		[],
		"Neither is right. I'll stick with the calf and beef!",
		[
			(troop_add_item, "trp_player", "itm_trade_dried_meat", 10),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_01_5n",
		[],
		"Neither is right. Kill the calf and distribute its meat to the two farmers!",
		[
			(call_script, "script_change_troop_renown", "trp_player", 10),
			(change_screen_return)
		], ".")
	]
	),

	("event_02_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "'My liege, we captured the attacker! This is the man who attacked one of your messengers, who is now lying seriously injured', says on of your men. This doesn't show us in the best of light, the messenger was under your protection. But the attacker has an interesting story, and his wish was to tell it to you before he was executed.^^'My liege! I would have never thought of attacking your messenger but... that man wished to sleep with my young daughter for the night. Of course his offer was refused! However he never accepted the answer, entered my house with his three friends, and robbed my dear daughter of her virtue, laughing that you, my lord, will never believe a farmers word. I tried what I could think of, and I regret that I seriously injured him while he was under your personal protection, but a father must protect his only child! Please be reasonable to your humble servant!'",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_02_1n",
		[],
		"The messenger was under my protection. You and your family will be executed at dawn, all your belongings confiscated!",
		[
			(troop_add_gold, "trp_player", 100),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(call_script, "script_change_player_honor", -5),
			(change_screen_return)
		], "."),

		("choice_02_2n",
		[],
		"The messenger is important, but I will be reasonable with you: Your family will not be punished, it is only you who will hang.",
		[
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_02_3n",
		[],
		"While the messenger is important, I would have done the same. You can go, the king has spoken!",
		[
			(call_script, "script_change_player_honor", 5),
			(call_script, "script_change_player_party_morale", -50),
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(change_screen_return)
		], "."),

		("choice_02_4n",
		[],
		"What? Throw the messenger out on the streets, how dare he abuse the peasantry!",
		[
			(call_script, "script_change_player_honor", 5),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(call_script, "script_change_player_party_morale", -50),
			(change_screen_return)
		], ".")
	]
	),

	("event_03_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "You summon two men to decide their fate. One is a knight, while the other is a man-at-arms sworn to the same knight. It seems what happened is that the knight didn't have enough gold to pay his man, so the man-at-arms took the knights daughter to his own bed and had his way with her.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_03_1n",
		[],
		"Geld the man-at-arms, he violated the knights honor.",
		[
			(call_script, "script_change_player_party_morale", -50),
			(call_script, "script_change_troop_renown", "trp_player", 10),
			(change_screen_return)
		], "."),

		("choice_03_2n",
		[],
		"Punish the knight, he failed in his duty.",
		[
			(call_script, "script_change_player_party_morale", 50),
			(call_script, "script_change_troop_renown", "trp_player", -20),
			(change_screen_return)
		], "."),

		("choice_03_3n",
		[],
		"Ask to see the daughter, and when she is brought forth, you decide it was punishment enough that the man-at-arms had to sleep with her.",
		[
			(call_script, "script_change_player_honor", -5),
			(change_screen_return)
		], "."),

		("choice_03_4n",
		[],
		"Compensate the knight for this crime, out of your own coffers, and pay the man-at-arms the coin due to him. Then hang him. It will cost 2000 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 2000),
				(call_script, "script_change_player_honor", 10),
				(troop_remove_gold, "trp_player", 2000),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -50),
			(try_end),
			(change_screen_return)
		], ".")
	]
	),

	("event_04_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "One of your sworn men approaches you. He states that among the men, there is much dissatiafaction. Pertaining that you are too placid and that there is too little gold and honour to be won under your service.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_04_1n",
		[],
		"Distribute 1000 coins amongst the men.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(call_script, "script_change_player_party_morale", 50),
				(display_message, "@The men are soon cheering your name!", 0x0033ccff),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
				(call_script, "script_change_player_party_morale", -50),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_04_2n",
		[],
		"Tell your men to be quiet.",
		[
			(call_script, "script_change_player_party_morale", -50),
			(change_screen_return)
		], "."),

		("choice_04_3n",
		[],
		"Kill the man who approached you and state there shall be no more talk of sedition.",
		[
			(call_script, "script_change_player_honor", -5),
			(call_script, "script_change_troop_renown", "trp_player", 20),
			(call_script, "script_change_player_party_morale", -50),
			(change_screen_return)
		], "."),

		("choice_04_4n",
		[],
		"Promise to make amends soon.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_05_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "After having feasted your lords repeatedly for the last four months, it appears your tunic no longer slips over your head. You have begun wearing open chest tunics and generally snacking on delicious fruits from the east. Dinner is, of course, a spiced pig, drowned in butter, and roasted to perfection. A local maester, however, feels you have reached some sort of tipping point, and has suggested fresh air and a general course of exercise, and a limited diet.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_05_1n",
		[],
		"Eat more food and get rid of the maester.",
		[
			(troop_add_item, "trp_player", "itm_trade_dried_meat", 5),
			(troop_raise_attribute, "trp_player", 0, -5),
			(display_message, "@You've lost 5 strength.", 0x00ff0000),
			(display_message, "@You can hardly walk up the stairs!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_05_2n",
		[],
		"Go on a pilgrimage to the nearest public bath house, to regain your figure. It will cost 300 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 300),
				(troop_remove_gold, "trp_player", 300),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -15),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_05_3n",
		[],
		"Existing entirely on bowls of beans and lentils, you develop a foul temper, but at least you're no longer fat.",
		[
			(call_script, "script_change_player_party_morale", -50),
			(change_screen_return)
		], ".")
	]
	),

	("event_06_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "Your lover tarries with a youth of soft skin and white curls that have an almost valyrian style to them. Indeed your lover even calls him a young Aegon, it is rumoured. Whilst it is okay for you to practise your love-making amongst the local women, for your lover to taint your relationship in such a manner is...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_06_1n",
		[],
		"Fine.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -40),
			(change_screen_return)
		], "."),

		("choice_06_2n",
		[],
		"Horrible! Have the youth seized and gelded!",
		[
			(call_script, "script_change_player_honor", -15),
			(change_screen_return)
		], "."),

		("choice_06_3n",
		[],
		"Move in an old nurse, to keep an eye on your lover.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_07_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "The crop this year has whithered miserably under the sun. As the first snow has fallen, there are many who fear the long months of winter as starvation looms. What should we do, my liege?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_07_1n",
		[],
		"I cannot spare any grain as I have to feed my household. Besides... there are feasts to be had.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -15),
			(call_script, "script_change_player_honor", -10),
			(call_script, "script_change_player_party_morale", 50),
			(change_screen_return)
		], "."),

		("choice_07_2n",
		[],
		"Distribute some wagons of grain to my people, it is the most I can spare.",
		[
			(try_begin),
				(assign, ":var_1", 0),
				(try_for_range, ":item", "itm_trade_smoked_fish", "itm_trade_dummy01"),
					(call_script, "script_cf_player_has_item_without_modifier", ":item", 41),
					(val_add, ":var_1", 1),
				(try_end),
				(try_begin),
					(ge, ":var_1", 6),
					(unlock_achievement, 36),
				(try_end),
			(try_end),
			(assign, ":var_3", 10),
			(assign, ":value", 0),
			(try_for_range, ":unused", 0, ":var_3"),
				(assign, ":var_6", 0),
				(try_for_range, ":item_2", "itm_trade_smoked_fish", "itm_trade_dummy01"),
					(item_set_slot, ":item_2", slot_item_is_checked, 0),
					(call_script, "script_cf_player_has_item_without_modifier", ":item_2", 41),
					(val_add, ":var_6", 1),
				(try_end),
				(try_begin),
					(gt, ":var_6", 0),
					(store_random_in_range, ":random_in_range_0_var_6", 0, ":var_6"),
					(call_script, "script_consume_food", ":random_in_range_0_var_6"),
					(call_script, "script_change_player_honor", 10),
					(call_script, "script_change_player_party_morale", -25),
					(display_message, "@Part of your food was distributed.", 0x00ff0000),
				(else_try),
					(eq, ":value", 0),
					(display_message, "@Your men have nothing to eat!", 0x00ff0000),
					(call_script, "script_change_player_party_morale", -25),
					(assign, ":value", 1),
					(try_begin),
						(call_script, "script_party_count_fit_regulars", "p_main_party"),
						(gt, reg0, 0),
						(call_script, "script_objectionable_action", 2, "str_men_hungry"),
					(try_end),
				(try_end),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_07_3n",
		[],
		"Spend 5000 coins on grain from the Summer Islands!",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 5000),
				(troop_remove_gold, "trp_player", 5000),
				(call_script, "script_change_player_honor", 20),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -150),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_07_4n",
		[],
		"Let them starve! Serves them right for not tending to their crops carefully enough!",
		[
			(call_script, "script_change_player_honor", -20),
			(change_screen_return)
		], ".")
	]
	),

	("event_08_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "One of your vassals approach you, stating he has an illegitimate son who wishes to join your bodyguard. You agree to meet the boy as it would be unseemly to flat out reject a noble. When you meet the boy, however it is clear that he is rather homely and certainly not a man of war. Faced with this plump, smiling young man you...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_08_1n",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 1)
		],
		"Allow him to join your bodyguard.",
		[
			(party_add_members, "p_main_party", "trp_event_plump_bastard", 1),
			(call_script, "script_change_player_party_morale", -50),
			(change_screen_return)
		], "."),

		("choice_08_2n",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 1)
		],
		"Ask for a payment of 500 coins to grease the deal.",
		[
			(party_add_members, "p_main_party", "trp_event_plump_bastard", 1),
			(troop_add_gold, "trp_player", 500),
			(call_script, "script_change_player_party_morale", -50),
			(change_screen_return)
		], "."),

		("choice_08_3n",
		[],
		"Refuse outright.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(change_screen_return)
		], ".")
	]
	),

	("event_09_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "Two men, each with their own proposal, come before you on the same day. One is a young lisping scholar called Mycah who proposes the building of more libraries and a fund to be set aside to buy and maintain books of knowledge. Although his case is eloquent, the delivery is less so.Another man comes forward. A hulking great bearded warrior of a man who makes Mycah visibly wince in his shadow, he suggests the funds be better allocated in purchasing weapons, horses and shields, things that can be used today and are not merely fantasies.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_09_1n",
		[],
		"Choose Mycah, stating that a wise ruler has need of books far more than the sword. It will cost 3000 coins",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 3000),
				(troop_remove_gold, "trp_player", 3000),
				(troop_raise_attribute, "trp_player", 2, 1),
				(display_message, "@You've gained 1 intelligence.", 0x0033ccff),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -50),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_09_2n",
		[],
		"Choose the warrior, stating that books have no place in this age of war. It will cost 3000 coins",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 3000),
				(troop_remove_gold, "trp_player", 3000),
				(troop_raise_proficiency, "trp_player", 0, 25),
				(display_message, "@You've gained 25 one-handed weapon proficiency.", 0x0033ccff),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -50),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_09_3n",
		[],
		"State a country needs both men of knowledge and men of war, and that you will provide enough coin for everyone! It will cost 6000 coins",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(troop_raise_attribute, "trp_player", 2, 1),
				(display_message, "@You've gained 1 intelligence.", 0x0033ccff),
				(troop_raise_proficiency, "trp_player", 0, 25),
				(display_message, "@You've gained 25 one-handed weapon proficiency.", 0x0033ccff),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -100),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_9_4n",
		[],
		"Ignore them.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_10_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "A searing flash is seen across the night sky. There is much talk of omens the next day. Amongst the people of {s1} there is a general consensus that some act of sacrifice must be made or surely the Gods will unleash their wrath upon the land. The practice of the wickerman suddenely gains impetus, as it is near harvest time. You find a young maiden, freshly flowered, and she is treated as a living goddess until just before harvest...",
	"none",
	[
		(assign, ":value", 0),
		(try_for_range, ":unused", 0, 9999),
			(eq, ":value", 0),
			(store_random_party_in_range, "$temp", "p_town_1", "p_salt_mine"),
			(neg|party_slot_eq, "$temp", slot_party_type, 2),
			(party_slot_eq, "$temp", slot_town_lord, "trp_player"),
			(assign, ":value", 1),
			(str_store_party_name, 1, "$temp"),
		(try_end),
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_10_1n",
		[],
		"Order the girl burned inside a wickerman of straw.",
		[
			(party_get_slot, ":temp_center_player_relation", "$temp", slot_center_player_relation),
			(val_add, ":temp_center_player_relation", 10),
			(party_set_slot, "$temp", slot_center_player_relation, ":temp_center_player_relation"),
			(display_message, "@For days, a smell like roast pork follow you around.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2n",
		[],
		"You refuse to enact such a barbaric practice and you send the girl away from the town to safety.",
		[
			(party_get_slot, ":temp_center_player_relation", "$temp", slot_center_player_relation),
			(val_add, ":temp_center_player_relation", -10),
			(party_set_slot, "$temp", slot_center_player_relation, ":temp_center_player_relation"),
			(change_screen_return)
		], "."),

		("choice_10_3n",
		[],
		"Ignore the whole affair.",
		[
			(call_script, "script_change_player_honor", -30),
			(change_screen_return)
		], ".")
	]
	),

	("event_11_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "The sound of a galloping horse pierces the cold morning, and you run outside to find a scout. He tells you a strange ship carrying men who speak a strange language has been shipwrecked at the nearest coast. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_11_1n",
		[],
		"Immediately send a warband to investigate and search for valuables. If there are any survivors, kill them.",
		[
			(call_script, "script_change_player_honor", -10),
			(troop_add_gold, "trp_player", 500),
			(change_screen_return)
		], "."),

		("choice_11_2n",
		[],
		"Immediately send a warband to investigate and search for valuables.",
		[
			(troop_add_gold, "trp_player", 200),
			(change_screen_return)
		], "."),

		("choice_11_3n",
		[],
		"Do nothing.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_12_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "The runner arrives at the courtroom, and after you allow it, starts to tell dire news. 'My liege, a village is in great danger! The populace has some kind of strange sickness, they can hardly move, they sweat blood, and vomit! And the local wise-woman has no cure for it. The lord of the village doesn't let anyone out for the moment, and is waiting on your orders!'",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_12_1n",
		[],
		"Dire news indeed! The quarantine should stay, but I will send aid!",
		[
			(call_script, "script_change_troop_renown", "trp_player", 15),
			(change_screen_return)
		], "."),

		("choice_12_2n",
		[],
		"Dire news indeed! The quarantine should stay, and we will examine the survivors when the epicemic is over!",
		[
			(call_script, "script_change_player_honor", -15),
			(change_screen_return)
		], ".")
	]
	),

	("event_13_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "The servants approach you: My lord, the childbirth is not going well! We tried everything we could, but it seems that the young lady is simply not suited for the ordeal. All that is left is to pray.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_13_1n",
		[],
		"Everybody, kneel down and start praying!",
		[
			(call_script, "script_change_player_honor", 5),
			(change_screen_return)
		], "."),

		("choice_13_2n",
		[],
		"Hah! You servants are good for nothing! Guards, bring me the wise woman from the village, NOW!.",
		[
			(call_script, "script_change_troop_renown", "trp_player", 15),
			(change_screen_return)
		], ".")
	]
	),

	("event_14_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "One day, a loyal warrior comes to you with a strange request. 'My lord, I am in a bind! I spent all my money on proper equipment and troops, so that I can serve you well. However, my daughter is about to marry, and I cannot give a proper dowry to the husband'.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_14_1n",
		[],
		"Give the man 1000 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(call_script, "script_change_player_honor", 10),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -30),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_14_2n",
		[],
		"Everyone should plan ahead. I will grant you 500 coins, but this is the last time.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(call_script, "script_change_player_party_morale", -25),
				(call_script, "script_change_player_honor", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -30),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_14_3n",
		[],
		"No, you should have saved up the coin!",
		[
			(call_script, "script_change_player_party_morale", -50),
			(call_script, "script_change_player_honor", -15),
			(change_screen_return)
		], ".")
	]
	),

	("event_15_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "One day, your servant arrives at your court, he seems very enthusiastic! 'My lord, I have splendid news! There is a hermit from the Red Mountains in the nearby village now, and he is willing to give us a piece of blessed Baelors hair! I cannot believe that our lands has the opportunity to gain such a famous relic!'",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_15_1n",
		[],
		"Baelors hair is everywhere! I have no need for fake relics!",
		[
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(change_screen_return)
		], "."),

		("choice_15_2n",
		[],
		"Our lands shall be blessed indeed.",
		[
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], ".")
	]
	),

	("event_16_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "You were having a feast with your companions when a messenger from the guild masters came before you. 'My liege, there is a situation developing in the town and we need your council.' You stepped outside, but took your mighty weapon with you.^^There is a great deal of rumble among the crowd, but when you appear, silence falls over the audience. An ancient man bows to you and ask permission to speak, which you give, and  he says: 'My liege, here is a case worthy of your wisdom. There are two women who claim to be the mother of this child.^You say to the crowd 'Let their faces be known'. Two women show up, one in plain clothes and another in rags. You say 'If neither agree, the child will be cut in half' You direct your guards to cut the child in half and give one half to each of the women.Then the woman in rags scream and says 'No please my great king, let the other women have the child. You stare at her and say: 'Your are the rightful mother and this child belongs to you'. The woman in rags fall down sobbing with joy, and when your men ask you what to do with the other claimaint, you tell them:",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_16_1n",
		[],
		"Imprison her in the darkest dungeon.",
		[
			(call_script, "script_change_player_honor", 5),
			(call_script, "script_change_troop_renown", "trp_player", 20),
			(change_screen_return)
		], "."),

		("choice_16_2n",
		[],
		"Hang her.",
		[
			(call_script, "script_change_player_honor", 5),
			(call_script, "script_change_troop_renown", "trp_player", 30),
			(change_screen_return)
		], "."),

		("choice_16_3n",
		[],
		"Give her and the crowd a speech about honesty and honor, and let her live.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_17_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "Your advisor, streaked with dirt and sunburned, arrives after inspecting the harvest. 'My liege, the harvest is poor this year. If you do not reduce taxes there will be nothing to feed the smallfolk this winter.'",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_17_1n",
		[],
		"And if I reduce taxes I will have to release men from their oaths, and our enemies would overrun us. Better a empty gut than a cut throat.",
		[
			(call_script, "script_change_troop_renown", "trp_player", 15),
			(change_screen_return)
		], "."),

		("choice_17_2n",
		[],
		"Then reduce the tax. It will cost 2000 coins",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 2000),
				(troop_remove_gold, "trp_player", 2000),
				(call_script, "script_change_troop_renown", "trp_player", 20),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], ".")
	]
	),

	("event_18_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "A peasant from a nearby village comes to you as a supplicant. He breathlessly reports that armed men have raided your holdings, carrying off women, cattle and grain. He is spattered with blood and stinks of burned thatch.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_18_1n",
		[],
		"Gather my men! We'll avenge this insult! It will cost 300 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 300),
				(troop_remove_gold, "trp_player", 300),
				(call_script, "script_change_troop_renown", "trp_player", 10),
				(call_script, "script_change_player_honor", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -30),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_18_2n",
		[],
		"There is nothing to be done here. Away with you, mongrel!",
		[
			(call_script, "script_change_player_party_morale", -25),
			(call_script, "script_change_player_honor", -5),
			(change_screen_return)
		], "."),

		("choice_18_3n",
		[],
		"There will be war. You have done well to report this to me.",
		[
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(call_script, "script_change_player_honor", 5),
			(display_message, "@But who did this?!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_18_4n",
		[],
		"How can I be sure it wasn't a band of outlaws or madmen? There is little I can do for you.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -20),
			(change_screen_return)
		], ".")
	]
	),

	("event_19_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "A whore is accused of witchcraft, after several men-at-arms, sworn to your vassal, reported pain while relieving themselves. Your vassal backs their claim, and you suspect he might have the same complaint but know better than to air it publicly.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_19_1n",
		[],
		"Banish the whore, exiling her to the forest.",
		[
			(call_script, "script_change_player_honor", -5),
			(change_screen_return)
		], "."),

		("choice_19_2n",
		[],
		"Have the whore secretly executed.",
		[
			(call_script, "script_change_player_honor", -10),
			(change_screen_return)
		], "."),

		("choice_19_3n",
		[],
		"Witches! Where there's one, there's many! Kill the witch and ensure the sanctity of your holdings by killing anyone else accused of witchcraft!",
		[
			(try_for_range, ":party", "p_town_1", "p_salt_mine"),
				(call_script, "script_change_player_relation_with_center", ":party", 5),
			(try_end),
			(change_screen_return)
		], ".")
	]
	),

	("event_20_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "A holy man comes upon you, and tells you that most of the inhabitants of one of your villages, where he was preaching his odd religion, has taken up arms and attacked him and his followers. The cause, he says, was that he wanted the villagers to eat dirt.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_20_1n",
		[],
		"This man is obviously insane.",
		[
			(call_script, "script_change_player_honor", 5),
		(try_end),
		(change_screen_return)
		], "."),

		("choice_20_2n",
		[],
		"This man is right! They should eat dirt!",
		[
			(call_script, "script_change_player_honor", -5),
		(try_end),
		(change_screen_return)
		], "."),

		("choice_20_3",
		[],
		"We should all eat dirt!",
		[
			(call_script, "script_change_player_honor", -25),
			(call_script, "script_change_troop_renown", "trp_player", -25),
		(try_end),
		(change_screen_return)
		], "."),

		("choice_20_4n",
		[],
		"Ignore him.",
		[
			(call_script, "script_change_troop_renown", "trp_player", 10),
			(change_screen_return)
		], ".")
	]
	),

	("event_21_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "Your peasants are every bit as vain and arrogant as the lords of this land.A dispute over something as idiotic as a dead chicken has caused a small war between two hamlets. A peasant has come to seek your help against the other villagers. He says the village will pay you.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_21_1n",
		[],
		"Agree to help.",
		[
			(call_script, "script_change_player_honor", -10),
			(troop_add_gold, "trp_player", 100),
			(change_screen_return)
		], "."),

		("choice_21_2n",
		[],
		"Imprison the man, and declare his property forfeit and the lands given over to the other village.",
		[
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(call_script, "script_change_player_honor", 5),
			(troop_add_gold, "trp_player", 500),
			(change_screen_return)
		], "."),

		("choice_21_3n",
		[],
		"Seize the lands for yourself and exile the peasant.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -20),
			(call_script, "script_change_player_honor", -10),
			(troop_add_gold, "trp_player", 1000),
			(change_screen_return)
		], ".")
	]
	),

	("event_22_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "A woman from a nearby village comes to you claiming that one of your men, who has died recently, was her husband. She asks for assistance to take care of her deceased husbands child.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_22_1n",
		[],
		"Give her some coin and send for a wetnurse. It will cost 500 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(call_script, "script_change_player_honor", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_22_2n",
		[],
		"Ignore her.",
		[
			(call_script, "script_change_player_honor", -5),
			(change_screen_return)
		], ".")
	]
	),

	("event_23_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "Your lover approaches you with a request, 'My liege, would it not show your great mercy and honor if you where to provide for those who have suffered while serving under you? We have dozens of maimed, lame and aged soldiers begging for coin in the streets, and many families who have lost fathers and husbands in your battles. We need to reward and protect your loyal supporters or else men might be hesitant in the future to be in your retinue.'",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_23_1n",
		[],
		"Bah! Let the orphans and the beggars rot.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -20),
			(call_script, "script_change_player_honor", -15),
			(change_screen_return)
		], "."),

		("choice_23_2n",
		[],
		"Send those outcasts my regards, but I regret there is nothing I can do for them.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -20),
			(change_screen_return)
		], "."),

		("choice_23_3n",
		[],
		"I agree, we should support our veterans and their families. It will cost 2000 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 2000),
				(troop_remove_gold, "trp_player", 2000),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -50),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_23_4n",
		[],
		"This is a tragedy! Immediately open my coffers and make it an official policy that all families shall receive support from their liege. It will cost 5000 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 5000),
				(troop_remove_gold, "trp_player", 5000),
				(call_script, "script_change_troop_renown", "trp_player", 25),
				(call_script, "script_change_player_honor", 20),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -100),
			(try_end),
			(change_screen_return)
		], ".")
	]
	),

	("event_24_juicio", mnf_disable_all_keys|menu_text_color(0xff000000), "A seemingly straightforward case is brought before you: Yesterday, the accused man broke into the victims house and removed large amounts of wealth. Many people saw him and the missing items were discovered in his house. But the victim was a influential supporter of the previous lord, had actually served as a councillor and was known to be of doubtful loyalties, while the accused was one of your most vocal supporters and had donated much money to your cause.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_sovereign")
	],
	[
		("choice_24_1n",
		[],
		"Ignoring the evidence, you settle in your mans favor, saying he was acting on your orders.",
		[
			(call_script, "script_change_player_honor", -10),
			(call_script, "script_change_player_party_morale", 50),
			(try_for_range, ":party", "p_town_1", "p_salt_mine"),
				(call_script, "script_change_player_relation_with_center", ":party", -5),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_24_2n",
		[],
		"The evidence is clear, the accused is found guilty and has his hands cut off for theft!",
		[
			(call_script, "script_change_player_party_morale", -50),
			(try_for_range, ":party", "p_town_1", "p_salt_mine"),
				(call_script, "script_change_player_relation_with_center", ":party", 5),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_24_3n",
		[],
		"You claim both parties are in the wrong, exiling them and confiscating all material pertaining to the case.",
		[
			(troop_add_gold, "trp_player", 3000),
			(call_script, "script_change_player_party_morale", -50),
			(try_for_range, ":party", "p_town_1", "p_salt_mine"),
				(call_script, "script_change_player_relation_with_center", ":party", -5),
			(try_end),
			(change_screen_return)
		], ".")
	]
	),

	("event_01", mnf_disable_all_keys|menu_text_color(0xff000000), "A singer composed a song about your noble deeds.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_01_1",
		[],
		"Excellent!",
		[
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_01_2",
		[],
		"Reward him with 200 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(call_script, "script_change_troop_renown", "trp_player", 10),
				(troop_remove_gold, "trp_player", 200),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_01_3",
		[],
		"Noble deeds? A song? What a fool!",
		[
			(call_script, "script_change_troop_renown", "trp_player", -20),
			(change_screen_return)
		], ".")
	]
	),

	("event_02", mnf_disable_all_keys|menu_text_color(0xff000000), "Tales of your deeds spread through the countryside. Everywhere you go, your procession is surrounded by beggars.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_beggar")
	],
	[
		("choice_02_1",
		[],
		"Donate 1000 coins to the local alms fund.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(call_script, "script_change_player_honor", 5),
				(call_script, "script_change_troop_renown", "trp_player", 20),
				(troop_remove_gold, "trp_player", 2000),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_02_2",
		[],
		"Ignore them.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(call_script, "script_change_player_honor", -5),
			(change_screen_return)
		], ".")
	]
	),

	("event_03", mnf_disable_all_keys|menu_text_color(0xff000000), "A young bard spreads rumors about your mother. Accusations of working in the world's oldest profession are the most delicate ones.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_03_1",
		[],
		"Challenge him to a duel.",
		[
			(call_script, "script_change_player_honor", 5),
			(display_message, "@The young bard preferred to flee rather than duel with you!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_03_2",
		[],
		"Ignore him.",
		[
			(call_script, "script_change_player_honor", -5),
			(change_screen_return)
		], ".")
	]
	),

	("event_04", mnf_disable_all_keys|menu_text_color(0xff000000), "You encounter a beggar and his daughter on the road. They look hungry.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_beggar")
	],
	[
		("choice_04_1",
		[],
		"Give them 200 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(call_script, "script_change_player_honor", 5),
				(troop_remove_gold, "trp_player", 200),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_04_2",
		[],
		"Ignore them.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_05", mnf_disable_all_keys|menu_text_color(0xff000000), "A local bard is spreading false rumors about you. While most of the stories are just pure nonsense, sooner or later people will believe those stories.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_05_1",
		[],
		"Let him speak what he wants. Every man has his rights.",
		[
			(call_script, "script_change_player_honor", -5),
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(change_screen_return)
		], "."),

		("choice_05_2",
		[],
		"Pay a local scribe 300 coins to spread positive rumors.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 300),
				(call_script, "script_change_player_honor", 5),
				(call_script, "script_change_troop_renown", "trp_player", 5),
				(troop_remove_gold, "trp_player", 300),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -15),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_05_5",
		[],
		"Ignore him.",
		[
			(call_script, "script_change_player_honor", -10),
			(change_screen_return)
		], ".")
	]
	),

	("event_06", mnf_disable_all_keys|menu_text_color(0xff000000), "A mob of angry {s1} dwellers are complaining about corrupt tax collectors. They demand justice. The situation is getting worse by the minute. It looks like a riot is about to begin unless you do something.",
	"none",
	[
		(assign, ":value", 0),
		(try_for_range, ":unused", 0, 9999),
			(eq, ":value", 0),
			(store_random_party_in_range, "$temp", "p_town_1", "p_salt_mine"),
			(neg|party_slot_eq, "$temp", slot_party_type, 2),
			(party_slot_eq, "$temp", slot_town_lord, "trp_player"),
			(assign, ":value", 1),
			(str_store_party_name, 1, "$temp"),
		(try_end),
		(set_background_mesh, "mesh_pic_game_event_crowd")
	],
	[
		("choice_06_1",
		[],
		"Begin an investigation and give the peasants 2000 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 2000),
				(party_get_slot, ":temp_center_player_relation", "$temp", slot_center_player_relation),
				(val_add, ":temp_center_player_relation", 5),
				(party_set_slot, "$temp", slot_center_player_relation, ":temp_center_player_relation"),
				(troop_remove_gold, "trp_player", 2000),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
				(party_get_slot, ":temp_center_player_relation", "$temp", slot_center_player_relation),
				(val_add, ":temp_center_player_relation", -5),
				(party_set_slot, "$temp", slot_center_player_relation, ":temp_center_player_relation"),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_06_2",
		[],
		"Order the town guards to prevent the mob from spreading and turning into a riot.",
		[
			(party_get_slot, ":temp_center_player_relation", "$temp", slot_center_player_relation),
			(val_add, ":temp_center_player_relation", 5),
			(party_set_slot, "$temp", slot_center_player_relation, ":temp_center_player_relation"),
			(change_screen_return)
		], "."),

		("choice_06_3",
		[],
		"Ignore them.",
		[
			(call_script, "script_change_player_honor", -5),
			(party_get_slot, ":temp_center_player_relation", "$temp", slot_center_player_relation),
			(val_add, ":temp_center_player_relation", -5),
			(party_set_slot, "$temp", slot_center_player_relation, ":temp_center_player_relation"),
			(troop_add_gold, "trp_player", 200),
			(change_screen_return)
		], ".")
	]
	),

	("event_07", mnf_disable_all_keys|menu_text_color(0xff000000), "A single rider, looking poor and unarmed, approaches your party. Intercepted by your men he presents himself as a singer from {s1} and requests your permission to compose an ode about your magnificency and generosity. Your men exchange glances and then look at you waiting for an answer. You...",
	"none",
	[
		(assign, ":value", 0),
		(try_for_range, ":unused", 0, 9999),
			(eq, ":value", 0),
			(store_random_party_in_range, "$temp", "p_town_1", "p_salt_mine"),
			(neg|party_slot_eq, "$temp", slot_party_type, 2),
			(party_slot_eq, "$temp", slot_town_lord, "trp_player"),
			(assign, ":value", 1),
			(str_store_party_name, 1, "$temp"),
		(try_end),
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_07_1",
		[],
		"Grant permission to the singer and pay him 500 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(call_script, "script_change_troop_renown", "trp_player", 10),
				(party_get_slot, ":temp_center_player_relation", "$temp", slot_center_player_relation),
				(val_add, ":temp_center_player_relation", 5),
				(party_set_slot, "$temp", slot_center_player_relation, ":temp_center_player_relation"),
				(troop_remove_gold, "trp_player", 500),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_07_2",
		[],
		"Grant permission to the singer and pay him 100 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 100),
				(troop_remove_gold, "trp_player", 100),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -2),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_07_3",
		[],
		"Allow the singer to compose the ode but offer him no payment.",
		[
			(store_random_in_range, ":random_in_range_-2_2", -2, 2),
			(party_get_slot, ":temp_center_player_relation", "$temp", slot_center_player_relation),
			(val_add, ":temp_center_player_relation", ":random_in_range_-2_2"),
			(party_set_slot, "$temp", slot_center_player_relation, ":temp_center_player_relation"),
			(change_screen_return)
		], "."),

		("choice_07_4",
		[],
		"Ignore him.",
		[
			(call_script, "script_change_player_honor", -5),
			(change_screen_return)
		], ".")
	]
	),

	("event_08", mnf_disable_all_keys|menu_text_color(0xff000000), "You spot a single man riding hard towards your party. With a gesture of your hand, your men run to meet him. Intercepted by your men he presents himself as an emissary from one of the small villages in your hamlet and without delay informs you that an influential man has died {s2} and that his family requests that you agree to declare an official day of mourning in his honor. You...",
	"none",
	[
		(assign, ":value", 0),
		(try_for_range, ":unused", 0, 9999),
			(eq, ":value", 0),
			(store_random_party_in_range, "$temp", "p_town_1", "p_salt_mine"),
			(neg|party_slot_eq, "$temp", slot_party_type, 2),
			(assign, ":value", 1),
			(str_store_party_name, 1, "$temp"),
		(try_end),
		(store_random_in_range, ":random_in_range_1_10", 1, 10),
		(try_begin),
			(ge, ":random_in_range_1_10", 8),
			(str_store_string, 2, "@of a fulminating disease"),
		(else_try),
			(ge, ":random_in_range_1_10", 5),
			(str_store_string, 2, "@in a hunting accident"),
		(else_try),
			(ge, ":random_in_range_1_10", 3),
			(str_store_string, 2, "@by being kicked by a goat"),
		(else_try),
			(ge, ":random_in_range_1_10", 0),
			(str_store_string, 2, "@of indigestion"),
		(try_end),
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_08_1",
		[],
		"Agree to the request and donate 500 coins to the widow.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(party_get_slot, ":temp_center_player_relation", "$temp", slot_center_player_relation),
				(val_add, ":temp_center_player_relation", 2),
				(party_set_slot, "$temp", slot_center_player_relation, ":temp_center_player_relation"),
				(troop_remove_gold, "trp_player", 500),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_08_2",
		[],
		"Refuse the request.",
		[
			(party_get_slot, ":temp_center_player_relation", "$temp", slot_center_player_relation),
			(val_add, ":temp_center_player_relation", -2),
			(party_set_slot, "$temp", slot_center_player_relation, ":temp_center_player_relation"),
			(change_screen_return)
		], ".")
	]
	),

	("event_09", mnf_disable_all_keys|menu_text_color(0xff000000), "You are travelling through the forest and you suddenly spot a wild hare, trapped in a snare. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_09_1",
		[],
		"Free the animal.",
		[
			(change_screen_return)
		], "."),

		("choice_09_2",
		[],
		"Clench the snare and kill the hare!",
		[
			(troop_add_item, "trp_player", "itm_event_rabbit", 0),
			(change_screen_return)
		], "."),

		("choice_09_3",
		[],
		"Ignore it.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_10", mnf_disable_all_keys|menu_text_color(0xff000000), "You are travelling through the forest and you spot a peasant tied up a tree, probably by a bandit. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 1)
		],
		"Free the peasant.",
		[
			(call_script, "script_change_player_honor", 1),
			(party_add_members, "p_main_party", "trp_event_peasant", 1),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore him.",
		[
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Kill the peasant",
		[
			(call_script, "script_change_player_honor", -1),
			(change_screen_return)
		], ".")
	]
	),

	("law_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "You have decided to bring order to your holdings, by introducing a new law. After consulting your courtiers, you decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_law")
	],
	[
		("choice_10_1",
		[],
		"Outlaw turnips.",
		[
			(display_message, "@Your courtiers are horrified. The peasants will starve!", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -50),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Outlaw pants.",
		[
			(display_message, "@Your courtiers are horrified. People will think you're mad!", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -50),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Outlaw violence.",
		[
			(display_message, "@Your courtiers roll their eyes. It will have no effect!", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -50),
			(change_screen_return)
		], "."),

		("choice_10_4",
		[],
		"Outlaw serfdom.",
		[
			(display_message, "@Your courtiers are horrified, but the peasants will love you.", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 20),
			(change_screen_return)
		], "."),

		("choice_10_5",
		[],
		"Outlaw heresy.",
		[
			(display_message, "@Both nobles and peasants rejoice at the news!", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 20),
			(change_screen_return)
		], "."),

		("choice_10_6",
		[],
		"Do nothing.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(change_screen_return)
		], ".")
	]
	),

	("law_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "You have decided to bring order to your holdings, by introducing a new law. After consulting your courtiers, you decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_law")
	],
	[
		("choice_10_1",
		[],
		"Outlaw the moon.",
		[
			(display_message, "@Your courtiers are horrified. This is a sign of madness!", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -50),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Outlaw freckles.",
		[
			(display_message, "@Your courtiers are horrified. People will think you're mad!", 0x000ff000),
			(call_script, "script_change_troop_renown", "trp_player", -50),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Outlaw whores.",
		[
			(display_message, "@Your courtiers roll their eyes. It will have no effect!", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -50),
			(change_screen_return)
		], "."),

		("choice_10_4",
		[],
		"Outlaw gibbets.",
		[
			(display_message, "@Your courtiers are horrified, but the peasants will love you.", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 20),
			(change_screen_return)
		], "."),

		("choice_10_5",
		[],
		"Outlaw flaying.",
		[
			(display_message, "@Both nobles and peasants rejoice at the news!", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 20),
			(change_screen_return)
		], "."),

		("choice_10_6",
		[],
		"Do nothing.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(change_screen_return)
		], ".")
	]
	),

	("law_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "You have decided to bring order to your holdings, by introducing a new law. After consulting your courtiers, you decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_law")
	],
	[
		("choice_10_1",
		[],
		"Put a tax on ploughs.",
		[
			(display_message, "@The peasants are outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 250),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Put a tax on destriers.",
		[
			(display_message, "@Your courtiers are horrified. The nobles are outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 500),
			(call_script, "script_change_troop_renown", "trp_player", -25),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Put a tax on marriage.",
		[
			(display_message, "@Peasant and noble alike is outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 500),
			(call_script, "script_change_troop_renown", "trp_player", -50),
			(change_screen_return)
		], "."),

		("choice_10_4",
		[],
		"Put a tax on fairs.",
		[
			(display_message, "@Your courtiers are indifferent, but the townspeople are outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 500),
			(call_script, "script_change_troop_renown", "trp_player", -25),
			(change_screen_return)
		], "."),

		("choice_10_5",
		[],
		"Put a tax on silks.",
		[
			(display_message, "@The nobles are outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 500),
			(call_script, "script_change_troop_renown", "trp_player", -25),
			(change_screen_return)
		], "."),

		("choice_10_6",
		[],
		"Do nothing.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(change_screen_return)
		], ".")
	]
	),

	("law_event_4", mnf_disable_all_keys|mnf_disable_all_keys|menu_text_color(0xff000000), "You have decided to bring order to your holdings, by introducing a new law. After consulting your courtiers, you decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_law")
	],
	[
		("choice_10_1",
		[],
		"Put a tax on sheep.",
		[
			(display_message, "@The peasants are outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 250),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Put a tax on cows.",
		[
			(display_message, "@The peasants are outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 250),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Put a tax on chickens.",
		[
			(display_message, "@The peasants are outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 250),
			(change_screen_return)
		], "."),

		("choice_10_4",
		[],
		"Put a tax on wine.",
		[
			(display_message, "@The nobles are outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 500),
			(call_script, "script_change_troop_renown", "trp_player", -25),
			(change_screen_return)
		], "."),

		("choice_10_5",
		[],
		"Put a tax on pearls.",
		[
			(display_message, "@The nobles are outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 500),
			(call_script, "script_change_troop_renown", "trp_player", -25),
			(change_screen_return)
		], "."),

		("choice_10_6",
		[],
		"Do nothing.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(change_screen_return)
		], "."),

		("choice_10_1",
		[],
		"Stop taxing the peasants.",
		[
			(display_message, "@The peasants rejoice!", 0x0033ccff),
			(troop_remove_gold, "trp_player", 10000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Stop taxing the nobles.",
		[
			(display_message, "@The nobles rejoice!", 0x0033ccff),
			(troop_remove_gold, "trp_player", 15000),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Stop taxing holy places.",
		[
			(display_message, "@Noble and peasant alike rejoice!", 0x0033ccff),
			(troop_remove_gold, "trp_player", 15000),
			(change_screen_return)
		], "."),

		("choice_10_6",
		[],
		"Do nothing.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(change_screen_return)
		], ".")
	]
	),

	("law_event_4", mnf_disable_all_keys|mnf_disable_all_keys|menu_text_color(0xff000000), "You have decided to bring order to your holdings, by introducing a new law. After consulting your courtiers, you decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_law")
	],
	[
		("choice_10_1",
		[],
		"Put a tax on sheep.",
		[
			(display_message, "@The peasants are outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 250),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Put a tax on cows.",
		[
			(display_message, "@The peasants are outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 250),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Put a tax on chickens.",
		[
			(display_message, "@The peasants are outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 250),
			(change_screen_return)
		], "."),

		("choice_10_4",
		[],
		"Put a tax on wine.",
		[
			(display_message, "@The nobles are outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 500),
			(call_script, "script_change_troop_renown", "trp_player", -25),
			(change_screen_return)
		], "."),

		("choice_10_5",
		[],
		"Put a tax on pearls.",
		[
			(display_message, "@The nobles are outraged!", 0x00ff0000),
			(troop_add_gold, "trp_player", 500),
			(call_script, "script_change_troop_renown", "trp_player", -25),
			(change_screen_return)
		], "."),

		("choice_10_6",
		[],
		"Do nothing.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(change_screen_return)
		], "."),

		("choice_10_1",
		[],
		"Stop taxing the peasants.",
		[
			(display_message, "@The peasants rejoice!", 0x0033ccff),
			(troop_remove_gold, "trp_player", 10000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Stop taxing the nobles.",
		[
			(display_message, "@The nobles rejoice!", 0x0033ccff),
			(troop_remove_gold, "trp_player", 15000),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Stop taxing holy places.",
		[
			(display_message, "@Noble and peasant alike rejoice!", 0x0033ccff),
			(troop_remove_gold, "trp_player", 15000),
			(change_screen_return)
		], "."),

		("choice_10_6",
		[],
		"Do nothing.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(change_screen_return)
		], ".")
	]
	),

	("law_event_5", mnf_disable_all_keys|menu_text_color(0xff000000), "You have decided to bring order to your holdings, by introducing a new law. After consulting your courtiers, you decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_law")
	],
	[
		("choice_10_1",
		[],
		"Allow poaching.",
		[
			(display_message, "@The peasants rejoice!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Allow heresy.",
		[
			(display_message, "@No one seems to care.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Allow the peasants to cut trees in your forest, for a small fee.",
		[
			(display_message, "@The peasants rejoice!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Allow the nobles to hunt in your forest.",
		[
			(display_message, "@The nobles rejoice!", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 15),
			(change_screen_return)
		], "."),

		("choice_10_6",
		[],
		"Do nothing.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(change_screen_return)
		], ".")
	]
	),

	("crusader_kings_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "You're resting on a bench in a small village. Sitting near the village center, you overhear the many conversations people are having. The gossip, the rumours, the anger and the happiness. There are so many interesting things going on in the world!",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_10_1",
		[],
		"The world is my playground.",
		[
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"If only I could shut myself off from the rest of the world.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], ".")
	]
	),

	("crusader_kings_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "You're resting on a bench in a small village. Sitting near the village center, you notice a travelling singer. Sitting down beside you on the bench, he offers to sing you a song, for free!",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_10_1",
		[],
		"Sing 'The Rains of Castamere'.",
		[
			(display_message, "@I'd almost forgotten what it sounded like...", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Sing 'The Night that Ended'.",
		[
			(display_message, "@I wonder what happened to the Night's King...", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Sing 'The Bear and Maiden Fair'.",
		[
			(display_message, "@A joyous song!", 0x0033ccff),
			(call_script, "script_change_player_party_morale", 25),
			(change_screen_return)
		], "."),

		("choice_10_4",
		[],
		"Sing 'My Lady Wife'.",
		[
			(display_message, "@A song for children!", 0x00ff0000),
			(call_script, "script_change_player_party_morale", -25),
			(change_screen_return)
		], ".")
	]
	),

	("crusader_kings_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "Two minor nobles from one of your villages fought against each other with swords. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_10_1",
		[],
		"Punish them.",
		[
			(display_message, "@They both fled the village for the woods, and have been declared outlaws.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Do nothing.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("crusader_kings_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "A religious fanatic held a service in one of your villages as you were passing by. After the sermon, he rushed to meet you, shouting for your opinion on the aspects of the Seven...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_10_1",
		[],
		"The what?",
		[
			(display_message, "@The fanatic shouts at you, cursing your heathen mind!", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"The Seven are one.",
		[
			(display_message, "@The fanatic shouts at you, cursing your heathen mind!", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore him.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("crusader_kings_event_5", mnf_disable_all_keys|menu_text_color(0xff000000), "You are conversing with a minor noble, when you hear a loud scream somewhere behind you! Going to investigate, you discover a septon and a farm girl engaged in carnal pleasures, oblivious to the world. When you politely cough, they turn in your direction, and seem to remember where they are. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_10_1",
		[],
		"Punish them.",
		[
			(display_message, "@Your courtiers are horrified at your angered look.", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Let them have their fun.",
		[
			(display_message, "@Your courtiers are in awe of your patience.", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore them.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("crusader_kings_event_6", mnf_disable_all_keys|menu_text_color(0xff000000), "During dinner, one of your courtiers drank too much wine. When you tried to steady him, and help him to his bed, he threw up on your shoes! You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_10_1",
		[],
		"How dare he!",
		[
			(display_message, "@Your courtiers are horrified at your angered look!", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"These things happen!",
		[
			(display_message, "@Your courtiers are in awe of your patience!", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the incident.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("crusader_kings_event_7", mnf_disable_all_keys|menu_text_color(0xff000000), "As you stop for a while, you notice an old man sitting on a rock. Approaching him, he promises to teach you magic from Old Valyria, if only you'll strip naked. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Strip naked.",
		[
			(display_message, "@The old man starts to furiously pleasure himself. What a fool you are.", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -25),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore him.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("crusader_kings_event_8", mnf_disable_all_keys|menu_text_color(0xff000000), "As you stop for a while, you notice an old crone sitting on the ground. Approaching her, she promises to teach you magic from Old Valyria, if only you'll strip naked. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Strip naked.",
		[
			(display_message, "@The old woman starts to furiously pleasure herself. What a fool you are.", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -25),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore him.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("crusader_kings_event_9", mnf_disable_all_keys|menu_text_color(0xff000000), "As you stop for a while, you notice a procession of villagers walking towards you. As they near you, you see a man in their midst, beaten, and with a noose around his neck. As he is pulled towards the gallows, you can hear him faintly whisper a prayer to the Stranger. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_beggar")
	],
	[
		("choice_10_1",
		[],
		"Pray with him.",
		[
			(display_message, "@The man has tears in his eyes.", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore him.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("crusader_kings_event_10", mnf_disable_all_keys|menu_text_color(0xff000000), "As you near the top of a massive cliff, you notice two people already there. Approaching, you hear childrens voices, and realise two kids are standing very close to the edge. As you come nearer, you see that one of the kids has some sort of contraption strapped to his back. The child is obviously going to try and fly off the cliff! You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Stop him!",
		[
			(display_message, "@Foolish child!", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore him.",
		[
			(display_message, "@A faint 'plop' was heard when the child hit the ground...", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -50),
			(change_screen_return)
		], ".")
	]
	),

	("crusader_kings_event_11", mnf_disable_all_keys|menu_text_color(0xff000000), "You've heard rumours of a black wight living in your hall! People have seen it move around in the dead of night, often stealing food from the pantry and keeping close to the walls. Something must be done! Setting a watch, you quickly catch the supposed 'wight', which turns out to be two children in a cloak. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_horror")
	],
	[
		("choice_10_1",
		[],
		"Punish them.",
		[
			(display_message, "@Foolish children!", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Let them go, with a warning.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("crusader_kings_event_12", mnf_disable_all_keys|menu_text_color(0xff000000), "Two of your courtiers where caught in the same bed, doing something reserved for married couples. When the two young maidens are brought before you, you decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_10_1",
		[],
		"Keep them apart.",
		[
			(display_message, "@That'll teach them the proper way of the world!", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the incident.",
		[
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], ".")
	]
	),

	("crusader_kings_event_13", mnf_disable_all_keys|menu_text_color(0xff000000), "Last night, you had a dream. A strange creature, with five heads and no legs, told you to shout at the moon! Surely dreams are to be taken seriously. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_10_1",
		[],
		"Shout at the moon!",
		[
			(display_message, "@Your courtiers have a worried look in their eyes.", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -25),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the dream.",
		[
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], ".")
	]
	),

	("crusader_kings_event_14", mnf_disable_all_keys|menu_text_color(0xff000000), "One of your courtiers have clearly gone mad. He keeps talking to his horse, as if it understood him, and last night the servants caught him doing something... odd... with the horse. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_10_1",
		[],
		"Dismiss him from your service.",
		[
			(display_message, "@Your courtiers can sleep soundly again.", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the man, and his horse.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], ".")
	]
	),

	("desert_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "You're walking along a dried out riverbed, when you see a scorpion! You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("choice_10_1",
		[],
		"Step on it!",
		[
			(display_message, "@The scorpion was crushed!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Stand still!",
		[
			(display_message, "@The scorpion ignores you, and continues it's journey across a rock.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("desert_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "You're walking along a dried out riverbed, when you see a scorpion! You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("choice_10_1",
		[],
		"Step on it!",
		[
			(display_message, "@The scorpion dodged your mighty boot! But then it crawled into a hole.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Stand still!",
		[
			(display_message, "@The scorpion stung you! But it appears to be a harmless species of scorpion...", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("desert_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "You kick a rock, and underneath is a white and red viper. You recognise it as the kind called Smooth-Tree Viper by the smallfolk! The snake hiss at you, getting ready to strike! You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("choice_10_1",
		[],
		"Step on it!",
		[
			(display_message, "@The snake was crushed beneath your boot.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Run away!",
		[
			(display_message, "@The snake didn't bite you, but you showed yourself to be a coward.", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(call_script, "script_change_player_party_morale", -25),
			(change_screen_return)
		], ".")
	]
	),

	("desert_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "You kick a rock, and underneath is a blue and green viper. You recognise it as the kind called Queen Viper by the smallfolk! The snake hiss at you, getting ready to strike! You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("choice_10_1",
		[],
		"Step on it!",
		[
			(display_message, "@The snake evaded your boot and bit you! You feel weak.", 0x00ff0000),
			(troop_raise_attribute, "trp_player", 0, -1),
			(display_message, "@You've lost 1 strength.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Run away!",
		[
			(display_message, "@The snake didn't bite you, but you showed yourself to be a coward.", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(call_script, "script_change_player_party_morale", -25),
			(change_screen_return)
		], ".")
	]
	),

	("desert_event_5", mnf_disable_all_keys|menu_text_color(0xff000000), "You kick a rock, and underneath is a black viper. You recognise it as the kind called Long-Nosed Death by the smallfolk! The snake hiss at you, getting ready to strike! You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("choice_10_1",
		[],
		"Step on it!",
		[
			(display_message, "@The snake evaded your boot and bit you! But it appears to be a harmless kind of snake.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Run away!",
		[
			(display_message, "@The snake didn't bite you, but you showed yourself to be a coward.", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(call_script, "script_change_player_party_morale", -25),
			(change_screen_return)
		], ".")
	]
	),

	("desert_event_6", mnf_disable_all_keys|menu_text_color(0xff000000), "You kick a rock, and underneath is a brown viper. You recognise it as the kind called Trinket Snake by the smallfolk! The snake hiss at you, getting ready to strike! You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("choice_10_1",
		[],
		"Kick it!",
		[
			(display_message, "@The snake evaded your boot and bit you! You feel a bit weak.", 0x00ff0000),
			(troop_raise_proficiency, "trp_player", 0, -15),
			(display_message, "@You've lost 15 one-handed weapon proficiency.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Run away!",
		[
			(display_message, "@The snake didn't bite you, but you showed yourself to be a coward.", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(call_script, "script_change_player_party_morale", -25),
			(change_screen_return)
		], ".")
	]
	),

	("desert_event_7", mnf_disable_all_keys|menu_text_color(0xff000000), "You wake up from a brief nap to find a large spider on your left boot! You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("choice_10_1",
		[],
		"Kick it off, quickly!",
		[
			(display_message, "@You've shown yourself to be a coward!", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(call_script, "script_change_player_party_morale", -25),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore it!",
		[
			(display_message, "@You showed yourself to be a man without fear!", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(call_script, "script_change_player_party_morale", 25),
			(change_screen_return)
		], ".")
	]
	),

	("desert_event_8", mnf_disable_all_keys|menu_text_color(0xff000000), "A vulture is seen flying overhead, carrying a large rat in its claws. Suddenly, the vulture is attacked by an eagle! This must surely be an omen, but how to interpret it...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("choice_10_1",
		[],
		"It's a sign from the gods!",
		[
			(display_message, "@But what does it mean!", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(call_script, "script_change_player_party_morale", -25),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"The eagle is me! It's a sign of victory!",
		[
			(display_message, "@Victory will be mine!", 0x0033ccff),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(call_script, "script_change_player_party_morale", 25),
			(change_screen_return)
		], ".")
	]
	),

	("desert_event_9", mnf_disable_all_keys|menu_text_color(0xff000000), "You decide to rest for a while, in the shade of a great palm tree. Dates are strewn on the ground, sweet and delicious. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("choice_10_1",
		[],
		"Eat a date.",
		[
			(display_message, "@Delicious indeed!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Eat all the dates!",
		[
			(display_message, "@Delicious indeed!", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("desert_event_10", mnf_disable_all_keys|menu_text_color(0xff000000), "You decide to rest for a while, in the shade of a great cactus. The cactus bears a strange fruit. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("choice_10_1",
		[],
		"Eat the fruit.",
		[
			(display_message, "@Delicious!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the fruit.",
		[
			(display_message, "@Your stomach grumbles!", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("desert_event_11", mnf_disable_all_keys|menu_text_color(0xff000000), "You decide to rest for a while, in the shade of a great rock. A clear stream can be heard bubbling beneath the rock. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("choice_10_1",
		[],
		"Drink from the stream.",
		[
			(display_message, "@Refreshing!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the stream.",
		[
			(display_message, "@You're so thirsty!", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("desert_event_12", mnf_disable_all_keys|menu_text_color(0xff000000), "You decide to rest for a while, in the shade of a great rock. As you near the rock, you notice an old man, dressed in white. He appears to be sleeping. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_desert")
	],
	[
		("choice_10_1",
		[],
		"Steal his purse!",
		[
			(display_message, "@It was empty!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the man.",
		[
			(display_message, "@Time to look for another rock.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("agility_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "You're travelling through a forest, when your hear a crack above your head. A large branch is about to break off an even larger tree. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Step out of the way.",
		[
			(display_message, "@You stepped out of the way, avoiding the branch.", 0x0033ccff),
			(troop_raise_attribute, "trp_player", 1, 1),
			(display_message, "@You've gained 1 agility.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the entire thing.",
		[
			(display_message, "@The branch hits you in the head.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("agility_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "You're travelling through a forest, when you slip in a puddle of mud. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Nimbly regain your balance.",
		[
			(display_message, "@You regained your balance.", 0x0033ccff),
			(troop_raise_attribute, "trp_player", 1, 1),
			(display_message, "@You've gained 1 agility.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the entire thing.",
		[
			(display_message, "@You fall over, into the puddle.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("agility_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "You're travelling through a forest, when you stumble over a rock. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Nimbly regain your balance.",
		[
			(display_message, "@You regained your balance.", 0x0033ccff),
			(troop_raise_attribute, "trp_player", 1, 1),
			(display_message, "@You've gained 1 agility.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the entire thing.",
		[
			(display_message, "@You fall over, and hurt your head.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("agility_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "You're travelling through a forest. Pushing aside a branch, a bird flies out and startle you, causing you to lose your balance. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Nimbly regain your balance.",
		[
			(display_message, "@You regained your balance.", 0x0033ccff),
			(troop_raise_attribute, "trp_player", 1, 1),
			(display_message, "@You've gained 1 agility.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the entire thing.",
		[
			(display_message, "@You fall over, and hurt your head.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("agility_event_5", mnf_disable_all_keys|menu_text_color(0xff000000), "You're travelling through a forest. Suddenly, you notice a galloping sound in the distance. A stag is charging at you! You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Avoid the stag.",
		[
			(display_message, "@You avoided the stag.", 0x0033ccff),
			(troop_raise_attribute, "trp_player", 1, 1),
			(display_message, "@You've gained 1 agility.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Stand your ground.",
		[
			(display_message, "@You got hit by the stag.", 0x00ff0000),
			(troop_raise_attribute, "trp_player", 1, -2),
			(display_message, "@You've lost 2 agility.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the undergrowth of the nearby woods. You find, what appears to be, some tasty wild onions.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Eat them.",
		[
			(troop_raise_proficiency, "trp_player", 0, 5),
			(display_message, "@You roasted the onions over an open fire, they were very tasty.", 0x0033ccff),
			(display_message, "@You've gained 5 one-handed weapon proficiency.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore them.",
		[
			(display_message, "@Your stomach grumbles.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the undergrowth of the nearby woods. You find, what appears to be, some tasty wild turnips.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Eat them.",
		[
			(display_message, "@You roasted the turnips over an open fire, they were very tasty.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore them.",
		[
			(display_message, "@Your stomach grumbles.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the undergrowth of the nearby woods. You find, what appears to be, some tasty wild raddishes.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Eat them.",
		[
			(troop_raise_proficiency, "trp_player", 1, 5),
			(display_message, "@You roasted the raddishes over an open fire, they were very tasty.", 0x0033ccff),
			(display_message, "@You've gained 5 one-handed weapon proficiency.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore them.",
		[
			(display_message, "@Your stomach grumbles.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to settle down for a while, to fish in the nearby lake. You start to doze off, when suddenly, something yanks on the fishing line!",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Yank back!",
		[
			(troop_add_item, "trp_player", "itm_trade_smoked_fish", 1),
			(display_message, "@You managed to catch a fat fish, and smoked it over an open fire.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Give it some line!",
		[
			(display_message, "@The fish got away!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Jump into the water, and try to catch the fish with your bare hands!",
		[
			(troop_raise_attribute, "trp_player", 0, -1),
			(display_message, "@You've lost 1 strength.", 0x00ff0000),
			(display_message, "@You're soaked and shivering, and all you managed to do was scrabe your knuckles on a rock. It'll be a long while before you're dry again.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_5", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to settle down for a while, to fish in the nearby lake. You start to doze off, when suddenly, something yanks on the fishing line!",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Yank back!",
		[
			(troop_add_item, "trp_player", "itm_trade_smoked_fish", 1),
			(display_message, "@You managed to catch a fat fish, and smoked it over an open fire.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Give it some line!",
		[
			(troop_add_item, "trp_player", "itm_trade_smoked_fish", 2),
			(display_message, "@You managed to catch a fat fish, and the fish had another fish inside it! You smoked both over an open fire.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_6", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to settle down for a while, to fish in the nearby lake. You start to doze off, when suddenly, something yanks on the fishing line!",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Yank back!",
		[
			(display_message, "@The line broke!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Give it some line!",
		[
			(troop_add_item, "trp_player", "itm_trade_smoked_fish", 1),
			(display_message, "@You managed to catch a fat fish, and smoked it over an open fire.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_7", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to settle down for a while, to fish in the nearby lake. You start to doze off, when suddenly, something yanks on the fishing line!",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Yank back!",
		[
			(display_message, "@The fish got away!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Give it some line!",
		[
			(display_message, "@The fish got away!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Jump into the water, and try to catch the fish with your bare hands!",
		[
			(troop_add_item, "trp_player", "itm_trade_smoked_fish", 5),
			(display_message, "@Using your mighty hands, you managed to catch five tasty fish!", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_8", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to settle down for a while, to fish in the nearby lake. You start to doze off, when suddenly, something yanks on the fishing line!",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Yank back!",
		[
			(display_message, "@The fish got away!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Give it some line!",
		[
			(display_message, "@The fish got away!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Jump into the water, and try to catch the fish with your bare hands!",
		[
			(troop_add_item, "trp_player", "itm_we_khe_throw_stone", 0),
			(display_message, "@All you got was a rock!", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_9", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the undergrowth of the nearby woods. You find, what appears to be, some wild geese eggs.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Eat them.",
		[
			(troop_raise_proficiency, "trp_player", 0, 5),
			(display_message, "@You've gained 5 one-handed weapon proficiency.", 0x0033ccff),
			(display_message, "@You fried the eggs on a rock, they were very tasty!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore them.",
		[
			(display_message, "@Your stomach grumbles.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_10", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the undergrowth of the nearby woods. You find, what appears to be, some wild geese eggs.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Eat them.",
		[
			(display_message, "@When you cracked them open, they were filled with worms!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore them.",
		[
			(display_message, "@Your stomach grumbles.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_11", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the undergrowth of the nearby woods. You find, what appears to be, some wild geese eggs.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Eat them.",
		[
			(display_message, "@When you cracked them open, you realised they weren't geese eggs. They were snake eggs!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore them.",
		[
			(display_message, "@Your stomach grumbles.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_12", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the undergrowth of the nearby woods. Rummaging through the woods, you suddenly spot a large bear!",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Run away!",
		[
			(troop_raise_attribute, "trp_player", 2, 1),
			(display_message, "@You've gained 1 intelligence.", 0x0033ccff),
			(display_message, "@A wise decision!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the bear.",
		[
			(troop_raise_attribute, "trp_player", 2, -1),
			(display_message, "@You've lost 1 intelligence.", 0x00ff0000),
			(display_message, "@A stupid decision!", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_13", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the nearby woods. Climbing a tree in the search for eggs, you spot a large nest.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Pillage the nest.",
		[
			(troop_raise_proficiency, "trp_player", 0, 5),
			(display_message, "@You've gained 5 one-handed weapon proficiency.", 0x0033ccff),
			(display_message, "@You fried the eggs on a rock, they were very tasty!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the nest.",
		[
			(display_message, "@Your stomach grumbles.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_14", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the nearby woods. Climbing a tree in the search for eggs, you spot a large nest.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Pillage the nest.",
		[
			(troop_raise_proficiency, "trp_player", 0, -5),
			(display_message, "@You've lost 5 one-handed weapon proficiency.", 0x00ff0000),
			(display_message, "@When you crached open the eggs, they turned out to be very old. A rotten smell follows you for hours.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the nest.",
		[
			(display_message, "@Your stomach grumbles.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_15", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the nearby woods. Walking through the undergrowth, whistling a merry tune, you spot what appears to be some sort of wild apple tree.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Eat the apples.",
		[
			(troop_raise_proficiency, "trp_player", 0, 5),
			(display_message, "@You've gained 5 one-handed weapon proficiency.", 0x0033ccff),
			(display_message, "@The apples were very tasty!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the apples.",
		[
			(display_message, "@Your stomach grumbles.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_16", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the nearby woods. Walking through the undergrowth, whistling a merry tune, you spot what appears to be some sort of wild berry bush.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Eat the berries.",
		[
			(troop_raise_proficiency, "trp_player", 0, 5),
			(display_message, "@You've gained 5 one-handed weapon proficiency.", 0x0033ccff),
			(display_message, "@The berries were very tasty!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the berries.",
		[
			(display_message, "@Your stomach grumbles.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_17", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the nearby woods. Walking through the undergrowth, whistling a merry tune, you spot what appears to be some sort of wild berry bush.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Eat the berries.",
		[
			(troop_raise_proficiency, "trp_player", 0, -20),
			(display_message, "@You've lost 20 one-handed weapon proficiency.", 0x00ff0000),
			(display_message, "@The berries were very tasty! But you feel weak, and there's blood in your urine!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the berries.",
		[
			(display_message, "@Your stomach grumbles.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_18", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the nearby woods. Walking through the undergrowth, whistling a merry tune, you spot what appears to be some sort of wild berry bush.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Eat the berries.",
		[
			(troop_raise_proficiency, "trp_player", 0, 10),
			(display_message, "@You've gained 10 one-handed weapon proficiency.", 0x0033ccff),
			(display_message, "@The berries were very tasty!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the berries.",
		[
			(display_message, "@Your stomach grumbles.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_19", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the nearby woods. Walking through the undergrowth, whistling a merry tune, you spot what appears to be some sort of wild berry bush.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Eat the berries.",
		[
			(troop_raise_proficiency, "trp_player", 0, 10),
			(display_message, "@You've gained 10 one-handed weapon proficiency.", 0x0033ccff),
			(display_message, "@The berries were very tasty!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the berries.",
		[
			(troop_raise_proficiency, "trp_player", 0, -20),
			(display_message, "@You've lost 2 one-handed weapon proficiency.", 0x00ff0000),
			(display_message, "@You were so focused on the berries, you tripped over a rock and hurt your hand!", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("food_event_20", mnf_disable_all_keys|menu_text_color(0xff000000), "You feel a bit peckish, and decide to go hunt for some food in the nearby woods. Walking through the undergrowth, whistling a merry tune, you spot what appears to be some sort of wild berry bush.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_10_1",
		[],
		"Eat the berries.",
		[
			(troop_raise_proficiency, "trp_player", 0, -10),
			(display_message, "@You've lost 10 one-handed weapon proficiency.", 0x00ff0000),
			(display_message, "@The berries tasted horribly! And now you have stomach cramps!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the berries.",
		[
			(troop_raise_proficiency, "trp_player", 0, -20),
			(display_message, "@You've lost 20 one-handed weapon proficiency.", 0x00ff0000),
			(display_message, "@You were so focused on the berries, you tripped over a rock and hurt your hand!", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("coronation_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "As the newly enthroned ruler of a sovereign realm, many men and women come seeking your favour. Goldsmiths, master armorers and all other sorts of craftsmen flock to your court, and you're soon overwhelmed with requests for work or lucrative contracts. The goldsmiths, and armorers in particular, are persistent in their praise of your rule, and how you should have a crown suitable for your noble head. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_1_1",
		[],
		"Request an expensive crowned helmet. (7000 coins)",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7000),
				(troop_remove_gold, "trp_player", 7000),
				(troop_add_item, "trp_player", "itm_longshanks_helm", 0),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Request a reasonably priced crowned helmet. (4000 coins)",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 4000),
				(troop_remove_gold, "trp_player", 4000),
				(troop_add_item, "trp_player", "itm_crown_sallet", 0),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -30),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_3",
		[],
		"Request a cheap crowned helmet. (2500 coins)",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 2500),
				(troop_remove_gold, "trp_player", 2500),
				(troop_add_item, "trp_player", "itm_crown_coif", 0),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_4",
		[],
		"Ignore the smiths.",
		[
			(display_message, "@A ruler should be generous, not miserly!", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -20),
			(change_screen_return)
		], ".")
	]
	),

	("coronation_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "As the goldsmiths and armorers leave your court to return to their work, you notice one man loitering in a corner. When everyone has left, he introduces himself to you as Racallio of Qohor, a renowned armorer. He offers to forge you a magnificent tourney helmet, suitable for a champion such as yourself. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_1_1",
		[],
		"Request a tourney helmet adorned with an eagle. (5000 coins)",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 5000),
				(troop_remove_gold, "trp_player", 5000),
				(troop_add_item, "trp_player", "itm_fi_greathelmet_1", 0),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -10),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Request a tourney helmet adorned with a goat. (5000 coins)",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 5000),
				(troop_remove_gold, "trp_player", 5000),
				(troop_add_item, "trp_player", "itm_fi_tourney_helmet_1", 0),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -10),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_3",
		[],
		"Request a tourney helmet adorned with a sphinx. (5000 coins)",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 5000),
				(troop_remove_gold, "trp_player", 5000),
				(troop_add_item, "trp_player", "itm_fi_tourney_helmet_2", 0),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -10),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_4",
		[],
		"Request a tourney helmet adorned with feathers. (5000 coins)",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 5000),
				(troop_remove_gold, "trp_player", 5000),
				(troop_add_item, "trp_player", "itm_fi_armet_2", 0),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -10),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_5",
		[],
		"Ignore the armorer.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("coronation_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "To cement your rule, you've decided to get the blessing of the gods. The coronation ceremony will be a grand affair, and announce to all the world your benevolence and right to rule. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_coronation")
	],
	[
		("choice_1_1",
		[],
		"Request that a septon annoint you with holy oils. (500 coins)",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(val_add, "$player_right_to_rule", 2),
				(display_message, "@You gain 2 right to rule!", 0x0033ccff),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -10),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_2",
		[],
		"Request a red priest perform a fiery ritual. (500 coins)",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(val_add, "$player_right_to_rule", 2),
				(display_message, "@You gain 2 right to rule!", 0x0033ccff),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -10),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_3",
		[],
		"Request that a drowned priest place the crown on your head. (500 coins)",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(val_add, "$player_right_to_rule", 2),
				(display_message, "@You gain 2 right to rule!", 0x0033ccff),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -10),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_4",
		[],
		"Request that one of your vassals place a weirwood crown on your head. (500 coins)",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(val_add, "$player_right_to_rule", 2),
				(display_message, "@You gain 2 right to rule!", 0x0033ccff),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -10),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_1_5",
		[],
		"Ignore the gods and all that foolishness.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("feast_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "You're in the mood for something special today. Perhaps a minor feast. Talking to one of your courtiers, you settle on hosting a feast for your retinue and decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_feast")
	],
	[
		("choice_10_1",
		[],
		"Spend 200 coins on meat pies filled with onions, bacon and turnips, plus a cold capon for every man.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(troop_remove_gold, "trp_player", 200),
				(display_message, "@Your retinue thoroughly enjoyed the feast.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Spend 500 coins on honeyed chicken handpies, creamy chestnut soup and fine wine.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@Your men sing songs of your greatness!", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
				(call_script, "script_change_player_party_morale", 25),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Change your mind.",
		[
			(display_message, "@The preparations are called off.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("feast_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "You're in the mood for something special today. Perhaps a minor feast. Talking to one of your courtiers, you settle on hosting a feast for your retinue and decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_feast")
	],
	[
		("choice_10_1",
		[],
		"Spend 200 coins on trout baked in clay, and a beef stew with carrots and onions.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(troop_remove_gold, "trp_player", 200),
				(display_message, "@Your retinue thoroughly enjoyed the feast.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Spend 500 coins on ham studded with cloves and pepper, and fine dornish wine.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@Your men sing songs of your greatness!", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
				(call_script, "script_change_player_party_morale", 25),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Change your mind.",
		[
			(display_message, "@The preparations are called off.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("feast_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "You're in the mood for something special today. Perhaps a minor feast. Talking to one of your courtiers, you settle on hosting a feast for your retinue and decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_feast")
	],
	[
		("choice_10_1",
		[],
		"Spend 200 coins on mushrooms, drowned in garlic, with a side of freshly baked bread.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(troop_remove_gold, "trp_player", 200),
				(display_message, "@Your retinue thoroughly enjoyed the feast.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Spend 500 coins on ginger soup with oysters, strawberry tarts and a selection of finely aged cheese.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@Your men sing songs of your greatness!", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
				(call_script, "script_change_player_party_morale", 25),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Change your mind.",
		[
			(display_message, "@The preparations are called off.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("feast_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "You're in the mood for something special today. Perhaps a minor feast. Talking to one of your courtiers, you settle on hosting a feast for your retinue and decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_feast")
	],
	[
		("choice_10_1",
		[],
		"Spend 200 coins on a beef broth with honey, flatbread and chestnuts.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(troop_remove_gold, "trp_player", 200),
				(display_message, "@Your retinue thoroughly enjoyed the feast.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Spend 500 coins on duck with orange snap peppers and honey, plus a glass of fine Arbor wine for every man.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@Your men sing songs of your greatness!", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
				(call_script, "script_change_player_party_morale", 25),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Change your mind.",
		[
			(display_message, "@The preparations are called off.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("feast_event_5", mnf_disable_all_keys|menu_text_color(0xff000000), "You're in the mood for something special today. Perhaps you should allow the cook to experiment a bit. After hours in the kitchen, he finally presents you with lamb roasted over a slow fire, served with a salad of raisins and carrots soaked in wine. When you cut into the lamb, the air fills with the smell of saffron and cloves.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_feast")
	],
	[
		("choice_10_1",
		[],
		"The lamb was delicious!",
		[
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"It was passable.",
		[
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"I hate lamb!",
		[
			(change_screen_return)
		], ".")
	]
	),

	("feast_event_6", mnf_disable_all_keys|menu_text_color(0xff000000), "You're in the mood for something special today. Perhaps you should allow the cook to experiment a bit. Approaching you, the cook asks if you'd like to try a dornish specialty.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_feast")
	],
	[
		("choice_10_1",
		[],
		"I'd love to!",
		[
			(display_message, "@The cook served grilled snake, with a fiery mustard sauce and spun sugar bowls, filled with custard. It was delicious!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"No, I want plain fare!",
		[
			(display_message, "@Your courtier hands you your dinner. It consists of a loaf of bread, and half an apple.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Settle on boiled beef.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("feast_event_7", mnf_disable_all_keys|menu_text_color(0xff000000), "You're in the mood for something special today. Perhaps you should allow the cook to experiment a bit. Approaching you, the cook asks if you'd like to try a ghiscari specialty.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_feast")
	],
	[
		("choice_10_1",
		[],
		"I'd love to!",
		[
			(display_message, "@The cook served roasted goat on a bed of sliced onions, washed down with pale green volantene liquor. It was delicious!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"No, I want plain fare!",
		[
			(display_message, "@Your courtier hands you your dinner. It consists of half an onion.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Settle on boiled beef.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("feast_event_8", mnf_disable_all_keys|menu_text_color(0xff000000), "You're in the mood for something special today. Perhaps you should allow the cook to experiment a bit. Approaching you, the cook asks if you'd like to try a volantene specialty.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_feast")
	],
	[
		("choice_10_1",
		[],
		"I'd love to!",
		[
			(display_message, "@The cook served honeyed lamb, fragrant with crushed mint, with a side of small green figs and honeyed locusts. It was delicious!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"No, I want plain fare!",
		[
			(display_message, "@Your courtier hands you your dinner. It consists of a pickled turnip.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Settle on boiled beef.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("hunting_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "You're in the mood for some exercise. Chatting with one of your courtiers, you decide to go hunting. Assembling the courtiers, ladies and young men of your court, you head into the woods, to hunt the great white stag, rumoured to live there. Riding your horse through the wood, you finally spot the white stag, and decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_hunt")
	],
	[
		("choice_10_1",
		[],
		"Charge at it with a spear!",
		[
			(display_message, "@You managed to pierce the stags heart!", 0x0033ccff),
			(troop_add_item, "trp_player", "itm_trade_dried_meat", 5),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Take a shot with your bow!",
		[
			(display_message, "@You missed, and the stag got away!", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Call off the hunt.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -3),
			(change_screen_return)
		], ".")
	]
	),

	("hunting_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "You're in the mood for some exercise. Chatting with one of your courtiers, you decide to go hunting. Assembling the courtiers, ladies and young men of your court, you head into the woods, to hunt the great white stag, rumoured to live there. Riding your horse through the wood, you finally spot the white stag, and decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_hunt")
	],
	[
		("choice_10_1",
		[],
		"Charge at it with a spear!",
		[
			(display_message, "@You missed!", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Take a shot with your bow!",
		[
			(display_message, "@You managed to pierce the stags heart!", 0x0033ccff),
			(troop_add_item, "trp_player", "itm_trade_dried_meat", 5),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Call off the hunt.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -3),
			(change_screen_return)
		], ".")
	]
	),

	("hunting_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "You're in the mood for some exercise and excitement. Chatting with one of your courtiers, you decide to go hunting. Assembling the courtiers, ladies and young men of your court, you head into the woods, to hunt the great man-eating bear, rumoured to live there. Riding your horse through the wood, you finally spot the bear, and decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_hunt")
	],
	[
		("choice_10_1",
		[],
		"Charge at it with a spear!",
		[
			(display_message, "@You missed, and the bear mauled your leg!", 0x00ff0000),
			(troop_raise_attribute, "trp_player", 0, -2),
			(display_message, "@You've lost 2 strength.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Take a shot with your bow!",
		[
			(display_message, "@You managed to pierce the eye of the bear!", 0x0033ccff),
			(troop_add_item, "trp_player", "itm_trade_dried_meat", 5),
			(call_script, "script_change_troop_renown", "trp_player", 20),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Call off the hunt.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -3),
			(change_screen_return)
		], ".")
	]
	),

	("hunting_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "You're in the mood for some exercise and excitement. Chatting with one of your courtiers, you decide to go hunting. Assembling the courtiers, ladies and young men of your court, you head into the woods, to hunt the black boar, rumoured to live there. Riding your horse through the wood, you finally spot the boar, and decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_hunt")
	],
	[
		("choice_10_1",
		[],
		"Charge at it with a spear!",
		[
			(display_message, "@You missed, and the boar tried to maul you, but you got away!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Charge at it with an axe!",
		[
			(display_message, "@You managed to strike the great beast between the eyes!", 0x0033ccff),
			(troop_raise_attribute, "trp_player", 1, 1),
			(display_message, "@You've gained 1 agility.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Call off the hunt.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -3),
			(change_screen_return)
		], ".")
	]
	),

	("sea_travel_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "The sky is dark, and the winds are picking up! What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ship")
	],
	[
		("choice_10_1",
		[],
		"Curse the gods!",
		[
			(call_script, "script_change_player_party_morale", -25),
			(display_message, "@Your men grumble. No one should curse the gods.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Curse your luck!",
		[
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(display_message, "@Your men grumble. Perhaps you've run out of luck.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("sea_travel_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "Looking out across the sea, you spot a huge dark shape beneath the waves. What could it be?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ship")
	],
	[
		("choice_10_1",
		[],
		"It must be a kraken!",
		[
			(call_script, "script_change_player_party_morale", -25),
			(display_message, "@The crew is horrified! A kraken!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"It's just a whale.",
		[
			(display_message, "@The shape soon disappears.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("sea_travel_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "Looking out across the sea, you spot a multitude of brightly colored fish. They're jumping out the water! One is heading straight for your head! You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ship")
	],
	[
		("choice_10_1",
		[],
		"Jump to the left!",
		[
			(display_message, "@One of the fish hit you in the head!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Jump to the right!",
		[
			(display_message, "@You managed to dodge the fish!", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("sea_travel_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "The planks of the ship are slippery and covered with grease. Someone could get hurt! You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ship")
	],
	[
		("choice_10_1",
		[],
		"Clean the planks!",
		[
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(display_message, "@It's hard work, but rewarding!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Leave the planks be!",
		[
			(display_message, "@You slipped on the planks, and hurt your knees!", 0x00ff0000),
			(troop_raise_attribute, "trp_player", 1, -1),
			(display_message, "@You've lost 1 agility.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("sea_travel_event_5", mnf_disable_all_keys|menu_text_color(0xff000000), "The crew is a superstitious bunch, and you forgot to bring a cat for the ships hold! The men are muttering about bad luck, and eye you insolently. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ship")
	],
	[
		("choice_10_1",
		[],
		"Placate them with ale.",
		[
			(call_script, "script_change_player_party_morale", 25),
			(display_message, "@Your crew is too drunk to care about some cat.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore them.",
		[
			(call_script, "script_change_player_party_morale", -25),
			(display_message, "@The crew is close to mutiny!", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("sea_travel_event_6", mnf_disable_all_keys|menu_text_color(0xff000000), "The crew is a superstitious bunch, and you forgot to have the ship sprinkled with wine before you left port! The men are muttering about bad luck, and eye you insolently. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ship")
	],
	[
		("choice_10_1",
		[],
		"Placate them with ale.",
		[
			(call_script, "script_change_player_party_morale", -25),
			(display_message, "@The crew is still muttering.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore them.",
		[
			(call_script, "script_change_player_party_morale", -25),
			(display_message, "@The crew is close to mutiny!", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("sea_travel_event_7", mnf_disable_all_keys|menu_text_color(0xff000000), "The crew is a superstitious bunch, and when a gull flies into the topmast, they take it as an omen! But they're not quite sure what the omen means. You decide to tell them that...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ship")
	],
	[
		("choice_10_1",
		[],
		"The gods are with us!",
		[
			(call_script, "script_change_player_party_morale", 25),
			(display_message, "@The crew look relieved.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"The gull is a bird of good luck!",
		[
			(display_message, "@The crew look relieved.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("sea_travel_event_8", mnf_disable_all_keys|menu_text_color(0xff000000), "The crew is a superstitious bunch, and when one of them catch a shark, eating a smaller shark, they take it as an omen! But they're not quite sure what the omen means. You decide to tell them that...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ship")
	],
	[
		("choice_10_1",
		[],
		"The gods are with us!",
		[
			(call_script, "script_change_player_party_morale", 25),
			(display_message, "@The crew look relieved.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"The shark is an omen of victory!",
		[
			(call_script, "script_change_player_party_morale", -25),
			(display_message, "@Everyone knows the shark is a harbinger of death!", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("the_seven_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Maiden's Day. On this day, maidens of noble houses are required to go to the sept to light tall white candles at the Maiden's feet and hang parchment garlands about her neck. Mothers, whores and widows are barred from the sept along with men.Those maidens who enter the sept sing songs of innocence, and spend the following feast throwing flour at the young, unmarried, men.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_law")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 500 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The local smallfolk are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("the_seven_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Warrior's Day. On this day, knights across the Seven Kingdoms spend the day in prayer, lighting candles at the Warrior's feet and fasting.Later, tourneys are held across the realm, with young squires jousting to win a knighthood of their own.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_law")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 500 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The local smallfolk are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("the_seven_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Stranger's Day. On this day, men and women, old and young, go door to door begging sweets, fruits and sourleaf, carrying great wicker baskets filled with dirt.Later, there'll be a feast, with the local septon dressed in dark robes and throwing rotten fruit at the guests.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_law")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You can't help but feel a certain dread - The Stranger is the aspect of death.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 500 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The local smallfolk are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("the_seven_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Father's Day. On this day, all fathers with a trueborn child are to be obeyed, no matter the request. In the remote hamlets, some take advantage and sleep with their neighbours wife, but in the towns, cities and castles, the requests are usually mild and often involve a gift.Later there'll be a great feast, during which the local septon prostate himself before the statue of the Father and the Silent Sisters whip him with weirwood branches.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_law")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 2000 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 2000),
				(troop_remove_gold, "trp_player", 2000),
				(display_message, "@The people of the Weeping Town are duly impressed.", 0x0033ccff),
				(call_script, "script_change_player_relation_with_center", "p_town_6", 1),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("the_seven_event_5", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Feast of Hugor Hill, during which those who worship the Seven gather in the sept, and listen to the local septon recite passages from the Seven-Pointed Star.Later, there'll be a feast, during which young children are given gifts by their parents and relatives, and the septon is given the seat of honor in the hall of the local lord.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_law")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@This sept is cold! And my knees hurt!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Spend 1000 coins on gifts for the local orphans.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(display_message, "@The peasants are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 10),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("stormlands_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "The thriving port and market known as the Weeping Town takes its name from the copious amount of tears shed when the slain body of the Young Dragon, Daeron I, was returned to the kingdom after his murder in Dorne.Every year, the Guild of Carpenters host a great feast to commemorate the slain king, and the townsfolk look forward to the day every year. Mummers from all over the realm journey to the Weeping Town to reenact the foul murder of the brave young king, and whores, jugglers, wine sellers and even the odd alchemist can be found making a spectacle.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("choice_10_1",
		[],
		"What a grand tradition.",
		[
			(display_message, "@Perhaps the time has come to teach the dornish a lesson.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 300 coins to the festivities.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 300),
				(troop_remove_gold, "trp_player", 300),
				(display_message, "@The townspeople of the Weeping Town are duly grateful.", 0x0033ccff),
				(call_script, "script_change_player_relation_with_center", "p_town_6", 5),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("stormlands_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "In ancient days, before the dragons, the Storm Kings oft warred with the petty kings of Dorne.Durran the Young, called the Butcher Boy, dammed the river Slayne with dead dornishmen after defeating the Wyls and Yronwoods in battle. The dornish had been ravaging the marches, and every year the women of Stonehelm and the surrounding villages celebrate their deliverance by turning the river red, using the colored clay found in abundance throughout the domains of the Swanns. Later, in the evening, they'll feast.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("choice_10_1",
		[],
		"A fine tradition.",
		[
			(display_message, "@Perhaps the time has come to teach the dornish another lesson.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 200 coins to the festivities.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(troop_remove_gold, "trp_player", 200),
				(display_message, "@The local smallfolk are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("stormlands_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "When Aegon the Conquerer tried to extend his rule to Dorne, he was beaten back time and time again. In the first attempt, Orys, the founder of House Baratheon, was captured by the Wyl of Wyl, called the Widow-Lover, and had his right hand struck off.Orys chance at vengeance came years later, when during the reign of Aenys I, he captured the son of the Widow-Lover, and took his hands and feet. Since then, it has been a tradition amongst the stormlanders to chop of the limbs of captured rivals, especially in the Dornish Marches.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("choice_10_1",
		[],
		"A fine tradition.",
		[
			(display_message, "@What to do with all the extra limbs though.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"A barbaric tradition.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("stormlands_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "During the Dance of the Dragons, the Lord of Storm's End, Borros Baratheon, declared for the Blacks. At the end of the war, he led a great host of stormlanders against the remaining forces of the Greens, sure of his victory.He was defeated by the riverlands, led by young Kermit Tully and the even younger Benjicot Blackwood. The riverlanders tell of how Lord Kermit slew the Lord of Storm's End, but to this day the stormlanders claim that Lord Borros was killed by a poisoned arrow shot by the sister of Ben Blackwood, the one men called Black Aly.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("choice_10_1",
		[],
		"The Blackwoods worship demons, surely they would use poisoned arrows.",
		[
			(display_message, "@They're as bad as the dornish!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"What does it matter.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("stormlands_event_5", mnf_disable_all_keys|menu_text_color(0xff000000), "During the reign of Aegon V, Lord Lyonel Baratheon crowned himself as a new Storm King and renounced his allegiance to the Iron Throne.Aegons son, Prince Duncan, had broken a betrothal with Lord Lyonels daughter, and according to the stories the Lord of Storm's Ends wroth was terrible to behold. The dispute was only settled when Duncan the Tall of the Kingsguard defeated Lord Lyonel in trial by combat. To this day, the boys of the Stormlands will play fighting games, pretending to be the two combatants, as the two where considered the finest fighters the Stormlands have ever known.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("choice_10_1",
		[],
		"It must have been a fight to remember.",
		[
			(display_message, "@But who won?!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"What does it matter.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("stormlands_event_6", mnf_disable_all_keys|menu_text_color(0xff000000), "The storms are gaining strenght! The Stormlands are widely known for the savage storms beating against the cliffs of Shipbreaker's Bay, making sea travel a hazardous endeavor at best.To appease the storms, the septons of the Stormlands often hold special prayer days, invocating the Father to ease the passage of the winds. The stormlanders calls these days 'Ember Days', as the septons fires are often snuffed out by the storms, leaving only embers.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@This sept is cold! And the fires have been snuffed out!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 1000 coins to the sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(display_message, "@The peasants are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 10),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("stormlands_event_7", mnf_disable_all_keys|menu_text_color(0xff000000), "The Stormlands are well known for their massive warhorses. As you sit down to rest on a fallen log, you notice a merchant travelling towards you. He offers to sell you one of the famous destriers, for the standard price of 500 coins.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("choice_10_1",
		[],
		"I think not.",
		[
			(display_message, "@The warhorse was a magnificent beast though!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Buy the warhorse for 500 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(troop_add_item, "trp_player", "itm_stormlands_destrier", 0),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the merchant.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("stormlands_event_8", mnf_disable_all_keys|menu_text_color(0xff000000), "The Stormlands are well known for their finely crafted war hammers. As you sit down to rest on a large, smooth, stone, you notice a lonely knight travelling towards you. He offers to sell you one of his own war hammers for the reasonable price of 300 coins.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("choice_10_1",
		[],
		"I think not.",
		[
			(display_message, "@The hammer looked powerful though.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Buy the hammer for 300 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 300),
				(troop_remove_gold, "trp_player", 300),
				(troop_add_item, "trp_player", "itm_stormlands_hammer_event", 0),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the knight.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("stormlands_event_9", mnf_disable_all_keys|menu_text_color(0xff000000), "When Argilac the Arrogant, last of the Storm Kings and last of the male line of House Durrandon, was slain in combat by Orys Baratheon, the guards of Storm's End delivered his maiden daughter, Argella to Orys, bound in chains and naked. Orys took pity on the princess, and covered her in his own cloak, taking her as his bride. He decreed that the guards should be punished for eternity, locking them in cages overlooking Shipbreaker's Bay, there to stand eternal vigil for House Baratheon, loyal until they where nothing but bone. The tradition has endured, and each year thieves, murders and rapists are locked in cages and hung from the rocks protruding over the bay.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("choice_10_1",
		[],
		"A fine tradition.",
		[
			(display_message, "@The men in the cages scream something fiercely though.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"A barbaric tradition.",
		[
			(display_message, "@The men of the Stormlands disagree.", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], ".")
	]
	),

	("stormlands_event_10", mnf_disable_all_keys|menu_text_color(0xff000000), "A kinslayer has been caught! The man set fire to the house where his father and mother slept soundly, but the villagers caught him, and have decided on an unusual punishment. He is to be sewn into a burlap sack along with a large amount of hungry rats, then hung from a tree. There he will hang until the rats have eaten him and the Stranger has claimed him. A local maester informs you that the method of punishment is not new, and that the records of one of the Storm Kings, Arrec Durrandon, reign show that he was fond of sewing ironborn into sacks and filling them with hungry vermin. According to legend, the ironborn treated him the same way when he was caught in a battle by the God's Eye, but not before they'd taken his eyes and his tongue.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_stormlands")
	],
	[
		("choice_10_1",
		[],
		"A fine tradition.",
		[
			(display_message, "@The man in the sack scream something fiercely though.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"A barbaric tradition.",
		[
			(display_message, "@The men of the Stormlands disagree.", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], ".")
	]
	),

	("north_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "Winter is coming! The summer snows are getting stronger, and autumn is approaching. Now is the time to start buying supplies, and getting ready for winter. How much do you wish to spend on grain this month?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("choice_10_1",
		[],
		"500 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(call_script, "script_change_player_party_morale", 50),
				(display_message, "@Your men are happy with your decision.", 0x0033ccff),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"1000 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(call_script, "script_change_player_party_morale", 100),
				(call_script, "script_change_troop_renown", "trp_player", 25),
				(display_message, "@Your men are ecstatic. This winter will be bearable.", 0x0033ccff),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Nothing.",
		[
			(call_script, "script_change_player_party_morale", -50),
			(display_message, "@Your men grumble. You'll all go hungry come winter.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("north_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Feast of the Raven, during which those who worship the Old Gods all gather around the weirwoods and light great fires.Later, there'll be a feast, during which old grizzled warriors compete against each other in wrestling matches, with the winner being given a weirwood crown, and usually a bag of silver.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour alone, contemplating life.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"The winner should have 1000 coins!",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(display_message, "@The peasants are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 10),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("north_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Feast of the Watch, during which every man, woman and child in the north celebrate the Night's Watch by dressing all in black.Later, there'll be a feast, during which old grizzled warriors tells tales of Raymund Redbeard, Joramun and the brothers Gendel and Gorne, usually followed by songs and plenty of ale, wine and mead.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour alone, contemplating life.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Join the festivities.",
		[
			(display_message, "@You had a great time.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("north_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "'May your winters be short and your summers bountiful' says an old beggar you meet on the road.Recognizing the usual greeting extended to people from the far north, you reward the beggar with...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("choice_10_1",
		[],
		"50 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 50),
				(troop_remove_gold, "trp_player", 50),
				(call_script, "script_change_troop_renown", "trp_player", 1),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -5),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"200 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(troop_remove_gold, "trp_player", 200),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Nothing.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("north_event_5", mnf_disable_all_keys|menu_text_color(0xff000000), "Coming across a small village, you notice a large weirwood in the village center. Sauntering over, you notice entrails hanging from the bone-white branches, the blood fresh and dripping. An old man, obviously the most prosperous in the village by the looks of his clothes, offers to tell you why entrails are hanging from the tree. It seems to be an old tradition, dating back to when pirates would sail up the White Knife and take the northmen slaves, and be allowed to do so because of the old age and infirmity of King Edrick Stark, the one they called Snowbeard. But one winter, when the cold wind came howling down from the Wall and the pirates and slavers huddled around their hovels and fires at the mouth of the White Knife, the new King in the North, Brandon Stark, called Ice-Eyes, came down upon them with fire and sword. He freed the slaves, and gave over the slavers to their care. The freed northmen gutted the slavers and pirates, and hung their entrails from a weirwood. According to the old man, tradition has it that the village was founded by one of the freed slaves, and each year they celebrate by hanging pig intestines from their own weirwood.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("choice_10_1",
		[],
		"A fine tradition.",
		[
			(display_message, "@The old man looks pleased.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"A barbaric tradition.",
		[
			(display_message, "@The men of the village disagree.", 0x00ff0000),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], ".")
	]
	),

	("north_event_6", mnf_disable_all_keys|menu_text_color(0xff000000), "The harvest is in, and all across the North, and the Trident, nobles and ladies gather to celebrate by holding a feast. The harvest feast is an annual chance to visit distant relatives, scheme with other lords, court young maidens, dance a merry jig, gorge yourself on fine food and drink yourself into oblivion. You decide to...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("choice_10_1",
		[],
		"Spend 1000 coins on ale and roasted boar!",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(display_message, "@And a tasty boar it was!", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 10),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Spend 3000 coins on fine wine, lobster, salmon and roast lamb!",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 3000),
				(troop_remove_gold, "trp_player", 3000),
				(display_message, "@A fine meal, and an exquisite wine!", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 30),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("vale_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "The Vale is where the first Andal conquerors from across the sea landed. In the vision shown to him, by the Seven, Hugor of the Hill saw a promised land, protected by high mountains, and the men of the Vale claim that their land is the one promised by their gods.Every year, the septons celebrate the battle that led to the final conquest and settling of the Andals in what then became known as the Vale of Arryn, the Battle of the Seven Stars. On this day, they light seven fires in the sept, to honor the seven gods, and burn weirwood branches to symbolize their victory over the First Men.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_vale")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 500 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The local smallfolk are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("vale_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Feast of Order. On this day, the Lords of Misrule take over, playing pranks and jests on highborn and lowborn alike.At the end of the day, the septons banish the Lords of Misrule, unmasking them and chastising them for their foolery. Tales are still told of the look on Septon Ormunds face when he unmasked the Lord of Misrule during the reign of Mathos Arryn and found himself face to face with the king himself.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_vale")
	],
	[
		("choice_10_1",
		[],
		"A fine tradition.",
		[
			(display_message, "@As long as no one pranks me.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 200 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(troop_remove_gold, "trp_player", 200),
				(display_message, "@The local smallfolk are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("vale_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's Festival of Sowing. On this day, men and women, old and young, go door to door begging sweets, fruits and sourleaf, carrying great wicker baskets filled with dirt, in celebration of the first sowing of seeds in the new year.Later, there'll be a feast, with the local septon dressed in green robes and handing out honeycakes to the children.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_vale")
	],
	[
		("choice_10_1",
		[],
		"A fine tradition.",
		[
			(display_message, "@Nothing is better than the smell of newly plowed fields.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 500 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The local smallfolk are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("vale_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Feast of Loafs. On this day, the first loafs of bread baked in the new year are taken up from the cellars and ceremoniously buried in the fields.Many houses are decorated with garlands, and the septons lead a procession across the fields, carrying candles and invoking the help of the Father in granting a great harvest.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_vale")
	],
	[
		("choice_10_1",
		[],
		"A fine tradition.",
		[
			(display_message, "@Nothing better than a new loaf.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 200 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(troop_remove_gold, "trp_player", 200),
				(display_message, "@The people of Gulltown are duly impressed.", 0x0033ccff),
				(call_script, "script_change_player_relation_with_center", "p_town_8", 1),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("vale_event_5", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Feast of Septon Artos. Septon Artos was chosen as the new High Septon, but did not feel himself worty of the honor.So he fled Oldtown, pursued by a mob of townspeople clamoring for him to return. In his great holyness, he hid in a stream beside a road, while the townspeople ran by. But the goose in the stream attacked him, alerting the pursuers to his presence. In celebration of this glorious event, the people of Gulltown, of all places, eat goose every year on the Feast of Septon Artos.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_vale")
	],
	[
		("choice_10_1",
		[],
		"Goose is very tasty.",
		[
			(display_message, "@But why do they eat them? Surely they where the avatars of the Seven!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Spend 500 coins on the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The peasants are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 10),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("braavos_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Feast of Salvation. On this day, all the men, women and children of Braavos gather in the streets, to give thanks for the destruction of the Valyrian Freehold.Copious amounts of ale, wine and food is consumed, and many a child will be conceived before the day is ended.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_braavos")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 500 coins to the Temple of the Moonsingers.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The citizens are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("braavos_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Night of Sleep. On this day, all the men and women of Braavos spend as much time as possible with their eyes closed, entreating the Many-Faced God to ignore them.Later, the people of Braavos will drown an elephant in the harbor, as an offering to the Many-Faced God.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_braavos")
	],
	[
		("choice_10_1",
		[],
		"Valar Morghulis.",
		[
			(display_message, "@That elephant surely did not like the water.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 500 coins to the House of Black and White.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The citizens are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("braavos_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Day of the Gods. On this day, men and women, old and young, go door to door begging sweets, fruits and sourleaf, while praising a multitude of different gods.Later, there'll be a feast, with the Second Sword of Braavos offering his sword to the Guild of the Faceless Men, and them rejecting it so he might continue his work.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_braavos")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You can't help but feel a certain dread - which god is the right one?", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 5000 coins to the Lion of Night, a deity worshipped by the rich.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 5000),
				(troop_remove_gold, "trp_player", 5000),
				(display_message, "@The citizens are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 10),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Donate 50 coins to the Hooded Wayfarer, a deity worshipped by the poor.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 50),
				(display_message, "@The citizens are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 1),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -2),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_4",
		[],
		"Donate 500 coins to Bakkalon the Pale Child, a deity worshipped by soldiers.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The citizens are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_5",
		[],
		"Donate 500 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The citizens are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_6",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("braavos_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Day of the Sea. On this day, all citizens of Braavos, even the Sealord, jump into the canals and wash their faces in the water, to show their devotion to the sea, that both shelters them and provides them with a great bounty of food.Later, many will be stricken by diarrhea, due to the unsanitary conditions of the canals.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_braavos")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Jump into the nearest pool of water.",
		[
			(troop_raise_attribute, "trp_player", 0, 1),
			(display_message, "@You've gained 1 strength.", 0x0033ccff),
			(display_message, "@Refreshing!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("braavos_event_5", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Night of Souls, during which those who worship the Many-Faced God gather to tell stories in the darkness.Later, there'll be a feast, during which young children are given gifts by their parents and relatives, and the beggars of Braavos are invited inside every tavern.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_braavos")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@God of Death, turn away your gaze!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Spend 1000 coins on gifts for the local orphans.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(display_message, "@The citizens are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 10),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("riverlands_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Maiden's Day. On this day, maidens of noble houses are required to go to the sept to light tall white candles at the Maiden's feet and hang parchment garlands about her neck. Mothers, whores and widows are barred from the sept along with men.Those maidens who enter the sept sing songs of innocence, and spend the following feast throwing flour at the young, unmarried, men.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 500 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The local smallfolk are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("riverlands_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Warrior's Day. On this day, knights across the Seven Kingdoms spend the day in prayer, lighting candles at the Warrior's feet and fasting.Later, tourneys are held across the realm, with young squires jousting to win a knighthood of their own.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 500 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The local smallfolk are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("riverlands_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Stranger's Day. On this day, men and women, old and young, go door to door begging sweets, fruits and sourleaf, carrying great wicker baskets filled with dirt.Later, there'll be a feast, with the local septon dressed in dark robes and throwing rotten fruit at the guests.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You can't help but feel a certain dread - The Stranger is the aspect of death.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 500 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The local smallfolk are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("riverlands_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Father's Day. On this day, all fathers with a trueborn child are to be obeyed, no matter the request. In the remote hamlets, some take advantage and sleep with their neighbours wife, but in the towns, cities and castles, the requests are usually mild and often involve a gift.Later, in Riverrun, there'll be a great feast, during which the local septon prostate himself before the statue of the Father and the Silent Sisters whip him with weirwood branches.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 2000 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 2000),
				(troop_remove_gold, "trp_player", 2000),
				(display_message, "@The people of Maidenpool are duly impressed.", 0x0033ccff),
				(call_script, "script_change_player_relation_with_center", "p_town_26", 1),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("riverlands_event_5", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Feast of Hugor Hill, during which those who worship the Seven gather in the sept, and listen to the local septon recite passages from the Seven-Pointed Star.Later, there'll be a feast, during which young children are given gifts by their parents and relatives, and the septon is given the seat of honor in the hall of the local lord.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_north")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@This sept is cold! And my knees hurt!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Spend 1000 coins on gifts for the local orphans.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(display_message, "@The peasants are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 10),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dorne_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Day of the Dead. On this day, the people of Dorne remember the many men and women who disappeared during the rhoynars journey across the waters, in the fight against the dragons and during all the wars they have ever fought.The young women offer young, unmarried, men pieces of candied oranges and honeycombs, so they might create new souls to replace those lost.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_dorne")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 500 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The local smallfolk are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dorne_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Day of Grapes. On this day, knights across Dorne spend the day in prayer, lighting candles at the Warrior's feet and fasting.But later, they ingest copious amounts of wine, in celebration of the rewards granted to brave men.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_dorne")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 500 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The local smallfolk are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dorne_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Day of Sun. On this day, the men, women and children of Dorne go door to door begging sweets, fruits and sourleaf, carrying great cloth sacks filled with sand that represent the end of all men, the grave.Later, however, there'll be a feast, with the local septon dressed in dark robes that he keep wrapped about his splendid white robes, only to unveil them the moment the sun goes down, to show the men and women of Dorne that the light of the Seven wathces over them even in darkness.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_dorne")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You can't help but feel a certain dread - The Stranger is the aspect of death.", 0x000ff000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 500 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The local smallfolk are duly impressed.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the festivities",
		[
			(change_screen_return)
		], ".")
	]
	),

	("dragonstone_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "The seasons pass, and the day has come again. It's the Day of the Great Fire. The island of Dragonstone contains the Dragonmont, an active volcano.The smallfolk of Dragonstone claim that the fires that spew forth from time to time are the souls of trapped dragons, while the septons claim the mountain is the entrance to the forges of the Smith. The worshippers of R'hllor, however, claim that the fires show the power of their God of Light and Fire. Either way, the fires are celebrated by highborn and lowborn alike each year.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_dragonstone")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour in prayer.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Donate 100 coins to the local sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 100),
				(troop_remove_gold, "trp_player", 100),
				(display_message, "@The local smallfolk are duly impressed, but those knights and lords who worship R'hllor less so.", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", 5),
				(call_script, "script_change_player_relation_with_troop", "trp_kingdom_8_lady_18", -1),
				(call_script, "script_change_player_relation_with_troop", "trp_knight_8_1", -1),
				(call_script, "script_change_player_relation_with_troop", "trp_knight_8_7", -1),
				(call_script, "script_change_player_relation_with_troop", "trp_knight_8_2", 1),
				(call_script, "script_change_player_relation_with_troop", "trp_knight_8_3", 1),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Spend 100 coins on a great bonfire for R'hllor.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 100),
				(troop_remove_gold, "trp_player", 100),
				(display_message, "@Some of the smallfolk are duly impressed, but those knights and lords who worship the Seven less so.", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", 5),
				(call_script, "script_change_player_relation_with_troop", "trp_kingdom_8_lady_18", 1),
				(call_script, "script_change_player_relation_with_troop", "trp_knight_8_1", 1),
				(call_script, "script_change_player_relation_with_troop", "trp_knight_8_7", 1),
				(call_script, "script_change_player_relation_with_troop", "trp_knight_8_2", -1),
				(call_script, "script_change_player_relation_with_troop", "trp_knight_8_3", -1),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_4",
		[],
		"Ignore the festivities.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("ironborn_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "'What is dead may never die' shouts the men of the ship, as you sail across the waves. The Drowned God favor the ironborn, and this journey across his domain will surely yield a favorable result.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ironborn")
	],
	[
		("choice_10_1",
		[],
		"What is dead may never die!",
		[
			(call_script, "script_change_player_party_morale", 100),
			(display_message, "@The men are ecstatic. Nothing is more joyous than sailing across the sea!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Spend 500 coins on ale for the men, and 500 coins on wine for the Drowned God.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(call_script, "script_change_player_party_morale", 100),
				(call_script, "script_change_troop_renown", "trp_player", 25),
				(display_message, "@Your men are ecstatic. Surely the Drowned God will appreciate the gesture.", 0x0033ccff),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Do nothing.",
		[
			(call_script, "script_change_player_party_morale", -50),
			(display_message, "@Your men grumble. You ought to have made a gesture of faith towards the Drowned God.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("ironborn_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "'What is dead may never die' shouts the men of the ship, as you sail across the waves. A young man was washed overboard, and when the men of the ship hauled him back in, his skin was cold and his lungs filled with water. But then he opened his eyes, and coughed up the ocean. The young man has been drowned twice, surely he is favored by the Drowned God.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ironborn")
	],
	[
		("choice_10_1",
		[],
		"The young man should have 500 coins!",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@The men appreciate the gesture.", 0x0033ccff),
				(call_script, "script_change_player_party_morale", 50),
				(call_script, "script_change_troop_renown", "trp_player", 10),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"The young man should have 1000 coins!",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(display_message, "@The peasants are duly impressed.", 0x0033ccff),
				(call_script, "script_change_player_party_morale", 100),
				(call_script, "script_change_troop_renown", "trp_player", 10),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Ignore the incident.",
		[
			(call_script, "script_change_player_party_morale", -100),
			(display_message, "@The men are mutinous! You've ignored a clear sign from the Drowned God!", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("ironborn_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "The storms are picking up! The Storm God is fighting the Drowned God, and the waves are in turmoil! Now is the time to pray, that the Drowned God may hold out his mighty hand and shelter you from the storm.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ironborn")
	],
	[
		("choice_10_1",
		[],
		"Spend an hour alone, praying for salvation.",
		[
			(display_message, "@You feel a serene calm come over you.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Drown a young thrall, so the Drowned God may gain another servant.",
		[
			(display_message, "@The storms have stilled!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Do nothing.",
		[
			(call_script, "script_change_player_party_morale", -100),
			(display_message, "@The men are mutinous! How can you ignore the gods?!", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("ironborn_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "The storms are picking up, and the waves are huge. 'I will still these waters with mine own blood!' says an old reaper who is part of the crew.Picking up an axe, he hacks of a finger and throws it into the waters, as an offering to the Drowned God. You decide to reward the man with...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_ironborn")
	],
	[
		("choice_10_1",
		[],
		"50 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 50),
				(troop_remove_gold, "trp_player", 50),
				(call_script, "script_change_troop_renown", "trp_player", -5),
				(display_message, "@The man lost a finger. What a poor reward!", 0x00ff0000),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -5),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"500 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(call_script, "script_change_troop_renown", "trp_player", 10),
				(call_script, "script_change_player_party_morale", 100),
				(display_message, "@The man lost a finger, but he has gained a reputation as a fearless man!", 0x0033ccff),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -40),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Nothing.",
		[
			(call_script, "script_change_player_party_morale", -100),
			(display_message, "@The men are mutinous! How can you ignore such a selfish act!", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_1", mnf_disable_all_keys|menu_text_color(0xff000000), "You stumble and hurt your knee. The pain is unbearable. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Curse the gods!",
		[
			(call_script, "script_change_player_party_morale", -25),
			(display_message, "@Your men grumble. No one should curse the gods.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Curse your luck!",
		[
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(display_message, "@Your men grumble. Perhaps you've run out of luck.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_2", mnf_disable_all_keys|menu_text_color(0xff000000), "You stumble and hurt your hand. After a few hours, it starts to turn blue. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Send for a septon!",
		[
			(call_script, "script_change_player_party_morale", 25),
			(troop_raise_attribute, "trp_player", 0, -1),
			(display_message, "@You've lost 1 strength.", 0x00ff0000),
			(display_message, "@All the man did was pray!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Send for a wise woman!",
		[
			(call_script, "script_change_troop_renown", "trp_player", -15),
			(troop_raise_attribute, "trp_player", 1, -1),
			(display_message, "@You've lost 1 agility.", 0x00ff0000),
			(display_message, "@The woman was clearly mad! All she did was spit on it!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Send for a maester!",
		[
			(troop_raise_attribute, "trp_player", 0, -1),
			(display_message, "@You've lost 1 strength.", 0x00ff0000),
			(display_message, "@He managed to save your hand, but you feel weak.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_3", mnf_disable_all_keys|menu_text_color(0xff000000), "A branch falls off a tree, and hit you in the head. At first, you feel fine, but soon your vision turns blurry, and you have trouble concentrating. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Send for a septon!",
		[
			(call_script, "script_change_player_party_morale", 25),
			(troop_raise_attribute, "trp_player", 2, -1),
			(display_message, "@You've lost 1 intelligence.", 0x00ff0000),
			(display_message, "@All the man did was pray!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Send for a wise woman!",
		[
			(call_script, "script_change_troop_renown", "trp_player", -15),
			(troop_raise_attribute, "trp_player", 2, -1),
			(display_message, "@You've lost 1 intelligence.", 0x00ff0000),
			(display_message, "@The woman was clearly an amateur! All she did was make you drink mud!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Send for a maester!",
		[
			(display_message, "@The maester cleared your head, but you still feel weak.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_4", mnf_disable_all_keys|menu_text_color(0xff000000), "You've caught a cold. The symptoms are not severe, but you should probably rest for a bit. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Keep going, it's just a cold!",
		[
			(call_script, "script_change_player_party_morale", -25),
			(display_message, "@Your men grumble. What if the cold spreads?", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Rest for a while.",
		[
			(call_script, "script_change_player_party_morale", 20),
			(display_message, "@Your men think you sensible.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_5", mnf_disable_all_keys|menu_text_color(0xff000000), "You've cut yourself on a rusty knife. The wound looks fine, but perhaps it would be wise to take some precautions. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Smear the cut with honey.",
		[
			(troop_raise_attribute, "trp_player", 0, -2),
			(display_message, "@You've lost 2 strength.", 0x00ff0000),
			(display_message, "@The wound festers!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Cover the cut with herbs.",
		[
			(troop_raise_attribute, "trp_player", 0, -1),
			(display_message, "@You've lost 1 strength.", 0x00ff0000),
			(display_message, "@The wound festers!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Leave the cut dry and do nothing",
		[
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_6", mnf_disable_all_keys|menu_text_color(0xff000000), "You come across some mushrooms. They look plain brown and slightly white. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Eat them.",
		[
			(troop_raise_attribute, "trp_player", 0, -1),
			(troop_raise_attribute, "trp_player", 1, -1),
			(display_message, "@You've lost 1 strength.", 0x00ff0000),
			(display_message, "@You've lost 1 agility.", 0x00ff0000),
			(display_message, "@You have severe diarrhea.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the mushrooms.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_7", mnf_disable_all_keys|menu_text_color(0xff000000), "You've got a thorn in your hand! What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Leave it be.",
		[
			(troop_raise_attribute, "trp_player", 0, -1),
			(display_message, "@You've lost 1 strength.", 0x00ff0000),
			(display_message, "@Your hand has started to itch.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Pull it out.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_8", mnf_disable_all_keys|menu_text_color(0xff000000), "A young girl, from a nearby village, offers herself to you. It will only cost twenty silver!",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Sleep with her.",
		[
			(troop_raise_attribute, "trp_player", 0, -1),
			(display_message, "@You've lost 1 strength.", 0x00ff0000),
			(display_message, "@You've caught the pox!", 0x00ff0000),
			(troop_remove_gold, "trp_player", 20),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore her.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_11", mnf_disable_all_keys|menu_text_color(0xff000000), "You meet a lonely septon on the road. As you pass him, you stumble and accidentally push him off the track.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Apologize to the septon.",
		[
			(call_script, "script_change_player_party_morale", 25),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(display_message, "@Your men approve. No one should offend the gods.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the septon.",
		[
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(call_script, "script_change_player_party_morale", -25),
			(display_message, "@Your men grumble. No one should offend the gods.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_22", mnf_disable_all_keys|menu_text_color(0xff000000), "Going into the woods alone, you suddenly feel a blade across your throat. An outlaw has ambushed you. Listening to him slobber and stammer, it is clear that the man is unstable and dangerous. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Try to seize the blade!",
		[
			(troop_raise_attribute, "trp_player", 1, -1),
			(display_message, "@You've lost 1 agility.", 0x00ff0000),
			(display_message, "@You managed to get away, but the man cut your hands!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Kick the man on the shin!",
		[
			(troop_raise_attribute, "trp_player", 1, -1),
			(display_message, "@You've lost 1 agility.", 0x00ff0000),
			(display_message, "@You managed to get away, but the man cut your leg!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Thrust your elbow into his groin!",
		[
			(display_message, "@You managed to get away.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_33", mnf_disable_all_keys|menu_text_color(0xff000000), "Walking alone in the forest, you come across two young women, bathing in a stream. They seem to be alone, with no way of defending themselves.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Stay hidden, and peek at their naked bodies.",
		[
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Force yourself on them.",
		[
			(display_message, "@You leave the women on the ground, with their throats cut.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_3",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_44", mnf_disable_all_keys|menu_text_color(0xff000000), "Walking through a small village, a young man approaches you. He'll spend the night with you for free, if only he can travel with you for a while.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Spend the night with the man.",
		[
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore him.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_55", mnf_disable_all_keys|menu_text_color(0xff000000), "You're walking across a field, when your foot is caught in a rabbits hole. As you fall over, your manage to twist your body, sending a stab of blinding pain up through your leg. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Time to rest!",
		[
			(display_message, "@Your decision was a wise one.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Keep going.",
		[
			(display_message, "@No harm was done.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_66", mnf_disable_all_keys|menu_text_color(0xff000000), "You come across a blind beggar. The man is old and frail, but he might have a couple of coins in his purse.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Rob the beggar.",
		[
			(troop_raise_attribute, "trp_player", 0, -2),
			(troop_raise_attribute, "trp_player", 1, -2),
			(display_message, "@You've lost 2 strength.", 0x00ff0000),
			(display_message, "@You've lost 2 agility.", 0x00ff0000),
			(display_message, "@The beggar is dead, but he managed to stab you in the leg! And he didn't have any coins on him!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore the beggar.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_77", mnf_disable_all_keys|menu_text_color(0xff000000), "You come across a young man, bearing the clothes of a minor noble. When he sees you, he signals for you to follow. Curious, you do so, and when you're alone, he kicks you in the groin!",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Punch him in the face!",
		[
			(display_message, "@The man was obviously a madman, in stolen clothing!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Punch him in the kidney!",
		[
			(display_message, "@The man was obviously a madman, in stolen clothing!", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("negative_event_88", mnf_disable_all_keys|menu_text_color(0xff000000), "A young man, from a nearby village, offers himself to you. It will only cost twenty silver!",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_negative_event")
	],
	[
		("choice_10_1",
		[],
		"Sleep with him.",
		[
			(troop_raise_attribute, "trp_player", 0, 1),
			(display_message, "@You've gained 1 strength.", 0x0033ccff),
			(display_message, "@You feel very refreshed!", 0x0033ccff),
			(troop_remove_gold, "trp_player", 20),
			(change_screen_return)
		], "."),

		("choice_10_2",
		[],
		"Ignore him.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_101", mnf_disable_all_keys|menu_text_color(0xff000000), "You are a famous leader of men, and you receive news that a group of knights wishes to join you..",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_101_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"They are welcome.",
		[
			(party_add_members, "p_main_party", "trp_mercenary_horseman_1", 5),
			(change_screen_return)
		], "."),

		("choice_101_2",
		[],
		"I do not need more troops.",
		[
			(change_screen_return)
		], "."),

		("choice_101_3",
		[],
		"Kill them. Surely they carry many valuables.",
		[
			(call_script, "script_change_player_honor", -20),
			(troop_add_gold, "trp_player", 2000),
			(call_script, "script_change_troop_renown", "trp_player", -40),
			(change_screen_return)
		], ".")
	]
	),

	("event_102", mnf_disable_all_keys|menu_text_color(0xff000000), "You receive news that a group of women expresses interest in becoming camp followers.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_102_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"They are welcome.",
		[
			(party_add_members, "p_main_party", "trp_event_camp_followers", 5),
			(change_screen_return)
		], "."),

		("choice_102_2",
		[],
		"I do not need more troops.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_103", mnf_disable_all_keys|menu_text_color(0xff000000), "You are a famous leader of men, and you receive news that a group of singers wishes to join you, and make your travels more joyous.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_103_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 3)
		],
		"They are welcome.",
		[
			(party_add_members, "p_main_party", "trp_event_singer", 1),
			(party_add_members, "p_main_party", "trp_event_lute_player", 2),
			(change_screen_return)
		], "."),

		("choice_103_2",
		[],
		"I do not need more troops.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_11", mnf_disable_all_keys|menu_text_color(0xff000000), "The kin of a farmer slain in one of your battles brings a suit against you requesting compensation of 200 coins. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_11_1",
		[],
		"Pay them 200 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(troop_remove_gold, "trp_player", 200),
				(display_message, "@The farmers family was paid.", 0x0033ccff),
				(call_script, "script_change_player_honor", 5),
				(call_script, "script_change_troop_renown", "trp_player", -5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_11_2",
		[],
		"Refuse to pay",
		[
			(call_script, "script_change_player_honor", -10),
			(change_screen_return)
		], "."),

		("choice_11_3",
		[],
		"Refuse to answer the case at all",
		[
			(call_script, "script_change_player_honor", -15),
			(change_screen_return)
		], ".")
	]
	),

	("event_12", mnf_disable_all_keys|menu_text_color(0xff000000), "The kin of a sellsword slain in one of your battles demands compensation. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_12_1",
		[],
		"Pay them 500 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@Compensation was paid.", 0x0033ccff),
				(call_script, "script_change_player_honor", 5),
				(call_script, "script_change_troop_renown", "trp_player", -5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_12_2",
		[],
		"Refuse to pay.",
		[
			(call_script, "script_change_player_honor", -10),
			(change_screen_return)
		], "."),

		("choice_12_3",
		[],
		"Refuse to answer the case at all.",
		[
			(call_script, "script_change_player_honor", -15),
			(change_screen_return)
		], ".")
	]
	),

	("event_13", mnf_disable_all_keys|menu_text_color(0xff000000), "You see a crane circling above your party.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_13_1",
		[],
		"Tell to your men that the crane symbolizes good luck!",
		[
			(call_script, "script_change_player_party_morale", 50),
			(display_message, "@It is common knowledge that the crane is a symbol of the Warrior. Your men are impressed by your worldy knowledge, and grateful that the Gods are with them.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_13_3",
		[],
		"Tell them that although cranes warn of a bad fortunes, you have faith in them!",
		[
			(call_script, "script_change_player_party_morale", -50),
			(display_message, "@The crane is a symbol of the Warrior - everyone knows that! Your lack of knowledge troubles your men, and they begin to doubt your reliability.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_13_2",
		[],
		"Ignore it.",
		[
			(change_screen_return),
			(display_message, "@Your men pass by the bird without noticing it.", 0x0033ccff)
		], ".")
	]
	),

	("event_14", mnf_disable_all_keys|menu_text_color(0xff000000), "A country farmer stands before you on the road, a weeping girl behind him. He points his finger accusingly at one of your men, saying that he raped his daughter and demands justice.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_14_1",
		[],
		"Geld the man and cast him out of your party.",
		[
			(call_script, "script_change_player_honor", 5),
			(change_screen_return)
		], "."),

		("choice_14_2",
		[],
		"Give the accused man a lashing and consider the matter settled.",
		[
			(change_screen_return)
		], "."),

		("choice_14_3",
		[],
		"Tell the farmer that he is lucky that is all the man did!",
		[
			(call_script, "script_change_player_honor", -5),
			(change_screen_return)
		], ".")
	]
	),

	("event_15", mnf_disable_all_keys|menu_text_color(0xff000000), "You are travelling through the forest and you suddenly spot a lot of mushrooms, cowered with blue and red spots. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_15_1",
		[],
		"Pick them up and eat them.",
		[
			(change_screen_return),
			(display_message, "@The mushrooms were really tasty!", 0x0033ccff)
		], "."),

		("choice_15_2",
		[],
		"Pick them up and give them to your men.",
		[
			(call_script, "script_change_player_party_morale", 50),
			(display_message, "@Your men are eating mushrooms while resting at camp. They seem to be happy.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_15_3",
		[],
		"Ignore them.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_16", mnf_disable_all_keys|menu_text_color(0xff000000), "You are travelling through the forest and you suddenly spot a lot of mushrooms, brown and sweet smelling. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_16_1",
		[],
		"Pick them up and eat them.",
		[
			(display_message, "@The mushrooms were really tasty. But now you have diarrhea and you feel awful.", 0x00ff0000),
			(troop_raise_attribute, "trp_player", 0, -1),
			(troop_raise_attribute, "trp_player", 1, -1),
			(display_message, "@You've lost 1 strength.", 0x00ff0000),
			(display_message, "@You've lost 1 agility.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_16_2",
		[],
		"Pick them up and give them to your men.",
		[
			(call_script, "script_change_player_party_morale", -50),
			(display_message, "@Your men are eating mushrooms while resting at camp. Some of them have diarrhea and feel very bad. They blame you for their misery!", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_16_3",
		[],
		"Ignore them.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_17", mnf_disable_all_keys|menu_text_color(0xff000000), "You are travelling through the forest and you suddenly spot a lot of mushrooms, cowered in spider web, and with an awful smell. What do you do?",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_walking_woods")
	],
	[
		("choice_17_1",
		[],
		"Pick them up and eat them.",
		[
			(display_message, "@The mushrooms tasted horrible! You have diarrhea, and there's blood mixed in with the stool!", 0x000ff000),
			(troop_raise_attribute, "trp_player", 0, -2),
			(troop_raise_attribute, "trp_player", 1, -1),
			(display_message, "@You've lost 2 strength.", 0x000ff000),
			(display_message, "@You've lost 1 agility.", 0x000ff000),
			(change_screen_return)
		], "."),

		("choice_17_2",
		[],
		"Pick them up and give them to your men.",
		[
			(call_script, "script_change_player_party_morale", -100),
			(display_message, "@Your men are eating mushrooms while resting at camp. Most of them have diarrhea and can hardly walk. They blame you for their misery!", 0x000ff000),
			(change_screen_return)
		], "."),

		("choice_17_3",
		[],
		"Ignore them.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_18", mnf_disable_all_keys|menu_text_color(0xff000000), "You rest near a village, when the local elders wife approaches you. The wife wants to sleep with you, while her husband is away.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_18_1",
		[],
		"You agree.",
		[
			(call_script, "script_change_player_honor", -5),
			(display_message, "@You spend a good time with the elders wife, and when her husband returns, you run from the stable without being seen!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_18_2",
		[],
		"You send one of your men to rape the wife.",
		[
			(call_script, "script_change_player_party_morale", 50),
			(call_script, "script_change_player_honor", -20),
			(change_screen_return)
		], "."),

		("choice_18_3",
		[],
		"You refuse.",
		[
			(call_script, "script_change_player_honor", 5),
			(change_screen_return)
		], ".")
	]
	),

	("event_19", mnf_disable_all_keys|menu_text_color(0xff000000), "You stumble over a group of beggars that are being attacked by a group of bandits.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_beggar")
	],
	[
		("choice_19_1",
		[],
		"Rush to the aid of the beggars and teach those bloody bandits not to disturb the poor.",
		[
			(call_script, "script_change_player_honor", 5),
			(display_message, "@The bandits run away when you approach!", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_19_2",
		[],
		"Aid the bandits and bathe in the blood of the beggars!",
		[
			(call_script, "script_change_player_honor", -5),
			(display_message, "@You kill the beggars, while invoking the Stranger!", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("event_20", mnf_disable_all_keys|menu_text_color(0xff000000), "You happen to find a purse filled with coins.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_20_1",
		[],
		"Give the purse to a hospice.",
		[
			(call_script, "script_change_player_honor", 5),
			(change_screen_return)
		], "."),

		("choice_20_2",
		[],
		"Keep the purse.",
		[
			(call_script, "script_troop_add_gold", "trp_player", 100),
			(change_screen_return)
		], ".")
	]
	),

	("event_21", mnf_disable_all_keys|menu_text_color(0xff000000), "You come across some runaway serfs.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_21_1",
		[],
		"Help them on their way.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], "."),

		("choice_21_2",
		[],
		"Return them to their master.",
		[
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(call_script, "script_troop_add_gold", "trp_player", 100),
			(change_screen_return)
		], ".")
	]
	),

	("event_22", mnf_disable_all_keys|menu_text_color(0xff000000), "You come upon bandits ambushing some merchants.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_22_1",
		[],
		"Chase the bandits away.",
		[
			(call_script, "script_troop_add_gold", "trp_player", 50),
			(call_script, "script_change_player_honor", 5),
			(display_message, "@The merchants give you some money.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_22_2",
		[],
		"Aid the bandits.",
		[
			(call_script, "script_change_player_honor", -5),
			(call_script, "script_troop_add_gold", "trp_player", 300),
			(change_screen_return)
		], ".")
	]
	),

	("event_23", mnf_disable_all_keys|menu_text_color(0xff000000), "Your fame and popularity has attracted a young nobleman, who wish to join your retinue.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_23_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 1)
		],
		"Let him join.",
		[
			(party_add_members, "p_main_party", "trp_event_young_noblemen", 1),
			(change_screen_return)
		], "."),

		("choice_23_2",
		[],
		"I don't need any more men.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_24", mnf_disable_all_keys|menu_text_color(0xff000000), "You spot a poor man on the road. He looks tired. You send one of your men to ask him why he is in the wilderness alone. He says that outlaws robbed him and if he doesnt get some money soon to buy food, he will starve. He says he served in the army once, and will make a loyal warrior.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_24_1",
		[],
		"Life is not fair, give him nothing.",
		[
			(call_script, "script_change_player_honor", -5),
			(display_message, "@The man eyes follow you while you get on your way, the look on his face on of sadness and despair.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_24_2",
		[],
		"Give him 100 gold.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 100),
				(troop_remove_gold, "trp_player", 100),
				(display_message, "@You feel good due to having helped the poor man.", 0x0033ccff),
				(call_script, "script_change_player_honor", 1),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -5),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_24_3",
		[],
		"Give him 200 gold.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(troop_remove_gold, "trp_player", 200),
				(display_message, "@ You feel good for helping.", 0x0033ccff),
				(call_script, "script_change_player_honor", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -8),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_24_4",
		[],
		"Give him 300 gold.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 300),
				(troop_remove_gold, "trp_player", 300),
				(display_message, "@ You feel good for helping.", 0x0033ccff),
				(call_script, "script_change_player_honor", 10),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -10),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_24_5",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 1)
		],
		"Pay him 400 gold and suggest he join your army.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 400),
				(troop_remove_gold, "trp_player", 400),
				(display_message, "@When you give him armor and food, he suddenly appear as a mighty warrior.", 0x0033ccff),
				(party_add_members, "p_main_party", "trp_mercenary_horseman_1", 1),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -8),
			(try_end),
			(change_screen_return)
		], ".")
	]
	),

	("event_25", mnf_disable_all_keys|menu_text_color(0xff000000), "You encounter a small child, dressed in rags and looking very hungry. He walks up to you and begs for some food.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_beggar")
	],
	[
		("choice_25_1",
		[],
		"Give him nothing.",
		[
			(call_script, "script_change_player_honor", -5),
			(display_message, "@The child's eyes follow you sadly.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_25_2",
		[],
		"Give the boy 100 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 100),
				(troop_remove_gold, "trp_player", 100),
				(display_message, "@You feel good for helping.", 0x0033ccff),
				(call_script, "script_change_player_honor", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_25_3",
		[],
		"Give the boy a sack of 500 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@You feel good for helping.", 0x0033ccff),
				(call_script, "script_change_player_honor", 10),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -30),
			(try_end),
			(change_screen_return)
		], ".")
	]
	),

	("event_26", mnf_disable_all_keys|menu_text_color(0xff000000), "A group of bandits approaches your camp. As your men reach for their weapons, the bandits put down their weapons and say they come in peace. The leader of the bandits approaches you and asks if they may join you.",
	"none",
	[
		(set_background_mesh, "mesh_pic_bandits")
	],
	[
		("choice_26_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Of course! My party always welcomes bloodthirsty men!",
		[
			(call_script, "script_change_player_party_morale", -25),
			(call_script, "script_change_player_honor", -10),
			(party_add_members, "p_main_party", "trp_event_bandits", 5),
			(display_message, "@New troops join your party.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_26_2",
		[],
		"We have no room for your kind!",
		[
			(display_message, "@The bandits flee.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_26_3",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Prove yourselves worthy by raiding a village and bringing me the elders head!",
		[
			(call_script, "script_troop_add_gold", "trp_player", 200),
			(call_script, "script_change_player_honor", -10),
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(party_add_members, "p_main_party", "trp_event_bandits", 5),
			(display_message, "@After two hours the bandits return with some loot and the elders head...", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_26_4",
		[],
		"Kill them all!",
		[
			(call_script, "script_troop_add_gold", "trp_player", 50),
			(call_script, "script_change_player_honor", 1),
			(display_message, "@Your men kill all the bandits.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("event_27", mnf_disable_all_keys|menu_text_color(0xff000000), "A religous fanatic from Oldtown is following your army. While he gains some converts, he also creates some unrest.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_27_1",
		[],
		"Thank the heavens! Let him be.",
		[
			(display_message, "@The townsfolk of Oldtown her of your piousness.", 0x0033ccff),
			(call_script, "script_change_player_relation_with_center", "p_town_32", 5),
			(change_screen_return)
		], "."),

		("choice_27_2",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 1)
		],
		"Offer him a place in your warband.",
		[
			(display_message, "@He joins you.", 0x0033ccff),
			(party_add_members, "p_main_party", "trp_event_religious_fanatic_oldtown", 1),
			(change_screen_return)
		], "."),

		("choice_27_3",
		[],
		"Get rid of him.",
		[
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_10", -1),
			(call_script, "script_change_player_relation_with_center", "p_town_32", -5),
			(call_script, "script_change_player_honor", -5),
			(call_script, "script_change_player_party_morale", -50),
			(display_message, "@The man insists too much, so you order your loyal men to hang him.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("event_28", mnf_disable_all_keys|menu_text_color(0xff000000), "A religous fanatic from Volantis is following your army. While he gains some converts he also creates some unrest.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_28_1",
		[],
		"Thanks be to R'hllor! Let him be!",
		[
			(display_message, "@The people of Volantis hear of your piousness.", 0x0033ccff),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_16", 1),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_8", 1),
			(call_script, "script_change_player_relation_with_center", "p_town_47", 5),
			(change_screen_return)
		], "."),

		("choice_28_2",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 1)
		],
		"Offer him a place in your warband.",
		[
			(display_message, "@He joins you.", 0x0033ccff),
			(party_add_members, "p_main_party", "trp_event_religious_fanatic_volantis", 1),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_16", 1),
			(change_screen_return)
		], "."),

		("choice_28_3",
		[],
		"Get rid of him.",
		[
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_16", -1),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_8", -1),
			(call_script, "script_change_player_party_morale", -50),
			(display_message, "@The man insists too much, and you have no choice but to have your loyal men cut his throat.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("event_29", mnf_disable_all_keys|menu_text_color(0xff000000), "You come upon a temple. The priests are busy working or praying, none of them is armed. You see golden treasures and silver tributes glistening inside...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_29_1",
		[],
		"Pass by the temple.",
		[
			(call_script, "script_change_player_honor", 5),
			(change_screen_return)
		], "."),

		("choice_29_2",
		[],
		"Go inside, pray and pay a tribute of 500 coins.",
		[
			(display_message, "@ The priest bless you and you continue on your way.", 0x0033ccff),
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@You feel good for helping.", 0x0033ccff),
				(call_script, "script_change_player_honor", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_player_honor", -5),
				(call_script, "script_change_troop_renown", "trp_player", -15),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_29_3",
		[],
		"Loot the temple, slaughter all the priests and burn the place!",
		[
			(call_script, "script_change_player_honor", -20),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(call_script, "script_change_player_party_morale", -50),
			(call_script, "script_troop_add_gold", "trp_player", 500),
			(display_message, "@Blood and death everywhere. The priests do not resist and you take possession of their gold.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("event_30", mnf_disable_all_keys|menu_text_color(0xff000000), "You come upon a local septry. The brothers are busy working or praying, none of them is armed. You see gold treasures and silver tributes glistening inside...",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_30_1",
		[],
		"Pass by the septry.",
		[
			(call_script, "script_change_player_honor", 5),
			(change_screen_return)
		], "."),

		("choice_30_2",
		[],
		"Go inside, pray and pay a tribute of 500 coins.",
		[
			(display_message, "@The brothers bless you, and you continue on your way.", 0x0033ccff),
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@You feel good for helping.", 0x0033ccff),
				(call_script, "script_change_player_honor", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_player_honor", -5),
				(call_script, "script_change_troop_renown", "trp_player", -10),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_30_3",
		[],
		"Loot the septry, slaughter the brothers and burn the place!",
		[
			(call_script, "script_change_player_honor", -20),
			(call_script, "script_change_troop_renown", "trp_player", 20),
			(call_script, "script_change_player_party_morale", -20),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_1", -2),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_3", -2),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_5", -2),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_9", -2),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_10", -2),
			(call_script, "script_troop_add_gold", "trp_player", 2500),
			(display_message, "@With unusual fury, your warriors plundered the septry and killed the brothers. Blood covers the ground, and greed shines in the eys of your men.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("event_31", mnf_disable_all_keys|menu_text_color(0xff000000), "Some of your enemies have taken refuge in a nearby septry and the local septon have given them sanctuary!",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_31_1",
		[],
		"Ignore them.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(change_screen_return)
		], "."),

		("choice_31_2",
		[],
		"Donate 100 coins to the septry.",
		[
			(display_message, "@The septon bless you, and you continue on your way.", 0x0033ccff),
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 100),
				(troop_remove_gold, "trp_player", 100),
				(display_message, "@You feel good for helping.", 0x0033ccff),
				(call_script, "script_change_player_honor", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -10),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_31_3",
		[],
		"Go inside, slaughter them and kill the interfering septon!",
		[
			(call_script, "script_change_player_honor", -20),
			(call_script, "script_change_troop_renown", "trp_player", 20),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_1", -1),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_3", -1),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_5", -1),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_10", -1),
			(call_script, "script_troop_add_gold", "trp_player", 300),
			(display_message, "@With unusual fury, your warriors plundered the septry and killed all your enemies. Blood covers the ground, and when a silent sister stumbles out from behind the sept, your men rape her.", 0x00ff0000),
			(change_screen_return)
		], ".")
	]
	),

	("event_32", mnf_disable_all_keys|menu_text_color(0xff000000), "You come across the grave of an old and forgotten king.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_32_1",
		[],
		"Loot the tomb!",
		[
			(call_script, "script_change_player_honor", -5),
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(call_script, "script_change_player_party_morale", 20),
			(troop_add_item, "trp_player", "itm_sword_rusty_a", 1),
			(display_message, "@Amongst the remains of the corpse is a mysterious sword. Upon closer inspection, the sword seems to be completely regular.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_32_2",
		[],
		"Donate 1000 coins for a new tomb.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(display_message, "@You feel good for honoring this brave, unknown, king.", 0x0033ccff),
				(call_script, "script_change_player_honor", 10),
				(display_message, "@Someday, perhaps, you might have the honor of being buried like a king.", 0x0033ccff),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_32_3",
		[],
		"Enter the tomb and pay your respects",
		[
			(call_script, "script_change_player_honor", 5),
			(display_message, "@Someday, perhaps, you might have the honor of being buried like a king.", 0x0033ccff),
			(change_screen_return)
		], ".")
	]
	),

	("event_33", mnf_disable_all_keys|menu_text_color(0xff000000), "In the local tavern you come across a young scholar who claims his master is chronicling the great and notable events of this land.He offers, for a small fee of 300 coins, to convince his master to overlook your notoriety for incessant raping, pillaging, and general debauchery, and instead depict you as a something closer to Baelor the Blessed or a champion for the poor and oppressed or a heroic champion - whichever you prefer.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_33_1",
		[],
		"You decide to ignore him, muttering that you are content to let history be the judge.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(change_screen_return)
		], "."),

		("choice_33_2",
		[],
		"You pay the young man what he asks for.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 300),
				(troop_remove_gold, "trp_player", 300),
				(display_message, "@Fame is important.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 10),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_33_3",
		[],
		"You gladly pay the man his fee.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 300),
				(troop_remove_gold, "trp_player", 300),
				(display_message, "@Fame is important.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 15),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -30),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_33_4",
		[],
		"After listening impatiently to the man, you scold him, remarking that you have never heard of a more pathetic scam in your life.",
		[
			(call_script, "script_change_player_honor", -5),
			(change_screen_return)
		], ".")
	]
	),

	("event_34", mnf_disable_all_keys|menu_text_color(0xff000000), "You pass through a local village which appears to be suffering through some hard times.To give the village a boost, you announce that you will sponsor a sewing and embroidery contest for the gentle ladyfolk of the countryside and will reward handsomely the one who can produce the brightest, most fashionable, yet suitably manly, new tunic.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_34_1",
		[],
		"Declare the prettiest girl in town to be the winner, instructing her to present herself at your tent.",
		[
			(call_script, "script_change_troop_renown", "trp_player", 10),
		(try_end),
		(change_screen_return)
		], "."),

		("choice_34_2",
		[],
		"Scold the village elder for not treating the matter seriously. Declaring that these rags are not fit for dishcloths, you storm out of the town.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(change_screen_return)
		], "."),

		("choice_34_3",
		[],
		"You collect various coloured tunics brought to you and amusingly think to yourself that these would be good to use for blankets or for some type of washcloth. You still pay the winner 500 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@Facades are important.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 10),
				(troop_add_item, "trp_player", "itm_militia_tunic_a", 1),
				(troop_add_item, "trp_player", "itm_peasant_b", 1),
				(troop_add_item, "trp_player", "itm_peasant_c", 1),
				(troop_add_item, "trp_player", "itm_archer_a", 1),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], ".")
	]
	),

	("event_35", mnf_disable_all_keys|menu_text_color(0xff000000), "While reviewing the latest reconnaissance reports with your men, you whimsically remark that passing through the beautiful countryside makes you wish you could one day cast aside your sword settle, down on your own land with some local buxom wench and spend the rest of your days making babies and growing wheat...To which one of your men retorts that this was hardly likely, as your body odour is legendary and everyone knows wheat only grows when attended by peasants.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_35_1",
		[],
		"Laugh heartily at his witty comment.",
		[
			(call_script, "script_change_troop_renown", "trp_player", -5),
			(call_script, "script_change_player_party_morale", 50),
			(change_screen_return)
		], "."),

		("choice_35_2",
		[],
		"You glare at the young man and your mood takes a turn for the worse.",
		[
			(call_script, "script_change_player_party_morale", -50),
			(change_screen_return)
		], "."),

		("choice_35_3",
		[],
		"You give a wink to your most trusted man. The comedians head will soon adorn a spike.",
		[
			(call_script, "script_change_player_honor", -10),
			(call_script, "script_change_player_party_morale", -50),
			(call_script, "script_change_troop_renown", "trp_player", 40),
			(change_screen_return)
		], ".")
	]
	),

	("event_36", mnf_disable_all_keys|menu_text_color(0xff000000), "You come across what are, evidently, stray sheep from a nearby village",
	"none",
	[
		(set_background_mesh, "mesh_pic_cattle")
	],
	[
		("choice_36_1",
		[],
		"Return the sheep to the village and ask for no reward.",
		[
			(call_script, "script_change_player_honor", 5),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(display_message, "@The sheep are very valuable to the village.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_36_2",
		[],
		"Return the sheep... for a price.",
		[
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(call_script, "script_troop_add_gold", "trp_player", 250),
			(display_message, "@You return the sheep to the village.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_36_3",
		[],
		"Dinner! Round up and slaughter the animals.",
		[
			(call_script, "script_change_player_honor", -5),
			(call_script, "script_change_player_party_morale", 50),
			(display_message, "@The sheep were devoured on the spot.", 0x0033ccff),
			(troop_add_item, "trp_player", "itm_trade_dried_meat", 5),
			(change_screen_return)
		], ".")
	]
	),

	("event_37", mnf_disable_all_keys|menu_text_color(0xff000000), "A traveller tells you where to find a band of travelling mummers, recently arrived.",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger")
	],
	[
		("choice_37_1",
		[],
		"Attack the caravan and steal their wares.",
		[
			(call_script, "script_change_player_honor", -5),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(call_script, "script_change_player_party_morale", 25),
			(call_script, "script_troop_add_gold", "trp_player", 450),
			(display_message, "@With the blood of the mummers covering your weapon, you welcome the easy victory.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_37_2",
		[],
		"Demand tribute.",
		[
			(call_script, "script_change_player_honor", -5),
			(call_script, "script_troop_add_gold", "trp_player", 100),
			(change_screen_return)
		], "."),

		("choice_37_3",
		[],
		"Steal the mummers wares, but let them live.",
		[
			(call_script, "script_change_player_honor", -10),
			(call_script, "script_change_player_party_morale", 25),
			(call_script, "script_troop_add_gold", "trp_player", 250),
			(display_message, "@Your soldiers get a kick out of harassing the helpless mummers.", 0x0033ccff),
			(troop_add_item, "trp_player", "itm_trade_dried_meat", 5),
			(troop_add_item, "trp_player", "itm_trade_wine", 5),
			(change_screen_return)
		], "."),

		("choice_37_4",
		[],
		"Help them on their way and give them 200 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(troop_remove_gold, "trp_player", 200),
				(display_message, "@Honour and fame are important.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 10),
				(call_script, "script_change_player_honor", 5),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_37_5",
		[],
		"Ignore them.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_38", mnf_disable_all_keys|menu_text_color(0xff000000), "A traveller tells you where to find a band of begging brothers.",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger")
	],
	[
		("choice_38_1",
		[],
		"You attack the small enclave, easily slaughtering the hapless brothers, leaving few survivors.",
		[
			(call_script, "script_change_player_honor", -15),
			(call_script, "script_change_troop_renown", "trp_player", 15),
			(call_script, "script_change_player_party_morale", 50),
			(call_script, "script_troop_add_gold", "trp_player", 450),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_1", -1),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_3", -1),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_5", -1),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_10", -1),
			(display_message, "@With blood covering your weapon, you smile at the slaughter.", 0x00ff0000),
			(change_screen_return)
		], "."),

		("choice_38_2",
		[],
		"Demand tribute.",
		[
			(call_script, "script_change_player_honor", -5),
			(call_script, "script_troop_add_gold", "trp_player", 100),
			(change_screen_return)
		], "."),

		("choice_38_3",
		[],
		"Disperse the brothers and claim all their possessions as your own, leaving them only their lives.",
		[
			(call_script, "script_change_player_honor", -10),
			(call_script, "script_change_player_party_morale", 50),
			(call_script, "script_troop_add_gold", "trp_player", 250),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_1", -1),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_3", -1),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_5", -1),
			(call_script, "script_change_player_relation_with_faction", "fac_kingdom_10", -1),
			(display_message, "@Your soldiers get a kick out of harassing helpless men.", 0x00ff0000),
			(troop_add_item, "trp_player", "itm_trade_wine", 2),
			(change_screen_return)
		], "."),

		("choice_38_4",
		[],
		"Help them on their way, and give them 500 coins. They depart praising your name.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@Honour and fame are important.", 0x0033ccff),
				(call_script, "script_change_troop_renown", "trp_player", 10),
				(call_script, "script_change_player_honor", 5),
				(call_script, "script_change_player_relation_with_faction", "fac_kingdom_1", 1),
				(call_script, "script_change_player_relation_with_faction", "fac_kingdom_3", 1),
				(call_script, "script_change_player_relation_with_faction", "fac_kingdom_5", 1),
				(call_script, "script_change_player_relation_with_faction", "fac_kingdom_10", 1),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -20),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_38_5",
		[],
		"Ignore them.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_39", mnf_disable_all_keys|menu_text_color(0xff000000), "A traveller tells you where to find a small band of outlaws.",
	"none",
	[
		(set_background_mesh, "mesh_pic_messenger")
	],
	[
		("choice_39_1",
		[],
		"You ambush them, easily slaughtering the hapless outlaws, leaving few survivors.",
		[
			(call_script, "script_change_player_honor", 5),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(call_script, "script_change_player_party_morale", 50),
			(call_script, "script_troop_add_gold", "trp_player", 500),
			(display_message, "@With blood covering your weapon, you smile at the slaughter.", 0x0033ccff),
			(change_screen_return)
		], "."),

		("choice_39_2",
		[],
		"Demand tribute.",
		[
			(call_script, "script_change_player_honor", -5),
			(call_script, "script_troop_add_gold", "trp_player", 100),
			(change_screen_return)
		], "."),

		("choice_39_3",
		[],
		"Disperse the outlaws and claim all their possessions as your own, leaving them only their lives.",
		[
			(call_script, "script_change_player_honor", 5),
			(call_script, "script_change_player_party_morale", 50),
			(call_script, "script_troop_add_gold", "trp_player", 1000),
			(display_message, "@Your soldiers get a kick out of the easy victory.", 0x0033ccff),
			(troop_add_item, "trp_player", "itm_sword_rusty_a", 1),
			(change_screen_return)
		], "."),

		("choice_39_4",
		[],
		"Help them on their way, and give them 500 gold. They depart praising your name.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 500),
				(troop_remove_gold, "trp_player", 500),
				(display_message, "@You wonder why you helped the outlaws...", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -50),
				(call_script, "script_change_player_honor", -30),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_troop_renown", "trp_player", -100),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_39_5",
		[],
		"Ignore them.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("event_40", mnf_disable_all_keys|menu_text_color(0xff000000), "One of your soldiers rapes the daughter of a local peasant.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_40_1",
		[],
		"Ignore the situation.",
		[
			(call_script, "script_change_player_honor", -15),
			(change_screen_return)
		], "."),

		("choice_40_2",
		[],
		"Geld the soldier.",
		[
			(call_script, "script_change_player_honor", 5),
			(call_script, "script_change_troop_renown", "trp_player", 10),
			(call_script, "script_change_player_party_morale", -50),
			(change_screen_return)
		], "."),

		("choice_40_3",
		[],
		"Execute the soldier and apologize for the incident.",
		[
			(call_script, "script_change_player_honor", 10),
			(call_script, "script_change_player_party_morale", -50),
			(change_screen_return)
		], "."),

		("choice_40_4",
		[],
		"Pay the peasant 250 coins to keep quiet.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 250),
				(troop_remove_gold, "trp_player", 250),
				(display_message, "@The girl is pregnant and the peasant asks for a big compensation. To avoid rumors and problems, you pay.", 0x00ff0000),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_player_honor", -20),
				(call_script, "script_change_troop_renown", "trp_player", -30),
			(try_end),
			(change_screen_return)
		], ".")
	]
	),

	("event_41", mnf_disable_all_keys|menu_text_color(0xff000000), "One of your soldiers succumbs to his wounds from a previous battle.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_41_1",
		[],
		"Take his kit and his gold. He was, afterall, just a soldier, and all he owns belongs to you.",
		[
			(call_script, "script_change_player_party_morale", -5),
			(call_script, "script_change_player_honor", -10),
			(call_script, "script_troop_add_gold", "trp_player", 150),
			(display_message, "@You get his meager belongings.", 0x00ff0000),
			(troop_add_item, "trp_player", "itm_sword_rusty_a", 1),
			(change_screen_return)
		], "."),

		("choice_41_2",
		[],
		"Give the soldiers belongings to his family.",
		[
			(call_script, "script_change_player_honor", 5),
			(call_script, "script_change_player_party_morale", 50),
			(change_screen_return)
		], "."),

		("choice_41_3",
		[],
		"Give the widow 550 coins.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 550),
				(troop_remove_gold, "trp_player", 550),
				(display_message, "@The widow is grateful.", 0x0033ccff),
				(call_script, "script_change_player_honor", 10),
				(call_script, "script_change_player_party_morale", 50),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_player_honor", -10),
				(call_script, "script_change_player_party_morale", -50),
			(try_end),
			(change_screen_return)
		], ".")
	]
	),

	("event_42", mnf_disable_all_keys|menu_text_color(0xff000000), "One of your new recruits dies from an illness. He carries both a seven pointed star, and a tattoo of R'hllors flames. No one knows what he preferred most.",
	"none",
	[
		(set_background_mesh, "mesh_pic_game_event_noble")
	],
	[
		("choice_42_1",
		[],
		"Burn him and donate 1000 coins to the Temple of the Lord of Light.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(display_message, "@Burn the soldiers corpse, honoring R'hllor.", 0x0033ccff),
				(call_script, "script_change_player_honor", 5),
				(call_script, "script_change_player_relation_with_faction", "fac_kingdom_8", 1),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_player_honor", -15),
				(call_script, "script_change_player_party_morale", -50),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_42_2",
		[],
		"Bury him and donate 1000 coins to the Starry Sept.",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(display_message, "@It was a magnificent funeral.", 0x0033ccff),
				(call_script, "script_change_player_honor", 1),
				(call_script, "script_change_player_relation_with_faction", "fac_kingdom_10", 1),
			(else_try),
				(display_message, "@You don't have enough gold. How embarassing!", 0x00ff0000),
				(call_script, "script_change_player_honor", -15),
				(call_script, "script_change_player_party_morale", -50),
			(try_end),
			(change_screen_return)
		], "."),

		("choice_42_3",
		[],
		"Just leave him lying there.",
		[
			(call_script, "script_change_player_honor", -5),
			(call_script, "script_change_player_party_morale", -50),
			(change_screen_return)
		], ".")
	]
	),

	("recruit_sellswords_braavos", mnf_disable_all_keys|menu_text_color(0xff000000), "The Free Cities have made heavy use of sellswords for centuries, to fight their endless wars in the Stepstones and the Disputed Lands. Many of the mercenary soldiers of Essos are organized into long-established sellsword companies, but many others gather together in small groups known as 'Lances'. These men can be found in all the Free Cities, but there is not an endless supply of them.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(eq, "$g_sellswords_braavos", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_braavos", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_braavos")
		], "."),

		("choice_1_2",
		[
			(eq, "$g_sellswords_braavos", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_braavos", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_braavos")
		], "."),

		("choice_1_3",
		[
			(eq, "$g_sellswords_braavos", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_braavos", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_braavos")
		], "."),

		("choice_1_4",
		[
			(eq, "$g_sellswords_braavos", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_braavos", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_braavos")
		], "."),

		("choice_1_5",
		[
			(eq, "$g_sellswords_braavos", 4),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_braavos", 5),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_braavos")
		], "."),

		("choice_1_6",
		[
			(eq, "$g_sellswords_braavos", 5),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_braavos", 6),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_braavos")
		], "."),

		("choice_1_7",
		[
			(eq, "$g_sellswords_essos_braavos", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_braavos", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_braavos")
		], "."),

		("choice_1_8",
		[
			(eq, "$g_sellswords_essos_braavos", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_braavos", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_braavos")
		], "."),

		("choice_1_9",
		[
			(eq, "$g_sellswords_essos_braavos", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_braavos", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_braavos")
		], "."),

		("choice_1_10",
		[
			(eq, "$g_sellswords_essos_braavos", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_braavos", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_braavos")
		], "."),

		("choice_1_5",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_sellswords_lorath", mnf_disable_all_keys|menu_text_color(0xff000000), "The Free Cities have made heavy use of sellswords for centuries, to fight their endless wars in the Stepstones and the Disputed Lands. Many of the mercenary soldiers of Essos are organized into long-established sellsword companies, but many others gather together in small groups known as 'Lances'. These men can be found in all the Free Cities, but there is not an endless supply of them.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(eq, "$g_sellswords_lorath", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_lorath", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lorath")
		], "."),

		("choice_1_2",
		[
			(eq, "$g_sellswords_lorath", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_lorath", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lorath")
		], "."),

		("choice_1_3",
		[
			(eq, "$g_sellswords_lorath", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_lorath", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lorath")
		], "."),

		("choice_1_4",
		[
			(eq, "$g_sellswords_lorath", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_lorath", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lorath")
		], "."),

		("choice_1_5",
		[
			(eq, "$g_sellswords_lorath", 4),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_lorath", 5),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lorath")
		], "."),

		("choice_1_6",
		[
			(eq, "$g_sellswords_lorath", 5),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_lorath", 6),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lorath")
		], "."),

		("choice_1_7",
		[
			(eq, "$g_sellswords_essos_lorath", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_lorath", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lorath")
		], "."),

		("choice_1_8",
		[
			(eq, "$g_sellswords_essos_lorath", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_lorath", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lorath")
		], "."),

		("choice_1_9",
		[
			(eq, "$g_sellswords_essos_lorath", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_lorath", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lorath")
		], "."),

		("choice_1_10",
		[
			(eq, "$g_sellswords_essos_lorath", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_lorath", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lorath")
		], "."),

		("choice_1_5",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_sellswords_pentos", mnf_disable_all_keys|menu_text_color(0xff000000), "The Free Cities have made heavy use of sellswords for centuries, to fight their endless wars in the Stepstones and the Disputed Lands. Many of the mercenary soldiers of Essos are organized into long-established sellsword companies, but many others gather together in small groups known as 'Lances'. These men can be found in all the Free Cities, but there is not an endless supply of them.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(eq, "$g_sellswords_pentos", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_pentos", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_pentos")
		], "."),

		("choice_1_2",
		[
			(eq, "$g_sellswords_pentos", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_pentos", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_pentos")
		], "."),

		("choice_1_3",
		[
			(eq, "$g_sellswords_pentos", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_pentos", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_pentos")
		], "."),

		("choice_1_4",
		[
			(eq, "$g_sellswords_pentos", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_pentos", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_pentos")
		], "."),

		("choice_1_5",
		[
			(eq, "$g_sellswords_pentos", 4),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_pentos", 5),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_pentos")
		], "."),

		("choice_1_6",
		[
			(eq, "$g_sellswords_pentos", 5),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_pentos", 6),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_pentos")
		], "."),

		("choice_1_7",
		[
			(eq, "$g_sellswords_essos_pentos", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_pentos", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_pentos")
		], "."),

		("choice_1_8",
		[
			(eq, "$g_sellswords_essos_pentos", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_pentos", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_pentos")
		], "."),

		("choice_1_9",
		[
			(eq, "$g_sellswords_essos_pentos", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_pentos", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_pentos")
		], "."),

		("choice_1_10",
		[
			(eq, "$g_sellswords_essos_pentos", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_pentos", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_pentos")
		], "."),

		("choice_1_5",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_sellswords_norvos", mnf_disable_all_keys|menu_text_color(0xff000000), "The Free Cities have made heavy use of sellswords for centuries, to fight their endless wars in the Stepstones and the Disputed Lands. Many of the mercenary soldiers of Essos are organized into long-established sellsword companies, but many others gather together in small groups known as 'Lances'. These men can be found in all the Free Cities, but there is not an endless supply of them.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(eq, "$g_sellswords_norvos", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_norvos", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_norvos")
		], "."),

		("choice_1_2",
		[
			(eq, "$g_sellswords_norvos", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_norvos", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_norvos")
		], "."),

		("choice_1_3",
		[
			(eq, "$g_sellswords_norvos", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_norvos", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_norvos")
		], "."),

		("choice_1_4",
		[
			(eq, "$g_sellswords_norvos", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_norvos", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_norvos")
		], "."),

		("choice_1_5",
		[
			(eq, "$g_sellswords_norvos", 4),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_norvos", 5),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_norvos")
		], "."),

		("choice_1_6",
		[
			(eq, "$g_sellswords_norvos", 5),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_norvos", 6),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_norvos")
		], "."),

		("choice_1_7",
		[
			(eq, "$g_sellswords_essos_norvos", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_norvos", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_norvos")
		], "."),

		("choice_1_8",
		[
			(eq, "$g_sellswords_essos_norvos", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_norvos", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_norvos")
		], "."),

		("choice_1_9",
		[
			(eq, "$g_sellswords_essos_norvos", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_norvos", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_norvos")
		], "."),

		("choice_1_10",
		[
			(eq, "$g_sellswords_essos_norvos", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_norvos", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_norvos")
		], "."),

		("choice_1_5",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_sellswords_qohor", mnf_disable_all_keys|menu_text_color(0xff000000), "The Free Cities have made heavy use of sellswords for centuries, to fight their endless wars in the Stepstones and the Disputed Lands. Many of the mercenary soldiers of Essos are organized into long-established sellsword companies, but many others gather together in small groups known as 'Lances'. These men can be found in all the Free Cities, but there is not an endless supply of them.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(eq, "$g_sellswords_qohor", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_qohor", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_qohor")
		], "."),

		("choice_1_2",
		[
			(eq, "$g_sellswords_qohor", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_qohor", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_qohor")
		], "."),

		("choice_1_3",
		[
			(eq, "$g_sellswords_qohor", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_qohor", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_qohor")
		], "."),

		("choice_1_4",
		[
			(eq, "$g_sellswords_qohor", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_qohor", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_qohor")
		], "."),

		("choice_1_5",
		[
			(eq, "$g_sellswords_qohor", 4),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_qohor", 5),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_qohor")
		], "."),

		("choice_1_6",
		[
			(eq, "$g_sellswords_qohor", 5),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_qohor", 6),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_qohor")
		], "."),

		("choice_1_7",
		[
			(eq, "$g_sellswords_essos_qohor", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_qohor", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_qohor")
		], "."),

		("choice_1_8",
		[
			(eq, "$g_sellswords_essos_qohor", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_qohor", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_qohor")
		], "."),

		("choice_1_9",
		[
			(eq, "$g_sellswords_essos_qohor", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_qohor", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_qohor")
		], "."),

		("choice_1_10",
		[
			(eq, "$g_sellswords_essos_qohor", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_qohor", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_qohor")
		], "."),

		("choice_1_5",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_sellswords_myr", mnf_disable_all_keys|menu_text_color(0xff000000), "The Free Cities have made heavy use of sellswords for centuries, to fight their endless wars in the Stepstones and the Disputed Lands. Many of the mercenary soldiers of Essos are organized into long-established sellsword companies, but many others gather together in small groups known as 'Lances'. These men can be found in all the Free Cities, but there is not an endless supply of them.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(eq, "$g_sellswords_myr", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_myr", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_myr")
		], "."),

		("choice_1_2",
		[
			(eq, "$g_sellswords_myr", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_myr", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_myr")
		], "."),

		("choice_1_3",
		[
			(eq, "$g_sellswords_myr", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_myr", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_myr")
		], "."),

		("choice_1_4",
		[
			(eq, "$g_sellswords_myr", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_myr", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_myr")
		], "."),

		("choice_1_5",
		[
			(eq, "$g_sellswords_myr", 4),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_myr", 5),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_myr")
		], "."),

		("choice_1_6",
		[
			(eq, "$g_sellswords_myr", 5),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_myr", 6),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_myr")
		], "."),

		("choice_1_7",
		[
			(eq, "$g_sellswords_essos_myr", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_myr", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_myr")
		], "."),

		("choice_1_8",
		[
			(eq, "$g_sellswords_essos_myr", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_myr", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_myr")
		], "."),

		("choice_1_9",
		[
			(eq, "$g_sellswords_essos_myr", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_myr", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_myr")
		], "."),

		("choice_1_10",
		[
			(eq, "$g_sellswords_essos_myr", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_myr", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_myr")
		], "."),

		("choice_1_5",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_sellswords_tyrosh", mnf_disable_all_keys|menu_text_color(0xff000000), "The Free Cities have made heavy use of sellswords for centuries, to fight their endless wars in the Stepstones and the Disputed Lands. Many of the mercenary soldiers of Essos are organized into long-established sellsword companies, but many others gather together in small groups known as 'Lances'. These men can be found in all the Free Cities, but there is not an endless supply of them.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(eq, "$g_sellswords_tyrosh", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_tyrosh", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_tyrosh")
		], "."),

		("choice_1_2",
		[
			(eq, "$g_sellswords_tyrosh", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_tyrosh", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_tyrosh")
		], "."),

		("choice_1_3",
		[
			(eq, "$g_sellswords_tyrosh", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_tyrosh", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_tyrosh")
		], "."),

		("choice_1_4",
		[
			(eq, "$g_sellswords_tyrosh", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_tyrosh", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_tyrosh")
		], "."),

		("choice_1_5",
		[
			(eq, "$g_sellswords_tyrosh", 4),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_tyrosh", 5),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_tyrosh")
		], "."),

		("choice_1_6",
		[
			(eq, "$g_sellswords_tyrosh", 5),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_tyrosh", 6),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_tyrosh")
		], "."),

		("choice_1_7",
		[
			(eq, "$g_sellswords_essos_tyrosh", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_tyrosh", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_tyrosh")
		], "."),

		("choice_1_8",
		[
			(eq, "$g_sellswords_essos_tyrosh", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_tyrosh", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_tyrosh")
		], "."),

		("choice_1_9",
		[
			(eq, "$g_sellswords_essos_tyrosh", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_tyrosh", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_tyrosh")
		], "."),

		("choice_1_10",
		[
			(eq, "$g_sellswords_essos_tyrosh", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_tyrosh", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_tyrosh")
		], "."),

		("choice_1_5",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_sellswords_lys", mnf_disable_all_keys|menu_text_color(0xff000000), "The Free Cities have made heavy use of sellswords for centuries, to fight their endless wars in the Stepstones and the Disputed Lands. Many of the mercenary soldiers of Essos are organized into long-established sellsword companies, but many others gather together in small groups known as 'Lances'. These men can be found in all the Free Cities, but there is not an endless supply of them.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(eq, "$g_sellswords_lys", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_lys", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lys")
		], "."),

		("choice_1_2",
		[
			(eq, "$g_sellswords_lys", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_lys", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lys")
		], "."),

		("choice_1_3",
		[
			(eq, "$g_sellswords_lys", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_lys", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lys")
		], "."),

		("choice_1_4",
		[
			(eq, "$g_sellswords_lys", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_lys", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lys")
		], "."),

		("choice_1_5",
		[
			(eq, "$g_sellswords_lys", 4),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_lys", 5),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lys")
		], "."),

		("choice_1_6",
		[
			(eq, "$g_sellswords_lys", 5),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_lys", 6),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lys")
		], "."),

		("choice_1_7",
		[
			(eq, "$g_sellswords_essos_lys", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_lys", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lys")
		], "."),

		("choice_1_8",
		[
			(eq, "$g_sellswords_essos_lys", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_lys", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lys")
		], "."),

		("choice_1_9",
		[
			(eq, "$g_sellswords_essos_lys", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_lys", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lys")
		], "."),

		("choice_1_10",
		[
			(eq, "$g_sellswords_essos_lys", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_lys", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_lys")
		], "."),

		("choice_1_5",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_sellswords_volantis", mnf_disable_all_keys|menu_text_color(0xff000000), "The Free Cities have made heavy use of sellswords for centuries, to fight their endless wars in the Stepstones and the Disputed Lands. Many of the mercenary soldiers of Essos are organized into long-established sellsword companies, but many others gather together in small groups known as 'Lances'. These men can be found in all the Free Cities, but there is not an endless supply of them.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(eq, "$g_sellswords_volantis", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_volantis", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_volantis")
		], "."),

		("choice_1_2",
		[
			(eq, "$g_sellswords_volantis", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_volantis", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_volantis")
		], "."),

		("choice_1_3",
		[
			(eq, "$g_sellswords_volantis", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_volantis", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_volantis")
		], "."),

		("choice_1_4",
		[
			(eq, "$g_sellswords_volantis", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_volantis", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_volantis")
		], "."),

		("choice_1_5",
		[
			(eq, "$g_sellswords_volantis", 4),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_volantis", 5),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_volantis")
		], "."),

		("choice_1_6",
		[
			(eq, "$g_sellswords_volantis", 5),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Infantry Lance (7500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 7500),
				(troop_remove_gold, "trp_player", 7500),
				(party_add_members, "p_main_party", "trp_lance_infantry_1", 3),
				(party_add_members, "p_main_party", "trp_lance_infantry_2", 4),
				(party_add_members, "p_main_party", "trp_lance_infantry_3", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_4", 5),
				(party_add_members, "p_main_party", "trp_lance_infantry_5", 3),
				(assign, "$g_sellswords_volantis", 6),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_volantis")
		], "."),

		("choice_1_7",
		[
			(eq, "$g_sellswords_essos_volantis", 0),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_volantis", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_volantis")
		], "."),

		("choice_1_8",
		[
			(eq, "$g_sellswords_essos_volantis", 1),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_volantis", 2),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_volantis")
		], "."),

		("choice_1_9",
		[
			(eq, "$g_sellswords_essos_volantis", 2),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_volantis", 3),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_volantis")
		], "."),

		("choice_1_10",
		[
			(eq, "$g_sellswords_essos_volantis", 3),
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 21)
		],
		"Recruit 1 Ranged Lance (6000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 6000),
				(troop_remove_gold, "trp_player", 6000),
				(party_add_members, "p_main_party", "trp_lance_archer_4", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_2", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_3", 5),
				(party_add_members, "p_main_party", "trp_lance_archer_1", 4),
				(party_add_members, "p_main_party", "trp_lance_archer_5", 3),
				(assign, "$g_sellswords_essos_volantis", 4),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_recruit_sellswords_volantis")
		], "."),

		("choice_1_5",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_white_harbor", mnf_disable_all_keys|menu_text_color(0xff000000), "Fishfood Yard is a cobbled square in the center of White Harbor. The yard is dominated by a large statue of a merman, called Old Fishfoot. In the alleys and in the market stalls, merchants sell fried cod, crab stews, pork pies and baked apples, coated with sugar and cinnamon. A brothel lies close to Old Fishfoot, and is often visited by the prosperous people of the city. The Castle Stair, a steep street illuminated by whale oil lamps leads from the Wolf's Den down to Fishfoot Yard, and here sellswords, knights and freeriders gather, looking for a liege, or atleast someone willing to take on their services for a fair price. A burly young knight introduces himself to you, offering the services of himself, and his own retinue of nine knights.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 10)
		],
		"Recruit 10 White Harbor Knights (3000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 3000),
				(troop_remove_gold, "trp_player", 3000),
				(party_add_members, "p_main_party", "trp_white_harbor_knight", 10),
				(assign, "$g_white_harbor", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_barrowton", mnf_disable_all_keys|menu_text_color(0xff000000), "Roddy's Street lies close to the eastern gate, where the road leads toward Goldgrass, the keep and seat of House Stout. The street is named after Lord Roderick Dustin, also known as Roddy the Ruin, who led the northern forces during the Targaryen civil war known as the Dance of the Dragons. Armorers, merchants and inns lie along the street, and sellswords from the Rills, the region west of Barrowton, are lined up against the shops. A rough-looking young man approaches you. Him and the nineteen lancers sworn to his service are looking for employment, and inquire whether you'd like to take them on.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 20)
		],
		"Recruit 20 Rill Lancers (3500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 3500),
				(troop_remove_gold, "trp_player", 3500),
				(party_add_members, "p_main_party", "trp_rill_lances", 20),
				(assign, "$g_barrowton", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_deepwood_motte", mnf_disable_all_keys|menu_text_color(0xff000000), "East and west of Deepwood Motte lies fields where the smallfolk grow oats and barley. Close to the castle lies a sheepfold where members of the northern mountain clans come to sell their sheeps, salted fish, dried nuts and seal furs. They're often accompanied by clan champions, big men wielding great two-handed swords, and always looking for a fight. A small caravan of fur merchants has recently arrived, and their guards are looking for further service. The leader of the men offers to join your service if you'll take on his four men as well.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Recruit 5 Clan Champions (300 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 300),
				(troop_remove_gold, "trp_player", 300),
				(party_add_members, "p_main_party", "trp_clan_champion", 5),
				(assign, "$g_deepwood_motte", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_raventree_hall", mnf_disable_all_keys|menu_text_color(0xff000000), "The godswood of Raventree Hall contains a dead, ancient and colossal weirwood, where ravens roost in great numbers every night. An arrow is stuck in the weirwood, shot by the same Billy Burley who slew the dragon Tessarion on the orders of Benjicot Blackwood. Archers from the surrounding villages often train in the courtyard, and hire themselves out as sellswords. A young, lean-looking, man approach you, offering to enter your service if you'll take on his four brothers as well.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Recruit 5 Raventree Hall Archers (300 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 300),
				(troop_remove_gold, "trp_player", 300),
				(party_add_members, "p_main_party", "trp_raventree_archer", 5),
				(assign, "$g_raventree_hall", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_stone_hedge", mnf_disable_all_keys|menu_text_color(0xff000000), "The village surrounding Stone Hedge is teeming with life, and contains a great market where the prized stallions of House Bracken are sold, traded and trained. Many knights make their home in the village, often showcasing their prowess to prospective horse buyers, and selling their swords to the highest bidder. Five knights offer to join your service, if you'll have them.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Recruit 5 Stone Hedge Knights (1600 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1600),
				(troop_remove_gold, "trp_player", 1600),
				(party_add_members, "p_main_party", "trp_stone_hedge_knight", 5),
				(assign, "$g_stone_hedge", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_crossing", mnf_disable_all_keys|menu_text_color(0xff000000), "The Freys of the Crossing have grown wealthy on the tolls they extract from travellers seeking to cross the Green Fork. The toll house is a large timbered building, where the servants stock the tools and supplies of the soldiers who train beneath the walls of the eastern castle, and where the toll collecters make their home. The Freys are a powerful house, and attrack many adventurers and sellswords, many of whom are willing to sell their sword to the highest bidder. Outside the toll house, a mean-looking man-at-arms offers his own, and his four sworn brothers, sword, if you'll have them.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 1)
		],
		"Recruit 5 Crossing Men-at-Arms (700 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 700),
				(troop_remove_gold, "trp_player", 700),
				(party_add_members, "p_main_party", "trp_crossing_spearman", 5),
				(assign, "$g_crossing", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_sarsfield", mnf_disable_all_keys|menu_text_color(0xff000000), "The Clinking Coin Inn is one of the most prosperous inns lying beside the River Road, which runs from Casterly Rock to the Inn at the Crossroads where it meets the Kingsroad. Members of House Sarsfield have been known to visit from time to time, as the whores are excellent, and the food better. The famed mounted archers of the surrounding lands can often be found enjoying the thick dark ale the innkeeper brews, and are always looking for someone to take them on as sellswords. Chatting with the innkeeper, you learn that a young knight is looking for a new master, along with his own retinue of four mounted archers.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Recruit 5 Mounted Sarsfield Archers (700 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 700),
				(troop_remove_gold, "trp_player", 700),
				(party_add_members, "p_main_party", "trp_sarsfield_archer", 5),
				(assign, "$g_sarsfield", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_banefort", mnf_disable_all_keys|menu_text_color(0xff000000), "The Woods surrounding Banefort are known to be haunted by the Hooded Man, the founder of House Banefort, and all his descendants, chief amongst them Morgon Banefort, whom people called 'The Necromancer'. The men inhabiting the woods carry greatswords, to protect them against the wights, and the ironborn, who often raid the shores. With the increased ironborn activity along the shores, only five men offer to join your service.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Recruit 5 Banefort Two-Handers (300 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 300),
				(troop_remove_gold, "trp_player", 300),
				(party_add_members, "p_main_party", "trp_banefort_two_hander", 5),
				(assign, "$g_banefort", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_casterly_rock", mnf_disable_all_keys|menu_text_color(0xff000000), "The Barracks form an entire sub-section of Casterly Rock, housing the garrison and household guard of House Lannister. Great sections are given over to storage rooms, filled with arms and armor. Men-at-arms fill the common area, many looking for hire. The Lannisters are not fond of soldiers leaving their service, but a man-at-arms leans close to you, telling you that he and his five friends will join you if you'll have them.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 6)
		],
		"Recruit 6 Casterly Rock Men-at-Arms (400 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 400),
				(troop_remove_gold, "trp_player", 400),
				(party_add_members, "p_main_party", "trp_casterly_rock_man_at_arms", 6),
				(assign, "$g_casterly_rock", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_lannisport", mnf_disable_all_keys|menu_text_color(0xff000000), "Lannisport is one of the great cities of Westeros, being smaller than King's Landing and Oldtown, but much larger than Gull Town and White Harbor. It's one of the main ports on the western side of the continent, and is well-known for the beautiful goldwork being wrought in the many smithies of the city. The harbor is bustling with activity, ships coming from all over Westeros and Essos to trade their furs, spices, wine and olive oil for gold and jewelry. The harbor is also home to a multitude of sellswords, many whom take service with House Lannister and the other westerland lords, but who will fight for the highest bidder. A lean serjeant with a scarred face informs you that him and his fourteen companions will join your service, if the price is right.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 15)
		],
		"Recruit 15 Lannisport Spearmen (1000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(party_add_members, "p_main_party", "trp_lannisport_spearman", 15),
				(assign, "$g_lannisport", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_runestone", mnf_disable_all_keys|menu_text_color(0xff000000), "Runestone is the seat of chivalry in the Vale, and the Royces have a long tradition of holding tourneys, and winning them. The tourney grounds at Runestone is often occupied by knights and squires competing against each other, training with sword, mace and lance, and trying to catch the eye of a lord, so that he may take on their services. A young squire offer to join your service, if you'll take his five friends as well.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 6)
		],
		"Recruit 6 Runestone Squires (1000 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1000),
				(troop_remove_gold, "trp_player", 1000),
				(party_add_members, "p_main_party", "trp_runestone_squire", 6),
				(assign, "$g_runestone", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_longbow_hall", mnf_disable_all_keys|menu_text_color(0xff000000), "The Hunters Gate is a great gate leading towards the mountain range west of Longbow Hall. The gate is sculpted with scenes of huntsmen, stags, boars, wolves and bears. Sellsword archers from the surrounding lands often gather around the gate, hoping to find hire with one of the knights or lords passing through Longbow Hall. A tall man approach you, offering to join your retinue with his seven sons.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 8)
		],
		"Recruit 8 Longbow Hall Archers (1200 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1200),
				(troop_remove_gold, "trp_player", 1200),
				(party_add_members, "p_main_party", "trp_longbow_hall_archer", 8),
				(assign, "$g_longbow_hall", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_nightsong", mnf_disable_all_keys|menu_text_color(0xff000000), "The marcher lords have a strong martial tradition, defending the Stormlands against dornish incursions for a thousand years. The Marching Field is where the Storm Kings of old, and later the Lord of Storm's End, would muster their forces when descending on either the dornish or the men of the Reach. House Caron, the Lords of the Marches, traditionally train their longbowmen on the field, and these men often sell their services. As you approach the field, you notice a mass of archers training with their bows, and they soon swarm around you, offering their services. Twenty men are available for hire right away, shouts what is obviously the leader of the bunch.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 20)
		],
		"Recruit 20 Marcher Longbowmen (2500 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 2500),
				(troop_remove_gold, "trp_player", 2500),
				(party_add_members, "p_main_party", "trp_marcher_longbowman", 20),
				(assign, "$g_nightsong", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_stonehelm", mnf_disable_all_keys|menu_text_color(0xff000000), "The Ten Bells is an inn outside Stonehelm, named for the great tower next to it, where the Swanns would ring their bells in the time when dornish incursions where common. The inn contains a large common hall, and several smaller rooms, furnished with myrish carpets and large featherbeds. Knights and squires often stay at the inn, on their way to or from the Weeping Town, and they often sell their sword. The innkeeper informs you that an old knight is currently lodging at the inn, along with his own band of ten knights, and that they're currently looking for hire.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 11)
		],
		"Recruit 11 Stonehelm Knights (2100 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 2100),
				(troop_remove_gold, "trp_player", 2100),
				(party_add_members, "p_main_party", "trp_stonehelm_knight", 11),
				(assign, "$g_stonehelm", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_oldtown", mnf_disable_all_keys|menu_text_color(0xff000000), "The Thieve's Market is the largest market in Oldtown. Despite the name, the merchants populating the market have a good reputation, all of them peddling high quality goods. The merchants sell spices, olives, wines from the Arbor and finely crafted woodharps, along with imported goods from Essos. The market also contains a large fountain where hedge knights congregate, looking for a master. Their armor is well-crafted, and many scoof as they see you. A young knight, however, approach you, offering the services of himself and his five men.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 6)
		],
		"Recruit 6 Oldtown Knights (1200 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 1200),
				(troop_remove_gold, "trp_player", 1200),
				(party_add_members, "p_main_party", "trp_oldtown_knight", 6),
				(assign, "$g_oldtown", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_arbor", mnf_disable_all_keys|menu_text_color(0xff000000), "The isle of the Arbor is surrounded by several smaller islands, Stonecrab Cay amongst them, all excellent sites for shipbuilding and trade. The towns of Ryamsport, Vinetown and Starfish Harbor all produce a surplus of young men who take hire on ships as sailors, but who will join an armed force if the pay is good. Poorly armed, they're excellent at close quarters combat, owing to their experience fighting pirates. The master of the harbor informs you that twenty sailors are currently looking for hire.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 20)
		],
		"Recruit 20 Sailors (400 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 400),
				(troop_remove_gold, "trp_player", 400),
				(party_add_members, "p_main_party", "trp_sailor", 20),
				(assign, "$g_arbor", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_skyreach", mnf_disable_all_keys|menu_text_color(0xff000000), "The Fowlers of Skyreach are the most prominent of the houses guarding the Prince's Pass, and the Hawk Gate faces directly towards the path that leads from both the Stormlands and the Reach into Dorne. During the years, Skyreach has withstood many a siege, and the Hawk Gate is decorated with the weapons of the fallen men who have tried to take the castle, all broken and hammered to the gate itself. The smallfolk living in the Prince's Pass often harass enemies descending on Dorne, and in times of peace sell themselves as caravan guards and skirmishers. Outside the walls of Skyreach, a small camp has been set up around a large rock, and one of the children jumping on, and teasing, a large snake informs you that five men are looking for hire.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 5)
		],
		"Recruit 5 Skyreach Skirmishers (200 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 200),
				(troop_remove_gold, "trp_player", 200),
				(party_add_members, "p_main_party", "trp_skyreach_skirmisher", 5),
				(assign, "$g_skyreach", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_driftmark", mnf_disable_all_keys|menu_text_color(0xff000000), "The town of Spicetown was once home to a thriving market and the principal town of the isle of Driftmark. But during the Dance of the Dragons the town was sacked by a fleet from the Kingdom of the Three Daughters, its people butchered and its buildings burned, and it was never rebuilt. However, the ruins provide shelter against the storms blowing across Blackwater Bay, and is often used as a shelter for ships. They also provide a place for the levies of House Velaryon, and sellswords from across the Narrow Sea, to train and live in while they wait to be shipped out, and many of the men camping there will sell their sword to the highest bidder. As you approach the ruins, an older man with indigo eyes, and shoulder length silver hair, offer to join your retinue along with his ten companions.",
	"none",
	[],
	[
		("choice_1_1",
		[
			(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
			(ge, ":free_companions_capacity_main_party", 1)
		],
		"Recruit 11 Driftmark Spearmen (800 coins).",
		[
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(ge, ":troop_gold_player", 800),
				(troop_remove_gold, "trp_player", 800),
				(party_add_members, "p_main_party", "trp_driftmark_spearman", 11),
				(assign, "$g_driftmark", 1),
			(else_try),
				(display_message, "@You can't afford that.", 0x00ff0000),
			(try_end),
			(jump_to_menu, "mnu_town")
		], "."),

		("choice_1_2",
		[],
		"Leave.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("recruit_nobles", 0, "{s18}",
	"none",
	[
		(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
		(faction_get_slot, ":faction_of_party_current_town_quick_battle_tier_1_cavalry", ":faction_of_party_current_town", slot_faction_quick_battle_tier_1_cavalry),
		(party_get_slot, ":current_town_center_volunteer_troop_amount", "$current_town", slot_center_volunteer_troop_amount),
		(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(store_div, ":value", ":troop_gold_player", 800),
		(assign, ":var_7", ":free_companions_capacity_main_party"),
		(val_min, ":var_7", ":value"),
		(try_begin),
			(gt, ":var_7", 0),
			(val_min, ":current_town_center_volunteer_troop_amount", ":var_7"),
		(try_end),
		(assign, reg5, ":current_town_center_volunteer_troop_amount"),
		(assign, reg7, 0),
		(try_begin),
			(gt, ":current_town_center_volunteer_troop_amount", ":value"),
			(assign, reg7, 1),
		(try_end),
		(try_begin),
			(eq, ":current_town_center_volunteer_troop_amount", 0),
			(str_store_string, 18, "@No one here seems to be willing to join your party."),
		(else_try),
			(store_mul, reg6, ":current_town_center_volunteer_troop_amount", 800),
			(str_store_troop_name_by_count, 3, ":faction_of_party_current_town_quick_battle_tier_1_cavalry", ":current_town_center_volunteer_troop_amount"),
			(try_begin),
				(eq, reg5, 1),
				(str_store_string, 18, "@One {s3} volunteers to follow you."),
			(else_try),
				(str_store_string, 18, "@{reg5} {s3} volunteer to follow you."),
			(try_end),
			(set_background_mesh, "mesh_pic_recruits"),
		(try_end)
	],
	[
		("continue_not_enough_gold",
		[
			(eq, reg7, 1)
		],
		"I don't have enough money...",
		[
			(jump_to_menu, "mnu_town")
		], "."),

		("continue",
		[
			(eq, reg7, 0),
			(eq, reg5, 0)
		],
		"Continue...",
		[
			(party_set_slot, "$current_town", slot_center_volunteer_troop_amount, -1),
			(jump_to_menu, "mnu_town")
		], "."),

		("recruit_them",
		[
			(eq, reg7, 0),
			(gt, reg5, 0)
		],
		"Recruit them ({reg6} coins).",
		[
			(call_script, "script_town_castle_recruit_nobles_recruit"),
			(jump_to_menu, "mnu_town")
		], "."),

		("forget_it",
		[
			(eq, reg7, 0),
			(gt, reg5, 0)
		],
		"Forget it.",
		[
			(jump_to_menu, "mnu_town")
		], ".")
	]
	),

	("world_map_soldier", 0, "What do you need to do soldier?",
	"none",
	[
		(set_background_mesh, "mesh_pic_soldier_world_map"),
		(troop_get_slot, "$enlisted_party", "$enlisted_lord", slot_troop_leaded_party)
	],
	[
		("join_commander_battle",
		[
			(party_get_battle_opponent, ":battle_opponent_l_enlisted_party", "$enlisted_party"),
			(gt, ":battle_opponent_l_enlisted_party", 0)
		],
		"Follow the commander into battle.",
		[
			(party_set_slot, "p_freelancer_party_backup", slot_party_last_in_combat, 1),
			(try_begin),
				(neg|troop_is_guarantee_horse, "$player_cur_troop"),
				(troop_get_inventory_slot, ":inventory_slot_player_8", "trp_player", 8),
				(gt, ":inventory_slot_player_8", 0),
				(troop_get_inventory_slot_modifier, ":inventory_slot_modifier_player_8", "trp_player", 8),
				(set_show_messages, 0),
				(troop_add_item, "trp_player", ":inventory_slot_player_8", ":inventory_slot_modifier_player_8"),
				(troop_set_inventory_slot, "trp_player", 8, -1),
				(set_show_messages, 1),
			(try_end),
			(start_encounter, "$enlisted_party"),
			(change_screen_map)
		], "."),

		("enter_town",
		[
			(party_get_attached_to, reg5, "$enlisted_party"),
			(gt, reg5, 0),
			(this_or_next|party_slot_eq, reg5, slot_party_type, 3),
			(party_slot_eq, reg5, slot_party_type, 2)
		],
		"Enter stationed town.",
		[
			(start_encounter, reg5),
			(change_screen_map)
		], "."),

		("commander",
		[
			(party_get_battle_opponent, ":battle_opponent_l_enlisted_party", "$enlisted_party"),
			(lt, ":battle_opponent_l_enlisted_party", 0)
		],
		"Request audience with your commander.",
		[
			(jump_to_menu, "mnu_commander_aud")
		], "."),

		("revolt",
		[
			(party_get_attached_to, reg0, "$enlisted_party"),
			(lt, reg0, 0)
		],
		"Revolt against the commander!",
		[
			(jump_to_menu, "mnu_ask_revolt")
		], "."),

		("revolt_disabled",
		[
			(party_get_attached_to, reg0, "$enlisted_party"),
			(gt, reg0, 0),
			(disable_menu_option)
		],
		"You cannot revolt now. Bide your time.",
		[], "."),

		("desert",
		[],
		"Desert the army.(keep equipment but lose relations)",
		[
			(jump_to_menu, "mnu_ask_desert")
		], "."),

		("return_to_duty",
		[
			(party_get_battle_opponent, ":battle_opponent_l_enlisted_party", "$enlisted_party"),
			(this_or_next|lt, ":battle_opponent_l_enlisted_party", 0),
			(troop_is_wounded, "trp_player")
		],
		"Return to duty.",
		[
			(change_screen_map),
			(assign, "$g_infinite_camping", 1),
			(rest_for_hours_interactive, 8760, 5, 1)
		], ".")
	]
	),

	("commander_aud", 0, "Your request for a meeting is relayed to your commander's camp, and finally {s6} appears from his tent to speak with you.",
	"none",
	[
		(set_background_mesh, "mesh_pic_soldier_world_map"),
		(str_store_troop_name, 6, "$enlisted_lord")
	],
	[
		("continue",
		[],
		"Continue...",
		[
			(try_begin),
				(party_get_attached_to, reg0, "$enlisted_party"),
				(lt, reg0, 0),
				(start_encounter, "$enlisted_party"),
				(change_screen_map),
			(else_try),
				(assign, "$g_encountered_party", "$enlisted_party"),
				(store_faction_of_party, "$g_encountered_party_faction", "$g_encountered_party"),
				(store_relation, "$g_encountered_party_relation", "$g_encountered_party_faction", "fac_player_faction"),
				(party_get_slot, "$g_encountered_party_type", "$g_encountered_party", slot_party_type),
				(party_get_template_id, "$g_encountered_party_template", "$g_encountered_party"),
				(assign, "$talk_context", 2),
				(call_script, "script_setup_party_meeting", "$g_encountered_party"),
			(try_end)
		], "."),

		("reject_talk_lord",
		[],
		"No, nevermind.",
		[
			(change_screen_map)
		], ".")
	]
	),

	("ask_revolt", 0, "Are you sure you want to revolt?",
	"none",
	[
		(set_background_mesh, "mesh_pic_soldier_rebel"),
		(str_store_troop_name, 6, "$enlisted_lord")
	],
	[
		("confirm_revolt",
		[],
		"Yes, {s6} will be the death of us all, it is time to act!",
		[
			(jump_to_menu, "mnu_revolt")
		], "."),

		("reject_revolt",
		[],
		"No, I am loyal to {s6}.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("revolt", 0, "Do you want to release the prisoners to help your men?",
	"none",
	[
		(set_background_mesh, "mesh_pic_soldier_rebel"),
		(assign, "$cant_leave_encounter", 1),
		(call_script, "script_freelancer_event_player_revolts")
	],
	[
		("revolt_prisoners",
		[],
		"Yes, I will take the risk for a greater advantage.",
		[
			(set_spawn_radius, 0),
			(spawn_around_party, "$enlisted_party", "pt_deserters"),
			(assign, ":var_1", reg0),
			(quest_set_slot, "qst_freelancer_revolt", slot_quest_target_party, ":var_1"),
			(party_get_num_prisoner_stacks, ":num_prisoner_stacks_l_enlisted_party", "$enlisted_party"),
			(try_for_range, ":number", 0, ":num_prisoner_stacks_l_enlisted_party"),
				(party_prisoner_stack_get_troop_id, ":party_prisoner_stack_troop_id_enlisted_party_number", "$enlisted_party", ":number"),
				(ge, ":party_prisoner_stack_troop_id_enlisted_party_number", 1),
				(party_prisoner_stack_get_size, ":party_prisoner_stack_size_enlisted_party_number", "$enlisted_party", ":number"),
				(party_remove_prisoners, "$enlisted_party", ":party_prisoner_stack_troop_id_enlisted_party_number", ":party_prisoner_stack_size_enlisted_party_number"),
				(party_add_members, ":var_1", ":party_prisoner_stack_troop_id_enlisted_party_number", ":party_prisoner_stack_size_enlisted_party_number"),
			(try_end),
			(party_attach_to_party, ":var_1", "p_main_party"),
			(start_encounter, "$enlisted_party"),
			(change_screen_map)
		], "."),

		("revolt_no_prisoners",
		[],
		"No, I don't trust prisoners.",
		[
			(start_encounter, "$enlisted_party"),
			(change_screen_map)
		], ".")
	]
	),

	("ask_desert", 0, "Do you want to desert?",
	"none",
	[
		(set_background_mesh, "mesh_pic_soldier_desert")
	],
	[
		("confirm_desert",
		[],
		"Yes, this is pointless.",
		[
			(jump_to_menu, "mnu_desert")
		], "."),

		("reject_desert",
		[],
		"No, I am loyal to my commander.",
		[
			(change_screen_return)
		], ".")
	]
	),

	("desert", 0, "While in the army you've made some good friends. Some could possibly follow you.",
	"none",
	[
		(set_background_mesh, "mesh_pic_soldier_desert"),
		(call_script, "script_freelancer_detach_party"),
		(call_script, "script_freelancer_event_player_deserts")
	],
	[
		("desert_party",
		[],
		"Try to convince them to follow you.",
		[
			(store_random_in_range, ":random_in_range_0_4", 0, 4),
			(try_begin),
				(eq, ":random_in_range_0_4", 0),
				(assign, "$g_encountered_party", "$enlisted_party"),
				(jump_to_menu, "mnu_captivity_start_wilderness"),
			(else_try),
				(call_script, "script_get_desert_troops"),
				(call_script, "script_party_restore"),
				(call_script, "script_set_parties_around_player_ignore_player", 2, 4),
			(try_end),
			(change_screen_map),
			(display_message, "@You have deserted, and are now wanted!")
		], "."),

		("desert_alone",
		[],
		"No, I have a better chance alone.",
		[
			(store_random_in_range, ":random_in_range_0_10", 0, 10),
			(try_begin),
				(eq, ":random_in_range_0_10", 0),
				(assign, "$g_encountered_party", "$enlisted_party"),
				(jump_to_menu, "mnu_captivity_start_wilderness"),
			(else_try),
				(call_script, "script_party_restore"),
				(call_script, "script_set_parties_around_player_ignore_player", 2, 4),
			(try_end),
			(change_screen_map),
			(display_message, "@You have deserted, and are now wanted!")
		], ".")
	]
	),

	("upgrade_path", 0, "In recognition of your excellent service, your commander is considering you for a promotion.",
	"none",
	[
		(set_background_mesh, "mesh_pic_soldier_world_map"),
		(assign, reg1, 0),
		(assign, reg2, 0)
	],
	[
		("upgrade_path_1",
		[
			(troop_get_upgrade_troop, ":upgrade_troop_player_cur_troop_0", "$player_cur_troop", 0),
			(ge, ":upgrade_troop_player_cur_troop_0", 0),
			(assign, reg1, 1),
			(try_begin),
				(call_script, "script_cf_freelancer_player_can_upgrade", ":upgrade_troop_player_cur_troop_0"),
				(assign, reg1, 0),
			(else_try),
				(disable_menu_option),
			(try_end),
			(str_store_troop_name, 66, ":upgrade_troop_player_cur_troop_0")
		],
		"{s66}{s0}.",
		[
			(call_script, "script_freelancer_unequip_troop", "$player_cur_troop"),
			(troop_get_upgrade_troop, "$player_cur_troop", "$player_cur_troop", 0),
			(store_faction_of_troop, ":faction_of_troop_enlisted_lord", "$enlisted_lord"),
			(faction_set_slot, ":faction_of_troop_enlisted_lord", 101, "$player_cur_troop"),
			(call_script, "script_freelancer_equip_troop", "$player_cur_troop"),
			(str_store_troop_name, 5, "$player_cur_troop"),
			(str_store_troop_name_link, 13, "$enlisted_lord"),
			(str_store_faction_name_link, 14, ":faction_of_troop_enlisted_lord"),
			(str_store_string, 1, "@Enlisted as a {s5} in the party of {s13} of {s14}."),
			(add_troop_note_from_sreg, "trp_player", 3, 1, 0),
			(str_store_string, 5, "@Current rank: {s5}"),
			(add_quest_note_from_sreg, "qst_freelancer_enlisted", 3, 5, 1),
			(troop_get_xp, reg0, "trp_player"),
			(quest_set_slot, "qst_freelancer_enlisted", slot_quest_object_state, reg0),
			(call_script, "script_freelancer_get_upgrade_xp", "$player_cur_troop"),
			(quest_set_slot, "qst_freelancer_enlisted", slot_quest_target_dna, reg0),
			(change_screen_map)
		], "."),

		("upgrade_path_2",
		[
			(troop_get_upgrade_troop, ":upgrade_troop_player_cur_troop_1", "$player_cur_troop", 1),
			(ge, ":upgrade_troop_player_cur_troop_1", 1),
			(assign, reg2, 1),
			(str_clear, 65),
			(try_begin),
				(call_script, "script_cf_freelancer_player_can_upgrade", ":upgrade_troop_player_cur_troop_1"),
				(assign, reg2, 0),
			(else_try),
				(disable_menu_option),
			(try_end),
			(str_store_troop_name, 67, ":upgrade_troop_player_cur_troop_1")
		],
		"{s67}{s0}.",
		[
			(call_script, "script_freelancer_unequip_troop", "$player_cur_troop"),
			(troop_get_upgrade_troop, "$player_cur_troop", "$player_cur_troop", 1),
			(store_faction_of_troop, ":faction_of_troop_enlisted_lord", "$enlisted_lord"),
			(faction_set_slot, ":faction_of_troop_enlisted_lord", 101, "$player_cur_troop"),
			(call_script, "script_freelancer_equip_troop", "$player_cur_troop"),
			(str_store_troop_name, 5, "$player_cur_troop"),
			(str_store_troop_name_link, 13, "$enlisted_lord"),
			(str_store_faction_name_link, 14, ":faction_of_troop_enlisted_lord"),
			(str_store_string, 1, "@Enlisted as a {s5} in the party of {s13} of {s14}."),
			(add_troop_note_from_sreg, "trp_player", 3, 1, 0),
			(str_store_string, 5, "@Current rank: {s5}"),
			(add_quest_note_from_sreg, "qst_freelancer_enlisted", 3, 5, 1),
			(troop_get_xp, reg0, "trp_player"),
			(quest_set_slot, "qst_freelancer_enlisted", slot_quest_object_state, reg0),
			(call_script, "script_freelancer_get_upgrade_xp", "$player_cur_troop"),
			(quest_set_slot, "qst_freelancer_enlisted", slot_quest_target_dna, reg0),
			(change_screen_map)
		], "."),

		("upgrade_wait",
		[
			(this_or_next|eq, reg1, 1),
			(eq, reg2, 1)
		],
		"Wait until next week.",
		[
			(change_screen_map)
		], ".")
	]
	),

	("lco_presentation", 0, "Hidden Text",
	"none",
	[
		(jump_to_menu, "mnu_lco_presentation"),
		(try_begin),
			(eq, "$g_lco_page", 2),
			(start_presentation, "prsnt_equipment_overview"),
		(else_try),
			(start_presentation, "prsnt_companions_overview"),
		(try_end)
	],
	[
		("lco_go_back",
		[],
		"{!}Return",
		[], ".")
	]
	),

	("lco_view_character", 0, "Hidden Text",
	"none",
	[
		(modify_visitors_at_site, "scn_conversation_scene"),
		(reset_visitors),
		(set_visitor, 0, "trp_player"),
		(set_visitor, 17, "$g_lco_target"),
		(set_jump_mission, "mt_conversation_encounter"),
		(jump_to_scene, "scn_conversation_scene"),
		(change_screen_map_conversation, "$g_lco_target")
	],
	[
		("lco_go_back",
		[],
		"{!}Return",
		[], ".")
	]
	),

	("lco_auto_return", 0, "Hidden Text",
	"none",
	[
		(change_screen_return)
	],
	[
		("lco_go_back",
		[],
		"{!}Return",
		[], ".")
	]
	),

]