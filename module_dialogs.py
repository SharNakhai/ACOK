# -*- coding: cp1254 -*-
from header_common import *
from header_dialogs import *
from header_operations import *
from header_parties import *
from header_item_modifiers import *
from header_skills import *
from header_triggers import *
from ID_troops import *
from ID_party_templates import *

from module_constants import *


####################################################################################################################
# During a dialog, the dialog lines are scanned from top to bottom.
# If the dialog-line is spoken by the player, all the matching lines are displayed for the player to pick from.
# If the dialog-line is spoken by another, the first (top-most) matching line is selected.
#
#  Each dialog line contains the following fields:
# 1) Dialogue partner: This should match the person player is talking to.
#    Usually this is a troop-id.
#    You can also use a party-template-id by appending '|party_tpl' to this field.
#    Use the constant 'anyone' if you'd like the line to match anybody.
#    Appending '|plyr' to this field means that the actual line is spoken by the player
#    Appending '|other(troop_id)' means that this line is spoken by a third person on the scene.
#       (You must make sure that this third person is present on the scene)
#
# 2) Starting dialog-state:
#    During a dialog there's always an active Dialog-state.
#    A dialog-line's starting dialog state must be the same as the active dialog state, for the line to be a possible candidate.
#    If the dialog is started by meeting a party on the map, initially, the active dialog state is "start"
#    If the dialog is started by speaking to an NPC in a town, initially, the active dialog state is "start"
#    If the dialog is started by helping a party defeat another party, initially, the active dialog state is "party_relieved"
#    If the dialog is started by liberating a prisoner, initially, the active dialog state is "prisoner_liberated"
#    If the dialog is started by defeating a party led by a hero, initially, the active dialog state is "enemy_defeated"
#    If the dialog is started by a trigger, initially, the active dialog state is "event_triggered"
# 3) Conditions block (list): This must be a valid operation block. See header_operations.py for reference.  
# 4) Dialog Text (string):
# 5) Ending dialog-state:
#    If a dialog line is picked, the active dialog-state will become the picked line's ending dialog-state.
# 6) Consequences block (list): This must be a valid operation block. See header_operations.py for reference.
# 7) Voice-over (string): sound filename for the voice over. Leave here empty for no voice over
####################################################################################################################

dialogs = [
	[anyone, "start",
	[
		(eq, "$g_lco_operation", 2)
	],
	"Here you are.", "lco_conversation_end",
	[
		(change_screen_view_character)
	]],

	[anyone, "start",
	[
		(store_conversation_troop, "$g_talk_troop"),
		(store_conversation_agent, "$g_talk_agent"),
		(store_faction_of_troop, "$g_talk_troop_faction", "$g_talk_troop"),
		(call_script, "script_troop_get_player_relation", "$g_talk_troop"),
		(assign, "$g_talk_troop_relation", reg0),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(assign, "$g_talk_troop_effective_relation", "$g_talk_troop_relation"),
		(val_add, "$g_talk_troop_effective_relation", ":skill_level_persuasion_player"),
		(try_begin),
			(gt, "$g_talk_troop_effective_relation", 0),
			(store_add, ":value", 10, ":skill_level_persuasion_player"),
			(val_mul, "$g_talk_troop_effective_relation", ":value"),
			(val_div, "$g_talk_troop_effective_relation", 10),
		(else_try),
			(lt, "$g_talk_troop_effective_relation", 0),
			(store_sub, ":value", 20, ":skill_level_persuasion_player"),
			(val_mul, "$g_talk_troop_effective_relation", ":value"),
			(val_div, "$g_talk_troop_effective_relation", 20),
		(try_end),
		(val_clamp, "$g_talk_troop_effective_relation", -100, 101),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg3, "$g_talk_troop_effective_relation"),
			(display_message, "str_test_effective_relation_=_reg3"),
		(try_end),
		(try_begin),
			(this_or_next|is_between, "$g_talk_troop", "trp_village_1_elder", "trp_merchants_end"),
			(is_between, "$g_talk_troop", "trp_town_1_mayor", "trp_village_1_elder"),
			(party_get_slot, "$g_talk_troop_relation", "$current_town", slot_center_player_relation),
		(try_end),
		(store_relation, "$g_talk_troop_faction_relation", "$g_talk_troop_faction", "fac_player_faction"),
		(assign, "$g_talk_troop_party", "$g_encountered_party"),
		(try_begin),
			(troop_slot_ge, "$g_talk_troop", 10, 1),
			(troop_get_slot, "$g_talk_troop_party", "$g_talk_troop", slot_troop_leaded_party),
		(try_end),
		(store_current_hours, "$g_current_hours"),
		(troop_get_slot, "$g_talk_troop_last_talk_time", "$g_talk_troop", slot_troop_last_talk_time),
		(troop_set_slot, "$g_talk_troop", slot_troop_last_talk_time, "$g_current_hours"),
		(store_sub, "$g_time_since_last_talk", "$g_current_hours", "$g_talk_troop_last_talk_time"),
		(troop_get_slot, "$g_talk_troop_met", "$g_talk_troop", slot_troop_met),
		(val_min, "$g_talk_troop_met", 1),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_troop_met, 0),
			(troop_set_slot, "$g_talk_troop", slot_troop_met, 1),
			(try_begin),
				(is_between, "$g_talk_troop", "trp_knight_1_1_wife", "trp_heroes_end"),
			(try_end),
		(try_end),
		(try_begin),
			(try_begin),
				(ge, "$g_dplmc_terrain_advantage", 0),
				(assign, ":value_2", -1),
				(try_begin),
					(encountered_party_is_attacker),
					(call_script, "script_dplmc_get_terrain_code_for_battle", "$g_encountered_party", "p_main_party"),
					(assign, ":value_2", reg0),
				(else_try),
					(call_script, "script_dplmc_get_terrain_code_for_battle", "p_main_party", "$g_encountered_party"),
					(assign, ":value_2", reg0),
				(try_end),
				(call_script, "script_dplmc_party_calculate_strength_in_terrain", "p_collective_enemy", ":value_2", 0, 1),
				(assign, "$g_enemy_strength", reg0),
				(call_script, "script_dplmc_party_calculate_strength_in_terrain", "p_main_party", ":value_2", 0, 1),
				(assign, "$g_ally_strength", reg0),
			(else_try),
				(call_script, "script_party_calculate_strength", "p_collective_enemy", 0),
				(assign, "$g_enemy_strength", reg0),
				(call_script, "script_party_calculate_strength", "p_main_party", 0),
				(assign, "$g_ally_strength", reg0),
			(try_end),
			(store_mul, "$g_strength_ratio", "$g_ally_strength", 100),
			(assign, ":var_4", "$g_enemy_strength"),
			(val_max, ":var_4", 1),
			(val_div, "$g_strength_ratio", ":var_4"),
		(try_end),
		(assign, "$g_comment_found", 0),
		(assign, "$g_comment_has_rejoinder", 0),
		(assign, "$g_romantic_comment_made", 0),
		(assign, "$skip_lord_assumes_argument", 0),
		(assign, "$bypass_female_vassal_explanation", 0),
		(assign, "$g_done_wedding_comment", 0),
		(try_begin),
			(troop_is_hero, "$g_talk_troop"),
			(talk_info_show, 1),
			(call_script, "script_setup_talk_info"),
		(try_end),
		(assign, "$g_last_comment_copied_to_s42", 0),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
			(call_script, "script_get_relevant_comment_to_s42"),
			(assign, "$g_comment_found", reg0),
		(try_end),
		(assign, reg65, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$g_talk_troop"),
			(assign, reg65, 1),
		(try_end),
		(try_begin),
			(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
			(str_store_string, 64, "@{reg65?my Lady:my Lord}"),
			(str_store_string, 65, "@{reg65?my Lady:my Lord}"),
			(str_store_string, 66, "@{reg65?My Lady:My Lord}"),
			(str_store_string, 67, "@{reg65?My Lady:My Lord}"),
		(else_try),
			(str_store_string, 64, "@{reg65?madame:sir}"),
			(str_store_string, 65, "@{reg65?madame:sir}"),
			(str_store_string, 66, "@{reg65?Madame:Sir}"),
			(str_store_string, 67, "@{reg65?Madame:Sir}"),
		(try_end),
		(try_begin),
			(gt, "$cheat_mode", 0),
			(assign, reg4, "$talk_context"),
			(display_message, "@{!}DEBUG -- Talk context: {reg4}"),
		(try_end),
		(try_begin),
			(gt, "$cheat_mode", 0),
			(assign, reg4, "$g_time_since_last_talk"),
			(display_message, "@{!}DEBUG -- Time since last talk: {reg4}"),
		(try_end),
		(try_begin),
			(eq, "$cheat_mode", 0),
			(store_partner_quest, ":partner_quest"),
			(ge, ":partner_quest", 0),
			(str_store_quest_name, 4, ":partner_quest"),
		(try_end),
		(eq, 1, 0)
	],
	"{!}Warning: This line is never displayed. It is just for storing conversation variables.", "close_window",
	[]],

	[anyone, "member_chat",
	[
		(store_conversation_troop, "$g_talk_troop"),
		(try_begin),
			(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
			(talk_info_show, 1),
			(call_script, "script_setup_talk_info_companions"),
		(else_try),
			(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
			(talk_info_show, 1),
			(call_script, "script_setup_talk_info"),
		(try_end),
		(assign, reg65, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$g_talk_troop"),
			(assign, reg65, 1),
		(try_end),
		(try_begin),
			(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
			(str_store_string, 64, "@{reg65?my Lady:my Lord}"),
			(str_store_string, 65, "@{reg65?my Lady:my Lord}"),
			(str_store_string, 66, "@{reg65?My Lady:My Lord}"),
		(else_try),
			(str_store_string, 64, "@{reg65?madame:sir}"),
			(str_store_string, 65, "@{reg65?madame:sir}"),
			(str_store_string, 66, "@{reg65?Madame:Sir}"),
		(try_end),
		(store_current_hours, "$g_current_hours"),
		(troop_set_slot, "$g_talk_troop", slot_troop_last_talk_time, "$g_current_hours"),
		(eq, 1, 0)
	],
	"{!}Warning: This line is never displayed. It is just for storing conversation variables.", "close_window",
	[]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$g_talk_troop"),
		(try_begin),
			(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
			(talk_info_show, 1),
			(call_script, "script_setup_talk_info_companions"),
		(try_end),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$g_talk_troop"),
			(assign, reg65, 1),
		(else_try),
			(assign, reg65, 0),
		(try_end),
		(try_begin),
			(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
			(str_store_string, 64, "@{reg65?my Lady:my Lord}"),
			(str_store_string, 65, "@{reg65?my Lady:my Lord}"),
			(str_store_string, 66, "@{reg65?My Lady:My Lord}"),
		(else_try),
			(str_store_string, 64, "@{reg65?madame:sir}"),
			(str_store_string, 65, "@{reg65?madame:sir}"),
			(str_store_string, 66, "@{reg65?Madame:Sir}"),
		(try_end),
		(eq, 1, 0)
	],
	"{!}Warning: This line is never displayed. It is just for storing conversation variables.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 14),
		(is_between, "$g_talk_troop", "trp_swadian_town_walker_m_average", "trp_tournament_master")
	],
	"...", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 14),
		(is_between, "$g_talk_troop", "trp_musican_male", "trp_musicans_end")
	],
	"I'm trying to make music here!", "close_window",
	[]],

	[anyone, "event_triggered",
	[
		(eq, "$talk_context", 20),
		(assign, ":var_1", 0),
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(assign, ":value_2", "trp_heroes_end"),
		(try_for_range, ":troop", "trp_npc1", ":value_2"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(neq, "trp_player", ":troop"),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(this_or_next|eq, ":faction_of_troop_troop", ":value"),
			(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
			(val_add, ":var_1", 1),
			(assign, ":value_2", 0),
		(try_end),
		(try_begin),
			(gt, ":var_1", 0),
			(str_store_string, 2, "str_do_you_wish_to_award_it_to_one_of_your_vassals"),
		(else_try),
			(str_store_string, 2, "str_who_do_you_wish_to_give_it_to"),
		(try_end),
		(str_store_party_name, 1, "$g_center_taken_by_player_faction"),
		(str_store_string, 5, "str_sire_my_lady_we_have_taken_s1_s2")
	],
	"{!}{s5}", "award_fief_to_vassal",
	[]],

	[anyone|plyr, "award_fief_to_vassal",
	[
		(is_between, "$g_player_court", "p_town_1", "p_salt_mine"),
		(store_faction_of_party, ":faction_of_party_g_player_court", "$g_player_court"),
		(assign, ":value", 0),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|eq, ":value", 1),
		(eq, ":faction_of_party_g_player_court", "fac_player_supporters_faction")
	],
	"I wish to defer the appointment of a lord, until I take the counsel of my subjects.", "award_fief_to_vassal_defer",
	[]],

	[anyone, "award_fief_to_vassal_defer",
	[],
	"As you wish, {my lord/my lady}. You may decide this matter at a later date.", "close_window",
	[
		(try_begin),
			(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, -1),
			(faction_set_slot, "$players_kingdom", slot_faction_political_issue, "$g_center_taken_by_player_faction"),
		(try_end),
		(call_script, "script_give_center_to_lord", "$g_center_taken_by_player_faction", -1, 0),
		(assign, "$g_center_taken_by_player_faction", -1),
		(try_begin),
			(eq, "$g_next_menu", "mnu_castle_taken"),
			(jump_to_menu, "$g_next_menu"),
		(try_end)
	]],

	[anyone|repeat_for_troops|plyr, "award_fief_to_vassal",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(neq, "trp_player", ":repeat_object"),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(this_or_next|eq, ":faction_of_troop_repeat_object", ":value"),
		(eq, ":faction_of_troop_repeat_object", "fac_player_supporters_faction"),
		(str_store_troop_name, 11, ":repeat_object"),
		(call_script, "script_print_troop_owned_centers_in_numbers_to_s0", ":repeat_object"),
		(try_begin),
			(troop_slot_eq, ":repeat_object", slot_lord_recruitment_argument, 3),
			(str_store_string, 12, "str__promised_fief"),
		(else_try),
			(str_clear, 12),
		(try_end),
		(try_begin),
			(eq, reg0, 0),
			(str_store_string, 0, "str_no_fiefss12"),
		(else_try),
			(str_store_string, 0, "str_fiefs_s0s12"),
		(try_end),
		(str_store_string_reg, 12, 63),
		(call_script, "script_troop_get_player_relation", ":repeat_object"),
		(call_script, "script_describe_relation_to_s63", reg0),
		(str_store_string_reg, 1, 63),
		(str_store_string_reg, 63, 12),
		(str_store_string, 1, "str_dplmc_s0_comma_s1")
	],
	"{!}{s11} {s1}.", "award_fief_to_vassal_2",
	[
		(store_repeat_object, "$temp")
	]],

	[anyone|plyr, "award_fief_to_vassal",
	[
		(call_script, "script_print_troop_owned_centers_in_numbers_to_s0", "trp_player"),
		(str_store_party_name, 1, "$g_center_taken_by_player_faction"),
		(try_begin),
			(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
			(str_store_string, 12, "str_please_s65_"),
		(else_try),
			(str_clear, 12),
		(try_end),
		(assign, ":var_1", 0),
		(assign, ":value", "trp_heroes_end"),
		(assign, ":value_2", "fac_player_supporters_faction"),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value_2", "$players_kingdom"),
		(try_end),
		(try_for_range, ":troop", "trp_npc1", ":value"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(neq, "trp_player", ":troop"),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(this_or_next|eq, ":faction_of_troop_troop", ":value_2"),
			(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
			(val_add, ":var_1", 1),
			(assign, ":value", 0),
		(try_end),
		(try_begin),
			(gt, ":var_1", 0),
			(str_store_string, 2, "str_fiefs_s0"),
		(else_try),
			(str_clear, 2),
		(try_end),
		(str_store_string, 5, "str_s12i_want_to_have_s1_for_myself")
	],
	"{!}{s5}", "award_fief_to_vassal_2",
	[
		(assign, "$temp", "trp_player")
	]],

	[anyone, "award_fief_to_vassal_2",
	[],
	"As you wish, {my lord/my lady}.", "close_window",
	[
		(assign, ":var_1", "$temp"),
		(call_script, "script_give_center_to_lord", "$g_center_taken_by_player_faction", ":var_1", 0),
		(try_begin),
			(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, "$g_center_taken_by_player_faction"),
			(faction_set_slot, "$players_kingdom", slot_faction_political_issue, -1),
		(try_end),
		(assign, reg6, 0),
		(assign, reg7, 0),
		(try_begin),
			(eq, ":var_1", "$g_talk_troop"),
			(assign, reg6, 1),
		(else_try),
			(eq, ":var_1", "trp_player"),
			(assign, reg7, 1),
		(else_try),
			(str_store_troop_name, 11, ":var_1"),
		(try_end),
		(str_store_party_name, 1, "$g_center_taken_by_player_faction"),
		(assign, reg3, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":var_1"),
			(assign, reg3, 1),
		(try_end),
		(assign, "$g_center_taken_by_player_faction", -1),
		(try_begin),
			(eq, "$g_next_menu", "mnu_castle_taken"),
			(jump_to_menu, "$g_next_menu"),
		(try_end)
	]],

	[anyone, "event_triggered",
	[
		(assign, ":value", 0),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(faction_slot_eq, "$players_kingdom", slot_faction_leader, "$g_talk_troop"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|eq, ":value", 1),
		(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "$g_talk_troop"),
		(ge, "$g_center_taken_by_player_faction", 0),
		(str_store_party_name, 1, "$g_center_taken_by_player_faction")
	],
	"{s1} is not being managed by anyone. Whom shall I put in charge?", "center_captured_rebellion",
	[]],

	[anyone|repeat_for_troops|plyr, "center_captured_rebellion",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(neq, "$g_talk_troop", ":repeat_object"),
		(neq, "trp_player", ":repeat_object"),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(this_or_next|eq, ":faction_of_troop_repeat_object", ":value"),
		(eq, ":faction_of_troop_repeat_object", "fac_player_supporters_faction"),
		(str_store_troop_name, 11, ":repeat_object"),
		(call_script, "script_print_troop_owned_centers_in_numbers_to_s0", ":repeat_object"),
		(try_begin),
			(eq, reg0, 0),
			(str_store_string, 1, "@(no fiefs)"),
		(else_try),
			(str_store_string, 1, "@(fiefs: {s0})"),
		(try_end)
	],
	"{s11}. {s1}", "center_captured_rebellion_2",
	[
		(store_repeat_object, "$temp")
	]],

	[anyone|plyr, "center_captured_rebellion",
	[
		(call_script, "script_print_troop_owned_centers_in_numbers_to_s0", "trp_player"),
		(str_store_party_name, 1, "$g_center_taken_by_player_faction"),
		(assign, reg0, 0),
		(try_begin),
			(this_or_next|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
			(troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(try_end)
	],
	"My liege, I want to have {s1} for myself. (fiefs: {s0})", "center_captured_rebellion_2",
	[
		(assign, "$temp", "trp_player")
	]],

	[anyone|plyr, "center_captured_rebellion",
	[
		(call_script, "script_print_troop_owned_centers_in_numbers_to_s0", "$g_talk_troop"),
		(str_store_party_name, 1, "$g_center_taken_by_player_faction")
	],
	"My liege, you should have {s1} for yourself. (fiefs: {s0})", "center_captured_rebellion_2",
	[
		(assign, "$temp", "$g_talk_troop")
	]],

	[anyone|plyr, "center_captured_rebellion",
	[
		(str_store_party_name, 1, "$g_center_taken_by_player_faction")
	],
	"You should appoint no one yet, and decide later.", "center_captured_rebellion_2_defer",
	[]],

	[anyone, "center_captured_rebellion_2_defer",
	[],
	"Hmmm. All right, {playername}. I value your counsel highly.  I shall defer appointment of a lord for {s1} for the time.", "close_window",
	[
		(call_script, "script_give_center_to_lord", "$g_center_taken_by_player_faction", -1, 0),
		(try_begin),
			(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, "$g_center_taken_by_player_faction"),
			(faction_set_slot, "$players_kingdom", slot_faction_political_issue, -1),
		(try_end),
		(str_store_party_name, 1, "$g_center_taken_by_player_faction"),
		(assign, "$g_center_taken_by_player_faction", -1),
		(try_begin),
			(eq, "$g_next_menu", "mnu_castle_taken"),
			(jump_to_menu, "$g_next_menu"),
		(try_end)
	]],

	[anyone, "center_captured_rebellion_2",
	[],
	"Hmmm. All right, {playername}. I value your counsel highly. {reg6?I:{reg7?You:{s11}}} will be the new {reg3?lady:lord} of {s1}.", "close_window",
	[
		(assign, ":var_1", "$temp"),
		(call_script, "script_calculate_troop_score_for_center", ":var_1", "$g_center_taken_by_player_faction"),
		(assign, ":var_2", reg0),
		(assign, ":var_3", 0),
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(this_or_next|eq, ":faction_of_troop_troop", ":value"),
			(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
			(neq, ":troop", ":var_1"),
			(neg|troop_slot_eq, ":troop", slot_troop_stance_on_faction_issue, ":var_1"),
			(call_script, "script_troop_get_relation_with_troop", ":troop", ":var_1"),
			(lt, reg0, 25),
			(call_script, "script_calculate_troop_score_for_center", ":troop", "$g_center_taken_by_player_faction"),
			(assign, ":var_7", reg0),
			(gt, ":var_7", ":var_2"),
			(store_sub, ":value_2", ":var_7", ":var_2"),
			(store_random_in_range, ":random_in_range_0_value_2", 0, ":value_2"),
			(val_div, ":random_in_range_0_value_2", 1000),
			(gt, ":random_in_range_0_value_2", 0),
			(val_add, ":var_3", ":random_in_range_0_value_2"),
			(val_mul, ":random_in_range_0_value_2", -1),
			(call_script, "script_change_player_relation_with_troop", ":troop", ":random_in_range_0_value_2"),
		(try_end),
		(val_mul, ":var_3", 2),
		(val_div, ":var_3", 3),
		(val_add, ":var_3", 5),
		(try_begin),
			(neq, ":var_1", "trp_player"),
			(val_min, ":var_3", 30),
			(call_script, "script_change_player_relation_with_troop", ":var_1", ":var_3"),
		(try_end),
		(call_script, "script_give_center_to_lord", "$g_center_taken_by_player_faction", ":var_1", 0),
		(try_begin),
			(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, "$g_center_taken_by_player_faction"),
			(faction_set_slot, "$players_kingdom", slot_faction_political_issue, -1),
		(try_end),
		(assign, reg6, 0),
		(assign, reg7, 0),
		(try_begin),
			(eq, ":var_1", "$g_talk_troop"),
			(assign, reg6, 1),
		(else_try),
			(eq, ":var_1", "trp_player"),
			(assign, reg7, 1),
		(else_try),
			(str_store_troop_name, 11, ":var_1"),
		(try_end),
		(str_store_party_name, 1, "$g_center_taken_by_player_faction"),
		(assign, reg3, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":var_1"),
			(assign, reg3, 1),
		(try_end),
		(assign, "$g_center_taken_by_player_faction", -1),
		(try_begin),
			(eq, "$g_next_menu", "mnu_castle_taken"),
			(jump_to_menu, "$g_next_menu"),
		(try_end)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tutorial_fighter_1", "trp_tutorial_archer_1"),
		(eq, "$g_tutorial_training_ground_conversation_state", 0),
		(eq, "$g_tutorial_fighter_talk_before", 0)
	],
	"Hello there. We are polishing off our combat skills here with a bit of sparring practice. You look like you could use a bit of training. Why don't you join us, and we can show you a few tricks. And if you need explanation of any combat concepts, just ask, and I will do my best to fill you in.", "fighter_talk",
	[
		(try_begin),
			(eq, "$g_tutorial_training_ground_intro_message_being_displayed", 1),
			(assign, "$g_tutorial_training_ground_intro_message_being_displayed", 0),
			(tutorial_message, -1),
		(try_end),
		(assign, "$g_tutorial_fighter_talk_before", 1)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tutorial_fighter_1", "trp_tutorial_archer_1"),
		(eq, "$g_tutorial_training_ground_conversation_state", 0)
	],
	"What do you want to practice?", "fighter_talk",
	[]],

	[anyone, "fighter_pretalk",
	[],
	"Tell me what kind of practice you want.", "fighter_talk",
	[]],

	[anyone|plyr, "fighter_talk",
	[],
	"I want to practice attacking.", "fighter_talk_train_attack",
	[]],

	[anyone|plyr, "fighter_talk",
	[],
	"I want to practice blocking with my weapon.", "fighter_talk_train_parry",
	[]],

	[anyone|plyr, "fighter_talk",
	[],
	"Let's do some sparring practice.", "fighter_talk_train_combat",
	[]],

	[anyone|plyr, "fighter_talk",
	[
		(eq, 1, 0)
	],
	"{!}TODO: Let's train chamber blocking.", "fighter_talk_train_chamber",
	[]],

	[anyone|plyr, "fighter_talk",
	[],
	"[Leave]", "close_window",
	[]],

	[anyone, "fighter_talk_train_attack",
	[
		(get_player_agent_no, ":player_agent_no"),
		(agent_has_item_equipped, ":player_agent_no", "itm_practice_sword")
	],
	"All right. There are four principle directions for attacking. These are overhead swing, right swing, left swing and thrust. Now, I will tell you which direction to attack from and you must try to do the correct attack. ^^(Move your mouse while you press the left mouse button to specify attack direction. For example, to execute an overhead attack, move the mouse up at the instant you press the left mouse button. The icons on your screen will help you do the correct action.)", "fighter_talk_train_attack_2",
	[]],

	[anyone|plyr, "fighter_talk_train_attack_2",
	[],
	"Let's begin then. I am ready.", "close_window",
	[
		(assign, "$g_tutorial_training_ground_melee_trainer_attack", "$g_talk_troop"),
		(assign, "$g_tutorial_training_ground_melee_state", 0),
		(assign, "$g_tutorial_training_ground_melee_trainer_action_state", 0),
		(assign, "$g_tutorial_training_ground_current_score", 0),
		(assign, "$g_tutorial_training_ground_current_score_2", 0),
		(assign, "$g_tutorial_update_mouse_presentation", 0)
	]],

	[anyone|plyr, "fighter_talk_train_attack_2",
	[],
	"Actually I want to do something else.", "fighter_pretalk",
	[]],

	[anyone, "fighter_talk_train_attack",
	[
		(str_store_string, 3, "str_tutorial_training_ground_warning_no_weapon")
	],
	"{!}{s3}", "close_window",
	[]],

	[anyone, "fighter_talk_train_parry",
	[
		(get_player_agent_no, ":player_agent_no"),
		(agent_has_item_equipped, ":player_agent_no", "itm_practice_sword")
	],
	"Unlike a shield, blocking with a weapon can only stop attacks coming from one direction. For example if you block up, you'll deflect overhead attacks, but you can still be hit by side swings or thrust attacks. ^^(You must press and hold down the right mouse button to block.)", "fighter_talk_train_parry_2",
	[]],

	[anyone, "fighter_talk_train_parry_2",
	[],
	"I'll now attack you with different types of strokes, and I will wait until you do the correct block before attacking. Try to do the correct block as soon as you can. ^^(This practice is easy to do with the 'automatic block direction' setting which is the default. If you go to the Options menu and change defend direction control to 'mouse movement' or 'keyboard', you'll need to manually choose block direction. This is much more challenging, but makes the game much more interesting. This practice can be very useful if you use manual blocking.)", "fighter_talk_train_parry_3",
	[]],

	[anyone|plyr, "fighter_talk_train_parry_3",
	[],
	"Let's begin then. I am ready.", "close_window",
	[
		(assign, "$g_tutorial_training_ground_melee_trainer_parry", "$g_talk_troop"),
		(assign, "$g_tutorial_training_ground_melee_state", 0),
		(assign, "$g_tutorial_training_ground_melee_trainer_action_state", 0),
		(assign, "$g_tutorial_training_ground_current_score", 0)
	]],

	[anyone|plyr, "fighter_talk_train_parry_3",
	[],
	"Actually I want to do something else.", "fighter_pretalk",
	[]],

	[anyone, "fighter_talk_train_parry",
	[
		(str_store_string, 3, "str_tutorial_training_ground_warning_no_weapon")
	],
	"{!}{s3}", "close_window",
	[]],

	[anyone, "fighter_talk_train_chamber",
	[
		(get_player_agent_no, ":player_agent_no"),
		(agent_has_item_equipped, ":player_agent_no", "itm_practice_sword")
	],
	"{!}TODO: OK.", "close_window",
	[
		(assign, "$g_tutorial_training_ground_melee_trainer_chamber", "$g_talk_troop"),
		(assign, "$g_tutorial_training_ground_melee_state", 0),
		(assign, "$g_tutorial_training_ground_melee_trainer_action_state", 0),
		(assign, "$g_tutorial_training_ground_current_score", 0)
	]],

	[anyone, "fighter_talk_train_chamber",
	[
		(str_store_string, 3, "str_tutorial_training_ground_warning_no_weapon")
	],
	"{!}{s3}", "close_window",
	[]],

	[anyone, "fighter_talk_train_combat",
	[
		(get_player_agent_no, ":player_agent_no"),
		(agent_has_item_equipped, ":player_agent_no", "itm_practice_sword")
	],
	"Sparring is an excellent way to prepare for actual combat. We'll fight each other with non-lethal weapons now, until one of us falls to the ground. You can get some bruises of course, but better that than being cut down in the real thing.", "fighter_talk_train_combat_2",
	[]],

	[anyone|plyr, "fighter_talk_train_combat_2",
	[],
	"Let's begin then. I am ready.", "close_window",
	[
		(assign, "$g_tutorial_training_ground_melee_trainer_combat", "$g_talk_troop"),
		(assign, "$g_tutorial_training_ground_melee_state", 0),
		(assign, "$g_tutorial_training_ground_melee_trainer_action_state", 0)
	]],

	[anyone|plyr, "fighter_talk_train_combat_2",
	[],
	"Actually I want to do something else.", "fighter_pretalk",
	[]],

	[anyone, "fighter_talk_train_combat",
	[
		(str_store_string, 3, "str_tutorial_training_ground_warning_no_weapon")
	],
	"{!}{s3}", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tutorial_fighter_1", "trp_tutorial_archer_1"),
		(eq, "$g_tutorial_training_ground_conversation_state", 1)
	],
	"Good. You were able to block my attacks successfully. You may repeat this practice and try to get faster each time, until you are confident of your defense skills. Do you want to have another go?", "fighter_parry_try_again",
	[
		(assign, "$g_tutorial_training_ground_conversation_state", 0)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tutorial_fighter_1", "trp_tutorial_archer_1"),
		(eq, "$g_tutorial_training_ground_conversation_state", 2)
	],
	"Well that didn't go too well, did it? (Remember, you must press and hold down the right mouse button to keep your block effective.) Do you want to try again?", "fighter_parry_try_again",
	[
		(assign, "$g_tutorial_training_ground_conversation_state", 0)
	]],

	[anyone|plyr, "fighter_parry_try_again",
	[],
	"Yes. Let's try again.", "fighter_talk_train_parry",
	[]],

	[anyone|plyr, "fighter_parry_try_again",
	[],
	"No, I think I am done for now.", "fighter_talk_leave_parry",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tutorial_fighter_1", "trp_tutorial_archer_1"),
		(eq, "$g_tutorial_training_ground_conversation_state", 3)
	],
	"Hey! We are doing a blocking practice, mate! You are supposed to block my attacks, not attack me back.", "fighter_parry_warn",
	[
		(assign, "$g_tutorial_training_ground_conversation_state", 0)
	]],

	[anyone|plyr, "fighter_parry_warn",
	[],
	"I am sorry. Let's try once again.", "fighter_talk_train_parry",
	[]],

	[anyone|plyr, "fighter_parry_warn",
	[],
	"Sorry. I must leave this practice now.", "fighter_talk_leave_parry",
	[]],

	[anyone, "fighter_talk_leave_parry",
	[],
	"All right. As you wish.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tutorial_fighter_1", "trp_tutorial_archer_1"),
		(eq, "$g_tutorial_training_ground_conversation_state", 4)
	],
	"Well that didn't go too well, did it?  Don't feel bad, and try not to do same mistakes next time. Do you want to have a go again?", "fighter_combat_try_again",
	[
		(assign, "$g_tutorial_training_ground_conversation_state", 0)
	]],

	[anyone|plyr, "fighter_combat_try_again",
	[],
	"Yes. Let's do another round.", "fighter_talk_train_combat",
	[]],

	[anyone|plyr, "fighter_combat_try_again",
	[],
	"No. That was enough for me.", "fighter_talk_leave_combat",
	[]],

	[anyone, "fighter_talk_leave_combat",
	[],
	"Well, all right. Talk to me again if you change your mind.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tutorial_fighter_1", "trp_tutorial_archer_1"),
		(eq, "$g_tutorial_training_ground_conversation_state", 5)
	],
	"Hey, that was good sparring. You defeated me, but next time I'll be more careful. Do you want to have a go again?", "fighter_combat_try_again",
	[
		(assign, "$g_tutorial_training_ground_conversation_state", 0)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tutorial_fighter_1", "trp_tutorial_archer_1"),
		(eq, "$g_tutorial_training_ground_conversation_state", 8)
	],
	"{!}TODO: What are you doing? Don't attack me except while chambering!", "fighter_chamber_warn",
	[
		(assign, "$g_tutorial_training_ground_conversation_state", 0)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tutorial_fighter_1", "trp_tutorial_archer_1"),
		(eq, "$g_tutorial_training_ground_conversation_state", 9)
	],
	"Very good. You have learned how to attack from any direction you want. If you like we can try this again or move to a different exercise.", "fighter_talk",
	[
		(assign, "$g_tutorial_training_ground_conversation_state", 0)
	]],

	[anyone|plyr, "fighter_chamber_warn",
	[],
	"{!}TODO: Sorry, let's try once again.", "fighter_talk_train_chamber",
	[]],

	[anyone|plyr, "fighter_chamber_warn",
	[],
	"{!}TODO: Sorry. I want to leave the exercise.", "close_window",
	[]],

	[auto_proceed|trp_tutorial_archer_1, "start",
	[],
	"{!}.", "tutorial_troop_default",
	[]],

	[trp_tutorial_master_archer, "start",
	[
		(eq, "$g_tutorial_training_ground_archer_trainer_completed_chapters", 1)
	],
	"Not bad. Not bad at all! You seem to have grasped the basics of archery. Now, try to do the same thing with a crossbow. Take the crossbow and the bolts over there and shoot those three targets. The crossbow is much easier to shoot with compared with the bow, but you need to reload it after each shot.", "archer_challenge_2",
	[]],

	[trp_tutorial_master_archer, "start",
	[
		(eq, "$g_tutorial_training_ground_archer_trainer_completed_chapters", 2)
	],
	"Good. You didn't have too much difficulty using the crossbow either. Next you will learn to use throwing weapons. Pick up the javelins you see over there and try to hit those three targets. ", "archer_challenge_2",
	[]],

	[trp_tutorial_master_archer, "start",
	[
		(eq, "$g_tutorial_training_ground_archer_trainer_completed_chapters", 3)
	],
	"Well, with that you have recevied the basic skills to use all three types of ranged weapons. The rest will come with practice. Train each and every day, and in time you will be as good as the best marksmen in Calradia.", "ranged_end",
	[]],

	[trp_tutorial_master_archer, "ranged_end",
	[],
	"Now, you can go talk with the melee fighters or the horsemanship trainer if you haven't already done so. They can teach you important skills too.", "close_window",
	[]],

	[trp_tutorial_master_archer, "start",
	[
		(try_begin),
			(eq, "$g_tutorial_training_ground_intro_message_being_displayed", 1),
			(assign, "$g_tutorial_training_ground_intro_message_being_displayed", 0),
			(tutorial_message, -1),
		(try_end)
	],
	"Good day to you, young fellow. I spend my days teaching about ranged weapons to anyone that is willing to learn. If you need a tutor, let me know and I'll teach you how to use the bow, the crossbow and the javelin.", "archer_talk",
	[]],

	[anyone|plyr, "archer_talk",
	[
		(eq, "$g_tutorial_training_ground_archer_trainer_completed_chapters", 0)
	],
	"Yes, show me how to use ranged weapons.", "archer_challenge",
	[]],

	[anyone|plyr, "archer_talk",
	[],
	"No, not now.", "close_window",
	[]],

	[trp_tutorial_master_archer, "archer_challenge",
	[
		(eq, "$g_tutorial_training_ground_archer_trainer_completed_chapters", 0)
	],
	"All right. Your first training will be in bowmanship. The bow is a difficult weapon to master. But once you are sufficiently good at it, you can shoot quickly and with great power. Go pick up the bow and arrows you see over there now and shoot those targets.", "archer_challenge_2",
	[]],

	[anyone|plyr, "archer_challenge_2",
	[],
	"All right. I am ready.", "close_window",
	[
		(assign, "$g_tutorial_training_ground_archer_trainer_state", 1),
		(try_begin),
			(eq, "$g_tutorial_training_ground_archer_trainer_completed_chapters", 0),
			(assign, "$g_tutorial_training_ground_archer_trainer_item_1", "itm_practice_bow"),
			(assign, "$g_tutorial_training_ground_archer_trainer_item_2", "itm_practice_arrows"),
		(else_try),
			(eq, "$g_tutorial_training_ground_archer_trainer_completed_chapters", 1),
			(assign, "$g_tutorial_training_ground_archer_trainer_item_1", "itm_practice_crossbow"),
			(assign, "$g_tutorial_training_ground_archer_trainer_item_2", "itm_practice_bolts"),
		(else_try),
			(assign, "$g_tutorial_training_ground_archer_trainer_item_1", "itm_practice_javelin"),
			(assign, "$g_tutorial_training_ground_archer_trainer_item_2", -1),
		(try_end)
	]],

	[anyone|plyr, "archer_challenge_2",
	[],
	"Just a minute. I want to do something else first.", "close_window",
	[]],

	[trp_tutorial_master_horseman, "start",
	[
		(eq, "$g_tutorial_training_ground_horseman_trainer_completed_chapters", 1)
	],
	"I hope you enjoyed the ride. Now we move on to something a bit more difficult. Grab the lance you see over there and ride around the course hitting each target at least once.", "horseman_melee_challenge_2",
	[]],

	[trp_tutorial_master_horseman, "start",
	[
		(eq, "$g_tutorial_training_ground_horseman_trainer_completed_chapters", 2)
	],
	"Good! You have been able to hit all targets on horseback. That's no easy feat for a starter. Your next challenge will be using a bow and arrows to shoot at the archery targets by the road. You need to put an arrow to each target to consider yourself successful.", "horseman_melee_challenge_2",
	[]],

	[trp_tutorial_master_horseman, "start",
	[
		(eq, "$g_tutorial_training_ground_horseman_trainer_completed_chapters", 3)
	],
	"Very good. You were able to shoot all targets from horseback. Keep riding and practicing each day and in time you will be an expert horseman.", "horsemanship_end",
	[]],

	[trp_tutorial_master_horseman, "horsemanship_end",
	[],
	"Now, you can go talk with the melee fighters or the archery trainer if you haven't already done so. You need to learn everything you can to be prepared when you have to defend yourself.", "close_window",
	[]],

	[trp_tutorial_master_horseman, "start",
	[
		(try_begin),
			(eq, "$g_tutorial_training_ground_intro_message_being_displayed", 1),
			(assign, "$g_tutorial_training_ground_intro_message_being_displayed", 0),
			(tutorial_message, -1),
		(try_end)
	],
	"Good day! I have come here for some riding practice, but my old bones are aching badly so I decided to give myself a rest today. If you would like to practice your horsemanship, you can take my horse here. The exercise would be good for her.", "horseman_talk",
	[]],

	[anyone|plyr, "horseman_talk",
	[],
	"Yes, I would like to practice riding.", "horseman_challenge",
	[]],

	[anyone|plyr, "horseman_talk",
	[],
	"Uhm. Maybe later.", "close_window",
	[]],

	[trp_tutorial_master_horseman, "horseman_challenge",
	[
		(eq, "$g_tutorial_training_ground_horseman_trainer_completed_chapters", 0)
	],
	"Good. Now, I will give you a few exercises that'll teach you riding and horseback weapon use. Your first assignment is simple. Just take your horse for a ride around the course. Go as slow or as fast as you like. Come back when you feel confident as a rider and I'll give you some tougher exercises.", "horseman_melee_challenge_2",
	[]],

	[anyone|plyr, "horseman_melee_challenge_2",
	[],
	"All right. I am ready.", "close_window",
	[
		(assign, "$g_tutorial_training_ground_horseman_trainer_state", 1),
		(try_begin),
			(eq, "$g_tutorial_training_ground_horseman_trainer_completed_chapters", 0),
			(assign, "$g_tutorial_training_ground_horseman_trainer_item_1", -1),
			(assign, "$g_tutorial_training_ground_horseman_trainer_item_2", -1),
		(else_try),
			(eq, "$g_tutorial_training_ground_horseman_trainer_completed_chapters", 1),
			(assign, "$g_tutorial_training_ground_horseman_trainer_item_1", "itm_medium_tier_sword_2"),
			(assign, "$g_tutorial_training_ground_horseman_trainer_item_2", -1),
		(else_try),
			(assign, "$g_tutorial_training_ground_horseman_trainer_item_1", "itm_practice_bow"),
			(assign, "$g_tutorial_training_ground_horseman_trainer_item_2", "itm_practice_arrows"),
		(try_end)
	]],

	[anyone|plyr, "horseman_melee_challenge_2",
	[],
	"Just a minute. I need to do something else first.", "close_window",
	[]],

	[auto_proceed|trp_tutorial_rider_1, "start",
	[],
	"{!}Warning: This line is never displayed.", "tutorial_troop_default",
	[]],

	[auto_proceed|trp_tutorial_rider_2, "start",
	[],
	"{!}Warning: This line is never displayed.", "tutorial_troop_default",
	[]],

	[anyone, "tutorial_troop_default",
	[
		(try_begin),
			(eq, "$g_tutorial_training_ground_intro_message_being_displayed", 1),
			(assign, "$g_tutorial_training_ground_intro_message_being_displayed", 0),
			(tutorial_message, -1),
		(try_end)
	],
	"Hey, I am trying to practice here. Go, talk with the archery trainer if you need guidance about ranged weapons.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 18),
		(troop_slot_eq, "$g_talk_troop", slot_troop_prisoner_of_party, "$g_encountered_party"),
		(troop_slot_ge, "$g_talk_troop", 149, 1)
	],
	"Is there a change of plans?", "lord_prison_break_confirm_3",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 18),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg0, "$g_talk_troop"),
			(assign, reg1, "$g_encountered_party"),
			(troop_get_slot, reg2, "$g_talk_troop", slot_troop_prisoner_of_party),
			(display_message, "@{!}g talk troop = {reg0} , g encountered party = {reg1} , slot value = {reg2}"),
		(try_end),
		(troop_slot_eq, "$g_talk_troop", slot_troop_prisoner_of_party, "$g_encountered_party")
	],
	"What's going on?", "lord_prison_break",
	[]],

	[anyone, "start",
	[
		(eq, "$g_talk_troop", "trp_belligerent_drunk")
	],
	"What are you looking at?", "drunk_response",
	[
		(try_begin),
			(eq, "$g_main_attacker_agent", 0),
			(call_script, "script_activate_tavern_attackers"),
		(try_end),
		(mission_disable_talk)
	]],

	[anyone, "start",
	[
		(eq, "$g_talk_troop", "trp_hired_assassin")
	],
	"Are you looking at me?", "drunk_response",
	[
		(try_begin),
			(eq, "$g_main_attacker_agent", 0),
			(call_script, "script_activate_tavern_attackers"),
		(try_end),
		(mission_disable_talk)
	]],

	[anyone, "start",
	[
		(eq, "$g_talk_troop", "trp_hired_assassin"),
		(eq, 1, 0)
	],
	"{!}Added to match dialog ids with translations.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_town_1_tavernkeeper", "trp_town_1_merchant"),
		(gt, "$g_main_attacker_agent", 0),
		(neg|agent_is_alive, "$g_main_attacker_agent"),
		(try_begin),
			(neg|agent_is_alive, "$g_main_attacker_agent"),
			(agent_get_troop_id, ":troop_id_l_g_main_attacker_agent", "$g_main_attacker_agent"),
			(eq, ":troop_id_l_g_main_attacker_agent", "trp_hired_assassin"),
			(str_store_string, 9, "str_strange_that_one_didnt_seem_like_your_ordenary_troublemaker_he_didnt_drink_all_that_much__he_just_stood_there_quietly_and_watched_the_door_you_may_wish_to_consider_whether_you_have_any_enemies_who_know_you_are_in_town_a_pity_that_blood_had_to_be_spilled_in_my_establishment"),
			(assign, "$g_main_attacker_agent", 0),
			(troop_add_gold, "trp_player", 50),
			(troop_add_item, "trp_player", "itm_medium_tier_sword_2", 0),
		(else_try),
			(lt, "$g_attacker_drawn_weapon", "itm_tutorial_spear"),
			(str_store_string, 9, "str_you_never_let_him_draw_his_weapon_still_it_looked_like_he_was_going_to_kill_you_take_his_sword_and_purse_i_suppose_he_was_trouble_but_its_not_good_for_an_establishment_to_get_a_name_as_a_place_where_men_are_killed"),
			(assign, "$g_main_attacker_agent", 0),
			(troop_add_gold, "trp_player", 50),
			(troop_add_item, "trp_player", "itm_medium_tier_sword_2", 0),
			(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", -1),
		(else_try),
			(neg|agent_is_alive, "$g_main_attacker_agent"),
			(str_store_string, 9, "str_well_id_say_that_he_started_it_that_entitles_you_to_his_sword_and_purse_i_suppose_have_a_drink_on_the_house_as_i_daresay_youve_saved_a_patron_or_two_a_broken_skull_still_i_hope_he_still_has_a_pulse_its_not_good_for_an_establishment_to_get_a_name_as_a_place_where_men_are_killed"),
			(assign, "$g_main_attacker_agent", 0),
			(troop_add_gold, "trp_player", 50),
			(troop_add_item, "trp_player", "itm_medium_tier_sword_2", 0),
			(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", 1),
		(try_end),
		(troop_set_slot, "trp_hired_assassin", slot_troop_cur_center, -1)
	],
	"{!}{s9}", "player_duel_response",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_town_1_tavernkeeper", "trp_town_1_merchant"),
		(gt, "$g_main_attacker_agent", 0),
		(try_begin),
			(get_player_agent_no, ":player_agent_no"),
			(agent_get_wielded_item, ":wielded_item_player_agent_no_0", ":player_agent_no", 0),
			(is_between, ":wielded_item_player_agent_no_0", "itm_bow_f_hunting_bow", "itm_we_khe_throw_stone"),
			(str_store_string, 9, "str_stop_no_shooting_no_shooting"),
			(assign, ":value", -1),
			(troop_get_inventory_capacity, ":inventory_capacity_player", "trp_player"),
			(try_for_range, ":number", 0, ":inventory_capacity_player"),
				(troop_get_inventory_slot, ":inventory_slot_player_number", "trp_player", ":number"),
				(is_between, ":inventory_slot_player_number", "itm_we_swa_axe_hatchet", "itm_ar_swa_ban_scale_a"),
				(neg|is_between, ":inventory_slot_player_number", "itm_we_swa_arrow_gromite", "itm_ar_swa_ban_scale_a"),
				(assign, ":value", ":inventory_slot_player_number"),
				(assign, ":inventory_capacity_player", 0),
			(try_end),
			(agent_set_wielded_item, ":player_agent_no", ":value"),
		(else_try),
			(str_store_string, 9, "str_em_ill_stay_out_of_this"),
		(try_end)
	],
	"{!}{s9}", "close_window",
	[]],

	[anyone|plyr, "player_duel_response",
	[],
	"Such a waste...", "close_window",
	[]],

	[anyone|plyr, "player_duel_response",
	[],
	"Better him than me.", "close_window",
	[]],

	[anyone|plyr, "drunk_response",
	[],
	"I'm not sure... Some sort of animal, clearly.", "drunk_fight_start",
	[]],

	[anyone|plyr, "drunk_response",
	[],
	"Excuse me -- please accept my apologies", "dplmc_drunk_attempt_placate",
	[]],

	[anyone, "dplmc_drunk_attempt_placate",
	[
		(neq, "$g_talk_troop", "trp_hired_assassin"),
		(store_skill_level, reg1, "skl_persuasion", "trp_player"),
		(store_random_in_range, reg0, -2, 13),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(display_message, "@{!}Persuasion attempt: skill {reg1} versus random roll {reg0} (-2 through 12)"),
		(try_end),
		(le, reg0, reg1),
		(call_script, "script_deactivate_tavern_attackers")
	],
	"I'll let it slide... this time.  Now buzz off.", "close_window",
	[]],

	[anyone, "dplmc_drunk_attempt_placate",
	[],
	"I'll wipe that smirk right off your face!", "close_window",
	[
		(troop_set_slot, "trp_belligerent_drunk", slot_troop_cur_center, 0)
	]],

	[anyone, "drunk_fight_start",
	[],
	"I'll wipe that smirk right off your face!", "close_window",
	[
		(troop_set_slot, "trp_belligerent_drunk", slot_troop_cur_center, 0)
	]],

	[anyone|plyr, "drunk_response",
	[],
	"Do you have any idea who I am?", "drunk_player_high_renown",
	[]],

	[anyone, "drunk_player_high_renown",
	[
		(this_or_next|neg|troop_slot_ge, "trp_player", 7, 150),
		(eq, "$g_talk_troop", "trp_hired_assassin")
	],
	"Do I care?", "drunk_fight_start",
	[]],

	[anyone, "drunk_player_high_renown",
	[
		(lt, "$g_disable_condescending_comments", 0),
		(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_encountered_party_faction", "$character_gender"),
		(neg|troop_slot_ge, "trp_player", 7, 300)
	],
	"Big talk from a little runt.  I'll put you in your place!", "drunk_fight_start",
	[]],

	[anyone, "drunk_player_high_renown",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Emmm... Actually... Yes, yes, I do know who you are, {s0}. Please forgive me, your grace -- it must be the drink. I'll be leaving, now...", "drunk_player_high_renown",
	[]],

	[anyone|plyr, "drunk_player_high_renown",
	[],
	"Why, if you want a fight, you shall have one!", "drunk_fight_start",
	[]],

	[anyone|plyr, "drunk_player_high_renown",
	[],
	"I thought as much. Now, remove yourself from here", "close_window",
	[
		(assign, "$drunks_dont_pick_fights", 1),
		(troop_set_slot, "trp_belligerent_drunk", slot_troop_cur_center, 0),
		(call_script, "script_deactivate_tavern_attackers"),
		(assign, "$g_belligerent_drunk_leaving", "$g_main_attacker_agent"),
		(mission_enable_talk),
		(try_for_agents, ":var_1"),
			(agent_is_alive, ":var_1"),
			(agent_get_position, 4, ":var_1"),
			(agent_set_scripted_destination, ":var_1", 4),
		(try_end),
		(entry_point_get_position, 1, 0),
		(agent_set_scripted_destination, "$g_main_attacker_agent", 1),
		(assign, "$g_main_attacker_agent", 0)
	]],

	[anyone, "start",
	[
		(eq, "$g_talk_troop", "trp_fight_promoter")
	],
	"You look like a {fellow/lady} who can take a few hard knocks -- and deal them out, too. I have a business proposition for you.", "fistfight_response",
	[]],

	[anyone|plyr, "fistfight_response",
	[],
	"How's that?", "fistfight_response_2",
	[]],

	[anyone, "fistfight_response_2",
	[],
	"Good -- I'm glad you're interested. Here's the plan... It's a little complicated, so listen well. ", "fistfight_response_2a",
	[]],

	[anyone, "fistfight_response_2a",
	[],
	"You and this other fellow will start up a fight here. No weapons, no armor -- I'll sit back and take bets, and split the profits with the winner. If we make a loss, then I'll cover it. You've got nothing to lose -- except a bit of blood, of course.", "fistfight_response_3",
	[]],

	[anyone, "fistfight_response_3",
	[],
	"However, we can't organize this like one of those nice arena bouts, where everyone places their bets beforehand. People will walk in, drawn by the noise, and put a coin or two on whichever one of your two they think is winning. I'll give 'em even odds -- anything else is going to be too tricky for someone who's already on his third flagon of ale.", "fistfight_response_4",
	[]],

	[anyone, "fistfight_response_4",
	[],
	"So, as you can see, the trick is to stretch things out for as long as possible where it looks like you're losing, and people bet against you -- and then come back fast, and win, before the betting can turn. The best way to make money is for you to be battered almost to the floor, and then jump back off your feet and take the other guy down. However, you have to win in the end in order for me, and you, to make money. ", "fistfight_response_4a",
	[]],

	[anyone, "fistfight_response_4a",
	[],
	"Also, you can't stretch the fight out too long, or people will suspect a fix. So, one of you has to take a punch every so often. I don't care whose blood is spilled, but there has to be some blood.", "fistfight_response_5",
	[]],

	[anyone, "fistfight_response_5",
	[],
	"And one other thing -- my mate, your opponent, he doesn't take to well to complexity. So he's just going to come straight at you. It's up to you to supply the artistry.", "fistfight_response_5a",
	[]],

	[anyone, "fistfight_response_5a",
	[],
	"So, what do you think?", "fistfight_response_confirm",
	[]],

	[anyone|plyr, "fistfight_response_confirm",
	[],
	"{!}[Yes -- not yet implemented]", "close_window",
	[]],

	[anyone|plyr, "fistfight_response_confirm",
	[],
	"I have better things to do", "close_window",
	[]],

	[trp_ramun_the_slave_trader, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_met_previously, 0)
	],
	"Good day to you, {young man/lassie}.", "ramun_introduce_1",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_introduce_1",
	[],
	"Forgive me, you look like a trader, but I see none of your merchandise.", "ramun_introduce_2",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_met_previously, 1)
	]],

	[plyr|trp_ramun_the_slave_trader, "ramun_introduce_1",
	[],
	"Never mind.", "close_window",
	[]],

	[trp_ramun_the_slave_trader, "ramun_introduce_2",
	[],
	"A trader? Oh, aye, I certainly am that. My merchandise is a bit different from most, however. It has to be fed and watered twice a day and tries to run away if I turn my back.", "ramun_introduce_3",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_introduce_3",
	[],
	"Livestock?", "ramun_introduce_4",
	[]],

	[trp_ramun_the_slave_trader, "ramun_introduce_4",
	[],
	"Close enough. I like to call myself the man who keeps every boat on this ocean moving. Boats are driven by oars, you see, and oars need men to pull them or they stop. That's where I come in.", "ramun_introduce_5",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_introduce_5",
	[],
	"Galley slaves.", "ramun_introduce_6",
	[]],

	[trp_ramun_the_slave_trader, "ramun_introduce_6",
	[],
	"Now you're catching on! A trading port like this couldn't survive without them. The ships lose a few hands on every voyage, so there's always a high demand. The captains come to me and they pay well.", "ramun_introduce_7",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_introduce_7",
	[],
	"Where do the slaves come from?", "ramun_introduce_8",
	[]],

	[trp_ramun_the_slave_trader, "ramun_introduce_8",
	[],
	"Mostly I deal in convicted criminals bought from the authorities. Others are prisoners of war from various nations, brought to me because I offer the best prices. However, on occasion I'll buy from privateers and other . . . 'individuals'. You can't be picky about your suppliers in this line of work. You wouldn't happen to have any prisoners with you, would you?", "ramun_introduce_9",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_introduce_9",
	[],
	"Me? ", "ramun_introduce_10",
	[]],

	[trp_ramun_the_slave_trader, "ramun_introduce_10",
	[],
	"Why not? If you intend to set foot outside this town, you're going to cross swords with someone sooner or later. And, God willing, you'll come out on top. Why not make some extra money off the whole thing? Take them alive, bring them back to me, and I'll pay you fifty coins for each head. Don't much care who they are or where they come from.", "ramun_introduce_11",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_introduce_11",
	[],
	"Hmm. I'll think about it.", "ramun_introduce_12",
	[]],

	[trp_ramun_the_slave_trader, "ramun_introduce_12",
	[],
	"Do think about it! There's a lot of silver to be made, no mistake. More than enough for the both of us.", "close_window",
	[]],

	[trp_ramun_the_slave_trader, "start",
	[],
	"Hello, {playername}.", "ramun_talk",
	[]],

	[trp_ramun_the_slave_trader, "ramun_pre_talk",
	[],
	"Anything else?", "ramun_talk",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_talk",
	[
		(store_num_regular_prisoners, reg0),
		(ge, reg0, 1)
	],
	"I've brought you some prisoners, Ramun. Would you like a look?", "ramun_sell_prisoners",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_talk",
	[
		(store_num_regular_prisoners, reg0),
		(ge, reg0, 1)
	],
	"I want to sell all the prisoners I have with me.", "ramun_sell_prisoners_all",
	[]],

	[trp_ramun_the_slave_trader, "ramun_sell_prisoners_all",
	[
		(store_num_regular_prisoners, reg0),
		(store_mul, reg1, reg0, 50),
		(store_sub, reg2, reg0, 1)
	],
	"I'll take your {reg0} {reg2?prisoners:prisoner} off your hands for {reg1} coins.  We have a deal?", "ramun_sell_prisoners_all_2",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_sell_prisoners_all_2",
	[],
	"We have a deal.", "ramun_sell_prisoners_2",
	[
		(call_script, "script_dplmc_sell_all_prisoners", 1, 50)
	]],

	[plyr|trp_ramun_the_slave_trader, "ramun_sell_prisoners_all_2",
	[],
	"Let me think about it again.", "ramun_pre_talk",
	[]],

	[trp_ramun_the_slave_trader, "ramun_sell_prisoners",
	[],
	"Let me see what you have...", "ramun_sell_prisoners_2",
	[
		(change_screen_trade_prisoners)
	]],

	[trp_ramun_the_slave_trader, "ramun_sell_prisoners_2",
	[],
	"A pleasure doing business with you.", "close_window",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_talk",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 80, 1)
	],
	"How do I take somebody as prisoner?", "ramun_ask_about_capturing",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_talk",
	[
		(troop_slot_ge, "$g_talk_troop", 80, 1)
	],
	"Can you tell me again about capturing prisoners?", "ramun_ask_about_capturing",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_met_previously, 2)
	]],

	[trp_ramun_the_slave_trader, "ramun_ask_about_capturing",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 80, 1)
	],
	"You're new to this, aren't you? Let me explain it in simple terms. The basic rule of taking someone prisoner is knocking him down with a blunt weapon, like a mace or a club, rather than cutting him open with a sword. That way he goes to sleep for a little while rather than bleeding to death, you see? I'm assuming you have a blunt weapon with you . . .", "ramun_have_blunt_weapon",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_have_blunt_weapon",
	[],
	"Of course.", "ramun_have_blunt_weapon_yes",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_have_blunt_weapon",
	[],
	"As a matter of fact, I don't.", "ramun_have_blunt_weapon_no",
	[]],

	[trp_ramun_the_slave_trader, "ramun_have_blunt_weapon_yes",
	[],
	"Good. Then all you need to do is beat the bugger down with your weapon, and when the fighting's over you clap him in irons. It's a bit different for nobles and such, they tend to be protected enough that it won't matter what kind of weapon you use, but your average rabble-rouser will bleed like a stuck pig if you get him with something sharp. I don't have many requirements in my merchandise, but I do insist they be breathing when I buy them.", "ramun_ask_about_capturing_2",
	[]],

	[trp_ramun_the_slave_trader, "ramun_have_blunt_weapon_no",
	[],
	"No? Heh, well, this must be your lucky day. I've got an old club lying around that I was going to throw away. It a bit battered, but still good enough bash someone until he stops moving. Here, have it.", "ramun_have_blunt_weapon_no_2",
	[
		(troop_add_item, "trp_player", "itm_we_vae_blunt_club", 1)
	]],

	[plyr|trp_ramun_the_slave_trader, "ramun_have_blunt_weapon_no_2",
	[],
	"Thanks, Ramun. Perhaps I may try my hand at it.", "ramun_have_blunt_weapon_yes",
	[]],

	[trp_ramun_the_slave_trader, "ramun_ask_about_capturing",
	[],
	"Alright, I'll try and expain it again in simple terms. The basic rule of taking someone prisoner is knocking him down with a blunt weapon, like a mace or a club, rather than cutting him open with a sword. That way he goes to sleep for a little while rather than bleeding to death, you see? It's a bit different for nobles and such, they tend to be protected enough that it won't matter what kind of weapon you use, but your average rabble-rouser will bleed like a stuck pig if you get him with something sharp.", "ramun_ask_about_capturing_2",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_ask_about_capturing_2",
	[],
	"Alright, I think I understand. Anything else?", "ramun_ask_about_capturing_3",
	[]],

	[trp_ramun_the_slave_trader, "ramun_ask_about_capturing_3",
	[],
	"Well, it's not as simple as all that. Blunt weapons don't do as much damage as sharp ones, so they won't bring your enemies down as quickly. And trust me, given the chance, most of the scum you run across would just as soon kill you as look at you, so don't expect any courtesy when you pull out a club instead of a sword. Moreover, having to drag prisoners to and fro will slow down your party, which is why some people simply set their prisoners free after the fighting's done. It's madness. How could anyone turn down all that silver, eh?", "ramun_ask_about_capturing_4",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_ask_about_capturing_4",
	[],
	"Is that everything?", "ramun_ask_about_capturing_5",
	[]],

	[trp_ramun_the_slave_trader, "ramun_ask_about_capturing_5",
	[],
	"Just one final thing. Managing prisoners safely is not an easy thing to do, you could call it a skill in itself. If you want to capture a lot of prisoners, you should try and learn the tricks of it yourself, or you won't be able to hang on to a single man you catch.", "ramun_ask_about_capturing_7",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_ask_about_capturing_7",
	[],
	"Thanks, I'll keep it in mind.", "ramun_pre_talk",
	[]],

	[plyr|trp_ramun_the_slave_trader, "ramun_talk",
	[],
	"I'd better be going.", "ramun_leave",
	[]],

	[trp_ramun_the_slave_trader, "ramun_leave",
	[],
	"Remember, any prisoners you've got, bring them to me. I'll pay you good silver for every one.", "close_window",
	[]],

	[trp_nurse_for_lady, "start",
	[],
	"I humbly request that your {lordship/ladyship} keeps {his/her} hands where I can see them.", "close_window",
	[]],

	[party_tpl|pt_manhunters, "start",
	[
		(eq, "$talk_context", 2)
	],
	"Hey, you there! You seen any outlaws around here?", "manhunter_talk_b",
	[]],

	[party_tpl|pt_manhunters_r, "start",
	[
		(eq, "$talk_context", 2)
	],
	"Hey, you there! You seen any outlaws around here?", "manhunter_talk_b",
	[]],

	[party_tpl|pt_manhunters_e, "start",
	[
		(eq, "$talk_context", 2)
	],
	"Hey, you there! You seen any outlaws around here?", "manhunter_talk_b",
	[]],

	[anyone|plyr, "manhunter_talk_b",
	[],
	"Yes, they went this way about an hour ago.", "manhunter_talk_b1",
	[]],

	[anyone, "manhunter_talk_b1",
	[],
	"I knew it! Come on, lads, lets go get these bastards! Thanks a lot, friend.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "manhunter_talk_b",
	[],
	"No, haven't seen any outlaws lately.", "manhunter_talk_b2",
	[]],

	[anyone, "manhunter_talk_b2",
	[],
	"Bah. They're holed up in this country like rats, but we'll smoke them out yet. Sooner or later.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|auto_proceed|pt_looters, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never be displayed.", "looters_1",
	[
		(str_store_string, 11, "@It's your money or your life, {mate/girlie}. No sudden moves or we'll run you through."),
		(str_store_string, 12, "@Lucky for you, you caught me in a good mood. Give us all your coin and I might just let you live."),
		(str_store_string, 13, "@This a robbery, eh? I givin' you one chance to hand over everythin' you got, or me and my mates'll kill you. Understand?"),
		(store_random_in_range, ":random_in_range_11_14", 11, 14),
		(str_store_string_reg, 4, ":random_in_range_11_14"),
		(play_sound, "snd_encounter_looters")
	]],

	[party_tpl|auto_proceed|pt_looters_r, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never be displayed.", "looters_1",
	[
		(str_store_string, 11, "@It's your money or your life, {mate/girlie}. No sudden moves or we'll run you through."),
		(str_store_string, 12, "@Lucky for you, you caught me in a good mood. Give us all your coin and I might just let you live."),
		(str_store_string, 13, "@This a robbery, eh? I givin' you one chance to hand over everythin' you got, or me and my mates'll kill you. Understand?"),
		(store_random_in_range, ":random_in_range_11_14", 11, 14),
		(str_store_string_reg, 4, ":random_in_range_11_14"),
		(play_sound, "snd_encounter_looters")
	]],

	[party_tpl|auto_proceed|pt_looters_e, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never be displayed.", "looters_1",
	[
		(str_store_string, 11, "@It's your money or your life, {mate/girlie}. No sudden moves or we'll run you through."),
		(str_store_string, 12, "@Lucky for you, you caught me in a good mood. Give us all your coin and I might just let you live."),
		(str_store_string, 13, "@This a robbery, eh? I givin' you one chance to hand over everythin' you got, or me and my mates'll kill you. Understand?"),
		(store_random_in_range, ":random_in_range_11_14", 11, 14),
		(str_store_string_reg, 4, ":random_in_range_11_14"),
		(play_sound, "snd_encounter_looters")
	]],

	[anyone, "looters_1",
	[],
	"{s4}", "looters_2",
	[]],

	[anyone|plyr, "looters_2",
	[
		(store_character_level, reg1, "trp_player"),
		(lt, reg1, 4)
	],
	"I'm not afraid of you lot. Fight me if you dare!", "close_window",
	[
		(encounter_attack)
	]],

	[anyone|plyr, "looters_2",
	[
		(store_character_level, reg1, "trp_player"),
		(ge, reg1, 4)
	],
	"You'll have nothing of mine but cold steel, scum.", "close_window",
	[
		(encounter_attack)
	]],

	[party_tpl|pt_smugglers, "start",
	[
		(eq, "$talk_context", 2),
		(party_slot_eq, "$g_encountered_party", slot_town_center, 0)
	],
	"Good day to you.", "smugglers_intro_1",
	[
		(party_set_slot, "$g_encountered_party", slot_town_center, 1)
	]],

	[anyone|plyr, "smugglers_intro_1",
	[
		(quest_get_slot, ":hunt_down_smugglers_object_center", "qst_hunt_down_smugglers", slot_quest_object_center),
		(str_store_party_name, 1, ":hunt_down_smugglers_object_center")
	],
	"I hear you've been causing trouble at {s1}. Give me one good reason why I shouldn't kill you all.", "smugglers_intro_2",
	[]],

	[anyone, "smugglers_intro_2",
	[
		(quest_get_slot, ":hunt_down_smugglers_target_center", "qst_hunt_down_smugglers", slot_quest_target_center),
		(str_store_party_name, 6, ":hunt_down_smugglers_target_center"),
		(quest_get_slot, ":hunt_down_smugglers_object_center", "qst_hunt_down_smugglers", slot_quest_object_center),
		(str_store_party_name, 1, ":hunt_down_smugglers_object_center"),
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(ge, ":free_inventory_capacity", 1),
		(call_script, "script_get_troop_item_amount", "trp_player", "itm_trade_wine"),
		(assign, ":var_4", reg0),
		(lt, ":var_4", 1)
	],
	"We hid out at {s1}, yes, but only because we needed a place to stay. And perhaps we did not behave in a proper manner. We were driven out of {s6} by the town watch, in one of their periodic purges, and we were just lying low until things slowed down again. We are heading back there now, and we'll never trouble the villagers of {s1} again. If you let us go, we will give you a bottle of the finest Arbor wine, which the merchants divert to the well-born, and which you'll never see at a merchant's shop or tavern.", "smugglers_intro_3",
	[]],

	[anyone, "smugglers_intro_2",
	[
		(quest_get_slot, ":hunt_down_smugglers_target_center", "qst_hunt_down_smugglers", slot_quest_target_center),
		(str_store_party_name, 6, ":hunt_down_smugglers_target_center"),
		(quest_get_slot, ":hunt_down_smugglers_object_center", "qst_hunt_down_smugglers", slot_quest_object_center),
		(str_store_party_name, 1, ":hunt_down_smugglers_object_center"),
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(lt, ":free_inventory_capacity", 1)
	],
	"We hid out at {s1}, yes, but only because we needed a place to stay. And perhaps we did not behave in a proper manner. We were driven out of {s6} by the town watch, in one of their periodic purges, and we were just lying low until things slowed down again. We are heading back there now, and we'll never trouble the villagers of {s1} again. If you let us go, we will give you 250 coins.", "smugglers_intro_3a",
	[]],

	[anyone, "smugglers_intro_2",
	[
		(quest_get_slot, ":hunt_down_smugglers_target_center", "qst_hunt_down_smugglers", slot_quest_target_center),
		(str_store_party_name, 6, ":hunt_down_smugglers_target_center"),
		(quest_get_slot, ":hunt_down_smugglers_object_center", "qst_hunt_down_smugglers", slot_quest_object_center),
		(str_store_party_name, 1, ":hunt_down_smugglers_object_center"),
		(call_script, "script_get_troop_item_amount", "trp_player", "itm_trade_wine"),
		(assign, ":var_3", reg0),
		(ge, ":var_3", 1)
	],
	"We hid out at {s1}, yes, but only because we needed a place to stay. And perhaps we did not behave in a proper manner. We were driven out of {s6} by the town watch, in one of their periodic purges, and we were just lying low until things slowed down again. We are heading back there now, and we'll never trouble the villagers of {s1} again. If you let us go, we will give you 250 coins.", "smugglers_intro_3a",
	[]],

	[anyone|plyr, "smugglers_intro_3",
	[],
	"You think I would take a bribe!", "smugglers_go_back",
	[]],

	[anyone|plyr, "smugglers_intro_3",
	[],
	"Well, maybe you are right. All right then. If anyone asks, I haven't seen you.", "smugglers_let_go",
	[]],

	[anyone|plyr, "smugglers_intro_3a",
	[],
	"You think I would take a bribe!", "smugglers_go_back",
	[]],

	[anyone|plyr, "smugglers_intro_3a",
	[],
	"Well, maybe you are right. All right then. If anyone asks, I haven't seen you.", "smugglers_let_go_a",
	[]],

	[party_tpl|pt_smugglers, "smugglers_go_back",
	[
		(val_add, "$qst_hunt_down_smugglers_num_parties_returned", 1)
	],
	"Bah, have it your way!", "close_window",
	[
		(encounter_attack)
	]],

	[anyone, "smugglers_let_go",
	[],
	"May the gods bless you, {playername}. We will not forget your help. Here's the wine. Be careful, it's potent stuff!", "close_window",
	[
		(party_set_slot, "$g_encountered_party", slot_town_castle, 1),
		(troop_add_item, "trp_player", "itm_trade_wine", 0),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "smugglers_let_go_a",
	[],
	"May the gods bless you, {playername}. We will not forget your help. Here's the money.", "close_window",
	[
		(party_set_slot, "$g_encountered_party", slot_town_castle, 1),
		(call_script, "script_troop_add_gold", "trp_player", 250),
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_smugglers, "start",
	[
		(eq, "$talk_context", 2),
		(party_slot_eq, "$g_encountered_party", slot_town_castle, 1)
	],
	"Good day, my friend. Don't worry. If anyone asks, we haven't seen you.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_cheese_rustlers, "start",
	[
		(eq, "$talk_context", 2),
		(quest_slot_eq, "qst_cheese_rustlers", slot_quest_target_party, "$g_encountered_party")
	],
	"Well met. Can I help you with something? You don't want to buy some grain, by any chance?", "cheese_rustlers_intro_1",
	[]],

	[anyone|plyr, "cheese_rustlers_intro_1",
	[],
	"I was sent to hunt down some grain thieves. You look the sort.", "cheese_rustlers_intro_2",
	[]],

	[anyone, "cheese_rustlers_intro_2",
	[],
	"Grain? We don't need any filthy grain! Do we look like thieves to you?", "cheese_rustlers_intro_3",
	[]],

	[anyone|plyr, "cheese_rustlers_intro_3",
	[],
	"Well, now you mention it... say, is that a burlap sack in your hand?", "cheese_rustlers_intro_4",
	[]],

	[anyone, "cheese_rustlers_intro_4",
	[],
	"What on earth do you mean?", "cheese_rustlers_intro_5",
	[]],

	[anyone|plyr, "cheese_rustlers_intro_5",
	[],
	"It looks quite like the burlap sacks used to transport large quantities of grain...", "cheese_rustlers_intro_6",
	[]],

	[anyone, "cheese_rustlers_intro_6",
	[],
	"Damn it! Kill {him/her}! Attack!", "close_window",
	[
		(encounter_attack)
	]],

	[party_tpl|pt_cheese_paladins, "start",
	[
		(eq, "$talk_context", 2),
		(quest_slot_eq, "qst_cheese_paladins", slot_quest_target_party, "$g_encountered_party")
	],
	"Well met. Can I help you with something? You don't want to buy some wine, perchance?", "cheese_paladins_intro_1",
	[]],

	[anyone|plyr, "cheese_paladins_intro_1",
	[],
	"Wait, you're....you're sellswords? I was sent out to hunt down some common thieves...", "cheese_paladins_intro_2",
	[]],

	[anyone, "cheese_paladins_intro_2",
	[],
	"Ah! Well, I'm sorry to say that times are hard, with all this trouble and strife lately. It occurred to us that a small group of, let us say... experienced men, would attract far less suspicion than your typical roughnecks and layabouts. When this opportunity arose, well, to refuse would have been positively mad.", "cheese_paladins_intro_3",
	[]],

	[anyone|plyr, "cheese_paladins_intro_3",
	[],
	"Never mind, I have no business with you.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "cheese_paladins_intro_3",
	[],
	"I'll give you madness. Prepare to fight!", "cheese_paladins_intro_4",
	[]],

	[anyone, "cheese_paladins_intro_4",
	[],
	"The pleasure is all ours. Men, to me!", "close_window",
	[
		(encounter_attack)
	]],

	[party_tpl|pt_bandits_awaiting_ransom2, "start",
	[
		(eq, "$talk_context", 2),
		(quest_slot_eq, "qst_kidnapped_wife", slot_quest_current_state, 0)
	],
	"Are you the one that brought the ransom? Quick, give us the money now.", "bandits_awaiting_ransom2_intro_1",
	[
		(quest_set_slot, "qst_kidnapped_wife", slot_quest_current_state, 1)
	]],

	[party_tpl|pt_bandits_awaiting_ransom2, "start",
	[
		(eq, "$talk_context", 2),
		(quest_slot_eq, "qst_kidnapped_wife", slot_quest_current_state, 1)
	],
	"You came back? Quick, give us the money now.", "bandits_awaiting_ransom2_intro_1",
	[]],

	[plyr|party_tpl|pt_bandits_awaiting_ransom2, "bandits_awaiting_ransom2_intro_1",
	[
		(store_troop_gold, ":troop_gold"),
		(quest_get_slot, ":kidnapped_wife_target_amount", "qst_kidnapped_wife", slot_quest_target_amount),
		(ge, ":troop_gold", ":kidnapped_wife_target_amount")
	],
	"Here, take the money. Just set the wife free.", "bandits_awaiting_ransom2_pay",
	[]],

	[party_tpl|pt_bandits_awaiting_ransom2, "bandits_awaiting_ransom2_pay",
	[],
	"Heh. You've brought the money all right. You can take the wench now, we've had out fun with her! It was a pleasure doing business with you...", "close_window",
	[
		(quest_get_slot, ":kidnapped_wife_target_amount", "qst_kidnapped_wife", slot_quest_target_amount),
		(quest_get_slot, ":kidnapped_wife_target_party", "qst_kidnapped_wife", slot_quest_target_party),
		(quest_get_slot, ":kidnapped_wife_target_center", "qst_kidnapped_wife", slot_quest_target_center),
		(troop_remove_gold, "trp_player", ":kidnapped_wife_target_amount"),
		(store_mul, "$temp", ":kidnapped_wife_target_amount", -1),
		(remove_member_from_party, "trp_kidnapped_wife", ":kidnapped_wife_target_party"),
		(set_spawn_radius, 1),
		(spawn_around_party, ":kidnapped_wife_target_party", "pt_kidnapped_wife"),
		(assign, ":var_4", reg0),
		(party_set_ai_behavior, ":var_4", 0),
		(party_set_flags, ":var_4", 65536, 0),
		(quest_set_slot, "qst_kidnapped_wife", slot_quest_current_state, 2),
		(party_set_ai_behavior, ":kidnapped_wife_target_party", 1),
		(party_set_ai_object, ":kidnapped_wife_target_party", ":kidnapped_wife_target_center"),
		(party_set_flags, ":kidnapped_wife_target_party", 65536, 0),
		(add_gold_to_party, ":kidnapped_wife_target_amount", ":kidnapped_wife_target_party"),
		(store_mul, "$temp", ":kidnapped_wife_target_amount", -1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "bandits_awaiting_ransom2_intro_1",
	[],
	"No way! You release the woman first.", "bandits_awaiting_ransom2_b",
	[]],

	[anyone, "bandits_awaiting_ransom2_b",
	[],
	"You fool! Stop playing games and give us the money! ", "bandits_awaiting_ransom2_b2",
	[]],

	[anyone|plyr, "bandits_awaiting_ransom2_b2",
	[
		(store_troop_gold, ":troop_gold"),
		(quest_get_slot, ":kidnapped_wife_target_amount", "qst_kidnapped_wife", slot_quest_target_amount),
		(ge, ":troop_gold", ":kidnapped_wife_target_amount")
	],
	"All right. Here's your money. Let the woman go now.", "bandits_awaiting_ransom2_pay",
	[]],

	[anyone|plyr, "bandits_awaiting_ransom2_b2",
	[],
	"I had left the money in a safe place. Let me go fetch it.", "bandits_awaiting_ransom2_no_money",
	[]],

	[anyone, "bandits_awaiting_ransom2_no_money",
	[],
	"Are you testing our patience or something?  Go and bring that money here quickly.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "bandits_awaiting_ransom2_b2",
	[],
	"I have no intention to pay you anything. I demand that you release the woman now!", "bandits_awaiting_ransom2_fight",
	[]],

	[anyone, "bandits_awaiting_ransom2_fight",
	[],
	"You won't be demanding anything when you're dead.", "close_window",
	[
		(encounter_attack)
	]],

	[party_tpl|pt_bandits_awaiting_ransom2, "start",
	[
		(quest_slot_ge, "qst_kidnapped_wife", 11, 2)
	],
	"What's it? You have given us the money. We have no more business.", "bandits2_awaiting_remeet",
	[]],

	[anyone|plyr, "bandits2_awaiting_remeet",
	[],
	"Sorry to bother you. I'll be on my way now.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "bandits2_awaiting_remeet",
	[],
	"We have one more bit of business. You'll give the money back to me.", "bandits2_awaiting_remeet_2",
	[]],

	[anyone, "bandits2_awaiting_remeet_2",
	[],
	"Oh, that business! Of course. Let us get down to it.", "close_window",
	[
		(encounter_attack)
	]],

	[party_tpl|pt_kidnapped_wife, "start",
	[
		(eq, "$talk_context", 2)
	],
	"Oh {my lord/my lady}. Thank you so much for rescuing me! Those vile beasts... they... they... Will you take me to my family now, please?", "kidnapped_wife_encounter_1",
	[]],

	[anyone|plyr, "kidnapped_wife_encounter_1",
	[],
	"Yes. Come with me. I'll take you home.", "kidnapped_wife_join",
	[]],

	[anyone, "kidnapped_wife_join",
	[
		(neg|party_can_join)
	],
	"Unfortunately, you do not have room in your party for me.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "kidnapped_wife_join",
	[],
	"Oh, thank you so much!", "close_window",
	[
		(party_join),
		(quest_set_slot, "qst_kidnapped_wife", slot_quest_current_state, 3),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "kidnapped_wife_encounter_1",
	[],
	"Wait here a while longer. I'll come back for you.", "kidnapped_wife_wait",
	[]],

	[anyone, "kidnapped_wife_wait",
	[],
	"Oh, please {my lord/my lady}, do not leave me here all alone! I can't stand it!", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_village_farmers, "start",
	[
		(eq, "$talk_context", 2),
		(agent_play_sound, "$g_talk_agent", "snd_encounter_farmers")
	],
	" My {lord/lady}, we're only poor farmers from the village of {s11}. {reg1?We are taking our products to the market at {s12}.:We are returning from the market at {s12} back to our village.}", "village_farmer_talk",
	[
		(party_get_slot, ":g_encountered_party_ai_object", "$g_encountered_party", slot_party_ai_object),
		(party_get_slot, ":g_encountered_party_home_center", "$g_encountered_party", slot_party_home_center),
		(party_get_slot, ":g_encountered_party_home_center_village_market_town", ":g_encountered_party_home_center", slot_village_market_town),
		(str_store_party_name, 11, ":g_encountered_party_home_center"),
		(str_store_party_name, 12, ":g_encountered_party_home_center_village_market_town"),
		(assign, reg1, 1),
		(try_begin),
			(party_slot_eq, ":g_encountered_party_ai_object", slot_party_type, 4),
			(assign, reg1, 0),
		(try_end)
	]],

	[party_tpl|pt_village_farmers_r, "start",
	[
		(eq, "$talk_context", 2),
		(agent_play_sound, "$g_talk_agent", "snd_encounter_farmers")
	],
	" My {lord/lady}, we're only poor farmers from the village of {s11}. {reg1?We are taking our products to the market at {s12}.:We are returning from the market at {s12} back to our village.}", "village_farmer_talk",
	[
		(party_get_slot, ":g_encountered_party_ai_object", "$g_encountered_party", slot_party_ai_object),
		(party_get_slot, ":g_encountered_party_home_center", "$g_encountered_party", slot_party_home_center),
		(party_get_slot, ":g_encountered_party_home_center_village_market_town", ":g_encountered_party_home_center", slot_village_market_town),
		(str_store_party_name, 11, ":g_encountered_party_home_center"),
		(str_store_party_name, 12, ":g_encountered_party_home_center_village_market_town"),
		(assign, reg1, 1),
		(try_begin),
			(party_slot_eq, ":g_encountered_party_ai_object", slot_party_type, 4),
			(assign, reg1, 0),
		(try_end)
	]],

	[party_tpl|pt_village_farmers_e, "start",
	[
		(eq, "$talk_context", 2),
		(agent_play_sound, "$g_talk_agent", "snd_encounter_farmers")
	],
	" My {lord/lady}, we're only poor farmers from the village of {s11}. {reg1?We are taking our products to the market at {s12}.:We are returning from the market at {s12} back to our village.}", "village_farmer_talk",
	[
		(party_get_slot, ":g_encountered_party_ai_object", "$g_encountered_party", slot_party_ai_object),
		(party_get_slot, ":g_encountered_party_home_center", "$g_encountered_party", slot_party_home_center),
		(party_get_slot, ":g_encountered_party_home_center_village_market_town", ":g_encountered_party_home_center", slot_village_market_town),
		(str_store_party_name, 11, ":g_encountered_party_home_center"),
		(str_store_party_name, 12, ":g_encountered_party_home_center_village_market_town"),
		(assign, reg1, 1),
		(try_begin),
			(party_slot_eq, ":g_encountered_party_ai_object", slot_party_type, 4),
			(assign, reg1, 0),
		(try_end)
	]],

	[anyone|plyr, "village_farmer_talk",
	[
		(check_quest_active, "qst_track_down_bandits"),
		(neg|check_quest_succeeded, "qst_track_down_bandits")
	],
	"I am hunting a group of bandits with the following description... Have you seen them?", "farmer_bandit_information",
	[]],

	[anyone, "farmer_bandit_information",
	[
		(call_script, "script_get_manhunt_information_to_s15", "qst_track_down_bandits")
	],
	"{s15}", "village_farmer_talk",
	[]],

	[anyone|plyr, "village_farmer_talk",
	[
		(store_faction_of_party, ":faction_of_party_g_encountered_party", "$g_encountered_party"),
		(neq, ":faction_of_party_g_encountered_party", "$players_kingdom"),
		(neq, ":faction_of_party_g_encountered_party", "fac_player_supporters_faction")
	],
	"We'll see how poor you are after I take what you've got!", "close_window",
	[
		(party_get_slot, ":g_encountered_party_home_center", "$g_encountered_party", slot_party_home_center),
		(party_get_slot, ":g_encountered_party_home_center_village_market_town", ":g_encountered_party_home_center", slot_village_market_town),
		(party_get_slot, ":g_encountered_party_home_center_town_lord", ":g_encountered_party_home_center", slot_town_lord),
		(call_script, "script_change_player_relation_with_center", ":g_encountered_party_home_center", -4),
		(call_script, "script_change_player_relation_with_center", ":g_encountered_party_home_center_village_market_town", -2),
		(call_script, "script_change_player_relation_with_troop", ":g_encountered_party_home_center_town_lord", -2),
		(call_script, "script_diplomacy_party_attacks_neutral", "p_main_party", "$g_encountered_party"),
		(store_relation, ":relation_g_encountered_party_faction_player_supporters_faction", "$g_encountered_party_faction", "fac_player_supporters_faction"),
		(try_begin),
			(gt, ":relation_g_encountered_party_faction_player_supporters_faction", 0),
			(val_sub, ":relation_g_encountered_party_faction_player_supporters_faction", 5),
		(try_end),
		(val_sub, ":relation_g_encountered_party_faction_player_supporters_faction", 3),
		(call_script, "script_set_player_relation_with_faction", "$g_encountered_party_faction", ":relation_g_encountered_party_faction_player_supporters_faction"),
		(assign, "$encountered_party_hostile", 1),
		(assign, "$encountered_party_friendly", 0)
	]],

	[anyone|plyr, "village_farmer_talk",
	[],
	"Carry on, then. Farewell.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(gt, "$g_talk_troop", 0),
		(eq, "$g_talk_troop", "$g_player_minister"),
		(this_or_next|neg|is_between, "$g_talk_troop", "trp_npc1", "trp_heroes_end"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop")
	],
	"I am at your service, {my lord/my lady}.", "minister_issues",
	[]],

	[anyone, "start",
	[
		(eq, "$g_talk_troop", "trp_temporary_minister"),
		(neq, "$g_talk_troop", "$g_player_minister")
	],
	"It has been an honor to serve you, {my lord/my lady}.", "close_window",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 5),
		(party_slot_eq, "$g_encountered_party", slot_party_type, 2),
		(party_get_num_companion_stacks, ":num_companion_stacks_l_g_encountered_party", "$g_encountered_party"),
		(ge, ":num_companion_stacks_l_g_encountered_party", 1),
		(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_0", "$g_encountered_party", 0),
		(eq, ":party_stack_troop_id_g_encountered_party_0", "$g_talk_troop"),
		(eq, "$talk_context", 0)
	],
	"Yes, {playername}? What can I do for you?", "member_castellan_talk",
	[]],

	[anyone, "member_castellan_pretalk",
	[],
	"Anything else?", "member_castellan_talk",
	[]],

	[anyone|plyr, "member_castellan_talk",
	[],
	"I want to review the castle garrison.", "member_review_castle_garrison",
	[]],

	[anyone, "member_review_castle_garrison",
	[],
	"Of course. Here are our lists, let me know of any changes you require...", "member_castellan_pretalk",
	[
		(change_screen_exchange_members, 0)
	]],

	[anyone|plyr, "member_castellan_talk",
	[],
	"Let me see your equipment.", "member_review_castellan_equipment",
	[]],

	[anyone, "member_review_castellan_equipment",
	[],
	"Very well, it's all here...", "member_castellan_pretalk",
	[
		(change_screen_equip_other)
	]],

	[anyone|plyr, "member_castellan_talk",
	[],
	"I want you to abandon the castle and join my party.", "member_castellan_join",
	[]],

	[anyone, "member_castellan_join",
	[
		(party_can_join_party, "$g_encountered_party", "p_main_party")
	],
	"I've grown quite fond of the place... But if it is your wish, {playername}, I'll come with you.", "close_window",
	[
		(assign, "$g_move_heroes", 1),
		(call_script, "script_party_add_party", "p_main_party", "$g_encountered_party"),
		(party_clear, "$g_encountered_party")
	]],

	[anyone, "member_castellan_join",
	[],
	"And where would we sleep? You're dragging a whole army with you, {playername}, there's no more room for all of us.", "member_castellan_pretalk",
	[]],

	[anyone|plyr, "member_castellan_talk",
	[],
	"[Leave]", "close_window",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 5),
		(neg|main_party_has_troop, "$g_talk_troop"),
		(eq, "$talk_context", 2)
	],
	"{!}Do you want me to rejoin you?", "close_window",
	[]],

	[anyone, "start",
	[
		(neg|main_party_has_troop, "$g_talk_troop"),
		(eq, "$g_encountered_party", "p_four_ways_inn")
	],
	"{!}Do you want me to rejoin you?", "close_window",
	[]],

	[trp_kidnapped_girl, "member_chat",
	[],
	"Are we home yet?", "kidnapped_girl_chat_1",
	[]],

	[plyr|trp_kidnapped_girl, "kidnapped_girl_chat_1",
	[],
	"Not yet.", "kidnapped_girl_chat_2",
	[]],

	[trp_kidnapped_girl, "kidnapped_girl_chat_2",
	[],
	"I can't wait to get back. I've missed my family so much, I'd give anything to see them again.", "close_window",
	[]],

	[anyone, "member_chat",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6)
	],
	"{playername}, when do you think we can reach our destination?", "member_lady_1",
	[]],

	[anyone|plyr, "member_lady_1",
	[],
	"We still have a long way ahead of us.", "member_lady_2a",
	[]],

	[anyone|plyr, "member_lady_1",
	[],
	"Very soon. We're almost there.", "member_lady_2b",
	[]],

	[anyone, "member_lady_2a",
	[],
	"Ah, I am going to enjoy the road for a while longer then. I won't complain. I find riding out in the open so much more pleasant than sitting in the castle all day. You know, I envy you. You can live like this all the time.", "close_window",
	[]],

	[anyone, "member_lady_2b",
	[],
	"That's good news. Not that I don't like your company, but I did miss my little luxuries. Still I am sorry that I'll leave you soon. You must promise me, you'll come visit me when you can.", "close_window",
	[]],

	[anyone, "member_chat",
	[
		(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife")
	],
	"Greetings, {playername}, my first and foremost vassal. I await your counsel.", "supported_pretender_talk",
	[]],

	[anyone, "supported_pretender_pretalk",
	[],
	"Anything else?", "supported_pretender_talk",
	[]],

	[anyone|plyr, "supported_pretender_talk",
	[],
	"What do you think about our progress so far?", "pretender_progress",
	[]],

	[anyone, "pretender_progress",
	[
		(assign, reg11, 0),
		(assign, reg13, 0),
		(assign, reg14, 0),
		(assign, reg15, 0),
		(assign, reg21, 0),
		(assign, reg23, 0),
		(assign, reg24, 0),
		(assign, reg25, 0),
		(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(try_begin),
				(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
				(neq, ":troop", "trp_player"),
				(neq, ":troop", "$supported_pretender"),
				(val_add, reg11, 1),
			(else_try),
				(eq, ":faction_of_troop_troop", "$supported_pretender_old_faction"),
				(neg|faction_slot_eq, "$supported_pretender_old_faction", slot_faction_leader, ":troop"),
				(val_add, reg21, 1),
			(try_end),
		(try_end),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(try_begin),
				(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
				(try_begin),
					(party_slot_eq, ":party", slot_party_type, 3),
					(val_add, reg13, 1),
				(else_try),
					(party_slot_eq, ":party", slot_party_type, 2),
					(val_add, reg14, 1),
				(else_try),
					(party_slot_eq, ":party", slot_party_type, 4),
					(val_add, reg15, 1),
				(try_end),
			(else_try),
				(eq, ":faction_of_party_party", "$supported_pretender_old_faction"),
				(try_begin),
					(party_slot_eq, ":party", slot_party_type, 3),
					(val_add, reg23, 1),
				(else_try),
					(party_slot_eq, ":party", slot_party_type, 2),
					(val_add, reg24, 1),
				(else_try),
					(party_slot_eq, ":party", slot_party_type, 4),
					(val_add, reg25, 1),
				(try_end),
			(try_end),
		(try_end),
		(store_add, reg19, reg13, reg14),
		(val_add, reg19, reg15),
		(store_add, reg29, reg23, reg24),
		(val_add, reg29, reg25),
		(store_add, ":value", reg13, reg14),
		(val_add, ":value", reg11),
		(store_add, ":value_2", reg23, reg24),
		(val_add, ":value_2", reg21),
		(store_add, ":value_3", ":value", ":value_2"),
		(val_mul, ":value", 100),
		(store_div, ":value_4", ":value", ":value_3"),
		(try_begin),
			(lt, ":value_4", 10),
			(str_store_string, 30, "@we have made very little progress so far"),
		(else_try),
			(lt, ":value_4", 30),
			(str_store_string, 30, "@we have suceeded in gaining some ground, but we still have a long way to go"),
		(else_try),
			(lt, ":value_4", 50),
			(str_store_string, 30, "@we have become a significant force, and we have an even chance of victory"),
		(else_try),
			(lt, ":value_4", 75),
			(str_store_string, 30, "@we are winning the war, but our enemies are still holding on."),
		(else_try),
			(str_store_string, 30, "@we are on the verge of victory. The remaining enemies pose no threat, but we still need to hunt them down."),
		(try_end),
		(faction_get_slot, ":supported_pretender_old_faction_leader", "$supported_pretender_old_faction", slot_faction_leader),
		(str_store_troop_name, 9, ":supported_pretender_old_faction_leader"),
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 8, 0),
		(call_script, "script_dplmc_store_troop_is_female", ":supported_pretender_old_faction_leader")
	],
	"{reg11?We have {reg11} {s0} on our side:We have no {s0} with us yet}, whereas {reg21?{s9} still has {reg21} {s0} supporting {reg0?her:him}:{s9} has no loyal {s0} left}. {reg19?We control {reg13?{reg13} towns:} {reg14?{reg14} castles:} {reg15?and {reg15} villages:}:We don't control any settlements}, while {reg29?they have {reg23?{reg23} towns:} {reg24?{reg24} castles:} {reg25?and {reg25} villages:}:they have no remaining settlements}. Overall, {s30}.", "pretender_progress_2",
	[]],

	[anyone|plyr, "pretender_progress_2",
	[],
	"Then, we must keep fighting and rally our supporters!", "supported_pretender_pretalk",
	[]],

	[anyone|plyr, "pretender_progress_2",
	[],
	"It seems this rebellion is not going anywhere. We must give up.", "pretender_quit_rebel_confirm",
	[]],

	[anyone, "pretender_quit_rebel_confirm",
	[],
	"{playername}, you can't abandon me now. Are you serious?", "pretender_quit_rebel_confirm_2",
	[]],

	[anyone|plyr, "pretender_quit_rebel_confirm_2",
	[],
	"Indeed, I am. I can't support you any longer.", "pretender_quit_rebel_confirm_3",
	[]],

	[anyone|plyr, "pretender_quit_rebel_confirm_2",
	[],
	"I was jesting. I will fight for you until we succeed.", "supported_pretender_pretalk",
	[]],

	[anyone, "pretender_quit_rebel_confirm_3",
	[],
	"Are you absolutely sure? I will never forgive you if you abandon my cause.", "pretender_quit_rebel_confirm_4",
	[]],

	[anyone|plyr, "pretender_quit_rebel_confirm_4",
	[],
	"I am sure.", "pretender_quit_rebel",
	[]],

	[anyone|plyr, "pretender_quit_rebel_confirm_4",
	[],
	"Let me think about this some more.", "supported_pretender_pretalk",
	[]],

	[anyone, "pretender_quit_rebel",
	[],
	"So be it. Then my cause is lost. There is only one thing to do for me now. I will go from these lands and never come back. With me gone, you may try to make your peace with {s4}.", "close_window",
	[
		(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
		(faction_get_slot, ":g_talk_troop_original_faction_leader", ":g_talk_troop_original_faction", slot_faction_leader),
		(str_store_troop_name, 4, ":g_talk_troop_original_faction_leader"),
		(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(neq, "$supported_pretender", ":troop"),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
			(call_script, "script_change_troop_faction", ":troop", ":g_talk_troop_original_faction"),
		(try_end),
		(troop_set_faction, "$g_talk_troop", "fac_neutral"),
		(faction_set_slot, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(store_faction_of_party, ":faction_of_troop_troop", ":party"),
			(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
			(assign, ":value", 1),
			(neg|party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(call_script, "script_give_center_to_lord", ":party", "trp_player", 0),
		(try_end),
		(party_remove_members, "p_main_party", "$supported_pretender", 1),
		(faction_set_slot, ":g_talk_troop_original_faction", slot_faction_instability, 0),
		(assign, "$supported_pretender", 0),
		(try_begin),
			(eq, ":value", 1),
			(faction_set_color, "fac_player_supporters_faction", 16711680),
			(try_begin),
				(eq, "$g_player_minister", 0),
				(assign, "$g_player_minister", "trp_temporary_minister"),
			(try_end),
		(else_try),
			(call_script, "script_deactivate_player_faction"),
		(try_end),
		(call_script, "script_change_player_honor", -20),
		(call_script, "script_fail_quest", "qst_rebel_against_kingdom"),
		(call_script, "script_end_quest", "qst_rebel_against_kingdom")
	]],

	[anyone|plyr, "supported_pretender_talk",
	[],
	"{reg65?My lady:My lord}, would you allow me to check out your equipment?", "supported_pretender_equip",
	[]],

	[anyone, "supported_pretender_equip",
	[],
	"Very well, it's all here...", "supported_pretender_pretalk",
	[
		(change_screen_equip_other)
	]],

	[anyone|plyr, "supported_pretender_talk",
	[],
	"If it would please you, can you tell me about your skills?", "pretneder_view_char_requested",
	[]],

	[anyone, "pretneder_view_char_requested",
	[],
	"Well, all right.", "supported_pretender_pretalk",
	[
		(change_screen_view_character)
	]],

	[anyone|plyr, "supported_pretender_talk",
	[
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(assign, ":value_2", 0),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(this_or_next|eq, ":faction_of_party_party", ":value"),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(party_slot_eq, ":party", slot_town_lord, -1),
			(assign, ":value_2", 1),
		(try_end),
		(eq, ":value_2", 1)
	],
	"I suggest that you decide who should hold a fief that does not have a lord.", "supported_pretender_grant_fief",
	[]],

	[anyone, "supported_pretender_grant_fief",
	[],
	"Which fief did you have in mind?", "supported_pretender_grant_fief_select",
	[]],

	[anyone|repeat_for_parties|plyr, "supported_pretender_grant_fief_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(this_or_next|eq, ":faction_of_party_repeat_object", ":value"),
		(eq, ":faction_of_party_repeat_object", "fac_player_supporters_faction"),
		(party_slot_eq, ":repeat_object", slot_town_lord, -1),
		(str_store_party_name, 4, ":repeat_object")
	],
	"{s4}", "supported_pretender_grant_fief_choose_recipient",
	[
		(store_repeat_object, "$g_center_taken_by_player_faction")
	]],

	[anyone, "supported_pretender_grant_fief_choose_recipient",
	[],
	"And who should receive it?", "center_captured_rebellion",
	[
		(str_store_party_name, 4, "$g_center_taken_by_player_faction")
	]],

	[anyone|plyr, "supported_pretender_grant_fief_select",
	[],
	"Never mind.", "supported_pretender_pretalk",
	[]],

	[anyone|plyr, "supported_pretender_talk",
	[],
	"Let us keep going, your grace.", "close_window",
	[]],

	[anyone, "do_member_trade",
	[],
	"Anything else?", "member_talk",
	[]],

	[anyone, "member_pretalk",
	[],
	"Anything else?", "member_talk",
	[]],

	[anyone, "member_chat",
	[
		(store_conversation_troop, "$g_talk_troop"),
		(troop_is_hero, "$g_talk_troop"),
		(troop_get_slot, ":g_talk_troop_honorific", "$g_talk_troop", slot_troop_honorific),
		(str_store_string, 5, ":g_talk_troop_honorific")
	],
	"Yes?", "member_talk",
	[
		(try_begin),
			(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
			(unlock_achievement, 46),
		(try_end)
	]],

	[anyone|plyr, "member_talk",
	[
		(is_between, "$players_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player")
	],
	"As marshal, I wish you to send a message to the vassals of the realm", "member_direct_campaign",
	[]],

	[anyone|plyr, "member_talk",
	[],
	"Let's talk about books.", "member_talk_about_books",
	[]],

	[anyone, "member_talk_about_books",
	[],
	"Well, what do you want to do? ", "player_talk_about_books",
	[]],

	[anyone|plyr, "player_talk_about_books",
	[],
	"Let us exchange books.", "member_exchange_books",
	[]],

	[anyone, "member_exchange_books",
	[],
	"Very well, what kind of books do you want to exchange?", "member_exchange_books_type",
	[]],

	[anyone|plyr, "member_exchange_books_type",
	[],
	"Readable books.", "member_exchange_readable_books",
	[]],

	[anyone|plyr, "member_exchange_books_type",
	[],
	"Reference books.", "member_exchange_reference_books",
	[]],

	[anyone|plyr, "member_exchange_books_type",
	[],
	"Never mind.", "member_talk_about_books",
	[]],

	[anyone, "member_exchange_readable_books",
	[],
	"Very well, let's exchange readable books.", "member_exchange_readable_books_1",
	[]],

	[anyone, "member_exchange_reference_books",
	[],
	"Very well, let's exchange reference books.", "member_exchange_reference_books_1",
	[]],

	[anyone|repeat_for_100|plyr, "member_exchange_readable_books_1",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "itm_book_tactics", "itm_book_wound_treatment_reference"),
		(call_script, "script_get_troop_item_amount", "$g_talk_troop", ":repeat_object"),
		(gt, reg0, 0),
		(store_free_inventory_capacity, ":free_inventory_capacity_player", "trp_player"),
		(gt, ":free_inventory_capacity_player", 0),
		(str_store_item_name, 1, ":repeat_object"),
		(troop_get_type, reg1, "$g_talk_troop"),
		(try_begin),
			(store_attribute_level, ":attribute_level_g_talk_troop_2", "$g_talk_troop", 2),
			(item_get_slot, ":repeat_object_intelligence_requirement", ":repeat_object", slot_item_intelligence_requirement),
			(gt, ":repeat_object_intelligence_requirement", ":attribute_level_g_talk_troop_2"),
			(str_store_string, 2, "@{reg1?She:He} can't read it."),
		(else_try),
			(call_script, "script_get_book_read_slot", "$g_talk_troop", ":repeat_object"),
			(assign, ":var_5", reg0),
			(troop_slot_eq, "trp_book_read", ":var_5", 1),
			(str_store_string, 2, "@{reg1?She:He} have already read it."),
		(else_try),
			(troop_get_slot, ":g_talk_troop_330", "$g_talk_troop", 330),
			(eq, ":g_talk_troop_330", ":repeat_object"),
			(call_script, "script_get_troop_item_amount", "$g_talk_troop", ":repeat_object"),
			(gt, reg0, 0),
			(str_store_string, 2, "@{reg1?She:He} is reading it."),
		(else_try),
			(str_store_string, 2, "@{reg1?She:He} can read it."),
		(try_end)
	],
	"Take back {s1}({s2}).", "member_take_back_readable_books",
	[
		(store_repeat_object, "$readable_book_to_take_back")
	]],

	[anyone|repeat_for_100|plyr, "member_exchange_readable_books_1",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "itm_book_tactics", "itm_book_wound_treatment_reference"),
		(call_script, "script_get_troop_item_amount", "trp_player", ":repeat_object"),
		(gt, reg0, 0),
		(store_free_inventory_capacity, ":free_inventory_capacity_g_talk_troop", "$g_talk_troop"),
		(gt, ":free_inventory_capacity_g_talk_troop", 0),
		(str_store_item_name, 1, ":repeat_object"),
		(troop_get_type, reg1, "$g_talk_troop"),
		(try_begin),
			(store_attribute_level, ":attribute_level_g_talk_troop_2", "$g_talk_troop", 2),
			(item_get_slot, ":repeat_object_intelligence_requirement", ":repeat_object", slot_item_intelligence_requirement),
			(gt, ":repeat_object_intelligence_requirement", ":attribute_level_g_talk_troop_2"),
			(str_store_string, 2, "@{reg1?She:He} can't read it."),
		(else_try),
			(call_script, "script_get_book_read_slot", "$g_talk_troop", ":repeat_object"),
			(assign, ":var_5", reg0),
			(troop_slot_eq, "trp_book_read", ":var_5", 1),
			(str_store_string, 2, "@{reg1?She:He} have already read it."),
		(else_try),
			(troop_get_slot, ":g_talk_troop_330", "$g_talk_troop", 330),
			(eq, ":g_talk_troop_330", ":repeat_object"),
			(call_script, "script_get_troop_item_amount", "$g_talk_troop", ":repeat_object"),
			(gt, reg0, 0),
			(str_store_string, 2, "@{reg1?She:He} is reading it."),
		(else_try),
			(str_store_string, 2, "@{reg1?She:He} can read it."),
		(try_end)
	],
	"Give away {s1}({s2}).", "member_give_away_readable_books",
	[
		(store_repeat_object, "$readable_book_to_give_away")
	]],

	[anyone|plyr, "member_exchange_readable_books_1",
	[],
	"Never mind.", "member_talk_about_books",
	[]],

	[anyone, "member_take_back_readable_books",
	[],
	"OK, very well.", "member_exchange_readable_books_1",
	[
		(troop_add_item, "trp_player", "$readable_book_to_take_back"),
		(troop_remove_item, "$g_talk_troop", "$readable_book_to_take_back")
	]],

	[anyone, "member_give_away_readable_books",
	[],
	"OK, very well.", "member_exchange_readable_books_1",
	[
		(troop_add_item, "$g_talk_troop", "$readable_book_to_give_away"),
		(troop_remove_item, "trp_player", "$readable_book_to_give_away")
	]],

	[anyone|repeat_for_100|plyr, "member_exchange_reference_books_1",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "itm_book_wound_treatment_reference", "itm_trade_spice"),
		(call_script, "script_get_troop_item_amount", "$g_talk_troop", ":repeat_object"),
		(gt, reg0, 0),
		(store_free_inventory_capacity, ":free_inventory_capacity_player", "trp_player"),
		(gt, ":free_inventory_capacity_player", 0),
		(str_store_item_name, 1, ":repeat_object")
	],
	"Take back {s1}.", "member_take_back_reference_books",
	[
		(store_repeat_object, "$reference_book_to_take_back")
	]],

	[anyone|repeat_for_100|plyr, "member_exchange_reference_books_1",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "itm_book_wound_treatment_reference", "itm_trade_spice"),
		(call_script, "script_get_troop_item_amount", "trp_player", ":repeat_object"),
		(gt, reg0, 0),
		(store_free_inventory_capacity, ":free_inventory_capacity_g_talk_troop", "$g_talk_troop"),
		(gt, ":free_inventory_capacity_g_talk_troop", 0),
		(str_store_item_name, 1, ":repeat_object")
	],
	"Give away {s1}.", "member_give_away_reference_books",
	[
		(store_repeat_object, "$reference_book_to_give_away")
	]],

	[anyone|plyr, "member_exchange_reference_books_1",
	[],
	"Never mind.", "member_talk_about_books",
	[]],

	[anyone, "member_take_back_reference_books",
	[],
	"OK, very well.", "member_exchange_reference_books_1",
	[
		(troop_add_item, "trp_player", "$reference_book_to_take_back"),
		(troop_remove_item, "$g_talk_troop", "$reference_book_to_take_back")
	]],

	[anyone, "member_give_away_reference_books",
	[],
	"OK, very well.", "member_exchange_reference_books_1",
	[
		(troop_add_item, "$g_talk_troop", "$reference_book_to_give_away"),
		(troop_remove_item, "trp_player", "$reference_book_to_give_away")
	]],

	[anyone|plyr, "player_talk_about_books",
	[
		(troop_get_inventory_capacity, ":inventory_capacity_l_g_talk_troop", "$g_talk_troop"),
		(assign, ":var_2", 0),
		(try_for_range, ":number", 0, ":inventory_capacity_l_g_talk_troop"),
			(troop_get_inventory_slot, ":inventory_slot_g_talk_troop_number", "$g_talk_troop", ":number"),
			(is_between, ":inventory_slot_g_talk_troop_number", "itm_book_tactics", "itm_book_wound_treatment_reference"),
			(val_add, ":var_2", 1),
		(try_end),
		(gt, ":var_2", 0)
	],
	"I want you to read a book which I had gave to you.", "member_read_books",
	[]],

	[anyone, "member_read_books",
	[],
	"Very well, which book do you want me to read? ", "member_select_read_books",
	[]],

	[anyone|repeat_for_100|plyr, "member_select_read_books",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "itm_book_tactics", "itm_book_wound_treatment_reference"),
		(call_script, "script_get_troop_item_amount", "$g_talk_troop", ":repeat_object"),
		(gt, reg0, 0),
		(str_store_item_name, 1, ":repeat_object")
	],
	"{s1}.", "member_read_books_begin",
	[
		(store_repeat_object, "$readable_book_to_read")
	]],

	[anyone|plyr, "member_select_read_books",
	[],
	"OK.", "member_talk_about_books",
	[]],

	[anyone, "member_read_books_begin",
	[
		(assign, ":var_1", "$readable_book_to_read"),
		(str_store_item_name, 1, ":var_1"),
		(store_attribute_level, ":attribute_level_g_talk_troop_2", "$g_talk_troop", 2),
		(item_get_slot, ":var_1_intelligence_requirement", ":var_1", slot_item_intelligence_requirement),
		(gt, ":var_1_intelligence_requirement", ":attribute_level_g_talk_troop_2")
	],
	"I am sorry that I can't read {s1}.", "member_select_read_books",
	[]],

	[anyone, "member_read_books_begin",
	[
		(assign, ":var_1", "$readable_book_to_read"),
		(str_store_item_name, 1, ":var_1"),
		(call_script, "script_get_book_read_slot", "$g_talk_troop", ":var_1"),
		(assign, ":var_2", reg0),
		(troop_slot_eq, "trp_book_read", ":var_2", 1)
	],
	"I am sorry that I have already read {s1}.", "member_select_read_books",
	[]],

	[anyone, "member_read_books_begin",
	[
		(assign, ":var_1", "$readable_book_to_read"),
		(str_store_item_name, 1, ":var_1"),
		(call_script, "script_get_book_read_slot", "$g_talk_troop", ":var_1"),
		(assign, ":var_2", reg0),
		(troop_slot_eq, "trp_book_read", ":var_2", 0),
		(store_attribute_level, ":attribute_level_g_talk_troop_2", "$g_talk_troop", 2),
		(item_get_slot, ":var_1_intelligence_requirement", ":var_1", slot_item_intelligence_requirement),
		(le, ":var_1_intelligence_requirement", ":attribute_level_g_talk_troop_2"),
		(troop_set_slot, "$g_talk_troop", 330, ":var_1")
	],
	"OK, I will read {s1} whenever I have the time.", "member_select_read_books",
	[]],

	[anyone|plyr, "player_talk_about_books",
	[],
	"Tell me about the condition of your reading.", "member_tell_read_books_condition",
	[]],

	[anyone, "member_tell_read_books_condition",
	[
		(assign, ":var_1", 0),
		(str_store_string, 0, "@none"),
		(try_for_range, ":item", "itm_book_tactics", "itm_book_wound_treatment_reference"),
			(call_script, "script_get_book_read_slot", "$g_talk_troop", ":item"),
			(assign, ":value", reg0),
			(troop_slot_eq, "trp_book_read", ":value", 1),
			(try_begin),
				(eq, ":var_1", 0),
				(str_store_item_name, 0, ":item"),
			(else_try),
				(eq, ":var_1", 1),
				(str_store_item_name, 1, ":item"),
				(str_store_string, 0, "@{s1} and {s0}"),
			(else_try),
				(str_store_item_name, 1, ":item"),
				(str_store_string, 0, "@{s1}, {s0}"),
			(try_end),
			(val_add, ":var_1", 1),
		(try_end),
		(assign, reg4, ":var_1"),
		(troop_get_slot, ":g_talk_troop_330", "$g_talk_troop", 330),
		(assign, reg1, ":g_talk_troop_330"),
		(str_store_item_name, 1, ":g_talk_troop_330"),
		(call_script, "script_get_troop_item_amount", "$g_talk_troop", ":g_talk_troop_330"),
		(try_begin),
			(eq, reg0, 0),
			(troop_set_slot, "$g_talk_troop", 330, 0),
			(assign, reg1, 0),
		(try_end),
		(call_script, "script_get_book_read_slot", "$g_talk_troop", ":g_talk_troop_330"),
		(assign, ":value", reg0),
		(troop_get_slot, ":book_reading_progress_value", "trp_book_reading_progress", ":value"),
		(store_div, reg2, ":book_reading_progress_value", 10),
		(store_mod, reg3, ":book_reading_progress_value", 10)
	],
	"{reg4?I have read these books: {s0}:I have read no books}.^{reg1?I am currently reading: {s1}, reading progress:{reg2}.{reg3}%:I am not reading any books now}.", "member_tell_read_books_condition_1",
	[]],

	[anyone|plyr, "member_tell_read_books_condition_1",
	[],
	"That's all I needed to know.", "member_talk_about_books",
	[]],

	[anyone|plyr, "player_talk_about_books",
	[],
	"Never mind.", "member_chat",
	[]],

	[anyone|plyr, "member_talk",
	[],
	"I'd like to ask you something about your equipment.", "member_personal_talk",
	[]],

	[anyone, "member_personal_talk",
	[],
	"What do you want to do?", "member_personal_action",
	[]],

	[anyone|plyr, "member_personal_action",
	[],
	"Give me all items in your inventory.", "member_transfer_inventory",
	[]],

	[anyone, "member_transfer_inventory",
	[],
	"Ok, at your will.", "do_member_personal_action",
	[
		(call_script, "script_transfer_inventory", "$g_talk_troop", "trp_player", 0)
	]],

	[anyone|plyr, "member_personal_action",
	[],
	"Let me see your equipment.", "member_equipment",
	[]],

	[anyone, "member_equipment",
	[],
	"Very well, it's all here...", "do_member_personal_action",
	[
		(change_screen_equip_other)
	]],

	[anyone|plyr, "member_personal_action",
	[],
	"Let me see your inventory.", "member_inventory",
	[]],

	[anyone, "member_inventory",
	[],
	"Very well, it's all here...", "do_member_personal_action",
	[
		(change_screen_loot, "$g_talk_troop")
	]],

	[anyone|plyr, "member_personal_action",
	[],
	"Never mind.", "member_chat",
	[]],

	[anyone, "do_member_personal_action",
	[],
	"Anything else?", "member_personal_action",
	[]],

	[anyone, "do_member_trade",
	[],
	"Anything else?", "member_talk",
	[]],

	[anyone|plyr, "member_talk",
	[],
	"What can you tell me about your skills?", "view_member_char_requested",
	[]],

	[anyone, "view_member_char_requested",
	[],
	"All right, let me tell you...", "do_member_view_char",
	[
		(change_screen_view_character)
	]],

	[anyone|plyr, "member_talk",
	[],
	"We need to separate for a while.", "member_separate",
	[
		(call_script, "script_npc_morale", "$g_talk_troop"),
		(assign, "$npc_quit_morale", reg0)
	]],

	[anyone, "member_separate",
	[
		(call_script, "script_get_number_of_hero_centers", "$g_talk_troop"),
		(this_or_next|gt, reg0, 0),
		(this_or_next|is_between, "$g_talk_troop", "trp_knight_1_1", "trp_kingdom_1_pretender"),
		(this_or_next|is_between, "$g_talk_troop", "trp_kingdom_1_lord", "trp_knight_1_1"),
		(this_or_next|is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(this_or_next|is_between, "$g_talk_troop", "trp_knight_1_1", "trp_kingdom_1_pretender"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 7)
	],
	"Very well, I will return to managing my own estate.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_occupation, 2),
		(remove_member_from_party, "$g_talk_troop")
	]],

	[anyone, "member_separate",
	[
		(gt, "$npc_quit_morale", 30)
	],
	"Oh really? Well, I'm not just going to wait around here. I'm going to go to the towns to look for other work. Is that what you want?", "member_separate_confirm",
	[]],

	[anyone, "member_separate",
	[],
	"Well, actually, there was something I needed to tell you.", "companion_quitting",
	[
		(assign, "$player_can_refuse_npc_quitting", 0),
		(assign, "$player_can_persuade_npc", 0)
	]],

	[anyone|plyr, "member_separate_confirm",
	[],
	"That's right. We need to part ways.", "member_separate_yes",
	[]],

	[anyone|plyr, "member_separate_confirm",
	[],
	"No, I'd rather have you at my side.", "do_member_trade",
	[]],

	[anyone, "member_separate_yes",
	[],
	"Well. I'll be off, then. Look me up if you need me.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_occupation, 0),
		(troop_set_slot, "$g_talk_troop", slot_troop_playerparty_history, 2),
		(remove_member_from_party, "$g_talk_troop"),
		(store_faction_of_troop, ":faction_of_troop_g_talk_troop", "$g_talk_troop"),
		(call_script, "script_troop_set_title_according_to_faction_gender_and_lands", "$g_talk_troop", ":faction_of_troop_g_talk_troop")
	]],

	[anyone|plyr, "member_talk",
	[],
	"I'd like to ask you something.", "member_question",
	[]],

	[anyone|plyr, "member_talk",
	[],
	"Never mind.", "close_window",
	[]],

	[anyone, "member_question",
	[],
	"Very well. What did you want to ask?", "member_question_2",
	[]],

	[anyone|plyr, "member_question_2",
	[],
	"How do you feel about the way things are going in this company?", "member_morale",
	[]],

	[anyone|plyr, "member_question_2",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord")
	],
	"Tell me your story again.", "member_background_recap",
	[]],

	[anyone|plyr, "member_question_2",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(troop_slot_ge, "$g_talk_troop", 60, 1),
		(troop_slot_ge, "$g_talk_troop", 129, 1),
		(troop_slot_ge, "$g_talk_troop", 105, 1),
		(troop_slot_eq, "$g_talk_troop", slot_troop_kingsupport_state, 0)
	],
	"I suppose you know that I aspire to be {king/queen} of this land?", "member_kingsupport_1",
	[]],

	[anyone|plyr, "member_question_2",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord")
	],
	"Do you have any connections that we could use to our advantage?", "member_intelgathering_1",
	[]],

	[anyone|plyr, "member_question_2",
	[
		(call_script, "script_get_number_of_hero_centers", "$g_talk_troop"),
		(eq, reg0, 0),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 7),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 6),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(neg|is_between, "$g_talk_troop", "trp_knight_1_1", "trp_kingdom_1_pretender"),
		(neg|is_between, "$g_talk_troop", "trp_kingdom_1_lord", "trp_knight_1_1"),
		(neg|is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(assign, reg0, 49),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
		(try_end),
		(this_or_next|ge, reg0, 50),
		(faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player")
	],
	"Would you be interested in holding a fief?", "member_fief_grant_1",
	[]],

	[anyone, "member_morale",
	[
		(call_script, "script_npc_morale", "$g_talk_troop")
	],
	"{s21}", "do_member_trade",
	[]],

	[anyone, "member_background_recap",
	[
		(str_clear, 19),
		(troop_get_slot, ":g_talk_troop_backstory_b", "$g_talk_troop", slot_troop_backstory_b),
		(str_store_string, 5, ":g_talk_troop_backstory_b")
	],
	"{s5}", "member_background_recap_33",
	[]],

	[anyone, "member_background_recap_33",
	[
		(str_clear, 19),
		(troop_get_slot, ":g_talk_troop_backstory_c", "$g_talk_troop", slot_troop_backstory_c),
		(str_store_string, 5, ":g_talk_troop_backstory_c")
	],
	"{s5}", "member_background_recap_3",
	[]],

	[anyone, "member_background_recap_3",
	[],
	"There's not much more to tell.", "do_member_trade",
	[]],

	[anyone, "do_member_view_char",
	[],
	"Anything else?", "member_talk",
	[]],

	[anyone, "member_kingsupport_1",
	[
		(troop_get_slot, ":g_talk_troop_morality_penalties", "$g_talk_troop", slot_troop_morality_penalties),
		(gt, ":g_talk_troop_morality_penalties", 10)
	],
	"Um... Yes. I had heard.", "do_member_trade",
	[]],

	[anyone, "member_kingsupport_1",
	[
		(store_sub, ":value", "$g_talk_troop", "trp_npc1"),
		(store_add, ":value_2", "str_npc1_kingsupport_1", ":value"),
		(str_store_string, 21, ":value_2")
	],
	"{s21}", "member_kingsupport_1a",
	[]],

	[anyone|plyr, "member_kingsupport_1a",
	[],
	"Would you then support my cause?", "member_kingsupport_2",
	[]],

	[anyone|plyr, "member_kingsupport_1a",
	[],
	"Very good. I shall keep that in mind.", "do_member_trade",
	[]],

	[anyone, "member_kingsupport_2",
	[
		(assign, ":value", -1),
		(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 5),
			(troop_get_slot, ":troop_days_on_mission", ":troop", slot_troop_days_on_mission),
			(gt, ":troop_days_on_mission", 17),
			(neg|main_party_has_troop, ":troop"),
			(assign, ":value", ":troop"),
		(try_end),
		(gt, ":value", -1),
		(troop_get_slot, ":g_talk_troop_honorific", "$g_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":g_talk_troop_honorific"),
		(str_store_troop_name, 22, ":value")
	],
	"I would, {s21}. Moreover, I have a proposal on how I might help you attain your throne. But you recently sent {s22} off on a similar mission. Perhaps we should wait for a couple of weeks to avoid drawing too much attention to ourselves.", "do_member_trade",
	[]],

	[anyone, "member_kingsupport_2",
	[
		(store_sub, ":value", "$g_talk_troop", "trp_npc1"),
		(store_add, ":value_2", "str_npc1_kingsupport_2", ":value"),
		(str_store_string, 21, ":value_2")
	],
	"{s21}", "member_kingsupport_2a",
	[]],

	[anyone|plyr, "member_kingsupport_2a",
	[
		(store_sub, ":value", "$g_talk_troop", "trp_npc1"),
		(store_add, ":value_2", "str_npc1_kingsupport_2a", ":value"),
		(str_store_string, 21, ":value_2")
	],
	"{s21}", "member_kingsupport_3",
	[]],

	[anyone|plyr, "member_kingsupport_2a",
	[
		(store_sub, ":value", "$g_talk_troop", "trp_npc1"),
		(store_add, ":value_2", "str_npc1_kingsupport_2b", ":value"),
		(str_store_string, 21, ":value_2")
	],
	"{s21}", "do_member_trade",
	[]],

	[anyone, "member_kingsupport_3",
	[
		(store_sub, ":value", "$g_talk_troop", "trp_npc1"),
		(store_add, ":value_2", "str_npc1_kingsupport_3", ":value"),
		(str_store_string, 21, ":value_2")
	],
	"{s21}", "member_kingsupport_3a",
	[]],

	[anyone|plyr, "member_kingsupport_3a",
	[],
	"Very good. You do that", "member_kingsupport_4",
	[]],

	[anyone|plyr, "member_kingsupport_3a",
	[],
	"On second thought, stay with me for a while", "do_member_trade",
	[]],

	[anyone, "member_kingsupport_4",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_days_on_mission, 21),
		(troop_set_slot, "$g_talk_troop", slot_troop_current_mission, 1),
		(remove_member_from_party, "$g_talk_troop", "p_main_party"),
		(troop_get_slot, ":g_talk_troop_honorific", "$g_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":g_talk_troop_honorific")
	],
	"Farewell then, {s21}, for a little while", "close_window",
	[]],

	[anyone, "member_intelgathering_1",
	[
		(troop_get_slot, ":g_talk_troop_town_with_contacts", "$g_talk_troop", slot_troop_town_with_contacts),
		(str_store_party_name, 17, ":g_talk_troop_town_with_contacts"),
		(store_faction_of_party, ":faction_of_party_g_talk_troop_town_with_contacts", ":g_talk_troop_town_with_contacts"),
		(str_store_faction_name, 18, ":faction_of_party_g_talk_troop_town_with_contacts"),
		(store_sub, ":value", "$g_talk_troop", "trp_npc1"),
		(store_add, ":value_2", "str_npc1_intel_mission", ":value"),
		(str_store_string, 21, ":value_2")
	],
	"{s21}", "member_intelgathering_3",
	[]],

	[anyone, "member_intelgathering_3",
	[
		(eq, 1, 0)
	],
	"Of course, as few people should know of this as possible. If you want to collect the information, or pull me out, then don't send a messenger. Come and get me yourself -- even if that means you have to sneak through the gates.", "member_intelgathering_3",
	[]],

	[anyone|plyr, "member_intelgathering_3",
	[],
	"Splendid idea -- you do that.", "member_intelgathering_4",
	[]],

	[anyone|plyr, "member_intelgathering_3",
	[],
	"Actually, hold off for now.", "do_member_trade",
	[]],

	[anyone, "member_intelgathering_4",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_days_on_mission, 5),
		(troop_set_slot, "$g_talk_troop", slot_troop_current_mission, 2),
		(remove_member_from_party, "$g_talk_troop", "p_main_party"),
		(troop_get_slot, ":g_talk_troop_honorific", "$g_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":g_talk_troop_honorific")
	],
	"Good. I should be ready to report in about five days. Farewell then, {s21}, for a little while.", "close_window",
	[]],

	[anyone|auto_proceed, "start",
	[
		(is_between, "$g_talk_troop", "trp_swadian_merchant", "trp_startup_merchants_end"),
		(eq, "$talk_context", 0)
	],
	"{!}.", "merchant_quest_4_start",
	[]],

	[anyone, "merchant_quest_4_start",
	[],
	"It's time, lads! Up and at them!", "close_window",
	[
		(try_for_agents, ":var_1"),
			(agent_get_troop_id, ":troop_id_var_1", ":var_1"),
			(try_begin),
				(eq, "$troop_trees", "trp_troop_tree_0"),
				(assign, ":value", "trp_bandit_n_looter"),
				(assign, ":value_2", "trp_bandit_n_manhunter"),
			(else_try),
				(eq, "$troop_trees", "trp_troop_tree_1"),
				(assign, ":value", "trp_bandit_r_looter"),
				(assign, ":value_2", "trp_bandit_r_manhunter"),
			(else_try),
				(eq, "$troop_trees", "trp_troop_tree_2"),
				(assign, ":value", "trp_bandit_e_looter"),
				(assign, ":value_2", "trp_bandit_e_manhunter"),
			(try_end),
			(is_between, ":troop_id_var_1", ":value", ":value_2"),
			(agent_set_team, ":var_1", 1),
		(try_end),
		(get_player_agent_no, ":player_agent_no"),
		(assign, ":value_3", 1000),
		(try_for_agents, ":var_7"),
			(neq, ":var_7", ":player_agent_no"),
			(agent_get_team, ":team_var_7", ":var_7"),
			(eq, ":team_var_7", 0),
			(agent_get_position, 0, ":var_7"),
			(try_for_agents, ":var_9"),
				(agent_get_team, ":team_var_9", ":var_9"),
				(eq, ":team_var_9", 1),
				(agent_get_position, 1, ":var_9"),
				(get_distance_between_positions, ":distance_between_positions_0_1", 0, 1),
				(le, ":distance_between_positions_0_1", ":value_3"),
				(assign, ":value_3", ":distance_between_positions_0_1"),
				(copy_position, 2, 1),
			(try_end),
			(agent_set_scripted_destination, ":var_7", 2, 0),
			(agent_set_speed_limit, ":var_7", 10),
		(try_end)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_relative_of_merchant", "trp_relative_of_merchants_end"),
		(try_begin),
			(check_quest_active, "qst_save_relative_of_merchant"),
			(call_script, "script_succeed_quest", "qst_save_relative_of_merchant"),
		(try_end),
		(str_store_party_name, 9, "$g_starting_town"),
		(assign, "$relative_of_merchant_is_found", 1)
	],
	"Thank you! Thank you, {my lord/my lady}, for rescuing me from those fiends. Did my brother in {s9} put you onto their track?", "relative_saved_1a",
	[]],

	[anyone|plyr, "relative_saved_1a",
	[],
	"Yes. I told him that I would find you. I advise you to return to your family as quickly as you can -- and be careful on the road.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_sea_raider_leader", "trp_bandit_leaders_end"),
		(eq, "$talk_context", 9)
	],
	"Ay! Spare me! Spare my life! Let me go, and I'll go far away from here, and learn an honest trade, and you'll never hear of me again!", "bandit_leader_1a",
	[]],

	[anyone|plyr, "bandit_leader_1a",
	[
		(is_between, "$g_talk_troop", "trp_sea_raider_leader", "trp_bandit_leaders_end")
	],
	"I'll spare your life -- but in exchange, I want information. Either you or your mates kidnapped the brother of a prominent merchant in town. Tell me where you're hiding him, and give me your word that you'll stop troubling the people of these parts, and you can go free.", "bandit_leader_1b",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 2),
		(is_between, "$g_talk_troop", "trp_sea_raider_leader", "trp_bandit_leaders_end")
	],
	"What do you want?", "looter_leader_1",
	[]],

	[anyone|plyr, "looter_leader_1",
	[
		(store_faction_of_party, ":faction_of_party_g_starting_town", "$g_starting_town"),
		(try_begin),
			(eq, ":faction_of_party_g_starting_town", "fac_kingdom_1"),
			(assign, ":value", "trp_swadian_merchant"),
		(else_try),
			(eq, ":faction_of_party_g_starting_town", "fac_kingdom_2"),
			(assign, ":value", "trp_vaegir_merchant"),
		(else_try),
			(eq, ":faction_of_party_g_starting_town", "fac_kingdom_3"),
			(assign, ":value", "trp_khergit_merchant"),
		(else_try),
			(eq, ":faction_of_party_g_starting_town", "fac_kingdom_4"),
			(assign, ":value", "trp_nord_merchant"),
		(else_try),
			(eq, ":faction_of_party_g_starting_town", "fac_kingdom_5"),
			(assign, ":value", "trp_rhodok_merchant"),
		(else_try),
			(eq, ":faction_of_party_g_starting_town", "fac_kingdom_6"),
			(assign, ":value", "trp_sarranid_merchant"),
		(try_end),
		(str_store_troop_name, 9, ":value")
	],
	"I've been looking for you. Tell me where you keep your prisoners, and I'll let you go.", "looter_leader_2",
	[]],

	[anyone|plyr, "looter_leader_1",
	[],
	"Nothing. We'll leave you in peace.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "looter_leader_2",
	[],
	"Hah! Those prisoners are only going free if you pay their ransom. Did you bring any silver?", "looter_leader_3",
	[]],

	[anyone|plyr, "looter_leader_3",
	[],
	"No, but I brought steel.", "close_window",
	[]],

	[anyone, "bandit_leader_1b",
	[
		(is_between, "$g_talk_troop", "trp_sea_raider_leader", "trp_bandit_leaders_end"),
		(assign, ":var_1", 0),
		(try_for_range, ":party", "p_village_1", "p_salt_mine"),
			(party_slot_eq, ":party", slot_village_bound_center, "$g_starting_town"),
			(val_add, ":var_1", 1),
		(try_end),
		(store_random_in_range, ":random_in_range_0_var_1", 0, ":var_1"),
		(val_add, ":random_in_range_0_var_1", 1),
		(try_for_range, ":party", "p_village_1", "p_salt_mine"),
			(party_slot_eq, ":party", slot_village_bound_center, "$g_starting_town"),
			(val_sub, ":random_in_range_0_var_1", 1),
			(eq, ":random_in_range_0_var_1", 0),
			(assign, "$lair_neighboor_village", ":party"),
		(try_end),
		(str_store_party_name_link, 9, "$lair_neighboor_village"),
		(set_spawn_radius, 4),
		(try_begin),
			(eq, "$troop_trees", "trp_troop_tree_0"),
			(spawn_around_party, "$lair_neighboor_village", "pt_looter_lair"),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_1"),
			(spawn_around_party, "$lair_neighboor_village", "pt_looter_lair_r"),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_2"),
			(spawn_around_party, "$lair_neighboor_village", "pt_looter_lair_e"),
		(try_end),
		(party_set_slot, reg0, slot_party_type, 18),
		(party_set_flags, reg0, 16384, 1)
	],
	"Oh bless you, {my lord/my lady}. May the Seven bless you! We've done the lad no harm. We've been keeping him in our hideout near Storm's End. I'll describe the area nearby in detail, so there's no mistaking it...", "close_window",
	[
		(call_script, "script_succeed_quest", "qst_learn_where_merchant_brother_is"),
		(call_script, "script_end_quest", "qst_learn_where_merchant_brother_is"),
		(store_faction_of_party, ":faction_of_party_g_starting_town", "$g_starting_town"),
		(try_begin),
			(eq, ":faction_of_party_g_starting_town", "fac_kingdom_1"),
			(assign, ":value", "trp_swadian_merchant"),
		(else_try),
			(eq, ":faction_of_party_g_starting_town", "fac_kingdom_2"),
			(assign, ":value", "trp_vaegir_merchant"),
		(else_try),
			(eq, ":faction_of_party_g_starting_town", "fac_kingdom_3"),
			(assign, ":value", "trp_khergit_merchant"),
		(else_try),
			(eq, ":faction_of_party_g_starting_town", "fac_kingdom_4"),
			(assign, ":value", "trp_nord_merchant"),
		(else_try),
			(eq, ":faction_of_party_g_starting_town", "fac_kingdom_5"),
			(assign, ":value", "trp_rhodok_merchant"),
		(else_try),
			(eq, ":faction_of_party_g_starting_town", "fac_kingdom_6"),
			(assign, ":value", "trp_sarranid_merchant"),
		(try_end),
		(str_store_troop_name, 10, ":value"),
		(str_store_string, 2, "str_find_the_lair_near_s9_and_free_the_brother_of_the_prominent_s10_merchant"),
		(call_script, "script_start_quest", "qst_save_relative_of_merchant", ":value")
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(check_quest_active, "qst_rescue_prisoner"),
		(check_quest_succeeded, "qst_rescue_prisoner"),
		(quest_slot_eq, "qst_rescue_prisoner", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_get_slot, ":rescue_prisoner_target_troop", "qst_rescue_prisoner", slot_quest_target_troop),
		(call_script, "script_troop_get_family_relation_to_troop", ":rescue_prisoner_target_troop", "$g_talk_troop")
	],
	"{playername}, you saved {reg4?her:him}! Thank you ever so much for rescuing my {s11}. Please, take this as some small repayment for your noble deed.", "rescue_prisoner_succeed_2",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 8),
		(add_xp_as_reward, 2000),
		(call_script, "script_troop_add_gold", "trp_player", 1500),
		(call_script, "script_end_quest", "qst_rescue_prisoner")
	]],

	[anyone|plyr, "rescue_prisoner_succeed_2",
	[],
	"Always an honour to serve, {s65}.", "lord_pretalk",
	[]],

	[anyone|auto_proceed, "start",
	[
		(is_between, "$g_talk_troop", "trp_swadian_merchant", "trp_startup_merchants_end"),
		(eq, "$talk_context", 11),
		(eq, "$talked_with_merchant", 0)
	],
	"{!}.", "start_up_quest_1_next",
	[]],

	[anyone, "start_up_quest_1_next",
	[],
	"Are you all right? Well.... I guess you're alive, at any rate. I'm not sure that we can say the same for the other fellow. That's one less thief to trouble our streets at night, although the Father knows he won't be the last.... Anyway, let's talk more inside, there's a chill to the air I'd rather be without.", "close_window",
	[
		(assign, "$talked_with_merchant", 1),
		(mission_disable_talk)
	]],

	[anyone|auto_proceed, "start",
	[
		(is_between, "$g_talk_troop", "trp_swadian_merchant", "trp_startup_merchants_end"),
		(eq, "$talk_context", 14),
		(call_script, "script_party_count_members_with_full_health", "p_main_party"),
		(assign, ":var_1", reg0),
		(assign, ":value", 0),
		(try_begin),
			(check_quest_active, "qst_collect_men"),
			(neg|check_quest_succeeded, "qst_collect_men"),
			(lt, ":var_1", 5),
			(try_begin),
				(le, ":var_1", 1),
				(str_store_string, 11, "str_please_sir_my_lady_go_find_some_volunteers_i_do_not_know_how_much_time_we_have"),
			(else_try),
				(str_store_string, 11, "str_you_need_more_men_sir_my_lady"),
			(try_end),
			(assign, ":value", 1),
		(else_try),
			(check_quest_active, "qst_learn_where_merchant_brother_is"),
			(neg|check_quest_succeeded, "qst_learn_where_merchant_brother_is"),
			(str_store_string, 11, "str_do_not_waste_time_go_and_learn_where_my_brother_is"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"{!}.", "start_up_quest_2_next",
	[]],

	[anyone, "start_up_quest_2_next",
	[],
	"{!}{s11}", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_swadian_merchant", "trp_startup_merchants_end"),
		(eq, "$talk_context", 14),
		(check_quest_active, "qst_collect_men"),
		(neg|check_quest_succeeded, "qst_duel_for_lady"),
		(call_script, "script_party_count_members_with_full_health", "p_main_party"),
		(ge, reg0, 5),
		(str_store_party_name, 9, "$current_town")
	],
	"Splendid work. You have hired enough men to take on the bandits. Now -- travellers entering {s9} have told us that there is a small group of robbers lurking on the outside of town. I suspect that they are all from the same band, the one that took my brother. Hunt them down and defeat them, and make them disclose the location of their lair!", "merchant_quest_2a",
	[
		(call_script, "script_succeed_quest", "qst_collect_men"),
		(call_script, "script_end_quest", "qst_collect_men")
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_swadian_merchant", "trp_startup_merchants_end"),
		(eq, "$talk_context", 14),
		(check_quest_active, "qst_save_relative_of_merchant"),
		(neg|check_quest_succeeded, "qst_save_relative_of_merchant"),
		(str_store_party_name, 9, "$current_town")
	],
	"So, you've found out where they hid my brother? Splendid work. I flatter myself that I'm a fine judge of character, and you look to be a {man/woman} who can get things done. Now, go out and save his unworthy hide!", "merchant_quest_3a",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_swadian_merchant", "trp_startup_merchants_end"),
		(eq, "$talk_context", 14),
		(check_quest_active, "qst_save_relative_of_merchant"),
		(check_quest_succeeded, "qst_save_relative_of_merchant")
	],
	"Well... My brother is home safe. I'm not sure what to do with him -- maybe pack him off to Oldtown, or have him join the brothers on the Quiet Isle. That way, if he gets knocked on the head in a street brawl, no one can say it's my fault. But that's not your problem. Here's the rest of your reward. It was well-earned.", "merchant_quest_3b",
	[
		(call_script, "script_finish_quest", "qst_save_relative_of_merchant", 100),
		(troop_add_gold, "trp_player", 200)
	]],

	[anyone|plyr, "merchant_quest_3b",
	[],
	"The money is most welcome, and I am glad to have been of service", "merchant_quest_4a",
	[]],

	[anyone, "merchant_quest_4a",
	[],
	"Good! Now... Are you interested in making some more?", "merchant_quest_4b",
	[]],

	[anyone|plyr, "merchant_quest_4b",
	[],
	"Possibly. What do you need?", "merchant_quest_4b1",
	[]],

	[anyone, "merchant_quest_4b1",
	[],
	"Remember how I told you that the bandits had an ally inside the walls? I think I know who it is -- the captain of the watch, no less. Some months ago this captain, seeing the amount of profit we merchants were making from trade across the frontiers, decided to borrow some money to sponsor a caravan. Unfortunately, like many who are new to commerce, he failed to realize that great profit only comes with great risk. So he sank all his money into the most expensive commodities, and of course his caravan was captured and looted, and he lost everything.", "merchant_quest_4b2",
	[]],

	[anyone, "merchant_quest_4b2",
	[],
	"As a consequence, it seems, our captain turned to villainy to recoup his fortune. I supposed I'd do the same if, the Seven forbid, I ever faced indebtedness and ruination. Now, any watch captain worth his salary will have a few thieves and robbers on his payroll, to inform on the rest, but our captain decides to employ these bastards wholesale. He brings them into the town, lets them do as they will, and takes a share of their take. You've heard of poachers turning gamekeepers? Well, in this unfortunate world, sometimes gamekeepers will turn poacher. Luckily, there's are still a few brave, honest souls in the watch who've told me how he works.", "merchant_quest_4b3",
	[]],

	[anyone, "merchant_quest_4b3",
	[
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(str_store_troop_name, 4, ":g_encountered_party_faction_leader"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":g_encountered_party_faction_leader", 4),
		(call_script, "script_dplmc_print_cultural_word_to_sreg", ":g_encountered_party_faction_leader", 4, 0)
	],
	"Now -- here's my plan. I could bring this to the attention of {s4}, but that would mean an inquiry, my word against the captain's, and witnesses can be bought and evidence destroyed, or maybe the whole thing will be forgotten if the enemy comes across the border again, and all I'll get for my trouble is a knife in the ribs. In time of war, you see, a {s0}'s eye wanders far from {reg4?her:his} domain, and {reg4?her:his} subjects suffer. So I've got another idea. I've got a small group of townsfolk together, some men in my employ and some others who've lost relatives to these bandits, and we'll storm the captain's home and bring him in chains before {s4}, hopefully with a few captured bandits to explain how things stack up.", "merchant_quest_4b4",
	[]],

	[anyone, "merchant_quest_4b4",
	[],
	"All I need now is someone to lead my little army into battle -- and I can't think of anyone better than you. So, what do you say?", "merchant_quest_4b5",
	[]],

	[anyone|plyr, "merchant_quest_4b5",
	[],
	"How do I know that you're telling me the truth?", "merchant_quest_4b6",
	[]],

	[anyone, "merchant_quest_4b6",
	[
		(str_store_party_name, 4, "$g_encountered_party")
	],
	"Oh, well, I suppose it's possible that I found a dozen bandits who were willing to give their lives to give a passing stranger a false impression of life in old {s4}... Well, I guess you can't really know if my word is good, but I reckon you've learned by now that my money is good, and there's another 100 stags, or maybe a bit more, that's waiting for you if you'll do me this last little favor. So what do you say?", "merchant_quest_4b7",
	[]],

	[anyone|plyr, "merchant_quest_4b7",
	[],
	"All right. I'll lead your men.", "merchant_quest_4b8",
	[]],

	[anyone|plyr, "merchant_quest_4b7",
	[],
	"I'm sorry. This is too much, too fast. I need time to think.", "merchant_quest_4_decline",
	[]],

	[anyone, "merchant_quest_4b8",
	[],
	"Splendid. It's been a long time since I staked so much on a single throw of the dice, and frankly I find it exhilarating. My men are ready to move on your word. Are you ready?", "merchant_quest_4b9",
	[]],

	[anyone|plyr, "merchant_quest_4b9",
	[],
	"Yes. Give them the sign.", "merchant_quest_4_accept",
	[]],

	[anyone|plyr, "merchant_quest_4b9",
	[],
	"Not now. I will need to rest before I can fight again.", "merchant_quest_4_decline",
	[]],

	[anyone, "merchant_quest_4_accept",
	[],
	"Good! Now -- strike hard, strike fast, and the captain and his henchmen won't know what hit them. May the Seven be with you!", "close_window",
	[
		(assign, "$current_startup_quest_phase", 3),
		(jump_to_menu, "mnu_start_phase_3"),
		(finish_mission)
	]],

	[anyone, "merchant_quest_4_decline",
	[],
	"Right. I can keep my men standing by. If you let this go too long, then I suppose that I shall have to finish this affair without you, but I would be most pleased if you could be part of it as well. For now, take what time you need.", "close_window",
	[]],

	[anyone|plyr, "merchant_quest_2a",
	[],
	"Very well. I shall hunt for bandits.", "close_window",
	[
		(str_store_party_name, 9, "$current_town"),
		(str_store_string, 2, "str_start_up_quest_message_2"),
		(call_script, "script_start_quest", "qst_learn_where_merchant_brother_is", "$g_talk_troop"),
		(set_spawn_radius, 2),
		(try_begin),
			(eq, "$troop_trees", "trp_troop_tree_0"),
			(spawn_around_party, "$current_town", "pt_leaded_looters"),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_1"),
			(spawn_around_party, "$current_town", "pt_leaded_looters_r"),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_2"),
			(spawn_around_party, "$current_town", "pt_leaded_looters_e"),
		(try_end),
		(assign, ":var_1", reg0),
		(party_get_position, 0, "$current_town"),
		(party_set_ai_behavior, ":var_1", 2),
		(party_set_ai_patrol_radius, ":var_1", 3),
		(party_set_ai_target_position, ":var_1", 0)
	]],

	[anyone|plyr, "merchant_quest_2a",
	[],
	"Why don't you come with us?", "merchant_quest_2a_whynotcome",
	[]],

	[anyone, "merchant_quest_2a_whynotcome",
	[],
	"Because I'm paying you to go take care of it. That's the short answer. The long answer is that I've got some leads to follow up here in town, and I have just as much chance of getting knocked on my head as you, if that's what you're asking. But I respect your question. Now, what do you say?", "merchant_quest_2a",
	[]],

	[anyone|plyr, "merchant_quest_2a",
	[],
	"I cannot deal with this matter at this time.", "close_window",
	[]],

	[anyone|plyr, "merchant_quest_3a",
	[],
	"Very well. I go now to attack the bandits in their lair, and find your brother.", "close_window",
	[]],

	[anyone|plyr, "merchant_quest_3a",
	[],
	"I cannot deal with this matter at this time.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_swadian_merchant", "trp_startup_merchants_end"),
		(this_or_next|eq, "$talk_context", 14),
		(neq, "$dialog_with_merchant_ended", 0),
		(assign, ":value", 0),
		(try_begin),
			(neg|check_quest_succeeded, "qst_collect_men"),
			(neg|check_quest_active, "qst_collect_men"),
			(assign, ":value", 1),
		(else_try),
			(neg|check_quest_active, "qst_collect_men"),
			(neg|check_quest_succeeded, "qst_learn_where_merchant_brother_is"),
			(neg|check_quest_active, "qst_learn_where_merchant_brother_is"),
			(assign, ":value", 1),
		(else_try),
			(neg|check_quest_active, "qst_collect_men"),
			(neg|check_quest_active, "qst_learn_where_merchant_brother_is"),
			(neg|check_quest_succeeded, "qst_save_relative_of_merchant"),
			(neg|check_quest_active, "qst_save_relative_of_merchant"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"I'm leaving for Pentos soon, are you sure you would not like to reconsider joining me?", "merchant_quest_persuasion",
	[
		(remove_troop_from_site, "trp_swadian_merchant", "scn_town_6_tavern")
	]],

	[anyone|auto_proceed, "start",
	[
		(is_between, "$g_talk_troop", "trp_swadian_merchant", "trp_startup_merchants_end"),
		(this_or_next|eq, "$talk_context", 14),
		(neq, "$dialog_with_merchant_ended", 0),
		(check_quest_finished, "qst_save_relative_of_merchant"),
		(neg|check_quest_succeeded, "qst_save_town_from_bandits"),
		(neg|check_quest_active, "qst_save_town_from_bandits")
	],
	"{!}.", "merchant_quest_4b4",
	[]],

	[anyone|plyr, "merchant_quest_persuasion",
	[
		(check_quest_finished, "qst_collect_men"),
		(check_quest_active, "qst_collect_men")
	],
	"You make a persuasive case. I will help you.", "merchant_quest_1_prologue_3",
	[]],

	[anyone|plyr, "merchant_quest_persuasion",
	[
		(check_quest_finished, "qst_collect_men"),
		(neg|check_quest_finished, "qst_learn_where_merchant_brother_is"),
		(neg|check_quest_active, "qst_learn_where_merchant_brother_is")
	],
	"You make a persuasive case. I will help you.", "merchant_quest_2",
	[]],

	[anyone|plyr, "merchant_quest_persuasion",
	[
		(check_quest_finished, "qst_collect_men"),
		(check_quest_finished, "qst_learn_where_merchant_brother_is"),
		(neg|check_quest_finished, "qst_save_relative_of_merchant"),
		(neg|check_quest_active, "qst_save_relative_of_merchant")
	],
	"You make a persuasive case. I will help you.", "merchant_quest_3",
	[]],

	[anyone|plyr, "merchant_quest_persuasion",
	[
		(check_quest_finished, "qst_collect_men"),
		(check_quest_finished, "qst_learn_where_merchant_brother_is"),
		(check_quest_finished, "qst_save_relative_of_merchant"),
		(neg|check_quest_finished, "qst_save_town_from_bandits"),
		(neg|check_quest_active, "qst_save_town_from_bandits")
	],
	"You make a persuasive case. I will help you.", "merchant_quest_4b8",
	[]],

	[anyone|plyr, "merchant_quest_persuasion",
	[],
	"As I said, I've decided to stay here.", "close_window",
	[]],

	[anyone|plyr, "merchant_quest_persuasion",
	[
		(ge, "$cheat_mode", 1)
	],
	"{!}[CHEAT] I have played this before, and would prefer to skip the tutorial.", "dplmc_devel_merchant_quest_skip",
	[]],

	[anyone, "merchant_quest_2",
	[],
	"Now -- go find and defeat that group of bandits.", "merchant_quest_2a",
	[]],

	[anyone, "merchant_quest_3",
	[],
	"Now -- go attack that bandit hideout, get my brother back, and show those brigands what happens to those who threaten my household.", "merchant_quest_3a",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_relative_of_merchant", "trp_relative_of_merchants_end")
	],
	"Oh -- thank the heavens... Thank the heavens... Am I safe?", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_swadian_merchant", "trp_startup_merchants_end"),
		(eq, "$g_do_one_more_meeting_with_merchant", 1),
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(str_store_troop_name, 5, ":g_encountered_party_faction_leader"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":g_encountered_party_faction_leader", 4)
	],
	"Ah... {playername}. Things didn't go quite so well as I had hoped. {s5} couldn't quite find it in {reg4?her:him} to overlook my little breach of the peace. Oh, {reg4?she:he}'s grateful enough that I got rid of {reg4?her:his} crooked captain -- a guard who'll let in bandits will let in an enemy army, if the price is right -- but {reg4?she:he} can't exactly have me running around here as a lasting reminder of {reg4?her:his} failure to take care of things {reg4?herself:himself}.", "merchant_closing_statement_2",
	[]],

	[anyone|plyr, "merchant_closing_statement_2",
	[],
	"That hardly seems fair...", "merchant_closing_statement_3",
	[]],

	[anyone, "merchant_closing_statement_3",
	[
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":g_encountered_party_faction_leader", 4)
	],
	"Fair? This is not heaven, {my boy/my girl}! Kings do what they will, and the rest of us do as they must. {reg4?She:He} didn't string me up, and instead gave me time to sell my properties -- even put in a word with the other merchants that they best pay me a fair price, too. That's gracious enough, as kings go -- but {reg4?she:he}'s a weak king, as they all are here, and weak kings must always look to their authority first, and justice second. I suppose I'd do the same, in {reg4?her:his} shoes.", "merchant_closing_statement_4",
	[]],

	[anyone, "merchant_closing_statement_4",
	[
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 1, 0),
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":g_encountered_party_faction_leader", 4)
	],
	"Anyway, I wouldn't go rubbing your part in this affair in {s5}'s face -- but {reg4?she:he}'s taken note of you, and decided that you're not worth hanging, and that's something to which I'll raise a glass any day of the week. {reg4?She:He} might even have work for you, further down the road. Or, you can sell your {s0} to one of {reg4?her:his} competitors. Anyway, I hope you've learned a bit about what it will take to stay alive in this troubled land, and I suspect that the money you've earned won't go to waste. Good luck.", "close_window",
	[
		(assign, "$g_do_one_more_meeting_with_merchant", 2)
	]],

	[anyone|auto_proceed, "start",
	[
		(is_between, "$g_talk_troop", "trp_swadian_merchant", "trp_startup_merchants_end"),
		(check_quest_finished, "qst_save_town_from_bandits"),
		(eq, "$g_do_one_more_meeting_with_merchant", 2)
	],
	"{!}.", "merchant_quests_last_word",
	[]],

	[anyone, "merchant_quests_last_word",
	[],
	"I am preparing to leave town in a short while. It's been an honor to know you. Good luck.", "close_window",
	[]],

	[anyone|plyr, "member_intel_liaison",
	[],
	"What have you discovered?", "member_intel_liaison_results",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(eq, "$talk_context", 14),
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 2)
	],
	"Greetings, stranger.", "member_intel_liaison",
	[]],

	[anyone|plyr, "member_intel_liaison",
	[],
	"What have you discovered?", "member_intel_liaison_results",
	[]],

	[anyone|plyr, "member_intel_liaison",
	[],
	"It's time to pull you out. Let's leave town separately, but join me soon after", "close_window",
	[
		(assign, "$npc_to_rejoin_party", "$g_talk_troop")
	]],

	[anyone|plyr, "member_intel_liaison",
	[],
	"You're doing good work. Stay here for a little longer", "close_window",
	[]],

	[anyone, "member_intel_liaison_results",
	[
		(store_faction_of_party, ":faction_of_party_g_encountered_party", "$g_encountered_party"),
		(call_script, "script_update_faction_political_notes", ":faction_of_party_g_encountered_party"),
		(assign, ":var_2", reg0),
		(val_add, ":var_2", reg0),
		(val_add, ":var_2", reg1),
		(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(eq, ":faction_of_troop_troop", ":faction_of_party_g_encountered_party"),
			(call_script, "script_update_troop_political_notes", ":troop"),
		(try_end),
		(str_store_faction_name, 12, ":faction_of_party_g_encountered_party"),
		(try_begin),
			(gt, ":var_2", 60),
			(str_store_string, 11, "str_the_s12_is_a_labyrinth_of_rivalries_and_grudges_lords_ignore_their_lieges_summons_and_many_are_ripe_to_defect"),
		(else_try),
			(is_between, ":var_2", 40, 60),
			(str_store_string, 11, "str_the_s12_is_shaky_many_lords_do_not_cooperate_with_each_other_and_some_might_be_tempted_to_defect_to_a_liege_that_they_consider_more_worthy"),
		(else_try),
			(is_between, ":var_2", 20, 40),
			(str_store_string, 11, "str_the_s12_is_fairly_solid_some_lords_bear_enmities_for_each_other_but_they_tend_to_stand_together_against_outside_enemies"),
		(else_try),
			(lt, ":var_2", 20),
			(str_store_string, 11, "str_the_s12_is_a_rock_of_stability_politically_speaking_whatever_the_lords_may_think_of_each_other_they_fight_as_one_against_the_common_foe"),
		(try_end)
	],
	"{s11} I notice that you have been keeping some notes about individual lords. I have annotated those with my findings.", "member_intel_liaison",
	[]],

	[anyone, "member_fief_grant_1",
	[],
	"Which fief did you have in mind?", "member_fief_grant_2",
	[]],

	[anyone|repeat_for_parties|plyr, "member_fief_grant_2",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(neq, ":repeat_object", "$g_player_court"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(assign, ":value", 0),
		(try_begin),
			(eq, ":faction_of_party_repeat_object", "$players_kingdom"),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|eq, ":value", 1),
		(eq, ":faction_of_party_repeat_object", "fac_player_supporters_faction"),
		(neg|party_slot_ge, ":repeat_object", 7, "trp_npc1"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{s11}", "member_fief_grant_3",
	[
		(store_repeat_object, "$temp")
	]],

	[anyone|plyr, "member_fief_grant_2",
	[],
	"Never mind -- there is no fief I can offer.", "do_member_trade",
	[]],

	[anyone, "member_fief_grant_3",
	[],
	"{s5}", "close_window",
	[
		(call_script, "script_npc_morale", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(remove_member_from_party, "$g_talk_troop", "p_main_party"),
		(try_begin),
			(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
			(this_or_next|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
			(troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
			(this_or_next|is_between, "$g_talk_troop", "trp_npc1", "trp_heroes_end"),
			(troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
			(troop_get_slot, ":player_banner_scene_prop", "trp_player", slot_troop_banner_scene_prop),
			(gt, ":player_banner_scene_prop", 0),
			(troop_set_slot, "$g_talk_troop", slot_troop_banner_scene_prop, ":player_banner_scene_prop"),
			(troop_set_slot, "$g_talk_troop", slot_troop_occupation, 2),
		(else_try),
			(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
			(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
			(store_sub, ":value", "$g_talk_troop", "trp_npc1"),
			(store_add, ":player_banner_scene_prop", "spr_banner_companions01", ":value"),
			(troop_set_slot, "trp_npc1", slot_troop_banner_scene_prop, "spr_banner_companions01"),
			(troop_set_slot, "trp_npc2", slot_troop_banner_scene_prop, "spr_banner_companions02"),
			(troop_set_slot, "trp_npc3", slot_troop_banner_scene_prop, "spr_banner_companions03"),
			(troop_set_slot, "trp_npc4", slot_troop_banner_scene_prop, "spr_banner_companions04"),
			(troop_set_slot, "trp_npc5", slot_troop_banner_scene_prop, "spr_banner_companions05"),
			(troop_set_slot, "trp_npc6", slot_troop_banner_scene_prop, "spr_banner_companions06"),
			(troop_set_slot, "trp_npc7", slot_troop_banner_scene_prop, "spr_banner_companions07"),
			(troop_set_slot, "trp_npc8", slot_troop_banner_scene_prop, "spr_banner_companions08"),
			(troop_set_slot, "trp_npc9", slot_troop_banner_scene_prop, "spr_banner_companions09"),
			(troop_set_slot, "trp_npc10", slot_troop_banner_scene_prop, "spr_banner_companions10"),
			(troop_set_slot, "trp_npc11", slot_troop_banner_scene_prop, "spr_banner_companions11"),
			(troop_set_slot, "trp_npc12", slot_troop_banner_scene_prop, "spr_banner_companions12"),
			(troop_set_slot, "trp_npc13", slot_troop_banner_scene_prop, "spr_banner_companions13"),
			(troop_set_slot, "trp_npc14", slot_troop_banner_scene_prop, "spr_banner_companions14"),
			(troop_set_slot, "trp_npc15", slot_troop_banner_scene_prop, "spr_banner_companions15"),
			(troop_set_slot, "trp_npc16", slot_troop_banner_scene_prop, "spr_banner_companions16"),
			(troop_set_slot, "trp_npc17", slot_troop_banner_scene_prop, "spr_banner_companions17"),
			(troop_set_slot, "trp_npc18", slot_troop_banner_scene_prop, "spr_banner_companions18"),
			(troop_set_slot, "trp_npc19", slot_troop_banner_scene_prop, "spr_banner_companions19"),
			(troop_set_slot, "trp_npc20", slot_troop_banner_scene_prop, "spr_banner_companions20"),
			(troop_set_slot, "trp_npc21", slot_troop_banner_scene_prop, "spr_banner_companions21"),
			(troop_set_slot, "trp_npc22", slot_troop_banner_scene_prop, "spr_banner_companions22"),
			(troop_set_slot, "trp_npc23", slot_troop_banner_scene_prop, "spr_banner_dj"),
			(troop_set_slot, "trp_npc24", slot_troop_banner_scene_prop, "spr_banner_di"),
			(troop_set_slot, "trp_npc25", slot_troop_banner_scene_prop, "spr_banner_dt"),
			(troop_set_slot, "trp_npc26", slot_troop_banner_scene_prop, "spr_banner_da"),
			(troop_set_slot, "trp_npc27", slot_troop_banner_scene_prop, "spr_banner_db"),
			(troop_set_slot, "$g_talk_troop", slot_troop_occupation, 2),
		(else_try),
			(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
			(assign, ":value", 378),
			(val_sub, ":value", 1),
			(val_sub, ":value", "$g_companions_banner_id"),
			(store_add, ":player_banner_scene_prop", "spr_banner_a", ":value"),
			(troop_set_slot, "$g_talk_troop", slot_troop_banner_scene_prop, ":player_banner_scene_prop"),
			(val_add, "$g_companions_banner_id", 1),
			(troop_set_slot, "$g_talk_troop", slot_troop_occupation, 2),
		(try_end),
		(troop_set_slot, "$g_talk_troop", slot_troop_playerparty_history, 6),
		(assign, ":value_2", 0),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value_2", 1),
			(troop_set_faction, "$g_talk_troop", "$players_kingdom"),
		(else_try),
			(troop_set_faction, "$g_talk_troop", "fac_player_supporters_faction"),
		(try_end),
		(call_script, "script_give_center_to_lord", "$temp", "$g_talk_troop", 0),
		(try_begin),
			(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, "$temp"),
			(faction_set_slot, "$players_kingdom", slot_faction_political_issue, -1),
		(try_end),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_troop_original_faction, 0),
			(party_get_slot, ":temp_center_original_faction", "$temp", slot_center_original_faction),
			(troop_set_slot, "$g_talk_troop", slot_troop_original_faction, ":temp_center_original_faction"),
		(try_end),
		(store_character_level, ":character_level_g_talk_troop", "$g_talk_troop"),
		(val_mul, ":character_level_g_talk_troop", 15),
		(val_max, ":character_level_g_talk_troop", 200),
		(troop_set_slot, "$g_talk_troop", slot_troop_renown, ":character_level_g_talk_troop"),
		(assign, ":var_7", 2500),
		(try_begin),
			(ge, "$g_dplmc_gold_changes", 1),
			(store_skill_level, ":skill_level_trade_g_talk_troop", "skl_trade", "$g_talk_troop"),
			(store_skill_level, ":skill_level_looting_g_talk_troop", "skl_looting", "$g_talk_troop"),
			(val_add, ":skill_level_trade_g_talk_troop", ":skill_level_looting_g_talk_troop"),
			(val_add, ":skill_level_trade_g_talk_troop", 10),
			(val_mul, ":var_7", ":skill_level_trade_g_talk_troop"),
			(val_add, ":var_7", 5),
			(val_div, ":var_7", 10),
		(try_end),
		(troop_set_slot, "$g_talk_troop", slot_troop_wealth, ":var_7"),
		(str_store_troop_name_plural, 12, "$g_talk_troop"),
		(call_script, "script_dplmc_store_troop_is_female", "$g_talk_troop"),
		(assign, reg65, reg0),
		(assign, ":var_10", reg65),
		(try_begin),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 9),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 10),
			(troop_slot_eq, "$g_talk_troop", slot_troop_original_faction, "fac_kingdom_5"),
			(str_store_string, 14, "str_tribune_s12"),
		(else_try),
			(eq, ":var_10", 1),
			(str_store_string, 14, "str_lady_s12"),
		(else_try),
			(str_store_string, 14, "str_lord_s12"),
		(try_end),
		(troop_set_name, "$g_talk_troop", 14),
		(try_begin),
			(eq, ":value_2", 1),
			(call_script, "script_troop_set_title_according_to_faction", "$g_talk_troop", "$players_kingdom"),
		(else_try),
			(call_script, "script_troop_set_title_according_to_faction", "$g_talk_troop", "fac_player_supporters_faction"),
		(try_end),
		(unlock_achievement, 42),
		(call_script, "script_check_concilio_calradi_achievement"),
		(store_div, ":value_3", ":var_1", 3),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", ":value_3"),
		(troop_get_inventory_capacity, ":inventory_capacity_l_g_talk_troop", "$g_talk_troop"),
		(try_for_range, ":number", 9, ":inventory_capacity_l_g_talk_troop"),
			(troop_get_inventory_slot, ":inventory_slot_g_talk_troop_number", "$g_talk_troop", ":number"),
			(ge, ":inventory_slot_g_talk_troop_number", 1),
			(troop_set_inventory_slot, "$g_talk_troop", ":number", -1),
		(try_end),
		(str_store_party_name, 17, "$temp"),
		(store_sub, ":value_4", "$g_talk_troop", "trp_npc1"),
		(store_add, ":value_5", "str_npc1_fief_acceptance", ":value_4"),
		(str_store_string, 5, ":value_5")
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(this_or_next|eq, "$talk_context", 14),
		(this_or_next|eq, "$talk_context", 0),
		(eq, "$talk_context", 1),
		(main_party_has_troop, "$g_talk_troop")
	],
	"Let's leave whenever you are ready.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 0),
		(troop_slot_eq, "$g_talk_troop", slot_troop_turned_down_twice, 1)
	],
	"Please do not waste any more of my time today, {Ser/my lady}. Perhaps we shall meet again in our travels.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 0),
		(eq, "$g_talk_troop_met", 0),
		(troop_get_slot, ":g_talk_troop_intro", "$g_talk_troop", slot_troop_intro),
		(str_store_string, 5, ":g_talk_troop_intro"),
		(str_store_party_name, 20, "$g_encountered_party")
	],
	"{s5}", "companion_recruit_intro_response",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_first_encountered, "$g_encountered_party")
	]],

	[anyone|plyr, "companion_recruit_intro_response",
	[
		(troop_get_slot, ":g_talk_troop_intro_response_1", "$g_talk_troop", slot_troop_intro_response_1),
		(str_store_string, 6, ":g_talk_troop_intro_response_1")
	],
	"{s6}", "companion_recruit_backstory_a",
	[]],

	[anyone|plyr, "companion_recruit_intro_response",
	[
		(troop_get_slot, ":g_talk_troop_intro_response_2", "$g_talk_troop", slot_troop_intro_response_2),
		(str_store_string, 7, ":g_talk_troop_intro_response_2")
	],
	"{s7}", "close_window",
	[]],

	[anyone, "companion_recruit_backstory_a",
	[
		(troop_get_slot, ":g_talk_troop_backstory_a", "$g_talk_troop", slot_troop_backstory_a),
		(str_store_string, 5, ":g_talk_troop_backstory_a"),
		(str_store_string, 19, "str_here_plus_space"),
		(str_store_party_name, 20, "$g_encountered_party")
	],
	"{s5}", "companion_recruit_backstory_b",
	[]],

	[anyone, "companion_recruit_backstory_b",
	[
		(troop_get_slot, ":g_talk_troop_backstory_b", "$g_talk_troop", slot_troop_backstory_b),
		(str_store_string, 5, ":g_talk_troop_backstory_b"),
		(str_store_party_name, 20, "$g_encountered_party")
	],
	"{s5}", "companion_recruit_backstory_c",
	[]],

	[anyone, "companion_recruit_backstory_c",
	[
		(troop_get_slot, ":g_talk_troop_backstory_c", "$g_talk_troop", slot_troop_backstory_c),
		(str_store_string, 5, ":g_talk_troop_backstory_c")
	],
	"{s5}", "companion_recruit_backstory_response",
	[]],

	[anyone|plyr, "companion_recruit_backstory_response",
	[
		(troop_get_slot, ":g_talk_troop_backstory_response_1", "$g_talk_troop", slot_troop_backstory_response_1),
		(str_store_string, 6, ":g_talk_troop_backstory_response_1")
	],
	"{s6}", "companion_recruit_signup",
	[]],

	[anyone|plyr, "companion_recruit_backstory_response",
	[
		(troop_get_slot, ":g_talk_troop_backstory_response_2", "$g_talk_troop", slot_troop_backstory_response_2),
		(str_store_string, 7, ":g_talk_troop_backstory_response_2")
	],
	"{s7}", "close_window",
	[]],

	[anyone, "companion_recruit_signup",
	[
		(troop_get_slot, ":g_talk_troop_signup", "$g_talk_troop", slot_troop_signup),
		(str_store_string, 5, ":g_talk_troop_signup"),
		(str_store_party_name, 20, "$g_encountered_party")
	],
	"{s5}", "companion_recruit_signup_b",
	[]],

	[anyone, "companion_recruit_signup_b",
	[
		(troop_get_slot, ":g_talk_troop_signup_2", "$g_talk_troop", slot_troop_signup_2),
		(troop_get_slot, reg3, "$g_talk_troop", slot_troop_strings_end),
		(str_store_string, 5, ":g_talk_troop_signup_2"),
		(str_store_party_name, 20, "$g_encountered_party")
	],
	"{s5}", "companion_recruit_signup_response",
	[]],

	[anyone|plyr, "companion_recruit_signup_response",
	[
		(neg|hero_can_join, "p_main_party")
	],
	"Unfortunately, I can't take on any more hands in my company right now.", "close_window",
	[]],

	[anyone|plyr, "companion_recruit_signup_response",
	[
		(hero_can_join, "p_main_party"),
		(troop_get_slot, ":g_talk_troop_signup_response_1", "$g_talk_troop", slot_troop_signup_response_1),
		(str_store_string, 6, ":g_talk_troop_signup_response_1")
	],
	"{s6}", "companion_recruit_payment",
	[]],

	[anyone|plyr, "companion_recruit_signup_response",
	[
		(hero_can_join, "p_main_party"),
		(troop_get_slot, ":g_talk_troop_signup_response_2", "$g_talk_troop", slot_troop_signup_response_2),
		(str_store_string, 7, ":g_talk_troop_signup_response_2")
	],
	"{s7}", "close_window",
	[]],

	[anyone|auto_proceed, "companion_recruit_payment",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_strings_end, 0)
	],
	".", "companion_recruit_signup_confirm",
	[]],

	[anyone, "companion_recruit_payment",
	[
		(store_sub, ":value", "$g_talk_troop", "trp_npc1"),
		(store_add, ":value_2", "str_npc1_payment", ":value"),
		(str_store_string, 5, ":value_2"),
		(troop_get_slot, reg3, "$g_talk_troop", slot_troop_strings_end),
		(str_store_party_name, 20, "$g_encountered_party")
	],
	"{s5}", "companion_recruit_payment_response",
	[]],

	[anyone|plyr, "companion_recruit_payment_response",
	[
		(hero_can_join, "p_main_party"),
		(troop_get_slot, ":g_talk_troop_strings_end", "$g_talk_troop", slot_troop_strings_end),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", ":g_talk_troop_strings_end"),
		(assign, reg3, ":g_talk_troop_strings_end"),
		(store_sub, ":value", "$g_talk_troop", "trp_npc1"),
		(store_add, ":value_2", "str_npc1_payment_response", ":value"),
		(str_store_string, 6, ":value_2")
	],
	"{s6}", "companion_recruit_signup_confirm",
	[
		(troop_get_slot, ":g_talk_troop_strings_end", "$g_talk_troop", slot_troop_strings_end),
		(gt, ":g_talk_troop_strings_end", 0),
		(troop_remove_gold, "trp_player", ":g_talk_troop_strings_end"),
		(troop_set_slot, "$g_talk_troop", slot_troop_strings_end, 0)
	]],

	[anyone|plyr, "companion_recruit_payment_response",
	[
		(troop_get_slot, ":g_talk_troop_signup_response_2", "$g_talk_troop", slot_troop_signup_response_2),
		(str_store_string, 7, ":g_talk_troop_signup_response_2")
	],
	"Sorry. I can't afford that at the moment.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 0),
		(troop_slot_eq, "$g_talk_troop", slot_troop_met_previously, 1),
		(troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 0)
	],
	"We meet again.", "companion_recruit_meet_again",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_turned_down_twice, 1)
	]],

	[anyone|plyr, "companion_recruit_meet_again",
	[],
	"So... What have you been doing since our last encounter?", "companion_recruit_backstory_delayed",
	[]],

	[anyone|plyr, "companion_recruit_meet_again",
	[],
	"Good day to you.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 0),
		(troop_slot_eq, "$g_talk_troop", slot_troop_met_previously, 0),
		(troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 0)
	],
	"Yes?", "companion_recruit_secondchance",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_turned_down_twice, 1)
	]],

	[anyone|plyr, "companion_recruit_secondchance",
	[],
	"My apologies if I was rude, earlier. What was your story again?", "companion_recruit_backstory_b",
	[]],

	[anyone|plyr, "companion_recruit_secondchance",
	[],
	"Never mind.", "close_window",
	[]],

	[anyone, "companion_recruit_backstory_delayed",
	[
		(troop_get_slot, ":g_talk_troop_backstory_delayed", "$g_talk_troop", slot_troop_backstory_delayed),
		(str_store_string, 5, ":g_talk_troop_backstory_delayed")
	],
	"{s5}", "companion_recruit_backstory_delayed_response",
	[]],

	[anyone|plyr, "companion_recruit_backstory_delayed_response",
	[],
	"I might be able to use you in my company.", "companion_recruit_signup_b",
	[]],

	[anyone|plyr, "companion_recruit_backstory_delayed_response",
	[],
	"I'll let you know if I hear of anything.", "close_window",
	[]],

	[anyone, "companion_recruit_signup_confirm",
	[],
	"Good! Give me a few moments to prepare and I'll be ready to move.", "close_window",
	[
		(call_script, "script_recruit_troop_as_companion", "$g_talk_troop")
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 4),
		(troop_get_slot, ":g_talk_troop_prisoner_of_party", "$g_talk_troop", slot_troop_prisoner_of_party),
		(lt, ":g_talk_troop_prisoner_of_party", "p_town_1")
	],
	"My offer to rejoin you still stands, if you'll have me.", "companion_rehire",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 1),
		(this_or_next|eq, "$talk_context", 8),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(neq, "$talk_context", 18),
		(assign, ":var_1", "str_battle_fate_1"),
		(store_random_in_range, ":random_in_range_0_5", 0, 5),
		(val_add, ":var_1", ":random_in_range_0_5"),
		(str_store_string, 6, ":var_1"),
		(troop_get_slot, ":g_talk_troop_honorific", "$g_talk_troop", slot_troop_honorific),
		(str_store_string, 5, ":g_talk_troop_honorific")
	],
	"It is good to see you alive, {s5}! {s6}, and I did not know whether you had been captured, or slain, or got away. I've been roaming around since then, looking for you. Shall I get my gear together and rejoin your company?", "companion_rehire",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_playerparty_history, 4),
		(troop_set_slot, "$g_talk_troop", slot_troop_prisoner_of_party, -1)
	]],

	[anyone|plyr, "start",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 1),
		(troop_slot_ge, "$g_talk_troop", 8, 0),
		(neq, "$talk_context", 18),
		(assign, ":var_1", "str_battle_fate_1"),
		(store_random_in_range, ":random_in_range_0_5", 0, 5),
		(val_add, ":var_1", ":random_in_range_0_5"),
		(str_store_string, 6, ":var_1"),
		(troop_get_slot, ":g_talk_troop_honorific", "$g_talk_troop", slot_troop_honorific),
		(str_store_string, 5, ":g_talk_troop_honorific")
	],
	"I've come to break you out of here.", "companion_prison_break_chains",
	[]],

	[anyone, "companion_prison_break_chains",
	[],
	"Thank the heavens you came! However, I'm not going anywhere with these chains on my legs. You'll need to get the key away from the guard somehow.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 0),
		(troop_slot_eq, "$g_talk_troop", slot_troop_turned_down_twice, 0),
		(troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 3),
		(troop_get_slot, ":g_talk_troop_rehire_speech", "$g_talk_troop", slot_troop_rehire_speech),
		(str_store_string, 5, ":g_talk_troop_rehire_speech")
	],
	"{s5}", "companion_rehire",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_playerparty_history, 4)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 0),
		(troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 2),
		(troop_get_slot, ":g_talk_troop_honorific", "$g_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":g_talk_troop_honorific"),
		(troop_get_slot, ":g_talk_troop_backstory_delayed", "$g_talk_troop", slot_troop_backstory_delayed),
		(str_store_string, 5, ":g_talk_troop_backstory_delayed")
	],
	"It is good to see you, {s21}! To tell you the truth, I had hoped to run into you.", "companion_was_dismissed",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_playerparty_history, 4)
	]],

	[anyone, "companion_was_dismissed",
	[
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(troop_get_slot, ":g_talk_troop_backstory_delayed", "$g_talk_troop", slot_troop_backstory_delayed),
		(str_store_string, 5, ":g_talk_troop_backstory_delayed")
	],
	"{s5}. Would you want me to rejoin your company?", "companion_rehire",
	[]],

	[anyone|plyr, "companion_rehire",
	[
		(hero_can_join, "p_main_party")
	],
	"Welcome back, my friend!", "companion_recruit_signup_confirm",
	[]],

	[anyone|plyr, "companion_rehire",
	[],
	"Sorry, I can't take on anyone else right now.", "companion_rehire_refused",
	[]],

	[anyone, "companion_rehire_refused",
	[],
	"Well... Look me up if you change your mind, eh?", "close_window",
	[
		(troop_get_slot, ":g_talk_troop_cur_center", "$g_talk_troop", slot_troop_cur_center),
		(try_begin),
			(neg|is_between, ":g_talk_troop_cur_center", "p_town_1", "p_castle_1"),
			(store_random_in_range, ":random_in_range_town_1_castle_1", "p_town_1", "p_castle_1"),
			(troop_set_slot, "$g_talk_troop", slot_troop_cur_center, ":random_in_range_town_1_castle_1"),
			(try_begin),
				(ge, "$cheat_mode", 1),
				(assign, reg1, ":g_talk_troop_cur_center"),
				(str_store_party_name, 7, ":random_in_range_town_1_castle_1"),
				(display_message, "@{!}current town was {reg1}, now moved to {s7}"),
			(try_end),
		(try_end)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(troop_get_slot, ":g_talk_troop_prisoner_of_party", "$g_talk_troop", slot_troop_prisoner_of_party),
		(lt, ":g_talk_troop_prisoner_of_party", "p_town_1")
	],
	"So... Do you want me back yet?", "companion_rehire",
	[]],

	[anyone, "minister_issues",
	[
		(check_quest_active, "qst_consult_with_minister"),
		(eq, "$g_minister_notification_quest", "qst_resolve_dispute"),
		(setup_quest_text, "qst_resolve_dispute"),
		(quest_get_slot, ":resolve_dispute_target_troop", "qst_resolve_dispute", slot_quest_target_troop),
		(str_store_troop_name, 11, ":resolve_dispute_target_troop"),
		(quest_get_slot, ":resolve_dispute_object_troop", "qst_resolve_dispute", slot_quest_object_troop),
		(str_store_troop_name, 12, ":resolve_dispute_object_troop"),
		(str_store_string, 2, "str_resolve_the_dispute_between_s11_and_s12"),
		(call_script, "script_start_quest", "qst_resolve_dispute", -1),
		(quest_set_slot, "qst_resolve_dispute", slot_quest_expiration_days, 30),
		(quest_set_slot, "qst_resolve_dispute", slot_quest_giver_troop, "$g_player_minister"),
		(quest_set_slot, "qst_resolve_dispute", slot_quest_target_state, 0),
		(quest_set_slot, "qst_resolve_dispute", slot_quest_object_state, 0),
		(quest_get_slot, ":resolve_dispute_target_troop", "qst_resolve_dispute", slot_quest_target_troop),
		(str_store_troop_name, 11, ":resolve_dispute_target_troop"),
		(quest_get_slot, ":resolve_dispute_object_troop", "qst_resolve_dispute", slot_quest_object_troop),
		(str_store_troop_name, 12, ":resolve_dispute_object_troop")
	],
	"There is a matter which needs your attention. The quarrel between {s11} and {s12} has esclatated to a point where it has become unseemly. If you do intervene, you risk offending one of the lords. However, if you do nothing, you risk appearing weak. Such are the burdens of kingship, {my lord/my lady}.", "minister_pretalk",
	[
		(call_script, "script_end_quest", "qst_consult_with_minister")
	]],

	[anyone, "minister_issues",
	[
		(assign, "$g_center_taken_by_player_faction", -1),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(eq, "$g_center_taken_by_player_faction", -1),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(assign, ":value", 0),
			(try_begin),
				(eq, ":faction_of_party_party", "$players_kingdom"),
				(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
				(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
				(ge, reg0, 50),
				(assign, ":value", 1),
			(try_end),
			(this_or_next|eq, ":value", 1),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(neg|party_slot_ge, ":party", 7, 0),
			(assign, "$g_center_taken_by_player_faction", ":party"),
		(try_end),
		(is_between, "$g_center_taken_by_player_faction", "p_town_1", "p_salt_mine"),
		(str_store_party_name, 1, "$g_center_taken_by_player_faction")
	],
	"{s1} currently does not have a lord. You may wish to keep it this way, as lords will sometimes gravitate towards lieges who have land to offer, but for the time being, no one is collecting any of its rents.", "minister_talk",
	[]],

	[anyone, "minister_issues",
	[
		(neg|is_between, "$g_player_minister", "trp_npc1", "trp_heroes_end")
	],
	"At this point, there are no particularly urgent matters which need your attention. I should point out though, my lord, that I am not very skilled in the ways of politics, and that I am anxious to return to private life. If you wish to issue any but the most basic directives, I suggest appointing a trusted companion in my stead. In the meantime, is there anything you wish done?", "minister_talk",
	[]],

	[anyone, "minister_issues",
	[
		(eq, 1, 0)
	],
	"{!}[Should not appear - there to prevent error related to center captured lord advice]", "center_captured_lord_advice",
	[]],

	[anyone, "minister_issues",
	[
		(lt, "$player_right_to_rule", 30)
	],
	"If I may offer you a word of advice, my {lord/lady}, it seems that your right to rule as an independent monarch is not sufficiently recognized, and this may bring us problems further down the road. It may be advisable to find a kingdom with whom you have shared interests and seek its recognition, to establish yourself as an equal with the worlds other rulers.", "minister_talk",
	[]],

	[anyone, "minister_issues",
	[],
	"At this point, there are no particularly urgent matters which need your attention. Is there anything you wish done?", "minister_talk",
	[]],

	[anyone, "minister_pretalk",
	[],
	"Is there anything you wish done?", "minister_talk",
	[]],

	[anyone|plyr, "minister_talk",
	[
		(is_between, "$g_player_minister", "trp_npc1", "trp_heroes_end")
	],
	"Do you have any ideas to strengthen our sovereignty's unity?", "combined_political_quests",
	[
		(call_script, "script_get_political_quest", "$g_talk_troop"),
		(assign, "$political_quest_found", reg0),
		(assign, "$political_quest_target_troop", reg1),
		(assign, "$political_quest_object_troop", reg2)
	]],

	[anyone|plyr, "minister_talk",
	[
		(assign, "$political_quest_to_cancel", -1),
		(try_begin),
			(check_quest_active, "qst_offer_gift"),
			(quest_slot_eq, "qst_offer_gift", slot_quest_giver_troop, "$g_talk_troop"),
			(assign, "$political_quest_to_cancel", "qst_offer_gift"),
			(str_store_string, 10, "str_offer_gift_description"),
		(else_try),
			(check_quest_active, "qst_resolve_dispute"),
			(quest_slot_eq, "qst_resolve_dispute", slot_quest_giver_troop, "$g_talk_troop"),
			(assign, "$political_quest_to_cancel", "qst_resolve_dispute"),
			(str_store_string, 10, "str_resolve_dispute_description"),
		(try_end),
		(gt, "$political_quest_to_cancel", 0)
	],
	"Let's abandon our plan to {s10}.", "minister_cancel_political_quest",
	[]],

	[anyone, "minister_cancel_political_quest",
	[],
	"Are you sure you want to drop that idea?", "minister_cancel_political_quest_confirm",
	[]],

	[anyone|plyr, "minister_cancel_political_quest_confirm",
	[],
	"Yes, I am sure. Let's abandon that idea.", "minister_pretalk",
	[
		(call_script, "script_abort_quest", "$political_quest_to_cancel", 1)
	]],

	[anyone|plyr, "minister_cancel_political_quest_confirm",
	[],
	"Actually, never mind.", "minister_pretalk",
	[]],

	[anyone|plyr, "minister_talk",
	[
		(is_between, "$g_player_minister", "trp_npc1", "trp_heroes_end")
	],
	"I wish to dispatch an emissary.", "minister_diplomatic_kingdoms",
	[]],

	[anyone|plyr, "minister_talk",
	[
		(is_between, "$g_player_minister", "trp_npc1", "trp_heroes_end")
	],
	"I wish to indict a disloyal vassal for treason.", "minister_indict",
	[]],

	[anyone|plyr, "minister_talk",
	[
		(faction_get_slot, ":players_kingdom_marshall", "$players_kingdom", slot_faction_marshall),
		(ge, ":players_kingdom_marshall", 0),
		(try_begin),
			(gt, ":players_kingdom_marshall", 0),
			(str_store_troop_name, 4, ":players_kingdom_marshall"),
		(else_try),
			(str_store_string, 4, "str_myself"),
		(try_end)
	],
	"I wish to replace {s4} as marshal.", "minister_change_marshal",
	[]],

	[anyone|plyr, "minister_talk",
	[
		(faction_slot_eq, "$players_kingdom", slot_faction_marshall, -1)
	],
	"I wish to appoint a new marshal.", "minister_change_marshal",
	[]],

	[anyone, "minister_change_marshal",
	[
		(store_current_hours, ":current_hours"),
		(val_sub, ":current_hours", "$g_player_faction_last_marshal_appointment"),
		(faction_get_slot, ":player_supporters_faction_201", "fac_player_supporters_faction", 201),
		(val_clamp, ":player_supporters_faction_201", -3, 4),
		(store_mul, ":value", ":player_supporters_faction_201", 8),
		(val_add, ":value", 48),
		(lt, ":current_hours", ":value")
	],
	"You have just made such an appointment, {my lord/my lady}. If you countermand your decree so soon, there will be great confusion. We will need to wait a few days.", "minister_pretalk",
	[]],

	[anyone|plyr, "minister_talk",
	[],
	"I would like to hire a sellsword company.", "dplmc_chamberlain_talk_sellsword_1",
	[]],

	[anyone, "dplmc_chamberlain_talk_sellsword_1",
	[],
	"Very well, {my lord/my lady}. Which company did you have in mind?", "dplmc_chamberlain_talk_sellsword_2",
	[]],

	[anyone|plyr, "dplmc_chamberlain_talk_sellsword_2",
	[
		(eq, "$g_seneschal_sellswords_windblown", 0)
	],
	"The Windblown.", "dplmc_chamberlain_talk_sellsword_windblown_1",
	[]],

	[anyone|plyr, "dplmc_chamberlain_talk_sellsword_2",
	[
		(eq, "$g_seneschal_sellswords_company_cat", 0)
	],
	"The Company of the Cat.", "dplmc_chamberlain_talk_sellsword_company_cat_1",
	[]],

	[anyone|plyr, "dplmc_chamberlain_talk_sellsword_2",
	[],
	"Never mind.", "minister_pretalk",
	[]],

	[anyone, "dplmc_chamberlain_talk_sellsword_windblown_1",
	[],
	"Ah, very good, {my lord/my lady}. I've heard great things about the Windblown, it's a most excellent company of well-trained knights, men-at-arms and archers, if my sources can be believed. I doubt they'll be cheap though, their captain is notoriously disdainful of lesser men. He goes by the name of the Tattered Prince. Supposively, he was once elected Prince of Pentos, but fleed rather than accept the honor. I'm afraid that's all I know. But ah, I'm blabbering. If you want me to, I will send an envoy to their camp and recruit them for your cause. It will cost 65000 coins, is that agreeable?", "dplmc_chamberlain_talk_sellsword_windblown_2",
	[]],

	[anyone, "dplmc_chamberlain_talk_sellsword_company_cat_1",
	[],
	"Ah, very well, {my lord/my lady}. The Company of the Cat is a new company, barely twenty years old, and consist solely of infantry. To my knowledge, they've yet to win any famous battles, but then again, Essos have been oddly peaceful these last twenty years. If you want me to, I will send an envoy to their camp and recruit them for your cause. It will cost 50000 coins, is that agreeable?", "dplmc_chamberlain_talk_sellsword_company_cat_2",
	[]],

	[anyone|plyr, "dplmc_chamberlain_talk_sellsword_windblown_2",
	[],
	"Yes.", "minister_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 65000),
			(troop_remove_gold, "trp_player", 65000),
			(call_script, "script_change_troop_faction", "trp_knight_sellsword_1", "fac_player_supporters_faction"),
			(troop_set_slot, "trp_knight_sellsword_1", slot_troop_occupation, 2),
			(troop_set_slot, "trp_knight_sellsword_1", slot_troop_banner_scene_prop, "spr_banner_lords_sarranid04"),
			(str_store_troop_name, 1, "trp_knight_sellsword_1"),
			(str_store_faction_name, 2, "fac_player_supporters_faction"),
			(call_script, "script_create_kingdom_hero_party", "trp_knight_sellsword_1", "trp_player"),
			(display_log_message, "@{s1} and his company has been hired by {playername} to fight for {s2}."),
			(troop_set_note_available, "trp_knight_sellsword_1", 1),
			(assign, "$g_seneschal_sellswords_windblown", 1),
		(else_try),
			(display_message, "@You can't afford that.", 0x00ff0000),
		(try_end)
	]],

	[anyone|plyr, "dplmc_chamberlain_talk_sellsword_company_cat_2",
	[],
	"Yes.", "minister_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 50000),
			(troop_remove_gold, "trp_player", 50000),
			(call_script, "script_change_troop_faction", "trp_knight_sellsword_2", "fac_player_supporters_faction"),
			(troop_set_slot, "trp_knight_sellsword_2", slot_troop_occupation, 2),
			(troop_set_slot, "trp_knight_sellsword_2", slot_troop_banner_scene_prop, "spr_banner_lords_sarranid05"),
			(str_store_troop_name, 1, "trp_knight_sellsword_2"),
			(str_store_faction_name, 2, "fac_player_supporters_faction"),
			(call_script, "script_create_kingdom_hero_party", "trp_knight_sellsword_2", "trp_player"),
			(display_log_message, "@{s1} and his company has been hired by {playername} to fight for {s2}."),
			(troop_set_note_available, "trp_knight_sellsword_2", 1),
			(assign, "$g_seneschal_sellswords_company_cat", 1),
		(else_try),
			(display_message, "@You can't afford that.", 0x00ff0000),
		(try_end)
	]],

	[anyone|plyr, "dplmc_chamberlain_talk_sellsword_windblown_2",
	[],
	"No.", "minister_pretalk",
	[]],

	[anyone|plyr, "dplmc_chamberlain_talk_sellsword_company_cat_2",
	[],
	"No.", "minister_pretalk",
	[]],

	[anyone|plyr, "minister_talk",
	[
		(neg|is_between, "$g_player_minister", "trp_npc1", "trp_knight_1_1_wife")
	],
	"I wish for you to retire as minister.", "minister_replace",
	[]],

	[anyone|plyr, "minister_talk",
	[
		(is_between, "$g_player_minister", "trp_npc1", "trp_knight_1_1_wife"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2)
	],
	"I wish you to rejoin my direct retinue.", "minister_replace",
	[]],

	[anyone|plyr, "minister_talk",
	[
		(is_between, "$g_player_minister", "trp_npc1", "trp_heroes_end")
	],
	"I wish you to grant one of my vassals a fief.", "minister_grant_fief",
	[]],

	[anyone|plyr, "minister_talk",
	[
		(is_between, "$g_player_minister", "trp_npc1", "trp_heroes_end"),
		(assign, ":value", -1),
		(assign, ":value_2", "fac_player_supporters_faction"),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value_2", "$players_kingdom"),
		(try_end),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(eq, ":value", -1),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(this_or_next|eq, ":faction_of_party_party", ":value_2"),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
			(try_begin),
				(ge, ":party_town_lord", "trp_npc1"),
				(store_faction_of_troop, ":faction_of_troop_party_town_lord", ":party_town_lord"),
				(neq, ":faction_of_troop_party_town_lord", ":value_2"),
				(neq, ":faction_of_troop_party_town_lord", "fac_player_supporters_faction"),
				(assign, ":party_town_lord", -1),
			(try_end),
			(lt, ":party_town_lord", 0),
			(assign, ":value", ":party"),
		(try_end),
		(gt, ":value", -1),
		(str_store_party_name, 4, ":value")
	],
	"I wish to make myself lord of {s4}.", "minister_grant_self_fief",
	[]],

	[anyone, "minister_grant_self_fief",
	[],
	"As you wish. You shall be lord of {s4}.", "minister_pretalk",
	[
		(assign, ":value", -1),
		(assign, ":value_2", "fac_player_supporters_faction"),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value_2", "$players_kingdom"),
		(try_end),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(eq, ":value", -1),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(this_or_next|eq, ":faction_of_party_party", ":value_2"),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
			(try_begin),
				(ge, ":party_town_lord", "trp_npc1"),
				(store_faction_of_troop, ":faction_of_troop_party_town_lord", ":party_town_lord"),
				(neq, ":faction_of_troop_party_town_lord", ":value_2"),
				(neq, ":faction_of_troop_party_town_lord", "fac_player_supporters_faction"),
				(assign, ":party_town_lord", -1),
			(try_end),
			(lt, ":party_town_lord", 0),
			(assign, ":value", ":party"),
		(try_end),
		(call_script, "script_give_center_to_lord", ":value", "trp_player", 0),
		(try_begin),
			(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, ":value"),
			(faction_set_slot, "$players_kingdom", slot_faction_political_issue, -1),
		(try_end),
		(str_store_party_name, 4, ":value")
	]],

	[trp_dplmc_recruiter, "start",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Hello {s0}. If it's ok with you, I would like to get on with my assignment.", "dplmc_recruiter_talk",
	[]],

	[plyr|trp_dplmc_recruiter, "dplmc_recruiter_talk",
	[],
	"Ok, keep going.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[plyr|trp_dplmc_recruiter, "dplmc_recruiter_talk",
	[],
	"I want you to recruit different troops.", "dplmc_recruiter_talk_2",
	[]],

	[trp_dplmc_recruiter, "dplmc_recruiter_talk_2",
	[
		(party_get_slot, reg1, "$g_encountered_party", slot_production_sources_end),
		(party_get_slot, ":g_encountered_party_236", "$g_encountered_party", 236),
		(store_sub, ":value", ":g_encountered_party_236", "fac_kingdom_1"),
		(val_add, ":value", "str_kingdom_1_adjective"),
		(str_store_string, 1, ":value")
	],
	"My current task is to recruit {reg1} {s1} troops for you. Should I recruit different soldiers from now on?", "dplmc_recruiter_talk_3",
	[]],

	[plyr|trp_dplmc_recruiter, "dplmc_recruiter_talk_3",
	[],
	"No, keep going.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[repeat_for_factions|plyr|trp_dplmc_recruiter, "dplmc_recruiter_talk_3",
	[
		(store_repeat_object, ":repeat_object"),
		(neq, ":repeat_object", "$players_kingdom"),
		(is_between, ":repeat_object", "fac_kingdom_1", "fac_kingdoms_end"),
		(store_sub, ":value", ":repeat_object", "fac_kingdom_1"),
		(val_add, ":value", "str_kingdom_1_adjective"),
		(str_store_string, 11, ":value")
	],
	"{s11}.", "dplmc_recruiter_talk_4",
	[
		(store_repeat_object, ":repeat_object"),
		(assign, "$temp", ":repeat_object")
	]],

	[plyr|trp_dplmc_recruiter, "dplmc_recruiter_talk_3",
	[],
	"Recruit any troops.", "dplmc_recruiter_talk_4",
	[
		(assign, "$temp", -1)
	]],

	[trp_dplmc_recruiter, "dplmc_recruiter_talk_4",
	[
		(party_set_slot, "$g_encountered_party", 236, "$temp"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Sure {s0}. I will. Anything else you want?", "dplmc_recruiter_talk",
	[]],

	[trp_dplmc_messenger, "start",
	[],
	"Greetings. Sorry but I don't have time to talk now. I am delivering a very important message to {s6}.", "dplmc_messenger_talk",
	[]],

	[plyr|trp_dplmc_messenger, "dplmc_messenger_talk",
	[],
	"Alright, I don't want to delay you. Godspeed!", "dplmc_messenger_talk_farewell",
	[]],

	[trp_dplmc_messenger, "dplmc_messenger_talk_farewell",
	[],
	"Thank you. Farewell!", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(party_slot_eq, "$g_encountered_party", slot_party_type, 7),
		(party_slot_eq, "$g_encountered_party", 300, "trp_player"),
		(party_get_slot, ":g_encountered_party_ai_object", "$g_encountered_party", slot_party_ai_object),
		(str_store_party_name, 6, ":g_encountered_party_ai_object"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Greetings, {s0}. We are still patrolling {s6}. Do you have new orders?", "dplmc_patrol_talk",
	[]],

	[anyone, "dplmc_patrol_pretalk",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Greetings, {s0}. Do you have new orders?", "dplmc_patrol_talk",
	[]],

	[anyone|plyr, "dplmc_patrol_talk",
	[],
	"Please patrol a new area.", "dplmc_patrol_orders_area_ask",
	[]],

	[anyone, "dplmc_patrol_orders_area_ask",
	[],
	"Where should we go?", "dplmc_patrol_orders_area",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_patrol_orders_area",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(eq, ":faction_of_party_repeat_object", "$players_kingdom"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{s11}.", "dplmc_patrol_confirm_ask",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_patrol_orders_area",
	[],
	"Nevermind.", "dplmc_patrol_pretalk",
	[]],

	[anyone, "dplmc_patrol_confirm_ask",
	[
		(str_store_party_name, 5, "$diplomacy_var")
	],
	"As you wish, we will patrol {s5}.", "dplmc_patrol_confirm",
	[]],

	[anyone|plyr, "dplmc_patrol_confirm",
	[
		(str_store_party_name, 5, "$diplomacy_var")
	],
	"Thank you.", "close_window",
	[
		(party_set_name, "$g_encountered_party", "@{s5} patrol"),
		(party_set_slot, "$g_encountered_party", slot_party_ai_object, "$diplomacy_var"),
		(party_set_slot, "$g_encountered_party", slot_party_ai_state, 4),
		(party_set_ai_behavior, "$g_encountered_party", 1),
		(party_set_ai_object, "$g_encountered_party", "$diplomacy_var"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "dplmc_patrol_confirm",
	[],
	"Wait, I changed my mind.", "dplmc_patrol_pretalk",
	[]],

	[anyone|plyr, "dplmc_patrol_talk",
	[],
	"I need you to reinforce a garrison.", "dplmc_patrol_orders_garrison_ask",
	[]],

	[anyone, "dplmc_patrol_orders_garrison_ask",
	[],
	"Where should we go?", "dplmc_patrol_garrison_target",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_patrol_garrison_target",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(eq, ":faction_of_party_repeat_object", "$players_kingdom"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{!}{s11}.", "dplmc_patrol_garrison_confirm_ask",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_patrol_garrison_target",
	[],
	"Nevermind.", "dplmc_patrol_pretalk",
	[]],

	[anyone, "dplmc_patrol_garrison_confirm_ask",
	[
		(str_store_party_name, 5, "$diplomacy_var")
	],
	"As you wish, we will reinforce {s5}.", "dplmc_patrol_garrison_confirm",
	[]],

	[anyone|plyr, "dplmc_patrol_garrison_confirm",
	[
		(str_store_party_name, 5, "$diplomacy_var")
	],
	"Thank you.", "close_window",
	[
		(party_set_name, "$g_encountered_party", "@{s5} patrol"),
		(party_set_slot, "$g_encountered_party", slot_party_ai_object, "$diplomacy_var"),
		(party_set_slot, "$g_encountered_party", slot_party_ai_state, 14),
		(party_set_ai_behavior, "$g_encountered_party", 1),
		(party_set_ai_object, "$g_encountered_party", "$diplomacy_var"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "dplmc_patrol_garrison_confirm",
	[],
	"Wait, I changed my mind.", "dplmc_patrol_pretalk",
	[]],

	[anyone|plyr, "dplmc_patrol_talk",
	[],
	"I want to give some troops to you.", "dplmc_patrol_give_troops",
	[]],

	[anyone, "dplmc_patrol_give_troops",
	[],
	"Well, I could use some good soldiers. Thank you.", "dplmc_patrol_pretalk",
	[
		(change_screen_give_members, "$g_talk_troop_party"),
		(change_screen_exchange_members, 0)
	]],

	[anyone|plyr, "dplmc_patrol_talk",
	[],
	"I don't need you any longer. Please disband.", "close_window",
	[
		(remove_party, "$g_encountered_party"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "dplmc_patrol_talk",
	[],
	"Please continue.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_dplmc_gift_caravan, "start",
	[
		(party_slot_eq, "$g_talk_troop_party", slot_party_type, 21),
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(party_get_slot, ":g_talk_troop_party_300", "$g_talk_troop_party", 300),
		(str_store_item_name, 12, ":g_talk_troop_party_300"),
		(try_begin),
			(party_slot_ge, "$g_talk_troop_party", 263, 0),
			(party_get_slot, ":g_talk_troop_party_263", "$g_talk_troop_party", 263),
			(str_store_troop_name, 13, ":g_talk_troop_party_263"),
		(else_try),
			(str_store_party_name, 13, ":g_talk_troop_party_ai_object"),
		(try_end)
	],
	"Greetings. I' am currently delivering {s12} to {s13}.", "dplmc_gift_talk",
	[]],

	[party_tpl|pt_dplmc_gift_caravan_r, "start",
	[
		(party_slot_eq, "$g_talk_troop_party", slot_party_type, 21),
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(party_get_slot, ":g_talk_troop_party_300", "$g_talk_troop_party", 300),
		(str_store_item_name, 12, ":g_talk_troop_party_300"),
		(try_begin),
			(party_slot_ge, "$g_talk_troop_party", 263, 0),
			(party_get_slot, ":g_talk_troop_party_263", "$g_talk_troop_party", 263),
			(str_store_troop_name, 13, ":g_talk_troop_party_263"),
		(else_try),
			(str_store_party_name, 13, ":g_talk_troop_party_ai_object"),
		(try_end)
	],
	"Greetings. I' am currently delivering {s12} to {s13}.", "dplmc_gift_talk",
	[]],

	[party_tpl|pt_dplmc_gift_caravan_e, "start",
	[
		(party_slot_eq, "$g_talk_troop_party", slot_party_type, 21),
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(party_get_slot, ":g_talk_troop_party_300", "$g_talk_troop_party", 300),
		(str_store_item_name, 12, ":g_talk_troop_party_300"),
		(try_begin),
			(party_slot_ge, "$g_talk_troop_party", 263, 0),
			(party_get_slot, ":g_talk_troop_party_263", "$g_talk_troop_party", 263),
			(str_store_troop_name, 13, ":g_talk_troop_party_263"),
		(else_try),
			(str_store_party_name, 13, ":g_talk_troop_party_ai_object"),
		(try_end)
	],
	"Greetings. I' am currently delivering {s12} to {s13}.", "dplmc_gift_talk",
	[]],

	[anyone, "dplmc_gift_talk",
	[],
	"Very well! Have a nice trip.", "dplmc_gift_talk_farewell",
	[]],

	[anyone, "dplmc_gift_talk_farewell",
	[],
	"Thank you. Farewell!", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[trp_dplmc_scout, "start",
	[],
	"My lord, I haven't finished my mission yet.", "dplmc_scout_talk",
	[]],

	[anyone|plyr, "dplmc_scout_talk",
	[],
	"Ok, please go on.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$g_player_chancellor", "$g_talk_troop")
	],
	"{Milord/Milady}?", "dplmc_chancellor_talk",
	[]],

	[anyone, "dplmc_chancellor_pretalk",
	[],
	"Do you need anything else, my lord?", "dplmc_chancellor_talk",
	[]],

	[anyone|plyr, "dplmc_chancellor_talk",
	[],
	"Let's talk about domestic policy.", "dplmc_chancellor_domestic_policy_options_ask",
	[
		(try_begin),
			(neq, "$players_kingdom", "fac_player_supporters_faction"),
			(is_between, "$players_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(try_for_range, ":number", 201, 207),
				(faction_get_slot, reg0, "$players_kingdom", ":number"),
				(faction_set_slot, "fac_player_supporters_faction", ":number", reg0),
			(try_end),
		(try_end)
	]],

	[anyone, "dplmc_chancellor_domestic_policy_options_ask",
	[],
	"As you wish, my lord.", "dplmc_chancellor_domestic_policy_options",
	[]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy_options",
	[
		(is_between, "$g_player_minister", "trp_npc1", "trp_heroes_end")
	],
	"I wish to select the kingdom's culture.", "dplmc_chancellor_kingdom_culture_ask",
	[]],

	[anyone, "dplmc_chancellor_kingdom_culture_ask",
	[
		(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
		(assign, ":value", "trp_knight_1_1_wife"),
		(try_for_range, ":troop", "trp_npc1", ":value"),
			(store_faction_of_troop, reg0, ":troop"),
			(eq, reg0, "$players_kingdom"),
			(troop_slot_eq, ":troop", slot_troop_original_faction, "$players_kingdom"),
			(assign, ":value", ":troop"),
		(try_end),
		(lt, ":value", "trp_knight_1_1_wife"),
		(str_store_faction_name, 11, "$players_kingdom"),
		(call_script, "script_dplmc_print_cultural_word_to_sreg", ":value", 8, 0)
	],
	"The {s0} of the {s11} would be unlikely to accept the imposition of other culture.", "dplmc_chancellor_talk",
	[]],

	[anyone, "dplmc_chancellor_kingdom_culture_ask",
	[
		(try_begin),
			(this_or_next|le, "$g_player_culture", 0),
			(neg|is_between, "$g_player_culture", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(str_store_string, 11, "@Your sovereignty has no specified culture"),
		(else_try),
			(store_sub, ":value", "$g_player_culture", "fac_kingdom_1"),
			(val_add, ":value", "str_kingdom_1_adjective"),
			(str_store_string, 11, ":value"),
			(str_store_string, 11, "@Your sovereignty culture is: {s11}"),
		(try_end)
	],
	"{s11}. Do you want to change it?", "dplmc_chancellor_kingdom_culture_select",
	[]],

	[anyone|repeat_for_factions|plyr, "dplmc_chancellor_kingdom_culture_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(assign, ":value", 0),
		(try_begin),
			(this_or_next|eq, ":repeat_object", "$players_oath_renounced_against_kingdom"),
			(eq, ":repeat_object", "$players_kingdom"),
			(assign, ":value", 1),
		(else_try),
			(is_between, "$g_starting_town", "p_town_1", "p_salt_mine"),
			(party_slot_eq, "$g_starting_town", slot_center_original_faction, ":repeat_object"),
			(assign, ":value", 1),
		(else_try),
			(assign, ":value_2", "p_village_1"),
			(try_for_range, ":party", "p_town_1", ":value_2"),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(eq, ":faction_of_party_party", "$players_kingdom"),
				(party_slot_eq, ":party", slot_center_original_faction, ":repeat_object"),
				(assign, ":value_2", ":party"),
				(assign, ":value", 1),
			(try_end),
			(eq, ":value", 1),
		(else_try),
			(assign, ":value_2", "trp_heroes_end"),
			(try_for_range, ":party", "trp_npc1", ":value_2"),
				(store_faction_of_troop, ":faction_of_party_party", ":party"),
				(eq, ":faction_of_party_party", "$players_kingdom"),
				(troop_slot_eq, ":party", slot_troop_original_faction, ":repeat_object"),
				(assign, ":value_2", ":party"),
				(assign, ":value", 1),
			(try_end),
		(try_end),
		(eq, ":value", 1),
		(store_sub, ":value_3", ":repeat_object", "fac_kingdom_1"),
		(val_add, ":value_3", "str_kingdom_1_adjective"),
		(str_store_string, 11, ":value_3")
	],
	"{s11}.", "dplmc_chancellor_pretalk",
	[
		(store_repeat_object, ":repeat_object"),
		(assign, "$g_player_culture", ":repeat_object"),
		(try_begin),
			(this_or_next|le, "$g_player_culture", 0),
			(neg|is_between, "$g_player_culture", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(str_store_string, 11, "@Sovereignty culture: None"),
		(else_try),
			(store_sub, ":value", "$g_player_culture", "fac_kingdom_1"),
			(val_add, ":value", "str_kingdom_1_adjective"),
			(str_store_string, 11, ":value"),
			(str_store_string, 11, "@Sovereignty culture: {s11}"),
		(try_end),
		(display_message, "@{s11}")
	]],

	[anyone|plyr, "dplmc_chancellor_kingdom_culture_select",
	[],
	"Favor no culture over others.", "dplmc_chancellor_pretalk",
	[
		(assign, "$g_player_culture", 0)
	]],

	[anyone|plyr, "dplmc_chancellor_kingdom_culture_select",
	[],
	"Make no change.", "dplmc_chancellor_pretalk",
	[]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy_options",
	[
		(faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0)
	],
	"I require information about the domestic policy of another sovereignty.", "dplmc_chancellor_domestic_policy_info_ask",
	[]],

	[anyone, "dplmc_chancellor_domestic_policy_info_ask",
	[],
	"About which sovereignty do you need information?", "dplmc_chancellor_domestic_policy_info_select",
	[]],

	[anyone|repeat_for_factions|plyr, "dplmc_chancellor_domestic_policy_info_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_kingdom_1", "fac_kingdoms_end"),
		(str_store_faction_name, 10, ":repeat_object")
	],
	"{s10}.", "dplmc_chancellor_domestic_policy_info",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy_info_select",
	[],
	"None.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_domestic_policy_info",
	[
		(str_store_faction_name_link, 10, "$diplomacy_var"),
		(assign, ":value", "str_dplmc_neither_centralize_nor_decentralized"),
		(faction_get_slot, ":diplomacy_var_201", "$diplomacy_var", 201),
		(val_add, ":value", ":diplomacy_var_201"),
		(str_store_string, 4, ":value"),
		(str_store_string, 4, "@The goverment of the {s10} is {s4}."),
		(assign, ":value", "str_dplmc_neither_aristocratic_nor_plutocratic"),
		(faction_get_slot, ":diplomacy_var_202", "$diplomacy_var", 202),
		(val_add, ":value", ":diplomacy_var_202"),
		(str_store_string, 5, ":value"),
		(str_store_string, 5, "@The upper class society is {s5}."),
		(assign, ":value", "str_dplmc_mixture_serfs"),
		(faction_get_slot, ":diplomacy_var_203", "$diplomacy_var", 203),
		(val_add, ":value", ":diplomacy_var_203"),
		(str_store_string, 6, ":value"),
		(str_store_string, 6, "@The people are {s6}."),
		(assign, ":value", "str_dplmc_mediocre_quality"),
		(faction_get_slot, ":diplomacy_var_204", "$diplomacy_var", 204),
		(val_add, ":value", ":diplomacy_var_204"),
		(str_store_string, 7, ":value"),
		(str_store_string, 7, "@The troops have {s7}."),
		(assign, ":value", "str_dplmc_neither_mercantilist_nor_laissez_faire"),
		(faction_get_slot, ":diplomacy_var_206", "$diplomacy_var", 206),
		(val_add, ":value", ":diplomacy_var_206"),
		(str_store_string, 0, ":value"),
		(str_store_string, 0, "@The government's approach to trade is {s0}.")
	],
	"{s4} {s5} {s6} {s7} {s0}", "dplmc_chancellor_domestic_policy_info_ask",
	[]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy_options",
	[
		(faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0)
	],
	"Let's change our domestic policy.", "dplmc_chancellor_domestic_policy_ask",
	[]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy_options",
	[],
	"Nevermind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_domestic_policy_ask",
	[
		(store_current_hours, ":current_hours"),
		(faction_get_slot, ":player_supporters_faction_201", "fac_player_supporters_faction", 201),
		(val_mul, ":player_supporters_faction_201", -5),
		(val_add, ":player_supporters_faction_201", 30),
		(val_clamp, ":player_supporters_faction_201", 15, 46),
		(val_mul, ":player_supporters_faction_201", 24),
		(val_sub, ":current_hours", ":player_supporters_faction_201"),
		(faction_get_slot, ":player_supporters_faction_201", "fac_player_supporters_faction", 200),
		(ge, ":current_hours", ":player_supporters_faction_201"),
		(assign, ":value", "str_dplmc_neither_centralize_nor_decentralized"),
		(faction_get_slot, ":player_supporters_faction_201_2", "fac_player_supporters_faction", 201),
		(val_add, ":value", ":player_supporters_faction_201_2"),
		(str_store_string, 4, ":value"),
		(str_store_string, 4, "@Our goverment is {s4}."),
		(assign, ":value", "str_dplmc_neither_aristocratic_nor_plutocratic"),
		(faction_get_slot, ":player_supporters_faction_202", "fac_player_supporters_faction", 202),
		(val_add, ":value", ":player_supporters_faction_202"),
		(str_store_string, 5, ":value"),
		(str_store_string, 5, "@The upper class society is {s5}."),
		(assign, ":value", "str_dplmc_mixture_serfs"),
		(faction_get_slot, ":player_supporters_faction_203", "fac_player_supporters_faction", 203),
		(val_add, ":value", ":player_supporters_faction_203"),
		(str_store_string, 6, ":value"),
		(str_store_string, 6, "@Our people are {s6}."),
		(assign, ":value", "str_dplmc_mediocre_quality"),
		(faction_get_slot, ":player_supporters_faction_204", "fac_player_supporters_faction", 204),
		(val_add, ":value", ":player_supporters_faction_204"),
		(str_store_string, 7, ":value"),
		(str_store_string, 7, "@Our troops have {s7}."),
		(assign, ":value", "str_dplmc_neither_mercantilist_nor_laissez_faire"),
		(faction_get_slot, ":player_supporters_faction_206", "fac_player_supporters_faction", 206),
		(val_add, ":value", ":player_supporters_faction_206"),
		(str_store_string, 0, ":value"),
		(str_store_string, 0, "@Our approach to trade is {s0}.")
	],
	"{s4} {s5} {s6} {s7} {s0} What do you want to change?", "dplmc_chancellor_domestic_policy",
	[]],

	[anyone, "dplmc_chancellor_domestic_policy_ask",
	[
		(assign, ":value", "str_dplmc_neither_centralize_nor_decentralized"),
		(faction_get_slot, ":player_supporters_faction_201", "fac_player_supporters_faction", 201),
		(val_add, ":value", ":player_supporters_faction_201"),
		(str_store_string, 4, ":value"),
		(str_store_string, 4, "@Our goverment is {s4}."),
		(assign, ":value", "str_dplmc_neither_aristocratic_nor_plutocratic"),
		(faction_get_slot, ":player_supporters_faction_202", "fac_player_supporters_faction", 202),
		(val_add, ":value", ":player_supporters_faction_202"),
		(str_store_string, 5, ":value"),
		(str_store_string, 5, "@The upper class society is {s5}."),
		(assign, ":value", "str_dplmc_mixture_serfs"),
		(faction_get_slot, ":player_supporters_faction_203", "fac_player_supporters_faction", 203),
		(val_add, ":value", ":player_supporters_faction_203"),
		(str_store_string, 6, ":value"),
		(str_store_string, 6, "@Our people are {s6}."),
		(assign, ":value", "str_dplmc_mediocre_quality"),
		(faction_get_slot, ":player_supporters_faction_204", "fac_player_supporters_faction", 204),
		(val_add, ":value", ":player_supporters_faction_204"),
		(str_store_string, 7, ":value"),
		(str_store_string, 7, "@Our troops have {s7}."),
		(assign, ":value", "str_dplmc_neither_mercantilist_nor_laissez_faire"),
		(faction_get_slot, ":player_supporters_faction_206", "fac_player_supporters_faction", 206),
		(val_add, ":value", ":player_supporters_faction_206"),
		(str_store_string, 0, ":value"),
		(str_store_string, 0, "@Our approach to trade is {s0}."),
		(store_current_hours, ":current_hours"),
		(store_mul, reg1, ":player_supporters_faction_201", -5),
		(val_add, reg1, 30),
		(val_clamp, reg1, 15, 46),
		(store_mul, ":value_2", reg1, 24),
		(val_sub, ":current_hours", ":value_2"),
		(faction_get_slot, ":value_2", "fac_player_supporters_faction", 200),
		(store_sub, ":value_3", ":value_2", ":current_hours"),
		(store_div, ":value_4", ":value_3", 24),
		(store_mod, ":value_5", ":value_3", 24),
		(try_begin),
			(lt, ":value_5", 0),
			(val_add, ":value_4", 1),
		(try_end),
		(assign, reg0, ":value_4")
	],
	"{s4} {s5} {s6} {s7} {s0} We can only change the policy every {reg1} days, the people have to get used to it. We have to wait {reg0} days.", "dplmc_chancellor_pretalk",
	[]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy",
	[
		(faction_get_slot, ":player_supporters_faction_203", "fac_player_supporters_faction", 203),
		(lt, ":player_supporters_faction_203", 3)
	],
	"Bring more people into serfdom.", "dplmc_chancellor_domestic_policy_confirm",
	[
		(faction_get_slot, ":player_supporters_faction_203", "fac_player_supporters_faction", 203),
		(val_add, ":player_supporters_faction_203", 1),
		(faction_set_slot, "fac_player_supporters_faction", 203, ":player_supporters_faction_203")
	]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy",
	[
		(faction_get_slot, ":player_supporters_faction_203", "fac_player_supporters_faction", 203),
		(gt, ":player_supporters_faction_203", -3)
	],
	"I want more freedom for the people.", "dplmc_chancellor_domestic_policy_confirm",
	[
		(faction_get_slot, ":player_supporters_faction_203", "fac_player_supporters_faction", 203),
		(val_sub, ":player_supporters_faction_203", 1),
		(faction_set_slot, "fac_player_supporters_faction", 203, ":player_supporters_faction_203")
	]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy",
	[
		(faction_get_slot, ":player_supporters_faction_201", "fac_player_supporters_faction", 201),
		(lt, ":player_supporters_faction_201", 3)
	],
	"Let's centralize the decisions.", "dplmc_chancellor_domestic_policy_confirm",
	[
		(faction_get_slot, ":player_supporters_faction_201", "fac_player_supporters_faction", 201),
		(val_add, ":player_supporters_faction_201", 1),
		(faction_set_slot, "fac_player_supporters_faction", 201, ":player_supporters_faction_201")
	]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy",
	[
		(faction_get_slot, ":player_supporters_faction_201", "fac_player_supporters_faction", 201),
		(gt, ":player_supporters_faction_201", -3)
	],
	"Grant increased autonomy to local authorities.", "dplmc_chancellor_domestic_policy_confirm",
	[
		(faction_get_slot, ":player_supporters_faction_201", "fac_player_supporters_faction", 201),
		(val_sub, ":player_supporters_faction_201", 1),
		(faction_set_slot, "fac_player_supporters_faction", 201, ":player_supporters_faction_201")
	]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy",
	[
		(faction_get_slot, ":player_supporters_faction_204", "fac_player_supporters_faction", 204),
		(lt, ":player_supporters_faction_204", 3)
	],
	"I prefer quality troops to many troops.", "dplmc_chancellor_domestic_policy_confirm",
	[
		(faction_get_slot, ":player_supporters_faction_204", "fac_player_supporters_faction", 204),
		(val_add, ":player_supporters_faction_204", 1),
		(faction_set_slot, "fac_player_supporters_faction", 204, ":player_supporters_faction_204")
	]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy",
	[
		(faction_get_slot, ":player_supporters_faction_204", "fac_player_supporters_faction", 204),
		(gt, ":player_supporters_faction_204", -3)
	],
	"Quantity has a quality of its own.  I prefer many troops to few quality troops.", "dplmc_chancellor_domestic_policy_confirm",
	[
		(faction_get_slot, ":player_supporters_faction_204", "fac_player_supporters_faction", 204),
		(val_sub, ":player_supporters_faction_204", 1),
		(faction_set_slot, "fac_player_supporters_faction", 204, ":player_supporters_faction_204")
	]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy",
	[
		(faction_get_slot, ":player_supporters_faction_202", "fac_player_supporters_faction", 202),
		(lt, ":player_supporters_faction_202", 3)
	],
	"Give the nobles more power.", "dplmc_chancellor_domestic_policy_confirm",
	[
		(faction_get_slot, ":player_supporters_faction_202", "fac_player_supporters_faction", 202),
		(val_add, ":player_supporters_faction_202", 1),
		(faction_set_slot, "fac_player_supporters_faction", 202, ":player_supporters_faction_202")
	]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy",
	[
		(faction_get_slot, ":player_supporters_faction_202", "fac_player_supporters_faction", 202),
		(gt, ":player_supporters_faction_202", -3)
	],
	"Give the merchants and trade guilds more power.", "dplmc_chancellor_domestic_policy_confirm",
	[
		(faction_get_slot, ":player_supporters_faction_202", "fac_player_supporters_faction", 202),
		(val_sub, ":player_supporters_faction_202", 1),
		(faction_set_slot, "fac_player_supporters_faction", 202, ":player_supporters_faction_202")
	]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy",
	[
		(faction_get_slot, ":player_supporters_faction_206", "fac_player_supporters_faction", 206),
		(lt, ":player_supporters_faction_206", 3)
	],
	"Manage the economy more actively to increase production and maximize exports.", "dplmc_chancellor_domestic_policy_confirm",
	[
		(faction_get_slot, ":player_supporters_faction_206", "fac_player_supporters_faction", 206),
		(val_add, ":player_supporters_faction_206", 1),
		(faction_set_slot, "fac_player_supporters_faction", 206, ":player_supporters_faction_206")
	]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy",
	[
		(faction_get_slot, ":player_supporters_faction_206", "fac_player_supporters_faction", 206),
		(gt, ":player_supporters_faction_206", -3)
	],
	"Reduce the crown's role in managing industry and commerce.", "dplmc_chancellor_domestic_policy_confirm",
	[
		(faction_get_slot, ":player_supporters_faction_206", "fac_player_supporters_faction", 206),
		(val_sub, ":player_supporters_faction_206", 1),
		(faction_set_slot, "fac_player_supporters_faction", 206, ":player_supporters_faction_206")
	]],

	[anyone|plyr, "dplmc_chancellor_domestic_policy",
	[],
	"Never mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_domestic_policy_confirm",
	[],
	"I will initiate all necessary steps.", "dplmc_chancellor_pretalk",
	[
		(store_current_hours, ":current_hours"),
		(faction_set_slot, "fac_player_supporters_faction", 200, ":current_hours"),
		(try_begin),
			(neq, "$players_kingdom", "fac_player_supporters_faction"),
			(is_between, "$players_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(try_for_range, ":number", 201, 207),
				(faction_get_slot, reg0, "fac_player_supporters_faction", ":number"),
				(faction_set_slot, "$players_kingdom", ":number", reg0),
			(try_end),
		(try_end)
	]],

	[anyone|plyr, "dplmc_chancellor_talk",
	[],
	"I require information about a lord.", "dplmc_chancellor_info_kingdom_ask",
	[]],

	[anyone, "dplmc_chancellor_info_kingdom_ask",
	[],
	"Where is he from?", "dplmc_chancellor_info_kingdom_select",
	[]],

	[anyone|repeat_for_factions|plyr, "dplmc_chancellor_info_kingdom_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(faction_slot_eq, ":repeat_object", slot_faction_state, 0),
		(str_store_faction_name, 11, ":repeat_object")
	],
	"{s11}.", "dplmc_chancellor_info_person_ask",
	[
		(store_repeat_object, "$g_faction_selected")
	]],

	[anyone|plyr, "dplmc_chancellor_info_kingdom_select",
	[],
	"Never mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_info_person_ask",
	[],
	"About which lord do you want information?", "dplmc_chancellor_info_person_select",
	[]],

	[anyone|repeat_for_troops|plyr, "dplmc_chancellor_info_person_select",
	[
		(store_repeat_object, ":repeat_object"),
		(neq, "$g_talk_troop", ":repeat_object"),
		(is_between, ":repeat_object", "trp_npc1", "trp_heroes_end"),
		(neq, ":repeat_object", "trp_player"),
		(neg|faction_slot_eq, "$g_faction_selected", slot_faction_leader, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(eq, "$g_faction_selected", ":faction_of_troop_repeat_object"),
		(str_store_troop_name, 1, ":repeat_object")
	],
	"{s1}.", "dplmc_chancellor_info_person",
	[
		(store_repeat_object, "$lord_selected")
	]],

	[anyone|plyr, "dplmc_chancellor_info_person_select",
	[],
	"About no one.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_info_person",
	[
		(call_script, "script_dplmc_troop_political_notes_to_s47", "$lord_selected")
	],
	"{s47}", "dplmc_chancellor_pretalk",
	[]],

	[anyone|plyr, "dplmc_chancellor_talk",
	[
		(faction_get_slot, ":players_kingdom_political_issue", "$players_kingdom", slot_faction_political_issue),
		(is_between, ":players_kingdom_political_issue", "p_town_1", "p_salt_mine"),
		(str_store_party_name, 4, ":players_kingdom_political_issue")
	],
	"What's the mood of the lords regarding the fief of {s4}?", "dplmc_chancellor_cur_stance",
	[]],

	[anyone, "dplmc_chancellor_cur_stance",
	[
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(try_for_parties, ":value_2"),
			(party_slot_eq, ":value_2", slot_party_type, 13),
			(store_faction_of_party, ":faction_of_party_value_2", ":value_2"),
			(this_or_next|eq, ":value", ":faction_of_party_value_2"),
			(eq, "fac_player_supporters_faction", ":faction_of_party_value_2"),
			(party_stack_get_troop_id, ":party_stack_troop_id_value_2_0", ":value_2", 0),
			(is_between, ":party_stack_troop_id_value_2_0", "trp_npc1", "trp_heroes_end"),
			(troop_set_slot, ":party_stack_troop_id_value_2_0", 164, 0),
		(try_end),
		(try_for_parties, ":value_2"),
			(party_slot_eq, ":value_2", slot_party_type, 13),
			(store_faction_of_party, ":faction_of_party_value_2", ":value_2"),
			(this_or_next|eq, ":value", ":faction_of_party_value_2"),
			(eq, "fac_player_supporters_faction", ":faction_of_party_value_2"),
			(party_stack_get_troop_id, ":party_stack_troop_id_value_2_0", ":value_2", 0),
			(is_between, ":party_stack_troop_id_value_2_0", "trp_npc1", "trp_heroes_end"),
			(troop_get_slot, ":party_stack_troop_id_value_2_0_stance_on_faction_issue", ":party_stack_troop_id_value_2_0", slot_troop_stance_on_faction_issue),
			(is_between, ":party_stack_troop_id_value_2_0_stance_on_faction_issue", "trp_npc1", "trp_heroes_end"),
			(troop_get_slot, ":party_stack_troop_id_value_2_0_stance_on_faction_issue_164", ":party_stack_troop_id_value_2_0_stance_on_faction_issue", 164),
			(val_add, ":party_stack_troop_id_value_2_0_stance_on_faction_issue_164", 1),
			(troop_set_slot, ":party_stack_troop_id_value_2_0_stance_on_faction_issue", 164, ":party_stack_troop_id_value_2_0_stance_on_faction_issue_164"),
		(try_end),
		(assign, ":value_3", 0),
		(str_store_string, 10, "@According  to the report of our spies"),
		(try_for_parties, ":value_2"),
			(party_slot_eq, ":value_2", slot_party_type, 13),
			(store_faction_of_party, ":faction_of_party_value_2", ":value_2"),
			(this_or_next|eq, ":value", ":faction_of_party_value_2"),
			(eq, "fac_player_supporters_faction", ":faction_of_party_value_2"),
			(party_stack_get_troop_id, ":party_stack_troop_id_value_2_0", ":value_2", 0),
			(is_between, ":party_stack_troop_id_value_2_0", "trp_npc1", "trp_heroes_end"),
			(troop_get_slot, ":party_stack_troop_id_value_2_0_stance_on_faction_issue_164", ":party_stack_troop_id_value_2_0", 164),
			(try_begin),
				(gt, ":party_stack_troop_id_value_2_0_stance_on_faction_issue_164", 0),
				(str_store_troop_name, 9, ":party_stack_troop_id_value_2_0"),
				(assign, reg3, ":party_stack_troop_id_value_2_0_stance_on_faction_issue_164"),
				(str_store_string, 10, "@{s10} {reg3} lords support {s9}."),
				(assign, ":value_3", 1),
			(try_end),
		(try_end),
		(try_begin),
			(eq, ":value_3", 0),
			(str_store_string, 10, "@Sorry, currently I can't provide any information about the lord's mood, our spies haven't reported back yet."),
		(try_end)
	],
	"{s10}", "dplmc_chancellor_pretalk",
	[]],

	[anyone|plyr, "dplmc_chancellor_talk",
	[],
	"Please send a message to another lord.", "dplmc_chancellor_message_ask_type",
	[]],

	[anyone, "dplmc_chancellor_message_ask_type",
	[],
	"To whom do you like to send the message?", "dplmc_chancellor_message_lord_select",
	[]],

	[anyone|repeat_for_troops|plyr, "dplmc_chancellor_message_lord_select",
	[
		(store_repeat_object, ":repeat_object"),
		(neq, "$g_talk_troop", ":repeat_object"),
		(is_between, ":repeat_object", "trp_npc1", "trp_heroes_end"),
		(neq, ":repeat_object", "trp_player"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(eq, "$players_kingdom", ":faction_of_troop_repeat_object"),
		(str_store_troop_name, 1, ":repeat_object")
	],
	"{s1}.", "dplmc_chancellor_message_ask",
	[
		(store_repeat_object, "$lord_selected")
	]],

	[anyone|plyr, "dplmc_chancellor_message_lord_select",
	[],
	"Nevermind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone|plyr, "dplmc_chancellor_gift_lord_select",
	[],
	"I can't think of anyone.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_message_ask",
	[
		(str_store_troop_name, 6, "$lord_selected"),
		(assign, reg4, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$lord_selected"),
			(assign, reg4, 1),
		(try_end)
	],
	"What do you want to tell {s6}?", "dplmc_chancellor_message_select",
	[]],

	[anyone|plyr, "dplmc_chancellor_message_select",
	[],
	"Ask {reg4?her:him} if {reg4?she:he} is willing to accompany me in the field.", "dplmc_chancellor_message_lord_ask",
	[
		(assign, "$temp", 11),
		(assign, "$temp_2", "p_main_party")
	]],

	[anyone|plyr, "dplmc_chancellor_message_select",
	[],
	"Ask {reg4?her:him} if {reg4?she:he} is willing to go to a location.", "dplmc_chancellor_message_goto_lord_ask",
	[
		(assign, "$temp", 7)
	]],

	[anyone|plyr, "dplmc_chancellor_message_select",
	[],
	"Ask {reg4?her:him} if {reg4?she:he} is willing to patrol a location.", "dplmc_chancellor_message_goto_lord_ask",
	[
		(assign, "$temp", 4)
	]],

	[anyone|plyr, "dplmc_chancellor_message_select",
	[],
	"Ask {reg4?her:him} if {reg4?she:he} is willing to flee to a location.", "dplmc_chancellor_message_goto_lord_ask",
	[
		(assign, "$temp", 14)
	]],

	[anyone|plyr, "dplmc_chancellor_message_select",
	[],
	"Ask {reg4?her:him} if {reg4?she:he} is willing to besiege a location.", "dplmc_chancellor_message_goto_lord_ask",
	[
		(assign, "$temp", 1)
	]],

	[anyone|plyr, "dplmc_chancellor_message_select",
	[],
	"Ask {reg4?her:him} if {reg4?she:he} is willing to raid around a location.", "dplmc_chancellor_message_goto_lord_ask",
	[
		(assign, "$temp", 5)
	]],

	[anyone|plyr, "dplmc_chancellor_message_select",
	[],
	"Never mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_message_goto_lord_ask",
	[],
	"Where do you order {reg4?her:him}?", "dplmc_chancellor_message_order_details",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_chancellor_message_order_details",
	[
		(store_repeat_object, ":repeat_object"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(store_relation, ":relation_faction_of_party_repeat_object_players_kingdom", ":faction_of_party_repeat_object", "$players_kingdom"),
		(assign, ":value", 0),
		(try_begin),
			(this_or_next|eq, "$temp", 14),
			(eq, "$temp", 7),
			(try_begin),
				(this_or_next|party_slot_eq, ":repeat_object", slot_party_type, 2),
				(party_slot_eq, ":repeat_object", slot_party_type, 3),
				(eq, ":faction_of_party_repeat_object", "$players_kingdom"),
				(assign, ":value", 1),
			(try_end),
		(else_try),
			(eq, "$temp", 5),
			(try_begin),
				(party_slot_eq, ":repeat_object", slot_party_type, 4),
				(lt, ":relation_faction_of_party_repeat_object_players_kingdom", 0),
				(assign, ":value", 1),
			(try_end),
		(else_try),
			(eq, "$temp", 1),
			(try_begin),
				(this_or_next|party_slot_eq, ":repeat_object", slot_party_type, 2),
				(party_slot_eq, ":repeat_object", slot_party_type, 3),
				(party_slot_eq, ":repeat_object", slot_center_is_besieged_by, -1),
				(lt, ":relation_faction_of_party_repeat_object_players_kingdom", 0),
				(assign, ":value", 1),
			(try_end),
		(else_try),
			(eq, "$temp", 4),
			(try_begin),
				(eq, ":faction_of_party_repeat_object", "$players_kingdom"),
				(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
				(assign, ":value", 1),
			(else_try),
				(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_repeat_object_main_party", ":repeat_object", "p_main_party"),
				(le, ":distance_to_party_from_party_repeat_object_main_party", 25),
				(assign, ":value", 1),
			(try_end),
		(try_end),
		(eq, ":value", 1),
		(neq, ":repeat_object", "$g_encountered_party"),
		(str_store_party_name, 1, ":repeat_object")
	],
	"{s1}", "dplmc_chancellor_message_lord_ask",
	[
		(store_repeat_object, "$temp_2"),
		(store_current_hours, ":current_hours"),
		(party_set_slot, "$g_talk_troop_party", 261, "trp_kingdom_heroes_including_player_begin"),
		(party_set_slot, "$g_talk_troop_party", 262, "$temp"),
		(party_set_slot, "$g_talk_troop_party", 263, "$temp_2"),
		(party_set_slot, "$g_talk_troop_party", 264, ":current_hours")
	]],

	[anyone|plyr, "dplmc_chancellor_message_order_details",
	[],
	"Nowhere.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_message_lord_ask",
	[
		(assign, reg4, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$lord_selected"),
			(assign, reg4, 1),
		(try_end),
		(eq, "$temp", 11),
		(str_store_troop_name, 11, "$lord_selected")
	],
	"Of course, I will send a messenger to {s11} and ask {reg4?her:him} if {reg4?she:he} is willing to accompany you in the field.", "dplmc_message_send_confirm",
	[]],

	[anyone, "dplmc_chancellor_message_lord_ask",
	[
		(eq, "$temp", 7),
		(str_store_troop_name, 11, "$lord_selected"),
		(str_store_party_name, 12, "$temp_2")
	],
	"Of course, I will send a messenger to {s11} and ask {reg4?her:him} if {reg4?she:he} is willing to go to {s12}.", "dplmc_message_send_confirm",
	[]],

	[anyone, "dplmc_chancellor_message_lord_ask",
	[
		(eq, "$temp", 4),
		(str_store_troop_name, 11, "$lord_selected"),
		(str_store_party_name, 12, "$temp_2")
	],
	"Of course, I will send a messenger to {s11} and ask {reg4?her:him} if {reg4?she:he} is willing to patrol around {s12}.", "dplmc_message_send_confirm",
	[]],

	[anyone, "dplmc_chancellor_message_lord_ask",
	[
		(eq, "$temp", 14),
		(str_store_troop_name, 11, "$lord_selected"),
		(str_store_party_name, 12, "$temp_2")
	],
	"Of course, I will send a messenger to {s11} and ask {reg4?her:him} if {reg4?she:he} is willing to retreat to {s12}.", "dplmc_message_send_confirm",
	[]],

	[anyone, "dplmc_chancellor_message_lord_ask",
	[
		(eq, "$temp", 1),
		(str_store_troop_name, 11, "$lord_selected"),
		(str_store_party_name, 12, "$temp_2")
	],
	"Of course, I will send a messenger to {s11} and ask {reg4?her:him} if {reg4?she:he} is willing to besiege {s12}.", "dplmc_message_send_confirm",
	[]],

	[anyone, "dplmc_chancellor_message_lord_ask",
	[
		(eq, "$temp", 5),
		(str_store_troop_name, 11, "$lord_selected"),
		(str_store_party_name, 12, "$temp_2")
	],
	"Of course, I will send a messenger to {s11} and ask {reg4?her:him} if {reg4?she:he} is willing to raid around {s12}.", "dplmc_message_send_confirm",
	[]],

	[anyone|plyr, "dplmc_message_send_confirm",
	[],
	"Thank you.", "dplmc_chancellor_pretalk",
	[
		(call_script, "script_dplmc_send_messenger_to_troop", "$lord_selected", "$temp", "$temp_2")
	]],

	[anyone|plyr, "dplmc_message_send_confirm",
	[],
	"I changed my mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone|plyr, "dplmc_chancellor_talk",
	[],
	"Please send a gift.", "dplmc_chancellor_gift_ask_where",
	[]],

	[anyone, "dplmc_chancellor_gift_ask_where",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(le, ":troop_gold_household_possessions", 50)
	],
	"We don't have enough money in our treasury to send a gift! It will cost us 50 coins to send a gift.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_gift_ask_where",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 50)
	],
	"Sending a gift will cost us 50 coins. I will withdraw the money from the treasury. Do you want to send your gift to a person or a settlement?", "dplmc_chancellor_gift_where",
	[]],

	[anyone|plyr, "dplmc_chancellor_gift_where",
	[],
	"To a person.", "dplmc_chancellor_gift_ask_person",
	[]],

	[anyone|plyr, "dplmc_chancellor_gift_where",
	[],
	"To a settlement.", "dplmc_chancellor_center_gift_ask_type",
	[]],

	[anyone|plyr, "dplmc_chancellor_gift_where",
	[],
	"Nowhere.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_center_gift_ask_type",
	[],
	"I recommend to send 300 units of smoked fish, cheese, or honey. If we have enough in our household I will induce a servant to deliver it.", "dplmc_chancellor_center_gift_select",
	[]],

	[anyone|plyr, "dplmc_chancellor_center_gift_select",
	[
		(troop_get_inventory_capacity, ":inventory_capacity_household_possessions", "trp_household_possessions"),
		(assign, ":var_2", 0),
		(try_for_range, ":number", 0, ":inventory_capacity_household_possessions"),
			(troop_get_inventory_slot, ":inventory_slot_household_possessions_number", "trp_household_possessions", ":number"),
			(eq, ":inventory_slot_household_possessions_number", "itm_trade_smoked_fish"),
			(troop_inventory_slot_get_item_amount, ":troop_inventory_slot_item_amount_household_possessions_number", "trp_household_possessions", ":number"),
			(val_add, ":var_2", ":troop_inventory_slot_item_amount_household_possessions_number"),
		(try_end),
		(ge, ":var_2", 300)
	],
	"Send some fish.", "dplmc_chancellor_center_gift_kingdom_ask",
	[
		(assign, "$diplomacy_var", "itm_trade_smoked_fish"),
		(assign, "$diplomacy_var2", 300)
	]],

	[anyone|plyr, "dplmc_chancellor_center_gift_select",
	[
		(troop_get_inventory_capacity, ":inventory_capacity_household_possessions", "trp_household_possessions"),
		(assign, ":var_2", 0),
		(try_for_range, ":number", 0, ":inventory_capacity_household_possessions"),
			(troop_get_inventory_slot, ":inventory_slot_household_possessions_number", "trp_household_possessions", ":number"),
			(eq, ":inventory_slot_household_possessions_number", "itm_trade_cheese"),
			(troop_inventory_slot_get_item_amount, ":troop_inventory_slot_item_amount_household_possessions_number", "trp_household_possessions", ":number"),
			(val_add, ":var_2", ":troop_inventory_slot_item_amount_household_possessions_number"),
		(try_end),
		(ge, ":var_2", 300)
	],
	"Send some cheese.", "dplmc_chancellor_center_gift_kingdom_ask",
	[
		(assign, "$diplomacy_var", "itm_trade_cheese"),
		(assign, "$diplomacy_var2", 300)
	]],

	[anyone|plyr, "dplmc_chancellor_center_gift_select",
	[
		(troop_get_inventory_capacity, ":inventory_capacity_household_possessions", "trp_household_possessions"),
		(assign, ":var_2", 0),
		(try_for_range, ":number", 0, ":inventory_capacity_household_possessions"),
			(troop_get_inventory_slot, ":inventory_slot_household_possessions_number", "trp_household_possessions", ":number"),
			(eq, ":inventory_slot_household_possessions_number", "itm_trade_honey"),
			(troop_inventory_slot_get_item_amount, ":troop_inventory_slot_item_amount_household_possessions_number", "trp_household_possessions", ":number"),
			(val_add, ":var_2", ":troop_inventory_slot_item_amount_household_possessions_number"),
		(try_end),
		(ge, ":var_2", 300)
	],
	"Send some honey.", "dplmc_chancellor_center_gift_kingdom_ask",
	[
		(assign, "$diplomacy_var", "itm_trade_honey"),
		(assign, "$diplomacy_var2", 300)
	]],

	[anyone|plyr, "dplmc_chancellor_center_gift_select",
	[],
	"Never mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_center_gift_kingdom_ask",
	[],
	"Where is the settlement?", "dplmc_chancellor_center_gift_kingdom_select",
	[]],

	[anyone|repeat_for_factions|plyr, "dplmc_chancellor_center_gift_kingdom_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(faction_slot_eq, ":repeat_object", slot_faction_state, 0),
		(str_store_faction_name, 11, ":repeat_object")
	],
	"In {s11}.", "dplmc_chancellor_center_gift_lord_ask",
	[
		(store_repeat_object, "$g_faction_selected")
	]],

	[anyone|plyr, "dplmc_chancellor_center_gift_kingdom_select",
	[],
	"Never mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_center_gift_lord_ask",
	[
		(is_between, "$g_faction_selected", "fac_kingdom_1", "fac_kingdoms_end"),
		(neg|is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
		(store_relation, reg0, "$players_kingdom", "$g_faction_selected"),
		(lt, reg0, 0),
		(neg|faction_slot_ge, "$g_faction_selected", 32, 1)
	],
	"Given that we are currently at war with the {s11} and they do not officially recognize your legitimacy, any messengers we sent would run the risk of being hanged as bandits.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_center_gift_lord_ask",
	[],
	"To which settlement do you like to send the gift?", "dplmc_chancellor_center_gift_lord_select",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_chancellor_center_gift_lord_select",
	[
		(store_repeat_object, ":repeat_object"),
		(this_or_next|party_slot_eq, ":repeat_object", slot_party_type, 3),
		(party_slot_eq, ":repeat_object", slot_party_type, 4),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(eq, ":faction_of_party_repeat_object", "$g_faction_selected"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{s11}.", "dplmc_chancellor_center_gift_send_ask",
	[
		(store_repeat_object, "$lord_selected")
	]],

	[anyone|plyr, "dplmc_chancellor_center_gift_lord_select",
	[],
	"I changed my mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_center_gift_send_ask",
	[
		(str_store_item_name, 6, "$diplomacy_var"),
		(str_store_party_name, 11, "$lord_selected")
	],
	"I will send a servant with the {s6} to {s11}.", "dplmc_chancellor_center_gift_send_confirm",
	[]],

	[anyone|plyr, "dplmc_chancellor_center_gift_send_confirm",
	[],
	"Thank you.", "dplmc_chancellor_pretalk",
	[
		(call_script, "script_dplmc_send_gift_to_center", "$lord_selected", "$diplomacy_var", "$diplomacy_var2")
	]],

	[anyone|plyr, "dplmc_chancellor_center_gift_send_confirm",
	[],
	"Never mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_gift_ask_person",
	[],
	"Do you want to send your gift to a lady or to a lord?", "dplmc_chancellor_gift_lady_or_lord",
	[]],

	[anyone|plyr, "dplmc_chancellor_gift_lady_or_lord",
	[],
	"Please send a gift to a lord.", "dplmc_chancellor_gift_ask_type",
	[]],

	[anyone, "dplmc_chancellor_gift_ask_type",
	[],
	"I recommend to send 150 units of Ale, Wine or Oil. If we have enough in our household I will induce a servant to deliver it.", "dplmc_chancellor_gift_select",
	[]],

	[anyone|plyr, "dplmc_chancellor_gift_select",
	[
		(troop_get_inventory_capacity, ":inventory_capacity_household_possessions", "trp_household_possessions"),
		(assign, ":var_2", 0),
		(try_for_range, ":number", 0, ":inventory_capacity_household_possessions"),
			(troop_get_inventory_slot, ":inventory_slot_household_possessions_number", "trp_household_possessions", ":number"),
			(eq, ":inventory_slot_household_possessions_number", "itm_trade_ale"),
			(troop_inventory_slot_get_item_amount, ":troop_inventory_slot_item_amount_household_possessions_number", "trp_household_possessions", ":number"),
			(val_add, ":var_2", ":troop_inventory_slot_item_amount_household_possessions_number"),
		(try_end),
		(ge, ":var_2", 150)
	],
	"Send some ale.", "dplmc_chancellor_gift_kingdom_ask",
	[
		(assign, "$diplomacy_var", "itm_trade_ale"),
		(assign, "$diplomacy_var2", 150)
	]],

	[anyone|plyr, "dplmc_chancellor_gift_select",
	[
		(troop_get_inventory_capacity, ":inventory_capacity_household_possessions", "trp_household_possessions"),
		(assign, ":var_2", 0),
		(try_for_range, ":number", 0, ":inventory_capacity_household_possessions"),
			(troop_get_inventory_slot, ":inventory_slot_household_possessions_number", "trp_household_possessions", ":number"),
			(eq, ":inventory_slot_household_possessions_number", "itm_trade_wine"),
			(troop_inventory_slot_get_item_amount, ":troop_inventory_slot_item_amount_household_possessions_number", "trp_household_possessions", ":number"),
			(val_add, ":var_2", ":troop_inventory_slot_item_amount_household_possessions_number"),
		(try_end),
		(ge, ":var_2", 150)
	],
	"Send some wine.", "dplmc_chancellor_gift_kingdom_ask",
	[
		(assign, "$diplomacy_var", "itm_trade_wine"),
		(assign, "$diplomacy_var2", 150)
	]],

	[anyone|plyr, "dplmc_chancellor_gift_select",
	[
		(troop_get_inventory_capacity, ":inventory_capacity_household_possessions", "trp_household_possessions"),
		(assign, ":var_2", 0),
		(try_for_range, ":number", 0, ":inventory_capacity_household_possessions"),
			(troop_get_inventory_slot, ":inventory_slot_household_possessions_number", "trp_household_possessions", ":number"),
			(eq, ":inventory_slot_household_possessions_number", "itm_trade_oil"),
			(troop_inventory_slot_get_item_amount, ":troop_inventory_slot_item_amount_household_possessions_number", "trp_household_possessions", ":number"),
			(val_add, ":var_2", ":troop_inventory_slot_item_amount_household_possessions_number"),
		(try_end),
		(ge, ":var_2", 150)
	],
	"Send some oil.", "dplmc_chancellor_gift_kingdom_ask",
	[
		(assign, "$diplomacy_var", "itm_trade_oil"),
		(assign, "$diplomacy_var2", 150)
	]],

	[anyone|plyr, "dplmc_chancellor_gift_select",
	[],
	"Never mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_gift_kingdom_ask",
	[],
	"Where does the lord live whom you want to make a present?", "dplmc_chancellor_gift_kingdom_select",
	[]],

	[anyone|repeat_for_factions|plyr, "dplmc_chancellor_gift_kingdom_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(faction_slot_eq, ":repeat_object", slot_faction_state, 0),
		(str_store_faction_name, 11, ":repeat_object")
	],
	"In {s11}.", "dplmc_chancellor_gift_lord_ask",
	[
		(store_repeat_object, "$g_faction_selected")
	]],

	[anyone|plyr, "dplmc_chancellor_gift_kingdom_select",
	[],
	"Never mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_gift_lord_ask",
	[
		(is_between, "$g_faction_selected", "fac_kingdom_1", "fac_kingdoms_end"),
		(neg|is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
		(store_relation, reg0, "$players_kingdom", "$g_faction_selected"),
		(lt, reg0, 0),
		(neg|faction_slot_ge, "$g_faction_selected", 32, 1)
	],
	"Given that we are currently at war with the {s11} but they do not officially recognize your legitimacy, any messengers we sent would run the risk of being hanged as bandits.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_gift_lord_ask",
	[],
	"To whom do you like to send the gift?", "dplmc_chancellor_gift_lord_select",
	[]],

	[anyone|repeat_for_troops|plyr, "dplmc_chancellor_gift_lord_select",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(neg|troop_slot_ge, ":repeat_object", 8, 0),
		(troop_slot_eq, ":repeat_object", slot_troop_met, 1),
		(neq, "trp_player", ":repeat_object"),
		(troop_get_slot, ":repeat_object_leaded_party", ":repeat_object", slot_troop_leaded_party),
		(gt, ":repeat_object_leaded_party", 0),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(eq, ":faction_of_troop_repeat_object", "$g_faction_selected"),
		(str_store_troop_name, 11, ":repeat_object")
	],
	"{s11}.", "dplmc_chancellor_gift_send_ask",
	[
		(store_repeat_object, "$lord_selected")
	]],

	[anyone|plyr, "dplmc_chancellor_gift_lord_select",
	[],
	"I can't think of anyone.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_gift_send_ask",
	[
		(str_store_item_name, 6, "$diplomacy_var"),
		(str_store_troop_name, 11, "$lord_selected")
	],
	"I will send a servant with the {s6} to {s11}.", "dplmc_chancellor_gift_send_confirm",
	[]],

	[anyone|plyr, "dplmc_chancellor_gift_send_confirm",
	[],
	"Thank you.", "dplmc_chancellor_pretalk",
	[
		(call_script, "script_dplmc_send_gift", "$lord_selected", "$diplomacy_var", "$diplomacy_var2")
	]],

	[anyone|plyr, "dplmc_chancellor_gift_send_confirm",
	[],
	"Never mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone|plyr, "dplmc_chancellor_gift_lady_or_lord",
	[],
	"Please send a gift to a lady.", "dplmc_chancellor_lady_gift_ask_type",
	[]],

	[anyone|plyr, "dplmc_chancellor_gift_lady_or_lord",
	[],
	"Never mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_lady_gift_ask_type",
	[],
	"I recommend to send dyes, silk or velvets. If we have enough in our household I will induce a servant to deliver it.", "dplmc_chancellor_lady_gift_select",
	[]],

	[anyone|plyr, "dplmc_chancellor_lady_gift_select",
	[
		(troop_get_inventory_capacity, ":inventory_capacity_household_possessions", "trp_household_possessions"),
		(assign, ":var_2", 0),
		(try_for_range, ":number", 0, ":inventory_capacity_household_possessions"),
			(troop_get_inventory_slot, ":inventory_slot_household_possessions_number", "trp_household_possessions", ":number"),
			(eq, ":inventory_slot_household_possessions_number", "itm_trade_raw_dyes"),
			(val_add, ":var_2", 1),
		(try_end),
		(ge, ":var_2", 1)
	],
	"Send dyes.", "dplmc_chancellor_lady_gift_kingdom_ask",
	[
		(assign, "$diplomacy_var", "itm_trade_raw_dyes"),
		(assign, "$diplomacy_var2", 1)
	]],

	[anyone|plyr, "dplmc_chancellor_lady_gift_select",
	[
		(troop_get_inventory_capacity, ":inventory_capacity_household_possessions", "trp_household_possessions"),
		(assign, ":var_2", 0),
		(try_for_range, ":number", 0, ":inventory_capacity_household_possessions"),
			(troop_get_inventory_slot, ":inventory_slot_household_possessions_number", "trp_household_possessions", ":number"),
			(eq, ":inventory_slot_household_possessions_number", "itm_trade_raw_silk"),
			(val_add, ":var_2", 1),
		(try_end),
		(ge, ":var_2", 1)
	],
	"Send silk.", "dplmc_chancellor_lady_gift_kingdom_ask",
	[
		(assign, "$diplomacy_var", "itm_trade_raw_silk"),
		(assign, "$diplomacy_var2", 1)
	]],

	[anyone|plyr, "dplmc_chancellor_lady_gift_select",
	[
		(troop_get_inventory_capacity, ":inventory_capacity_household_possessions", "trp_household_possessions"),
		(assign, ":var_2", 0),
		(try_for_range, ":number", 0, ":inventory_capacity_household_possessions"),
			(troop_get_inventory_slot, ":inventory_slot_household_possessions_number", "trp_household_possessions", ":number"),
			(eq, ":inventory_slot_household_possessions_number", "itm_trade_velvet"),
			(val_add, ":var_2", 1),
		(try_end),
		(ge, ":var_2", 1)
	],
	"Send velvet.", "dplmc_chancellor_lady_gift_kingdom_ask",
	[
		(assign, "$diplomacy_var", "itm_trade_velvet"),
		(assign, "$diplomacy_var2", 1)
	]],

	[anyone|plyr, "dplmc_chancellor_lady_gift_select",
	[],
	"Never mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_lady_gift_kingdom_ask",
	[],
	"Where does the lady live?", "dplmc_chancellor_lady_gift_kingdom_select",
	[]],

	[anyone|repeat_for_factions|plyr, "dplmc_chancellor_lady_gift_kingdom_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(faction_slot_eq, ":repeat_object", slot_faction_state, 0),
		(str_store_faction_name, 11, ":repeat_object")
	],
	"In {s11}.", "dplmc_chancellor_lady_gift_lady_ask",
	[
		(store_repeat_object, "$g_faction_selected")
	]],

	[anyone|plyr, "dplmc_chancellor_lady_gift_kingdom_select",
	[],
	"Never mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_lady_gift_lady_ask",
	[
		(is_between, "$g_faction_selected", "fac_kingdom_1", "fac_kingdoms_end"),
		(neg|is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
		(store_relation, reg0, "$players_kingdom", "$g_faction_selected"),
		(lt, reg0, 0),
		(neg|faction_slot_ge, "$g_faction_selected", 32, 1)
	],
	"Given that we are currently at war with the {s11} but they do not officially recognize your legitimacy, any messengers we sent would run the risk of being hanged as bandits.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_lady_gift_lady_ask",
	[],
	"Which lady should receive the gift?", "dplmc_chancellor_lady_gift_lady_select",
	[]],

	[anyone|repeat_for_troops|plyr, "dplmc_chancellor_lady_gift_lady_select",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 6),
		(neg|troop_slot_ge, ":repeat_object", 8, 0),
		(troop_slot_eq, ":repeat_object", slot_troop_met, 1),
		(neq, "trp_player", ":repeat_object"),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(eq, ":faction_of_troop_repeat_object", "$g_faction_selected"),
		(str_store_troop_name, 11, ":repeat_object")
	],
	"{s11}.", "dplmc_chancellor_lady_gift_send_ask",
	[
		(store_repeat_object, "$lord_selected")
	]],

	[anyone|plyr, "dplmc_chancellor_lady_gift_lady_select",
	[],
	"I can't think of anyone.", "dplmc_chancellor_pretalk",
	[]],

	[anyone, "dplmc_chancellor_lady_gift_send_ask",
	[
		(str_store_item_name, 6, "$diplomacy_var"),
		(str_store_troop_name, 11, "$lord_selected")
	],
	"I will send a servant with the {s6} to {s11}.", "dplmc_chancellor_lady_gift_send_confirm",
	[]],

	[anyone|plyr, "dplmc_chancellor_lady_gift_send_confirm",
	[],
	"Thank you.", "dplmc_chancellor_pretalk",
	[
		(call_script, "script_dplmc_send_gift", "$lord_selected", "$diplomacy_var", "$diplomacy_var2")
	]],

	[anyone|plyr, "dplmc_chancellor_lady_gift_send_confirm",
	[],
	"Never mind.", "dplmc_chancellor_pretalk",
	[]],

	[anyone|plyr, "dplmc_chancellor_talk",
	[],
	"Let us check our household possessions.", "dplmc_chancellor_talk_household",
	[
		(change_screen_loot, "trp_household_possessions")
	]],

	[anyone, "dplmc_chancellor_talk_household",
	[],
	"You should store all important things in the household.", "dplmc_chancellor_pretalk",
	[]],

	[anyone|plyr, "dplmc_chancellor_talk",
	[
		(eq, 0, 1)
	],
	"I would like to take a look through the items in my secondary storage houses.", "dplmc_chancellor_pretalk",
	[
		(change_screen_loot, "trp_dplmc_chancellor")
	]],

	[anyone|plyr, "dplmc_chancellor_talk",
	[],
	"I no longer need your services.", "dplmc_chancellor_dismiss_confirm_ask",
	[]],

	[anyone, "dplmc_chancellor_dismiss_confirm_ask",
	[],
	"Are you sure that you don't need me anymore?", "dplmc_chancellor_dismiss_confirm",
	[]],

	[anyone|plyr, "dplmc_chancellor_dismiss_confirm",
	[],
	"Yes I am.", "dplmc_chancellor_dismiss_confirm_yes",
	[]],

	[anyone, "dplmc_chancellor_dismiss_confirm_yes",
	[],
	"As you wish.", "close_window",
	[
		(assign, "$g_player_chancellor", -1)
	]],

	[anyone|plyr, "dplmc_chancellor_dismiss_confirm",
	[],
	"No I am not.", "dplmc_chancellor_pretalk",
	[]],

	[anyone|plyr, "dplmc_chancellor_talk",
	[],
	"Farewell!", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$g_player_constable", "$g_talk_troop")
	],
	"Always at your service!", "dplmc_constable_talk",
	[]],

	[anyone, "dplmc_constable_pretalk",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Do you need anything else, {s0}?", "dplmc_constable_talk",
	[]],

	[anyone|plyr, "dplmc_constable_talk",
	[],
	"How goes the war?", "dplmc_constable_talk_ask_war",
	[]],

	[anyone, "dplmc_constable_talk_ask_war",
	[],
	"{s12}", "dplmc_constable_talk_ask_war_2",
	[
		(assign, ":var_1", 0),
		(try_for_range_backwards, ":var_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(faction_slot_eq, ":var_2", slot_faction_state, 0),
			(store_relation, ":relation_var_2_player_supporters_faction", ":var_2", "fac_player_supporters_faction"),
			(lt, ":relation_var_2_player_supporters_faction", 0),
			(try_begin),
				(eq, ":var_1", 0),
				(str_store_faction_name_link, 12, ":var_2"),
			(else_try),
				(eq, ":var_1", 1),
				(str_store_faction_name_link, 11, ":var_2"),
				(str_store_string, 12, "@{s11} and {s12}"),
			(else_try),
				(str_store_faction_name_link, 11, ":var_2"),
				(str_store_string, 12, "@{!}{s11}, {s12}"),
			(try_end),
			(val_add, ":var_1", 1),
		(try_end),
		(try_begin),
			(eq, ":var_1", 0),
			(str_store_string, 12, "@We are not at war with anyone."),
		(else_try),
			(str_store_string, 12, "@We are at war with {s12}."),
		(try_end)
	]],

	[anyone|repeat_for_factions|plyr, "dplmc_constable_talk_ask_war_2",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(faction_slot_eq, ":repeat_object", slot_faction_state, 0),
		(store_relation, ":relation_repeat_object_player_supporters_faction", ":repeat_object", "fac_player_supporters_faction"),
		(lt, ":relation_repeat_object_player_supporters_faction", 0),
		(str_store_faction_name, 1, ":repeat_object")
	],
	"Tell me more about the war with {s1}.", "dplmc_constable_talk_ask_war_details",
	[
		(store_repeat_object, "$faction_requested_to_learn_more_details_about_the_war_against")
	]],

	[anyone|plyr, "dplmc_constable_talk_ask_war_2",
	[],
	"That's all I wanted to know. Thank you.", "dplmc_constable_pretalk",
	[]],

	[anyone, "dplmc_constable_talk_ask_war_details",
	[],
	"{!}{s9}.", "dplmc_constable_talk_ask_war_2",
	[
		(store_add, ":value", "$faction_requested_to_learn_more_details_about_the_war_against", 140),
		(val_sub, ":value", "fac_player_supporters_faction"),
		(faction_get_slot, ":player_supporters_faction_value", "fac_player_supporters_faction", ":value"),
		(store_add, ":value", "fac_player_supporters_faction", 140),
		(val_sub, ":value", "fac_player_supporters_faction"),
		(faction_get_slot, ":faction_requested_to_learn_more_details_about_the_war_against_value", "$faction_requested_to_learn_more_details_about_the_war_against", ":value"),
		(val_max, ":faction_requested_to_learn_more_details_about_the_war_against_value", 1),
		(store_mul, ":value_2", ":player_supporters_faction_value", 100),
		(val_div, ":value_2", ":faction_requested_to_learn_more_details_about_the_war_against_value"),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg3, ":player_supporters_faction_value"),
			(assign, reg4, ":faction_requested_to_learn_more_details_about_the_war_against_value"),
			(assign, reg5, ":value_2"),
			(display_message, "str_war_damage_inflicted_reg3_suffered_reg4_ratio_reg5"),
		(try_end),
		(str_store_string, 9, "str_error__did_not_calculate_war_progress_string_properly"),
		(try_begin),
			(lt, ":player_supporters_faction_value", 5),
			(str_store_string, 9, "str_the_war_has_barely_begun_so_and_it_is_too_early_to_say_who_is_winning_and_who_is_losing"),
		(else_try),
			(gt, ":player_supporters_faction_value", 100),
			(gt, ":value_2", 200),
			(str_store_string, 9, "str_we_have_been_hitting_them_very_hard_and_giving_them_little_chance_to_recover"),
		(else_try),
			(gt, ":player_supporters_faction_value", 80),
			(gt, ":value_2", 150),
			(str_store_string, 9, "str_the_fighting_has_been_hard_but_we_have_definitely_been_getting_the_better_of_them"),
		(else_try),
			(gt, ":faction_requested_to_learn_more_details_about_the_war_against_value", 100),
			(lt, ":value_2", 50),
			(str_store_string, 9, "str_they_have_been_hitting_us_very_hard_and_causing_great_suffering"),
		(else_try),
			(gt, ":faction_requested_to_learn_more_details_about_the_war_against_value", 80),
			(lt, ":value_2", 68),
			(str_store_string, 9, "str_the_fighting_has_been_hard_and_i_am_afraid_that_we_have_been_having_the_worst_of_it"),
		(else_try),
			(gt, ":faction_requested_to_learn_more_details_about_the_war_against_value", 50),
			(gt, ":player_supporters_faction_value", 50),
			(gt, ":value_2", 65),
			(str_store_string, 9, "str_both_sides_have_suffered_in_the_fighting"),
		(else_try),
			(gt, ":value_2", 125),
			(str_store_string, 9, "str_no_clear_winner_has_yet_emerged_in_the_fighting_but_i_think_we_are_getting_the_better_of_them"),
		(else_try),
			(gt, ":value_2", 80),
			(str_store_string, 9, "str_no_clear_winner_has_yet_emerged_in_the_fighting_but_i_fear_they_may_be_getting_the_better_of_us"),
		(else_try),
			(str_store_string, 9, "str_no_clear_winner_has_yet_emerged_in_the_fighting"),
		(try_end),
		(try_begin),
			(neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "$g_talk_troop"),
			(call_script, "script_npc_decision_checklist_peace_or_war", "$players_kingdom", "$faction_requested_to_learn_more_details_about_the_war_against", -1),
			(str_store_string, 9, "str_s9_s14"),
		(try_end)
	]],

	[anyone|plyr, "dplmc_constable_talk",
	[],
	"I want information about a settlement.", "dplmc_constable_scout_ask",
	[]],

	[anyone, "dplmc_constable_scout_ask",
	[],
	"We can send a spy which will cost you 300 coins. Where do you want to send the spy?", "dplmc_constable_scout_location",
	[]],

	[anyone|repeat_for_factions|plyr, "dplmc_constable_scout_location",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 300),
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(str_store_faction_name, 11, ":repeat_object")
	],
	"{!}{s11}.", "dplmc_constable_scout_location_confirm_ask",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_constable_scout_location",
	[],
	"I changed my mind.", "dplmc_constable_pretalk",
	[]],

	[anyone, "dplmc_constable_scout_location_confirm_ask",
	[],
	"Which settlement do you want to spy out?", "dplmc_constable_scout_location2",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_constable_scout_location2",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_village_1"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(eq, ":faction_of_party_repeat_object", "$diplomacy_var"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{!}{s11}.", "dplmc_constable_scout_location_confirm_ask2",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_constable_scout_location2",
	[],
	"I changed my mind.", "dplmc_constable_pretalk",
	[]],

	[anyone, "dplmc_constable_scout_location_confirm_ask2",
	[
		(str_store_party_name, 11, "$diplomacy_var")
	],
	"As you wish, I will send a spy to {s11} and withdraw 300 coins from your treasury.", "dplmc_constable_scout_location_confirm",
	[]],

	[anyone|plyr, "dplmc_constable_scout_location_confirm",
	[],
	"Great.", "dplmc_constable_pretalk",
	[
		(call_script, "script_dplmc_withdraw_from_treasury", 300),
		(call_script, "script_dplmc_send_scout_party", "$current_town", "$diplomacy_var", "$players_kingdom")
	]],

	[anyone|plyr, "dplmc_constable_scout_location_confirm",
	[],
	"Hold on!", "dplmc_constable_pretalk",
	[]],

	[anyone|plyr, "dplmc_constable_talk",
	[],
	"I want to release a prisoner.", "dplmc_constable_talk_ask_prisoner",
	[]],

	[anyone, "dplmc_constable_talk_ask_prisoner",
	[],
	"Alright, which prisoner do you want to release?", "dplmc_constable_talk_prisoner_select",
	[]],

	[anyone|repeat_for_troops|plyr, "dplmc_constable_talk_prisoner_select",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(is_between, ":repeat_object", "trp_kingdom_1_lord", "trp_kingdom_1_pretender"),
		(troop_get_slot, ":repeat_object_prisoner_of_party", ":repeat_object", slot_troop_prisoner_of_party),
		(assign, ":value", 0),
		(try_begin),
			(is_between, ":repeat_object_prisoner_of_party", "p_town_1", "p_village_1"),
			(party_slot_eq, ":repeat_object_prisoner_of_party", slot_town_lord, "trp_player"),
			(assign, ":value", 1),
		(else_try),
			(eq, ":repeat_object_prisoner_of_party", "p_main_party"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1),
		(str_store_troop_name, 10, ":repeat_object"),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(str_store_faction_name_link, 11, ":faction_of_troop_repeat_object")
	],
	"{s10} of {s11}.", "dplmc_constable_exchange_prisoner_ask_confirm",
	[
		(store_repeat_object, "$diplomacy_var"),
		(store_faction_of_troop, "$g_faction_selected", "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_constable_talk_prisoner_select",
	[],
	"No one.", "dplmc_constable_pretalk",
	[]],

	[anyone, "dplmc_constable_exchange_prisoner_ask_confirm",
	[
		(str_store_troop_name, 10, "$diplomacy_var"),
		(store_faction_of_troop, ":faction_of_troop_diplomacy_var", "$diplomacy_var"),
		(str_store_faction_name_link, 11, ":faction_of_troop_diplomacy_var")
	],
	"As you wish, I will tell the prison guard to release {s10} of {s11}.", "dplmc_constable_exchange_prisoner_confirm",
	[]],

	[anyone|plyr, "dplmc_constable_exchange_prisoner_confirm",
	[],
	"Very well.", "dplmc_constable_pretalk",
	[
		(troop_get_slot, ":diplomacy_var_prisoner_of_party", "$diplomacy_var", slot_troop_prisoner_of_party),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(str_store_party_name, 7, ":diplomacy_var_prisoner_of_party"),
			(display_message, "@{!}DEBUG - prisoner of: {s7}"),
		(try_end),
		(party_remove_prisoners, ":diplomacy_var_prisoner_of_party", "$diplomacy_var", 1),
		(try_begin),
			(main_party_has_troop, "$diplomacy_var"),
			(party_remove_prisoners, "p_main_party", "$diplomacy_var", 1),
		(try_end),
		(call_script, "script_remove_troop_from_prison", "$diplomacy_var"),
		(str_store_troop_name, 7, "$diplomacy_var"),
		(display_message, "str_dplmc_has_been_set_free"),
		(call_script, "script_change_player_relation_with_troop", "$diplomacy_var", 3),
		(call_script, "script_change_player_honor", 1)
	]],

	[anyone|plyr, "dplmc_constable_exchange_prisoner_confirm",
	[],
	"No, I changed my mind.", "dplmc_constable_pretalk",
	[]],

	[anyone|plyr, "dplmc_constable_talk",
	[],
	"Please give me a report.", "dplmc_constable_reports_ask",
	[]],

	[anyone, "dplmc_constable_reports_ask",
	[],
	"About what do you want to have a report?", "dplmc_constable_reports",
	[]],

	[anyone|plyr, "dplmc_constable_reports",
	[
		(assign, ":value", 0),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|eq, ":value", 1),
		(eq, "$players_kingdom", "fac_player_supporters_faction")
	],
	"Please give me a report about the sovereignty's army.", "dplmc_constable_kingdom_overview",
	[]],

	[anyone, "dplmc_constable_kingdom_overview",
	[
		(assign, ":var_1", 0),
		(assign, ":var_2", 0),
		(assign, ":var_3", 0),
		(assign, ":var_4", 0),
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(try_for_parties, ":var_6"),
			(try_begin),
				(this_or_next|party_slot_eq, ":var_6", slot_party_type, 3),
				(party_slot_eq, ":var_6", slot_party_type, 2),
				(store_faction_of_party, ":faction_of_party_var_6", ":var_6"),
				(this_or_next|eq, ":faction_of_party_var_6", ":value"),
				(eq, ":faction_of_party_var_6", "fac_player_supporters_faction"),
				(party_get_num_companion_stacks, ":num_companion_stacks_var_6", ":var_6"),
				(try_for_range, ":number", 0, ":num_companion_stacks_var_6"),
					(party_stack_get_size, ":party_stack_size_var_6_number", ":var_6", ":number"),
					(val_add, ":var_1", ":party_stack_size_var_6_number"),
				(try_end),
				(try_begin),
					(party_slot_eq, ":var_6", slot_party_type, 2),
					(val_add, ":var_3", 1),
				(else_try),
					(val_add, ":var_4", 1),
				(try_end),
			(else_try),
				(party_slot_eq, ":var_6", slot_party_type, 13),
				(store_faction_of_party, ":faction_of_party_var_6", ":var_6"),
				(this_or_next|eq, ":faction_of_party_var_6", ":value"),
				(eq, ":faction_of_party_var_6", "fac_player_supporters_faction"),
				(party_get_num_companion_stacks, ":num_companion_stacks_var_6", ":var_6"),
				(try_for_range, ":number", 0, ":num_companion_stacks_var_6"),
					(party_stack_get_size, ":party_stack_size_var_6_number", ":var_6", ":number"),
					(val_add, ":var_2", ":party_stack_size_var_6_number"),
				(try_end),
			(else_try),
				(eq, ":var_6", "p_main_party"),
				(party_get_num_companion_stacks, ":num_companion_stacks_var_6", ":var_6"),
				(try_for_range, ":number", 0, ":num_companion_stacks_var_6"),
					(party_stack_get_size, ":party_stack_size_var_6_number", ":var_6", ":number"),
					(val_add, ":var_2", ":party_stack_size_var_6_number"),
				(try_end),
			(try_end),
		(try_end),
		(assign, reg2, ":var_1"),
		(str_store_string, 6, "@Our sovereignty currently has {reg2} soldiers"),
		(assign, reg2, ":var_4"),
		(str_store_string, 6, "@{s6} garrisoned in {reg2} towns"),
		(assign, reg2, ":var_3"),
		(str_store_string, 6, "@{s6} and {reg2} castles."),
		(try_begin),
			(gt, ":var_2", 0),
			(assign, reg2, ":var_2"),
			(str_store_string, 6, "@{s6} In addition we have {reg2} soldiers in the field."),
		(try_end)
	],
	"{!}{s6}", "dplmc_constable_reports_ask",
	[]],

	[anyone|plyr, "dplmc_constable_reports",
	[],
	"Please give me a report about my army.", "dplmc_constable_overview",
	[]],

	[anyone, "dplmc_constable_overview",
	[
		(assign, ":var_1", 0),
		(assign, ":var_2", 0),
		(assign, ":var_3", 0),
		(assign, ":var_4", 0),
		(assign, ":var_5", 0),
		(try_for_parties, ":var_6"),
			(try_begin),
				(this_or_next|party_slot_eq, ":var_6", slot_party_type, 3),
				(party_slot_eq, ":var_6", slot_party_type, 2),
				(party_slot_eq, ":var_6", slot_town_lord, "trp_player"),
				(party_get_num_companion_stacks, ":num_companion_stacks_var_6", ":var_6"),
				(try_for_range, ":number", 0, ":num_companion_stacks_var_6"),
					(party_stack_get_size, ":party_stack_size_var_6_number", ":var_6", ":number"),
					(val_add, ":var_1", ":party_stack_size_var_6_number"),
				(try_end),
				(try_begin),
					(party_slot_eq, ":var_6", slot_party_type, 2),
					(val_add, ":var_4", 1),
				(else_try),
					(val_add, ":var_5", 1),
				(try_end),
			(else_try),
				(eq, ":var_6", "p_main_party"),
				(party_get_num_companion_stacks, ":num_companion_stacks_var_6", ":var_6"),
				(try_for_range, ":number", 0, ":num_companion_stacks_var_6"),
					(party_stack_get_size, ":party_stack_size_var_6_number", ":var_6", ":number"),
					(val_add, ":var_2", ":party_stack_size_var_6_number"),
				(try_end),
			(else_try),
				(party_slot_eq, ":var_6", slot_party_type, 7),
				(store_faction_of_troop, ":faction_of_troop_player", "trp_player"),
				(store_faction_of_party, ":faction_of_party_var_6", ":var_6"),
				(eq, ":faction_of_party_var_6", ":faction_of_troop_player"),
				(party_get_num_companion_stacks, ":num_companion_stacks_var_6", ":var_6"),
				(try_for_range, ":number", 0, ":num_companion_stacks_var_6"),
					(party_stack_get_size, ":party_stack_size_var_6_number", ":var_6", ":number"),
					(val_add, ":var_3", ":party_stack_size_var_6_number"),
				(try_end),
			(try_end),
		(try_end),
		(assign, reg2, ":var_1"),
		(str_store_string, 6, "@We currently have {reg2} soldiers"),
		(assign, reg2, ":var_5"),
		(str_store_string, 6, "@{s6} garrisoned in {reg2} towns"),
		(assign, reg2, ":var_4"),
		(str_store_string, 6, "@{s6} and {reg2} castles."),
		(try_begin),
			(gt, ":var_2", 0),
			(assign, reg2, ":var_2"),
			(assign, reg3, ":var_3"),
			(str_store_string, 6, "@{s6} In addition you have {reg2} soldiers in your convoy and {reg3} soldiers in patrols."),
		(try_end)
	],
	"{!}{s6}", "dplmc_constable_reports_ask",
	[]],

	[anyone|plyr, "dplmc_constable_reports",
	[],
	"Please give me a status report about the convoy of a lord.", "dplmc_constable_lord",
	[]],

	[anyone, "dplmc_constable_lord",
	[],
	"About which lord do you like to be informed?", "dplmc_constable_status_lord_select",
	[]],

	[anyone|repeat_for_troops|plyr, "dplmc_constable_status_lord_select",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(neq, "trp_player", ":repeat_object"),
		(troop_slot_ge, ":repeat_object", 10, 0),
		(neg|troop_slot_ge, ":repeat_object", 8, 0),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", ":faction_of_troop_repeat_object"),
		(ge, reg0, 50),
		(str_store_troop_name, 11, ":repeat_object")
	],
	"{!}{s11}.", "dplmc_constable_status_lord_info",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_constable_status_lord_select",
	[],
	"Never mind.", "dplmc_constable_reports_ask",
	[]],

	[anyone, "dplmc_constable_status_lord_info",
	[
		(assign, ":var_1", "$diplomacy_var"),
		(str_store_troop_name, 60, ":var_1"),
		(call_script, "script_update_troop_location_notes", ":var_1", 1),
		(call_script, "script_get_information_about_troops_position", ":var_1", 0),
		(assign, ":var_2", 0),
		(troop_get_slot, ":var_1_leaded_party", ":var_1", slot_troop_leaded_party),
		(str_store_string, 52, "str_empty_string"),
		(party_get_num_companion_stacks, ":num_companion_stacks_var_1_leaded_party", ":var_1_leaded_party"),
		(le, ":num_companion_stacks_var_1_leaded_party", 20),
		(try_for_range, ":number", 1, ":num_companion_stacks_var_1_leaded_party"),
			(party_stack_get_troop_id, ":party_stack_troop_id_var_1_leaded_party_number", ":var_1_leaded_party", ":number"),
			(party_stack_get_size, ":party_stack_size_var_1_leaded_party_number", ":var_1_leaded_party", ":number"),
			(val_add, ":var_2", ":party_stack_size_var_1_leaded_party_number"),
			(assign, reg2, ":party_stack_size_var_1_leaded_party_number"),
			(str_store_troop_name, 53, ":party_stack_troop_id_var_1_leaded_party_number"),
			(str_store_string, 52, "@{!}{s52} {reg2} {s53}."),
		(try_end),
		(assign, reg2, ":var_2"),
		(str_store_string, 51, "@He fields {reg2} soldiers.")
	],
	"{!}{s1} {s51} {s52}", "dplmc_constable_lord",
	[]],

	[anyone, "dplmc_constable_status_lord_info",
	[
		(assign, ":var_1", "$diplomacy_var"),
		(str_store_troop_name, 60, ":var_1"),
		(call_script, "script_update_troop_location_notes", ":var_1", 1),
		(call_script, "script_get_information_about_troops_position", ":var_1", 0),
		(assign, ":var_2", 0),
		(troop_get_slot, ":var_1_leaded_party", ":var_1", slot_troop_leaded_party),
		(str_store_string, 52, "str_empty_string"),
		(party_get_num_companion_stacks, ":num_companion_stacks_var_1_leaded_party", ":var_1_leaded_party"),
		(try_for_range, ":number", 1, ":num_companion_stacks_var_1_leaded_party"),
			(party_stack_get_troop_id, ":party_stack_troop_id_var_1_leaded_party_number", ":var_1_leaded_party", ":number"),
			(party_stack_get_size, ":party_stack_size_var_1_leaded_party_number", ":var_1_leaded_party", ":number"),
			(val_add, ":var_2", ":party_stack_size_var_1_leaded_party_number"),
			(try_begin),
				(le, ":number", 20),
				(assign, reg2, ":party_stack_size_var_1_leaded_party_number"),
				(str_store_troop_name, 53, ":party_stack_troop_id_var_1_leaded_party_number"),
				(str_store_string, 52, "@{!}{s52} {reg2} {s53}."),
			(try_end),
		(try_end),
		(assign, reg2, ":var_2"),
		(str_store_string, 51, "@He fields {reg2} soldiers.")
	],
	"{!}{s1} {s51} {s52}", "dplmc_constable_status_lord_info_6",
	[]],

	[anyone, "dplmc_constable_status_lord_info_6",
	[
		(assign, ":var_1", "$diplomacy_var"),
		(str_store_troop_name, 60, ":var_1"),
		(assign, ":var_2", 0),
		(troop_get_slot, ":var_1_leaded_party", ":var_1", slot_troop_leaded_party),
		(str_store_string, 52, "str_empty_string"),
		(party_get_num_companion_stacks, ":num_companion_stacks_var_1_leaded_party", ":var_1_leaded_party"),
		(try_for_range, ":number", 20, ":num_companion_stacks_var_1_leaded_party"),
			(party_stack_get_troop_id, ":party_stack_troop_id_var_1_leaded_party_number", ":var_1_leaded_party", ":number"),
			(party_stack_get_size, ":party_stack_size_var_1_leaded_party_number", ":var_1_leaded_party", ":number"),
			(val_add, ":var_2", ":party_stack_size_var_1_leaded_party_number"),
			(assign, reg2, ":party_stack_size_var_1_leaded_party_number"),
			(str_store_troop_name, 53, ":party_stack_troop_id_var_1_leaded_party_number"),
			(str_store_string, 52, "@{!}{s52} {reg2} {s53}."),
		(try_end),
		(assign, reg2, ":var_2")
	],
	"{!}{s52}", "dplmc_constable_lord",
	[]],

	[anyone|plyr, "dplmc_constable_reports",
	[],
	"Please give me a status report about the garrison of a fief.", "dplmc_constable_status",
	[]],

	[anyone, "dplmc_constable_status",
	[],
	"About which fief do you like to be informed?", "dplmc_constable_status_select_fief",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_constable_status_select_fief",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_village_1"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(this_or_next|party_slot_eq, ":repeat_object", slot_town_lord, "trp_player"),
		(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", ":faction_of_party_repeat_object"),
		(ge, reg0, 50),
		(str_store_party_name, 60, ":repeat_object")
	],
	"{!}{s60}.", "dplmc_constable_status_info",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone, "dplmc_constable_status_info",
	[
		(assign, ":var_1", "$diplomacy_var"),
		(str_store_party_name, 60, ":var_1"),
		(assign, ":var_2", 0),
		(str_store_string, 52, "str_empty_string"),
		(party_get_num_companion_stacks, ":num_companion_stacks_var_1", ":var_1"),
		(le, ":num_companion_stacks_var_1", 20),
		(try_for_range, ":number", 0, ":num_companion_stacks_var_1"),
			(party_stack_get_troop_id, ":party_stack_troop_id_var_1_number", ":var_1", ":number"),
			(party_stack_get_size, ":party_stack_size_var_1_number", ":var_1", ":number"),
			(val_add, ":var_2", ":party_stack_size_var_1_number"),
			(assign, reg2, ":party_stack_size_var_1_number"),
			(str_store_troop_name, 53, ":party_stack_troop_id_var_1_number"),
			(str_store_string, 52, "@{!}{s52} {reg2} {s53}."),
		(try_end),
		(assign, reg2, ":var_2"),
		(str_store_string, 51, "@We currently have {reg2} soldiers garrisoned in {s60}.")
	],
	"{!}{s51} {s52}", "dplmc_constable_status",
	[]],

	[anyone, "dplmc_constable_status_info",
	[
		(assign, ":var_1", "$diplomacy_var"),
		(str_store_party_name, 60, ":var_1"),
		(assign, ":var_2", 0),
		(str_store_string, 52, "str_empty_string"),
		(party_get_num_companion_stacks, ":num_companion_stacks_var_1", ":var_1"),
		(try_for_range, ":number", 0, ":num_companion_stacks_var_1"),
			(party_stack_get_troop_id, ":party_stack_troop_id_var_1_number", ":var_1", ":number"),
			(party_stack_get_size, ":party_stack_size_var_1_number", ":var_1", ":number"),
			(val_add, ":var_2", ":party_stack_size_var_1_number"),
			(try_begin),
				(le, ":number", 20),
				(assign, reg2, ":party_stack_size_var_1_number"),
				(str_store_troop_name, 53, ":party_stack_troop_id_var_1_number"),
				(str_store_string, 52, "@{!}{s52} {reg2} {s53}."),
			(try_end),
		(try_end),
		(assign, reg2, ":var_2"),
		(str_store_string, 51, "@We currently have {reg2} soldiers garrisoned in {s60}.")
	],
	"{!}{s51} {s52}", "dplmc_constable_status_info_6",
	[]],

	[anyone, "dplmc_constable_status_info_6",
	[
		(assign, ":var_1", "$diplomacy_var"),
		(str_store_party_name, 60, ":var_1"),
		(str_store_string, 52, "str_empty_string"),
		(party_get_num_companion_stacks, ":num_companion_stacks_var_1", ":var_1"),
		(try_for_range, ":number", 20, ":num_companion_stacks_var_1"),
			(party_stack_get_troop_id, ":party_stack_troop_id_var_1_number", ":var_1", ":number"),
			(party_stack_get_size, ":party_stack_size_var_1_number", ":var_1", ":number"),
			(assign, reg2, ":party_stack_size_var_1_number"),
			(str_store_troop_name, 53, ":party_stack_troop_id_var_1_number"),
			(str_store_string, 52, "@{!}{s52} {reg2} {s53}."),
		(try_end)
	],
	"{!}{s52}", "dplmc_constable_status",
	[]],

	[anyone|plyr, "dplmc_constable_status_select_fief",
	[],
	"Never mind.", "dplmc_constable_reports_ask",
	[]],

	[anyone|plyr, "dplmc_constable_reports",
	[],
	"Thank you, that's all for now.", "dplmc_constable_pretalk",
	[]],

	[anyone|plyr, "dplmc_constable_talk",
	[],
	"I would like to take a look at the armory.", "dplmc_constable_armory_end",
	[
		(try_for_range, ":number", 0, 9),
			(agent_get_item_slot, ":item_slot_g_talk_agent_number", "$g_talk_agent", ":number"),
			(gt, ":item_slot_g_talk_agent_number", 0),
			(troop_remove_item, "$g_talk_troop", ":item_slot_g_talk_agent_number"),
		(try_end),
		(change_screen_loot, "trp_dplmc_constable")
	]],

	[anyone, "dplmc_constable_armory_end",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Do you need anything else, {s0}?", "dplmc_constable_armory_end_2",
	[]],

	[anyone, "dplmc_constable_armory_end_2",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Do you need anything else, {s0}?", "dplmc_constable_talk",
	[
		(try_begin),
			(neg|agent_has_item_equipped, "$g_talk_agent", "itm_heraldic_cozur_2"),
			(agent_equip_item, "$g_talk_agent", "itm_heraldic_cozur_2"),
			(agent_equip_item, "$g_talk_agent", "itm_bo_vae_t3_leather"),
		(try_end)
	]],

	[anyone|plyr, "dplmc_constable_talk",
	[],
	"Let's talk about recruits and training.", "dplmc_constable_recruits_and_training_ask",
	[]],

	[anyone, "dplmc_constable_recruits_and_training_ask",
	[],
	"Of course.", "dplmc_constable_recruits_and_training",
	[]],

	[anyone|plyr, "dplmc_constable_recruits_and_training",
	[
		(neg|is_between, "$g_constable_training_center", "p_town_1", "p_village_1")
	],
	"Can you train some recruits, please?", "dplmc_constable_train_ask",
	[]],

	[anyone, "dplmc_constable_train_ask",
	[],
	"Of course, where should I train them?", "dplmc_constable_train_select",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_constable_train_select",
	[
		(store_repeat_object, ":repeat_object"),
		(this_or_next|party_slot_eq, ":repeat_object", slot_party_type, 3),
		(party_slot_eq, ":repeat_object", slot_party_type, 2),
		(party_slot_eq, ":repeat_object", slot_town_lord, "trp_player"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{!}{s11}.", "dplmc_constable_train_type_ask",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone, "dplmc_constable_train_type_ask",
	[
		(str_store_party_name, 11, "$diplomacy_var")
	],
	"Do you prefer melee or ranged units?", "dplmc_constable_train_type",
	[]],

	[anyone|plyr, "dplmc_constable_train_type",
	[],
	"Melee.", "dplmc_constable_train_improved_ask",
	[
		(assign, "$g_constable_training_type", 0)
	]],

	[anyone|plyr, "dplmc_constable_train_type",
	[],
	"Ranged.", "dplmc_constable_train_improved_ask",
	[
		(assign, "$g_constable_training_type", 1)
	]],

	[anyone|plyr, "dplmc_constable_train_type",
	[],
	"Neither.", "dplmc_constable_pretalk",
	[]],

	[anyone, "dplmc_constable_train_improved_ask",
	[],
	"If you want I can hire additional trainers so we can train the recruits faster and better. This will cost 10 coins extra per day.", "dplmc_constable_train_improved",
	[]],

	[anyone|plyr, "dplmc_constable_train_improved",
	[],
	"Yes, please hire additional trainers.", "dplmc_constable_train_center",
	[
		(assign, "$g_constable_training_improved", 1)
	]],

	[anyone|plyr, "dplmc_constable_train_improved",
	[],
	"No, you have to train them alone.", "dplmc_constable_train_center",
	[
		(assign, "$g_constable_training_improved", 0)
	]],

	[anyone, "dplmc_constable_train_center",
	[
		(str_store_party_name, 11, "$diplomacy_var"),
		(try_begin),
			(eq, "$g_constable_training_type", 0),
			(str_store_string, 12, "@You are preferring melee units."),
		(else_try),
			(str_store_string, 12, "@You are preferring ranged units."),
		(try_end),
		(str_clear, 13),
		(try_begin),
			(eq, "$g_constable_training_improved", 1),
			(str_store_string, 13, "@ and the additional trainers"),
		(try_end)
	],
	"Alright, I will train the recruits in {s11}. {s12} Please, make sure we have enough money in the treasury to pay for the equipment{s13}.", "dplmc_constable_pretalk",
	[
		(assign, "$g_constable_training_center", "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_constable_train_select",
	[],
	"I changed my mind, maybe you shouldn't train them.", "dplmc_constable_pretalk",
	[]],

	[anyone|plyr, "dplmc_constable_recruits_and_training",
	[
		(is_between, "$g_constable_training_center", "p_town_1", "p_village_1"),
		(str_store_party_name, 11, "$g_constable_training_center")
	],
	"Please stop training the recruits in {s11}.", "dplmc_constable_train_stop",
	[]],

	[anyone, "dplmc_constable_train_stop",
	[
		(is_between, "$g_constable_training_center", "p_town_1", "p_village_1")
	],
	"As you wish.", "dplmc_constable_pretalk",
	[
		(assign, "$g_constable_training_center", -1)
	]],

	[anyone|plyr, "dplmc_constable_recruits_and_training",
	[],
	"I want to recruit new soldiers.", "dplmc_constable_recruit",
	[]],

	[anyone, "dplmc_constable_recruit",
	[
		(le, "$g_player_chamberlain", 0)
	],
	"We need a treasury to recruit new soldiers. You have to appoint a chamberlain first.", "dplmc_constable_pretalk",
	[]],

	[anyone, "dplmc_constable_recruit",
	[
		(gt, "$g_player_chamberlain", 0),
		(assign, ":var_1", 0),
		(try_begin),
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(assign, ":value", 4),
			(assign, reg0, 0),
		(else_try),
			(assign, ":value", 2),
			(assign, reg0, 1),
		(try_end),
		(try_for_parties, ":var_3"),
			(party_slot_eq, ":var_3", slot_party_type, 12),
			(party_slot_eq, ":var_3", 234, "$current_town"),
			(val_add, ":var_1", 1),
		(try_end),
		(ge, ":var_1", ":value")
	],
	"You have already hired the maximum amount of {reg0?4:2} recruiters from this {reg0?town:castle}.", "dplmc_constable_pretalk",
	[]],

	[anyone, "dplmc_constable_recruit",
	[
		(gt, "$g_player_chamberlain", 0),
		(assign, ":var_1", 0),
		(try_begin),
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(assign, ":value", 4),
		(else_try),
			(assign, ":value", 2),
		(try_end),
		(try_for_parties, ":var_3"),
			(party_slot_eq, ":var_3", slot_party_type, 12),
			(party_slot_eq, ":var_3", 234, "$current_town"),
			(val_add, ":var_1", 1),
		(try_end),
		(lt, ":var_1", ":value")
	],
	"If you want, I will send someone to visit villages and recruit population to your forces. After he has collected the amount you ordered he returns to this {reg0?town:castle} and puts the recruits in the garrison. There's a limit for concurrent recruiters, which is 2 for castles and 4 for towns. What kind of recruits do you want?", "dplmc_constable_recruit_select",
	[]],

	[anyone|repeat_for_factions|plyr, "dplmc_constable_recruit_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_kingdom_1", 49),
		(store_sub, ":value", ":repeat_object", "fac_kingdom_1"),
		(val_add, ":value", "str_kingdom_1_adjective"),
		(str_store_string, 11, ":value")
	],
	"{s11}.", "dplmc_constable_recruit_amount",
	[
		(store_repeat_object, ":repeat_object"),
		(assign, "$temp", ":repeat_object")
	]],

	[anyone, "dplmc_constable_recruit_amount",
	[],
	"You have to pay 50 coins for each recruit and 100 coins for the recruiter. I will take the money from the treasury. How many recruits are you willing to pay for?", "dplmc_constable_recruit_amount_select",
	[]],

	[anyone|plyr, "dplmc_constable_recruit_amount_select",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 350)
	],
	"5.", "dplmc_constable_recruit_confirm_ask",
	[
		(assign, "$diplomacy_var", 5)
	]],

	[anyone|plyr, "dplmc_constable_recruit_amount_select",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 600)
	],
	"10.", "dplmc_constable_recruit_confirm_ask",
	[
		(assign, "$diplomacy_var", 10)
	]],

	[anyone|plyr, "dplmc_constable_recruit_amount_select",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 1100)
	],
	"20.", "dplmc_constable_recruit_confirm_ask",
	[
		(assign, "$diplomacy_var", 20)
	]],

	[anyone|plyr, "dplmc_constable_recruit_amount_select",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 1600)
	],
	"30.", "dplmc_constable_recruit_confirm_ask",
	[
		(assign, "$diplomacy_var", 30)
	]],

	[anyone|plyr, "dplmc_constable_recruit_amount_select",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 2100)
	],
	"40.", "dplmc_constable_recruit_confirm_ask",
	[
		(assign, "$diplomacy_var", 40)
	]],

	[anyone|plyr, "dplmc_constable_recruit_amount_select",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 2600)
	],
	"50.", "dplmc_constable_recruit_confirm_ask",
	[
		(assign, "$diplomacy_var", 50)
	]],

	[anyone|plyr, "dplmc_constable_recruit_confirm_ask",
	[
		(assign, reg2, "$diplomacy_var"),
		(str_store_string, 6, "@{!}{reg2}"),
		(store_sub, ":value", "$temp", "fac_kingdom_1"),
		(val_add, ":value", "str_kingdom_1_adjective"),
		(str_store_string, 11, ":value")
	],
	"Do you really want to recruit {s6} {s11} soldiers?", "dplmc_constable_recruit_confirm",
	[]],

	[anyone|plyr, "dplmc_constable_recruit_confirm",
	[],
	"Yes.", "dplmc_constable_pretalk",
	[
		(call_script, "script_dplmc_send_recruiter", "$diplomacy_var", "$temp")
	]],

	[anyone|plyr, "dplmc_constable_recruit_confirm",
	[],
	"No.", "dplmc_constable_pretalk",
	[]],

	[anyone|plyr, "dplmc_constable_recruit_amount_select",
	[],
	"None.", "dplmc_constable_pretalk",
	[]],

	[anyone|plyr, "dplmc_constable_recruits_and_training",
	[],
	"I changed my mind.", "dplmc_constable_pretalk",
	[]],

	[anyone|plyr, "dplmc_constable_talk",
	[],
	"Let's talk about patrols and troop movement.", "dplmc_constable_security_ask",
	[]],

	[anyone, "dplmc_constable_security_ask",
	[],
	"Of course.", "dplmc_constable_security",
	[]],

	[anyone|plyr, "dplmc_constable_security",
	[],
	"I want to move troops to another location.", "dplmc_constable_move_troops",
	[
		(party_clear, "p_temp_party"),
		(assign, "$g_move_heroes", 1),
		(call_script, "script_party_add_party", "p_temp_party", "p_main_party"),
		(party_clear, "p_main_party"),
		(party_remove_members, "p_main_party", "trp_player", 1),
		(change_screen_exchange_members, 1)
	]],

	[anyone, "dplmc_constable_move_troops",
	[],
	"Where do you want to move the troops?", "dplmc_constable_move_troops_location",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_constable_move_troops_location",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_village_1"),
		(neq, ":repeat_object", "$current_town"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(eq, ":faction_of_party_repeat_object", "$players_kingdom"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{!}{s11}.", "dplmc_constable_move_troops_location_confirm_ask",
	[
		(store_repeat_object, "$diplomacy_var"),
		(party_clear, "p_temp_party_2"),
		(try_begin),
			(store_party_size, ":party_size_main_party", "p_main_party"),
			(gt, ":party_size_main_party", 0),
			(call_script, "script_party_add_party", "p_temp_party_2", "p_main_party"),
			(party_clear, "p_main_party"),
			(party_stack_get_troop_id, ":party_stack_troop_id_main_party_0", "p_main_party", 0),
			(try_begin),
				(ge, ":party_stack_troop_id_main_party_0", 0),
				(party_stack_get_size, ":party_stack_size_main_party_0", "p_main_party", 0),
				(party_remove_members, "p_main_party", ":party_stack_troop_id_main_party_0", ":party_stack_size_main_party_0"),
			(try_end),
			(party_stack_get_troop_id, ":party_stack_troop_id_main_party_0", "p_main_party", 1),
			(try_begin),
				(ge, ":party_stack_troop_id_main_party_0", 0),
				(party_stack_get_size, ":party_stack_size_main_party_0", "p_main_party", 1),
				(party_remove_members, "p_main_party", ":party_stack_troop_id_main_party_0", ":party_stack_size_main_party_0"),
			(try_end),
		(try_end),
		(call_script, "script_party_add_party", "p_main_party", "p_temp_party"),
		(assign, "$g_move_heroes", 0)
	]],

	[anyone|plyr, "dplmc_constable_move_troops_location",
	[],
	"Nowhere.", "dplmc_constable_pretalk",
	[
		(party_clear, "p_temp_party_2"),
		(try_begin),
			(store_party_size, ":party_size_main_party", "p_main_party"),
			(gt, ":party_size_main_party", 0),
			(call_script, "script_party_add_party", "p_temp_party_2", "p_main_party"),
			(party_clear, "p_main_party"),
			(party_stack_get_troop_id, ":party_stack_troop_id_main_party_0", "p_main_party", 0),
			(try_begin),
				(ge, ":party_stack_troop_id_main_party_0", 0),
				(party_stack_get_size, ":party_stack_size_main_party_0", "p_main_party", 0),
				(party_remove_members, "p_main_party", ":party_stack_troop_id_main_party_0", ":party_stack_size_main_party_0"),
			(try_end),
			(party_stack_get_troop_id, ":party_stack_troop_id_main_party_0", "p_main_party", 1),
			(try_begin),
				(ge, ":party_stack_troop_id_main_party_0", 0),
				(party_stack_get_size, ":party_stack_size_main_party_0", "p_main_party", 1),
				(party_remove_members, "p_main_party", ":party_stack_troop_id_main_party_0", ":party_stack_size_main_party_0"),
			(try_end),
		(try_end),
		(call_script, "script_party_add_party", "p_main_party", "p_temp_party"),
		(assign, "$g_move_heroes", 0),
		(call_script, "script_party_add_party", "$current_town", "p_temp_party_2"),
		(party_clear, "p_temp_party_2")
	]],

	[anyone, "dplmc_constable_move_troops_location_confirm_ask",
	[
		(store_party_size, ":party_size_temp_party_2", "p_temp_party_2"),
		(assign, ":var_2", 0),
		(party_get_num_prisoner_stacks, ":num_prisoner_stacks_temp_party_2", "p_temp_party_2"),
		(try_for_range_backwards, ":var_4", 0, ":num_prisoner_stacks_temp_party_2"),
			(party_prisoner_stack_get_size, ":party_prisoner_stack_size_temp_party_2_var_4", "p_temp_party_2", ":var_4"),
			(val_add, ":var_2", ":party_prisoner_stack_size_temp_party_2_var_4"),
		(try_end),
		(le, ":party_size_temp_party_2", ":var_2")
	],
	"You didn't choose any soldiers. Seems like you changed your mind.", "dplmc_constable_pretalk",
	[]],

	[anyone, "dplmc_constable_move_troops_location_confirm_ask",
	[
		(str_store_party_name, 9, "$diplomacy_var"),
		(store_party_size, ":party_size_temp_party_2", "p_temp_party_2"),
		(store_mul, reg5, ":party_size_temp_party_2", 5)
	],
	"Do you really want to send the troops to {s9}? This will cost us {reg5} coins.", "dplmc_constable_move_troops_location_confirm",
	[]],

	[anyone|plyr, "dplmc_constable_move_troops_location_confirm",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", reg5)
	],
	"Yes.", "dplmc_constable_pretalk",
	[
		(call_script, "script_dplmc_withdraw_from_treasury", reg5),
		(call_script, "script_dplmc_move_troops_party", "$current_town", "$diplomacy_var", "p_temp_party_2", "fac_player_faction"),
		(party_clear, "p_temp_party_2")
	]],

	[anyone|plyr, "dplmc_constable_move_troops_location_confirm",
	[],
	"No. Let me check if we can afford that.", "dplmc_constable_pretalk",
	[
		(call_script, "script_party_add_party", "$current_town", "p_temp_party_2"),
		(party_clear, "p_temp_party_2")
	]],

	[anyone|plyr, "dplmc_constable_security",
	[],
	"I want to enlist a patrol.", "dplmc_constable_patrol_size_ask",
	[]],

	[anyone, "dplmc_constable_patrol_size_ask",
	[
		(store_current_hours, ":current_hours"),
		(val_sub, ":current_hours", 168),
		(faction_get_slot, ":player_faction_205", "fac_player_faction", 205),
		(ge, ":current_hours", ":player_faction_205")
	],
	"You can take troops from your garrison or enlist fresh troops. In the latter case you can enlist a small patrol for 1000 coins, a medium patrol for 2000 coins or a big patrol for 3000 coins. You can also enlist a small elite patrol for 2000 coins. We have to pay weekly wages for the soldiers so make sure you have enough money in the treasury.", "dplmc_constable_patrol_size",
	[]],

	[anyone, "dplmc_constable_patrol_size_ask",
	[
		(store_current_hours, ":current_hours"),
		(val_sub, ":current_hours", 168),
		(faction_get_slot, ":player_faction_205", "fac_player_faction", 205),
		(store_sub, ":value", ":player_faction_205", ":current_hours"),
		(store_div, ":value_2", ":value", 24),
		(store_mod, ":value_3", ":value", 24),
		(try_begin),
			(lt, ":value_3", 0),
			(val_add, ":value_2", 1),
		(try_end),
		(assign, reg0, ":value_2")
	],
	"Currently there are no fresh troops available. We have to wait {reg0} days. But you can take troops from your garrison.", "dplmc_constable_patrol_size",
	[]],

	[anyone|plyr, "dplmc_constable_patrol_size",
	[],
	"Take troops out of the garrison.", "dplmc_constable_patrol_garrison",
	[
		(store_party_size_wo_prisoners, ":party_size_wo_prisoners_current_town", "$current_town"),
		(gt, ":party_size_wo_prisoners_current_town", 0),
		(party_clear, "p_temp_party"),
		(assign, "$g_move_heroes", 1),
		(call_script, "script_party_add_party", "p_temp_party", "p_main_party"),
		(party_clear, "p_main_party"),
		(party_remove_members, "p_main_party", "trp_player", 1),
		(change_screen_exchange_members, 1)
	]],

	[anyone, "dplmc_constable_patrol_garrison",
	[
		(store_party_size_wo_prisoners, ":party_size_wo_prisoners_current_town", "$current_town"),
		(le, ":party_size_wo_prisoners_current_town", 0)
	],
	"We do not have any troops in the garrison.", "dplmc_constable_patrol_size",
	[]],

	[anyone, "dplmc_constable_patrol_garrison",
	[],
	"My {lord/lady}, lets muster the patrol troops.", "dplmc_constable_patrol_garrison_2",
	[]],

	[anyone, "dplmc_constable_patrol_garrison_2",
	[
		(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party", "p_main_party"),
		(le, ":party_size_wo_prisoners_main_party", 0),
		(party_add_members, "p_main_party", "trp_temp_troop", 1)
	],
	"You didn't choose any soldiers. Seems like you changed your mind.", "dplmc_constable_pretalk",
	[
		(party_remove_members, "p_main_party", "trp_temp_troop", 1),
		(call_script, "script_party_add_party", "p_main_party", "p_temp_party"),
		(assign, "$g_move_heroes", 0)
	]],

	[anyone, "dplmc_constable_patrol_garrison_2",
	[],
	"Where do you want to send the patrol?", "dplmc_constable_patrol_garrison_location",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_constable_patrol_garrison_location",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(eq, ":faction_of_party_repeat_object", "$players_kingdom"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{!}{s11}.", "dplmc_constable_patrol_garrison_confirm_ask",
	[
		(store_repeat_object, "$diplomacy_var"),
		(party_clear, "p_temp_party_2"),
		(call_script, "script_party_add_party", "p_temp_party_2", "p_main_party"),
		(party_clear, "p_main_party"),
		(party_stack_get_troop_id, ":party_stack_troop_id_main_party_0", "p_main_party", 0),
		(try_begin),
			(ge, ":party_stack_troop_id_main_party_0", 0),
			(party_stack_get_size, ":party_stack_size_main_party_0", "p_main_party", 0),
			(party_remove_members, "p_main_party", ":party_stack_troop_id_main_party_0", ":party_stack_size_main_party_0"),
		(try_end),
		(party_stack_get_troop_id, ":party_stack_troop_id_main_party_0", "p_main_party", 1),
		(try_begin),
			(ge, ":party_stack_troop_id_main_party_0", 0),
			(party_stack_get_size, ":party_stack_size_main_party_0", "p_main_party", 1),
			(party_remove_members, "p_main_party", ":party_stack_troop_id_main_party_0", ":party_stack_size_main_party_0"),
		(try_end),
		(call_script, "script_party_add_party", "p_main_party", "p_temp_party"),
		(assign, "$g_move_heroes", 0)
	]],

	[anyone, "dplmc_constable_patrol_garrison_confirm_ask",
	[
		(store_party_size, ":party_size_temp_party_2", "p_temp_party_2"),
		(assign, ":var_2", 0),
		(party_get_num_prisoner_stacks, ":num_prisoner_stacks_temp_party_2", "p_temp_party_2"),
		(try_for_range_backwards, ":var_4", 0, ":num_prisoner_stacks_temp_party_2"),
			(party_prisoner_stack_get_size, ":party_prisoner_stack_size_temp_party_2_var_4", "p_temp_party_2", ":var_4"),
			(val_add, ":var_2", ":party_prisoner_stack_size_temp_party_2_var_4"),
		(try_end),
		(le, ":party_size_temp_party_2", ":var_2")
	],
	"You didn't choose any soldiers. Seems like you changed your mind.", "dplmc_constable_pretalk",
	[]],

	[anyone, "dplmc_constable_patrol_garrison_confirm_ask",
	[
		(str_store_party_name, 9, "$diplomacy_var")
	],
	"Do you really want to send the patrol to {s9}?", "dplmc_constable_patrol_garrison_confirm",
	[]],

	[anyone|plyr, "dplmc_constable_patrol_garrison_confirm",
	[],
	"Yes.", "dplmc_constable_pretalk",
	[
		(call_script, "script_dplmc_send_patrol_party", "$current_town", "$diplomacy_var", "p_temp_party_2", "fac_player_faction"),
		(party_clear, "p_temp_party_2")
	]],

	[anyone|plyr, "dplmc_constable_patrol_garrison_confirm",
	[],
	"No.", "dplmc_constable_pretalk",
	[
		(call_script, "script_party_add_party", "$current_town", "p_temp_party_2"),
		(party_clear, "p_temp_party_2")
	]],

	[anyone|plyr, "dplmc_constable_patrol_size",
	[
		(store_current_hours, ":current_hours"),
		(val_sub, ":current_hours", 168),
		(faction_get_slot, ":player_faction_205", "fac_player_faction", 205),
		(ge, ":current_hours", ":player_faction_205"),
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 1000)
	],
	"A small one.", "dplmc_constable_patrol_location_ask",
	[
		(assign, "$temp", 0)
	]],

	[anyone|plyr, "dplmc_constable_patrol_size",
	[
		(store_current_hours, ":current_hours"),
		(val_sub, ":current_hours", 168),
		(faction_get_slot, ":player_faction_205", "fac_player_faction", 205),
		(ge, ":current_hours", ":player_faction_205"),
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 2000)
	],
	"A medium one.", "dplmc_constable_patrol_location_ask",
	[
		(assign, "$temp", 1)
	]],

	[anyone|plyr, "dplmc_constable_patrol_size",
	[
		(store_current_hours, ":current_hours"),
		(val_sub, ":current_hours", 168),
		(faction_get_slot, ":player_faction_205", "fac_player_faction", 205),
		(ge, ":current_hours", ":player_faction_205"),
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 3000)
	],
	"A big one.", "dplmc_constable_patrol_location_ask",
	[
		(assign, "$temp", 2)
	]],

	[anyone|plyr, "dplmc_constable_patrol_size",
	[
		(store_current_hours, ":current_hours"),
		(val_sub, ":current_hours", 168),
		(faction_get_slot, ":player_faction_205", "fac_player_faction", 205),
		(ge, ":current_hours", ":player_faction_205"),
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 2000)
	],
	"Get the best troops around.", "dplmc_constable_patrol_location_ask",
	[
		(assign, "$temp", 3)
	]],

	[anyone|plyr, "dplmc_constable_patrol_size",
	[],
	"None.", "dplmc_constable_pretalk",
	[]],

	[anyone, "dplmc_constable_patrol_location_ask",
	[],
	"Where do you want to send the patrol?", "dplmc_constable_patrol_location",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_constable_patrol_location",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(eq, ":faction_of_party_repeat_object", "$players_kingdom"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{!}{s11}.", "dplmc_constable_patrol_confirm_ask",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_constable_patrol_location",
	[],
	"Nowhere.", "dplmc_constable_pretalk",
	[]],

	[anyone, "dplmc_constable_patrol_confirm_ask",
	[
		(assign, ":var_1", "str_dplmc_small"),
		(val_add, ":var_1", "$temp"),
		(str_store_string, 8, ":var_1"),
		(str_store_party_name, 9, "$diplomacy_var")
	],
	"Do you really want to send a {s8} patrol to {s9}?", "dplmc_constable_patrol_confirm",
	[]],

	[anyone|plyr, "dplmc_constable_patrol_confirm",
	[],
	"Yes.", "dplmc_constable_pretalk",
	[
		(store_current_hours, ":current_hours"),
		(faction_set_slot, "fac_player_faction", 205, ":current_hours"),
		(call_script, "script_dplmc_send_patrol", "$current_town", "$diplomacy_var", "$temp", "$players_kingdom", "trp_player")
	]],

	[anyone|plyr, "dplmc_constable_patrol_confirm",
	[],
	"No.", "dplmc_constable_pretalk",
	[]],

	[anyone|plyr, "dplmc_constable_security",
	[],
	"I want to change the target of a patrol.", "dplmc_constable_patrol_change_ask",
	[]],

	[anyone, "dplmc_constable_patrol_change_ask",
	[],
	"Which patrol should change the target?", "dplmc_constable_patrol_change",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_constable_patrol_change",
	[
		(store_repeat_object, ":repeat_object"),
		(party_slot_eq, ":repeat_object", slot_party_type, 7),
		(party_slot_eq, ":repeat_object", 300, "trp_player"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{!}{s11}.", "dplmc_constable_patrol_change_target_ask",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_constable_patrol_change",
	[],
	"None.", "dplmc_constable_security_ask",
	[]],

	[anyone, "dplmc_constable_patrol_change_target_ask",
	[],
	"Where do you want to send it?", "dplmc_constable_patrol_change_target",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_constable_patrol_change_target",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(eq, ":faction_of_party_repeat_object", "$players_kingdom"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{!}{s11}.", "dplmc_constable_patrol_change_target_confirm_ask",
	[
		(store_repeat_object, "$temp")
	]],

	[anyone|plyr, "dplmc_constable_patrol_change_target",
	[],
	"Nowhere.", "dplmc_constable_security_ask",
	[]],

	[anyone, "dplmc_constable_patrol_change_target_confirm_ask",
	[
		(str_store_party_name, 5, "$diplomacy_var"),
		(str_store_party_name, 6, "$temp")
	],
	"As you wish, I will send a messenger carrying the orders to patrol {s6} to the {s5}.", "dplmc_constable_patrol_change_target_confirm",
	[]],

	[anyone|plyr, "dplmc_constable_patrol_change_target_confirm",
	[],
	"Thank you.", "dplmc_constable_security_ask",
	[
		(call_script, "script_dplmc_send_messenger_to_party", "$diplomacy_var", 4, "$temp")
	]],

	[anyone|plyr, "dplmc_constable_patrol_change_target_confirm",
	[],
	"Oh maybe not.", "dplmc_constable_security_ask",
	[]],

	[anyone|plyr, "dplmc_constable_security",
	[],
	"I want a patrol to return to a center.", "dplmc_constable_patrol_to_center_ask",
	[]],

	[anyone, "dplmc_constable_patrol_to_center_ask",
	[],
	"Which patrol should move to a center?", "dplmc_constable_patrol_to_center",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_constable_patrol_to_center",
	[
		(store_repeat_object, ":repeat_object"),
		(party_slot_eq, ":repeat_object", slot_party_type, 7),
		(party_slot_eq, ":repeat_object", 300, "trp_player"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{!}{s11}.", "dplmc_constable_patrol_to_center_target_ask",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_constable_patrol_to_center",
	[],
	"None.", "dplmc_constable_security_ask",
	[]],

	[anyone, "dplmc_constable_patrol_to_center_target_ask",
	[],
	"Where do you want to send it?", "dplmc_constable_patrol_to_center_target",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_constable_patrol_to_center_target",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(eq, ":faction_of_party_repeat_object", "$players_kingdom"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{!}{s11}.", "dplmc_constable_patrol_change_to_center_confirm_ask",
	[
		(store_repeat_object, "$temp")
	]],

	[anyone|plyr, "dplmc_constable_patrol_to_center_target",
	[],
	"Nowhere.", "dplmc_constable_security_ask",
	[]],

	[anyone, "dplmc_constable_patrol_change_to_center_confirm_ask",
	[
		(str_store_party_name, 5, "$diplomacy_var"),
		(str_store_party_name, 6, "$temp")
	],
	"As you wish, I will send a messenger carrying the orders to move to {s6} to the {s5}.", "dplmc_constable_patrol_to_center_confirm",
	[]],

	[anyone|plyr, "dplmc_constable_patrol_to_center_confirm",
	[],
	"Thank you.", "dplmc_constable_security_ask",
	[
		(call_script, "script_dplmc_send_messenger_to_party", "$diplomacy_var", 14, "$temp")
	]],

	[anyone|plyr, "dplmc_constable_patrol_to_center_confirm",
	[],
	"Oh maybe not.", "dplmc_constable_security_ask",
	[]],

	[anyone|plyr, "dplmc_constable_security",
	[],
	"I want to disband a patrol.", "dplmc_constable_patrol_disband_ask",
	[]],

	[anyone, "dplmc_constable_patrol_disband_ask",
	[],
	"Which patrol do you want to disband?", "dplmc_constable_patrol_disband",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_constable_patrol_disband",
	[
		(store_repeat_object, ":repeat_object"),
		(party_slot_eq, ":repeat_object", slot_party_type, 7),
		(party_slot_eq, ":repeat_object", 300, "trp_player"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{!}{s11}.", "dplmc_constable_patrol_disband_confirm_ask",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_constable_patrol_disband",
	[],
	"None.", "dplmc_constable_pretalk",
	[]],

	[anyone, "dplmc_constable_patrol_disband_confirm_ask",
	[
		(str_store_party_name, 5, "$diplomacy_var")
	],
	"As you wish, I will send a messenger who will tell {s5} to disband.", "dplmc_constable_patrol_disband_confirm",
	[]],

	[anyone|plyr, "dplmc_constable_patrol_disband_confirm",
	[],
	"Thank you.", "dplmc_constable_security_ask",
	[
		(call_script, "script_dplmc_send_messenger_to_party", "$diplomacy_var", -1, -1)
	]],

	[anyone|plyr, "dplmc_constable_patrol_disband_confirm",
	[],
	"No.", "dplmc_constable_security_ask",
	[]],

	[anyone|plyr, "dplmc_constable_security",
	[],
	"Nevermind.", "dplmc_constable_pretalk",
	[]],

	[anyone|plyr, "dplmc_constable_talk",
	[
		(store_num_regular_prisoners, reg0),
		(ge, reg0, 1)
	],
	"I have some prisoners can you sell them for me?", "dplmc_constable_prisoner",
	[]],

	[anyone, "dplmc_constable_prisoner",
	[],
	"Of course, my lord", "dplmc_constable_pretalk",
	[
		(change_screen_trade_prisoners)
	]],

	[anyone|plyr, "dplmc_constable_talk",
	[],
	"You are dismissed.", "dplmc_constable_dismiss_confirm_ask",
	[]],

	[anyone, "dplmc_constable_dismiss_confirm_ask",
	[],
	"Are you sure that you don't need me anymore?", "dplmc_constable_dismiss_confirm",
	[]],

	[anyone|plyr, "dplmc_constable_dismiss_confirm",
	[],
	"Yes I am.", "dplmc_constable_dismiss_confirm_yes",
	[]],

	[anyone, "dplmc_constable_dismiss_confirm_yes",
	[],
	"As you wish.", "close_window",
	[
		(assign, "$g_player_constable", -1),
		(assign, "$g_constable_training_center", -1)
	]],

	[anyone|plyr, "dplmc_constable_dismiss_confirm",
	[],
	"No I am not.", "dplmc_constable_pretalk",
	[]],

	[anyone|plyr, "dplmc_constable_talk",
	[],
	"Thank you, I will come back to you later.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$g_player_chamberlain", "$g_talk_troop")
	],
	"Yes, my lord?", "dplmc_chamberlain_talk",
	[]],

	[anyone, "dplmc_chamberlain_pretalk",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Do you need anything else, {s0}?", "dplmc_chamberlain_talk",
	[]],

	[anyone|plyr, "dplmc_chamberlain_talk",
	[],
	"Please give me a report about the financial affairs.", "dplmc_chamberlain_overview",
	[]],

	[anyone, "dplmc_chamberlain_overview",
	[
		(assign, ":var_1", 0),
		(assign, ":var_2", 0),
		(assign, ":var_3", 0),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(val_add, ":var_3", 1),
			(party_get_slot, ":party_center_accumulated_rents", ":party", slot_center_accumulated_rents),
			(val_add, ":var_1", ":party_center_accumulated_rents"),
			(str_clear, 60),
			(try_begin),
				(this_or_next|party_slot_eq, ":party", slot_party_type, 3),
				(party_slot_eq, ":party", slot_party_type, 2),
				(party_get_num_companion_stacks, ":num_companion_stacks_party", ":party"),
				(assign, ":var_7", 0),
				(party_get_num_companion_stacks, ":num_companion_stacks_party", ":party"),
				(try_for_range, ":number", 0, ":num_companion_stacks_party"),
					(party_stack_get_troop_id, ":party_stack_troop_id_party_number", ":party", ":number"),
					(party_stack_get_size, ":party_stack_size_party_number", ":party", ":number"),
					(val_add, ":var_7", ":party_stack_size_party_number"),
					(call_script, "script_game_get_troop_wage", ":party_stack_troop_id_party_number", ":party"),
					(assign, ":var_11", reg0),
					(val_mul, ":var_11", ":party_stack_size_party_number"),
					(val_add, ":var_2", ":var_11"),
				(try_end),
				(try_begin),
					(party_slot_eq, ":party", slot_party_type, 3),
					(val_add, ":var_3", 1),
					(party_get_slot, ":party_center_accumulated_tariffs", ":party", slot_center_accumulated_tariffs),
					(assign, reg0, ":party_center_accumulated_tariffs"),
					(val_add, ":var_1", ":party_center_accumulated_tariffs"),
				(try_end),
			(try_end),
		(try_end),
		(val_div, ":var_2", 2),
		(assign, reg0, ":var_1"),
		(assign, reg1, ":var_2"),
		(str_store_string, 6, "@We currently have an income of {reg0} coins and costs of {reg1} coins from fiefs and garrions."),
		(assign, ":value", 0),
		(try_begin),
			(gt, ":var_3", 3),
			(store_sub, ":value_2", ":var_3", 3),
			(val_mul, ":value_2", 9),
			(val_min, ":value_2", 140),
			(store_mul, ":value", ":var_1", ":value_2"),
			(val_div, ":value", 200),
		(try_end),
		(try_begin),
			(gt, ":value", 0),
			(store_mul, ":value_3", ":value", 100),
			(val_div, ":value_3", ":var_1"),
			(assign, reg0, ":value"),
			(assign, reg1, ":value_3"),
			(str_store_string, 6, "@{s6} We are losing {reg0} coins due to tax inefficiency. That means {reg1} percent."),
		(try_end),
		(assign, ":var_16", ":var_1"),
		(val_sub, ":var_16", ":var_2"),
		(val_sub, ":var_16", ":value"),
		(assign, reg0, ":var_16"),
		(str_store_string, 6, "@{s6} Overall this sums up to {reg0} coins.")
	],
	"{!}{s6}", "dplmc_chamberlain_pretalk",
	[]],

	[anyone|plyr, "dplmc_chamberlain_talk",
	[],
	"Let us inspect the treasury.", "dplmc_chamberlain_treasury",
	[]],

	[anyone, "dplmc_chamberlain_treasury",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(assign, reg0, ":troop_gold_household_possessions"),
		(str_store_string, 4, "@{!}{reg0}"),
		(try_begin),
			(gt, "$g_player_debt_to_party_members", 0),
			(assign, reg0, "$g_player_debt_to_party_members"),
			(str_store_string, 6, "@{reg0} coins"),
		(else_try),
			(str_store_string, 6, "@no"),
		(try_end)
	],
	"There are currently {s4} coins in the treasury and we have {s6} debts. What do you want to do?", "dplmc_chamberlain_treasury_action",
	[]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action",
	[],
	"I would like to pay into the treasury.", "dplmc_chamberlain_treasury_action_pay",
	[]],

	[anyone, "dplmc_chamberlain_treasury_action_pay",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(assign, reg0, ":troop_gold_household_possessions"),
		(str_store_string, 4, "@{!}{reg0}")
	],
	"We currently have {s4} coins in the treasury. How much money do you like to pay into the treasury, my lord?", "dplmc_chamberlain_treasury_action_pay_select",
	[]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_pay_select",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 100)
	],
	"100.", "dplmc_chamberlain_treasury_action_pay",
	[
		(troop_remove_gold, "trp_player", 100),
		(call_script, "script_dplmc_pay_into_treasury", 100)
	]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_pay_select",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 200)
	],
	"200.", "dplmc_chamberlain_treasury_action_pay",
	[
		(troop_remove_gold, "trp_player", 200),
		(call_script, "script_dplmc_pay_into_treasury", 200)
	]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_pay_select",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 500)
	],
	"500.", "dplmc_chamberlain_treasury_action_pay",
	[
		(troop_remove_gold, "trp_player", 500),
		(call_script, "script_dplmc_pay_into_treasury", 500)
	]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_pay_select",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 1000)
	],
	"1000.", "dplmc_chamberlain_treasury_action_pay",
	[
		(troop_remove_gold, "trp_player", 1000),
		(call_script, "script_dplmc_pay_into_treasury", 1000)
	]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_pay_select",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 2000)
	],
	"2000.", "dplmc_chamberlain_treasury_action_pay",
	[
		(troop_remove_gold, "trp_player", 2000),
		(call_script, "script_dplmc_pay_into_treasury", 2000)
	]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_pay_select",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 5000)
	],
	"5000.", "dplmc_chamberlain_treasury_action_pay",
	[
		(troop_remove_gold, "trp_player", 5000),
		(call_script, "script_dplmc_pay_into_treasury", 5000)
	]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_pay_select",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 10000)
	],
	"10000.", "dplmc_chamberlain_treasury_action_pay",
	[
		(troop_remove_gold, "trp_player", 10000),
		(call_script, "script_dplmc_pay_into_treasury", 10000)
	]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_pay_select",
	[],
	"Never mind.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action",
	[],
	"I would like to withdraw money from the treasury.", "dplmc_chamberlain_treasury_action_withdraw",
	[]],

	[anyone, "dplmc_chamberlain_treasury_action_withdraw",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(assign, reg0, ":troop_gold_household_possessions"),
		(str_store_string, 4, "@{!}{reg0}")
	],
	"We currently have {s4} coins in the treasury. How much money do you like to withdraw from the treasury, my lord?", "dplmc_chamberlain_treasury_action_withdraw_select",
	[]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_withdraw_select",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 100)
	],
	"100.", "dplmc_chamberlain_treasury_action_withdraw",
	[
		(call_script, "script_dplmc_withdraw_from_treasury", 100),
		(troop_add_gold, "trp_player", 100)
	]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_withdraw_select",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 200)
	],
	"200.", "dplmc_chamberlain_treasury_action_withdraw",
	[
		(call_script, "script_dplmc_withdraw_from_treasury", 200),
		(troop_add_gold, "trp_player", 200)
	]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_withdraw_select",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 500)
	],
	"500.", "dplmc_chamberlain_treasury_action_withdraw",
	[
		(call_script, "script_dplmc_withdraw_from_treasury", 500),
		(troop_add_gold, "trp_player", 500)
	]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_withdraw_select",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 1000)
	],
	"1000.", "dplmc_chamberlain_treasury_action_withdraw",
	[
		(call_script, "script_dplmc_withdraw_from_treasury", 1000),
		(troop_add_gold, "trp_player", 1000)
	]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_withdraw_select",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 2000)
	],
	"2000.", "dplmc_chamberlain_treasury_action_withdraw",
	[
		(call_script, "script_dplmc_withdraw_from_treasury", 2000),
		(troop_add_gold, "trp_player", 2000)
	]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_withdraw_select",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 5000)
	],
	"5000.", "dplmc_chamberlain_treasury_action_withdraw",
	[
		(call_script, "script_dplmc_withdraw_from_treasury", 5000),
		(troop_add_gold, "trp_player", 5000)
	]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_withdraw_select",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", 10000)
	],
	"10000.", "dplmc_chamberlain_treasury_action_withdraw",
	[
		(call_script, "script_dplmc_withdraw_from_treasury", 10000),
		(troop_add_gold, "trp_player", 10000)
	]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action_withdraw_select",
	[],
	"Never mind.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone|plyr, "dplmc_chamberlain_treasury_action",
	[],
	"Thank you, let's talk about something else.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone|plyr, "dplmc_chamberlain_talk",
	[],
	"Please give me a status report about the financial situation of a fief.", "dplmc_chamberlain_status",
	[]],

	[anyone, "dplmc_chamberlain_status",
	[],
	"About which fief do you like to be informed?", "dplmc_chamberlain_status_select_fief",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_chamberlain_status_select_fief",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(party_slot_eq, ":repeat_object", slot_town_lord, "trp_player"),
		(str_store_party_name, 60, ":repeat_object")
	],
	"{!}{s60}", "dplmc_chamberlain_status_info",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_chamberlain_status_select_fief",
	[],
	"Never mind.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone, "dplmc_chamberlain_status_info",
	[
		(assign, ":var_1", "$diplomacy_var"),
		(str_store_party_name, 60, ":var_1"),
		(try_begin),
			(party_slot_ge, ":var_1", 39, 1),
			(str_store_string, 51, "@{s60} is currently occupied by outlaws you should counter them as soon as possible."),
		(else_try),
			(party_get_slot, ":var_1_center_player_relation", ":var_1", slot_center_player_relation),
			(call_script, "script_describe_center_relation_to_s3", ":var_1_center_player_relation"),
			(party_get_slot, ":var_1_400", ":var_1", 400),
			(call_script, "script_dplmc_describe_tax_rate_to_s50", ":var_1_400"),
			(party_get_slot, ":var_1_center_accumulated_rents", ":var_1", slot_center_accumulated_rents),
			(assign, reg0, ":var_1_center_accumulated_rents"),
			(str_store_string, 61, "@ We are expecting {reg0} coins for rents"),
			(assign, ":var_5", ":var_1_center_accumulated_rents"),
			(assign, ":var_6", 0),
			(str_clear, 59),
			(try_begin),
				(this_or_next|party_slot_eq, ":var_1", slot_party_type, 3),
				(party_slot_eq, ":var_1", slot_party_type, 2),
				(party_get_num_companion_stacks, ":num_companion_stacks_var_1", ":var_1"),
				(assign, ":var_8", 0),
				(party_get_num_companion_stacks, ":num_companion_stacks_var_1", ":var_1"),
				(try_for_range, ":number", 0, ":num_companion_stacks_var_1"),
					(party_stack_get_troop_id, ":party_stack_troop_id_var_1_number", ":var_1", ":number"),
					(party_stack_get_size, ":party_stack_size_var_1_number", ":var_1", ":number"),
					(val_add, ":var_8", ":party_stack_size_var_1_number"),
					(call_script, "script_game_get_troop_wage", ":party_stack_troop_id_var_1_number", ":var_1"),
					(assign, ":var_12", reg0),
					(val_mul, ":var_12", ":party_stack_size_var_1_number"),
					(val_add, ":var_6", ":var_12"),
				(try_end),
				(val_div, ":var_6", 2),
				(assign, reg0, ":var_8"),
				(assign, reg1, ":var_6"),
				(str_store_string, 59, "@ The troop wages for {reg0} troops cost us {reg1} coins."),
				(try_begin),
					(party_slot_eq, ":var_1", slot_party_type, 3),
					(party_get_slot, ":var_1_center_accumulated_tariffs", ":var_1", slot_center_accumulated_tariffs),
					(assign, reg0, ":var_1_center_accumulated_tariffs"),
					(str_store_string, 61, "@{s61} and {reg0} coins for tariffs"),
					(val_add, ":var_5", ":var_1_center_accumulated_tariffs"),
				(try_end),
			(try_end),
			(try_begin),
				(this_or_next|is_between, ":var_1", "p_village_1", "p_salt_mine"),
				(is_between, ":var_1", "p_town_1", "p_castle_1"),
				(call_script, "script_dplmc_describe_prosperity_to_s4", ":var_1"),
			(else_try),
				(str_store_string, 4, "@Well, {s60}."),
			(try_end),
			(val_sub, ":var_5", ":var_6"),
			(assign, reg0, ":var_5"),
			(str_store_string, 62, "@{!}{reg0}"),
			(str_store_string, 51, "@{s4} {s3}. The tax rate is {s50}.{s59}{s61}. Overall this sums up to {s62} coins."),
		(try_end)
	],
	"{!}{s51}", "dplmc_chamberlain_status",
	[]],

	[anyone|plyr, "dplmc_chamberlain_talk",
	[],
	"I wish to change the tax rate for a fief.", "dplmc_chamberlain_tax",
	[]],

	[anyone, "dplmc_chamberlain_tax",
	[],
	"For which fief?", "dplmc_chamberlain_tax_select_center",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_chamberlain_tax_select_center",
	[
		(store_repeat_object, ":repeat_object"),
		(this_or_next|is_between, ":repeat_object", "p_town_1", "p_castle_1"),
		(is_between, ":repeat_object", "p_village_1", "p_salt_mine"),
		(party_slot_eq, ":repeat_object", slot_town_lord, "trp_player"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(this_or_next|eq, ":faction_of_party_repeat_object", "fac_player_supporters_faction"),
		(eq, ":faction_of_party_repeat_object", "$players_kingdom"),
		(str_store_party_name, 6, ":repeat_object")
	],
	"{!}{s6}", "dplmc_chamberlain_tax_ask_rate",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_chamberlain_tax_select_center",
	[],
	"Never mind.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone, "dplmc_chamberlain_tax_ask_rate",
	[
		(str_store_party_name, 6, "$diplomacy_var")
	],
	"How high do you want to set the tax rate for {s6}?", "dplmc_chamberlain_tax_select_rate",
	[]],

	[anyone|plyr, "dplmc_chamberlain_tax_select_rate",
	[
		(neg|party_slot_eq, "$diplomacy_var", 400, -50)
	],
	"Very low.", "dplmc_chamberlain_tax_ask_confirm",
	[
		(str_store_string, 11, "str_dplmc_tax_very_low"),
		(assign, "$diplomacy_tax_rate", -50)
	]],

	[anyone|plyr, "dplmc_chamberlain_tax_select_rate",
	[
		(neg|party_slot_eq, "$diplomacy_var", 400, -25)
	],
	"Low.", "dplmc_chamberlain_tax_ask_confirm",
	[
		(str_store_string, 11, "str_dplmc_tax_low"),
		(assign, "$diplomacy_tax_rate", -25)
	]],

	[anyone|plyr, "dplmc_chamberlain_tax_select_rate",
	[
		(neg|party_slot_eq, "$diplomacy_var", 400, 0)
	],
	"Normal.", "dplmc_chamberlain_tax_ask_confirm",
	[
		(str_store_string, 11, "str_dplmc_tax_normal"),
		(assign, "$diplomacy_tax_rate", 0)
	]],

	[anyone|plyr, "dplmc_chamberlain_tax_select_rate",
	[
		(neg|party_slot_eq, "$diplomacy_var", 400, 25)
	],
	"High.", "dplmc_chamberlain_tax_ask_confirm",
	[
		(str_store_string, 11, "str_dplmc_tax_high"),
		(assign, "$diplomacy_tax_rate", 25)
	]],

	[anyone|plyr, "dplmc_chamberlain_tax_select_rate",
	[
		(neg|party_slot_eq, "$diplomacy_var", 400, 50)
	],
	"Very High.", "dplmc_chamberlain_tax_ask_confirm",
	[
		(str_store_string, 11, "str_dplmc_tax_very_high"),
		(assign, "$diplomacy_tax_rate", 50)
	]],

	[anyone|plyr, "dplmc_chamberlain_tax_select_rate",
	[],
	"Never mind.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone, "dplmc_chamberlain_tax_ask_confirm",
	[],
	"Do you really want to set the tax rate for {s6} to {s11}?", "dplmc_chamberlain_tax_confirm",
	[]],

	[anyone|plyr, "dplmc_chamberlain_tax_confirm",
	[],
	"Yes.", "dplmc_chamberlain_pretalk",
	[
		(party_set_slot, "$diplomacy_var", 400, "$diplomacy_tax_rate"),
		(display_message, "@Tax rate for {s6}: {s11}")
	]],

	[anyone|plyr, "dplmc_chamberlain_tax_confirm",
	[],
	"No I changed, my mind.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone|plyr, "dplmc_chamberlain_talk",
	[],
	"I would like to manage fief improvements.", "dplmc_chamberlain_manage_fiefs",
	[]],

	[anyone, "dplmc_chamberlain_manage_fiefs",
	[
		(assign, ":var_1", 0),
		(assign, ":var_2", 0),
		(assign, ":var_3", 0),
		(try_for_parties, ":var_4"),
			(this_or_next|is_between, ":var_4", "p_town_1", "p_castle_1"),
			(is_between, ":var_4", "p_village_1", "p_salt_mine"),
			(party_slot_eq, ":var_4", slot_town_lord, "trp_player"),
			(store_faction_of_party, ":faction_of_party_var_4", ":var_4"),
			(this_or_next|eq, ":faction_of_party_var_4", "fac_player_supporters_faction"),
			(eq, ":faction_of_party_var_4", "$players_kingdom"),
			(val_add, ":var_1", 1),
			(try_begin),
				(party_slot_eq, ":var_4", slot_party_type, 4),
				(assign, ":value", 130),
				(assign, ":value_2", 135),
			(else_try),
				(party_slot_eq, ":var_4", slot_party_type, 3),
				(assign, ":value", 134),
				(assign, ":value_2", 136),
			(try_end),
			(assign, ":value_3", 0),
			(try_for_range, ":var_9", ":value", ":value_2"),
				(party_slot_ge, ":var_4", ":var_9", 1),
				(val_add, ":var_3", 1),
				(assign, ":value_3", 1),
			(try_end),
			(val_add, ":var_2", ":value_3"),
		(try_end),
		(assign, reg0, ":var_3"),
		(assign, reg1, ":var_2"),
		(assign, reg2, ":var_1")
	],
	"We are currently have {reg0} improvements in {reg1} of your {reg2} fiefs. Do you want to build another one?", "dplmc_chamberlain_manage_fiefs_options",
	[]],

	[anyone|plyr, "dplmc_chamberlain_manage_fiefs_options",
	[],
	"Yes, I want to build an improvement.", "dplmc_chamberlain_manage_fiefs_build",
	[]],

	[anyone|plyr, "dplmc_chamberlain_manage_fiefs_options",
	[],
	"No.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone, "dplmc_chamberlain_manage_fiefs_build",
	[],
	"Where do you want to build an improvement?", "dplmc_chamberlain_manage_fiefs_build_location",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_chamberlain_manage_fiefs_build_location",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(party_slot_eq, ":repeat_object", slot_town_lord, "trp_player"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(this_or_next|eq, ":faction_of_party_repeat_object", "fac_player_supporters_faction"),
		(eq, ":faction_of_party_repeat_object", "$players_kingdom"),
		(assign, ":value", 0),
		(try_begin),
			(party_slot_eq, ":repeat_object", slot_party_type, 4),
			(assign, ":value_2", 130),
			(assign, ":value_3", 135),
		(else_try),
			(assign, ":value_2", 134),
			(assign, ":value_3", 136),
		(try_end),
		(try_for_range, ":var_6", ":value_2", ":value_3"),
			(party_slot_eq, ":repeat_object", ":var_6", 0),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1),
		(str_store_party_name, 2, ":repeat_object")
	],
	"{s2}.", "dplmc_chamberlain_manage_fiefs_build_ask",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_chamberlain_manage_fiefs_build_location",
	[],
	"Nowhere.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone, "dplmc_chamberlain_manage_fiefs_build_ask",
	[
		(try_begin),
			(party_slot_eq, "$diplomacy_var", slot_party_type, 4),
			(assign, ":value", 130),
			(assign, ":value_2", 135),
			(str_store_string, 17, "@village"),
		(else_try),
			(assign, ":value", 134),
			(assign, ":value_2", 136),
			(party_slot_eq, "$diplomacy_var", slot_party_type, 3),
			(str_store_string, 17, "@town"),
		(else_try),
			(str_store_string, 17, "@castle"),
		(try_end),
		(assign, ":var_3", 0),
		(try_for_range, ":var_4", ":value", ":value_2"),
			(party_slot_ge, "$diplomacy_var", ":var_4", 1),
			(val_add, ":var_3", 1),
			(call_script, "script_get_improvement_details", ":var_4"),
			(try_begin),
				(eq, ":var_3", 1),
				(str_store_string, 18, "@{!}{s0}"),
			(else_try),
				(str_store_string, 18, "@{!}{s18}, {s0}"),
			(try_end),
		(try_end),
		(try_begin),
			(eq, ":var_3", 0),
			(str_store_string, 19, "@The {s17} has no improvements."),
		(else_try),
			(str_store_string, 19, "@The {s17} has the following improvements: {s18}."),
		(try_end),
		(party_get_slot, ":diplomacy_var_center_current_improvement", "$diplomacy_var", slot_center_current_improvement),
		(gt, ":diplomacy_var_center_current_improvement", 0),
		(call_script, "script_get_improvement_details", ":diplomacy_var_center_current_improvement"),
		(str_store_string, 7, 0),
		(assign, reg6, 1),
		(store_current_hours, ":current_hours"),
		(party_get_slot, ":diplomacy_var_center_improvement_end_hour", "$diplomacy_var", slot_center_improvement_end_hour),
		(val_sub, ":diplomacy_var_center_improvement_end_hour", ":current_hours"),
		(store_div, reg8, ":diplomacy_var_center_improvement_end_hour", 24),
		(val_max, reg8, 1),
		(store_sub, reg9, reg8, 1)
	],
	"{s19}  You are currently building {s7}. The building will be completed after {reg8} day{reg9?s:}. We have to wait until it's finished.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone, "dplmc_chamberlain_manage_fiefs_build_ask",
	[
		(try_begin),
			(party_slot_eq, "$diplomacy_var", slot_party_type, 4),
			(assign, ":value", 130),
			(assign, ":value_2", 135),
			(str_store_string, 17, "@village"),
		(else_try),
			(assign, ":value", 134),
			(assign, ":value_2", 136),
			(party_slot_eq, "$diplomacy_var", slot_party_type, 3),
			(str_store_string, 17, "@town"),
		(else_try),
			(str_store_string, 17, "@castle"),
		(try_end),
		(assign, ":var_3", 0),
		(try_for_range, ":var_4", ":value", ":value_2"),
			(party_slot_ge, "$diplomacy_var", ":var_4", 1),
			(val_add, ":var_3", 1),
			(call_script, "script_get_improvement_details", ":var_4"),
			(try_begin),
				(eq, ":var_3", 1),
				(str_store_string, 18, "@{!}{s0}"),
			(else_try),
				(str_store_string, 18, "@{!}{s18}, {s0}"),
			(try_end),
		(try_end),
		(try_begin),
			(eq, ":var_3", 0),
			(str_store_string, 19, "@The {s17} has no improvements."),
		(else_try),
			(str_store_string, 19, "@The {s17} has the following improvements: {s18}."),
		(try_end)
	],
	"{s19}  What do you want to build?", "dplmc_chamberlain_manage_fiefs_build_ask2",
	[]],

	[anyone|plyr, "dplmc_chamberlain_manage_fiefs_build_ask2",
	[
		(party_slot_eq, "$diplomacy_var", slot_party_type, 4),
		(party_slot_eq, "$diplomacy_var", slot_center_has_manor, 0)
	],
	"Build a manor.", "dplmc_chamberlain_manage_fiefs_build_confirm_ask",
	[
		(assign, "$g_improvement_type", 130)
	]],

	[anyone|plyr, "dplmc_chamberlain_manage_fiefs_build_ask2",
	[
		(party_slot_eq, "$diplomacy_var", slot_party_type, 4),
		(party_slot_eq, "$diplomacy_var", slot_center_has_fish_pond, 0)
	],
	"Build a mill.", "dplmc_chamberlain_manage_fiefs_build_confirm_ask",
	[
		(assign, "$g_improvement_type", 131)
	]],

	[anyone|plyr, "dplmc_chamberlain_manage_fiefs_build_ask2",
	[
		(party_slot_eq, "$diplomacy_var", slot_party_type, 4),
		(party_slot_eq, "$diplomacy_var", slot_center_has_watch_tower, 0)
	],
	"Build a watch tower.", "dplmc_chamberlain_manage_fiefs_build_confirm_ask",
	[
		(assign, "$g_improvement_type", 132)
	]],

	[anyone|plyr, "dplmc_chamberlain_manage_fiefs_build_ask2",
	[
		(party_slot_eq, "$diplomacy_var", slot_party_type, 4),
		(party_slot_eq, "$diplomacy_var", slot_center_has_school, 0)
	],
	"Build a school.", "dplmc_chamberlain_manage_fiefs_build_confirm_ask",
	[
		(assign, "$g_improvement_type", 133)
	]],

	[anyone|plyr, "dplmc_chamberlain_manage_fiefs_build_ask2",
	[
		(party_slot_eq, "$diplomacy_var", slot_party_type, 4),
		(party_slot_eq, "$diplomacy_var", slot_center_has_messenger_post, 0)
	],
	"Build a messenger post.", "dplmc_chamberlain_manage_fiefs_build_confirm_ask",
	[
		(assign, "$g_improvement_type", 134)
	]],

	[anyone|plyr, "dplmc_chamberlain_manage_fiefs_build_ask2",
	[
		(this_or_next|party_slot_eq, "$diplomacy_var", slot_party_type, 3),
		(party_slot_eq, "$diplomacy_var", slot_party_type, 2),
		(party_slot_eq, "$diplomacy_var", slot_center_has_prisoner_tower, 0)
	],
	"Build a prisoner tower.", "dplmc_chamberlain_manage_fiefs_build_confirm_ask",
	[
		(assign, "$g_improvement_type", 135)
	]],

	[anyone|plyr, "dplmc_chamberlain_manage_fiefs_build_ask2",
	[
		(this_or_next|party_slot_eq, "$diplomacy_var", slot_party_type, 3),
		(party_slot_eq, "$diplomacy_var", slot_party_type, 2),
		(party_slot_eq, "$diplomacy_var", 136, 0)
	],
	"Build a Barracks.", "dplmc_chamberlain_manage_fiefs_build_confirm_ask",
	[
		(assign, "$g_improvement_type", 136)
	]],

	[anyone|plyr, "dplmc_chamberlain_manage_fiefs_build_ask2",
	[],
	"Nothing.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone, "dplmc_chamberlain_manage_fiefs_build_confirm_ask",
	[
		(str_store_party_name, 2, "$diplomacy_var"),
		(call_script, "script_get_improvement_details", "$g_improvement_type"),
		(assign, ":var_1", reg0),
		(str_store_string, 4, 0),
		(str_store_string, 19, 1),
		(call_script, "script_get_max_skill_of_player_party", "skl_engineer"),
		(assign, ":var_2", reg0),
		(assign, ":var_3", reg1),
		(assign, reg2, ":var_2"),
		(store_sub, ":value", 21, ":var_2"),
		(val_mul, ":var_1", ":value"),
		(val_div, ":var_1", 20),
		(store_div, ":value_2", ":var_1", 100),
		(val_add, ":value_2", 4),
		(assign, reg5, ":var_1"),
		(assign, reg6, ":value_2"),
		(try_begin),
			(eq, ":var_3", "trp_player"),
			(assign, reg3, 1),
		(else_try),
			(assign, reg3, 0),
			(str_store_troop_name, 3, ":var_3"),
		(try_end),
		(store_troop_gold, reg7, "trp_household_possessions")
	],
	"Are you sure that you want to build a {s4} for {reg5} in {s2}? It will take {reg6} days. We currently have {reg7} coins in the treasury.", "dplmc_chamberlain_manage_fiefs_confirm",
	[]],

	[anyone|plyr, "dplmc_chamberlain_manage_fiefs_confirm",
	[
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", reg5)
	],
	"Yes.", "dplmc_chamberlain_pretalk",
	[
		(call_script, "script_dplmc_withdraw_from_treasury", reg5),
		(party_set_slot, "$diplomacy_var", slot_center_current_improvement, "$g_improvement_type"),
		(store_current_hours, ":current_hours"),
		(store_mul, ":value", reg6, 24),
		(val_add, ":value", ":current_hours"),
		(party_set_slot, "$diplomacy_var", slot_center_improvement_end_hour, ":value")
	]],

	[anyone|plyr, "dplmc_chamberlain_manage_fiefs_confirm",
	[],
	"No, I don't have the money.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone|plyr, "dplmc_chamberlain_talk",
	[],
	"I would like to manage the item pool and household.", "dplmc_chamberlain_pools_ask",
	[]],

	[anyone|plyr, "dplmc_chamberlain_pools_ask",
	[],
	"What do you want to do?", "dplmc_chamberlain_pools",
	[]],

	[anyone|plyr, "dplmc_chamberlain_pools",
	[],
	"I would like to manage the item pool.", "dplmc_chamberlain_pools_end",
	[
		(try_for_range, ":number", 0, 9),
			(agent_get_item_slot, ":item_slot_g_talk_agent_number", "$g_talk_agent", ":number"),
			(gt, ":item_slot_g_talk_agent_number", 0),
			(troop_remove_item, "$g_talk_troop", ":item_slot_g_talk_agent_number"),
		(try_end),
		(change_screen_loot, "trp_dplmc_chamberlain")
	]],

	[anyone, "dplmc_chamberlain_pools_end",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Do you need anything else, {s0}?", "dplmc_chamberlain_pools_end_2",
	[]],

	[anyone, "dplmc_chamberlain_pools_end_2",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Do you need anything else, {s0}?", "dplmc_chamberlain_talk",
	[
		(try_begin),
			(neg|agent_has_item_equipped, "$g_talk_agent", "itm_ar_swa_tun_tabard"),
			(agent_equip_item, "$g_talk_agent", "itm_ar_swa_tun_tabard"),
			(agent_equip_item, "$g_talk_agent", "itm_bo_vae_t3_leather"),
		(try_end)
	]],

	[anyone|plyr, "dplmc_chamberlain_pools",
	[
		(eq, "$g_autoloot", 1),
		(store_skill_level, ":skill_level_inventory_management_player", "skl_inventory_management", "trp_player"),
		(gt, "$g_player_chamberlain", 0),
		(ge, ":skill_level_inventory_management_player", 3)
	],
	"Let my companions take the items out of the item pool.", "dplmc_chamberlain_item_pool",
	[]],

	[anyone, "dplmc_chamberlain_item_pool",
	[],
	"Are you sure you wish to do this?", "dplmc_chamberlain_item_pool_confirm",
	[]],

	[anyone|plyr, "dplmc_chamberlain_item_pool_confirm",
	[],
	"Yes.", "dplmc_chamberlain_pretalk",
	[
		(call_script, "script_auto_loot_all")
	]],

	[anyone|plyr, "dplmc_chamberlain_item_pool_confirm",
	[],
	"No I changed, my mind.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone|plyr, "dplmc_chamberlain_pools",
	[],
	"I would like to manage the household.", "dplmc_chamberlain_pretalk",
	[
		(change_screen_loot, "trp_household_possessions")
	]],

	[anyone|plyr, "dplmc_chamberlain_pools",
	[],
	"Nevermind.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone|plyr, "dplmc_chamberlain_talk",
	[],
	"You are dismissed.", "dplmc_chamberlain_dismiss_confirm_ask",
	[]],

	[anyone, "dplmc_chamberlain_dismiss_confirm_ask",
	[],
	"Are you sure that you want to handle all financial affairs by yourself?", "dplmc_chamberlain_dismiss_confirm",
	[]],

	[anyone|plyr, "dplmc_chamberlain_dismiss_confirm",
	[],
	"Yes I am.", "dplmc_chamberlain_dismiss_confirm_yes",
	[]],

	[anyone|plyr, "dplmc_chamberlain_dismiss_confirm",
	[],
	"No I am not.", "dplmc_chamberlain_pretalk",
	[]],

	[anyone, "dplmc_chamberlain_dismiss_confirm_yes",
	[],
	"As you wish. Let's go through the documents and hand over your estate.", "close_window",
	[
		(assign, "$g_player_chamberlain", -1),
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(call_script, "script_dplmc_withdraw_from_treasury", ":troop_gold_household_possessions"),
		(troop_add_gold, "trp_player", ":troop_gold_household_possessions")
	]],

	[anyone|plyr, "dplmc_chamberlain_talk",
	[],
	"Oh nothing, I just wanted to check the documents.", "close_window",
	[]],

	[anyone|plyr, "spouse_talk",
	[
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
			(eq, ":party_town_lord", "trp_player"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"I want to hire a new staff member.", "dplmc_spouse_staff_talk_ask",
	[]],

	[anyone, "dplmc_spouse_staff_talk_ask",
	[],
	"What sort of staff member would you like to hire?", "dplmc_talk_staff",
	[]],

	[anyone|plyr, "dplmc_talk_staff",
	[
		(le, "$g_player_constable", 0),
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
			(eq, ":party_town_lord", "trp_player"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"I want to appoint a castellan.", "dplmc_talk_appoint_constable",
	[]],

	[anyone, "dplmc_talk_appoint_constable",
	[
		(troop_slot_ge, "trp_dplmc_constable", 5, 1)
	],
	"I assume you will want to rehire Erlos?  His rate is still 15 coins each week, and the appointment will cost us 700 coins.", "dplmc_talk_appoint_constable_confirm",
	[]],

	[anyone, "dplmc_talk_appoint_constable",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord")
	],
	"I have heard good things about a local nobleman by the name of Erlos, and I believe he would be well-suited for the job. He demands 15 coins each week, though. The appointment will cost us 700 coins.", "dplmc_talk_appoint_constable_confirm",
	[]],

	[anyone, "dplmc_talk_appoint_constable",
	[],
	"That's a wise idea. May I suggest a very capable nobleman and friend of my family? His name is Erlos. He demands 15 coins each week, though. The appointment will cost us 700 coins.", "dplmc_talk_appoint_constable_confirm",
	[]],

	[anyone|plyr, "dplmc_talk_appoint_constable_confirm",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 700)
	],
	"So be it.", "dplmc_talk_appoint_confirm_yes",
	[
		(call_script, "script_dplmc_appoint_constable"),
		(troop_remove_gold, "trp_player", 700)
	]],

	[anyone|plyr, "dplmc_talk_appoint_constable_confirm",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(eq, "$g_talk_troop", ":player_spouse"),
		(this_or_next|is_between, "$g_talk_troop", "trp_npc1", "trp_heroes_end"),
		(eq, "$g_talk_troop", ":player_spouse"),
		(this_or_next|is_between, "$g_talk_troop", "trp_npc1", "trp_heroes_end"),
		(eq, "$g_talk_troop", ":player_spouse")
	],
	"Maybe later.", "spouse_pretalk",
	[]],

	[anyone|plyr, "dplmc_talk_appoint_constable_confirm",
	[
		(eq, "$g_talk_troop", "$g_player_minister"),
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(this_or_next|neg|is_between, "$g_talk_troop", "trp_npc1", "trp_heroes_end"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(neq, ":player_spouse", "$g_player_minister")
	],
	"Maybe later.", "minister_pretalk",
	[]],

	[anyone, "dplmc_talk_appoint_confirm_yes",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(eq, "$g_talk_troop", ":player_spouse"),
		(this_or_next|is_between, "$g_talk_troop", "trp_npc1", "trp_heroes_end"),
		(eq, "$g_talk_troop", ":player_spouse")
	],
	"I will send him a letter he should arrive at the court soon.", "spouse_pretalk",
	[]],

	[anyone, "dplmc_talk_appoint_confirm_yes",
	[
		(eq, "$g_talk_troop", "$g_player_minister")
	],
	"I will send him a letter he should arrive at the court soon.", "minister_pretalk",
	[]],

	[anyone|plyr, "dplmc_talk_staff",
	[
		(le, "$g_player_chamberlain", 0),
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
			(eq, ":party_town_lord", "trp_player"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"I want to appoint a seneschal to handle financial affairs.", "dplmc_talk_appoint_chamberlain",
	[]],

	[anyone, "dplmc_talk_appoint_chamberlain",
	[
		(troop_slot_ge, "trp_dplmc_chamberlain", 5, 1)
	],
	"I assume you will want to rehire Haram?  His rate is still 15 coins each week, and the appointment will cost us 500 coins.", "dplmc_talk_appoint_chamberlain_confirm",
	[]],

	[anyone, "dplmc_talk_appoint_chamberlain",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord")
	],
	"I have heard good things about a local nobleman by the name of Haram, and I believe he would be well-suited for the job. He demands 15 coins each week, though. The appointment will cost us 500 coins.", "dplmc_talk_appoint_chamberlain_confirm",
	[]],

	[anyone, "dplmc_talk_appoint_chamberlain",
	[],
	"That's a wise idea. May I suggest a very capable nobleman and friend of my family? His name is Haram. He demands 15 coins each week, though. The appointment will cost us 500 coins.", "dplmc_talk_appoint_chamberlain_confirm",
	[]],

	[anyone|plyr, "dplmc_talk_appoint_chamberlain_confirm",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 500)
	],
	"So be it.", "dplmc_talk_appoint_confirm_yes",
	[
		(call_script, "script_dplmc_appoint_chamberlain"),
		(troop_remove_gold, "trp_player", 500)
	]],

	[anyone|plyr, "dplmc_talk_appoint_chamberlain_confirm",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(this_or_next|is_between, "$g_talk_troop", "trp_npc1", "trp_heroes_end"),
		(eq, "$g_talk_troop", ":player_spouse")
	],
	"Maybe later.", "spouse_pretalk",
	[]],

	[anyone|plyr, "dplmc_talk_appoint_chamberlain_confirm",
	[
		(eq, "$g_talk_troop", "$g_player_minister"),
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(this_or_next|neg|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(neg|is_between, "$g_talk_troop", "trp_npc1", "trp_heroes_end"),
		(neq, ":player_spouse", "$g_player_minister")
	],
	"Maybe later.", "minister_pretalk",
	[]],

	[anyone|plyr, "dplmc_talk_staff",
	[
		(le, "$g_player_chancellor", 0),
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_castle_1"),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"I want to appoint a chancellor.", "dplmc_talk_appoint_chancellor",
	[]],

	[anyone, "dplmc_talk_appoint_chancellor",
	[
		(troop_slot_ge, "trp_dplmc_chamberlain", 5, 1)
	],
	"I assume you will want to rehire Herfast?  His rate is still 20 coins each week, and the appointment will cost us 400 coins.", "dplmc_talk_appoint_chancellor_confirm",
	[]],

	[anyone, "dplmc_talk_appoint_chancellor",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord")
	],
	"I have heard good things about the third son of a local nobleman. He goes by the name of Herfast, and I believe he would be well-suited for the job. He demands 20 coins each week, though. The appointment will cost us 400 coins.", "dplmc_talk_appoint_chancellor_confirm",
	[]],

	[anyone, "dplmc_talk_appoint_chancellor",
	[],
	"That's a wise idea. May I suggest a very capable man and friend of my family? His name is Herfast. He demands 20 coins each week, though. The appointment will cost us 400 coins.", "dplmc_talk_appoint_chancellor_confirm",
	[]],

	[anyone|plyr, "dplmc_talk_appoint_chancellor_confirm",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 400)
	],
	"So be it.", "dplmc_talk_appoint_confirm_yes",
	[
		(call_script, "script_dplmc_appoint_chancellor"),
		(troop_remove_gold, "trp_player", 400)
	]],

	[anyone|plyr, "dplmc_talk_appoint_chancellor_confirm",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(eq, "$g_talk_troop", ":player_spouse")
	],
	"Maybe later.", "spouse_pretalk",
	[]],

	[anyone|plyr, "dplmc_talk_appoint_chancellor_confirm",
	[
		(eq, "$g_talk_troop", "$g_player_minister"),
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(neq, ":player_spouse", "$g_player_minister")
	],
	"Maybe later.", "minister_pretalk",
	[]],

	[anyone|plyr, "dplmc_talk_staff",
	[
		(eq, "$g_talk_troop", "$g_player_minister")
	],
	"None.", "minister_pretalk",
	[]],

	[anyone|plyr, "dplmc_talk_staff",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(eq, "$g_talk_troop", ":player_spouse"),
		(neq, ":player_spouse", "$g_player_minister")
	],
	"None.", "spouse_pretalk",
	[]],

	[anyone|plyr, "spouse_talk",
	[
		(assign, ":var_1", "$g_talk_troop"),
		(troop_slot_ge, ":var_1", 12, -1),
		(neg|troop_slot_eq, ":var_1", slot_troop_occupation, 2),
		(neq, "$g_talk_troop", "$g_player_minister"),
		(neg|troop_slot_ge, ":var_1", 10, 1),
		(neg|troop_slot_ge, ":var_1", 8, 0),
		(assign, ":value", 0),
		(try_for_parties, ":var_3"),
			(party_slot_eq, ":var_3", slot_party_type, 19),
			(assign, ":value", 1),
		(try_end),
		(neq, ":value", 1)
	],
	"Can you please buy some bread?", "dplmc_spouse_talk_buy_food_amount_ask",
	[]],

	[anyone, "dplmc_spouse_talk_buy_food_amount_ask",
	[],
	"How much bread do you want?", "dplmc_spouse_talk_buy_food_amount",
	[]],

	[anyone|plyr, "dplmc_spouse_talk_buy_food_amount",
	[],
	"{!}50.", "dplmc_spouse_talk_buy_food",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(troop_set_slot, ":player_spouse", 162, 1)
	]],

	[anyone|plyr, "dplmc_spouse_talk_buy_food_amount",
	[],
	"{!}100.", "dplmc_spouse_talk_buy_food",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(troop_set_slot, ":player_spouse", 162, 2)
	]],

	[anyone|plyr, "dplmc_spouse_talk_buy_food_amount",
	[],
	"{!}150.", "dplmc_spouse_talk_buy_food",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(troop_set_slot, ":player_spouse", 162, 3)
	]],

	[anyone|plyr, "dplmc_spouse_talk_buy_food_amount",
	[],
	"{!}200.", "dplmc_spouse_talk_buy_food",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(troop_set_slot, ":player_spouse", 162, 4)
	]],

	[anyone|plyr, "dplmc_spouse_talk_buy_food_amount",
	[],
	"Nothing.", "spouse_pretalk",
	[]],

	[anyone, "dplmc_spouse_talk_buy_food",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(troop_slot_eq, ":player_spouse", slot_troop_cur_center, "$current_town"),
		(troop_get_slot, ":player_spouse_162", ":player_spouse", 162),
		(assign, ":value", 1),
		(try_begin),
			(is_between, "$current_town", "p_castle_1", "p_village_1"),
			(try_begin),
				(is_between, "$current_town", "p_town_1", "p_village_1"),
				(neg|party_slot_eq, "$current_town", slot_center_is_besieged_by, -1),
				(assign, ":value", 0),
			(try_end),
		(try_end),
		(eq, ":value", 1),
		(assign, ":value_2", -1),
		(try_begin),
			(store_faction_of_party, ":faction_of_party_current_town", "$current_town"),
			(assign, ":value_3", 1000),
			(try_for_range, ":party", "p_town_1", "p_salt_mine"),
				(neg|is_between, ":party", "p_castle_1", "p_village_1"),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(eq, ":faction_of_party_party", ":faction_of_party_current_town"),
				(assign, ":value_4", 1),
				(try_begin),
					(is_between, ":party", "p_town_1", "p_castle_1"),
					(party_get_slot, ":party_town_merchant", ":party", slot_town_merchant),
				(else_try),
					(is_between, ":party", "p_village_1", "p_salt_mine"),
					(party_get_slot, ":party_town_merchant", ":party", slot_town_elder),
					(neg|party_slot_eq, ":party", slot_village_state, 0),
					(assign, ":value_4", 0),
				(try_end),
				(eq, ":value_4", 1),
				(troop_get_inventory_capacity, ":inventory_capacity_party_town_merchant", ":party_town_merchant"),
				(assign, ":var_12", 0),
				(try_for_range, ":number", 0, ":inventory_capacity_party_town_merchant"),
					(troop_get_inventory_slot, ":inventory_slot_party_town_merchant_number", ":party_town_merchant", ":number"),
					(eq, ":inventory_slot_party_town_merchant_number", "itm_trade_bread"),
					(val_add, ":var_12", 1),
				(try_end),
				(ge, ":var_12", ":player_spouse_162"),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_party_current_town", ":party", "$current_town"),
				(lt, ":distance_to_party_from_party_party_current_town", ":value_3"),
				(assign, ":value_3", ":distance_to_party_from_party_party_current_town"),
				(assign, ":value_2", ":party"),
			(try_end),
		(try_end),
		(neq, ":value_2", -1),
		(troop_set_slot, ":player_spouse", slot_troop_mission_object, ":value_2"),
		(call_script, "script_dplmc_get_item_buy_price_factor", "itm_trade_bread", ":value_2", "trp_player", -1),
		(store_item_value, ":item_value_trade_bread", "itm_trade_bread"),
		(store_mul, ":value_5", ":item_value_trade_bread", reg0),
		(val_div, ":value_5", 100),
		(val_max, ":value_5", 1),
		(val_mul, ":value_5", ":player_spouse_162"),
		(assign, reg0, ":value_5"),
		(str_store_party_name, 6, ":value_2")
	],
	"Yes of course, I will go to the merchant in {s6} and buy some bread. This will cost us {reg0} coins.", "dplmc_spouse_talk_buy_food_confirm",
	[]],

	[anyone, "dplmc_spouse_talk_buy_food",
	[],
	"Currently no merchant has enough bread. We have to wait.", "spouse_pretalk",
	[]],

	[anyone|plyr, "dplmc_spouse_talk_buy_food_confirm",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", reg0)
	],
	"Ok, we can afford that, please go. Thank you.", "close_window",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(troop_get_slot, ":player_spouse_mission_object", ":player_spouse", slot_troop_mission_object),
		(troop_remove_gold, "trp_player", reg0),
		(try_begin),
			(neq, ":player_spouse_mission_object", "$current_town"),
			(try_begin),
				(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
				(set_spawn_radius, 1),
				(spawn_around_party, "$g_encountered_party", "pt_dplmc_spouse"),
				(assign, ":var_3", reg0),
				(party_add_members, ":var_3", ":player_spouse", 1),
				(party_set_faction, ":var_3", "fac_neutral"),
				(party_set_slot, ":var_3", slot_party_home_center, "$g_encountered_party"),
				(party_set_slot, ":var_3", slot_party_type, 19),
				(party_set_slot, ":var_3", 263, ":player_spouse_mission_object"),
				(party_set_ai_object, ":var_3", ":player_spouse_mission_object"),
				(party_set_ai_behavior, ":var_3", 1),
				(party_set_slot, ":var_3", slot_party_ai_state, -1),
				(troop_set_slot, ":player_spouse", slot_troop_cur_center, -1),
			(try_end),
		(else_try),
			(party_get_slot, ":player_spouse_mission_object_town_merchant", ":player_spouse_mission_object", slot_town_merchant),
			(troop_remove_items, ":player_spouse_mission_object_town_merchant", "itm_trade_bread", 2),
			(troop_add_items, "trp_household_possessions", "itm_trade_bread", 2),
		(try_end)
	]],

	[anyone|plyr, "dplmc_spouse_talk_buy_food_confirm",
	[],
	"Oh, maybe later.", "close_window",
	[]],

	[anyone|plyr, "minister_talk",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(neq, "$g_talk_troop", ":player_spouse"),
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
			(eq, ":party_town_lord", "trp_player"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"I want to hire a new staff member.", "dplmc_minister_staff_talk_ask",
	[]],

	[anyone, "dplmc_minister_staff_talk_ask",
	[],
	"What sort of staff member would you like to hire?", "dplmc_talk_staff",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(le, "$talk_context", 2),
		(ge, "$g_talk_troop_faction_relation", 0),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(eq, "$players_kingdom", "$g_talk_troop_faction"),
		(eq, "$player_has_homage", 1)
	],
	"{s66}, I want to give up a fief you enfeoffed to me.", "dplmc_lord_give_back_fief",
	[]],

	[anyone, "dplmc_lord_give_back_fief",
	[],
	"Oh, so you can't manage it? Well, which fief do you have in mind?", "dplmc_lord_give_back_fief_select",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_lord_give_back_fief_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(neq, ":repeat_object", "$g_player_court"),
		(party_slot_eq, ":repeat_object", slot_center_is_besieged_by, -1),
		(party_slot_eq, ":repeat_object", slot_town_lord, "trp_player"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{!}{s11}.", "dplmc_lord_give_back_fief_confirm_ask",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_lord_give_back_fief_select",
	[],
	"Never mind.", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_give_back_fief_confirm_ask",
	[
		(str_store_party_name, 11, "$diplomacy_var")
	],
	"So you think you can't fulfill your promise and manage {s11}?", "dplmc_lord_give_back_fief_confirm",
	[]],

	[anyone|plyr, "dplmc_lord_give_back_fief_confirm",
	[
		(str_store_party_name, 11, "$diplomacy_var")
	],
	"Yes I want to give up on {s11}.", "lord_pretalk",
	[
		(call_script, "script_change_player_honor", -1),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -3),
		(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
		(val_sub, ":player_renown", 5),
		(val_max, ":player_renown", 0),
		(troop_set_slot, "trp_player", slot_troop_renown, ":player_renown"),
		(call_script, "script_give_center_to_faction", "$diplomacy_var", "fac_neutral"),
		(call_script, "script_give_center_to_faction", "$diplomacy_var", "$players_kingdom")
	]],

	[anyone|plyr, "dplmc_lord_give_back_fief_confirm",
	[
		(str_store_party_name, 11, "$diplomacy_var")
	],
	"No, I will keep the promise.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(le, "$talk_context", 2),
		(ge, "$g_talk_troop_faction_relation", 0),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(eq, "$players_kingdom", "$g_talk_troop_faction"),
		(eq, "$player_has_homage", 1)
	],
	"{s66}, you should declare war on another sovereignty.", "dplmc_lord_declare_war",
	[]],

	[anyone, "dplmc_lord_declare_war",
	[
		(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
		(lt, ":player_renown", 150),
		(troop_get_slot, ":g_talk_troop_player_relation", "$g_talk_troop", slot_troop_player_relation),
		(lt, ":g_talk_troop_player_relation", 5),
		(val_sub, ":g_talk_troop_player_relation", 5),
		(assign, ":var_3", ":player_renown"),
		(val_mul, ":g_talk_troop_player_relation", 5),
		(val_add, ":var_3", ":g_talk_troop_player_relation"),
		(val_add, ":var_3", "$player_honor"),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg0, ":var_3"),
			(display_message, "@{!}DEBUG : sum: {reg0}"),
		(try_end),
		(lt, ":var_3", 300)
	],
	"How can you dare? Who do you think you are? Get out of my sight!", "close_window",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -1),
		(eq, "$talk_context", 2),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "dplmc_lord_declare_war",
	[],
	"Against whom?", "dplmc_lord_declare_war_kingdoms_select",
	[]],

	[anyone|repeat_for_factions|plyr, "dplmc_lord_declare_war_kingdoms_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(neq, ":repeat_object", "fac_player_supporters_faction"),
		(neq, ":repeat_object", "$g_talk_troop_faction"),
		(neq, ":repeat_object", "$players_kingdom"),
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "$players_kingdom", ":repeat_object"),
		(ge, reg0, -1),
		(faction_slot_eq, ":repeat_object", slot_faction_state, 0),
		(faction_get_slot, ":repeat_object_leader", ":repeat_object", slot_faction_leader),
		(str_store_troop_name, 10, ":repeat_object_leader"),
		(str_store_faction_name, 11, ":repeat_object")
	],
	"{s11}", "dplmc_lord_declare_war_ask_why",
	[
		(store_repeat_object, "$g_faction_selected"),
		(call_script, "script_npc_decision_checklist_peace_or_war", "$players_kingdom", "$g_faction_selected", "trp_player"),
		(assign, "$diplomacy_var", reg0),
		(val_mul, "$diplomacy_var", -6),
		(val_min, "$diplomacy_var", 2),
		(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(neq, ":faction", "$players_kingdom"),
			(neq, ":faction", "$g_faction_selected"),
			(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "$players_kingdom", ":faction"),
			(eq, reg0, -2),
			(val_sub, "$diplomacy_var", 4),
		(try_end),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(val_add, "$diplomacy_var", ":skill_level_persuasion_player"),
		(assign, reg50, 0),
		(assign, reg51, 0),
		(assign, reg52, 0),
		(assign, reg53, 0),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg0, "$diplomacy_var"),
			(display_message, "@{!}DEBUG : diplomacy var: {reg0}"),
		(try_end)
	]],

	[anyone|plyr, "dplmc_lord_declare_war_kingdoms_select",
	[],
	"Never mind.", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_declare_war_ask_why",
	[
		(str_store_faction_name, 11, "$g_faction_selected")
	],
	"Why should I declare war against the {s11}?", "dplmc_lord_declare_war_why",
	[]],

	[anyone|plyr, "dplmc_lord_declare_war_why",
	[
		(eq, reg50, 0)
	],
	"They are weaker and we can easily beat them.", "dplmc_lord_declare_war_anything_else",
	[
		(assign, reg50, 1),
		(assign, ":value", -1),
		(assign, ":var_2", 0),
		(assign, ":var_3", 0),
		(try_for_parties, ":var_4"),
			(assign, ":value_2", 0),
			(try_begin),
				(is_between, ":var_4", "p_town_1", "p_castle_1"),
				(assign, ":value_2", 3),
			(else_try),
				(is_between, ":var_4", "p_castle_1", "p_village_1"),
				(assign, ":value_2", 2),
			(else_try),
				(is_between, ":var_4", "p_village_1", "p_salt_mine"),
				(assign, ":value_2", 1),
			(else_try),
				(party_get_template_id, ":template_id_var_4", ":var_4"),
				(eq, ":template_id_var_4", "pt_kingdom_hero_party"),
				(assign, ":value_2", 2),
			(try_end),
			(store_faction_of_party, ":faction_of_party_var_4", ":var_4"),
			(try_begin),
				(eq, ":faction_of_party_var_4", "$players_kingdom"),
				(val_add, ":var_2", ":value_2"),
			(else_try),
				(eq, ":faction_of_party_var_4", "$g_faction_selected"),
				(val_add, ":var_3", ":value_2"),
			(try_end),
		(try_end),
		(try_begin),
			(gt, ":var_2", ":var_3"),
			(assign, ":value", 1),
		(try_end),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(val_mul, ":skill_level_persuasion_player", ":value"),
		(val_add, ":value", ":skill_level_persuasion_player"),
		(val_add, "$diplomacy_var", ":value"),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg0, ":value"),
			(display_message, "@{!}DEBUG : persuasion: {reg0}"),
			(assign, reg0, "$diplomacy_var"),
			(display_message, "@{!}DEBUG : diplomacy var: {reg0}"),
		(try_end)
	]],

	[anyone|plyr, "dplmc_lord_declare_war_why",
	[
		(eq, reg51, 0)
	],
	"We can't tolerate their provocations any longer.", "dplmc_lord_declare_war_anything_else",
	[
		(assign, reg51, 1),
		(assign, ":value", -1),
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "$players_kingdom", "$g_faction_selected"),
		(assign, ":var_2", reg0),
		(try_begin),
			(eq, ":var_2", -1),
			(assign, ":value", 1),
		(try_end),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(val_mul, ":skill_level_persuasion_player", ":value"),
		(val_add, ":value", ":skill_level_persuasion_player"),
		(val_add, "$diplomacy_var", ":value"),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg0, ":value"),
			(display_message, "@{!}DEBUG : persuasion: {reg0}"),
			(assign, reg0, "$diplomacy_var"),
			(display_message, "@{!}DEBUG : diplomacy var: {reg0}"),
		(try_end)
	]],

	[anyone|plyr, "dplmc_lord_declare_war_why",
	[
		(eq, reg52, 0)
	],
	"They are already in war and currently distracted.", "dplmc_lord_declare_war_anything_else",
	[
		(assign, reg52, 1),
		(assign, ":value", -1),
		(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(neq, ":faction", "$players_kingdom"),
			(neq, ":faction", "$g_faction_selected"),
			(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "$g_faction_selected", ":faction"),
			(eq, reg0, -2),
			(assign, ":value", 1),
		(try_end),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(val_mul, ":skill_level_persuasion_player", ":value"),
		(val_add, ":value", ":skill_level_persuasion_player"),
		(val_add, "$diplomacy_var", ":value"),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg0, ":value"),
			(display_message, "@{!}DEBUG : persuasion: {reg0}"),
			(assign, reg0, "$diplomacy_var"),
			(display_message, "@{!}DEBUG : diplomacy var: {reg0}"),
		(try_end)
	]],

	[anyone|plyr, "dplmc_lord_declare_war_why",
	[
		(eq, reg53, 0)
	],
	"It's the right time to attack.", "dplmc_lord_declare_war_anything_else",
	[
		(assign, reg53, 1),
		(assign, ":value", 1),
		(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(neq, ":faction", "$g_faction_selected"),
			(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "$players_kingdom", ":faction"),
			(eq, reg0, -2),
			(assign, ":value", -1),
		(try_end),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(val_mul, ":skill_level_persuasion_player", ":value"),
		(val_add, ":value", ":skill_level_persuasion_player"),
		(val_add, "$diplomacy_var", ":value"),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg0, ":value"),
			(display_message, "@{!}DEBUG : persuasion: {reg0}"),
			(assign, reg0, "$diplomacy_var"),
			(display_message, "@{!}DEBUG : diplomacy var: {reg0}"),
		(try_end)
	]],

	[anyone|plyr, "dplmc_lord_declare_war_why",
	[
		(eq, reg54, 0)
	],
	"We should get back our lost land.", "dplmc_lord_declare_war_anything_else",
	[
		(assign, reg54, 1),
		(assign, ":value", -1),
		(try_for_parties, ":var_2"),
			(store_faction_of_party, ":faction_of_party_var_2", ":var_2"),
			(party_get_slot, ":var_2_center_original_faction", ":var_2", slot_center_original_faction),
			(party_get_slot, ":var_2_center_ex_faction", ":var_2", slot_center_ex_faction),
			(eq, ":faction_of_party_var_2", "$g_faction_selected"),
			(this_or_next|eq, ":var_2_center_original_faction", "$players_kingdom"),
			(eq, ":var_2_center_ex_faction", "$players_kingdom"),
			(assign, ":value", 1),
		(try_end),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(val_mul, ":skill_level_persuasion_player", ":value"),
		(val_add, ":value", ":skill_level_persuasion_player"),
		(val_add, "$diplomacy_var", ":value"),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg0, ":value"),
			(display_message, "@{!}DEBUG : persuasion: {reg0}"),
			(assign, reg0, "$diplomacy_var"),
			(display_message, "@{!}DEBUG : diplomacy var: {reg0}"),
		(try_end)
	]],

	[anyone|plyr, "dplmc_lord_declare_war_why",
	[],
	"I mentioned all reasons for war. Please think about it!", "dplmc_lord_declare_war_decision",
	[]],

	[anyone|plyr, "dplmc_lord_declare_war_why",
	[],
	"I need to think about that in peace and quiet.", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_declare_war_anything_else",
	[],
	"Well, anything else?", "dplmc_lord_declare_war_why",
	[]],

	[anyone, "dplmc_lord_declare_war_decision",
	[
		(troop_get_slot, ":g_talk_troop_player_relation", "$g_talk_troop", slot_troop_player_relation),
		(val_sub, ":g_talk_troop_player_relation", 15),
		(val_min, ":g_talk_troop_player_relation", 35),
		(val_add, "$diplomacy_var", ":g_talk_troop_player_relation"),
		(call_script, "script_dplmc_get_faction_truce_length_with_faction", "$players_kingdom", "$g_faction_selected"),
		(try_begin),
			(gt, reg0, 0),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(assign, reg0, "$diplomacy_var"),
				(display_message, "@{!}DEBUG : pre-treaty diplomacy var: {reg0}"),
			(try_end),
			(try_begin),
				(gt, reg0, 30),
				(val_div, "$diplomacy_var", 5),
				(val_min, "$diplomacy_var", 15),
			(else_try),
				(gt, reg0, 30),
				(val_div, "$diplomacy_var", 4),
				(val_min, "$diplomacy_var", 17),
			(else_try),
				(gt, reg0, 30),
				(val_div, "$diplomacy_var", 3),
				(val_min, "$diplomacy_var", 19),
			(else_try),
				(gt, reg0, 0),
				(val_div, "$diplomacy_var", 2),
				(val_min, "$diplomacy_var", 21),
			(try_end),
		(try_end),
		(store_random_in_range, ":random_in_range_5_25", 5, 25),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg0, ":random_in_range_5_25"),
			(display_message, "@{!}DEBUG : random: {reg0}"),
			(assign, reg0, "$diplomacy_var"),
			(display_message, "@{!}DEBUG : final diplomacy var: {reg0}"),
		(try_end),
		(gt, "$diplomacy_var", ":random_in_range_5_25"),
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 1, 0)
	],
	"Gird your {s0} we are going to war against {s11}.", "close_window",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(call_script, "script_diplomacy_start_war_between_kingdoms", "$players_kingdom", "$g_faction_selected", 1),
		(eq, "$talk_context", 2),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "dplmc_lord_declare_war_decision",
	[],
	"No, I am not convinced. We won't attack {s11}.", "close_window",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -1),
		(eq, "$talk_context", 2),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "lord_talk_ask_something_2",
	[
		(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
		(eq, reg0, 1)
	],
	"I have done my share with your family, I want to be discharged of my pledge.", "dplmc_lord_family_affiliate_end",
	[]],

	[anyone, "dplmc_lord_family_affiliate_end",
	[],
	"What did you say?", "script_dplmc_affiliate_confirm",
	[]],

	[anyone|plyr, "script_dplmc_affiliate_confirm",
	[],
	"I do not want to be related to your house anymore.", "dplmc_lord_family_affiliate_leave",
	[]],

	[anyone|plyr, "script_dplmc_affiliate_confirm",
	[],
	"Oh nothing.", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_family_affiliate_leave",
	[],
	"You dare stand and face me to declaim your disavowal ! Well, your betrayal cannot make up for frankness. You disappoint the confidence my clan have put in you, {playername}. Each will condemn you in all conscience... but since I avouched your phoney allegiance, I will personally report to all the worlds noblemen about your frivolous plot.", "close_window",
	[
		(call_script, "script_dplmc_affiliate_end", 0)
	]],

	[anyone|plyr, "lord_talk_ask_something_2",
	[
		(store_current_hours, ":current_hours"),
		(val_sub, ":current_hours", 144),
		(ge, ":current_hours", "$g_last_affiliate_attempt"),
		(ge, "$g_talk_troop_faction_relation", 0),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(eq, "$players_kingdom", "$g_talk_troop_faction"),
		(eq, "$player_has_homage", 1),
		(lt, "$g_player_affiliated_troop", 1),
		(troop_slot_eq, "$g_talk_troop", 165, 0),
		(call_script, "script_troop_get_player_relation", "$g_talk_troop"),
		(gt, reg0, 0),
		(call_script, "script_troop_get_family_relation_to_troop", "trp_player", "$g_talk_troop"),
		(le, reg0, 0)
	],
	"I have great respect for your lineage, I wish to be affiliated to your family.", "dplmc_lord_family_affiliate",
	[]],

	[anyone, "dplmc_lord_family_affiliate",
	[
		(str_clear, 10),
		(assign, ":value", 0),
		(troop_get_slot, ":g_talk_troop_renown", "$g_talk_troop", slot_troop_renown),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1),
			(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
			(try_begin),
				(ge, ":player_renown", ":g_talk_troop_renown"),
				(str_store_string, 10, "@You have shown great strength on the battlefield. But why should I enlist you within us?"),
				(assign, ":value", 1),
			(try_end),
		(else_try),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 24),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
			(assign, ":value_2", 0),
			(try_for_range, ":party", "p_town_1", "p_salt_mine"),
				(this_or_next|party_slot_eq, ":party", slot_party_type, 3),
				(party_slot_eq, ":party", slot_party_type, 2),
				(party_slot_eq, ":party", slot_town_lord, "trp_player"),
				(assign, ":value_2", 1),
			(try_end),
			(try_begin),
				(eq, ":value_2", 1),
				(str_store_string, 10, "@All of life is about pros and cons. Why would we allow you to be our fellow?"),
				(assign, ":value", 1),
			(try_end),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
			(try_begin),
				(le, "$player_honor", -10),
				(str_store_string, 10, "@I know, people do fear your harshness. Should we though?"),
				(assign, ":value", 1),
			(try_end),
		(else_try),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 25),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 7),
			(try_begin),
				(ge, "$player_honor", 10),
				(str_store_string, 10, "@Indeed, I have heard of your loyalty and valor. But is it enough to join us?"),
				(assign, ":value", 1),
			(try_end),
		(else_try),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 21),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
			(try_begin),
				(ge, "$g_talk_troop_faction_relation", 60),
				(str_store_string, 10, "@I'm glad you want to support us. But, would it be wise for you, to affiliate to our family?"),
				(assign, ":value", 1),
			(try_end),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 3),
			(try_begin),
				(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
				(store_troop_gold, ":troop_gold_player", "trp_player"),
				(val_add, ":troop_gold_household_possessions", ":troop_gold_player"),
				(val_sub, ":troop_gold_household_possessions", "$g_player_debt_to_party_members"),
				(val_mul, ":g_talk_troop_renown", 65),
				(ge, ":troop_gold_household_possessions", ":g_talk_troop_renown"),
				(str_store_string, 10, "@Beside your wealth, how could you possibly serve me and my family?"),
				(assign, ":value", 1),
			(try_end),
		(else_try),
			(try_begin),
				(call_script, "script_troop_get_player_relation", "$g_talk_troop"),
				(gt, reg0, 18),
				(str_store_string, 10, "@My friend, I see your reasoning. But would you really risk straining our friendship by entering into a formal partnership?"),
				(assign, ":value", 1),
			(try_end),
		(try_end),
		(eq, ":value", 1)
	],
	"{!}{s10}", "dplmc_lord_family_affiliate_response",
	[]],

	[anyone, "dplmc_lord_family_affiliate",
	[
		(ge, "$g_talk_troop_relation", 0),
		(assign, reg0, 0),
		(try_begin),
			(ge, "$g_talk_troop_relation", 18),
			(assign, reg0, 1),
		(try_end)
	],
	"I {reg0?like you well enough:have nothing against you}, but I just don't think it would work out, so I will not sponsor you.", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_family_affiliate",
	[],
	"Not a chance. Since I dislike you, I will not sponsor you.", "lord_pretalk",
	[]],

	[anyone|plyr, "dplmc_lord_family_affiliate_response",
	[],
	"Please my lord, let me serve your family.", "dplmc_lord_family_affiliate_persuasion",
	[]],

	[anyone|plyr, "dplmc_lord_family_affiliate_response",
	[],
	"On second thought, I have to reconsider this decision.", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_family_affiliate_persuasion",
	[
		(troop_get_slot, ":g_talk_troop_renown", "$g_talk_troop", slot_troop_renown),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(val_add, ":skill_level_persuasion_player", 1),
		(call_script, "script_troop_get_player_relation", "$g_talk_troop"),
		(assign, ":var_3", 0),
		(try_for_range, ":troop", "trp_knight_1_1", "trp_heroes_end"),
			(neq, ":troop", "$g_talk_troop"),
			(call_script, "script_troop_get_family_relation_to_troop", ":troop", "$g_talk_troop"),
			(gt, reg0, 0),
			(call_script, "script_troop_get_player_relation", "$g_talk_troop"),
			(val_add, ":var_3", reg0),
		(try_end),
		(ge, ":var_3", 0),
		(assign, ":value", 0),
		(try_for_range, ":number", 0, ":skill_level_persuasion_player"),
			(store_random_in_range, ":random_in_range_0_g_talk_troop_renown", 0, ":g_talk_troop_renown"),
			(store_random_in_range, ":random_in_range_0_var_3", 0, ":var_3"),
			(val_add, ":random_in_range_0_var_3", ":number"),
			(try_begin),
				(le, ":random_in_range_0_g_talk_troop_renown", ":random_in_range_0_var_3"),
				(assign, ":value", 1),
			(try_end),
		(try_end),
		(eq, ":value", 1),
		(str_clear, 10),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1),
			(str_store_string, 10, "@Agreed! Your words convice me as much as your blade."),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
			(str_store_string, 10, "@I trust you, my family could use your resourcefulness. Together we will spread our influence all over the world."),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
			(str_store_string, 10, "@May God have mercy on our enemy souls, because we won't!"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 7),
			(str_store_string, 10, "@So be it. We are honored to accept you into our family."),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
			(str_store_string, 10, "@ I will appreciate you as much as a son."),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 3),
			(str_store_string, 10, "@I accept your request. We will support you if you support my family."),
		(else_try),
			(str_store_string, 10, "@Since you have turned out to be a worthy fellow, you should be worthy for our entire family."),
		(try_end)
	],
	"{!}{s10}", "dplmc_lord_family_affiliate_thank",
	[
		(assign, "$g_player_affiliated_troop", "$g_talk_troop"),
		(store_current_hours, ":current_hours"),
		(assign, "$g_player_affiliated_time", ":current_hours"),
		(try_for_range, ":troop", "trp_knight_1_1", "trp_heroes_end"),
			(call_script, "script_dplmc_is_affiliated_family_member", ":troop"),
			(gt, reg0, 0),
			(troop_set_slot, ":troop", 165, 1),
		(try_end)
	]],

	[anyone, "dplmc_lord_family_affiliate_persuasion",
	[],
	"Maybe I have not good enough appraisal from my family about you. Or maybe I just need some time to get used to the idea. Let's talk further about it next week.", "lord_pretalk",
	[
		(store_current_hours, "$g_last_affiliate_attempt")
	]],

	[anyone|plyr, "dplmc_lord_family_affiliate_thank",
	[],
	"I am honored and grateful to be affiliated with your family.", "dplmc_lord_family_affiliate_conclusion",
	[]],

	[anyone, "dplmc_lord_family_affiliate_conclusion",
	[],
	"You have pledged allegiance to our family, now all of my brethen are your brethren. Our fellowship is about knighthood : Never betray your family, always protect it.", "lord_pretalk",
	[
		(try_for_range, ":troop", "trp_knight_1_1", "trp_heroes_end"),
			(neq, ":troop", "$g_talk_troop"),
			(call_script, "script_troop_get_family_relation_to_troop", ":troop", "$g_talk_troop"),
			(gt, reg0, 0),
			(call_script, "script_change_player_relation_with_troop", ":troop", 10),
		(try_end),
		(try_for_range, ":troop_2", "trp_npc1", "trp_knight_1_1_wife"),
			(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":troop_2"),
			(lt, reg0, -10),
			(call_script, "script_change_player_relation_with_troop", ":troop_2", -8),
		(try_end)
	]],

	[anyone|plyr, "spouse_talk",
	[
		(assign, ":var_1", 0),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
			(eq, ":party_town_lord", "trp_player"),
			(val_add, ":var_1", 1),
		(try_end),
		(gt, ":var_1", 1)
	],
	"I want to move our residence.", "dplmc_spouse_move_residence_ask",
	[]],

	[anyone, "dplmc_spouse_move_residence_ask",
	[],
	"To move our residence will require a small refurbishment. In particular, we need a set of tools and two piles of wool cloth in our househould.", "dplmc_spouse_move_residence_tools",
	[]],

	[anyone|plyr, "dplmc_spouse_move_residence_tools",
	[
		(troop_get_inventory_capacity, ":inventory_capacity_household_possessions", "trp_household_possessions"),
		(assign, ":value", 0),
		(try_for_range, ":number", 0, ":inventory_capacity_household_possessions"),
			(troop_get_inventory_slot, ":inventory_slot_household_possessions_number", "trp_household_possessions", ":number"),
			(eq, ":inventory_slot_household_possessions_number", "itm_trade_wool_cloth"),
			(val_add, ":value", 1),
		(try_end),
		(ge, ":value", 2),
		(assign, ":value", 0),
		(try_for_range, ":number", 0, ":inventory_capacity_household_possessions"),
			(troop_get_inventory_slot, ":inventory_slot_household_possessions_number", "trp_household_possessions", ":number"),
			(eq, ":inventory_slot_household_possessions_number", "itm_trade_tools"),
			(val_add, ":value", 1),
		(try_end),
		(ge, ":value", 1)
	],
	"Ok, I think we have all necessary things to establish the residence.", "dplmc_spouse_move_residence_select_ask",
	[]],

	[anyone|plyr, "dplmc_spouse_move_residence_tools",
	[],
	"Well, I guess I have to get the set of tools and the piles of wool first.", "spouse_pretalk",
	[]],

	[anyone, "dplmc_spouse_move_residence_select_ask",
	[],
	"Where do you want to move the residence?", "dplmc_spouse_move_residence_select",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_spouse_move_residence_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_village_1"),
		(troop_get_slot, ":g_talk_troop_cur_center", "$g_talk_troop", slot_troop_cur_center),
		(neq, ":repeat_object", ":g_talk_troop_cur_center"),
		(party_slot_eq, ":repeat_object", slot_town_lord, "trp_player"),
		(str_store_party_name, 6, ":repeat_object")
	],
	"{s6}.", "dplmc_spouse_move_residence_ask_confirm",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_spouse_move_residence_select",
	[],
	"I changed my mind.", "spouse_pretalk",
	[]],

	[anyone, "dplmc_spouse_move_residence_ask_confirm",
	[
		(str_store_party_name, 6, "$diplomacy_var")
	],
	"Are you sure that you want to move your residence to {s6}?", "dplmc_spouse_move_residence_confirm",
	[]],

	[anyone|plyr, "dplmc_spouse_move_residence_confirm",
	[],
	"Yes,  please arrange everything.", "dplmc_spouse_move_residence_moved",
	[
		(troop_remove_items, "trp_household_possessions", "itm_trade_wool_cloth", 2),
		(troop_remove_item, "trp_household_possessions", "itm_trade_tools"),
		(try_begin),
			(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
			(troop_slot_eq, ":player_spouse", slot_troop_occupation, 6),
			(troop_set_slot, "$g_talk_troop", slot_troop_cur_center, "$diplomacy_var"),
		(try_end)
	]],

	[anyone|plyr, "dplmc_spouse_move_residence_confirm",
	[],
	"No.", "spouse_pretalk",
	[]],

	[anyone, "dplmc_spouse_move_residence_moved",
	[],
	"As you wish, I will move the residence to {s6}.", "spouse_pretalk",
	[]],

	[anyone|plyr, "minister_diplomatic_initiative_type_select",
	[
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "$players_kingdom", "$g_faction_selected"),
		(is_between, reg0, -1, 1),
		(gt, "$g_player_chamberlain", 0)
	],
	"Threaten them with war and see what you can squeeze out of them.", "minister_diplomatic_emissary",
	[
		(assign, "$g_initiative_selected", 14)
	]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 14),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific"),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 31, ":g_talk_troop_mission_object"),
		(call_script, "script_npc_decision_checklist_peace_or_war", ":g_talk_troop_mission_object", "fac_player_supporters_faction", "$g_talk_troop"),
		(assign, "$g_mission_result", reg0)
	],
	"Well, {s21}, at last I've found you. I have returned from my mission to {s31}.", "dplmc_companion_threaten_request_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(store_relation, ":relation_g_talk_troop_mission_object_player_supporters_faction", ":g_talk_troop_mission_object", "fac_player_supporters_faction"),
		(val_sub, ":relation_g_talk_troop_mission_object_player_supporters_faction", 3),
		(val_max, ":relation_g_talk_troop_mission_object_player_supporters_faction", 0),
		(set_relation, ":g_talk_troop_mission_object", "fac_player_supporters_faction", ":relation_g_talk_troop_mission_object_player_supporters_faction")
	]],

	[anyone, "dplmc_companion_threaten_request_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(gt, "$g_player_chamberlain", 0),
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "$players_kingdom", ":g_talk_troop_mission_object"),
		(neq, reg0, -2),
		(ge, "$g_mission_result", 2),
		(store_random_in_range, ":random_in_range_1000_8000", 1000, 8000),
		(val_div, ":random_in_range_1000_8000", 100),
		(val_mul, ":random_in_range_1000_8000", 100),
		(assign, reg0, ":random_in_range_1000_8000"),
		(str_store_string, 21, "@{!}{reg0}")
	],
	"They paid {s21} coins and are expecting that you leave them alone. I agreed on a truce of 40 days.", "companion_rejoin_response",
	[
		(call_script, "script_dplmc_pay_into_treasury", reg0),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_diplomacy_start_peace_between_kingdoms", ":g_talk_troop_mission_object", "fac_player_supporters_faction", 1)
	]],

	[anyone, "dplmc_companion_threaten_request_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "$players_kingdom", ":g_talk_troop_mission_object"),
		(neq, reg0, -2),
		(le, "$g_mission_result", 0)
	],
	"They send you a declaration of war.", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_diplomacy_start_war_between_kingdoms", ":g_talk_troop_mission_object", "fac_player_supporters_faction", 1)
	]],

	[anyone, "dplmc_companion_threaten_request_response",
	[],
	"They are not willing to fold facing your threats.", "companion_rejoin_response",
	[]],

	[anyone|plyr, "minister_diplomatic_initiative_type_select",
	[],
	"I want to send a gift.", "dplmc_minister_gift_type",
	[
		(assign, "$g_initiative_selected", 3)
	]],

	[anyone, "dplmc_minister_gift_type",
	[
		(gt, "$g_player_chamberlain", 0),
		(assign, ":value", 0),
		(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
			(main_party_has_troop, ":troop"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"We can send them some excellent horses from the best horse breeder in our sovereignty or we can hand over a fief.", "dplmc_minister_gift_type_select",
	[]],

	[anyone, "dplmc_minister_gift_type",
	[
		(le, "$g_player_chamberlain", 0),
		(assign, ":value", 0),
		(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
			(main_party_has_troop, ":troop"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"We currently only have the option to hand over a fief since we don't have a chamberlain.", "dplmc_minister_gift_type_select",
	[]],

	[anyone|plyr, "dplmc_minister_gift_type_select",
	[
		(gt, "$g_player_chamberlain", 0),
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(try_begin),
			(lt, ":troop_gold_household_possessions", 3000),
			(store_troop_gold, ":troop_gold_household_possessions", "trp_player"),
		(try_end),
		(ge, ":troop_gold_household_possessions", 3000)
	],
	"Send horses for 3000 coins.", "minister_diplomatic_emissary",
	[
		(assign, "$g_initiative_selected", 13),
		(assign, "$diplomacy_var", 3000)
	]],

	[anyone|plyr, "dplmc_minister_gift_type_select",
	[
		(gt, "$g_player_chamberlain", 0),
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(try_begin),
			(lt, ":troop_gold_household_possessions", 6000),
			(store_troop_gold, ":troop_gold_household_possessions", "trp_player"),
		(try_end),
		(ge, ":troop_gold_household_possessions", 6000)
	],
	"Send horses for 6000 coins.", "minister_diplomatic_emissary",
	[
		(assign, "$g_initiative_selected", 13),
		(assign, "$diplomacy_var", 6000)
	]],

	[anyone|plyr, "dplmc_minister_gift_type_select",
	[],
	"Hand over a fief", "dplmc_minister_gift_fief",
	[]],

	[anyone|plyr, "dplmc_minister_gift_type_select",
	[],
	"Never mind.", "minister_pretalk",
	[]],

	[anyone, "dplmc_minister_gift_fief",
	[],
	"Which fief do you want to hand over?", "dplmc_minister_gift_fief_select",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_minister_gift_fief_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(neq, ":repeat_object", "$g_player_court"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", ":faction_of_party_repeat_object"),
		(ge, reg0, 50),
		(str_store_party_name, 1, ":repeat_object")
	],
	"{s1}", "minister_diplomatic_emissary",
	[
		(store_repeat_object, "$diplomacy_var"),
		(assign, "$g_initiative_selected", 12)
	]],

	[anyone, "minister_emissary_dispatch",
	[
		(str_store_troop_name, 11, "$g_emissary_selected"),
		(str_store_faction_name, 12, "$g_faction_selected"),
		(this_or_next|eq, "$g_initiative_selected", 12),
		(eq, "$g_initiative_selected", 13),
		(str_store_string, 14, "str_dplmc_bring_gift")
	],
	"Very well -- I shall send {s11} to the {s12} to {s14}.", "minister_diplomatic_dispatch_confirm",
	[]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_get_slot, ":g_talk_troop_current_mission", "$g_talk_troop", slot_troop_current_mission),
		(this_or_next|eq, ":g_talk_troop_current_mission", 12),
		(eq, ":g_talk_troop_current_mission", 13),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific"),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 31, ":g_talk_troop_mission_object")
	],
	"Well, {s21}, at last I've found you. I have returned from my mission to {s31}. They were agreeably surprised.", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(troop_get_slot, ":g_talk_troop_current_mission", "$g_talk_troop", slot_troop_current_mission),
		(try_begin),
			(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
			(eq, ":g_talk_troop_current_mission", 12),
			(call_script, "script_give_center_to_faction", ":g_talk_troop_162", ":g_talk_troop_mission_object"),
			(assign, ":value", 1),
			(try_begin),
				(is_between, ":g_talk_troop_162", "p_town_1", "p_castle_1"),
				(assign, ":value", 6),
			(else_try),
				(is_between, ":g_talk_troop_162", "p_castle_1", "p_village_1"),
				(assign, ":value", 4),
			(else_try),
				(is_between, ":g_talk_troop_162", "p_village_1", "p_salt_mine"),
				(assign, ":value", 2),
			(try_end),
			(call_script, "script_change_troop_renown", "trp_player", ":value"),
			(val_mul, ":value", 2),
			(call_script, "script_change_player_relation_with_faction", ":g_talk_troop_mission_object", ":value"),
		(else_try),
			(eq, ":g_talk_troop_current_mission", 13),
			(try_begin),
				(le, ":g_talk_troop_162", 3000),
				(call_script, "script_change_player_relation_with_faction", ":g_talk_troop_mission_object", 2),
				(call_script, "script_change_troop_renown", "trp_player", 1),
			(else_try),
				(gt, ":g_talk_troop_162", 3000),
				(call_script, "script_change_player_relation_with_faction", ":g_talk_troop_mission_object", 4),
				(call_script, "script_change_troop_renown", "trp_player", 2),
			(try_end),
		(try_end)
	]],

	[anyone|plyr, "minister_talk",
	[
		(is_between, "$g_player_minister", "trp_npc1", "trp_heroes_end")
	],
	"I wish to exchange a prisoner.", "dplmc_minister_exchange_prisoner_ask",
	[]],

	[anyone, "dplmc_minister_exchange_prisoner_ask",
	[
		(assign, ":value", 0),
		(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
			(main_party_has_troop, ":troop"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"Which prisoner do you want to exchange?", "dplmc_minister_exchange_prisoner_select",
	[]],

	[anyone, "dplmc_minister_exchange_prisoner_ask",
	[],
	"Unfortunately, there is no one to send right now.", "minister_pretalk",
	[]],

	[anyone|repeat_for_troops|plyr, "dplmc_minister_exchange_prisoner_select",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(troop_get_slot, ":repeat_object_prisoner_of_party", ":repeat_object", slot_troop_prisoner_of_party),
		(is_between, ":repeat_object_prisoner_of_party", "p_town_1", "p_village_1"),
		(party_slot_eq, ":repeat_object_prisoner_of_party", slot_town_lord, "trp_player"),
		(str_store_troop_name, 10, ":repeat_object"),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(str_store_faction_name, 11, ":faction_of_troop_repeat_object")
	],
	"{s10} of {s11}", "dplmc_minister_exchange_prisoner_lord_ask",
	[
		(store_repeat_object, "$diplomacy_var"),
		(store_faction_of_troop, "$g_faction_selected", "$diplomacy_var"),
		(assign, "$g_initiative_selected", 15)
	]],

	[anyone|plyr, "dplmc_minister_exchange_prisoner_select",
	[],
	"Nobody.", "minister_pretalk",
	[]],

	[anyone, "dplmc_minister_exchange_prisoner_lord_ask",
	[],
	"Which of our lords do you like to you want to set free?", "dplmc_minister_exchange_prisoner_lord_select",
	[]],

	[anyone|repeat_for_troops|plyr, "dplmc_minister_exchange_prisoner_lord_select",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", ":faction_of_troop_repeat_object"),
		(ge, reg0, 50),
		(troop_get_slot, ":repeat_object_prisoner_of_party", ":repeat_object", slot_troop_prisoner_of_party),
		(is_between, ":repeat_object_prisoner_of_party", "p_town_1", "p_village_1"),
		(store_faction_of_party, ":faction_of_party_repeat_object_prisoner_of_party", ":repeat_object_prisoner_of_party"),
		(eq, ":faction_of_party_repeat_object_prisoner_of_party", "$g_faction_selected"),
		(str_store_troop_name, 10, ":repeat_object")
	],
	"{s10}.", "dplmc_minister_prisoner_emissary",
	[
		(store_repeat_object, "$diplomacy_var2")
	]],

	[anyone|plyr, "dplmc_minister_exchange_prisoner_lord_select",
	[],
	"Nobody.", "minister_pretalk",
	[]],

	[anyone, "dplmc_minister_prisoner_emissary",
	[],
	"Who shall negotiate the exchange?", "minister_emissary_select",
	[]],

	[anyone, "minister_emissary_dispatch",
	[
		(str_store_troop_name, 11, "$g_emissary_selected"),
		(str_store_faction_name, 12, "$g_faction_selected"),
		(eq, "$g_initiative_selected", 15),
		(str_store_troop_name, 10, "$diplomacy_var"),
		(str_store_troop_name, 11, "$diplomacy_var2"),
		(str_store_string, 14, "str_dplmc_exchange_prisoner")
	],
	"Very well -- I shall send {s11} to the {s12} to {s14}.", "minister_diplomatic_dispatch_confirm",
	[]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_get_slot, ":g_talk_troop_current_mission", "$g_talk_troop", slot_troop_current_mission),
		(eq, ":g_talk_troop_current_mission", 15),
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(troop_get_slot, ":g_talk_troop_163", "$g_talk_troop", 163),
		(troop_get_slot, ":g_talk_troop_162_prisoner_of_party", ":g_talk_troop_162", slot_troop_prisoner_of_party),
		(troop_get_slot, ":g_talk_troop_163_prisoner_of_party", ":g_talk_troop_163", slot_troop_prisoner_of_party),
		(is_between, ":g_talk_troop_162_prisoner_of_party", "p_town_1", "p_village_1"),
		(is_between, ":g_talk_troop_163_prisoner_of_party", "p_town_1", "trp_tournament_master"),
		(call_script, "script_calculate_ransom_amount_for_troop", ":g_talk_troop_162"),
		(assign, ":var_6", reg0),
		(call_script, "script_calculate_ransom_amount_for_troop", ":g_talk_troop_163"),
		(assign, ":var_7", reg0),
		(ge, ":var_6", ":var_7"),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific"),
		(str_store_troop_name, 32, ":g_talk_troop_162"),
		(str_store_troop_name, 33, ":g_talk_troop_163"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_162"),
		(assign, reg4, reg0)
	],
	"Well, {s21}, at last I've found you.They agreed to exchange {s32} for {s33}. {s33} has accompanied me back here. Do you want to set {s32} free?", "dplmc_companion_prisoner_exchange_confirm",
	[]],

	[anyone|plyr, "dplmc_companion_prisoner_exchange_confirm",
	[],
	"Yes set {reg4?her:him} free.", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(troop_get_slot, ":g_talk_troop_163", "$g_talk_troop", 163),
		(call_script, "script_remove_troop_from_prison", ":g_talk_troop_162"),
		(call_script, "script_remove_troop_from_prison", ":g_talk_troop_163"),
		(str_store_troop_name, 7, ":g_talk_troop_162"),
		(display_message, "str_dplmc_has_been_set_free"),
		(str_store_troop_name, 7, ":g_talk_troop_163"),
		(display_message, "str_dplmc_has_been_set_free"),
		(call_script, "script_change_player_relation_with_troop", ":g_talk_troop_163", 3),
		(call_script, "script_change_player_relation_with_troop", ":g_talk_troop_162", 1),
		(call_script, "script_change_player_honor", 1),
		(call_script, "script_update_troop_notes", ":g_talk_troop_162"),
		(call_script, "script_update_troop_notes", ":g_talk_troop_163")
	]],

	[anyone|plyr, "dplmc_companion_prisoner_exchange_confirm",
	[],
	"No don't set {reg4?her:him} free.", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(troop_get_slot, ":g_talk_troop_163", "$g_talk_troop", 163),
		(troop_set_slot, ":g_talk_troop_163", slot_troop_prisoner_of_party, -1),
		(str_store_troop_name, 7, ":g_talk_troop_163"),
		(display_message, "str_dplmc_has_been_set_free"),
		(call_script, "script_change_player_relation_with_troop", ":g_talk_troop_163", 1),
		(store_faction_of_troop, ":faction_of_troop_g_talk_troop_162", ":g_talk_troop_162"),
		(call_script, "script_change_player_relation_with_faction", ":faction_of_troop_g_talk_troop_162", -6),
		(call_script, "script_change_player_honor", -2),
		(call_script, "script_update_troop_notes", ":g_talk_troop_163")
	]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_get_slot, ":g_talk_troop_current_mission", "$g_talk_troop", slot_troop_current_mission),
		(eq, ":g_talk_troop_current_mission", 15),
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(troop_get_slot, ":g_talk_troop_163", "$g_talk_troop", 163),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific"),
		(str_store_troop_name, 32, ":g_talk_troop_162"),
		(str_store_troop_name, 33, ":g_talk_troop_163")
	],
	"Well, {s21}, at last I've found you. They didn't agree to exchange {s32} for {s33}.", "companion_rejoin_response",
	[]],

	[anyone|plyr, "minister_talk",
	[
		(is_between, "$g_player_minister", "trp_npc1", "trp_heroes_end"),
		(faction_get_slot, ":player_supporters_faction_leader", "fac_player_supporters_faction", slot_faction_leader),
		(assign, ":value", 0),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|eq, ":value", 1),
		(eq, ":player_supporters_faction_leader", "trp_player")
	],
	"I want to persuade a lord of joining our sovereignty.", "dplmc_minister_persuasion_fief_ask",
	[]],

	[anyone, "dplmc_minister_persuasion_fief_ask",
	[
		(assign, ":value", 0),
		(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
			(main_party_has_troop, ":troop"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"Your emissary can't go with empty hands we have to offer a fief. Which one do you want to offer?", "dplmc_minister_persuasion_fief",
	[]],

	[anyone, "dplmc_minister_persuasion_fief_ask",
	[],
	"Unfortunately, there is no one to send right now.", "minister_pretalk",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_minister_persuasion_fief",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(neq, ":repeat_object", "$g_player_court"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(this_or_next|eq, ":value", ":faction_of_party_repeat_object"),
		(eq, ":faction_of_party_repeat_object", "fac_player_supporters_faction"),
		(neg|party_slot_ge, ":repeat_object", 7, "trp_npc1"),
		(str_store_party_name, 11, ":repeat_object")
	],
	"{s11}", "dplmc_minister_persuade_lord_faction_ask",
	[
		(store_repeat_object, "$diplomacy_var2")
	]],

	[anyone|plyr, "dplmc_minister_persuasion_fief",
	[],
	"Never mind -- there is no fief I can offer.", "minister_pretalk",
	[]],

	[anyone, "dplmc_minister_persuade_lord_faction_ask",
	[],
	"Where does the lord live you want to persuade?", "dplmc_minister_persuade_lord_faction",
	[]],

	[anyone|repeat_for_factions|plyr, "dplmc_minister_persuade_lord_faction",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_kingdom_1", "fac_kingdoms_end"),
		(faction_slot_eq, ":repeat_object", slot_faction_state, 0),
		(str_store_faction_name, 11, ":repeat_object")
	],
	"{s11}", "dplmc_minister_persuade_lord_ask",
	[
		(store_repeat_object, "$g_faction_selected")
	]],

	[anyone|plyr, "dplmc_minister_persuade_lord_faction",
	[],
	"Nowhere.", "minister_pretalk",
	[]],

	[anyone, "dplmc_minister_persuade_lord_ask",
	[],
	"Who shall be convinced?", "dplmc_minister_persuade_lord",
	[]],

	[anyone|repeat_for_troops|plyr, "dplmc_minister_persuade_lord",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(is_between, ":faction_of_troop_repeat_object", "fac_kingdom_1", "fac_kingdoms_end"),
		(faction_get_slot, ":faction_of_troop_repeat_object_leader", ":faction_of_troop_repeat_object", slot_faction_leader),
		(neq, ":faction_of_troop_repeat_object_leader", ":repeat_object"),
		(eq, ":faction_of_troop_repeat_object", "$g_faction_selected"),
		(troop_slot_eq, ":repeat_object", slot_troop_met, 1),
		(neg|troop_slot_ge, ":repeat_object", 51, 100),
		(str_store_troop_name, 11, ":repeat_object")
	],
	"{s11}", "dplmc_minister_persuasion_emissary",
	[
		(store_repeat_object, "$diplomacy_var"),
		(assign, "$g_initiative_selected", 19)
	]],

	[anyone|plyr, "dplmc_minister_persuade_lord",
	[],
	"I can't think of anyone.", "minister_pretalk",
	[]],

	[anyone, "dplmc_minister_persuasion_emissary",
	[],
	"Who shall I send? You should choose one who has skills in persuasion!", "minister_emissary_select",
	[]],

	[anyone, "minister_emissary_dispatch",
	[
		(str_store_troop_name, 11, "$g_emissary_selected"),
		(str_store_faction_name, 12, "$g_faction_selected"),
		(eq, "$g_initiative_selected", 19),
		(str_store_troop_name, 13, "$diplomacy_var"),
		(str_store_party_name, 14, "$diplomacy_var2"),
		(call_script, "script_dplmc_store_troop_is_female", "$diplomacy_var"),
		(assign, reg4, reg0)
	],
	"Very well -- I shall send {s11} to {s12} to persuade {s13} and offer {reg4?her:him} {s14}.", "minister_diplomatic_dispatch_confirm",
	[]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_get_slot, ":g_talk_troop_current_mission", "$g_talk_troop", slot_troop_current_mission),
		(eq, ":g_talk_troop_current_mission", 19),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific"),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 30, ":g_talk_troop_mission_object"),
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(str_store_troop_name, 14, ":g_talk_troop_162"),
		(troop_set_slot, "$g_talk_troop", slot_troop_intrigue_impatience, 500),
		(assign, ":value", 0),
		(str_clear, 40),
		(faction_get_slot, ":player_supporters_faction_leader", "fac_player_supporters_faction", slot_faction_leader),
		(try_begin),
			(neq, ":player_supporters_faction_leader", "trp_player"),
			(str_store_string, 40, "@Your leader is not even a king and I shall join you?"),
			(assign, ":value", 1),
		(try_end),
		(assign, ":value_2", 0),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(this_or_next|party_slot_eq, ":party", slot_town_lord, "$g_talk_troop"),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(assign, ":value_2", 1),
		(try_end),
		(try_begin),
			(eq, ":value_2", 0),
			(str_store_string, 40, "@{s40} I would never join someone who doesn't own a town or castle."),
			(assign, ":value", 1),
		(try_end),
		(assign, ":value_3", 1),
		(try_begin),
			(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 1),
			(this_or_next|lt, "$player_right_to_rule", 10),
			(neg|troop_slot_ge, "trp_player", 7, 400),
			(assign, ":value_3", 0),
		(else_try),
			(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 7),
			(this_or_next|lt, "$player_right_to_rule", 20),
			(neg|troop_slot_ge, "trp_player", 7, 200),
			(assign, ":value_3", 0),
		(else_try),
			(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 3),
			(this_or_next|lt, "$player_right_to_rule", 10),
			(neg|troop_slot_ge, "trp_player", 7, 200),
			(assign, ":value_3", 0),
		(else_try),
			(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 4),
			(neg|troop_slot_ge, "trp_player", 7, 400),
			(assign, ":value_3", 0),
		(else_try),
			(neg|troop_slot_ge, "trp_player", 7, 200),
			(assign, ":value_3", 0),
		(try_end),
		(try_begin),
			(eq, ":value_3", 0),
			(str_store_string, 40, "@{s40} I know too little about your leader."),
			(assign, ":value", 1),
		(try_end),
		(troop_get_slot, ":g_talk_troop_162_temp_decision_seed", ":g_talk_troop_162", slot_troop_temp_decision_seed),
		(store_div, ":value_4", ":g_talk_troop_162_temp_decision_seed", 100),
		(troop_get_slot, ":g_talk_troop_162_lord_reputation_type", ":g_talk_troop_162", slot_lord_reputation_type),
		(try_begin),
			(store_mod, reg0, ":g_talk_troop_162", 2),
			(eq, reg0, 0),
			(val_add, ":value_4", 50),
		(try_end),
		(val_mod, ":value_4", 100),
		(val_add, ":value_4", 1),
		(store_skill_level, ":skill_level_persuasion_g_talk_troop", "skl_persuasion", "$g_talk_troop"),
		(val_mul, ":skill_level_persuasion_g_talk_troop", 7),
		(val_add, ":skill_level_persuasion_g_talk_troop", 15),
		(try_begin),
			(lt, ":skill_level_persuasion_g_talk_troop", ":value_4"),
			(try_begin),
				(ge, "$cheat_mode", 1),
				(assign, reg0, ":value_4"),
				(assign, reg1, ":skill_level_persuasion_g_talk_troop"),
				(display_message, "@{!} Emissary persuasion attempt: skill factor {reg1} versus random number {reg0}"),
			(try_end),
			(store_mul, reg0, ":skill_level_persuasion_g_talk_troop", 2),
			(try_begin),
				(this_or_next|ge, reg0, ":value_4"),
				(eq, ":g_talk_troop_162_lord_reputation_type", 6),
				(neq, ":g_talk_troop_162_lord_reputation_type", 5),
				(neq, ":g_talk_troop_162_lord_reputation_type", 2),
				(str_store_string, 40, "@{s40} I found your messenger unconvincing."),
			(else_try),
				(this_or_next|eq, ":g_talk_troop_162_lord_reputation_type", 5),
				(this_or_next|eq, ":g_talk_troop_162_lord_reputation_type", 2),
				(this_or_next|eq, ":g_talk_troop_162_lord_reputation_type", 3),
				(this_or_next|eq, ":g_talk_troop_162_lord_reputation_type", 24),
				(is_between, ":g_talk_troop_162_lord_reputation_type", 8, 21),
				(str_store_string, 40, "@{s40} Next time I would prefer to talk to someone who doesn't act like a fool."),
			(else_try),
				(str_store_string, 40, "@{s40} Next time I would prefer to talk to someone more versed in courtly manners."),
			(try_end),
			(assign, ":value", 1),
		(try_end),
		(call_script, "script_calculate_troop_political_factors_for_liege", ":g_talk_troop_162", "trp_player"),
		(assign, ":var_14", reg2),
		(assign, ":var_15", reg4),
		(assign, ":var_16", reg10),
		(assign, ":var_17", reg0),
		(store_faction_of_troop, ":faction_of_troop_g_talk_troop_162", ":g_talk_troop_162"),
		(faction_get_slot, ":faction_of_troop_g_talk_troop_162_leader", ":faction_of_troop_g_talk_troop_162", slot_faction_leader),
		(call_script, "script_calculate_troop_political_factors_for_liege", ":g_talk_troop_162", ":faction_of_troop_g_talk_troop_162_leader"),
		(store_sub, ":value_5", ":var_14", reg2),
		(store_sub, ":value_6", ":var_15", reg4),
		(assign, ":var_22", reg0),
		(store_sub, "$pledge_chance", ":var_17", ":var_22"),
		(val_add, "$pledge_chance", 50),
		(val_div, "$pledge_chance", 2),
		(store_mod, ":value_7", ":g_talk_troop_162_temp_decision_seed", 100),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg2, ":var_14"),
			(display_message, "@{!}DEBUG - result for security: {reg2} > 10"),
			(assign, reg2, ":var_15"),
			(display_message, "@{!}DEBUG - result for political: {reg2} > 0"),
			(assign, reg2, ":var_16"),
			(display_message, "@{!}DEBUG - change penalty: {reg2} < 20"),
			(assign, reg2, ":value_7"),
			(display_message, "@{!}DEBUG - random: {reg2}"),
			(assign, reg2, "$pledge_chance"),
			(display_message, "@{!}DEBUG - > pledge chance: {reg2}"),
			(assign, reg2, ":value_5"),
			(display_message, "@{!}DEBUG - result for security comparative: {reg2} > 0"),
			(assign, reg2, ":value_6"),
			(display_message, "@{!}DEBUG - result for political comparative: {reg2} > 0"),
		(try_end),
		(try_begin),
			(le, ":value_7", "$pledge_chance"),
			(assign, ":value", 1),
			(str_store_string, 40, "@{s40} I rather stay with my current king."),
		(try_end),
		(try_begin),
			(eq, ":value", 0),
			(try_begin),
				(lt, ":var_15", 0),
				(assign, ":value", 1),
				(try_begin),
					(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 7),
					(str_store_string, 31, "str_i_worry_about_those_with_whom_you_have_chosen_to_surround_yourself"),
				(else_try),
					(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 1),
					(str_store_string, 31, "str_there_are_some_outstanding_matters_between_me_and_some_of_your_vassals_"),
					(try_begin),
						(assign, reg41, ":var_15"),
						(ge, "$cheat_mode", 1),
						(display_message, "str_result_for_political_=_reg41"),
					(try_end),
				(else_try),
					(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 2),
					(str_store_string, 31, "str_my_liege_has_his_faults_but_i_dont_care_for_your_toadies"),
				(else_try),
					(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 6),
					(str_store_string, 31, "str_i_think_youre_a_good_man_but_im_worried_that_you_might_be_pushed_in_the_wrong_direction_by_some_of_those_around_you"),
				(else_try),
					(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 3),
					(str_store_string, 31, "str_i_am_loathe_to_fight_alongside_you_so_long_as_you_take_under_your_wing_varlots_and_base_men"),
				(else_try),
					(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 4),
					(str_store_string, 31, "str_ill_be_honest__with_some_of_those_who_follow_you_i_think_id_be_more_comfortable_fighting_against_you_than_with_you"),
				(else_try),
					(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 5),
					(str_store_string, 31, "str_i_say_that_you_can_judge_a_man_by_the_company_he_keeps_and_you_have_surrounded_yourself_with_vipers_and_vultures"),
				(else_try),
					(troop_slot_ge, ":g_talk_troop_162", 52, 8),
					(str_store_string, 31, "str_you_know_that_i_have_always_had_a_problem_with_some_of_our_companions"),
				(try_end),
			(else_try),
				(lt, ":value_6", 0),
				(assign, ":value", 1),
				(str_store_string, 31, "str_politically_i_would_be_a_better_position_in_the_court_of_my_current_liege_than_in_yours"),
			(else_try),
				(str_store_string, 31, "str_i_am_more_comfortable_with_you_and_your_companions_than_with_my_current_liege"),
			(try_end),
			(try_begin),
				(lt, ":var_14", 10),
				(assign, ":value", 1),
				(try_begin),
					(this_or_next|troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 4),
					(troop_slot_ge, ":g_talk_troop_162", 52, 8),
					(str_store_string, 32, "str_militarily_youre_in_no_position_to_protect_me_should_i_be_attacked_id_be_reluctant_to_join_you_until_you_could"),
				(else_try),
					(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 7),
					(str_store_string, 32, "str_militarily_when_i_consider_the_lay_of_the_land_i_realize_that_to_pledge_myself_to_you_now_would_endanger_my_faithful_retainers_and_my_family"),
				(else_try),
					(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 1),
					(str_store_string, 32, "str_militarily_youre_in_no_position_to_come_to_my_help_if_someone_attacked_me_i_dont_mind_a_good_fight_but_i_like_to_have_a_chance_of_winning"),
				(else_try),
					(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 6),
					(str_store_string, 32, "str_militarily_youre_in_no_position_to_come_to_my_help_if_someone_attacked_me_i_dont_mind_a_good_fight_but_i_like_to_have_a_chance_of_winning"),
				(else_try),
					(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 5),
					(str_store_string, 32, "str_militarily_you_would_have_me_join_you_only_to_find_myself_isolated_amid_a_sea_of_enemies"),
				(else_try),
					(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 3),
					(str_store_string, 32, "str_militarily_you_would_have_me_join_you_only_to_find_myself_isolated_amid_a_sea_of_enemies"),
				(else_try),
					(troop_slot_eq, ":g_talk_troop_162", slot_lord_reputation_type, 2),
					(str_store_string, 32, "str_militarily_youre_in_no_position_to_come_to_my_help_if_someone_attacked_me_youd_let_me_be_cut_down_like_a_dog_id_bet"),
				(try_end),
			(else_try),
				(lt, ":value_5", 0),
				(assign, ":value", 1),
				(str_store_string, 32, "str_militarily_i_wouldnt_be_any_safer_if_i_joined_you"),
			(else_try),
				(str_store_string, 32, "str_militarily_i_might_be_safer_if_i_joined_you"),
			(try_end),
			(try_begin),
				(gt, ":var_16", 40),
				(assign, ":value", 1),
				(str_store_string, 34, "str_finally_there_is_a_cost_to_ones_reputation_to_change_sides_in_this_case_the_cost_would_be_very_high"),
			(else_try),
				(gt, ":var_16", 20),
				(assign, ":value", 1),
				(str_store_string, 34, "str_finally_there_is_a_cost_to_ones_reputation_to_change_sides_in_this_case_the_cost_would_be_significant"),
			(else_try),
				(str_store_string, 34, "str_finally_there_is_a_cost_to_ones_reputation_to_change_sides_in_this_case_however_many_men_would_understand"),
			(else_try),
				(str_store_string, 40, "@{s31} {s32} {s34}"),
			(try_end),
			(eq, ":value", 1),
			(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_162")
	],
	"Well, {s21}, at last I've found you. I have returned from my persuasion mission to {s30}. {s14} doesn't want to join you. {reg0?She:He} said: {s40}", "companion_rejoin_response",
	[]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_get_slot, ":g_talk_troop_current_mission", "$g_talk_troop", slot_troop_current_mission),
		(eq, ":g_talk_troop_current_mission", 19),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific"),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 31, ":g_talk_troop_mission_object"),
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(str_store_troop_name, 14, ":g_talk_troop_162")
	],
	"Well, {s21}, at last I've found you. I have returned from my persuasion mission to {s31}. {s14} agreed to join you.", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(call_script, "script_change_troop_faction", ":g_talk_troop_162", "$players_kingdom"),
		(store_faction_of_troop, ":faction_of_troop_g_talk_troop_162", ":g_talk_troop_162"),
		(faction_get_slot, ":faction_of_troop_g_talk_troop_162_leader", ":faction_of_troop_g_talk_troop_162", slot_faction_leader),
		(try_begin),
			(store_relation, ":relation_players_kingdom_faction_of_troop_g_talk_troop_162", "$players_kingdom", ":faction_of_troop_g_talk_troop_162"),
			(ge, ":relation_players_kingdom_faction_of_troop_g_talk_troop_162", 0),
			(call_script, "script_add_log_entry", 78, "trp_player", -1, ":g_talk_troop_162", ":faction_of_troop_g_talk_troop_162"),
			(store_add, ":value", "$players_kingdom", 130),
			(val_sub, ":value", "fac_player_supporters_faction"),
			(faction_set_slot, ":faction_of_troop_g_talk_troop_162", ":value", 30),
			(faction_get_slot, ":faction_of_troop_g_talk_troop_162_leader", ":faction_of_troop_g_talk_troop_162", slot_faction_leader),
			(call_script, "script_troop_change_relation_with_troop", "trp_player", ":faction_of_troop_g_talk_troop_162_leader", -3),
		(try_end),
		(call_script, "script_change_player_right_to_rule", 2)
	]],

	[anyone|plyr, "minister_talk",
	[
		(is_between, "$g_player_minister", "trp_npc1", "trp_heroes_end")
	],
	"I wish to spy out another sovereignty.", "dplmc_minister_spy_kingdoms",
	[]],

	[anyone, "dplmc_minister_spy_kingdoms",
	[
		(assign, ":value", 0),
		(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
			(main_party_has_troop, ":troop"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"To whom do you wish to send this spy?", "dplmc_minister_spy_kingdoms_select",
	[]],

	[anyone, "dplmc_minister_spy_kingdoms",
	[],
	"Unfortunately, there is no one to send right now.", "minister_pretalk",
	[]],

	[anyone|repeat_for_factions|plyr, "dplmc_minister_spy_kingdoms_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_kingdom_1", "fac_kingdoms_end"),
		(faction_slot_eq, ":repeat_object", slot_faction_state, 0),
		(faction_get_slot, ":repeat_object_leader", ":repeat_object", slot_faction_leader),
		(str_store_troop_name, 10, ":repeat_object_leader"),
		(str_store_faction_name, 11, ":repeat_object"),
		(str_clear, 14)
	],
	"{s11}{s14}", "dplmc_minister_spy_emissary",
	[
		(store_repeat_object, "$g_faction_selected"),
		(assign, "$g_initiative_selected", 11)
	]],

	[anyone, "dplmc_minister_spy_emissary",
	[],
	"Who shall be your spy? You should choose one whom you trust - and who has skills in spotting!", "minister_emissary_select",
	[]],

	[anyone, "minister_emissary_dispatch",
	[
		(str_store_troop_name, 11, "$g_emissary_selected"),
		(str_store_faction_name, 12, "$g_faction_selected"),
		(eq, "$g_initiative_selected", 11),
		(str_store_string, 14, "str_dplmc_gather_information"),
		(store_skill_level, ":skill_level_spotting_g_emissary_selected", "skl_spotting", "$g_emissary_selected"),
		(val_mul, ":skill_level_spotting_g_emissary_selected", 5),
		(val_add, ":skill_level_spotting_g_emissary_selected", 65),
		(val_min, ":skill_level_spotting_g_emissary_selected", 95),
		(store_random_in_range, ":random_in_range_0_100", 0, 100),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg0, ":skill_level_spotting_g_emissary_selected"),
			(display_message, "@{!}DEBUG : emissary spotting: {reg0}"),
			(assign, reg0, ":random_in_range_0_100"),
			(display_message, "@{!}DEBUG : random: {reg0}"),
		(try_end),
		(try_begin),
			(ge, ":skill_level_spotting_g_emissary_selected", ":random_in_range_0_100"),
			(assign, "$diplomacy_var", 0),
		(else_try),
			(lt, ":skill_level_spotting_g_emissary_selected", ":random_in_range_0_100"),
			(assign, "$diplomacy_var", 1),
		(try_end)
	],
	"Very well -- I shall send {s11} to the {s12} to {s14}.", "minister_diplomatic_dispatch_confirm",
	[]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_get_slot, ":g_talk_troop_current_mission", "$g_talk_troop", slot_troop_current_mission),
		(eq, ":g_talk_troop_current_mission", 11),
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(this_or_next|eq, ":g_talk_troop_162", 0),
		(faction_slot_eq, ":g_talk_troop_mission_object", slot_faction_state, 1),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific"),
		(str_store_faction_name, 31, ":g_talk_troop_mission_object")
	],
	"Well, {s21}, at last I've found you. I have returned from my reconnaissance mission to {s31}. About which location do you need information?", "dplmc_companion_spy_request_select_center",
	[]],

	[trp_mercenary_infantry_1, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(troop_get_slot, "$g_talk_troop", "$g_talk_troop", slot_troop_mission_object),
		(troop_get_slot, ":g_talk_troop_current_mission", "$g_talk_troop", slot_troop_current_mission),
		(eq, ":g_talk_troop_current_mission", 11),
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(gt, ":g_talk_troop_162", 0),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 31, ":g_talk_troop_mission_object"),
		(str_store_troop_name, 11, "$g_talk_troop")
	],
	"My, lord. I am coming back from the reconnaissance mission to {s31}. I am sorry, we were caught  off  guard and they got {s11}. I barely escaped.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_current_mission, 0),
		(troop_set_slot, "$g_talk_troop", slot_troop_days_on_mission, 0),
		(troop_set_slot, "$g_talk_troop", slot_troop_occupation, 0),
		(assign, "$npc_to_rejoin_party", 0),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_change_player_relation_with_faction", ":g_talk_troop_mission_object", -3),
		(call_script, "script_change_player_honor", -2),
		(call_script, "script_change_troop_renown", "trp_player", -5),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(call_script, "script_lord_get_home_center", ":g_talk_troop_mission_object_leader"),
		(try_begin),
			(neq, reg0, -1),
			(assign, ":value", reg0),
		(else_try),
			(try_for_range, ":party", "p_town_1", "p_village_1"),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(eq, ":g_talk_troop_mission_object", ":faction_of_party_party"),
				(assign, ":value", ":party"),
			(try_end),
		(try_end),
		(try_begin),
			(is_between, ":value", "p_town_1", "p_village_1"),
			(party_add_prisoners, ":value", "$g_talk_troop", 1),
		(try_end)
	]],

	[anyone|repeat_for_parties|plyr, "dplmc_companion_spy_request_select_center",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(eq, ":faction_of_party_repeat_object", ":g_talk_troop_mission_object"),
		(str_store_party_name, 60, ":repeat_object")
	],
	"{s60}", "dplmc_companion_spy_request_center_selected",
	[
		(store_repeat_object, "$spy_center_selected")
	]],

	[anyone, "dplmc_companion_spy_request_center_selected",
	[
		(call_script, "script_dplmc_party_calculate_strength", "$spy_center_selected", 0),
		(try_begin),
			(le, reg0, 1),
			(str_store_string, 31, "str_dplmc_nearly_no"),
		(else_try),
			(is_between, reg0, 1, 100),
			(str_store_string, 31, "str_dplmc_less_than_one_hundred"),
		(else_try),
			(is_between, reg0, 101, 200),
			(str_store_string, 31, "str_dplmc_more_than_one_hundred"),
		(else_try),
			(is_between, reg0, 201, 500),
			(str_store_string, 31, "str_dplmc_more_than_two_hundred"),
		(else_try),
			(ge, reg0, 500),
			(str_store_string, 31, "str_dplmc_more_than_five_hundred"),
		(try_end),
		(call_script, "script_dplmc_describe_prosperity_to_s4", "$spy_center_selected"),
		(party_get_slot, ":spy_center_selected_center_player_relation", "$spy_center_selected", slot_center_player_relation),
		(call_script, "script_describe_center_relation_to_s3", ":spy_center_selected_center_player_relation")
	],
	"{s4} {s3} and there are {s31} troops around.", "dplmc_companion_spy_request_select_newcenter",
	[]],

	[anyone, "dplmc_companion_spy_request_select_newcenter",
	[],
	"Do you need information about another location?", "dplmc_companion_spy_request_select_center",
	[]],

	[anyone|plyr, "dplmc_companion_spy_request_select_center",
	[],
	"Never mind.", "companion_rejoin_response",
	[]],

	[anyone|plyr, "minister_diplomatic_initiative_type_select",
	[
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "fac_player_supporters_faction", "$g_faction_selected"),
		(eq, reg0, 1),
		(assign, ":value", 0),
		(try_begin),
			(store_add, ":value_2", "$g_faction_selected", 120),
			(val_sub, ":value_2", "fac_player_supporters_faction"),
			(faction_get_slot, ":player_supporters_faction_value_2", "fac_player_supporters_faction", ":value_2"),
			(is_between, ":player_supporters_faction_value_2", 20, 50),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1),
		(faction_slot_eq, "$g_faction_selected", slot_faction_recognized_player, 1),
		(faction_slot_eq, "$g_faction_selected", slot_faction_state, 0),
		(faction_get_slot, ":g_faction_selected_leader", "$g_faction_selected", slot_faction_leader),
		(str_store_troop_name, 10, ":g_faction_selected_leader"),
		(str_store_faction_name, 11, "$g_faction_selected"),
		(str_clear, 14),
		(call_script, "script_dplmc_store_troop_is_female", ":g_faction_selected_leader")
	],
	"Tell {s10} that I want to conclude a defensive pact with {reg0?her:him}.", "minister_diplomatic_emissary",
	[
		(assign, "$g_initiative_selected", 16)
	]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_get_slot, ":g_talk_troop_current_mission", "$g_talk_troop", slot_troop_current_mission),
		(eq, ":g_talk_troop_current_mission", 10),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific"),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 31, ":g_talk_troop_mission_object"),
		(call_script, "script_npc_decision_checklist_peace_or_war", ":g_talk_troop_mission_object", "fac_player_supporters_faction", "$g_talk_troop"),
		(assign, "$g_mission_result_with_player", reg0)
	],
	"Well, {s21}, at last I've found you. I have returned from my mission to {s31}. ", "dplmc_companion_alliance_request_response",
	[]],

	[anyone, "dplmc_companion_alliance_request_response",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 10),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "fac_player_supporters_faction", ":g_talk_troop_mission_object"),
		(ge, reg0, 0),
		(eq, "$g_concession_demanded", 0),
		(ge, "$g_mission_result_with_player", 1),
		(store_relation, ":relation_player_supporters_faction_g_talk_troop_mission_object", "fac_player_supporters_faction", ":g_talk_troop_mission_object"),
		(store_random_in_range, ":random_in_range_20_95", 20, 95),
		(ge, ":relation_player_supporters_faction_g_talk_troop_mission_object", ":random_in_range_20_95"),
		(store_random_in_range, ":random_in_range_20_95", 5, 75),
		(ge, "$player_honor", ":random_in_range_20_95"),
		(store_random_in_range, ":random_in_range_20_95", 5, 50),
		(ge, "$player_right_to_rule", ":random_in_range_20_95"),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 4, ":g_talk_troop_mission_object_leader")
	],
	"{s4} is willing to form an alliance with you.", "dplmc_companion_alliance_confirm",
	[]],

	[anyone|plyr, "dplmc_companion_alliance_confirm",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object")
	],
	"Very well - let this alliance with {s4} be concluded.", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_dplmc_start_alliance_between_kingdoms", ":g_talk_troop_mission_object", "$players_kingdom", 1),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object")
	]],

	[anyone|plyr, "dplmc_companion_alliance_confirm",
	[],
	"On second thought, perhaps this is not now in our interests.", "companion_rejoin_response",
	[]],

	[anyone, "dplmc_companion_alliance_request_response",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 10),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 4, ":g_talk_troop_mission_object_leader")
	],
	"{s4} is not willing to form an alliance with you.", "companion_rejoin_response",
	[]],

	[anyone|plyr, "minister_diplomatic_initiative_type_select",
	[
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "fac_player_supporters_faction", "$g_faction_selected"),
		(eq, reg0, 1),
		(assign, ":value", 0),
		(try_begin),
			(store_add, ":value_2", "$g_faction_selected", 120),
			(val_sub, ":value_2", "fac_player_supporters_faction"),
			(faction_get_slot, ":player_supporters_faction_value_2", "fac_player_supporters_faction", ":value_2"),
			(is_between, ":player_supporters_faction_value_2", 0, 30),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1),
		(faction_slot_eq, "$g_faction_selected", slot_faction_recognized_player, 1),
		(faction_slot_eq, "$g_faction_selected", slot_faction_state, 0),
		(faction_get_slot, ":g_faction_selected_leader", "$g_faction_selected", slot_faction_leader),
		(str_store_troop_name, 10, ":g_faction_selected_leader"),
		(str_store_faction_name, 11, "$g_faction_selected"),
		(str_clear, 14),
		(call_script, "script_dplmc_store_troop_is_female", ":g_faction_selected_leader")
	],
	"Tell {s10} that I want to conclude a defensive pact with {reg0?her:him}.", "minister_diplomatic_emissary",
	[
		(assign, "$g_initiative_selected", 16)
	]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_get_slot, ":g_talk_troop_current_mission", "$g_talk_troop", slot_troop_current_mission),
		(eq, ":g_talk_troop_current_mission", 16),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific"),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 31, ":g_talk_troop_mission_object"),
		(call_script, "script_npc_decision_checklist_peace_or_war", ":g_talk_troop_mission_object", "fac_player_supporters_faction", "$g_talk_troop"),
		(assign, "$g_mission_result_with_player", reg0)
	],
	"Well, {s21}, at last I've found you. I have returned from my mission to {s31}. ", "dplmc_companion_defensive_request_response",
	[]],

	[anyone, "dplmc_companion_defensive_request_response",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 16),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "fac_player_supporters_faction", ":g_talk_troop_mission_object"),
		(ge, reg0, 0),
		(eq, "$g_concession_demanded", 0),
		(ge, "$g_mission_result_with_player", 1),
		(store_relation, ":relation_player_supporters_faction_g_talk_troop_mission_object", "fac_player_supporters_faction", ":g_talk_troop_mission_object"),
		(store_random_in_range, ":random_in_range_15_70", 15, 70),
		(ge, ":relation_player_supporters_faction_g_talk_troop_mission_object", ":random_in_range_15_70"),
		(store_random_in_range, ":random_in_range_15_70", 0, 50),
		(ge, "$player_honor", ":random_in_range_15_70"),
		(store_random_in_range, ":random_in_range_15_70", 5, 30),
		(ge, "$player_right_to_rule", ":random_in_range_15_70"),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 4, ":g_talk_troop_mission_object_leader")
	],
	"{s4} is willing to form a defensive pact with you.", "dplmc_companion_defensive_confirm",
	[]],

	[anyone|plyr, "dplmc_companion_defensive_confirm",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object")
	],
	"Very well - let this defensive pact with {s4} be concluded.", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_dplmc_start_defensive_between_kingdoms", ":g_talk_troop_mission_object", "$players_kingdom", 1),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object")
	]],

	[anyone|plyr, "dplmc_companion_defensive_confirm",
	[],
	"On second thought, perhaps this is not now in our interests.", "companion_rejoin_response",
	[]],

	[anyone, "dplmc_companion_defensive_request_response",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 16),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 4, ":g_talk_troop_mission_object_leader")
	],
	"{s4} is not willing to conclude a defensive pact with you.", "companion_rejoin_response",
	[]],

	[anyone|plyr, "minister_diplomatic_initiative_type_select",
	[
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "fac_player_supporters_faction", "$g_faction_selected"),
		(ge, reg0, 0),
		(assign, ":value", 0),
		(try_begin),
			(store_add, ":value_2", "$g_faction_selected", 120),
			(val_sub, ":value_2", "fac_player_supporters_faction"),
			(faction_get_slot, ":player_supporters_faction_value_2", "fac_player_supporters_faction", ":value_2"),
			(lt, ":player_supporters_faction_value_2", 10),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1),
		(faction_slot_eq, "$g_faction_selected", slot_faction_recognized_player, 1),
		(faction_slot_eq, "$g_faction_selected", slot_faction_state, 0),
		(faction_get_slot, ":g_faction_selected_leader", "$g_faction_selected", slot_faction_leader),
		(str_store_troop_name, 10, ":g_faction_selected_leader"),
		(str_store_faction_name, 11, "$g_faction_selected"),
		(str_clear, 14),
		(call_script, "script_dplmc_store_troop_is_female", ":g_faction_selected_leader")
	],
	"Tell {s10} that I want to sign a trade agreement with {reg0?her:him}.", "minister_diplomatic_emissary",
	[
		(assign, "$g_initiative_selected", 17)
	]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_get_slot, ":g_talk_troop_current_mission", "$g_talk_troop", slot_troop_current_mission),
		(eq, ":g_talk_troop_current_mission", 17),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific"),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 31, ":g_talk_troop_mission_object"),
		(call_script, "script_npc_decision_checklist_peace_or_war", ":g_talk_troop_mission_object", "fac_player_supporters_faction", "$g_talk_troop"),
		(assign, "$g_mission_result_with_player", reg0)
	],
	"Well, {s21}, at last I've found you. I have returned from my mission to {s31}. ", "dplmc_companion_trade_request_response",
	[]],

	[anyone, "dplmc_companion_trade_request_response",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 17),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "fac_player_supporters_faction", ":g_talk_troop_mission_object"),
		(ge, reg0, 0),
		(eq, "$g_concession_demanded", 0),
		(ge, "$g_mission_result_with_player", 1),
		(store_relation, ":relation_player_supporters_faction_g_talk_troop_mission_object", "fac_player_supporters_faction", ":g_talk_troop_mission_object"),
		(store_random_in_range, ":random_in_range_10_50", 10, 50),
		(ge, ":relation_player_supporters_faction_g_talk_troop_mission_object", ":random_in_range_10_50"),
		(store_random_in_range, ":random_in_range_10_50", 0, 25),
		(ge, "$player_honor", ":random_in_range_10_50"),
		(store_random_in_range, ":random_in_range_10_50", 5, 15),
		(ge, "$player_right_to_rule", ":random_in_range_10_50"),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 4, ":g_talk_troop_mission_object_leader")
	],
	"{s4} is willing to sign a trade agreement with you.", "dplmc_companion_trade_confirm",
	[]],

	[anyone|plyr, "dplmc_companion_trade_confirm",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object")
	],
	"Very well - let's sign the trade agreement with {s4}.", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_dplmc_start_trade_between_kingdoms", ":g_talk_troop_mission_object", "$players_kingdom", 1),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object")
	]],

	[anyone|plyr, "dplmc_companion_trade_confirm",
	[],
	"On second thought, perhaps this is not now in our interests.", "companion_rejoin_response",
	[]],

	[anyone, "dplmc_companion_trade_request_response",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 17),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 4, ":g_talk_troop_mission_object_leader")
	],
	"{s4} is not willing to sign a trade agreement.", "companion_rejoin_response",
	[]],

	[anyone|plyr, "minister_diplomatic_initiative_type_select",
	[
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "fac_player_supporters_faction", "$g_faction_selected"),
		(eq, reg0, 0),
		(faction_slot_eq, "$g_faction_selected", slot_faction_state, 0),
		(faction_get_slot, ":g_faction_selected_leader", "$g_faction_selected", slot_faction_leader),
		(str_store_troop_name, 10, ":g_faction_selected_leader"),
		(str_store_faction_name, 11, "$g_faction_selected"),
		(str_clear, 14),
		(call_script, "script_dplmc_store_troop_is_female", ":g_faction_selected_leader")
	],
	"Tell {s10} that I want to conclude a non-aggression treaty with {reg0?her:him}.", "minister_diplomatic_emissary",
	[
		(assign, "$g_initiative_selected", 18)
	]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_get_slot, ":g_talk_troop_current_mission", "$g_talk_troop", slot_troop_current_mission),
		(eq, ":g_talk_troop_current_mission", 18),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific"),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 31, ":g_talk_troop_mission_object"),
		(call_script, "script_npc_decision_checklist_peace_or_war", ":g_talk_troop_mission_object", "fac_player_supporters_faction", "$g_talk_troop"),
		(assign, "$g_mission_result_with_player", reg0)
	],
	"Well, {s21}, at last I've found you. I have returned from my mission to {s31}. ", "dplmc_companion_nonaggression_request_response",
	[]],

	[anyone, "dplmc_companion_nonaggression_request_response",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 18),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "fac_player_supporters_faction", ":g_talk_troop_mission_object"),
		(ge, reg0, 0),
		(eq, "$g_concession_demanded", 0),
		(ge, "$g_mission_result_with_player", 1),
		(store_relation, ":relation_player_supporters_faction_g_talk_troop_mission_object", "fac_player_supporters_faction", ":g_talk_troop_mission_object"),
		(store_random_in_range, ":random_in_range_5_25", 5, 25),
		(ge, ":relation_player_supporters_faction_g_talk_troop_mission_object", ":random_in_range_5_25"),
		(store_random_in_range, ":random_in_range_5_25", 0, 20),
		(ge, "$player_honor", ":random_in_range_5_25"),
		(store_random_in_range, ":random_in_range_5_25", 5, 10),
		(ge, "$player_right_to_rule", ":random_in_range_5_25"),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 4, ":g_talk_troop_mission_object_leader")
	],
	"{s4} is willing to conclude a non-aggression treaty with you.", "dplmc_companion_nonaggression_confirm",
	[]],

	[anyone|plyr, "dplmc_companion_nonaggression_confirm",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object")
	],
	"Very well - let this non-aggression treaty with {s4} be concluded.", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_dplmc_start_nonaggression_between_kingdoms", ":g_talk_troop_mission_object", "$players_kingdom", 1),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object")
	]],

	[anyone|plyr, "dplmc_companion_nonaggression_confirm",
	[],
	"On second thought, perhaps this is not now in our interests.", "companion_rejoin_response",
	[]],

	[anyone, "dplmc_companion_nonaggression_request_response",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 18),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 4, ":g_talk_troop_mission_object_leader")
	],
	"{s4} is not willing to conclude a non-aggression treaty with you.", "companion_rejoin_response",
	[]],

	[anyone|repeat_for_factions|plyr, "minister_diplomatic_initiative_type_select",
	[
		(assign, ":value", 1),
		(try_begin),
			(eq, reg0, 2),
			(store_add, ":value_2", "$g_faction_selected", 120),
			(val_sub, ":value_2", "fac_player_supporters_faction"),
			(faction_get_slot, ":player_supporters_faction_value_2", "fac_player_supporters_faction", ":value_2"),
			(gt, ":player_supporters_faction_value_2", 0),
			(assign, ":value", 0),
		(try_end),
		(eq, ":value", 1),
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(neq, ":repeat_object", "fac_player_supporters_faction"),
		(neq, ":repeat_object", "$g_faction_selected"),
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "fac_player_supporters_faction", ":repeat_object"),
		(eq, reg0, -2),
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "fac_player_supporters_faction", "$g_faction_selected"),
		(ge, reg0, 0),
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "$g_faction_selected", ":repeat_object"),
		(is_between, reg0, -1, 1),
		(faction_slot_eq, "$g_faction_selected", slot_faction_recognized_player, 1),
		(faction_slot_eq, ":repeat_object", slot_faction_state, 0),
		(faction_get_slot, ":repeat_object_leader", ":repeat_object", slot_faction_leader),
		(str_store_troop_name, 10, ":repeat_object_leader"),
		(str_store_faction_name, 11, ":repeat_object"),
		(str_clear, 14),
		(call_script, "script_dplmc_store_troop_is_female", ":repeat_object_leader")
	],
	"That I want {reg0?her:him} to help me and attack {s11}{s14}.", "minister_diplomatic_emissary",
	[
		(assign, "$g_initiative_selected", 9),
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_get_slot, ":g_talk_troop_current_mission", "$g_talk_troop", slot_troop_current_mission),
		(eq, ":g_talk_troop_current_mission", 9),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific"),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 31, ":g_talk_troop_mission_object"),
		(call_script, "script_npc_decision_checklist_peace_or_war", ":g_talk_troop_mission_object", "fac_player_supporters_faction", "$g_talk_troop"),
		(assign, "$g_mission_result_with_player", reg0),
		(call_script, "script_npc_decision_checklist_peace_or_war", ":g_talk_troop_mission_object", "$diplomacy_var", -1),
		(assign, "$g_mission_result_with_target", reg0),
		(call_script, "script_dplmc_get_faction_truce_length_with_faction", ":g_talk_troop_mission_object", "$diplomacy_var"),
		(try_begin),
			(gt, reg0, 30),
			(val_max, "$g_mission_result_with_target", 3),
		(else_try),
			(gt, reg0, 0),
			(store_random_in_range, reg0, 0, 2),
			(try_begin),
				(eq, reg0, 1),
				(val_max, "$g_mission_result_with_target", 3),
			(else_try),
				(val_add, "$g_mission_result_with_target", 1),
				(val_max, "$g_mission_result_with_target", 0),
			(try_end),
		(try_end)
	],
	"Well, {s21}, at last I've found you. I have returned from my mission to {s31}. ", "dplmc_companion_war_request_response",
	[]],

	[anyone, "dplmc_companion_war_request_response",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 9),
		(lt, "$g_mission_result_with_target", 0),
		(ge, "$g_mission_result_with_player", 2),
		(eq, "$g_concession_demanded", 0),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "fac_player_supporters_faction", ":g_talk_troop_mission_object"),
		(ge, reg0, 0),
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(store_relation, ":relation_g_talk_troop_162_players_kingdom", ":g_talk_troop_162", "$players_kingdom"),
		(call_script, "script_dplmc_get_faction_truce_length_with_faction", ":g_talk_troop_mission_object", "$players_kingdom"),
		(this_or_next|ge, reg0, 30),
		(lt, ":relation_g_talk_troop_162_players_kingdom", 0),
		(str_store_faction_name, 31, ":g_talk_troop_162"),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 4, ":g_talk_troop_mission_object_leader")
	],
	"{s4} is willing to start a war with {s31}.", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(call_script, "script_diplomacy_start_war_between_kingdoms", ":g_talk_troop_mission_object", ":g_talk_troop_162", 1)
	]],

	[anyone, "dplmc_companion_war_request_response",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 9),
		(this_or_next|lt, "$g_mission_result_with_target", 0),
		(eq, "$g_mission_result_with_target", 0),
		(ge, "$g_mission_result_with_player", 2),
		(eq, "$g_concession_demanded", 0),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "fac_player_supporters_faction", ":g_talk_troop_mission_object"),
		(ge, reg0, 0),
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(str_store_faction_name, 31, ":g_talk_troop_162"),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 4, ":g_talk_troop_mission_object_leader"),
		(assign, ":var_4", 0),
		(try_for_parties, ":var_5"),
			(gt, ":var_5", "p_salt_mine"),
			(party_is_active, ":var_5"),
			(store_faction_of_party, ":faction_of_party_var_5", ":var_5"),
			(eq, ":faction_of_party_var_5", ":g_talk_troop_mission_object"),
			(this_or_next|party_slot_eq, ":var_5", slot_party_type, 13),
			(party_slot_eq, ":var_5", slot_party_type, 7),
			(try_begin),
				(eq, "$g_dplmc_terrain_advantage", 0),
				(call_script, "script_dplmc_get_terrain_code_for_battle", -1, ":var_5"),
				(call_script, "script_dplmc_party_calculate_strength_in_terrain", ":var_5", reg0, 0, 1),
				(assign, reg0, reg1),
			(else_try),
				(call_script, "script_party_calculate_strength", ":var_5", 0),
			(try_end),
			(val_div, reg0, 2),
			(val_add, reg0, 30),
			(call_script, "script_round_value", reg0),
			(val_max, reg0, 50),
			(val_add, ":var_4", reg0),
		(try_end),
		(val_mul, ":var_4", 2),
		(try_begin),
			(lt, "$g_mission_result_with_target", 0),
			(val_div, ":var_4", 2),
		(try_end),
		(try_begin),
			(call_script, "script_dplmc_get_faction_truce_length_with_faction", ":g_talk_troop_mission_object", "$players_kingdom"),
			(ge, reg0, 30),
			(val_mul, ":var_4", 3),
		(else_try),
			(store_relation, reg0, ":g_talk_troop_162", "$players_kingdom"),
			(val_mul, reg0, 2),
		(try_end),
		(game_get_reduce_campaign_ai, ":game_reduce_campaign_ai"),
		(try_begin),
			(eq, ":game_reduce_campaign_ai", 0),
			(val_mul, ":var_4", 3),
			(val_div, ":var_4", 2),
		(else_try),
			(eq, ":game_reduce_campaign_ai", 1),
		(else_try),
			(eq, ":game_reduce_campaign_ai", 2),
			(val_div, ":var_4", 2),
		(try_end),
		(val_max, ":var_4", 5000),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_mission_object"),
		(assign, reg1, ":var_4"),
		(assign, "$temp_2", ":var_4")
	],
	"{s4} is willing to start a war with {s31} but needs {reg1} coins to prepare {reg0?her:his} army.", "dplmc_companion_war_pay",
	[]],

	[anyone|plyr, "dplmc_companion_war_pay",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object"),
		(gt, "$g_player_chamberlain", 0),
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(ge, ":troop_gold_household_possessions", "$temp_2"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_mission_object"),
		(assign, reg1, "$temp_2")
	],
	"Pay {reg1} coins from the treasury and tell {reg0?her:him} to start the war.", "companion_rejoin_response",
	[
		(assign, ":var_1", "$temp_2"),
		(call_script, "script_dplmc_withdraw_from_treasury", ":var_1"),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_dplmc_faction_leader_splits_gold", ":g_talk_troop_mission_object", ":var_1"),
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(call_script, "script_diplomacy_start_war_between_kingdoms", ":g_talk_troop_mission_object", ":g_talk_troop_162", 1)
	]],

	[anyone|plyr, "dplmc_companion_war_pay",
	[],
	"On second thought, I don't think we can take so much money from the treasury.", "companion_rejoin_response",
	[]],

	[anyone, "dplmc_companion_war_request_response",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 9),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(troop_get_slot, ":g_talk_troop_162", "$g_talk_troop", 162),
		(str_store_faction_name, 31, ":g_talk_troop_162"),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 4, ":g_talk_troop_mission_object_leader")
	],
	"{s4} is not willing to start a war with {s31}.", "companion_rejoin_response",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 3),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_dplmc_get_truce_pay_amount", "fac_player_supporters_faction", ":g_talk_troop_mission_object", "$g_mission_result"),
		(assign, "$temp", reg0),
		(assign, "$temp_2", reg1),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(is_between, "$g_mission_result", -2, 1),
		(gt, "$temp", 0),
		(lt, "$temp_2", 0),
		(assign, reg4, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":g_talk_troop_mission_object_leader"),
			(assign, reg4, 1),
		(try_end)
	],
	"{s12} says that {reg4?she:he} is willing to consider a truce of twenty days if you pay {reg4?her:him} {reg0} coins.", "dplmc_companion_truce_pay",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 3),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(is_between, "$g_mission_result", -2, 1),
		(gt, "$temp", 0),
		(gt, "$temp_2", 0),
		(assign, reg0, "$temp"),
		(assign, reg1, "$temp_2"),
		(str_store_party_name, 18, "$g_concession_demanded"),
		(assign, reg4, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":g_talk_troop_mission_object_leader"),
			(assign, reg4, 1),
		(try_end)
	],
	"{s12} says that {reg4?she:he} is willing to consider a truce of twenty days if you yield to {reg4?her:his} terms. Either you pay {reg0} coins or you pay {reg1} coins and give {reg4?her:him} {s18}.", "dplmc_companion_truce_pay",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 3),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(is_between, "$g_mission_result", -2, 1),
		(le, "$temp", 0),
		(eq, "$temp_2", 0),
		(str_store_party_name, 18, "$g_concession_demanded"),
		(assign, reg4, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":g_talk_troop_mission_object_leader"),
			(assign, reg4, 1),
		(try_end)
	],
	"{s12} says that {reg4?she:he} is willing to consider a truce of twenty days if you give {reg4?her:him} {s18}.", "dplmc_companion_truce_pay",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 3),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(is_between, "$g_mission_result", -2, 1),
		(le, "$temp", 0),
		(ge, "$temp_2", 1),
		(assign, reg0, "$temp_2"),
		(str_store_party_name, 18, "$g_concession_demanded"),
		(assign, reg4, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":g_talk_troop_mission_object_leader"),
			(assign, reg4, 1),
		(try_end)
	],
	"{s12} says that {reg4?she:he} is willing to consider a truce of twenty days if you pay {reg4?her:him} {reg0} coins and give {reg4?her:him} {s18}.", "dplmc_companion_truce_pay",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 3),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(is_between, "$g_mission_result", -2, 1),
		(gt, "$temp", 0),
		(eq, "$temp_2", 0),
		(assign, reg0, "$temp"),
		(str_store_party_name, 18, "$g_concession_demanded"),
		(assign, reg4, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":g_talk_troop_mission_object_leader"),
			(assign, reg4, 1),
		(try_end)
	],
	"{s12} says that {reg4?she:he} is willing to consider a truce of twenty days if you pay {reg4?her:him} {reg0} or give {reg4?her:him} {s18}.", "dplmc_companion_truce_pay",
	[]],

	[anyone|plyr, "dplmc_companion_truce_pay",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object"),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(assign, reg0, "$temp"),
		(gt, reg0, 0),
		(ge, ":troop_gold_player", reg0)
	],
	"Pay {reg0} coins and let the truce with the {s4} be concluded", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(troop_remove_gold, "trp_player", "$temp"),
		(call_script, "script_dplmc_faction_leader_splits_gold", ":g_talk_troop_mission_object", "$temp"),
		(call_script, "script_diplomacy_start_peace_between_kingdoms", ":g_talk_troop_mission_object", "$players_kingdom", 1),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object")
	]],

	[anyone|plyr, "dplmc_companion_truce_pay",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object"),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(assign, reg1, "$temp_2"),
		(gt, reg1, 0),
		(ge, ":troop_gold_player", reg1),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(assign, reg4, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":g_talk_troop_mission_object_leader"),
			(assign, reg4, 1),
		(try_end)
	],
	"Pay {reg1} coins and give {reg4?her:him} {s18} let this truce with the {s4} be concluded", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(troop_remove_gold, "trp_player", reg1),
		(call_script, "script_dplmc_faction_leader_splits_gold", ":g_talk_troop_mission_object", reg0),
		(call_script, "script_give_center_to_faction", "$g_concession_demanded", ":g_talk_troop_mission_object"),
		(call_script, "script_diplomacy_start_peace_between_kingdoms", ":g_talk_troop_mission_object", "$players_kingdom", 1),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object")
	]],

	[anyone|plyr, "dplmc_companion_truce_pay",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object"),
		(gt, "$g_concession_demanded", 0),
		(eq, "$temp_2", 0),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_mission_object_leader")
	],
	"Give {reg0?her:him} {s18} let this truce with the {s4} be concluded", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_give_center_to_faction", "$g_concession_demanded", ":g_talk_troop_mission_object"),
		(call_script, "script_diplomacy_start_peace_between_kingdoms", ":g_talk_troop_mission_object", "$players_kingdom", 1),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object")
	]],

	[anyone|plyr, "dplmc_companion_truce_pay",
	[],
	"On second thought, perhaps this is not now in our interests..", "companion_rejoin_response",
	[]],

	[anyone|plyr, "minister_talk",
	[],
	"That is all for now.", "close_window",
	[]],

	[anyone, "minister_change_marshal",
	[],
	"Who should be the new marshal?", "minister_change_marshal_choose",
	[]],

	[anyone|plyr, "minister_change_marshal_choose",
	[],
	"I shall be marshal", "minister_pretalk",
	[
		(call_script, "script_appoint_faction_marshall", "fac_player_supporters_faction", "trp_player"),
		(store_current_hours, ":current_hours"),
		(assign, "$g_recalculate_ais", 1),
		(assign, "$g_player_faction_last_marshal_appointment", ":current_hours"),
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(try_begin),
			(faction_slot_eq, ":value", slot_faction_political_issue, 1),
			(faction_set_slot, ":value", slot_faction_political_issue, 0),
			(faction_set_slot, "fac_player_supporters_faction", slot_faction_political_issue, 0),
			(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(this_or_next|is_between, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(eq, ":faction_of_troop_troop", ":value"),
				(troop_set_slot, ":troop", slot_troop_stance_on_faction_issue, -1),
			(try_end),
		(try_end)
	]],

	[anyone|plyr, "minister_change_marshal_choose",
	[],
	"For a short while, we should have no marshal", "minister_pretalk",
	[
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(call_script, "script_appoint_faction_marshall", ":value", -1),
		(try_begin),
			(faction_slot_eq, ":value", slot_faction_political_issue, 1),
			(faction_set_slot, ":value", slot_faction_political_issue, 0),
			(faction_set_slot, "fac_player_supporters_faction", slot_faction_political_issue, 0),
			(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(this_or_next|is_between, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(eq, ":faction_of_troop_troop", ":value"),
				(troop_set_slot, ":troop", slot_troop_stance_on_faction_issue, -1),
			(try_end),
		(try_end),
		(assign, "$g_recalculate_ais", 1)
	]],

	[anyone|repeat_for_troops|plyr, "minister_change_marshal_choose",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "trp_npc1", "trp_heroes_end"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(assign, ":value", 0),
		(try_begin),
			(eq, ":faction_of_troop_repeat_object", "$players_kingdom"),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|eq, ":value", 1),
		(eq, ":faction_of_troop_repeat_object", "fac_player_supporters_faction"),
		(str_store_troop_name, 4, ":repeat_object")
	],
	"{s4}", "minister_pretalk",
	[
		(store_repeat_object, ":repeat_object"),
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(call_script, "script_appoint_faction_marshall", ":value", ":repeat_object"),
		(store_current_hours, ":current_hours"),
		(assign, "$g_player_faction_last_marshal_appointment", ":current_hours"),
		(try_begin),
			(faction_slot_eq, ":value", slot_faction_political_issue, 1),
			(faction_set_slot, ":value", slot_faction_political_issue, 0),
			(faction_set_slot, "fac_player_supporters_faction", slot_faction_political_issue, 0),
			(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(this_or_next|is_between, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(eq, ":faction_of_troop_troop", ":value"),
				(troop_set_slot, ":troop", slot_troop_stance_on_faction_issue, -1),
			(try_end),
		(try_end),
		(assign, "$g_recalculate_ais", 1)
	]],

	[anyone|plyr, "minister_change_marshal_choose",
	[],
	"Never mind.", "minister_pretalk",
	[]],

	[anyone, "minister_diplomatic_kingdoms",
	[
		(assign, ":value", "trp_heroes_end"),
		(try_for_range, ":troop", "trp_npc1", ":value"),
			(this_or_next|is_between, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 5),
			(main_party_has_troop, ":troop"),
			(assign, ":value", ":troop"),
		(try_end),
		(lt, ":value", "trp_heroes_end")
	],
	"To whom do you wish to send this emissary?", "minister_diplomatic_kingdoms_select",
	[]],

	[anyone, "minister_diplomatic_kingdoms",
	[],
	"Unfortunately, there is no one to send right now.", "minister_pretalk",
	[]],

	[anyone, "minister_diplomatic_kingdoms",
	[],
	"To whom do you wish to send this emissary?", "minister_diplomatic_kingdoms_select",
	[]],

	[anyone|repeat_for_factions|plyr, "minister_diplomatic_kingdoms_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(neg|faction_slot_eq, ":repeat_object", slot_faction_leader, "trp_player"),
		(neq, ":repeat_object", "$players_kingdom"),
		(neq, ":repeat_object", "fac_player_supporters_faction"),
		(faction_slot_eq, ":repeat_object", slot_faction_state, 0),
		(faction_get_slot, ":repeat_object_leader", ":repeat_object", slot_faction_leader),
		(str_store_troop_name, 10, ":repeat_object_leader"),
		(str_store_faction_name, 11, ":repeat_object"),
		(str_clear, 14)
	],
	"{s10} of the {s11}{s14}", "minister_diplomatic_initiative_type",
	[
		(store_repeat_object, "$g_faction_selected")
	]],

	[anyone|plyr, "minister_diplomatic_kingdoms_select",
	[],
	"Never mind", "minister_pretalk",
	[]],

	[anyone, "minister_diplomatic_initiative_type",
	[
		(faction_get_slot, ":g_faction_selected_leader", "$g_faction_selected", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female", ":g_faction_selected_leader")
	],
	"What do you wish to tell {reg0?her:him}?", "minister_diplomatic_initiative_type_select",
	[]],

	[anyone|plyr, "minister_diplomatic_initiative_type_select",
	[
		(store_relation, ":relation_player_supporters_faction_g_faction_selected", "fac_player_supporters_faction", "$g_faction_selected"),
		(lt, ":relation_player_supporters_faction_g_faction_selected", 0)
	],
	"That our two sovereignties should enter into truce.", "minister_diplomatic_emissary",
	[
		(assign, "$g_initiative_selected", 3)
	]],

	[anyone|plyr, "minister_diplomatic_initiative_type_select",
	[
		(neg|is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
		(faction_get_slot, ":g_faction_selected_leader", "$g_faction_selected", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female", ":g_faction_selected_leader")
	],
	"That I wish to put myself under {reg0?her:his} protection, as {reg0?her:his} vassal.", "minister_diplomatic_emissary",
	[
		(assign, "$g_initiative_selected", 4)
	]],

	[anyone|plyr, "minister_diplomatic_initiative_type_select",
	[
		(store_relation, ":relation_player_supporters_faction_g_faction_selected", "fac_player_supporters_faction", "$g_faction_selected"),
		(faction_slot_eq, "$g_faction_selected", slot_faction_recognized_player, 0),
		(ge, ":relation_player_supporters_faction_g_faction_selected", 0)
	],
	"That I wish to express my goodwill, as one monarch to another.", "minister_diplomatic_emissary",
	[
		(assign, "$g_initiative_selected", 5)
	]],

	[anyone|plyr, "minister_diplomatic_initiative_type_select",
	[
		(store_relation, ":relation_player_supporters_faction_g_faction_selected", "fac_player_supporters_faction", "$g_faction_selected"),
		(ge, ":relation_player_supporters_faction_g_faction_selected", 0),
		(faction_get_slot, ":g_faction_selected_leader", "$g_faction_selected", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female", ":g_faction_selected_leader")
	],
	"That I declare war upon {reg0?her:him}.", "minister_declare_war",
	[]],

	[anyone|plyr, "minister_diplomatic_initiative_type_select",
	[],
	"Never mind", "close_window",
	[]],

	[anyone, "minister_declare_war",
	[
		(assign, ":value", 0),
		(try_begin),
			(gt, "$players_kingdom", -1),
			(faction_get_slot, reg0, "$players_kingdom", slot_faction_leader),
			(gt, reg0, "trp_player"),
			(assign, ":value", reg0),
		(else_try),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(troop_get_slot, reg0, "trp_player", slot_troop_spouse),
			(gt, reg0, 0),
			(assign, ":value", reg0),
		(try_end),
		(gt, ":value", 0),
		(str_store_troop_name, 0, ":value")
	],
	"For that you should first speak to {s0}.", "dplmc_minister_nevermind",
	[]],

	[anyone|plyr, "dplmc_minister_nevermind",
	[],
	"I might go do so.", "close_window",
	[]],

	[anyone|plyr, "dplmc_minister_nevermind",
	[],
	"Never mind.", "minister_pretalk",
	[]],

	[anyone, "minister_declare_war",
	[
		(try_begin),
			(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "fac_player_supporters_faction", "$g_faction_selected"),
			(eq, reg0, 1),
			(str_store_string, 12, "str_in_doing_so_you_will_be_in_violation_of_your_truce_is_that_what_you_want"),
		(else_try),
			(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", "fac_player_supporters_faction", "$g_faction_selected"),
			(neq, reg0, -1),
			(str_store_string, 12, "str_if_you_attack_without_provocation_some_of_your_vassals_may_consider_you_to_be_too_warlike_is_that_what_you_want"),
		(else_try),
			(str_store_string, 12, "str_our_men_are_ready_to_ride_forth_at_your_bidding_are_you_sure_this_is_what_you_want"),
		(try_end)
	],
	"{s12}", "minister_declare_war_confirm",
	[]],

	[anyone|plyr, "minister_declare_war_confirm",
	[
		(str_store_faction_name, 12, "$g_faction_selected")
	],
	"It is. I wish to make war on {s12}.", "minister_declare_war_confirm_yes",
	[
		(call_script, "script_diplomacy_start_war_between_kingdoms", "fac_player_supporters_faction", "$g_faction_selected", 1)
	]],

	[anyone|plyr, "minister_declare_war_confirm",
	[
		(str_store_faction_name, 12, "$g_faction_selected")
	],
	"Hmm. Perhaps not.", "minister_pretalk",
	[]],

	[anyone, "minister_declare_war_confirm_yes",
	[
		(str_store_faction_name, 12, "$g_faction_selected")
	],
	"As you command. We are now at war with the {s12}. May the heavens grant us victory.", "minister_pretalk",
	[]],

	[anyone, "minister_diplomatic_emissary",
	[],
	"Who shall be your emissary? You should choose one whom you trust, but who is also persuasive -- one who can negotiate without giving offense.", "minister_emissary_select",
	[]],

	[anyone|repeat_for_troops|plyr, "minister_emissary_select",
	[
		(store_repeat_object, ":repeat_object"),
		(main_party_has_troop, ":repeat_object"),
		(is_between, ":repeat_object", "trp_npc1", "trp_heroes_end"),
		(troop_slot_eq, ":repeat_object", slot_troop_prisoner_of_party, -1),
		(this_or_next|is_between, ":repeat_object", "trp_npc1", "trp_kingdom_1_lord"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 5),
		(call_script, "script_set_diplomatic_emissary_skill_level_string", ":repeat_object", "skl_persuasion", 0)
	],
	"{s11}", "minister_emissary_dispatch",
	[
		(store_repeat_object, "$g_emissary_selected")
	]],

	[anyone|plyr, "minister_emissary_select",
	[],
	"Actually, I can't think of anyone.", "minister_pretalk",
	[]],

	[anyone, "minister_emissary_dispatch",
	[
		(str_store_troop_name, 11, "$g_emissary_selected"),
		(str_store_faction_name, 12, "$g_faction_selected"),
		(try_begin),
			(eq, "$g_initiative_selected", 5),
			(str_store_string, 14, "str_seek_recognition"),
		(else_try),
			(eq, "$g_initiative_selected", 4),
			(str_store_string, 14, "str_seek_vassalhood"),
		(else_try),
			(eq, "$g_initiative_selected", 3),
			(str_store_string, 14, "str_seek_a_truce"),
		(else_try),
			(eq, "$g_initiative_selected", 18),
			(str_store_string, 14, "str_dplmc_conclude_non_agression"),
		(try_end)
	],
	"Very well -- I shall send {s11} to the {s12} to {s14}.", "minister_diplomatic_dispatch_confirm",
	[]],

	[anyone|plyr, "minister_diplomatic_dispatch_confirm",
	[],
	"Yes, do that", "minister_pretalk",
	[
		(troop_set_slot, "$g_emissary_selected", slot_troop_days_on_mission, 3),
		(troop_set_slot, "$g_emissary_selected", slot_troop_current_mission, "$g_initiative_selected"),
		(troop_set_slot, "$g_emissary_selected", slot_troop_mission_object, "$g_faction_selected"),
		(try_begin),
			(eq, "$g_initiative_selected", 13),
			(call_script, "script_dplmc_withdraw_from_treasury", "$diplomacy_var"),
		(try_end),
		(troop_set_slot, "$g_emissary_selected", 162, "$diplomacy_var"),
		(troop_set_slot, "$g_emissary_selected", 163, "$diplomacy_var2"),
		(remove_member_from_party, "$g_emissary_selected", "p_main_party")
	]],

	[anyone|plyr, "minister_diplomatic_dispatch_confirm",
	[],
	"Actually, hold off on that", "minister_pretalk",
	[]],

	[anyone, "minister_replace",
	[],
	"Very good. Whom will you appoint in my stead?", "minister_replace_select",
	[]],

	[anyone|repeat_for_troops|plyr, "minister_replace_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "trp_npc1", "trp_kingdom_1_lord"),
		(main_party_has_troop, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_prisoner_of_party, -1),
		(call_script, "script_dplmc_cap_troop_describes_troop_to_troop_s1", 1, "trp_player", ":repeat_object", "$g_talk_troop"),
		(str_store_string_reg, 4, 1)
	],
	"{s4}", "minister_replace_confirm",
	[
		(store_repeat_object, "$g_player_minister")
	]],

	[anyone|plyr, "minister_replace_select",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(gt, ":player_spouse", 0),
		(neg|is_between, ":player_spouse", "trp_npc1", "trp_heroes_end"),
		(troop_slot_eq, ":player_spouse", slot_troop_occupation, 2),
		(neg|troop_slot_ge, ":player_spouse", 2, 11),
		(call_script, "script_dplmc_store_troop_is_female", ":player_spouse"),
		(str_store_troop_name, 4, ":player_spouse"),
		(neq, ":player_spouse", "$g_talk_troop")
	],
	"My {reg0?wife:husband}, {s4}.", "minister_replace_confirm",
	[
		(troop_get_slot, "$g_player_minister", "trp_player", slot_troop_spouse)
	]],

	[anyone|repeat_for_troops|plyr, "minister_replace_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "trp_npc1", "trp_heroes_end"),
		(this_or_next|is_between, ":repeat_object", "trp_knight_1_1_wife", "trp_heroes_end"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 6),
		(neg|troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(neg|troop_slot_ge, ":repeat_object", 2, 11),
		(neg|troop_slot_ge, ":repeat_object", 8, 0),
		(this_or_next|neg|is_between, ":repeat_object", "trp_npc1", "trp_kingdom_1_lord"),
		(neg|main_party_has_troop, ":repeat_object"),
		(neq, ":repeat_object", "$g_talk_troop"),
		(call_script, "script_dplmc_troop_get_family_relation_to_troop", ":repeat_object", "trp_player"),
		(gt, reg0, 0),
		(try_begin),
			(this_or_next|ge, reg0, 15),
			(this_or_next|eq, reg1, "str_dplmc_sister_wife"),
			(eq, reg1, "str_dplmc_co_husband"),
		(else_try),
			(call_script, "script_get_kingdom_lady_social_determinants", ":repeat_object"),
			(try_begin),
				(this_or_next|le, reg0, "trp_player"),
				(eq, reg0, ":repeat_object"),
				(assign, reg0, 1),
			(else_try),
				(assign, reg0, 0),
			(try_end),
		(try_end),
		(ge, reg0, 0),
		(call_script, "script_dplmc_cap_troop_describes_troop_to_troop_s1", 1, "trp_player", ":repeat_object", "$g_talk_troop"),
		(str_store_string_reg, 4, 1)
	],
	"{s4}.", "minister_replace_confirm",
	[
		(store_repeat_object, "$g_player_minister")
	]],

	[anyone|plyr, "minister_replace_select",
	[],
	"Actually, hold off on that.", "minister_pretalk",
	[]],

	[anyone, "minister_replace_confirm",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 5)
	],
	"Very good. {s9} is your new minister. I shall make ready to rejoin you.", "close_window",
	[
		(str_store_troop_name, 9, "$g_player_minister"),
		(party_add_members, "p_main_party", "$g_talk_troop", 1),
		(assign, "$g_leave_encounter", 1),
		(try_begin),
			(main_party_has_troop, "$g_player_minister"),
			(party_remove_members, "p_main_party", "$g_player_minister", 1),
		(try_end),
		(try_for_range, ":number", 0, "qst_quests_end"),
			(quest_slot_eq, ":number", slot_quest_giver_troop, "$g_talk_troop"),
			(call_script, "script_abort_quest", ":number", 0),
		(try_end)
	]],

	[anyone, "minister_replace_confirm",
	[],
	"Very good. {s9} is your new minister. It has been an honor to serve you.", "close_window",
	[
		(str_store_troop_name, 9, "$g_player_minister"),
		(try_begin),
			(main_party_has_troop, "$g_player_minister"),
			(party_remove_members, "p_main_party", "$g_player_minister", 1),
		(try_end),
		(try_begin),
			(this_or_next|neg|is_between, "$g_talk_troop", "trp_npc1", "trp_heroes_end"),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
			(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(else_try),
			(is_between, "$g_talk_troop", "trp_knight_1_1_wife", "trp_heroes_end"),
			(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 6),
			(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 7),
			(troop_set_slot, "$g_talk_troop", slot_troop_occupation, 6),
		(else_try),
			(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
			(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 6),
			(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 7),
			(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 8),
			(troop_set_slot, "$g_talk_troop", slot_troop_occupation, 0),
		(else_try),
			(troop_set_slot, "$g_talk_troop", slot_troop_occupation, 2),
		(else_try),
		(try_end)
	]],

	[anyone, "minister_grant_fief",
	[
		(faction_get_slot, ":players_kingdom_political_issue", "$players_kingdom", slot_faction_political_issue),
		(str_clear, 12),
		(try_begin),
			(is_between, ":players_kingdom_political_issue", "p_town_1", "p_salt_mine"),
			(str_store_party_name, 4, ":players_kingdom_political_issue"),
			(str_store_string, 12, "str_minister_advice_select_fief"),
		(else_try),
			(eq, ":players_kingdom_political_issue", 1),
			(str_store_string, 12, "str_minister_advice_select_fief_wait"),
		(try_end)
	],
	"Which of your fiefs did you wish to grant?{s12}", "minister_grant_fief_select",
	[]],

	[anyone|repeat_for_parties|plyr, "minister_grant_fief_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(eq, ":faction_of_party_repeat_object", "fac_player_supporters_faction"),
		(neg|party_slot_eq, ":repeat_object", slot_village_infested_by_bandits, "trp_woman_e_refugee"),
		(neq, ":repeat_object", "$g_player_court"),
		(party_get_slot, ":repeat_object_town_lord", ":repeat_object", slot_town_lord),
		(try_begin),
			(ge, ":repeat_object_town_lord", "trp_npc1"),
			(store_faction_of_troop, ":faction_of_troop_repeat_object_town_lord", ":repeat_object_town_lord"),
			(neq, ":faction_of_troop_repeat_object_town_lord", "fac_player_supporters_faction"),
			(assign, ":repeat_object_town_lord", -1),
		(try_end),
		(le, ":repeat_object_town_lord", 0),
		(str_store_party_name, 1, ":repeat_object"),
		(str_clear, 12),
		(try_begin),
			(party_slot_eq, ":repeat_object", slot_town_lord, -1),
			(str_store_string, 12, "str_unassigned_center"),
		(try_end)
	],
	"{s1}{s12}", "minister_grant_fief_select_recipient",
	[
		(store_repeat_object, "$fief_selected")
	]],

	[anyone|plyr, "minister_grant_fief_select",
	[],
	"Never mind", "minister_pretalk",
	[]],

	[anyone, "minister_grant_fief_select_recipient",
	[
		(str_clear, 12),
		(try_begin),
			(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, "$fief_selected"),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(troop_set_slot, ":troop", slot_troop_temp_slot, 0),
			(try_end),
			(assign, ":value", -1),
			(assign, ":value_2", 0),
			(troop_set_slot, "trp_player", slot_troop_temp_slot, 0),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(this_or_next|is_between, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
				(troop_get_slot, ":troop_stance_on_faction_issue", ":troop", slot_troop_stance_on_faction_issue),
				(ge, ":troop_stance_on_faction_issue", 0),
				(troop_get_slot, ":troop_stance_on_faction_issue_temp_slot", ":troop_stance_on_faction_issue", slot_troop_temp_slot),
				(val_add, ":troop_stance_on_faction_issue_temp_slot", 1),
				(troop_set_slot, ":troop_stance_on_faction_issue", slot_troop_temp_slot, ":troop_stance_on_faction_issue_temp_slot"),
				(gt, ":troop_stance_on_faction_issue_temp_slot", ":value_2"),
				(assign, ":value_2", ":troop_stance_on_faction_issue_temp_slot"),
				(assign, ":value", ":troop_stance_on_faction_issue"),
			(try_end),
			(is_between, ":value", "trp_npc1", "trp_heroes_end"),
			(str_store_troop_name, 4, ":value"),
			(assign, reg4, ":value_2"),
			(str_store_string, 12, "str_minister_advice_fief_leading_vassal"),
		(try_end)
	],
	"And who will you choose to receive the fief?{s12}", "minister_grant_fief_select_recipient_choice",
	[]],

	[anyone|repeat_for_troops|plyr, "minister_grant_fief_select_recipient_choice",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(is_between, ":repeat_object", "trp_npc1", "trp_heroes_end"),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(is_between, ":faction_of_troop_repeat_object", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(this_or_next|eq, ":faction_of_troop_repeat_object", "$players_kingdom"),
		(eq, ":faction_of_troop_repeat_object", "fac_player_supporters_faction"),
		(str_store_troop_name, 11, ":repeat_object"),
		(call_script, "script_print_troop_owned_centers_in_numbers_to_s0", ":repeat_object"),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_recruitment_argument, 3),
			(str_store_string, 12, "str__promised_fief"),
		(else_try),
			(str_clear, 12),
		(try_end),
		(try_begin),
			(eq, reg0, 0),
			(str_store_string, 0, "str_no_fiefss12"),
		(else_try),
			(str_store_string, 0, "str_fiefs_s0s12"),
		(try_end),
		(str_store_string_reg, 12, 63),
		(call_script, "script_troop_get_player_relation", ":repeat_object"),
		(call_script, "script_describe_relation_to_s63", reg0),
		(str_store_string_reg, 1, 63),
		(str_store_string_reg, 63, 12),
		(str_store_string, 1, "str_dplmc_s0_comma_s1")
	],
	"{!}{s11} {s1}.", "minister_grant_fief_complete",
	[
		(store_repeat_object, "$lord_selected")
	]],

	[anyone|plyr, "minister_grant_fief_select_recipient_choice",
	[],
	"Never mind", "minister_pretalk",
	[]],

	[anyone, "minister_grant_fief_complete",
	[],
	"Very well - {s2} shall receive {s1}.", "minister_pretalk",
	[
		(call_script, "script_give_center_to_lord", "$fief_selected", "$lord_selected", 0),
		(str_store_party_name, 1, "$fief_selected"),
		(str_store_troop_name, 2, "$lord_selected"),
		(try_begin),
			(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, "$fief_selected"),
			(faction_set_slot, "$players_kingdom", slot_faction_political_issue, -1),
		(try_end),
		(call_script, "script_add_log_entry", 20, "trp_player", "$fief_selected", "$lord_selected", "$g_encountered_party_faction")
	]],

	[anyone, "minister_indict",
	[],
	"Grim news, {my lord/my lady}. Who do you believe is planning to betray you?", "minister_indict_select",
	[]],

	[anyone|repeat_for_troops|plyr, "minister_indict_select",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(troop_is_hero, ":repeat_object"),
		(neq, ":repeat_object", "trp_player"),
		(neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, ":repeat_object"),
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_leader, ":repeat_object"),
		(eq, ":faction_of_troop_repeat_object", "fac_player_supporters_faction"),
		(str_store_troop_name, 11, ":repeat_object")
	],
	"{s11}", "minister_indict_confirm",
	[
		(store_repeat_object, "$lord_selected")
	]],

	[anyone|plyr, "minister_indict_select",
	[],
	"Never mind.", "minister_pretalk",
	[]],

	[anyone, "minister_indict_confirm",
	[
		(str_store_troop_name, 4, "$lord_selected"),
		(assign, reg4, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$lord_selected"),
			(assign, reg4, 1),
		(try_end)
	],
	"Think carefully on this, {my lord/my lady}. If you indict {s4} for treason unjustly, you may find that others become nervous about serving you. On the other hand, if you truly believe that {reg4?she:he} is about to betray you, then perhaps it is best to move first, to secure control of {reg4?her:his} fortresses.", "minister_indict_confirm_answer",
	[]],

	[anyone|plyr, "minister_indict_confirm_answer",
	[],
	"I have thought long enough. Issue the indictment!", "minister_indict_conclude",
	[]],

	[anyone|plyr, "minister_indict_confirm_answer",
	[],
	"Perhaps I should wait a little while longer..", "minister_pretalk",
	[]],

	[anyone, "minister_indict_conclude",
	[],
	"It has been sent, {my lord/my lady}.", "minister_pretalk",
	[
		(call_script, "script_indict_lord_for_treason", "$lord_selected", "fac_player_supporters_faction")
	]],

	[anyone|repeat_for_troops|plyr, "center_captured_lord_advice",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(neq, "$g_talk_troop", ":repeat_object"),
		(neq, "trp_player", ":repeat_object"),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", ":faction_of_troop_repeat_object"),
		(this_or_next|ge, reg0, 50),
		(eq, ":faction_of_troop_repeat_object", "fac_player_supporters_faction"),
		(str_store_troop_name, 11, ":repeat_object"),
		(call_script, "script_print_troop_owned_centers_in_numbers_to_s0", ":repeat_object"),
		(try_begin),
			(troop_slot_eq, ":repeat_object", slot_lord_recruitment_argument, 3),
			(str_store_string, 12, "str__promised_fief"),
		(else_try),
			(str_clear, 12),
		(try_end),
		(try_begin),
			(eq, reg0, 0),
			(str_store_string, 0, "str_no_fiefss12"),
		(else_try),
			(str_store_string, 0, "str_fiefs_s0s12"),
		(try_end),
		(str_store_string_reg, 12, 63),
		(call_script, "script_troop_get_player_relation", ":repeat_object"),
		(call_script, "script_describe_relation_to_s63", reg0),
		(str_store_string_reg, 1, 63),
		(str_store_string_reg, 63, 12),
		(str_store_string, 1, "str_dplmc_s0_comma_s1")
	],
	"{s11}. {s1}", "center_captured_lord_advice_2",
	[
		(store_repeat_object, "$temp")
	]],

	[anyone|plyr, "center_captured_lord_advice",
	[
		(call_script, "script_print_troop_owned_centers_in_numbers_to_s0", "trp_player"),
		(str_store_party_name, 1, "$g_center_taken_by_player_faction"),
		(try_begin),
			(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
			(str_store_string, 12, "str_please_s65_"),
		(else_try),
			(str_clear, 12),
		(try_end)
	],
	"I want to have {s1} for myself. (fiefs: {s0})", "center_captured_lord_advice_2",
	[
		(assign, "$temp", "trp_player")
	]],

	[anyone|plyr, "center_captured_lord_advice",
	[
		(call_script, "script_print_troop_owned_centers_in_numbers_to_s0", "$g_talk_troop"),
		(str_store_party_name, 1, "$g_center_taken_by_player_faction"),
		(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife")
	],
	"You should have {s1} for yourself. (fiefs: {s0})", "center_captured_lord_advice_2",
	[
		(assign, "$temp", "$g_talk_troop")
	]],

	[anyone, "center_captured_lord_advice_2",
	[
		(eq, "$g_talk_troop", "$g_player_minister")
	],
	"As you wish, my liege. {He/She} will be the new lord of {s1}.", "minister_issues",
	[
		(assign, ":var_1", "$temp"),
		(call_script, "script_give_center_to_lord", "$g_center_taken_by_player_faction", ":var_1", 0),
		(try_begin),
			(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, "$g_center_taken_by_player_faction"),
			(faction_set_slot, "$players_kingdom", slot_faction_political_issue, -1),
		(try_end),
		(try_begin),
			(neq, ":var_1", "trp_player"),
			(try_for_range, ":unused", 0, 4),
				(call_script, "script_cf_reinforce_party", "$g_center_taken_by_player_faction"),
			(try_end),
		(try_end),
		(assign, reg6, 0),
		(assign, reg7, 0),
		(try_begin),
			(eq, ":var_1", "$g_talk_troop"),
			(assign, reg6, 1),
		(else_try),
			(eq, ":var_1", "trp_player"),
			(assign, reg7, 1),
		(else_try),
			(str_store_troop_name, 11, ":var_1"),
		(try_end),
		(str_store_party_name, 1, "$g_center_taken_by_player_faction"),
		(assign, reg3, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":var_1"),
			(assign, reg3, 1),
		(try_end),
		(assign, "$g_center_taken_by_player_faction", -1)
	]],

	[anyone, "center_captured_lord_advice_2",
	[],
	"Hmmm. All right, {playername}. I value your counsel highly. {reg6?I:{reg7?You:{s11}}} will be the new {reg3?lady:lord} of {s1}.", "close_window",
	[
		(assign, ":var_1", "$temp"),
		(troop_set_slot, ":var_1", slot_lord_recruitment_argument, 0),
		(call_script, "script_give_center_to_lord", "$g_center_taken_by_player_faction", ":var_1", 0),
		(try_begin),
			(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, "$g_center_taken_by_player_faction"),
			(faction_set_slot, "$players_kingdom", slot_faction_political_issue, -1),
		(try_end),
		(try_begin),
			(neq, ":var_1", "trp_player"),
			(try_for_range, ":unused", 0, 4),
				(call_script, "script_cf_reinforce_party", "$g_center_taken_by_player_faction"),
			(try_end),
		(try_end),
		(assign, reg6, 0),
		(assign, reg7, 0),
		(try_begin),
			(eq, ":var_1", "$g_talk_troop"),
			(assign, reg6, 1),
		(else_try),
			(eq, ":var_1", "trp_player"),
			(assign, reg7, 1),
		(else_try),
			(str_store_troop_name, 11, ":var_1"),
		(try_end),
		(str_store_party_name, 1, "$g_center_taken_by_player_faction"),
		(assign, reg3, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":var_1"),
			(assign, reg3, 1),
		(try_end),
		(assign, "$g_center_taken_by_player_faction", -1)
	]],

	[anyone, "event_triggered",
	[
		(eq, "$g_infinite_camping", 0),
		(store_conversation_troop, "$map_talk_troop"),
		(is_between, "$map_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(eq, "$map_talk_troop", "$npc_is_quitting"),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 5, ":map_talk_troop_honorific")
	],
	"Excuse me {s5} -- there is something I need to tell you.", "companion_quitting",
	[
		(assign, "$npc_is_quitting", 0),
		(assign, "$player_can_persuade_npc", 1),
		(assign, "$player_can_refuse_npc_quitting", 1)
	]],

	[anyone, "companion_quitting",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(assign, ":value", 0),
		(try_for_range_backwards, ":var_2", "p_town_1", "p_salt_mine"),
			(party_slot_eq, ":var_2", slot_town_lord, "$map_talk_troop"),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|eq, ":value", 1),
		(this_or_next|is_between, "$map_talk_troop", "trp_knight_1_1", "trp_kingdom_1_pretender"),
		(this_or_next|is_between, "$map_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(this_or_next|is_between, "$map_talk_troop", "trp_kingdom_1_lord", "trp_knight_1_1"),
		(this_or_next|troop_slot_eq, "$map_talk_troop", slot_troop_occupation, 2),
		(this_or_next|troop_slot_eq, "$map_talk_troop", slot_troop_playerparty_history, 6),
		(troop_slot_eq, "$map_talk_troop", slot_troop_playerparty_history, 7)
	],
	"It has been good travelling with you, but I must return to my own affairs.", "dplmc_companion_quitting_lord_1",
	[]],

	[anyone|plyr, "dplmc_companion_quitting_lord_1",
	[],
	"Farewell, then.", "dplmc_companion_quitting_lord_2",
	[]],

	[anyone|plyr, "dplmc_companion_quitting_lord_1",
	[
		(eq, "$player_can_persuade_npc", 1)
	],
	"Perhaps I can persuade you to change your mind.", "dplmc_companion_quitting_lord_persuasion",
	[
		(assign, "$player_can_persuade_npc", 0)
	]],

	[anyone, "dplmc_companion_quitting_lord_persuasion",
	[
		(store_random_in_range, ":random_in_range_-2_13", -2, 13),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(le, ":random_in_range_-2_13", ":skill_level_persuasion_player")
	],
	"Hm.  I suppose I can afford to put it off a bit longer.", "close_window",
	[
		(troop_get_slot, ":map_talk_troop_morality_penalties", "$map_talk_troop", slot_troop_morality_penalties),
		(val_div, ":map_talk_troop_morality_penalties", 2),
		(troop_set_slot, "$map_talk_troop", slot_troop_morality_penalties, ":map_talk_troop_morality_penalties"),
		(troop_get_slot, ":map_talk_troop_personalityclash_penalties", "$map_talk_troop", slot_troop_personalityclash_penalties),
		(val_div, ":map_talk_troop_personalityclash_penalties", 2),
		(troop_set_slot, "$map_talk_troop", slot_troop_personalityclash_penalties, ":map_talk_troop_personalityclash_penalties")
	]],

	[anyone, "dplmc_companion_quitting_lord_persuasion",
	[],
	"I'm sorry, but I can't put it off any longer.", "dplmc_companion_quitting_lord_1",
	[]],

	[anyone|plyr, "dplmc_companion_quitting_lord_2",
	[],
	"Farewell, then.", "lord_leave",
	[
		(try_begin),
			(this_or_next|troop_slot_eq, "$map_talk_troop", slot_troop_playerparty_history, 6),
			(this_or_next|troop_slot_eq, "$map_talk_troop", slot_troop_playerparty_history, 7),
			(troop_set_slot, "$map_talk_troop", slot_troop_occupation, 2),
		(try_end),
		(remove_member_from_party, "$map_talk_troop", "p_main_party"),
		(troop_set_slot, "$map_talk_troop", slot_troop_personalityclash_penalties, 0),
		(troop_set_slot, "$map_talk_troop", slot_troop_morality_penalties, 0)
	]],

	[anyone, "companion_quitting",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(troop_get_slot, ":map_talk_troop_retirement_speech", "$map_talk_troop", slot_troop_retirement_speech),
		(str_store_string, 5, ":map_talk_troop_retirement_speech")
	],
	"{s5}", "companion_quitting_2",
	[]],

	[anyone, "companion_quitting_2",
	[
		(call_script, "script_npc_morale", "$map_talk_troop")
	],
	"To tell you the truth, {s21}", "companion_quitting_response",
	[]],

	[anyone|plyr, "companion_quitting_response",
	[],
	"Very well. You be off, then.", "companion_quitting_yes",
	[]],

	[anyone|plyr, "companion_quitting_response",
	[
		(eq, "$player_can_persuade_npc", 1)
	],
	"Perhaps I can persuade you to change your mind.", "dplmc_companion_quitting_persuasion_start",
	[
		(assign, "$player_can_persuade_npc", 0)
	]],

	[anyone, "dplmc_companion_quitting_persuasion_start",
	[
		(troop_get_slot, ":map_talk_troop_lord_reputation_type", "$map_talk_troop", slot_lord_reputation_type),
		(assign, ":value", 0),
		(try_begin),
			(this_or_next|ge, ":map_talk_troop_lord_reputation_type", 9),
			(is_between, ":map_talk_troop_lord_reputation_type", 0, 8),
			(neq, ":map_talk_troop_lord_reputation_type", 2),
			(neq, ":map_talk_troop_lord_reputation_type", 5),
			(assign, ":value", 1),
		(else_try),
			(eq, ":map_talk_troop_lord_reputation_type", 10),
			(store_attribute_level, ":attribute_level_map_talk_troop_2", "$map_talk_troop", 2),
			(ge, ":attribute_level_map_talk_troop_2", 12),
			(store_skill_level, ":skill_level_map_talk_troop_engineer", "$map_talk_troop", "skl_engineer"),
			(ge, ":skill_level_map_talk_troop_engineer", 4),
			(assign, ":value", 1),
		(try_end),
		(neq, ":value", 0)
	],
	"Very well, I shall hear you out.", "dplmc_companion_quitting_persuasion_1",
	[]],

	[anyone, "dplmc_companion_quitting_persuasion_start",
	[],
	"I'm listening.", "dplmc_companion_quitting_persuasion_1",
	[]],

	[anyone|plyr, "dplmc_companion_quitting_persuasion_1",
	[],
	"We've had some good times.  Things might not be going to your liking now, but stay with me a while longer and the situation will turn around.", "companion_quitting_persuasion",
	[]],

	[anyone|plyr, "dplmc_companion_quitting_persuasion_1",
	[
		(store_character_level, ":character_level_map_talk_troop", "$map_talk_troop"),
		(store_add, ":value", ":character_level_map_talk_troop", 20),
		(val_mul, ":value", ":character_level_map_talk_troop"),
		(val_mul, ":value", 5),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(store_skill_level, reg0, "skl_leadership", "trp_player"),
		(val_max, ":skill_level_persuasion_player", reg0),
		(val_clamp, ":skill_level_persuasion_player", 0, 19),
		(store_sub, reg0, 20, ":skill_level_persuasion_player"),
		(val_mul, ":value", reg0),
		(val_div, ":value", 20),
		(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(store_add, ":value_2", ":troop_gold_household_possessions", ":troop_gold_player"),
		(ge, ":value_2", ":value"),
		(assign, "$temp", ":value"),
		(assign, reg0, "$temp")
	],
	"Would {reg0} coins convince you to remain a while longer?", "dplmc_companion_quitting_persuasion_bribe",
	[
		(assign, "$player_can_persuade_npc", 0)
	]],

	[anyone|plyr, "dplmc_companion_quitting_persuasion_1",
	[],
	"Actually, nevermind.  I meant to say something else.", "companion_quitting_response",
	[
		(assign, "$player_can_persuade_npc", 1)
	]],

	[anyone, "dplmc_companion_quitting_persuasion_bribe",
	[],
	"Hm. When you put it like that, I suppose I can stay a while longer, see if things improve.", "close_window",
	[
		(assign, reg0, "$temp"),
		(val_max, reg0, 0),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(val_min, ":troop_gold_player", reg0),
		(val_sub, reg0, ":troop_gold_player"),
		(troop_remove_gold, "trp_player", ":troop_gold_player"),
		(store_troop_gold, ":troop_gold_player", "trp_household_possessions"),
		(val_min, ":troop_gold_player", reg0),
		(val_sub, reg0, ":troop_gold_player"),
		(call_script, "script_dplmc_withdraw_from_treasury", ":troop_gold_player"),
		(troop_get_slot, ":map_talk_troop_morality_penalties", "$map_talk_troop", slot_troop_morality_penalties),
		(val_div, ":map_talk_troop_morality_penalties", 2),
		(troop_set_slot, "$map_talk_troop", slot_troop_morality_penalties, ":map_talk_troop_morality_penalties"),
		(troop_get_slot, ":map_talk_troop_personalityclash_penalties", "$map_talk_troop", slot_troop_personalityclash_penalties),
		(val_div, ":map_talk_troop_personalityclash_penalties", 2),
		(troop_set_slot, "$map_talk_troop", slot_troop_personalityclash_penalties, ":map_talk_troop_personalityclash_penalties")
	]],

	[anyone, "companion_quitting_persuasion",
	[
		(store_random_in_range, ":random_in_range_-2_13", -2, 13),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(store_skill_level, reg0, "skl_leadership", "trp_player"),
		(val_max, ":skill_level_persuasion_player", reg0),
		(le, ":random_in_range_-2_13", ":skill_level_persuasion_player")
	],
	"Hm. When you put it like that, I suppose I can stay a while longer, see if things improve.", "close_window",
	[
		(troop_get_slot, ":map_talk_troop_morality_penalties", "$map_talk_troop", slot_troop_morality_penalties),
		(val_div, ":map_talk_troop_morality_penalties", 2),
		(troop_set_slot, "$map_talk_troop", slot_troop_morality_penalties, ":map_talk_troop_morality_penalties"),
		(troop_get_slot, ":map_talk_troop_personalityclash_penalties", "$map_talk_troop", slot_troop_personalityclash_penalties),
		(val_div, ":map_talk_troop_personalityclash_penalties", 2),
		(troop_set_slot, "$map_talk_troop", slot_troop_personalityclash_penalties, ":map_talk_troop_personalityclash_penalties")
	]],

	[anyone, "companion_quitting_persuasion",
	[],
	"I'm sorry, but I don't see your point. I am leaving whether you like it or not.", "companion_quitting_response",
	[]],

	[anyone|plyr, "companion_quitting_response",
	[
		(eq, "$disable_npc_complaints", 1),
		(eq, "$player_can_refuse_npc_quitting", 1)
	],
	"We hang deserters in this company.", "companion_quitting_no",
	[]],

	[anyone, "companion_quitting_no",
	[
		(troop_get_slot, ":g_talk_troop_lord_reputation_type", "$g_talk_troop", slot_lord_reputation_type),
		(this_or_next|eq, ":g_talk_troop_lord_reputation_type", 1),
		(this_or_next|eq, ":g_talk_troop_lord_reputation_type", 3),
		(eq, ":g_talk_troop_lord_reputation_type", 2)
	],
	"I believe I misheard you.  You certainly could not have been threatening me.", "companion_quitting_no_confirm",
	[]],

	[anyone, "companion_quitting_no",
	[],
	"Oh... Right... Do you mean that?", "companion_quitting_no_confirm",
	[]],

	[anyone|plyr, "companion_quitting_no_confirm",
	[],
	"Absolutely. You either leave this company by my command, or are carried out on your shield.", "companion_quitting_no_confirmed",
	[
		(call_script, "script_dplmc_get_troop_morality_value", "$g_talk_troop", 2),
		(try_begin),
			(lt, reg0, 0),
			(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(else_try),
			(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -5),
		(try_end),
		(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
			(neq, ":troop", "$g_talk_troop"),
			(main_party_has_troop, ":troop"),
			(call_script, "script_dplmc_get_troop_morality_value", ":troop", 2),
			(try_begin),
				(lt, reg0, 0),
				(call_script, "script_change_player_relation_with_troop", ":troop", 1),
			(else_try),
				(gt, reg0, 0),
				(call_script, "script_change_player_relation_with_troop", ":troop", -1),
			(try_end),
		(try_end)
	]],

	[anyone|plyr, "companion_quitting_no_confirm",
	[],
	"No, actually I don't mean that. You are free to leave.", "companion_quitting_yes",
	[]],

	[anyone, "companion_quitting_yes",
	[],
	"Then this is goodbye. Perhaps I'll see you around, {playername}.", "close_window",
	[
		(troop_set_slot, "$map_talk_troop", slot_troop_playerparty_history, 3),
		(call_script, "script_retire_companion", "$map_talk_troop", 100)
	]],

	[anyone, "companion_quitting_no_confirmed",
	[],
	"Hm. I suppose I'm staying, then.", "close_window",
	[]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(is_between, "$map_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(eq, "$map_talk_troop", "$npc_with_grievance"),
		(eq, "$npc_map_talk_context", 61),
		(try_begin),
			(eq, "$npc_grievance_slot", 61),
			(troop_get_slot, ":map_talk_troop_morality_speech", "$map_talk_troop", slot_troop_morality_speech),
		(else_try),
			(troop_get_slot, ":map_talk_troop_morality_speech", "$map_talk_troop", slot_troop_2ary_morality_speech),
		(try_end),
		(str_store_string, 21, "$npc_grievance_string"),
		(str_store_string, 5, ":map_talk_troop_morality_speech")
	],
	"{s5}", "companion_objection_response",
	[
		(assign, "$npc_with_grievance", 0)
	]],

	[anyone|plyr, "companion_objection_response",
	[
		(eq, "$npc_praise_not_complaint", 1)
	],
	"Thanks, I appreciate your support.", "close_window",
	[
		(troop_set_slot, "$map_talk_troop", "$npc_grievance_slot", 1)
	]],

	[anyone|plyr, "companion_objection_response",
	[
		(eq, "$npc_praise_not_complaint", 0)
	],
	"Hopefully it won't happen again.", "close_window",
	[
		(troop_set_slot, "$map_talk_troop", "$npc_grievance_slot", 1)
	]],

	[anyone|plyr, "companion_objection_response",
	[
		(eq, "$npc_praise_not_complaint", 0)
	],
	"Your objection is noted. Now fall back in line.", "close_window",
	[
		(troop_set_slot, "$map_talk_troop", "$npc_grievance_slot", 2),
		(troop_get_slot, ":map_talk_troop_morality_penalties", "$map_talk_troop", slot_troop_morality_penalties),
		(val_add, ":map_talk_troop_morality_penalties", 10),
		(troop_set_slot, "$map_talk_troop", slot_troop_morality_penalties, ":map_talk_troop_morality_penalties")
	]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(is_between, "$map_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(eq, "$map_talk_troop", "$npc_with_personality_clash_2"),
		(eq, "$npc_map_talk_context", 74),
		(troop_get_slot, ":map_talk_troop_personalityclash2_speech", "$map_talk_troop", slot_troop_personalityclash2_speech),
		(troop_get_slot, ":map_talk_troop_personalityclash2_object", "$map_talk_troop", slot_troop_personalityclash2_object),
		(str_store_troop_name, 11, ":map_talk_troop_personalityclash2_object"),
		(str_store_string, 5, ":map_talk_troop_personalityclash2_speech")
	],
	"{s5}", "companion_personalityclash2_b",
	[
		(assign, "$npc_with_personality_clash_2", 0),
		(troop_get_slot, ":map_talk_troop_personalityclash_penalties", "$map_talk_troop", slot_troop_personalityclash_penalties),
		(val_add, ":map_talk_troop_personalityclash_penalties", 5),
		(troop_set_slot, "$map_talk_troop", slot_troop_personalityclash_penalties, ":map_talk_troop_personalityclash_penalties"),
		(troop_get_slot, ":map_talk_troop_personalityclash2_object", "$map_talk_troop", slot_troop_personalityclash2_object),
		(call_script, "script_troop_change_relation_with_troop", "$map_talk_troop", ":map_talk_troop_personalityclash2_object", -15)
	]],

	[anyone, "companion_personalityclash2_b",
	[],
	"{s5}", "companion_personalityclash2_response",
	[
		(troop_get_slot, ":map_talk_troop_personalityclash2_speech_b", "$map_talk_troop", slot_troop_personalityclash2_speech_b),
		(troop_get_slot, ":map_talk_troop_personalityclash2_object", "$map_talk_troop", slot_troop_personalityclash2_object),
		(str_store_troop_name, 11, ":map_talk_troop_personalityclash2_object"),
		(str_store_string, 5, ":map_talk_troop_personalityclash2_speech_b")
	]],

	[anyone|plyr, "companion_personalityclash2_response",
	[
		(troop_get_slot, ":map_talk_troop_personalityclash2_object", "$map_talk_troop", slot_troop_personalityclash2_object),
		(str_store_troop_name, 11, ":map_talk_troop_personalityclash2_object"),
		(assign, reg11, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":map_talk_troop_personalityclash2_object"),
			(assign, reg11, 1),
		(try_end)
	],
	"{s11} is a valuable member of this company. I don't want you picking any more fights with {reg11?her:him}.", "close_window",
	[
		(troop_set_slot, "$map_talk_troop", slot_troop_personalityclash2_state, 1)
	]],

	[anyone|plyr, "companion_personalityclash2_response",
	[
		(troop_get_slot, ":map_talk_troop_personalityclash2_object", "$map_talk_troop", slot_troop_personalityclash2_object),
		(str_store_troop_name, 11, ":map_talk_troop_personalityclash2_object"),
		(assign, reg11, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":map_talk_troop_personalityclash2_object"),
			(assign, reg11, 1),
		(try_end)
	],
	"Tell {s11} you have my support in this, and {reg11?she:he} should hold {reg11?her:his} tongue.", "close_window",
	[
		(troop_set_slot, "$map_talk_troop", slot_troop_personalityclash2_state, 2)
	]],

	[anyone|plyr, "companion_personalityclash2_response",
	[],
	"I don't have time for your petty dispute. Do not bother me with this again.", "close_window",
	[
		(troop_set_slot, "$map_talk_troop", slot_troop_personalityclash2_state, 3)
	]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(is_between, "$map_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(eq, "$map_talk_troop", "$npc_with_personality_clash"),
		(eq, "$npc_map_talk_context", 72),
		(troop_get_slot, ":map_talk_troop_personalityclash_speech", "$map_talk_troop", slot_troop_personalityclash_speech),
		(troop_get_slot, ":map_talk_troop_personalityclash_object", "$map_talk_troop", slot_troop_personalityclash_object),
		(str_store_troop_name, 11, ":map_talk_troop_personalityclash_object"),
		(str_store_string, 5, ":map_talk_troop_personalityclash_speech")
	],
	"{s5}", "companion_personalityclash_b",
	[
		(assign, "$npc_with_personality_clash", 0),
		(troop_get_slot, ":map_talk_troop_personalityclash_penalties", "$map_talk_troop", slot_troop_personalityclash_penalties),
		(val_add, ":map_talk_troop_personalityclash_penalties", 5),
		(troop_set_slot, "$map_talk_troop", slot_troop_personalityclash_penalties, ":map_talk_troop_personalityclash_penalties"),
		(troop_get_slot, ":map_talk_troop_personalityclash_object", "$map_talk_troop", slot_troop_personalityclash_object),
		(call_script, "script_troop_change_relation_with_troop", "$map_talk_troop", ":map_talk_troop_personalityclash_object", -15)
	]],

	[anyone, "companion_personalityclash_b",
	[],
	"{s5}", "companion_personalityclash_response",
	[
		(troop_get_slot, ":map_talk_troop_personalityclash_speech_b", "$map_talk_troop", slot_troop_personalityclash_speech_b),
		(troop_get_slot, ":map_talk_troop_personalityclash_object", "$map_talk_troop", slot_troop_personalityclash_object),
		(str_store_troop_name, 11, ":map_talk_troop_personalityclash_object"),
		(str_store_string, 5, ":map_talk_troop_personalityclash_speech_b")
	]],

	[anyone|plyr, "companion_personalityclash_response",
	[
		(troop_get_slot, ":map_talk_troop_personalityclash_object", "$map_talk_troop", slot_troop_personalityclash_object),
		(str_store_troop_name, 11, ":map_talk_troop_personalityclash_object"),
		(assign, reg11, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":map_talk_troop_personalityclash_object"),
			(assign, reg11, 1),
		(try_end)
	],
	"{s11} is a capable member of this company. I don't want you picking any more fights with {reg11?her:him}.", "close_window",
	[
		(troop_set_slot, "$map_talk_troop", slot_troop_personalityclash_state, 1)
	]],

	[anyone|plyr, "companion_personalityclash_response",
	[
		(troop_get_slot, ":map_talk_troop_personalityclash_object", "$map_talk_troop", slot_troop_personalityclash_object),
		(str_store_troop_name, 11, ":map_talk_troop_personalityclash_object"),
		(assign, reg11, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":map_talk_troop_personalityclash_object"),
			(assign, reg11, 1),
		(try_end)
	],
	"Tell {s11} you have my support in this, and {reg11?she:he} should hold {reg11?her:his} tongue.", "close_window",
	[
		(troop_set_slot, "$map_talk_troop", slot_troop_personalityclash_state, 2)
	]],

	[anyone|plyr, "companion_personalityclash_response",
	[],
	"I don't have time for your petty dispute. Do not bother me with this again.", "close_window",
	[
		(troop_set_slot, "$map_talk_troop", slot_troop_personalityclash_state, 3)
	]],

	[anyone, "event_triggered",
	[
		(eq, "$npc_map_talk_context", 76),
		(store_conversation_troop, "$map_talk_troop"),
		(is_between, "$map_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(eq, "$map_talk_troop", "$npc_with_personality_match"),
		(troop_get_slot, ":map_talk_troop_personalitymatch_speech", "$map_talk_troop", slot_troop_personalitymatch_speech),
		(troop_get_slot, ":map_talk_troop_personalitymatch_object", "$map_talk_troop", slot_troop_personalitymatch_object),
		(str_store_troop_name, 11, ":map_talk_troop_personalitymatch_object"),
		(str_store_string, 5, ":map_talk_troop_personalitymatch_speech")
	],
	"{s5}", "companion_personalitymatch_b",
	[
		(assign, "$npc_with_personality_match", 0),
		(troop_get_slot, ":map_talk_troop_personalitymatch_object", "$map_talk_troop", slot_troop_personalitymatch_object),
		(call_script, "script_troop_change_relation_with_troop", "$map_talk_troop", ":map_talk_troop_personalitymatch_object", 15)
	]],

	[anyone, "companion_personalitymatch_b",
	[
		(troop_get_slot, ":map_talk_troop_personalitymatch_speech_b", "$map_talk_troop", slot_troop_personalitymatch_speech_b),
		(troop_get_slot, ":map_talk_troop_personalitymatch_object", "$map_talk_troop", slot_troop_personalitymatch_object),
		(str_store_troop_name, 11, ":map_talk_troop_personalitymatch_object"),
		(str_store_string, 5, ":map_talk_troop_personalitymatch_speech_b")
	],
	"{s5}", "companion_personalitymatch_response",
	[]],

	[anyone|plyr, "companion_personalitymatch_response",
	[],
	"Very good.", "close_window",
	[
		(troop_set_slot, "$map_talk_troop", slot_troop_personalitymatch_state, 1)
	]],

	[anyone, "event_triggered",
	[
		(eq, "$npc_map_talk_context", 139),
		(store_conversation_troop, "$map_talk_troop"),
		(is_between, "$map_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(store_sub, ":value", "$map_talk_troop", "trp_npc1"),
		(store_add, ":value_2", "str_npc1_woman_to_woman", ":value"),
		(str_store_string, 5, ":value_2")
	],
	"{s5}", "companion_sisterly_advice",
	[
		(troop_set_slot, "$map_talk_troop", slot_troop_woman_to_woman_string, -1),
		(assign, "$npc_with_sisterly_advice", 0)
	]],

	[anyone|plyr, "companion_sisterly_advice",
	[],
	"Thank you.", "close_window",
	[]],

	[anyone|plyr, "companion_sisterly_advice",
	[],
	"I would prefer not to discuss such things.", "close_window",
	[
		(assign, "$disable_sisterly_advice", 1)
	]],

	[anyone, "event_triggered",
	[
		(eq, "$g_infinite_camping", 0),
		(eq, "$npc_map_talk_context", 60),
		(store_conversation_troop, "$map_talk_troop"),
		(is_between, "$map_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(troop_get_slot, ":map_talk_troop_home_intro", "$map_talk_troop", slot_troop_home_intro),
		(str_store_string, 5, ":map_talk_troop_home_intro")
	],
	"{s5}", "companion_home_description",
	[
		(troop_set_slot, "$map_talk_troop", slot_troop_home_speech_delivered, 1)
	]],

	[anyone|plyr, "companion_home_description",
	[],
	"Tell me more.", "companion_home_description_2",
	[]],

	[anyone|plyr, "companion_home_description",
	[],
	"We don't have time to chat just now.", "close_window",
	[]],

	[anyone|plyr, "companion_home_description",
	[],
	"I prefer my companions not to bother me with such trivialities.", "close_window",
	[
		(assign, "$disable_local_histories", 1)
	]],

	[anyone, "companion_home_description_2",
	[
		(troop_get_slot, ":map_talk_troop_home_description", "$map_talk_troop", slot_troop_home_description),
		(str_store_string, 5, ":map_talk_troop_home_description")
	],
	"{s5}", "companion_home_description_3",
	[]],

	[anyone, "companion_home_description_3",
	[
		(troop_get_slot, ":map_talk_troop_home_description_2", "$map_talk_troop", slot_troop_home_description_2),
		(str_store_string, 5, ":map_talk_troop_home_description_2")
	],
	"{s5}", "close_window",
	[]],

	[anyone, "event_triggered",
	[
		(eq, "$talk_context", 15),
		(store_conversation_troop, "$g_talk_troop"),
		(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
		(str_store_faction_name, 3, ":g_talk_troop_original_faction"),
		(str_store_string, 6, "@{playername}, when we started our long walk, few people had the courage to support me. And fewer still would be willing to put their lives at risk for my cause. But you didn't hesitate for a moment in throwing yourself at my enemies. We have gone through a lot together, and there were times I came close to losing all hope. But with the help of the gods, we prevailed. It is now time for me to leave your company and take what's rightfully mine. From now on, I will carry out the great responsibility of ruling {s3}. There still lie many challenges ahead and I count on your help in overcoming those. And of course, you will always remain as my foremost vassal.")
	],
	"{s6}", "rebel_thanks_answer",
	[
		(unlock_achievement, 47),
		(call_script, "script_end_quest", "qst_rebel_against_kingdom")
	],
	"4"],

	[anyone|plyr, "rebel_thanks_answer",
	[],
	"It was an honour to fight for your cause, {my lady/my lord}.", "rebel_thanks_answer_2",
	[]],

	[anyone|plyr, "rebel_thanks_answer",
	[],
	"You will always have my loyal support, my liege.", "rebel_thanks_answer_2",
	[]],

	[anyone, "rebel_thanks_answer_2",
	[],
	"I will miss living this life of adventure with you, but my duties await me. So... farewell for now, {playername}. I hope I'll see you again soon.", "close_window",
	[]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(is_between, "$map_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(eq, "$map_talk_troop", "$npc_with_political_grievance"),
		(eq, "$npc_map_talk_context", 145),
		(store_sub, ":value", "$g_talk_troop", "trp_npc1"),
		(store_add, ":value_2", "str_npc1_kingsupport_objection", ":value"),
		(str_store_string, 21, ":value_2")
	],
	"{s21}", "companion_political_grievance_response",
	[
		(assign, "$npc_with_political_grievance", 0),
		(troop_set_slot, "$map_talk_troop", slot_troop_kingsupport_objection_state, 2)
	]],

	[anyone|plyr, "companion_political_grievance_response",
	[],
	"Your opinion is noted.", "close_window",
	[
		(troop_get_slot, ":map_talk_troop_morality_penalties", "$map_talk_troop", slot_troop_morality_penalties),
		(val_add, ":map_talk_troop_morality_penalties", 25),
		(troop_set_slot, "$map_talk_troop", slot_troop_morality_penalties, ":map_talk_troop_morality_penalties")
	]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(is_between, "$map_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(neg|main_party_has_troop, "$map_talk_troop"),
		(troop_slot_eq, "$map_talk_troop", slot_troop_current_mission, 8),
		(troop_slot_eq, "$map_talk_troop", slot_troop_occupation, 5),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific")
	],
	"Greetings, {s21}. Are you ready for me to rejoin you?", "companion_rejoin_response",
	[
		(assign, "$npc_to_rejoin_party", 0)
	]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(is_between, "$map_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 1),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific")
	],
	"Well, {s21}, at last I've found you. I've been out spreading the word about your claim, and am now ready to rejoin the company.", "companion_rejoin_response",
	[
		(assign, "$npc_to_rejoin_party", 0),
		(call_script, "script_change_player_right_to_rule", 3),
		(troop_set_slot, "$g_talk_troop", slot_troop_kingsupport_state, 1),
		(try_begin),
			(is_between, "$player_right_to_rule", 10, 15),
			(call_script, "script_add_log_entry", 24, "trp_player", 0, 0, 0),
		(else_try),
			(is_between, "$player_right_to_rule", 20, 25),
			(call_script, "script_add_log_entry", 25, "trp_player", 0, 0, 0),
		(try_end)
	]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(is_between, "$map_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_slot_eq, "$map_talk_troop", slot_troop_current_mission, 2),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific"),
		(troop_get_slot, ":map_talk_troop_town_with_contacts", "$map_talk_troop", slot_troop_town_with_contacts),
		(store_faction_of_party, ":faction_of_party_map_talk_troop_town_with_contacts", ":map_talk_troop_town_with_contacts"),
		(call_script, "script_update_faction_political_notes", ":faction_of_party_map_talk_troop_town_with_contacts"),
		(assign, ":var_4", reg0),
		(val_add, ":var_4", reg0),
		(val_add, ":var_4", reg1),
		(str_store_faction_name, 12, ":faction_of_party_map_talk_troop_town_with_contacts"),
		(try_begin),
			(ge, ":var_4", 60),
			(str_store_string, 11, "str_the_s12_is_a_labyrinth_of_rivalries_and_grudges_lords_ignore_their_lieges_summons_and_many_are_ripe_to_defect"),
		(else_try),
			(ge, ":var_4", 40),
			(str_store_string, 11, "str_the_s12_is_shaky_many_lords_do_not_cooperate_with_each_other_and_some_might_be_tempted_to_defect_to_a_liege_that_they_consider_more_worthy"),
		(else_try),
			(ge, ":var_4", 20),
			(str_store_string, 11, "str_the_s12_is_fairly_solid_some_lords_bear_enmities_for_each_other_but_they_tend_to_stand_together_against_outside_enemies"),
		(else_try),
			(str_store_string, 11, "str_the_s12_is_a_rock_of_stability_politically_speaking_whatever_the_lords_may_think_of_each_other_they_fight_as_one_against_the_common_foe"),
		(try_end),
		(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(eq, ":faction_of_troop_troop", ":faction_of_party_map_talk_troop_town_with_contacts"),
			(call_script, "script_update_troop_political_notes", ":troop"),
		(try_end)
	],
	"Well, {s21}, at last I've found you. {s11}. The rest of my report I submit to you in writing.", "companion_rejoin_response",
	[]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$map_talk_troop"),
		(is_between, "$map_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(eq, "$map_talk_troop", "$npc_to_rejoin_party"),
		(troop_get_slot, ":g_talk_troop_current_mission", "$g_talk_troop", slot_troop_current_mission),
		(this_or_next|eq, ":g_talk_troop_current_mission", 3),
		(this_or_next|eq, ":g_talk_troop_current_mission", 4),
		(this_or_next|eq, ":g_talk_troop_current_mission", 6),
		(this_or_next|eq, ":g_talk_troop_current_mission", 7),
		(eq, ":g_talk_troop_current_mission", 5),
		(troop_get_slot, ":map_talk_troop_honorific", "$map_talk_troop", slot_troop_honorific),
		(str_store_string, 21, ":map_talk_troop_honorific"),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 31, ":g_talk_troop_mission_object"),
		(call_script, "script_npc_decision_checklist_peace_or_war", ":g_talk_troop_mission_object", "fac_player_supporters_faction", "$g_talk_troop"),
		(assign, "$g_mission_result", reg0),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(display_message, "@{!} DEBUG - Native checklist-peace-or-war result {reg0}, because {s14}"),
		(try_end),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_mission_object_leader")
	],
	"Well, {s21}, at last I've found you. I have returned from my mission to {s31}. In general, I would say, {s14}. Nevertheless I tried to convince {reg0?her:him}.", "companion_embassy_results",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 5),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(neg|faction_slot_ge, ":g_talk_troop_mission_object", 32, 1),
		(assign, ":var_2", "$g_mission_result"),
		(ge, ":var_2", 0),
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(store_relation, reg0, ":value", ":g_talk_troop_mission_object"),
		(this_or_next|ge, reg0, 0),
		(ge, ":var_2", 1),
		(is_between, "$g_player_court", "p_town_1", "p_salt_mine"),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(neg|party_slot_eq, "$g_player_court", 402, ":g_talk_troop_mission_object_leader"),
		(neg|troop_slot_eq, ":g_talk_troop_mission_object_leader", slot_troop_home, "$g_player_court"),
		(assign, ":var_5", 0),
		(assign, ":var_6", 0),
		(assign, ":var_7", 0),
		(store_current_hours, ":current_hours"),
		(store_sub, ":value_2", ":current_hours", 504),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(assign, ":value_3", 2),
			(try_begin),
				(party_slot_eq, ":party", slot_party_type, 3),
				(assign, ":value_3", 4),
			(try_end),
			(val_add, ":var_5", ":value_3"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(try_begin),
				(eq, ":faction_of_party_party", ":g_talk_troop_mission_object"),
				(val_add, ":var_6", ":value_3"),
			(else_try),
				(assign, ":value_4", 0),
				(try_begin),
					(this_or_next|troop_slot_eq, ":g_talk_troop_mission_object_leader", slot_troop_home, ":party"),
					(this_or_next|party_slot_eq, ":party", slot_center_original_faction, ":g_talk_troop_mission_object"),
					(party_slot_eq, ":party", 402, ":g_talk_troop_mission_object_leader"),
					(assign, ":value_4", 1),
				(else_try),
					(this_or_next|party_slot_eq, ":party", 401, ":g_talk_troop_mission_object_leader"),
					(party_slot_eq, ":party", slot_center_ex_faction, ":g_talk_troop_mission_object"),
					(party_slot_ge, ":party", 403, ":value_2"),
					(assign, ":value_4", 1),
				(try_end),
				(eq, ":value_4", 0),
				(this_or_next|eq, ":faction_of_party_party", "fac_player_supporters_faction"),
				(eq, ":faction_of_party_party", "$players_kingdom"),
				(val_add, ":var_7", ":value_3"),
			(try_end),
		(try_end),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(lt, ":var_7", 1),
			(display_message, "@{!} Recognition refused because player owns no fortresses not claimed by target faction"),
		(try_end),
		(ge, ":var_7", 1),
		(val_add, ":var_5", 2),
		(val_add, ":var_7", 2),
		(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
			(assign, ":value_5", 2),
			(try_begin),
				(troop_slot_ge, ":troop", 52, 8),
				(assign, ":value_5", 1),
			(try_end),
			(try_begin),
				(this_or_next|is_between, ":troop", "trp_kingdom_1_lord", "trp_knight_1_1"),
				(this_or_next|is_between, ":troop", "trp_knight_1_1", "trp_kingdom_1_pretender"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(val_add, ":var_5", ":value_5"),
			(try_end),
			(troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(try_begin),
				(eq, ":faction_of_troop_troop", ":g_talk_troop_mission_object"),
				(val_add, ":var_6", ":value_5"),
			(else_try),
				(this_or_next|eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
				(eq, ":faction_of_troop_troop", "$players_kingdom"),
				(val_add, ":var_7", ":value_5"),
			(try_end),
		(try_end),
		(store_sub, ":value_6", "fac_kingdoms_end", "fac_kingdom_1"),
		(val_max, ":value_6", 2),
		(store_div, ":value_7", ":var_5", ":value_6"),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(assign, reg0, ":var_7"),
			(assign, reg1, ":var_6"),
			(assign, reg2, ":value_7"),
			(display_message, "@{!} Military strength check: Player faction score {reg0}, target faction score {reg1}, benchmark score {reg2}"),
		(try_end),
		(store_add, ":value_8", "$player_right_to_rule", 1),
		(val_mul, ":value_8", 2),
		(val_add, ":value_8", 2),
		(val_div, ":value_8", 5),
		(val_add, ":value_8", 60),
		(call_script, "script_troop_get_player_relation", ":g_talk_troop_mission_object_leader"),
		(try_begin),
			(ge, reg0, 0),
			(val_div, reg0, 5),
		(else_try),
			(lt, reg0, 0),
			(val_mul, reg0, 2),
			(val_div, reg0, 5),
		(try_end),
		(val_add, ":value_8", reg0),
		(val_clamp, ":value_8", 20, 121),
		(val_mul, ":var_7", ":value_8"),
		(val_div, ":var_7", 100),
		(try_begin),
			(le, ":var_2", -1),
			(val_max, ":var_6", ":value_7"),
		(else_try),
			(le, ":var_2", 1),
			(val_add, ":var_6", ":value_7"),
			(val_div, ":var_6", 2),
		(else_try),
			(ge, ":var_2", 2),
			(val_min, ":var_6", ":value_7"),
		(try_end),
		(store_random_in_range, reg0, 0, 21),
		(store_add, ":value_8", 90, reg0),
		(val_max, ":var_2", -5),
		(val_min, ":var_2", 5),
		(store_mul, reg0, ":var_2", -10),
		(try_begin),
			(lt, ":var_2", 0),
			(val_mul, reg0, 2),
		(try_end),
		(val_add, ":value_8", reg0),
		(try_begin),
			(eq, ":g_talk_troop_mission_object", "$players_oath_renounced_against_kingdom"),
			(val_add, ":value_8", 20),
		(else_try),
			(store_relation, reg0, ":value", ":g_talk_troop_mission_object"),
			(lt, reg0, 0),
			(lt, ":var_2", 1),
			(val_add, ":value_8", 10),
		(try_end),
		(val_mul, ":var_6", reg0),
		(val_div, ":var_6", 100),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(assign, reg0, ":var_7"),
			(assign, reg1, ":var_6"),
			(display_message, "@{!} Player faction score for recognition is {reg0}, needs to be at least {reg1}"),
		(try_end),
		(ge, ":var_7", ":var_6"),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(str_store_party_name, 4, "$g_player_court")
	],
	"In this letter, {s12} addresses you as {Lord/Lady} of {s4}, which implies some sort of recognition that you are a sovereign and independent monarch.", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(try_begin),
			(faction_slot_eq, ":g_talk_troop_mission_object", slot_faction_recognized_player, 0),
			(faction_set_slot, ":g_talk_troop_mission_object", slot_faction_recognized_player, 1),
			(call_script, "script_change_player_right_to_rule", 10),
		(try_end)
	]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 5),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(this_or_next|ge, "$g_mission_result", 2),
		(faction_slot_eq, ":g_talk_troop_mission_object", slot_faction_recognized_player, 1),
		(neg|is_between, "$g_player_court", "p_town_1", "p_salt_mine"),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_mission_object_leader")
	],
	"In {reg0?her:his} letter, {s12} merely refers to you as {playername}, omitting any title. This does not constitute recognition of your right to rule. The letter implies that {reg0?she:he} is unwilling to extend recognition due to your lack of a court.", "companion_rejoin_response",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 5),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(this_or_next|ge, "$g_mission_result", 2),
		(faction_slot_eq, ":g_talk_troop_mission_object", slot_faction_recognized_player, 1),
		(is_between, "$g_player_court", "p_town_1", "p_salt_mine"),
		(assign, ":var_3", 0),
		(str_clear, 0),
		(str_clear, 1),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(this_or_next|eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(eq, ":faction_of_party_party", "$players_kingdom"),
			(assign, reg0, 0),
			(try_begin),
				(this_or_next|party_slot_eq, ":party", 402, ":g_talk_troop_mission_object_leader"),
				(troop_slot_eq, ":g_talk_troop_mission_object_leader", slot_troop_home, ":party"),
				(assign, reg0, 1),
			(else_try),
				(eq, ":party", "$g_player_court"),
				(party_slot_eq, ":party", slot_center_original_faction, ":g_talk_troop_mission_object"),
				(assign, reg0, 1),
			(try_end),
			(eq, reg0, 1),
			(try_begin),
				(ge, ":var_3", 2),
				(str_store_string, 0, "str_dplmc_s0_comma_s1"),
			(else_try),
				(eq, ":var_3", 1),
				(str_store_string_reg, 0, 1),
			(try_end),
			(str_store_party_name, 1, ":party"),
			(val_add, ":var_3", 1),
		(try_end),
		(ge, ":var_3", 1),
		(try_begin),
			(eq, ":var_3", 1),
			(str_store_string_reg, 0, 1),
		(else_try),
			(str_store_string, 0, "str_dplmc_s0_and_s1"),
		(try_end),
		(str_clear, 1),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_mission_object_leader")
	],
	"In {reg0?her:his} letter, {s12} merely refers to you as {playername}, omitting any title. This does not constitute recognition of your right to rule. The letter implies that {reg0?she:he} is unwilling to extend recognition due to your occupation of {s0}.", "companion_rejoin_response",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 5),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(this_or_next|ge, "$g_mission_result", 2),
		(faction_slot_eq, ":g_talk_troop_mission_object", slot_faction_recognized_player, 1),
		(is_between, "$g_player_court", "p_town_1", "p_salt_mine"),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(neg|party_slot_eq, "$g_player_court", slot_center_original_faction, ":g_talk_troop_mission_object"),
		(assign, ":value", "p_village_1"),
		(try_for_range, ":party", "p_town_1", ":value"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(this_or_next|eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(eq, ":faction_of_party_party", "$players_kingdom"),
			(this_or_next|troop_slot_eq, ":g_talk_troop_mission_object_leader", slot_troop_home, ":party"),
			(party_slot_eq, ":party", 402, ":g_talk_troop_mission_object_leader"),
			(assign, ":value", ":party"),
		(try_end),
		(eq, ":value", "p_village_1"),
		(str_store_party_name, 4, "$g_player_court")
	],
	"In this letter, {s12} addresses you as {Lord/Lady} of {s4}, which implies some sort of recognition that you are a sovereign and independent monarch.", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(try_begin),
			(faction_slot_eq, ":g_talk_troop_mission_object", slot_faction_recognized_player, 0),
			(faction_set_slot, ":g_talk_troop_mission_object", slot_faction_recognized_player, 1),
			(call_script, "script_change_player_right_to_rule", 10),
		(try_end)
	]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 5),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(assign, ":value", "fac_player_supporters_faction"),
		(try_begin),
			(neg|faction_slot_eq, ":value", slot_faction_state, 0),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(assign, ":value", "$players_kingdom"),
		(try_end),
		(faction_get_slot, ":value_leader", ":value", slot_faction_leader),
		(neq, ":value_leader", "trp_player"),
		(this_or_next|is_between, ":value_leader", "trp_kingdom_1_lord", "trp_knight_1_1"),
		(is_between, ":value_leader", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(str_store_troop_name, 0, ":value_leader"),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_mission_object_leader")
	],
	"In this letter, {s12} addresses {reg0?her:his} response to {s0}, referring to you only as {s0}'s faithful vassal. This does not constitute recognition of your right to rule.", "companion_rejoin_response",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 5),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_mission_object_leader")
	],
	"In {reg0?her:his} letter, {s12} merely refers to you as {playername}, omitting any title. This does not constitute recognition of your right to rule.", "companion_rejoin_response",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 3),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_slot_ge, ":g_talk_troop_mission_object", 120, 1),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader")
	],
	"{s12} says that your current truce should suffice.", "companion_rejoin_response",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 3),
		(ge, "$g_mission_result", 1),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_mission_object_leader")
	],
	"{s12} says that {reg0?she:he} is willing to consider a truce of twenty days.", "companion_truce_confirm",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 3),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_mission_object_leader")
	],
	"{s12} says that {reg0?she:he} is unwilling to conclude a peace.", "companion_rejoin_response",
	[]],

	[anyone|plyr, "companion_truce_confirm",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object")
	],
	"Very well - let this truce with the {s4} be concluded.", "companion_rejoin_response",
	[
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(call_script, "script_diplomacy_start_peace_between_kingdoms", ":g_talk_troop_mission_object", "$players_kingdom", 1),
		(str_store_faction_name, 4, ":g_talk_troop_mission_object")
	]],

	[anyone|plyr, "companion_truce_confirm",
	[],
	"On second thought, perhaps this is currently not in our interests.", "companion_rejoin_response",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 4),
		(this_or_next|check_quest_active, "qst_join_faction"),
		(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader")
	],
	"{s12} says that you are already pledged to another ruler.", "companion_rejoin_response",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 4),
		(lt, "$g_mission_result", -2),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_mission_object_leader")
	],
	"{s12} says that {reg0?she:he} does not believe that you would honor your obligations as a vassal, and suspects that your offer is just a ploy.", "companion_rejoin_response",
	[]],

	[anyone, "companion_embassy_results",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_current_mission, 4),
		(troop_get_slot, ":g_talk_troop_mission_object", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, ":g_talk_troop_mission_object_leader", ":g_talk_troop_mission_object", slot_faction_leader),
		(str_store_troop_name, 12, ":g_talk_troop_mission_object_leader"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_mission_object_leader")
	],
	"{s12} says that {reg0?she:he} accepts your offer of vassalage. {reg0?She:He} will give you 20 days to seek {reg0?her:him} out, in which time {reg0?she:he} will refrain from making war on you.", "vassalage_offer_confirm",
	[]],

	[anyone|plyr, "vassalage_offer_confirm",
	[],
	"Tell {reg0?her:him} that I accept {reg0?her:his} terms...", "companion_rejoin_response",
	[
		(troop_get_slot, "$g_invite_faction", "$g_talk_troop", slot_troop_mission_object),
		(faction_get_slot, "$g_invite_faction_lord", "$g_invite_faction", slot_faction_leader),
		(str_store_troop_name, 1, "$g_invite_faction_lord"),
		(setup_quest_text, "qst_join_faction"),
		(str_store_troop_name_link, 3, "$g_invite_faction_lord"),
		(str_store_faction_name_link, 4, "$g_invite_faction"),
		(quest_set_slot, "qst_join_faction", slot_quest_giver_troop, "$g_invite_faction_lord"),
		(quest_set_slot, "qst_join_faction", slot_quest_expiration_days, 20),
		(try_begin),
			(store_relation, ":relation_g_invite_faction_player_supporters_faction", "$g_invite_faction", "fac_player_supporters_faction"),
			(lt, ":relation_g_invite_faction_player_supporters_faction", 0),
			(call_script, "script_diplomacy_start_peace_between_kingdoms", "$g_invite_faction", "fac_player_supporters_faction", 0),
			(quest_set_slot, "qst_join_faction", slot_quest_failure_consequence, 1),
		(try_end),
		(str_store_string, 2, "@Find and speak with {s3} of {s4} to give him your oath of homage."),
		(call_script, "script_start_quest", "qst_join_faction", "$g_invite_faction_lord"),
		(call_script, "script_report_quest_troop_positions", "qst_join_faction", "$g_invite_faction_lord", 3)
	]],

	[anyone|plyr, "companion_rejoin_response",
	[
		(hero_can_join, "p_main_party"),
		(neg|main_party_has_troop, "$map_talk_troop")
	],
	"Welcome back, friend!", "close_window",
	[
		(party_add_members, "p_main_party", "$map_talk_troop", 1),
		(assign, "$npc_to_rejoin_party", 0),
		(troop_set_slot, "$map_talk_troop", slot_troop_current_mission, 0),
		(troop_set_slot, "$map_talk_troop", slot_troop_days_on_mission, 0)
	]],

	[anyone|plyr, "companion_rejoin_response",
	[],
	"Unfortunately, I cannot take you back just yet.", "companion_rejoin_refused",
	[
		(troop_set_slot, "$map_talk_troop", slot_troop_current_mission, 8),
		(troop_set_slot, "$map_talk_troop", slot_troop_days_on_mission, 0),
		(assign, "$npc_to_rejoin_party", 0)
	]],

	[anyone, "companion_rejoin_refused",
	[],
	"As you wish. I will take care of some business, and try again in a few days.", "close_window",
	[]],

	[anyone, "event_triggered",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(neg|main_party_has_troop, "$g_talk_troop")
	],
	"Would you have me rejoin you?", "companion_rejoin_response",
	[
		(assign, "$map_talk_troop", "$g_talk_troop")
	]],

	[anyone, "event_triggered",
	[
		(eq, "$caravan_escort_state", 1),
		(eq, "$g_encountered_party", "$caravan_escort_party_id"),
		(le, "$talk_context", 2),
		(store_distance_to_party_from_party, reg0, "$caravan_escort_destination_town", "$caravan_escort_party_id"),
		(lt, reg0, 5),
		(str_store_party_name, 3, "$caravan_escort_destination_town"),
		(assign, reg3, "$caravan_escort_agreed_reward")
	],
	"There! I can see the walls of {s3} in the distance. We've made it safely. Here, take this purse of {reg3} coins, as I promised. I hope we can travel together again someday.", "close_window",
	[
		(assign, "$caravan_escort_state", 0),
		(call_script, "script_troop_add_gold", "trp_player", "$caravan_escort_agreed_reward"),
		(assign, reg4, "$caravan_escort_agreed_reward"),
		(val_mul, reg4, 1),
		(add_xp_as_reward, reg4),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(lt, "$talk_context", 4),
		(check_quest_active, "qst_wed_betrothed_female"),
		(quest_slot_eq, "qst_wed_betrothed_female", slot_quest_giver_troop, "$g_talk_troop"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 6),
		(store_current_hours, ":current_hours"),
		(troop_get_slot, ":g_talk_troop_betrothal_time", "$g_talk_troop", slot_troop_betrothal_time),
		(val_sub, ":current_hours", ":g_talk_troop_betrothal_time"),
		(lt, ":current_hours", 720),
		(str_clear, 12),
		(try_begin),
			(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 6),
			(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 0),
			(str_store_string, 12, "@ We will of course need to wait until the realm is no longer on campaign."),
		(try_end)
	],
	"My {lord/lady}, I look forward to our marriage, as soon as there is an opportunity to hold a proper feast.{s12}", "lord_start",
	[]],

	[anyone, "start",
	[
		(lt, "$talk_context", 4),
		(check_quest_active, "qst_wed_betrothed_female"),
		(quest_slot_eq, "qst_wed_betrothed_female", slot_quest_giver_troop, "$g_talk_troop"),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 6),
		(faction_get_slot, ":g_talk_troop_faction_ai_object", "$g_talk_troop_faction", slot_faction_ai_object),
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 7),
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_object, ":g_talk_troop_faction_ai_object"),
		(neq, ":g_talk_troop_faction_ai_object", "$g_encountered_party"),
		(str_store_party_name, 4, ":g_talk_troop_faction_ai_object")
	],
	"My {lord/lady}, if you wish to marry, we can proceed to the feast at {s4} to exchange vows before the lords of the realm.", "lord_start",
	[]],

	[anyone, "start",
	[
		(lt, "$talk_context", 4),
		(check_quest_active, "qst_wed_betrothed_female"),
		(quest_slot_eq, "qst_wed_betrothed_female", slot_quest_giver_troop, "$g_talk_troop"),
		(store_current_hours, ":current_hours"),
		(troop_get_slot, ":g_talk_troop_betrothal_time", "$g_talk_troop", slot_troop_betrothal_time),
		(val_sub, ":current_hours", ":g_talk_troop_betrothal_time"),
		(ge, ":current_hours", 720),
		(party_get_attached_to, ":attached_to_l_g_talk_troop_party", "$g_talk_troop_party"),
		(neg|is_between, ":attached_to_l_g_talk_troop_party", "p_town_1", "p_village_1"),
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 7),
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(str_store_party_name, 4, ":g_talk_troop_party_ai_object")
	],
	"My {lord/lady}, I grow tired of waiting for the lords of this realm to assemble. Come with me to {s4} exchange our vows.", "lord_start",
	[]],

	[anyone, "start",
	[
		(lt, "$talk_context", 4),
		(check_quest_active, "qst_wed_betrothed_female"),
		(quest_slot_eq, "qst_wed_betrothed_female", slot_quest_giver_troop, "$g_talk_troop"),
		(store_current_hours, ":current_hours"),
		(troop_get_slot, ":g_talk_troop_betrothal_time", "$g_talk_troop", slot_troop_betrothal_time),
		(val_sub, ":current_hours", ":g_talk_troop_betrothal_time"),
		(ge, ":current_hours", 0),
		(party_get_attached_to, ":attached_to_l_g_talk_troop_party", "$g_talk_troop_party"),
		(neg|is_between, ":attached_to_l_g_talk_troop_party", "p_town_1", "p_village_1")
	],
	"My {lord/lady}, I grow tired of waiting for the lords of this realm to assemble. Perhaps we should take the first opportunity to marry, in any great hall that is open to us.", "lord_start",
	[]],

	[anyone, "start",
	[
		(lt, "$talk_context", 4),
		(check_quest_active, "qst_wed_betrothed_female"),
		(quest_slot_eq, "qst_wed_betrothed_female", slot_quest_giver_troop, "$g_talk_troop"),
		(this_or_next|neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 6),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_object, "$g_encountered_party")
	],
	"My {lord/lady}, I have grown tired of waiting. Let us proceed with the vows immediately.", "lord_groom_vows",
	[]],

	[anyone, "start",
	[
		(lt, "$talk_context", 4),
		(check_quest_active, "qst_wed_betrothed_female"),
		(quest_slot_eq, "qst_wed_betrothed_female", slot_quest_giver_troop, "$g_talk_troop")
	],
	"My {lord/lady}, my eyes rejoice to see you. We may proceed with the vows.", "lord_groom_vows",
	[]],

	[anyone, "lord_groom_vows",
	[],
	"My {lord/lady}, with this assembly as my witness, I vow to take you as my {husband/wife}, to honor, cherish, and {obey/protect} you. My the heavens bless us with health, prosperity, and children.", "female_pc_marriage_vow",
	[]],

	[anyone|plyr, "female_pc_marriage_vow",
	[],
	"I vow to take you as my {reg65?wife:husband}.", "lord_groom_wedding_complete",
	[
		(call_script, "script_courtship_event_bride_marry_groom", "trp_player", "$g_talk_troop", 0),
		(call_script, "script_end_quest", "qst_wed_betrothed_female")
	]],

	[anyone|plyr, "female_pc_marriage_vow",
	[],
	"Wait -- I need to think about this.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_groom_wedding_complete",
	[],
	"We are now husband and wife. Let the festivities commence!", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 17),
		(check_quest_active, "qst_denounce_lord"),
		(check_quest_succeeded, "qst_denounce_lord"),
		(quest_slot_eq, "qst_denounce_lord", slot_quest_target_troop, "$g_talk_troop")
	],
	"Very well. You've made your point. I have nothing more to say.", "close_window",
	[
		(call_script, "script_change_troop_renown", "trp_player", 10),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 17),
		(check_quest_active, "qst_denounce_lord"),
		(check_quest_failed, "qst_denounce_lord"),
		(quest_slot_eq, "qst_denounce_lord", slot_quest_target_troop, "$g_talk_troop")
	],
	"Well! Please, do not trouble yourself to rise from the ground, as I would simply have to knock you down again. I shall take your silence as an apology. Good day to you.", "close_window",
	[
		(call_script, "script_change_troop_renown", "trp_player", -10),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 17),
		(assign, "$temp", 0),
		(try_begin),
			(check_quest_active, "qst_duel_avenge_insult"),
			(check_quest_succeeded, "qst_duel_avenge_insult"),
			(quest_slot_eq, "qst_duel_avenge_insult", slot_quest_target_troop, "$g_talk_troop"),
			(assign, "$temp", 1),
		(else_try),
			(check_quest_active, "qst_duel_for_lady"),
			(check_quest_succeeded, "qst_duel_for_lady"),
			(quest_slot_eq, "qst_duel_for_lady", slot_quest_target_troop, "$g_talk_troop"),
			(assign, "$temp", 2),
		(try_end),
		(gt, "$temp", 0)
	],
	"Very well. You've made your point. I retract what I said. I hope you have obtained satisfaction.", "close_window",
	[
		(try_begin),
			(eq, "$temp", 1),
			(call_script, "script_change_troop_renown", "trp_player", 10),
			(call_script, "script_end_quest", "qst_duel_avenge_insult"),
		(try_end),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 17),
		(assign, "$temp", 0),
		(try_begin),
			(check_quest_active, "qst_duel_avenge_insult"),
			(check_quest_failed, "qst_duel_avenge_insult"),
			(quest_slot_eq, "qst_duel_avenge_insult", slot_quest_target_troop, "$g_talk_troop"),
			(assign, "$temp", 1),
		(else_try),
			(check_quest_active, "qst_duel_for_lady"),
			(check_quest_failed, "qst_duel_for_lady"),
			(quest_slot_eq, "qst_duel_for_lady", slot_quest_target_troop, "$g_talk_troop"),
			(assign, "$temp", 2),
		(try_end),
		(gt, "$temp", 0)
	],
	"Hah! Not so gallant now, are we? Now trouble me no more.", "close_window",
	[
		(try_begin),
			(eq, "$temp", 1),
			(call_script, "script_change_troop_renown", "trp_player", -10),
			(call_script, "script_end_quest", "qst_duel_avenge_insult"),
		(try_end),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 17),
		(check_quest_active, "qst_duel_courtship_rival"),
		(check_quest_succeeded, "qst_duel_courtship_rival"),
		(quest_slot_eq, "qst_duel_courtship_rival", slot_quest_target_troop, "$g_talk_troop"),
		(quest_get_slot, ":duel_courtship_rival_giver_troop", "qst_duel_courtship_rival", slot_quest_giver_troop),
		(str_store_troop_name, 10, ":duel_courtship_rival_giver_troop")
	],
	"Very well -- you have won. Let all those present today witness that you have defeated me, and I shall abandon my suit of {s10}. Are you satisfied, you heartless {bastard/bitch}?", "close_window",
	[
		(quest_get_slot, ":duel_courtship_rival_giver_troop", "qst_duel_courtship_rival", slot_quest_giver_troop),
		(call_script, "script_courtship_event_lady_break_relation_with_suitor", ":duel_courtship_rival_giver_troop", "$g_talk_troop"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 17),
		(check_quest_active, "qst_duel_courtship_rival"),
		(check_quest_failed, "qst_duel_courtship_rival"),
		(quest_slot_eq, "qst_duel_courtship_rival", slot_quest_target_troop, "$g_talk_troop"),
		(quest_get_slot, ":duel_courtship_rival_giver_troop", "qst_duel_courtship_rival", slot_quest_giver_troop),
		(str_store_troop_name, 10, ":duel_courtship_rival_giver_troop"),
		(call_script, "script_dplmc_store_troop_is_female", ":duel_courtship_rival_giver_troop")
	],
	"Get up. Let all those present today witness that I have defeated you, and you are now bound to relinquish your suit of the {s10}. I will permit you one final visit, to make your farewells. After that, if you persist in attempting to see {reg0?her:him}, everyone shall know that you are a {man/woman} of scant honor.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 7)
	],
	"What do you want?", "player_siege_castle_commander_1",
	[]],

	[anyone|plyr, "player_siege_castle_commander_1",
	[],
	"Surrender! Your situation is hopeless!", "player_siege_ask_surrender",
	[]],

	[anyone|plyr, "player_siege_castle_commander_1",
	[],
	"Nothing. I'll leave you now.", "close_window",
	[]],

	[anyone, "player_siege_ask_surrender",
	[
		(lt, "$g_enemy_strength", 100),
		(store_mul, ":value", "$g_enemy_strength", 5),
		(ge, "$g_ally_strength", ":value")
	],
	"Perhaps... Do you give your word of honour that we'll be treated well?", "player_siege_ask_surrender_treatment",
	[]],

	[anyone, "player_siege_ask_surrender",
	[
		(lt, "$g_enemy_strength", 200),
		(store_mul, ":value", "$g_enemy_strength", 3),
		(ge, "$g_ally_strength", ":value")
	],
	"We are ready to leave this castle to you and march away if you give me your word of honour that you'll let us leave unmolested.", "player_siege_ask_leave_unmolested",
	[]],

	[anyone, "player_siege_ask_surrender",
	[
		(ge, "$g_dplmc_ai_changes", 0),
		(assign, reg0, 0),
		(try_begin),
			(neg|party_slot_eq, "$g_encountered_party", slot_party_type, 2),
			(neg|party_slot_eq, "$g_encountered_party", slot_party_type, 3),
			(try_begin),
				(ge, "$cheat_mode", 1),
				(assign, reg0, "$g_encountered_party"),
				(str_store_party_name, 0, "$g_encountered_party"),
				(party_get_slot, reg1, "$g_encountered_party", slot_party_type),
				(display_message, "@{!}Party at address {reg0} named {s0} has slot party type {reg1} (not castle or town)"),
			(try_end),
			(assign, reg0, 1),
		(try_end),
		(eq, reg0, 0),
		(store_mul, reg0, "$g_enemy_strength", 3),
		(ge, "$g_ally_strength", reg0),
		(game_get_reduce_campaign_ai, ":game_reduce_campaign_ai"),
		(this_or_next|lt, "$g_enemy_strength", 500),
		(ge, ":game_reduce_campaign_ai", 1),
		(this_or_next|lt, "$g_enemy_strength", 1000),
		(ge, ":game_reduce_campaign_ai", 2),
		(lt, "$g_enemy_strength", 2000),
		(assign, ":var_2", "$g_enemy_strength"),
		(val_max, ":var_2", 5),
		(try_begin),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
			(val_max, ":var_2", 10),
		(try_end),
		(assign, ":var_3", 0),
		(assign, ":var_4", 0),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(store_faction_of_party, reg0, ":party"),
			(try_begin),
				(eq, reg0, "$g_encountered_party_faction"),
				(val_add, ":var_3", 1),
			(try_end),
			(try_begin),
				(party_slot_eq, ":party", slot_center_original_faction, "$g_encountered_party_faction"),
				(val_add, ":var_4", 1),
			(try_end),
		(try_end),
		(gt, ":var_3", 1),
		(store_mul, reg0, ":var_3", 2),
		(gt, reg0, ":var_4"),
		(assign, ":value", 0),
		(try_begin),
			(is_between, "$g_encountered_party_faction", "fac_kingdom_1", "fac_kingdoms_end"),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_original_faction, "$g_encountered_party_faction"),
			(party_slot_eq, "$g_encountered_party", slot_center_original_faction, "$g_encountered_party_faction"),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|gt, ":var_3", ":var_4"),
		(eq, ":value", 0),
		(assign, ":var_7", 80),
		(try_begin),
			(call_script, "script_dplmc_get_troop_morality_value", "$g_talk_troop", 1),
			(lt, reg0, 0),
			(val_div, ":var_7", 2),
		(else_try),
			(this_or_next|ge, reg0, 1),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 3),
			(val_mul, ":var_7", 2),
		(else_try),
			(this_or_next|is_between, "$g_talk_troop", "trp_kingdom_1_lord", "trp_knight_1_1"),
			(this_or_next|is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
			(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
			(store_mul, reg0, ":var_3", 5),
			(val_div, reg0, 4),
			(this_or_next|lt, reg0, ":var_4"),
			(ge, ":value", 1),
			(val_mul, ":var_7", 2),
		(else_try),
			(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 22),
			(this_or_next|troop_slot_ge, "$g_talk_troop", 52, 21),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 8),
			(val_div, ":var_7", 2),
		(try_end),
		(try_begin),
			(is_between, "$g_talk_troop", "trp_npc1", "trp_heroes_end"),
			(troop_slot_eq, "$g_talk_troop", slot_troop_home, "$g_encountered_party"),
			(val_mul, ":var_7", 2),
		(try_end),
		(val_clamp, ":var_7", 40, 320),
		(try_begin),
			(lt, ":game_reduce_campaign_ai", 1),
			(val_mul, ":var_7", 3),
			(val_div, ":var_7", 2),
		(else_try),
			(eq, ":game_reduce_campaign_ai", 0),
		(else_try),
			(ge, ":game_reduce_campaign_ai", 2),
			(val_mul, ":var_7", 3),
			(val_add, ":var_7", 2),
			(val_div, ":var_7", 4),
		(try_end),
		(store_mul, ":value_2", ":var_2", ":var_7"),
		(store_mul, reg0, "$g_ally_strength", 10),
		(ge, reg0, ":value_2")
	],
	"We are ready to leave this castle to you and march away if you give me your word of honour that you'll let us leave unmolested.", "player_siege_ask_leave_unmolested",
	[]],

	[anyone, "player_siege_ask_surrender",
	[
		(this_or_next|party_slot_eq, "$g_encountered_party", slot_party_type, 2),
		(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
		(is_between, "$g_encountered_party_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(store_mul, reg0, "$g_enemy_strength", 4),
		(ge, "$g_ally_strength", reg0),
		(store_mul, reg0, "$g_enemy_strength", 8),
		(this_or_next|party_slot_eq, "$g_encountered_party", slot_center_original_faction, "$g_encountered_party_faction"),
		(ge, "$g_ally_strength", reg0),
		(str_store_faction_name, 0, "$g_talk_troop_faction"),
		(str_store_party_name, 1, "$g_encountered_party")
	],
	"The {s0} will never abandon {s1}!", "close_window",
	[]],

	[anyone, "player_siege_ask_surrender",
	[],
	"Surrender? Hah! We can hold these walls until we all die of old age.", "close_window",
	[]],

	[anyone|plyr, "player_siege_ask_surrender_treatment",
	[],
	"I give you nothing. Surrender now or prepare to die!", "player_siege_ask_surrender_treatment_reject",
	[]],

	[anyone, "player_siege_ask_surrender_treatment_reject",
	[],
	"{Bastard/Bitch}. We will fight you to the last man!", "close_window",
	[]],

	[anyone|plyr, "player_siege_ask_surrender_treatment",
	[],
	"You will be ransomed and your soldiers will live. I give you my word.", "player_siege_ask_surrender_treatment_accept",
	[]],

	[anyone, "player_siege_ask_surrender_treatment_accept",
	[],
	"Very well then. Under those terms, I offer you my surrender.", "close_window",
	[
		(assign, "$g_enemy_surrenders", 1)
	]],

	[anyone|plyr, "player_siege_ask_leave_unmolested",
	[],
	"You have my word. You will not come under attack if you leave the castle.", "player_siege_ask_leave_unmolested_accept",
	[]],

	[anyone, "player_siege_ask_leave_unmolested_accept",
	[],
	"Very well. Then we leave this castle to you. You have won this day. But we'll meet again.", "close_window",
	[
		(assign, "$g_castle_left_to_player", 1)
	]],

	[anyone|plyr, "player_siege_ask_leave_unmolested",
	[],
	"Unacceptable. I want prisoners.", "player_siege_ask_leave_unmolested_reject",
	[]],

	[anyone, "player_siege_ask_leave_unmolested_reject",
	[],
	"Then we will defend this castle to the death, and this parley is done. Farewell.", "close_window",
	[]],

	[anyone|plyr, "lord_prison_break",
	[],
	"I've come to get you out of here", "lord_prison_break_confirm",
	[]],

	[anyone|plyr, "lord_prison_break",
	[],
	"Never mind -- just stay quiet", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_mission_participation, 1),
		(assign, "$g_reset_mission_participation", 1)
	]],

	[anyone, "lord_prison_break_confirm",
	[],
	"Thank the heavens! I don't know how long I could have lasted in here", "lord_prison_break_confirm_2",
	[]],

	[anyone, "lord_prison_break_confirm_2",
	[],
	"But wait -- how will we escape? We'll be rushed by the garrison the moment we step out that door. I can help you hold them off -- but I'll tell you now, they have fed me nothing but watery porridge and a few scraps, and I'm not as strong as I could be.", "lord_prison_break_confirm_3",
	[]],

	[anyone|plyr, "lord_prison_break_confirm_3",
	[],
	"You keep well behind me, and try to stay out of the fighting.", "lord_prison_break_confirm_4",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_mission_participation, 3),
		(assign, "$g_reset_mission_participation", 1),
		(agent_set_team, "$g_talk_agent", 0)
	]],

	[anyone|plyr, "lord_prison_break_confirm_3",
	[],
	"I'll need you to grab a weapon and help me, despite your weakness.", "lord_prison_break_confirm_4",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_mission_participation, 2),
		(assign, "$g_reset_mission_participation", 1),
		(agent_set_team, "$g_talk_agent", 0)
	]],

	[anyone|plyr, "lord_prison_break_confirm_3",
	[],
	"Actually, don't get involved in this.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_mission_participation, 1),
		(assign, "$g_reset_mission_participation", 1)
	]],

	[anyone, "lord_prison_break_confirm_4",
	[
		(str_clear, 14),
		(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
			(troop_slot_eq, ":troop", slot_troop_prisoner_of_party, "$g_encountered_party"),
			(neq, ":troop", "$g_talk_troop"),
			(assign, ":value", 0),
			(try_begin),
				(call_script, "script_cf_prisoner_offered_parole", ":troop"),
				(assign, ":value", 1),
			(try_end),
			(eq, ":value", 0),
			(troop_slot_eq, ":troop", slot_troop_mission_participation, 0),
			(str_store_troop_name, 15, ":troop"),
			(assign, reg4, 0),
			(try_begin),
				(call_script, "script_cf_dplmc_troop_is_female", ":troop"),
				(assign, reg4, 1),
			(try_end),
			(str_store_string, 14, "str__s15_is_also_being_held_here_and_you_may_wish_to_see_if_reg4shehe_will_join_us"),
		(try_end)
	],
	"Let's go!{s14}", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 8),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2)
	],
	"I am in your debt for freeing me, {playername}.", "freed_lord_answer",
	[
		(try_begin),
			(check_quest_active, "qst_rescue_lord_by_replace"),
			(quest_slot_eq, "qst_rescue_lord_by_replace", slot_quest_target_troop, "$g_talk_troop"),
			(call_script, "script_succeed_quest", "qst_rescue_lord_by_replace"),
			(assign, "$do_not_cancel_quest", 1),
		(try_end),
		(try_begin),
			(check_quest_active, "qst_rescue_prisoner"),
			(quest_slot_eq, "qst_rescue_prisoner", slot_quest_target_troop, "$g_talk_troop"),
			(call_script, "script_succeed_quest", "qst_rescue_prisoner"),
			(assign, "$do_not_cancel_quest", 1),
		(try_end),
		(call_script, "script_remove_troop_from_prison", "$g_talk_troop"),
		(assign, "$do_not_cancel_quest", 0)
	]],

	[anyone|plyr, "freed_lord_answer",
	[
		(lt, "$g_talk_troop_faction_relation", 0)
	],
	"You're not going anywhere, 'friend'. You're my prisoner now.", "freed_lord_answer_1",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_prisoner_of_party, "p_main_party"),
		(party_force_add_prisoners, "p_main_party", "$g_talk_troop", 1),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -30),
		(call_script, "script_change_player_relation_with_faction_ex", "$g_talk_troop_faction", -2),
		(call_script, "script_event_hero_taken_prisoner_by_player", "$g_talk_troop")
	]],

	[anyone, "freed_lord_answer_1",
	[],
	"I'll have your head on a pike for this, you {bastard/bitch}! Someday!", "close_window",
	[]],

	[anyone|plyr, "freed_lord_answer",
	[],
	"You are free to go wherever you want, sir.", "freed_lord_answer_2",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 7),
		(call_script, "script_change_player_honor", 2),
		(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(store_relation, reg0, ":faction_of_troop_troop", "$g_talk_troop_faction"),
			(this_or_next|eq, ":faction_of_troop_troop", "$g_talk_troop_faction"),
			(ge, reg0, 0),
			(neq, ":troop", "$g_talk_troop"),
			(neg|troop_slot_eq, ":troop", slot_troop_occupation, 15),
			(call_script, "script_troop_get_player_relation", ":troop"),
			(assign, ":var_4", reg0),
			(assign, ":value", 0),
			(try_begin),
				(ge, ":var_1", 1),
				(call_script, "script_dplmc_is_affiliated_family_member", ":troop"),
				(ge, reg0, 1),
				(try_begin),
					(lt, ":var_4", 0),
					(assign, ":value", 2),
				(else_try),
					(lt, ":var_4", 10),
					(assign, ":value", 2),
				(else_try),
					(lt, ":var_4", 20),
					(store_random_in_range, ":value", 0, 2),
				(else_try),
					(lt, ":var_4", 40),
					(store_random_in_range, ":value", -1, 2),
					(val_max, ":value", 0),
				(try_end),
				(gt, ":value", 0),
				(call_script, "script_change_player_relation_with_troop", ":troop", ":value"),
			(else_try),
				(call_script, "script_troop_get_relation_with_troop", ":troop", "$g_talk_troop"),
				(assign, ":var_6", reg0),
				(try_begin),
					(ge, ":var_6", 20),
					(store_random_in_range, reg0, 0, 2),
					(this_or_next|ge, ":var_6", ":var_4"),
					(eq, reg0, 1),
					(assign, ":value", 1),
				(try_end),
				(try_begin),
					(ge, ":var_6", 0),
					(troop_slot_eq, ":troop", slot_troop_betrothed, "$g_talk_troop"),
					(val_add, ":value", 1),
				(else_try),
					(ge, ":var_6", 0),
					(this_or_next|troop_slot_eq, ":troop", slot_troop_occupation, 6),
					(is_between, ":troop", "trp_knight_1_1_wife", "trp_heroes_end"),
					(call_script, "script_troop_get_family_relation_to_troop", ":troop", "$g_talk_troop"),
					(ge, reg0, 4),
					(store_random_in_range, reg0, 0, 2),
					(this_or_next|troop_slot_eq, ":troop", slot_lord_reputation_type, 21),
					(eq, reg0, 1),
					(val_add, ":value", 1),
				(try_end),
				(gt, ":value", 0),
				(call_script, "script_change_player_relation_with_troop", ":troop", ":value"),
			(try_end),
		(try_end),
		(call_script, "script_change_player_relation_with_faction_ex", "$g_talk_troop_faction", 2)
	]],

	[anyone, "freed_lord_answer_2",
	[],
	"Thank you, good {my lord/lady}. I never forget someone who's done me a good turn.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 9),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2)
	],
	"{s43}", "defeat_lord_answer",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_leaded_party, -1),
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_surrender_offer_default")
	]],

	[anyone|plyr, "defeat_lord_answer",
	[],
	"You are my prisoner now.", "defeat_lord_answer_1",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_prisoner_of_party, "p_main_party"),
		(party_force_add_prisoners, "p_main_party", "$g_talk_troop", 1),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -3),
		(call_script, "script_change_player_relation_with_faction_ex", "$g_talk_troop_faction", -3),
		(call_script, "script_event_hero_taken_prisoner_by_player", "$g_talk_troop"),
		(call_script, "script_add_log_entry", 12, "trp_player", -1, "$g_talk_troop", "$g_talk_troop_faction")
	]],

	[anyone, "defeat_lord_answer_1",
	[],
	"I am at your mercy.", "close_window",
	[]],

	[anyone|plyr, "defeat_lord_answer",
	[],
	"You have fought well. You are free to go.", "defeat_lord_answer_2",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 5),
		(call_script, "script_change_player_honor", 3),
		(call_script, "script_add_log_entry", 13, "trp_player", -1, "$g_talk_troop", "$g_talk_troop_faction")
	]],

	[anyone, "defeat_lord_answer_2",
	[],
	"{s43}", "close_window",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_prisoner_released_default")
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 2),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(lt, "$g_encountered_party_relation", 0),
		(encountered_party_is_attacker),
		(eq, "$g_talk_troop_met", 1)
	],
	"{playername}!", "party_encounter_lord_hostile_attacker",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 2),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(lt, "$g_encountered_party_relation", 0),
		(encountered_party_is_attacker)
	],
	"Halt!", "party_encounter_lord_hostile_attacker",
	[]],

	[anyone, "party_encounter_lord_hostile_attacker",
	[
		(gt, "$g_comment_found", 0)
	],
	"{s42}", "party_encounter_lord_hostile_attacker",
	[
		(try_begin),
			(neq, "$log_comment_relation_change", 0),
			(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", "$log_comment_relation_change"),
		(try_end),
		(assign, "$g_comment_found", 0)
	]],

	[anyone, "party_encounter_lord_hostile_attacker",
	[],
	"{s43}", "party_encounter_lord_hostile_attacker_2",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_surrender_demand_default")
	]],

	[anyone|plyr, "party_encounter_lord_hostile_attacker_2",
	[],
	"We will fight you to the end!", "close_window",
	[]],

	[anyone|plyr, "party_encounter_lord_hostile_attacker_2",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_heroes_end"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop")
	],
	"Stay your hand! There is something I must tell you in private.", "lord_recruit_1_relation",
	[]],

	[anyone|plyr, "party_encounter_lord_hostile_attacker_2",
	[],
	"Is there no way to avoid this battle? I don't want to fight with you.", "party_encounter_offer_dont_fight",
	[]],

	[anyone|plyr, "party_encounter_lord_hostile_attacker_2",
	[],
	"Don't attack! We surrender.", "close_window",
	[
		(assign, "$g_player_surrenders", 1)
	]],

	[anyone, "party_encounter_offer_dont_fight",
	[
		(gt, "$g_talk_troop_effective_relation", 30)
	],
	"I owe you a favor, don't I. Well... all right then. I will let you go just this once.", "close_window",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -7),
		(store_current_hours, ":current_hours"),
		(val_add, ":current_hours", 72),
		(party_set_slot, "$g_encountered_party", slot_party_ignore_player_until, ":current_hours"),
		(party_ignore_player, "$g_encountered_party", 72),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "party_encounter_offer_dont_fight",
	[
		(troop_get_slot, ":g_talk_troop_lord_reputation_type", "$g_talk_troop", slot_lord_reputation_type),
		(neq, ":g_talk_troop_lord_reputation_type", 7),
		(neq, ":g_talk_troop_lord_reputation_type", 5),
		(neq, ":g_talk_troop_lord_reputation_type", 25),
		(this_or_next|neq, ":g_talk_troop_lord_reputation_type", 1),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_marshall, "$g_talk_troop"),
		(this_or_next|neg|is_between, "$g_talk_troop_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(assign, ":value", 0),
		(try_begin),
			(neg|is_between, "$g_talk_troop_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(assign, ":value", 1),
		(else_try),
			(call_script, "script_cf_troop_can_intrigue", "$g_talk_troop", 1),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1),
		(gt, "$g_talk_troop_effective_relation", 0),
		(store_mul, ":value_2", "$g_talk_troop_effective_relation", "$g_talk_troop_effective_relation"),
		(val_mul, ":value_2", 5),
		(store_random_in_range, ":random_in_range_5000_10000", 5000, 10000),
		(store_sub, ":value_3", ":random_in_range_5000_10000", ":value_2"),
		(val_max, ":value_3", 0),
		(call_script, "script_calculate_ransom_amount_for_troop", "trp_player"),
		(game_get_reduce_campaign_ai, ":game_reduce_campaign_ai"),
		(try_begin),
			(le, ":game_reduce_campaign_ai", 0),
			(val_mul, reg0, 3),
			(val_div, reg0, 4),
		(else_try),
			(le, ":game_reduce_campaign_ai", 1),
			(val_div, reg0, 2),
		(else_try),
			(ge, ":game_reduce_campaign_ai", 2),
			(val_div, reg0, 4),
		(try_end),
		(val_max, ":value_3", reg0),
		(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
		(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
			(party_stack_get_size, ":party_stack_size_main_party_number", "p_main_party", ":number"),
			(val_mul, ":party_stack_size_main_party_number", 12),
			(val_add, ":value_3", ":party_stack_size_main_party_number"),
		(try_end),
		(val_div, ":value_3", 10),
		(val_mul, ":value_3", 10),
		(assign, reg0, ":value_3")
	],
	"If you pay me {reg0} coins cash I will let you go, recreant.", "party_encounter_offer_money",
	[]],

	[anyone|plyr, "party_encounter_offer_money",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(gt, ":troop_gold_player", reg0)
	],
	"Don't attack! I pay.", "close_window",
	[
		(troop_remove_gold, "trp_player", reg0),
		(try_begin),
			(troop_is_hero, "$g_talk_troop"),
			(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", reg0, "$g_talk_troop"),
		(try_end),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -2),
		(call_script, "script_change_player_honor", -2),
		(store_current_hours, ":current_hours"),
		(val_add, ":current_hours", 72),
		(party_set_slot, "$g_encountered_party", slot_party_ignore_player_until, ":current_hours"),
		(party_ignore_player, "$g_encountered_party", 72),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "party_encounter_offer_money",
	[],
	"Let's fight!", "party_encounter_offer_money_no",
	[]],

	[anyone, "party_encounter_offer_money_no",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_lord_declines_negotiation_offer_default")
	],
	"{s43}", "close_window",
	[]],

	[anyone, "party_encounter_offer_dont_fight",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_lord_declines_negotiation_offer_default")
	],
	"{s43}", "close_window",
	[]],

	[anyone, "start",
	[
		(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$g_talk_troop_faction"),
		(this_or_next|ge, reg0, 50),
		(eq, "$g_talk_troop_faction", "fac_player_supporters_faction"),
		(is_between, "$g_talk_troop", "trp_npc1", "trp_knight_1_1_wife"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 0),
		(neq, "$g_talk_troop", "$g_player_minister"),
		(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
		(faction_get_slot, ":g_talk_troop_original_faction_leader", ":g_talk_troop_original_faction", slot_faction_leader),
		(str_store_troop_name, 10, ":g_talk_troop_original_faction_leader"),
		(str_store_string, 9, "str_lord_indicted_dialog_approach")
	],
	"{s9}", "lord_requests_recruitment",
	[]],

	[anyone|plyr, "lord_requests_recruitment",
	[
		(str_store_string, 9, "str_lord_indicted_dialog_approach_yes")
	],
	"{s9}", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_occupation, 2),
		(str_store_troop_name, 1, "$g_talk_troop"),
		(str_store_faction_name, 2, "$g_talk_troop_faction"),
		(display_log_message, "@ {s1} has been accepted as a vassal of {s2}.")
	]],

	[anyone|plyr, "lord_requests_recruitment",
	[
		(str_store_string, 9, "str_lord_indicted_dialog_approach_no")
	],
	"{s9}", "lord_requests_recruitment_refuse",
	[]],

	[anyone, "lord_requests_recruitment_refuse",
	[
		(str_store_string, 9, "str_lord_indicted_dialog_rejected")
	],
	"{s9}", "close_window",
	[
		(assign, "$g_leave_encounter", 1),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 0),
			(troop_set_slot, "$g_talk_troop", slot_troop_occupation, 2),
		(try_end),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", -10),
		(call_script, "script_lord_find_alternative_faction", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(try_begin),
			(is_between, ":var_1", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
			(str_store_troop_name, 1, "$g_talk_troop"),
			(str_store_faction_name, 2, ":var_1"),
			(str_store_faction_name, 3, ":g_talk_troop_original_faction"),
			(call_script, "script_change_troop_faction", "$g_talk_troop", ":var_1"),
			(assign, reg4, 0),
			(try_begin),
				(call_script, "script_cf_dplmc_troop_is_female", "$g_talk_troop"),
				(assign, reg4, 1),
			(try_end),
			(assign, reg65, reg4),
			(display_log_message, "str_lord_defects_ordinary"),
		(else_try),
			(call_script, "script_change_troop_faction", "$g_talk_troop", "fac_outlaws"),
		(try_end)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(eq, "$g_talk_troop", "$supported_pretender")
	],
	"I await your counsel, {playername}.", "supported_pretender_talk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(assign, "$pretender_told_story", 0),
		(eq, "$g_talk_troop_met", 0),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop")
	],
	"Do I know you?", "pretender_intro_1",
	[]],

	[anyone|plyr, "pretender_intro_1",
	[],
	"My name is {playername}. At your service.", "pretender_intro_2",
	[]],

	[anyone|plyr, "pretender_intro_1",
	[],
	"I am {playername}. Perhaps you have heard of my exploits.", "pretender_intro_2",
	[]],

	[anyone, "pretender_intro_2",
	[
		(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
		(val_sub, ":g_talk_troop_original_faction", "fac_kingdom_1"),
		(val_add, ":g_talk_troop_original_faction", "str_swadian_rebellion_pretender_intro"),
		(str_store_string, 48, ":g_talk_troop_original_faction")
	],
	"{s48}", "pretender_intro_3",
	[]],

	[anyone|plyr, "pretender_intro_3",
	[
		(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
		(str_store_faction_name, 12, ":g_talk_troop_original_faction"),
		(faction_get_slot, ":g_talk_troop_original_faction_leader", ":g_talk_troop_original_faction", slot_faction_leader),
		(str_store_troop_name, 11, ":g_talk_troop_original_faction_leader")
	],
	"I thought {s12} was ruled by {s11}?", "pretender_rebellion_cause_1",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_home_speech_delivered, 1)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 6),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 7)
	],
	"Greetings, {playername}", "pretender_start",
	[
		(assign, "$pretender_told_story", 0)
	]],

	[anyone|plyr, "pretender_start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_home_speech_delivered, 1),
		(eq, "$pretender_told_story", 0)
	],
	"What was your story again, {reg65?your highness:your highness}?", "pretender_rebellion_cause_prelim",
	[]],

	[anyone, "pretender_rebellion_cause_prelim",
	[],
	"I shall tell you.", "pretender_rebellion_cause_1",
	[]],

	[anyone, "pretender_rebellion_cause_1",
	[],
	"{s48}", "pretender_rebellion_cause_2",
	[
		(assign, "$pretender_told_story", 1),
		(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
		(val_sub, ":g_talk_troop_original_faction", "fac_kingdom_1"),
		(val_add, ":g_talk_troop_original_faction", "str_swadian_rebellion_pretender_story_1"),
		(str_store_string, 48, ":g_talk_troop_original_faction")
	]],

	[anyone, "pretender_rebellion_cause_2",
	[],
	"{s48}", "pretender_rebellion_cause_3",
	[
		(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
		(val_sub, ":g_talk_troop_original_faction", "fac_kingdom_1"),
		(val_add, ":g_talk_troop_original_faction", "str_swadian_rebellion_pretender_story_2"),
		(str_store_string, 48, ":g_talk_troop_original_faction")
	]],

	[anyone, "pretender_rebellion_cause_3",
	[],
	"{s48}", "pretender_start",
	[
		(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
		(val_sub, ":g_talk_troop_original_faction", "fac_kingdom_1"),
		(val_add, ":g_talk_troop_original_faction", "str_swadian_rebellion_pretender_story_3"),
		(str_store_string, 48, ":g_talk_troop_original_faction")
	]],

	[anyone|plyr, "pretender_start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_home_speech_delivered, 1)
	],
	"I want to take up your cause and help you reclaim your throne!", "pretender_discuss_rebellion_1",
	[]],

	[anyone|plyr, "pretender_start",
	[],
	"I must leave now.", "pretender_end",
	[]],

	[anyone, "pretender_discuss_rebellion_1",
	[
		(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
		(faction_get_slot, ":g_talk_troop_original_faction_leader", ":g_talk_troop_original_faction", slot_faction_leader),
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 8, 0),
		(str_store_troop_name, 11, ":g_talk_troop_original_faction_leader")
	],
	"Are you sure you will be up to the task, {playername}? Reclaiming my throne will be no simple matter.The {s0} of our realm have all sworn oaths of homage to {s11}. Such oaths to a usurper are of course invalid, and we can expect some of the {s0} to side with us, but it will be a very tough and challenging struggle ahead.", "pretender_discuss_rebellion_2a",
	[]],

	[anyone, "pretender_discuss_rebellion_2a",
	[
		(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
		(faction_get_slot, ":g_talk_troop_original_faction_leader", ":g_talk_troop_original_faction", slot_faction_leader),
		(str_store_troop_name, 12, ":g_talk_troop_original_faction_leader"),
		(call_script, "script_evaluate_realm_stability", ":g_talk_troop_original_faction"),
		(assign, ":var_3", reg0),
		(val_add, ":var_3", reg0),
		(val_add, ":var_3", reg1),
		(try_begin),
			(gt, ":var_3", 60),
			(str_store_string, 11, "str_one_thing_in_our_favor_is_that_s12s_grip_is_very_shaky_he_rules_over_a_labyrinth_of_rivalries_and_grudges_lords_often_fail_to_cooperate_and_many_would_happily_seek_a_better_liege"),
		(else_try),
			(is_between, ":var_3", 40, 60),
			(str_store_string, 11, "str_thankfully_s12s_grip_is_fairly_shaky_many_lords_do_not_cooperate_with_each_other_and_some_might_be_tempted_to_seek_a_better_liege"),
		(else_try),
			(is_between, ":var_3", 20, 40),
			(str_store_string, 11, "str_unfortunately_s12s_grip_is_fairly_strong_until_we_can_shake_it_we_may_have_to_look_long_and_hard_for_allies"),
		(else_try),
			(lt, ":var_3", 20),
			(str_store_string, 11, "str_unfortunately_s12s_grip_is_very_strong_unless_we_can_loosen_it_it_may_be_difficult_to_find_allies"),
		(try_end)
	],
	"{s11}", "pretender_discuss_rebellion_2",
	[]],

	[anyone|plyr, "pretender_discuss_rebellion_2",
	[],
	"I am ready for this struggle.", "pretender_discuss_rebellion_3",
	[]],

	[anyone|plyr, "pretender_discuss_rebellion_2",
	[],
	"You are right. Perhaps, I should think about this some more.", "pretender_end",
	[]],

	[anyone, "pretender_discuss_rebellion_3",
	[
		(this_or_next|neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
		(neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
		(neg|troop_slot_ge, "trp_player", 7, 200),
		(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
		(faction_get_slot, ":g_talk_troop_original_faction_leader", ":g_talk_troop_original_faction", slot_faction_leader),
		(str_store_troop_name, 11, ":g_talk_troop_original_faction_leader")
	],
	"I have no doubt that your support for my cause is heartfelt, {playername}, and I am grateful to you for it. But I don't think we have much of a chance of success. If you can gain renown in the battlefield and make a name for yourself as a great commander, then our friends would not hesitate to join our cause, and our enemies would be wary to take up arms against us. When that time comes, I will come with you gladly. But until that time, it will be wiser not to openly challenge the usurper, {s11}.", "close_window",
	[]],

	[anyone, "pretender_discuss_rebellion_3",
	[
		(this_or_next|neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
		(neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
		(gt, "$supported_pretender", 0),
		(str_store_troop_name, 17, "$supported_pretender")
	],
	"Haven't you already taken up the cause of {s17}? You must have a very strong sense of justice, indeed. But no, thank you. I will not be part of your game.", "close_window",
	[]],

	[anyone, "pretender_discuss_rebellion_3",
	[
		(this_or_next|neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
		(neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
		(gt, "$players_kingdom", 0),
		(neq, "$players_kingdom", "fac_player_supporters_faction"),
		(neq, "$players_kingdom", "fac_player_faction"),
		(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
		(neq, "$players_kingdom", ":g_talk_troop_original_faction"),
		(eq, "$player_has_homage", 1),
		(str_store_faction_name, 16, "$players_kingdom"),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(str_store_troop_name, 15, ":players_kingdom_leader"),
		(str_store_faction_name, 17, ":g_talk_troop_original_faction")
	],
	"{playername}, you are already oath-bound to serve {s15}. As such, I cannot allow you to take up my cause, and let my enemies claim that I am but a mere puppet of {s16}. No, if I am to have the throne of {s17}, I must do it due to the righteousness of my cause and the support of my subjects alone. If you want to help me, you must first free yourself of your oath to {s15}.", "close_window",
	[]],

	[anyone, "pretender_discuss_rebellion_3",
	[
		(faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
		(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player")
	],
	"You are a monarch in your own right, {my lord/my lady}. If you were to back me, I would be merely your puppet.", "close_window",
	[]],

	[anyone, "pretender_discuss_rebellion_3",
	[
		(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
		(str_store_faction_name, 12, ":g_talk_troop_original_faction"),
		(faction_get_slot, ":g_talk_troop_original_faction_leader", ":g_talk_troop_original_faction", slot_faction_leader),
		(str_store_troop_name, 11, ":g_talk_troop_original_faction_leader"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_original_faction_leader")
	],
	"You are a capable warrior, {playername}, and I am sure with your renown as a commander, and my righteous cause, the nobles and the good people of {s12} will flock to our support. The time is ripe for us to act! I will come with you, and together, we will topple the usurper {s11} and take the throne from {reg0?her:his} bloodied hands. But first, you must give me your oath of homage and accept me as your liege {reg65?lady:lord}.", "pretender_rebellion_ready",
	[]],

	[anyone|plyr, "pretender_rebellion_ready",
	[
		(assign, reg3, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$g_talk_troop"),
			(assign, reg3, 1),
		(try_end),
		(assign, reg65, reg3)
	],
	"I am ready to pledge myself to your cause, my liege.", "lord_give_oath_2",
	[]],

	[anyone|plyr, "pretender_rebellion_ready",
	[],
	"Let us bide our time a little longer.", "pretender_end",
	[]],

	[anyone, "lord_give_conclude_2",
	[
		(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2)
	],
	"Forward, then! Our first task is to take hold of a fortress and persuade other lords to join us. You lead the way!", "close_window",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 50),
		(faction_set_slot, "$g_talk_troop_faction", slot_faction_state, 0),
		(assign, "$g_cozur_pretender", 1),
		(party_force_add_members, "p_main_party", "$supported_pretender", 1),
		(troop_set_slot, "$supported_pretender", slot_troop_cur_center, 0),
		(troop_set_auto_equip, "$supported_pretender", 0),
		(str_store_troop_name_link, 6, "$supported_pretender"),
		(display_message, "@{s6} has joined your party."),
		(store_relation, ":relation_supported_pretender_old_faction_player_supporters_faction", "$supported_pretender_old_faction", "fac_player_supporters_faction"),
		(val_min, ":relation_supported_pretender_old_faction_player_supporters_faction", -50),
		(call_script, "script_set_player_relation_with_faction", "$supported_pretender_old_faction", ":relation_supported_pretender_old_faction_player_supporters_faction"),
		(faction_get_slot, ":supported_pretender_old_faction_adjective", "$supported_pretender_old_faction", slot_faction_adjective),
		(str_store_string, 1, ":supported_pretender_old_faction_adjective"),
		(faction_set_name, "fac_player_supporters_faction", "@{s1} Rebels"),
		(faction_set_color, "fac_player_supporters_faction", 16711680),
		(call_script, "script_update_all_notes")
	]],

	[anyone, "pretender_end",
	[],
	"Farewell for now, then.", "close_window",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(neq, "$g_talk_troop_met", 0),
		(gt, "$g_time_since_last_talk", 24),
		(gt, "$g_talk_troop_relation", -10),
		(store_random_in_range, ":random_in_range_0_100", 0, 100),
		(lt, ":random_in_range_0_100", 30),
		(eq, "$talk_context", 0),
		(call_script, "script_cf_troop_get_random_enemy_troop_with_occupation", "$g_talk_troop", 2),
		(assign, ":var_2", reg0),
		(troop_get_slot, ":var_2_player_relation", ":var_2", slot_troop_player_relation),
		(ge, ":var_2_player_relation", 20),
		(str_store_troop_name, 6, ":var_2"),
		(assign, "$temp", ":var_2"),
		(call_script, "script_dplmc_store_troop_is_female", ":var_2")
	],
	"I heard that you have befriended that {s43} called {s6}. Believe me, you can't trust that {reg0?woman:man}. You should end your dealings with {reg0?her:him}.", "lord_event_choose_friend",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_lord_insult_default")
	]],

	[anyone|plyr, "lord_event_choose_friend",
	[],
	"I assure you, {s65}, I am no friend of {s6}.", "lord_event_choose_friend_renounce",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 5),
		(call_script, "script_change_player_relation_with_troop", "$temp", -10)
	]],

	[anyone, "lord_event_choose_friend_renounce",
	[],
	"Glad news, {playername}. I would fear for your safety otherwise. If you do encounter {s6}, be on your guard and don't believe a word.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_event_choose_friend",
	[
		(call_script, "script_dplmc_store_troop_is_female", "$temp")
	],
	"{s6} is an honourable {reg0?woman:man}, you've no right to speak of {reg0?her:him} thus.", "lord_event_choose_friend_defend",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -10),
		(call_script, "script_change_player_relation_with_troop", "$temp", 5)
	]],

	[anyone, "lord_event_choose_friend_defend",
	[],
	"As you like, {playername}. A fool you might be, but a loyal fool at the least. {s6}'s loyalty may not be so steadfast, however...", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_event_choose_friend",
	[],
	"I don't want to be involved in your quarrel with {s6}.", "lord_event_choose_friend_neutral",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -2),
		(call_script, "script_change_player_relation_with_troop", "$temp", -3)
	]],

	[anyone, "lord_event_choose_friend_neutral",
	[],
	"Hmph. As you wish, {playername}. Just remember that a {man/woman} needs friends in this world, and you'll never make any if you never stand with anyone.", "lord_pretalk",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"Yes, 22?", "lord_start",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(le, "$talk_context", 4),
		(ge, "$g_talk_troop_relation", 20),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 8),
		(assign, ":value", 0),
		(try_begin),
			(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "trp_player"),
			(store_random_in_range, ":random_in_range_0_100", 0, 100),
			(this_or_next|ge, ":random_in_range_0_100", "$g_talk_troop_relation"),
			(ge, ":random_in_range_0_100", 95),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 0)
	],
	"It is good to see you, old friend", "lord_start",
	[]],

	[anyone, "start",
	[
		(assign, reg0, 0),
		(try_begin),
			(neq, "$g_talk_troop_faction", "fac_player_supporters_faction"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$g_talk_troop_faction"),
		(try_end),
		(this_or_next|ge, reg0, 50),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "trp_player"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(le, "$talk_context", 4)
	],
	"Yes, {my lord/my lady}?", "lord_start",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(check_quest_active, "qst_join_faction"),
		(eq, "$g_invite_faction_lord", "$g_talk_troop"),
		(eq, "$players_kingdom", "fac_player_supporters_faction")
	],
	"Well, {playername}. I am willing to forgive your impudence in proclaiming yourself {king/queen}, and will welcome you into my realm with full honor, as one of my vassals. Shall we proceed to the oath of allegiance?", "lord_invite_player_monarch_1",
	[]],

	[anyone|plyr, "lord_invite_player_monarch_1",
	[],
	"Yes... my lord.", "lord_invite_2",
	[]],

	[anyone|plyr, "lord_invite_player_monarch_1",
	[],
	"No. That oath sticks in my throat.", "lord_enter_service_reject",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(check_quest_active, "qst_join_faction"),
		(eq, "$g_invite_faction_lord", "$g_talk_troop"),
		(try_begin),
			(gt, "$g_invite_offered_center", 0),
			(store_faction_of_party, ":faction_of_party_g_invite_offered_center", "$g_invite_offered_center"),
			(neq, ":faction_of_party_g_invite_offered_center", "$g_talk_troop_faction"),
			(call_script, "script_get_poorest_village_of_faction", "$g_talk_troop_faction"),
			(assign, "$g_invite_offered_center", reg0),
		(try_end)
	],
	"{playername}, I've been expecting you. Word has reached my ears of your exploits. Why, I keep hearing such tales of prowess and bravery that my mind was quickly made up. I knew that I had found someone worthy of becoming my vassal.", "lord_invite_1",
	[]],

	[anyone|plyr, "lord_invite_1",
	[],
	"Thank you, {s65}, you honour me with your offer.", "lord_invite_2",
	[]],

	[anyone|plyr, "lord_invite_1",
	[],
	"It is good to have my true value recognised.", "lord_invite_2",
	[]],

	[anyone, "lord_invite_2",
	[],
	"Aye. Let us dispense with the formalities, {playername}; are you ready to swear homage to me?", "lord_invite_3",
	[]],

	[anyone|plyr, "lord_invite_3",
	[],
	"Yes, {s65}.", "lord_give_oath_2",
	[]],

	[anyone|plyr, "lord_invite_3",
	[],
	"No, {s65}. I cannot serve you right now.", "lord_enter_service_reject",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_met, 2),
		(gt, "$g_talk_troop_relation", 10),
		(gt, "$g_time_since_last_talk", 3),
		(assign, ":var_1", "$character_gender"),
		(assign, ":var_2", reg65),
		(this_or_next|eq, ":var_1", 1),
		(eq, ":var_2", 1),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(neg|is_between, "$g_talk_troop", "trp_knight_1_1_wife", "trp_heroes_end"),
		(troop_slot_eq, "trp_player", slot_troop_spouse, -1),
		(troop_slot_eq, "trp_player", slot_troop_betrothed, -1),
		(troop_slot_eq, "$g_talk_troop", slot_troop_spouse, -1),
		(troop_slot_eq, "$g_talk_troop", slot_troop_betrothed, -1),
		(call_script, "script_npc_decision_checklist_marry_female_pc", "$g_talk_troop"),
		(ge, reg0, 1)
	],
	"My {lord/lady}, I have been giving much thought to our recent conversation. It is time for me to ask. Would you do me the honor of becoming my {husband/wife}?", "lord_female_pc_marriage_proposal",
	[]],

	[anyone|plyr, "lord_female_pc_marriage_proposal",
	[],
	"Yes. I would.", "lord_marriage_proposal_female_pc_next_step",
	[]],

	[anyone|plyr, "lord_female_pc_marriage_proposal",
	[],
	"Let me think about this some more.", "lord_female_pc_marriage_proposal_postponed",
	[]],

	[anyone|plyr, "lord_female_pc_marriage_proposal",
	[],
	"No. I have decided that it would not be appropriate", "lord_female_pc_marriage_proposal_rejected",
	[]],

	[anyone, "lord_female_pc_marriage_proposal_postponed",
	[],
	"Of course, my {lord/lady}. Take all the time you need.", "lord_start",
	[]],

	[anyone, "lord_female_pc_marriage_proposal_rejected",
	[],
	"Do you mean to reject my suit outright, my {lord/lady}?", "lord_female_pc_marriage_proposal_rejected_confirm",
	[]],

	[anyone, "lord_female_pc_marriage_proposal_postponed",
	[],
	"Of course, my lady. Take all the time you need.", "lord_start",
	[]],

	[anyone, "lord_female_pc_marriage_proposal_rejected",
	[],
	"Do you mean to reject my suit outright, my lady?", "lord_female_pc_marriage_proposal_rejected_confirm",
	[]],

	[anyone|plyr, "lord_female_pc_marriage_proposal_rejected_confirm",
	[],
	"Yes. I do.", "lord_female_pc_marriage_proposal_rejected_confirm_yes",
	[]],

	[anyone|plyr, "lord_female_pc_marriage_proposal_rejected_confirm",
	[],
	"No, you misunderstand. I just need some more time to think", "lord_female_pc_marriage_proposal_postponed",
	[]],

	[anyone, "lord_female_pc_marriage_proposal_rejected_confirm_yes",
	[
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 3),
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2)
	],
	"Well, in that case, let me tell you something -- with those harsh words, you have removed the scales from my eyes. I would agree that it would not be appropriate for me to marry one such as you. Good day, my {lord/lady}.", "close_window",
	[
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", -20),
		(troop_set_slot, "$g_talk_troop", slot_troop_met, 4),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_female_pc_marriage_proposal_rejected_confirm_yes",
	[],
	"Such is your right, my {lord/lady}. If you ever wished to reconsider, I would be overwhelmed with joy.", "close_window",
	[
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", -5),
		(troop_set_slot, "$g_talk_troop", slot_troop_met, 4),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_met, 2),
		(gt, "$g_time_since_last_talk", 24),
		(gt, "$g_talk_troop_relation", 0),
		(assign, ":var_1", "$character_gender"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(assign, ":var_2", reg65),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(neq, ":var_2", 1),
		(this_or_next|eq, ":var_2", 1),
		(eq, ":var_1", 1),
		(troop_slot_eq, "trp_player", slot_troop_spouse, -1),
		(troop_slot_eq, "trp_player", slot_troop_betrothed, -1),
		(troop_slot_eq, "$g_talk_troop", slot_troop_spouse, -1),
		(troop_slot_eq, "$g_talk_troop", slot_troop_betrothed, -1)
	],
	"My {lord/lady}, it brings my heart great joy to see you again...", "lord_start",
	[
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", 2)
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_met, 2),
		(gt, "$g_talk_troop_relation", 0),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(assign, ":var_1", reg65),
		(assign, ":var_2", "$character_gender"),
		(this_or_next|ge, "$g_disable_condescending_comments", 2),
		(neq, ":var_1", ":var_2"),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 8)
	],
	"My {lord/lady}, I am always your humble servant", "lord_start",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(neq, "$g_talk_troop_met", 0),
		(gt, "$g_time_since_last_talk", 24),
		(gt, "$g_talk_troop_relation", 50),
		(gt, "$g_talk_troop_faction_relation", 10),
		(le, "$talk_context", 4)
	],
	"If it isn't my brave champion, {playername}...", "lord_start",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(neq, "$g_talk_troop_met", 0),
		(gt, "$g_time_since_last_talk", 24),
		(gt, "$g_talk_troop_relation", 10),
		(le, "$talk_context", 4)
	],
	"Good to see you again {playername}...", "lord_start",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(neq, "$g_talk_troop_met", 0),
		(gt, "$g_time_since_last_talk", 24),
		(le, "$talk_context", 4)
	],
	"We meet again, {playername}...", "lord_start",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(eq, "$g_talk_troop_met", 0),
		(ge, "$g_talk_troop_faction_relation", 0),
		(le, "$talk_context", 4)
	],
	"Do I know you?", "lord_meet_neutral",
	[]],

	[anyone|plyr, "lord_meet_neutral",
	[],
	"I am {playername}.", "lord_intro",
	[]],

	[anyone|plyr, "lord_meet_neutral",
	[],
	"My name is {playername}. At your service {reg65?madame:sir}.", "lord_intro",
	[]],

	[anyone, "lord_intro",
	[],
	"{s11}", "lord_start",
	[
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(str_store_faction_name, 6, "$g_talk_troop_faction"),
		(assign, reg4, 0),
		(str_store_troop_name, 4, "$g_talk_troop"),
		(try_begin),
			(eq, ":g_talk_troop_faction_leader", "$g_talk_troop"),
			(str_store_string, 9, "@I am {s4}, the ruler of {s6}", 0),
		(else_try),
			(assign, ":value", -1),
			(troop_get_slot, reg0, "$g_talk_troop", slot_troop_renown),
			(val_add, reg0, 1),
			(try_for_range_backwards, reg5, 30, 34),
				(troop_get_slot, reg5, "$g_talk_troop", reg5),
				(ge, reg5, "trp_tournament_master"),
				(troop_is_hero, reg5),
				(store_faction_of_troop, reg1, reg5),
				(eq, reg1, "$g_talk_troop_faction"),
				(this_or_next|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, reg5),
				(this_or_next|faction_slot_eq, "$g_talk_troop_faction", slot_faction_marshall, reg5),
				(this_or_next|troop_slot_ge, reg5, 7, reg0),
				(is_between, "$g_talk_troop", "trp_knight_1_1_wife", "trp_heroes_end"),
				(assign, ":value", reg5),
			(try_end),
			(gt, ":value", -1),
			(call_script, "script_dplmc_troop_get_family_relation_to_troop", "$g_talk_troop", ":value"),
			(str_store_string, 8, reg1),
			(str_store_troop_name, 9, ":value"),
			(str_store_string, 9, "@I am {s4}, {s8} of {s9}"),
		(else_try),
			(str_store_string, 9, "@I am {s4}, a vassal of {s6}", 0),
		(try_end),
		(assign, ":var_3", 0),
		(str_clear, 8),
		(try_for_range_backwards, ":var_4", "p_town_1", "p_salt_mine"),
			(party_slot_eq, ":var_4", slot_town_lord, "$g_talk_troop"),
			(try_begin),
				(eq, ":var_3", 0),
				(str_store_party_name, 8, ":var_4"),
			(else_try),
				(eq, ":var_3", 1),
				(str_store_party_name, 7, ":var_4"),
				(str_store_string, 8, "@{s7} and {s8}"),
			(else_try),
				(str_store_party_name, 7, ":var_4"),
				(str_store_string, 8, "@{!}{s7}, {s8}"),
			(try_end),
			(val_add, ":var_3", 1),
		(try_end),
		(assign, reg5, ":var_3"),
		(str_store_string, 11, "@{s9}{reg5? and the lord of {s8}.:.", 0)
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(eq, "$g_talk_troop_met", 0),
		(lt, "$g_talk_troop_faction_relation", 0),
		(le, "$talk_context", 4)
	],
	"{s43}", "lord_meet_enemy",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_enemy_meet_default")
	]],

	[anyone|plyr, "lord_meet_enemy",
	[],
	"I am {playername}, {s65}.", "lord_intro",
	[]],

	[anyone|plyr, "lord_meet_enemy",
	[],
	"They know me as {playername}. Mark it down, you shall be hearing of me a lot.", "lord_intro",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(le, "$talk_context", 4),
		(try_begin),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 8),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
			(lt, "$g_talk_troop_relation", -15),
			(str_store_string, 8, "str_playername_come_to_plague_me_some_more_have_you"),
		(else_try),
			(lt, "$g_talk_troop_relation", -5),
			(str_store_string, 8, "str_ah_it_is_you_again"),
		(else_try),
			(str_store_string, 8, "str_well_playername"),
		(try_end)
	],
	"{s8}", "lord_start",
	[]],

	[anyone, "lord_start",
	[
		(gt, "$g_comment_found", 0),
		(str_store_string, 1, "$g_last_comment_copied_to_s42"),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(display_message, "str_comment_found_s1"),
		(try_end)
	],
	"{s42}", "lord_start",
	[
		(try_begin),
			(neq, "$log_comment_relation_change", 0),
			(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", "$log_comment_relation_change"),
		(try_end),
		(assign, "$g_comment_has_rejoinder", 0),
		(try_begin),
			(gt, "$g_rejoinder_to_last_comment", 0),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(display_message, "str_rejoinder_noted"),
			(try_end),
			(assign, "$g_comment_has_rejoinder", 1),
		(try_end),
		(assign, "$g_comment_found", 0)
	]],

	[anyone|auto_proceed, "lord_start",
	[
		(check_quest_active, "qst_destroy_bandit_lair"),
		(check_quest_succeeded, "qst_destroy_bandit_lair"),
		(quest_slot_eq, "qst_destroy_bandit_lair", slot_quest_giver_troop, "$g_talk_troop")
	],
	"{!}.", "lair_quest_intermediate_1",
	[]],

	[anyone, "lair_quest_intermediate_1",
	[],
	"Splendid work, {playername} -- your audacious attack is the talk of the realm. No doubt they, or others like them, will soon be back, but for a short while you have bought this land a small respite. We are most grateful to you.", "lord_pretalk",
	[
		(quest_get_slot, ":destroy_bandit_lair_gold_reward", "qst_destroy_bandit_lair", slot_quest_gold_reward),
		(call_script, "script_troop_add_gold", "trp_player", ":destroy_bandit_lair_gold_reward"),
		(assign, ":var_2", ":destroy_bandit_lair_gold_reward"),
		(val_mul, ":var_2", 2),
		(add_xp_as_reward, ":var_2"),
		(call_script, "script_change_troop_renown", "trp_player", 4),
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", 2),
		(call_script, "script_end_quest", "qst_destroy_bandit_lair"),
		(assign, reg5, ":destroy_bandit_lair_gold_reward")
	]],

	[anyone|auto_proceed, "lord_start",
	[
		(check_quest_active, "qst_destroy_bandit_lair"),
		(check_quest_failed, "qst_destroy_bandit_lair"),
		(quest_slot_eq, "qst_destroy_bandit_lair", slot_quest_giver_troop, "$g_talk_troop")
	],
	"{!}.", "lair_quest_intermediate_2",
	[]],

	[anyone, "lair_quest_intermediate_2",
	[],
	"Well, {playername}, I guess that at least some of those brigands eluded you -- and of course, it will be the peaceful travellers of this land who will pay the price. Still, it was good of you to try.", "lord_pretalk",
	[
		(call_script, "script_end_quest", "qst_destroy_bandit_lair")
	]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_lend_surgeon"),
		(quest_slot_eq, "qst_lend_surgeon", slot_quest_giver_troop, "$g_talk_troop")
	],
	"Your surgeon managed to convince my friend and made the operation. The matter is in the hands of the gods now, and all we can do is pray for his recovery. Anyway, I thank you for lending your surgeon to me. You have a noble spirit. I will not forget it.", "lord_generic_mission_completed",
	[
		(call_script, "script_finish_quest", "qst_lend_surgeon", 100),
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "lord_start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(check_quest_active, "qst_wed_betrothed"),
		(quest_slot_eq, "qst_wed_betrothed", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_get_slot, ":wed_betrothed_target_troop", "qst_wed_betrothed", slot_quest_target_troop),
		(troop_slot_eq, ":wed_betrothed_target_troop", slot_troop_cur_center, "$g_encountered_party"),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 6),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_object, "$g_encountered_party"),
		(call_script, "script_troop_get_family_relation_to_troop", ":wed_betrothed_target_troop", "$g_talk_troop"),
		(str_store_troop_name, 4, ":wed_betrothed_target_troop")
	],
	"May the heavens witness that I am ready to give you my {s11} {s4}, to have in marriage...", "wedding_ceremony_bride_vow",
	[
		(quest_get_slot, "$g_player_bride", "qst_wed_betrothed", slot_quest_target_troop)
	]],

	[anyone, "lord_start",
	[
		(check_quest_active, "qst_wed_betrothed"),
		(quest_slot_eq, "qst_wed_betrothed", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_get_slot, ":wed_betrothed_expiration_days", "qst_wed_betrothed", slot_quest_expiration_days),
		(lt, ":wed_betrothed_expiration_days", 362),
		(eq, "$g_done_wedding_comment", 0),
		(str_clear, 12),
		(try_begin),
			(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 6),
			(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 0),
			(str_store_string, 12, "@ We will of course need to wait until the realm is no longer on campaign."),
		(try_end)
	],
	"It is good to see you, {playername}. We look forward to the wedding, as soon as we can all gather together for the feast.{s12}", "lord_wedding_reschedule",
	[
		(assign, "$g_done_wedding_comment", 1)
	]],

	[anyone|plyr, "lord_wedding_reschedule",
	[],
	"It is no problem. I can wait.", "lord_start",
	[]],

	[anyone|plyr, "lord_wedding_reschedule",
	[],
	"I have no faith that this wedding will be concluded. Please return my dower.", "lord_return_dower",
	[]],

	[anyone, "lord_return_dower",
	[],
	"Well, that is your right, if you indeed have no confidence in our family's commitments. Take your money.", "close_window",
	[
		(quest_get_slot, ":wed_betrothed_target_troop", "qst_wed_betrothed", slot_quest_target_troop),
		(fail_quest, "qst_wed_betrothed"),
		(call_script, "script_end_quest", "qst_wed_betrothed"),
		(troop_set_slot, "trp_player", slot_troop_betrothed, -1),
		(troop_set_slot, ":wed_betrothed_target_troop", slot_troop_betrothed, -1),
		(assign, "$marriage_dowry", 0),
		(troop_add_gold, "trp_player", "$marriage_dower"),
		(assign, "$marriage_dower", 0),
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", -3),
		(assign, "$g_leave_encounter", 1)
	]],

	[plyr|trp_knight_2_23, "lord_talk",
	[],
	"My lady, you should not ride into war like this.", "immobile_lord",
	[]],

	[trp_knight_2_23, "immobile_lord",
	[],
	"I have no intention of doing any such thing, {playername}, but that does not prevent me from accompanying my brave men.", "immobile_lord2",
	[]],

	[trp_knight_2_23, "immobile_lord2",
	[],
	"Now that my dear husband and son are both in the grave, I can do nothing but try and avenge them.", "lord_pretalk",
	[]],

	[plyr|trp_knight_2_24, "lord_talk",
	[],
	"My lord, you look... encumbered.", "immobile_lord",
	[]],

	[trp_knight_2_24, "immobile_lord",
	[],
	"I understand what you're saying {playername}, but worry not. I shall not be going into battle any time soon. In my youth, I won some small acclaim in the lists, but my days of wearing armor are long gone.", "immobile_lord2",
	[]],

	[trp_knight_2_24, "immobile_lord2",
	[],
	"I am fat, and many think that makes me weak and foolish, but I am not. I shall accompany my soldiers and encourage them to perform their very best, that we might win this war.", "lord_pretalk",
	[]],

	[plyr|trp_knight_3_25, "lord_talk",
	[],
	"My lady, you should not ride into war like this.", "immobile_lord",
	[]],

	[trp_knight_3_25, "immobile_lord",
	[],
	"I have no intention of doing any such thing, {playername}, but that does not prevent me from accompanying my brave men.", "immobile_lord2",
	[]],

	[trp_knight_3_25, "immobile_lord2",
	[],
	"Lady Lysa has kept us out of the war so far, but the Waynwoods are a powerful House, with an illustrious history, and I must be seen being active and a force to be reckoned with.", "lord_pretalk",
	[]],

	[plyr|trp_knight_6_20, "lord_talk",
	[],
	"My lady, you should not ride into war like this.", "immobile_lord",
	[]],

	[trp_knight_6_20, "immobile_lord",
	[],
	"I have no intention of doing any such thing, {playername}, but that does not prevent me from accompanying my brave men.", "immobile_lord2",
	[]],

	[trp_knight_6_20, "immobile_lord2",
	[],
	"The women of Dorne do not share the sentiments of the other families of Westeros, and as the head of House Blackmont, I have to take an active hand in handling the affairs of the realm and my domains.", "lord_pretalk",
	[]],

	[plyr|trp_knight_6_21, "lord_talk",
	[],
	"My lady, you should not ride into war like this.", "immobile_lord",
	[]],

	[trp_knight_6_21, "immobile_lord",
	[],
	"I have no intention of doing any such thing, {playername}, but that does not prevent me from accompanying my brave men.", "immobile_lord2",
	[]],

	[trp_knight_6_21, "immobile_lord2",
	[],
	"The women of Dorne do not share the sentiments of the other families of Westeros, and as the head of House Allyrion, I have to take an active hand in handling the affairs of the realm and my domains.", "lord_pretalk",
	[]],

	[plyr|trp_knight_6_22, "lord_talk",
	[],
	"My lady, you should not ride into war like this.", "immobile_lord",
	[]],

	[trp_knight_6_22, "immobile_lord",
	[],
	"I have no intention of doing any such thing, {playername}, but that does not prevent me from accompanying my brave men.", "immobile_lord2",
	[]],

	[trp_knight_6_22, "immobile_lord2",
	[],
	"The women of Dorne do not share the sentiments of the other families of Westeros, and as the head of House Toland, I have to take an active hand in handling the affairs of the realm and my domains.", "lord_pretalk",
	[]],

	[plyr|trp_knight_9_43, "lord_talk",
	[],
	"Ser Balman, you look... ill.", "immobile_lord",
	[]],

	[trp_knight_9_43, "immobile_lord",
	[],
	"Ah yes... I have an, erh, bad stomach. Wine helps it settle, and I've been told it's good for the digestion...", "immobile_lord2",
	[]],

	[trp_knight_9_43, "immobile_lord2",
	[],
	"But I'm not a coward! In my youth, I won great acclaim in the jousts, and if it wasn't for this damned stomach of mine, I'd be at the front of the battlelines!", "lord_pretalk",
	[]],

	[plyr|trp_knight_10_26, "lord_talk",
	[],
	"My lady, you should not ride into war like this.", "immobile_lord",
	[]],

	[trp_knight_10_26, "immobile_lord",
	[],
	"I have no intention of doing any such thing, {playername}, but that does not prevent me from accompanying my brave men.", "lord_pretalk",
	[]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_incriminate_loyal_commander"),
		(check_quest_succeeded, "qst_incriminate_loyal_commander"),
		(quest_get_slot, ":incriminate_loyal_commander_target_troop", "qst_incriminate_loyal_commander", slot_quest_target_troop),
		(str_store_troop_name, 3, ":incriminate_loyal_commander_target_troop"),
		(quest_get_slot, reg5, "qst_incriminate_loyal_commander", slot_quest_gold_reward),
		(call_script, "script_dplmc_store_troop_is_female", ":incriminate_loyal_commander_target_troop")
	],
	"Hah! Our little plot against {s3} worked perfectly, {playername}. The fool has lost one of {reg0?her:his} most valuable retainers, and we are one step closer to bringing {reg0?her:him} to {reg0?his:her} knees. Here, this purse contains 800 coins, and I wish you to have it. You deserve every copper. And, need I remind you, there could be much more to come if you've a mind to earn it...", "lord_generic_mission_completed",
	[
		(call_script, "script_end_quest", "qst_incriminate_loyal_commander"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 5),
		(call_script, "script_change_player_honor", -10),
		(call_script, "script_troop_add_gold", "trp_player", 800)
	]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_incriminate_loyal_commander"),
		(check_quest_failed, "qst_incriminate_loyal_commander")
	],
	"You werent't able to complete a simple task. I had set up everything. The only thing you needed to do was sacrifice a messenger, and we would be celebrating now. But no, you were too damned honorable, weren't you?", "close_window",
	[
		(call_script, "script_end_quest", "qst_incriminate_loyal_commander"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -5),
		(call_script, "script_change_player_honor", 3)
	]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_meet_spy_in_enemy_town"),
		(check_quest_succeeded, "qst_meet_spy_in_enemy_town")
	],
	"Have you brought me any news about that task I gave you? You know the one I mean...", "quest_meet_spy_in_enemy_town_completed",
	[]],

	[anyone|plyr, "quest_meet_spy_in_enemy_town_completed",
	[],
	"I have the reports you wanted right here.", "quest_meet_spy_in_enemy_town_completed_2",
	[]],

	[anyone, "quest_meet_spy_in_enemy_town_completed_2",
	[],
	"Ahh, well done. It's good to have competent {men/people} on my side. Here is the payment I promised you.", "lord_pretalk",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 3),
		(add_xp_as_reward, 500),
		(quest_get_slot, ":meet_spy_in_enemy_town_gold_reward", "qst_meet_spy_in_enemy_town", slot_quest_gold_reward),
		(call_script, "script_troop_add_gold", "trp_player", ":meet_spy_in_enemy_town_gold_reward"),
		(call_script, "script_end_quest", "qst_meet_spy_in_enemy_town")
	]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_cause_provocation"),
		(check_quest_succeeded, "qst_cause_provocation"),
		(quest_get_slot, ":cause_provocation_target_faction", "qst_cause_provocation", slot_quest_target_faction),
		(str_store_faction_name, 13, ":cause_provocation_target_faction")
	],
	"Brilliant work, {playername}! Whatever you did, the nobles of the {s13} are clamoring for war! Soon, the time will come for us to reap the benefits of our hard work, from fields ripe for plunder. This war is going to make us rich, mark my words!", "lord_pretalk",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 10),
		(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(eq, ":faction_of_troop_troop", "$players_kingdom"),
			(neq, ":troop", "$g_talk_troop"),
			(store_random_in_range, ":random_in_range_-5_4", -5, 4),
			(call_script, "script_change_player_relation_with_troop", ":troop", ":random_in_range_-5_4"),
		(try_end),
		(call_script, "script_troop_add_gold", "trp_player", 500),
		(add_xp_as_reward, 2000),
		(call_script, "script_change_player_honor", -5),
		(call_script, "script_end_quest", "qst_cause_provocation")
	]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_collect_debt"),
		(quest_slot_eq, "qst_collect_debt", slot_quest_current_state, 1),
		(quest_get_slot, ":collect_debt_target_troop", "qst_collect_debt", slot_quest_target_troop),
		(str_store_troop_name, 7, ":collect_debt_target_troop"),
		(quest_get_slot, ":collect_debt_target_amount", "qst_collect_debt", slot_quest_target_amount),
		(store_div, reg3, ":collect_debt_target_amount", 5),
		(store_sub, reg4, ":collect_debt_target_amount", reg3)
	],
	"I'm told that you've collected the money owed me from {s7}. Good, it's past time I had it back. I believe I promised to give you one-fifth of it all, eh? Well, that makes {reg3} coins, so if you give me my share -- that's {reg4} coins -- you can keep the rest.", "lord_collect_debt_completed",
	[]],

	[anyone|plyr, "lord_collect_debt_completed",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", reg4)
	],
	"Of course, {s65}. {reg4} coins, all here.", "lord_collect_debt_pay",
	[]],

	[anyone, "lord_collect_debt_pay",
	[],
	"I must admit I'm impressed, {playername}. I had lost hope of ever getting this money back. Please accept my sincere thanks.", "lord_pretalk",
	[
		(troop_remove_gold, "trp_player", reg4),
		(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", reg4, "$g_talk_troop"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 2),
		(add_xp_as_reward, 100),
		(call_script, "script_end_quest", "qst_collect_debt")
	]],

	[anyone|plyr, "lord_collect_debt_completed",
	[],
	"I am afraid I don't have the money with me, my lord.", "lord_collect_debt_no_pay",
	[]],

	[anyone, "lord_collect_debt_no_pay",
	[],
	"Is this a joke? I know full well that {s7} gave you the money, and I want every coin owed to me. As far as I'm concerned, I hold you personally in my debt until I see that silver.", "close_window",
	[
		(call_script, "script_change_debt_to_troop", "$g_talk_troop", reg4),
		(call_script, "script_end_quest", "qst_collect_debt"),
		(call_script, "script_objectionable_action", 4, "str_squander_money")
	]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_kill_local_merchant"),
		(check_quest_succeeded, "qst_kill_local_merchant"),
		(quest_slot_eq, "qst_kill_local_merchant", slot_quest_current_state, 1)
	],
	"I heard you got rid of that poxy merchant that was causing me so much grief. I can see you're not afraid to get your hands dirty, eh? I like that in a {man/woman}. Here's your reward. Remember, {playername}, stick with me and we'll go a long, long way together.", "close_window",
	[
		(call_script, "script_troop_add_gold", "trp_player", 600),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 4),
		(add_xp_as_reward, 300),
		(call_script, "script_end_quest", "qst_kill_local_merchant"),
		(call_script, "script_objectionable_action", 3, "str_murder_merchant"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_kill_local_merchant"),
		(check_quest_failed, "qst_kill_local_merchant")
	],
	"Oh, it's you. Enlighten me, how exactly does one lose a simple fight to some poxy, lowborn merchant? Truly, if I ever need my guardsmen to take a lesson in how to lay down and die, I'll be sure to come to you. Just leave me be, {playername}, I have things to do.", "close_window",
	[
		(call_script, "script_end_quest", "qst_kill_local_merchant"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_kill_local_merchant"),
		(check_quest_succeeded, "qst_kill_local_merchant"),
		(quest_slot_eq, "qst_kill_local_merchant", slot_quest_current_state, 2)
	],
	"You! Do you have sawdust between your ears? Did you think that when I said to kill the merchant, I meant you to have a nice chat with him and then let him go?! What possessed you?", "lord_kill_local_merchant_let_go",
	[]],

	[anyone|plyr, "lord_kill_local_merchant_let_go",
	[],
	"My lord, I made sure he will not act against you.", "lord_kill_local_merchant_let_go_2",
	[]],

	[anyone, "lord_kill_local_merchant_let_go_2",
	[],
	"Piffle. You were supposed to remove him, not give him a sermon and send him on his way. He had better do as you say, or you'll both regret it. Here, this is half the money I promised you. Don't say a word, {playername}, you're lucky to get even that. I have little use for {men/women} who cannot follow orders.", "lord_pretalk",
	[
		(call_script, "script_troop_add_gold", "trp_player", 300),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 2),
		(add_xp_as_reward, 500),
		(call_script, "script_end_quest", "qst_kill_local_merchant"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_start",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_follow_spy"),
		(eq, "$qst_follow_spy_no_active_parties", 1),
		(party_count_prisoners_of_type, ":var_2", "p_main_party", "trp_spy"),
		(party_count_prisoners_of_type, ":var_3", "p_main_party", "trp_spy_partner"),
		(gt, ":var_2", 0),
		(gt, ":var_3", 0),
		(call_script, "script_dplmc_store_troop_is_female", "trp_spy")
	],
	"Beautiful work, {playername}! You captured both the spy and {reg0?her:his} handler, just as I'd hoped, and the pair are now safely ensconced in my dungeon, waiting to be questioned. My torturer shall be busy tonight! Anyway, I'm very pleased with your success, {playername}, and I give you this purse as a token of my appreciation.", "lord_follow_spy_completed",
	[
		(party_remove_prisoners, "p_main_party", "trp_spy", 1),
		(party_remove_prisoners, "p_main_party", "trp_spy_partner", 1),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 4),
		(call_script, "script_troop_add_gold", "trp_player", 2000),
		(add_xp_as_reward, 4000),
		(call_script, "script_end_quest", "qst_follow_spy")
	]],

	[anyone, "lord_start",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_follow_spy"),
		(eq, "$qst_follow_spy_no_active_parties", 1),
		(party_count_prisoners_of_type, ":var_2", "p_main_party", "trp_spy"),
		(party_count_prisoners_of_type, ":var_3", "p_main_party", "trp_spy_partner"),
		(gt, ":var_2", 0),
		(eq, ":var_3", 0)
	],
	"Blast and damn you! I wanted TWO prisoners, {playername} -- what you've brought me is one step short of useless! I already know everything the spy knows, it was the handler I was after. Here, half a job gets you half a reward. Take it and begone.", "lord_follow_spy_half_completed",
	[
		(party_remove_prisoners, "p_main_party", "trp_spy", 1),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -1),
		(call_script, "script_troop_add_gold", "trp_player", 1000),
		(add_xp_as_reward, 400),
		(call_script, "script_end_quest", "qst_follow_spy")
	]],

	[anyone, "lord_start",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_follow_spy"),
		(eq, "$qst_follow_spy_no_active_parties", 1),
		(party_count_prisoners_of_type, ":var_2", "p_main_party", "trp_spy"),
		(party_count_prisoners_of_type, ":var_3", "p_main_party", "trp_spy_partner"),
		(eq, ":var_2", 0),
		(gt, ":var_3", 0),
		(call_script, "script_dplmc_store_troop_is_female", "trp_spy")
	],
	"I asked you for two prisoners, {playername}, not one. Two. Still, I suppose you did capture the spy's handler, the more important one of the pair. The spy will not dare return here and will prove quite useless to whatever master {reg0?she:he} served. 'Tis better than nothing. However, you'll understand if I pay you half the promised reward for what is but half a success.", "lord_follow_spy_half_completed",
	[
		(party_remove_prisoners, "p_main_party", "trp_spy_partner", 1),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(call_script, "script_troop_add_gold", "trp_player", 1000),
		(add_xp_as_reward, 400),
		(call_script, "script_end_quest", "qst_follow_spy")
	]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_follow_spy"),
		(eq, "$qst_follow_spy_no_active_parties", 1),
		(party_count_prisoners_of_type, ":var_2", "p_main_party", "trp_spy"),
		(party_count_prisoners_of_type, ":var_3", "p_main_party", "trp_spy_partner"),
		(eq, ":var_2", 0),
		(eq, ":var_3", 0),
		(call_script, "script_dplmc_store_troop_is_female", "trp_spy")
	],
	"Truly, {playername}, you are nothing short of totally incompetent. Failing to capture both the spy AND {reg0?her:his} handler plumbs astonishing new depths of failure. Forget any reward I offered you. You've done nothing to earn it.", "lord_follow_spy_failed",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -2),
		(call_script, "script_end_quest", "qst_follow_spy")
	]],

	[anyone|plyr, "lord_follow_spy_half_completed",
	[],
	"I did my best, {s65}.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_follow_spy_completed",
	[],
	"Thank you, {s65}.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_follow_spy_failed",
	[],
	"Hrm. As you like, {s65}.", "lord_pretalk",
	[]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_bring_back_runaway_serfs"),
		(check_quest_succeeded, "qst_bring_back_runaway_serfs")
	],
	"Splendid work, {playername}. All the serfs are back, properly cowed, and they're busy preparing for the harvest. You certainly earned your reward. Here, take it, with my compliments.", "lord_generic_mission_completed",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 2),
		(call_script, "script_troop_add_gold", "trp_player", 300),
		(add_xp_as_reward, 500),
		(call_script, "script_end_quest", "qst_bring_back_runaway_serfs"),
		(call_script, "script_objectionable_action", 3, "str_round_up_serfs")
	]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_bring_back_runaway_serfs"),
		(check_quest_failed, "qst_bring_back_runaway_serfs")
	],
	"{playername}. I have been waiting patiently for my serfs, yet none have returned. Have you an explanation? Were you outwitted by simple fieldhands, or are you merely incompetent? Or perhaps you are plotting with my enemies, intending to ruin me...", "lord_bring_back_runaway_serfs_failed",
	[]],

	[anyone|plyr, "lord_bring_back_runaway_serfs_failed",
	[],
	"Forgive me, {s65}, those serfs were slippery as eels.", "lord_bring_back_runaway_serfs_failed_1a",
	[]],

	[anyone|plyr, "lord_bring_back_runaway_serfs_failed",
	[],
	"Perhaps if you had treated them better...", "lord_bring_back_runaway_serfs_failed_1b",
	[]],

	[anyone, "lord_bring_back_runaway_serfs_failed_1a",
	[],
	"Hmph, that is hardly an excuse for failure, {playername}. Now if you will excuse me, I need to recruit new men to work these fields before we all starve.", "lord_pretalk",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -1),
		(call_script, "script_end_quest", "qst_bring_back_runaway_serfs")
	]],

	[anyone, "lord_bring_back_runaway_serfs_failed_1b",
	[],
	"Hah, now you reveal your true colours, traitor! Your words match your actions all too well. I should never have trusted you.", "close_window",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -10),
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(call_script, "script_change_player_relation_with_center", ":bring_back_runaway_serfs_object_center", 6),
		(call_script, "script_end_quest", "qst_bring_back_runaway_serfs"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_bring_back_runaway_serfs"),
		(check_quest_concluded, "qst_bring_back_runaway_serfs"),
		(assign, reg17, "$qst_bring_back_runaway_serfs_num_parties_returned")
	],
	"You disappoint me, {playername}. There were 3 groups of serfs that I charged you to return. 3. Not {reg17}. I suppose the ones who did come back shall have to work twice as hard to make up for those that got away. As for your reward, {playername}, I'll only pay you for the serfs you returned, not the ones you let fly. Here. Take it, and let this business be done.", "lord_runaway_serf_half_completed",
	[
		(store_mul, ":value", "$qst_bring_back_runaway_serfs_num_parties_returned", 100),
		(val_div, ":value", 2),
		(call_script, "script_troop_add_gold", "trp_player", ":value"),
		(add_xp_as_reward, ":value"),
		(call_script, "script_objectionable_action", 3, "str_round_up_serfs"),
		(call_script, "script_end_quest", "qst_bring_back_runaway_serfs")
	]],

	[anyone|plyr, "lord_runaway_serf_half_completed",
	[],
	"Thank you, {s65}. You are indeed generous.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_runaway_serf_half_completed",
	[],
	"Bah, this proved to be a waste of my time.", "lord_pretalk",
	[]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_deal_with_bandits_at_lords_village"),
		(check_quest_succeeded, "qst_deal_with_bandits_at_lords_village")
	],
	"{playername}, I was told that you have crushed the bandits at my village of {s5}. Please know that I am most grateful to you for that. Please, let me pay the expenses of your campaign. Here, I hope these {reg14} coins will be adequate.", "lord_deal_with_bandits_completed",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 3),
		(store_character_level, ":character_level_player", "trp_player"),
		(store_mul, ":value", ":character_level_player", 20),
		(val_add, ":value", 300),
		(call_script, "script_troop_add_gold", "trp_player", ":value"),
		(add_xp_as_reward, 350),
		(call_script, "script_end_quest", "qst_deal_with_bandits_at_lords_village"),
		(assign, reg14, ":value"),
		(quest_get_slot, ":deal_with_bandits_at_lords_village_target_center", "qst_deal_with_bandits_at_lords_village", slot_quest_target_center),
		(str_store_party_name, 5, ":deal_with_bandits_at_lords_village_target_center")
	]],

	[anyone|plyr, "lord_deal_with_bandits_completed",
	[],
	"Not a problem, {s65}.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_deal_with_bandits_completed",
	[],
	"Glad to be of service.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_deal_with_bandits_completed",
	[],
	"It was mere child's play.", "lord_pretalk",
	[]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_deal_with_bandits_at_lords_village"),
		(check_quest_concluded, "qst_deal_with_bandits_at_lords_village")
	],
	"Damn it, {playername}. I heard that you were unable to drive off the bandits from my village of {s5}, and thanks to you, my village now lies in ruins. Everyone said that you were a capable warrior, but appearently, they were wrong.", "lord_pretalk",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -5),
		(call_script, "script_end_quest", "qst_deal_with_bandits_at_lords_village"),
		(quest_get_slot, ":deal_with_bandits_at_lords_village_target_center", "qst_deal_with_bandits_at_lords_village", slot_quest_target_center),
		(str_store_party_name, 5, ":deal_with_bandits_at_lords_village_target_center")
	]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_deliver_cattle_to_army"),
		(check_quest_succeeded, "qst_deliver_cattle_to_army"),
		(quest_get_slot, reg13, "qst_deliver_cattle_to_army", slot_quest_target_amount)
	],
	"Ah, {playername}. My quartermaster has informed me of your delivery, {reg13} heads of cattle, as I requested. I'm impressed.", "lord_deliver_cattle_to_army_thank",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 2),
		(quest_get_slot, ":deliver_cattle_to_army_target_amount", "qst_deliver_cattle_to_army", slot_quest_target_amount),
		(store_mul, ":value", ":deliver_cattle_to_army_target_amount", 100),
		(call_script, "script_troop_add_gold", "trp_player", ":value"),
		(val_div, ":value", 5),
		(add_xp_as_reward, ":value"),
		(call_script, "script_end_quest", "qst_deliver_cattle_to_army"),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(setup_quest_text, "qst_follow_army"),
		(str_store_string, 2, "str_follow_army_quest_brief_2"),
		(call_script, "script_start_quest", "qst_follow_army", "$g_talk_troop"),
		(assign, "$g_player_follow_army_warnings", 0)
	]],

	[anyone|plyr, "lord_deliver_cattle_to_army_thank",
	[],
	"Not a problem, {s65}.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_deliver_cattle_to_army_thank",
	[],
	"Glad to be of service.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_deliver_cattle_to_army_thank",
	[],
	"Mere child's play.", "lord_pretalk",
	[]],

	[anyone, "lord_start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_scout_waypoints"),
		(check_quest_succeeded, "qst_scout_waypoints"),
		(str_store_party_name, 13, "$qst_scout_waypoints_wp_1"),
		(str_store_party_name, 14, "$qst_scout_waypoints_wp_2"),
		(str_store_party_name, 15, "$qst_scout_waypoints_wp_3")
	],
	"You make a good scout, {playername}. My runner just brought me your reports of the mission to {s13}, {s14} and {s15}. Well done.", "lord_scout_waypoints_thank",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(add_xp_as_reward, 100),
		(call_script, "script_end_quest", "qst_scout_waypoints"),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(setup_quest_text, "qst_follow_army"),
		(str_store_string, 2, "str_follow_army_quest_brief_2"),
		(call_script, "script_start_quest", "qst_follow_army", "$g_talk_troop"),
		(assign, "$g_player_follow_army_warnings", 0)
	]],

	[anyone|plyr, "lord_scout_waypoints_thank",
	[],
	"A simple task, {s65}.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_scout_waypoints_thank",
	[],
	"Nothing I couldn't handle.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_scout_waypoints_thank",
	[],
	"My pleasure, {s65}.", "lord_pretalk",
	[]],

	[anyone, "lord_start",
	[
		(check_quest_active, "qst_follow_army"),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_marshall, "$g_talk_troop"),
		(eq, "$g_random_army_quest", "qst_deliver_cattle_to_army"),
		(quest_get_slot, ":g_random_army_quest_target_amount", "$g_random_army_quest", slot_quest_target_amount),
		(assign, reg3, ":g_random_army_quest_target_amount")
	],
	"The army's supplies are dwindling too quickly, {playername}. I need you to bring me {reg3} heads of cattle so I can keep the troops fed. I care very little about where you get them, just bring them to me as soon as you can.", "lord_mission_told_deliver_cattle_to_army",
	[]],

	[anyone|plyr, "lord_mission_told_deliver_cattle_to_army",
	[],
	"Very well, your grace, I can find some cattle for you.", "lord_mission_told_deliver_cattle_to_army_accepted",
	[]],

	[anyone|plyr, "lord_mission_told_deliver_cattle_to_army",
	[],
	"Sorry, your grace, I have other plans.", "lord_mission_told_deliver_cattle_to_army_rejected",
	[]],

	[anyone, "lord_mission_told_deliver_cattle_to_army_accepted",
	[],
	"Excellent! You know what to do, {playername}, now get to it. I need that cattle sooner rather than later.", "close_window",
	[
		(call_script, "script_end_quest", "qst_follow_army"),
		(quest_get_slot, ":g_random_army_quest_target_amount", "$g_random_army_quest", slot_quest_target_amount),
		(str_store_troop_name_link, 13, "$g_talk_troop"),
		(assign, reg3, ":g_random_army_quest_target_amount"),
		(setup_quest_text, "$g_random_army_quest"),
		(str_store_string, 2, "@{s13} asked you to gather {reg3} heads of cattle and deliver them back to him."),
		(call_script, "script_start_quest", "$g_random_army_quest", "$g_talk_troop"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_mission_told_deliver_cattle_to_army_rejected",
	[],
	"That . . . is unfortunate, {playername}. I shall have to find someone else who's up to the task. Please go now, I've work to do.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_start",
	[
		(check_quest_active, "qst_report_to_army"),
		(quest_slot_eq, "qst_report_to_army", slot_quest_target_troop, "$g_talk_troop"),
		(assign, ":value", 0),
		(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(store_relation, ":relation_faction_players_kingdom", ":faction", "$players_kingdom"),
			(lt, ":relation_faction_players_kingdom", 0),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 0)
	],
	"Thank you for answering the summons, {playername}. However, as we are now at peace, we do not need your services. You may attend to your other business.", "lord_pretalk",
	[
		(call_script, "script_end_quest", "qst_report_to_army"),
		(quest_set_slot, "qst_report_to_army", slot_quest_giver_troop, "$g_talk_troop"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1)
	]],

	[anyone, "lord_start",
	[
		(check_quest_active, "qst_report_to_army"),
		(quest_slot_eq, "qst_report_to_army", slot_quest_target_troop, "$g_talk_troop")
	],
	"Ah, you have arrived at last, {playername}. We've been expecting you. I hope you have brought with you troops of sufficient number and experience.", "lord_report_to_army_asked",
	[]],

	[anyone|plyr, "lord_report_to_army_asked",
	[
		(quest_get_slot, ":report_to_army_target_amount", "qst_report_to_army", slot_quest_target_amount),
		(call_script, "script_party_count_fit_for_battle", "p_main_party"),
		(gt, reg0, ":report_to_army_target_amount")
	],
	"I have a company of good, hardened soldiers with me. We are ready to join you.", "lord_report_to_army_completed",
	[]],

	[anyone|plyr, "lord_report_to_army_asked",
	[],
	"I don't have the sufficient number of troops yet. I will need some more time.", "lord_report_to_army_continue",
	[]],

	[anyone, "lord_report_to_army_completed",
	[],
	"Excellent. We'll be moving soon. Now -- you are a {man/warrior} of sound judgement, and we trust that you will do what is necessary to support our campaign. I do not require you to remain close at hand, and I will not count it against you if you believe that your forces would be of better use elsewhere. But if you do choose to remain with me, to support me in battle, that would be appreciated. I may also have additional tasks for you to perform.", "close_window",
	[
		(call_script, "script_end_quest", "qst_report_to_army"),
		(quest_set_slot, "qst_report_to_army", slot_quest_giver_troop, "$g_talk_troop"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(setup_quest_text, "qst_follow_army"),
		(str_store_string, 2, "@{s9} wants you to follow his army until further notice."),
		(call_script, "script_start_quest", "qst_follow_army", "$g_talk_troop"),
		(assign, "$g_player_follow_army_warnings", 0),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_report_to_army_continue",
	[],
	"Then you'd better hurry. We'll be moving out soon against the enemy and I need every able hand we can muster.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_start",
	[
		(check_quest_active, "qst_follow_army"),
		(faction_slot_eq, "$players_kingdom", slot_faction_marshall, "$g_talk_troop"),
		(eq, "$g_random_army_quest", "qst_scout_waypoints"),
		(str_store_party_name, 13, "$qst_scout_waypoints_wp_1"),
		(str_store_party_name, 14, "$qst_scout_waypoints_wp_2"),
		(str_store_party_name, 15, "$qst_scout_waypoints_wp_3")
	],
	"{playername}, I need a volunteer to scout the area. We're sorely lacking on information, and I simply must have a better picture of the situation before we can proceed. I want you to go to {s13}, {s14} and {s15} and report back whatever you find.", "lord_mission_told_scout_waypoints",
	[]],

	[anyone|plyr, "lord_mission_told_scout_waypoints",
	[],
	"You've found your volunteer, my lord.", "lord_mission_told_scout_waypoints_accepted",
	[]],

	[anyone|plyr, "lord_mission_told_scout_waypoints",
	[],
	"I fear I must decline, your grace.", "lord_mission_told_scout_waypoints_rejected",
	[]],

	[anyone, "lord_mission_told_scout_waypoints_accepted",
	[],
	"Good {man/lass}! Simply pass near {s13}, {s14} and {s15} and check out what's there. Make a note of anything you find and return to me as soon as possible.", "close_window",
	[
		(call_script, "script_end_quest", "qst_follow_army"),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_party_name_link, 13, "$qst_scout_waypoints_wp_1"),
		(str_store_party_name_link, 14, "$qst_scout_waypoints_wp_2"),
		(str_store_party_name_link, 15, "$qst_scout_waypoints_wp_3"),
		(setup_quest_text, "$g_random_army_quest"),
		(str_store_string, 2, "@{s9} asked you to scout {s13}, {s14} and {s15}, then report back."),
		(call_script, "script_start_quest", "$g_random_army_quest", "$g_talk_troop"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_mission_told_scout_waypoints_rejected",
	[],
	"Hm. I'm disappointed, {playername}. Very disappointed. We'll talk later, I need to go and find somebody to scout for us.", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "lord_generic_mission_thank",
	[],
	"You have been most helpful, {playername}. My thanks.", "lord_generic_mission_completed",
	[]],

	[anyone|plyr, "lord_generic_mission_completed",
	[],
	"It was an honour to serve, my lord.", "lord_pretalk",
	[]],

	[anyone, "lord_start",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(troop_get_slot, ":g_talk_troop_player_debt", "$g_talk_troop", slot_troop_player_debt),
		(gt, ":g_talk_troop_player_debt", 0),
		(assign, reg1, ":g_talk_troop_player_debt")
	],
	"I think you owe me {reg1} coins, {playername}. Do you intend to pay your debt anytime soon?", "lord_pay_debt_2",
	[]],

	[anyone|plyr, "lord_pay_debt_2",
	[
		(troop_get_slot, ":g_talk_troop_player_debt", "$g_talk_troop", slot_troop_player_debt),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(le, ":g_talk_troop_player_debt", ":troop_gold_player")
	],
	"That is why I came, {s65}. Here it is, every coin I owe you.", "lord_pay_debt_3_1",
	[
		(troop_get_slot, ":g_talk_troop_player_debt", "$g_talk_troop", slot_troop_player_debt),
		(troop_remove_gold, "trp_player", ":g_talk_troop_player_debt"),
		(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", ":g_talk_troop_player_debt", "$g_talk_troop"),
		(troop_set_slot, "$g_talk_troop", slot_troop_player_debt, 0)
	]],

	[anyone|plyr, "lord_pay_debt_2",
	[],
	"Alas, I don't have sufficient funds, {s65}. But I'll pay you soon enough.", "lord_pay_debt_3_2",
	[]],

	[anyone, "lord_pay_debt_3_1",
	[],
	"Ah, excellent. You are a {man/woman} of honour, {playername}. I am satisfied. Your debt to me has been paid in full.", "lord_pretalk",
	[]],

	[anyone, "lord_pay_debt_3_2",
	[],
	"Well, don't keep me waiting much longer.", "lord_pretalk",
	[]],

	[anyone, "lord_start",
	[
		(eq, "$g_romantic_comment_made", 0),
		(ge, "$g_talk_troop_relation", 20),
		(troop_slot_ge, "trp_player", 7, 250),
		(neg|troop_slot_ge, "trp_player", 30, "trp_knight_1_1_wife"),
		(neg|troop_slot_ge, "trp_player", 30, "trp_npc1"),
		(assign, ":var_1", "$character_gender"),
		(call_script, "script_dplmc_store_troop_is_female", "$g_talk_troop"),
		(assign, ":var_2", reg0),
		(assign, reg65, reg0),
		(this_or_next|neg|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, -1),
		(eq, ":var_2", ":var_1"),
		(assign, ":value", 0),
		(try_for_range, ":troop", "trp_knight_1_1_wife", "trp_heroes_end"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 6),
			(call_script, "script_dplmc_store_troop_is_female", ":troop"),
			(assign, ":var_5", reg0),
			(this_or_next|ge, "$g_disable_condescending_comments", 2),
			(neq, ":var_5", ":var_1"),
			(troop_slot_eq, ":troop", slot_troop_spouse, -1),
			(troop_slot_eq, ":troop", slot_troop_betrothed, -1),
			(troop_slot_eq, ":troop", slot_troop_cur_center, "$g_encountered_party"),
			(neg|troop_slot_ge, ":troop", 5, 4),
			(call_script, "script_get_kingdom_lady_social_determinants", ":troop"),
			(eq, reg0, "$g_talk_troop"),
			(assign, "$marriage_candidate", ":troop"),
			(call_script, "script_npc_decision_checklist_male_guardian_assess_suitor", "$g_talk_troop", "trp_player"),
			(gt, reg0, 0),
			(assign, ":value", ":troop"),
		(try_end),
		(gt, ":value", 0),
		(troop_slot_eq, ":value", slot_troop_met, 0),
		(call_script, "script_troop_get_family_relation_to_troop", ":value", "$g_talk_troop"),
		(try_begin),
			(eq, reg0, 0),
			(str_store_string, 11, "@pupil"),
		(try_end),
		(str_store_troop_name, 14, ":value")
	],
	"By the way, I hope you get a chance to meet my {s11}, {s14}.  ", "lord_start",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_love_interests_end, 1),
		(assign, "$g_romantic_comment_made", 1)
	]],

	[anyone, "lord_start",
	[
		(eq, "$g_romantic_comment_made", 0),
		(ge, "$g_talk_troop_relation", 20),
		(troop_slot_ge, "trp_player", 7, 250),
		(assign, ":value", 0),
		(neg|troop_slot_ge, "trp_player", 30, "trp_knight_1_1_wife"),
		(neg|troop_slot_ge, "trp_player", 30, "trp_npc1"),
		(assign, ":var_2", "$character_gender"),
		(try_for_range, ":troop", "trp_knight_1_1_wife", "trp_heroes_end"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 6),
			(call_script, "script_dplmc_store_troop_is_female", ":troop"),
			(assign, ":var_4", reg0),
			(this_or_next|ge, "$g_disable_condescending_comments", 2),
			(neq, ":var_4", ":var_2"),
			(troop_slot_eq, ":troop", slot_troop_spouse, -1),
			(troop_slot_eq, ":troop", slot_troop_betrothed, -1),
			(troop_slot_eq, ":troop", slot_troop_cur_center, "$g_encountered_party"),
			(neg|troop_slot_ge, ":troop", 5, 4),
			(call_script, "script_get_kingdom_lady_social_determinants", ":troop"),
			(eq, reg0, "$g_talk_troop"),
			(assign, "$marriage_candidate", ":troop"),
			(call_script, "script_npc_decision_checklist_male_guardian_assess_suitor", "$g_talk_troop", "trp_player"),
			(gt, reg0, 0),
			(troop_slot_ge, ":troop", 5, 1),
			(store_current_hours, ":current_hours"),
			(troop_get_slot, ":troop_last_talk_time", ":troop", slot_troop_last_talk_time),
			(val_sub, ":current_hours", ":troop_last_talk_time"),
			(ge, ":current_hours", 24),
			(assign, ":value", ":troop"),
		(try_end),
		(gt, ":value", 0),
		(call_script, "script_troop_get_family_relation_to_troop", ":value", "$g_talk_troop"),
		(try_begin),
			(eq, reg0, 0),
			(str_store_string, 11, "@pupil"),
		(try_end),
		(assign, reg0, ":var_4"),
		(str_store_troop_name, 14, ":value")
	],
	"By the way, I am sure that my {s11}, {s14}, would be delighted were you to pay {reg0?her:him} a visit. {reg0?She:He} awaits you in {reg0?her:his} chambers.", "lord_start",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_love_interests_end, 1),
		(assign, "$g_romantic_comment_made", 1)
	]],

	[anyone, "lord_start",
	[
		(party_slot_eq, "$g_encountered_party", slot_town_lord, "$g_talk_troop"),
		(ge, "$g_talk_troop_faction_relation", 0),
		(neq, "$g_ransom_offer_rejected", 1),
		(lt, "$g_encountered_party_2", 0),
		(hero_can_join_as_prisoner, "$g_encountered_party"),
		(store_random_in_range, ":random_in_range_0_100", 0, 100),
		(lt, ":random_in_range_0_100", 10),
		(party_get_num_prisoner_stacks, ":num_prisoner_stacks_main_party", "p_main_party"),
		(assign, "$prisoner_lord_to_buy", -1),
		(try_for_range, ":number", 0, ":num_prisoner_stacks_main_party"),
			(party_prisoner_stack_get_troop_id, ":party_prisoner_stack_troop_id_main_party_number", "p_main_party", ":number"),
			(troop_slot_eq, ":party_prisoner_stack_troop_id_main_party_number", slot_troop_occupation, 2),
			(store_faction_of_troop, ":faction_of_troop_party_prisoner_stack_troop_id_main_party_number", ":party_prisoner_stack_troop_id_main_party_number"),
			(store_relation, ":relation_faction_of_troop_party_prisoner_stack_troop_id_main_party_number_g_talk_troop_faction", ":faction_of_troop_party_prisoner_stack_troop_id_main_party_number", "$g_talk_troop_faction"),
			(lt, ":relation_faction_of_troop_party_prisoner_stack_troop_id_main_party_number_g_talk_troop_faction", 0),
			(assign, "$prisoner_lord_to_buy", ":party_prisoner_stack_troop_id_main_party_number"),
		(try_end),
		(gt, "$prisoner_lord_to_buy", 0),
		(assign, ":value", 1),
		(try_begin),
			(check_quest_active, "qst_capture_enemy_hero"),
			(store_faction_of_troop, ":faction_of_troop_prisoner_lord_to_buy", "$prisoner_lord_to_buy"),
			(quest_slot_eq, "qst_capture_enemy_hero", slot_quest_target_faction, ":faction_of_troop_prisoner_lord_to_buy"),
			(assign, ":value", 0),
		(try_end),
		(eq, ":value", 1),
		(str_store_troop_name, 3, "$prisoner_lord_to_buy"),
		(assign, reg5, "$prisoner_lord_to_buy"),
		(call_script, "script_calculate_ransom_amount_for_troop", "$prisoner_lord_to_buy"),
		(assign, reg6, reg0),
		(val_div, reg6, 2),
		(assign, "$temp", reg6),
		(call_script, "script_dplmc_store_troop_is_female", "$prisoner_lord_to_buy")
	],
	"I heard that you have captured our enemy {s3} and {reg0?she:he} is with you at the moment. I can pay you {reg6} coins for {reg0?her:him} if you want to get rid of {reg0?her:him}. You can wait for {reg0?her:his} family to pay {reg0?her:his} ransom of course, but there is no telling how long that will take, eh?", "lord_buy_prisoner",
	[]],

	[anyone|plyr, "lord_buy_prisoner",
	[],
	"I accept your offer. I'll leave {s3} to you for {reg6} coins.", "lord_buy_prisoner_accept",
	[]],

	[anyone|plyr, "lord_buy_prisoner",
	[],
	"I fear I can't accept your offer.", "lord_buy_prisoner_deny",
	[
		(assign, "$g_ransom_offer_rejected", 1)
	]],

	[anyone, "lord_buy_prisoner_accept",
	[],
	"Excellent! Here's your {reg6} coins. I'll send some men to take him to our prison with due haste.", "lord_pretalk",
	[
		(remove_troops_from_prisoners, "$prisoner_lord_to_buy", 1),
		(call_script, "script_troop_add_gold", "trp_player", "$temp"),
		(party_add_prisoners, "$g_encountered_party", "$prisoner_lord_to_buy", 1),
		(troop_set_slot, "$prisoner_lord_to_buy", slot_troop_prisoner_of_party, "$g_encountered_party")
	]],

	[anyone, "lord_buy_prisoner_deny",
	[],
	"Mmm. As you wish, {playername}, but you'll not get a better offer. Take it from me.", "lord_pretalk",
	[]],

	[anyone, "lord_start",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 6),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_object, "$g_encountered_party"),
		(check_quest_active, "qst_organize_feast"),
		(quest_slot_eq, "qst_organize_feast", slot_quest_target_center, "$g_encountered_party"),
		(try_begin),
			(eq, "$g_talk_troop_faction", "fac_kingdom_4"),
			(str_store_string, 5, "str_flagon_of_mead"),
		(else_try),
			(store_mod, ":value", "$g_talk_troop", 2),
			(eq, ":value", 0),
			(eq, "$g_talk_troop_faction", "fac_kingdom_3"),
			(str_store_string, 5, "str_skin_of_kumis"),
		(else_try),
			(store_mod, ":value", "$g_talk_troop", 2),
			(eq, ":value", 0),
			(eq, "$g_talk_troop_faction", "fac_kingdom_2"),
			(str_store_string, 5, "str_mug_of_kvass"),
		(else_try),
			(str_store_string, 5, "str_cup_of_wine"),
		(try_end)
	],
	"I lift a {s5} to your health, {playername}! You are most gracious to host us on this occasion. Now, what is it?", "lord_talk",
	[
		(call_script, "script_internal_politics_rate_feast_to_s9", "trp_household_possessions", 120, "$players_kingdom", 0),
		(assign, ":var_1", reg0),
		(try_begin),
			(ge, ":var_1", 20),
			(ge, "$g_time_since_last_talk", 24),
			(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", 1),
		(try_end)
	]],

	[anyone, "lord_start",
	[
		(assign, reg0, 0),
		(try_begin),
			(is_between, "$g_talk_troop_faction", "fac_kingdom_1", "fac_kingdoms_end"),
			(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
		(try_end),
		(this_or_next|ge, reg0, 50),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "trp_player"),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 6),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_object, "$g_encountered_party")
	],
	"To your health, {my lord/your Highness}. Long may you reign. What is your bidding?", "lord_talk",
	[
		(try_begin),
			(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_lord, "trp_player"),
			(party_slot_eq, "$g_encountered_party", slot_town_lord, "$g_talk_troop"),
			(ge, "$g_time_since_last_talk", 24),
			(ge, "$g_talk_troop_relation", 0),
			(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", 1),
		(try_end)
	]],

	[anyone, "lord_start",
	[
		(assign, reg0, 0),
		(try_begin),
			(is_between, "$g_talk_troop_faction", "fac_kingdom_1", "fac_kingdoms_end"),
			(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
		(try_end),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(this_or_next|ge, reg0, 50),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "trp_player")
	],
	"What is your bidding?", "lord_talk",
	[]],

	[anyone, "lord_start",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 6),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_object, "$g_encountered_party"),
		(ge, "$g_encountered_party_relation", 0),
		(party_slot_eq, "$g_encountered_party", slot_town_lord, "$g_talk_troop"),
		(neq, "$talk_context", 3)
	],
	"I wish to welcome you to my hall on this auspicious occasion. Now, what is it?", "lord_talk",
	[
		(try_begin),
			(is_between, "$g_talk_troop_relation", 0, 10),
			(ge, "$g_time_since_last_talk", 24),
			(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", 2),
		(try_end)
	]],

	[anyone, "lord_start",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 6),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_object, "$g_encountered_party"),
		(ge, "$g_encountered_party_relation", 0),
		(party_get_slot, ":g_encountered_party_town_lord", "$g_encountered_party", slot_town_lord),
		(str_store_troop_name, 4, ":g_encountered_party_town_lord"),
		(neq, "$talk_context", 3),
		(try_begin),
			(eq, "$g_talk_troop_faction", "fac_kingdom_4"),
			(str_store_string, 5, "str_flagon_of_mead"),
		(else_try),
			(store_mod, ":value", "$g_talk_troop", 2),
			(eq, ":value", 0),
			(eq, "$g_talk_troop_faction", "fac_kingdom_3"),
			(str_store_string, 5, "str_skin_of_kumis"),
		(else_try),
			(store_mod, ":value", "$g_talk_troop", 2),
			(eq, ":value", 0),
			(eq, "$g_talk_troop_faction", "fac_kingdom_2"),
			(str_store_string, 5, "str_mug_of_kvass"),
		(else_try),
			(str_store_string, 5, "str_cup_of_wine"),
		(try_end)
	],
	"Let us lift a {s5} to the health of our host, {s4}. Now, what is it?", "lord_talk",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(check_quest_active, "qst_offer_gift"),
		(quest_slot_eq, "qst_offer_gift", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_get_slot, ":offer_gift_target_troop", "qst_offer_gift", slot_quest_target_troop),
		(str_store_troop_name, 4, ":offer_gift_target_troop"),
		(player_has_item, "itm_trade_furs"),
		(player_has_item, "itm_trade_velvet")
	],
	"I have the materials for {s4}'s gift.", "offer_gift_quest_complete",
	[]],

	[anyone, "offer_gift_quest_complete",
	[
		(quest_get_slot, ":offer_gift_target_troop", "qst_offer_gift", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":offer_gift_target_troop", 4)
	],
	"Ah, let me take those. Hopefully this will mend the quarrel between you two. You may wish to speak to {reg4?her:him}, and see if I had any success.", "close_window",
	[
		(quest_set_slot, "qst_offer_gift", slot_quest_current_state, 2),
		(troop_remove_item, "trp_player", "itm_trade_furs"),
		(troop_remove_item, "trp_player", "itm_trade_velvet"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "lord_talk",
	[
		(check_quest_active, "qst_intrigue_against_lord"),
		(neg|check_quest_succeeded, "qst_intrigue_against_lord"),
		(neg|check_quest_failed, "qst_intrigue_against_lord"),
		(quest_get_slot, ":intrigue_against_lord_target_troop", "qst_intrigue_against_lord", slot_quest_target_troop),
		(store_faction_of_troop, ":faction_of_troop_intrigue_against_lord_target_troop", ":intrigue_against_lord_target_troop"),
		(faction_slot_eq, ":faction_of_troop_intrigue_against_lord_target_troop", slot_faction_leader, "$g_talk_troop")
	],
	"My {reg65?lady:lord} -- there is something I wish to tell you in confidence, about one of your vassals.", "intrigue_quest_state_complaint",
	[]],

	[anyone, "intrigue_quest_state_complaint",
	[
		(assign, ":value", 1),
		(try_begin),
			(call_script, "script_cf_troop_can_intrigue", "$g_talk_troop", 1),
			(assign, ":value", 0),
		(try_end),
		(eq, ":value", 1)
	],
	"Whatever you have to say, I would ask you to wait until we are alone.", "lord_pretalk",
	[]],

	[anyone, "intrigue_quest_state_complaint",
	[],
	"What is it? I value your opinion, although I hope that you are not trying to sow dissension among my vassals? ", "intrigue_quest_state_complaint_plyr",
	[
		(quest_get_slot, ":intrigue_against_lord_target_troop", "qst_intrigue_against_lord", slot_quest_target_troop),
		(call_script, "script_troop_get_relation_with_troop", ":intrigue_against_lord_target_troop", "$g_talk_troop"),
		(assign, reg4, reg0),
		(str_store_troop_name, 4, ":intrigue_against_lord_target_troop"),
		(assign, reg5, "$g_talk_troop_effective_relation"),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(str_store_string, 12, "str_intrigue_success_chance"),
			(display_message, "str_s12"),
		(try_end)
	]],

	[anyone|plyr, "intrigue_quest_state_complaint_plyr",
	[
		(check_quest_active, "qst_intrigue_against_lord"),
		(quest_get_slot, ":intrigue_against_lord_target_troop", "qst_intrigue_against_lord", slot_quest_target_troop),
		(str_store_troop_name, 4, ":intrigue_against_lord_target_troop"),
		(troop_get_slot, ":intrigue_against_lord_target_troop_lord_reputation_type", ":intrigue_against_lord_target_troop", slot_lord_reputation_type),
		(val_add, ":intrigue_against_lord_target_troop_lord_reputation_type", "str_lord_derogatory_default"),
		(str_store_string, 5, ":intrigue_against_lord_target_troop_lord_reputation_type")
	],
	"My liege -- {s4} is widely held by your vassals to be {s5}, and a liability to your realm", "lord_intrigue_quest_complaint_stated",
	[]],

	[anyone|plyr, "intrigue_quest_state_complaint_plyr",
	[],
	"Actually, my liege, never mind.", "lord_pretalk",
	[
		(call_script, "script_fail_quest", "qst_intrigue_against_lord")
	]],

	[anyone, "lord_intrigue_quest_complaint_stated",
	[
		(store_random_in_range, ":random_in_range_-50_50", -50, 50),
		(store_add, ":value", "$g_talk_troop_effective_relation", ":random_in_range_-50_50"),
		(quest_get_slot, ":intrigue_against_lord_target_troop", "qst_intrigue_against_lord", slot_quest_target_troop),
		(call_script, "script_troop_get_relation_with_troop", ":intrigue_against_lord_target_troop", "$g_talk_troop"),
		(ge, ":value", reg0)
	],
	"Hmm... This is troubling to hear. Although I do not encourage my vassals to speak ill of each other, I value your opinion. Perhaps I should think twice about granting {s4} any further fiefs or offices...", "lord_pretalk",
	[
		(quest_get_slot, ":intrigue_against_lord_target_troop", "qst_intrigue_against_lord", slot_quest_target_troop),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", ":intrigue_against_lord_target_troop", -10),
		(call_script, "script_succeed_quest", "qst_intrigue_against_lord")
	]],

	[anyone, "lord_intrigue_quest_complaint_stated",
	[],
	"Sew discord among my vassals, will you? With everything else going on, do you think I appreciate my nobles turning on each other like quarreling dogs? Let me ask you this -- did someone put you up this?", "intrigue_quest_state_complaint_failed",
	[
		(call_script, "script_fail_quest", "qst_intrigue_against_lord"),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", -5)
	]],

	[anyone|plyr, "intrigue_quest_state_complaint_failed",
	[],
	"I stand by my words, my liege.", "intrigue_quest_state_accept_blame",
	[
		(call_script, "script_change_player_honor", 1)
	]],

	[anyone|plyr, "intrigue_quest_state_complaint_failed",
	[
		(quest_get_slot, ":intrigue_against_lord_giver_troop", "qst_intrigue_against_lord", slot_quest_giver_troop),
		(quest_get_slot, ":intrigue_against_lord_target_troop", "qst_intrigue_against_lord", slot_quest_target_troop),
		(str_store_troop_name, 4, ":intrigue_against_lord_giver_troop"),
		(str_store_troop_name, 5, ":intrigue_against_lord_target_troop")
	],
	"Yes, my lord -- {s4} put me up to denouncing {s5}!", "intrigue_quest_state_deflect_blame",
	[
		(quest_get_slot, ":intrigue_against_lord_giver_troop", "qst_intrigue_against_lord", slot_quest_giver_troop),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", ":intrigue_against_lord_giver_troop", -5),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", 4),
		(call_script, "script_change_player_honor", -2)
	]],

	[anyone, "intrigue_quest_state_accept_blame",
	[],
	"Indeed. You may stand by your words, but keep them to yourself. I will not have you undercutting my faithful follower {s4}.", "lord_pretalk",
	[]],

	[anyone, "intrigue_quest_state_deflect_blame",
	[],
	"I thought as much. Here's some advice for you, {lad/lassie} -- don't meddle in the quarrels of others. Now, enough of this.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(check_quest_active, "qst_denounce_lord"),
		(neg|check_quest_succeeded, "qst_denounce_lord"),
		(neg|check_quest_failed, "qst_denounce_lord"),
		(quest_slot_eq, "qst_denounce_lord", slot_quest_target_troop, "$g_talk_troop"),
		(troop_get_slot, ":g_talk_troop_lord_reputation_type", "$g_talk_troop", slot_lord_reputation_type),
		(val_add, ":g_talk_troop_lord_reputation_type", "str_lord_derogatory_default"),
		(str_store_string, 4, ":g_talk_troop_lord_reputation_type")
	],
	"I want to tell you something -- we have had enough of your {s4} ways", "lord_denounce_1",
	[]],

	[anyone, "lord_denounce_1",
	[],
	"I'm sorry... What did you say?", "lord_denounce_2",
	[]],

	[anyone|plyr, "lord_denounce_2",
	[
		(troop_get_slot, ":g_talk_troop_lord_reputation_type", "$g_talk_troop", slot_lord_reputation_type),
		(val_add, ":g_talk_troop_lord_reputation_type", "str_lord_derogatory_result"),
		(str_store_string, 4, ":g_talk_troop_lord_reputation_type")
	],
	"You heard me. You will {s4}", "lord_denounce_3",
	[
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", -15),
		(store_div, ":value", "$g_talk_troop_relation", 10),
		(val_add, ":value", 1),
		(val_max, ":value", 1),
		(val_mul, ":value", -1),
		(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
			(neq, "$g_talk_troop", ":troop"),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(eq, ":faction_of_troop_troop", "$g_talk_troop_faction"),
			(call_script, "script_troop_get_relation_with_troop", ":troop", "$g_talk_troop"),
			(lt, reg0, 15),
			(call_script, "script_troop_change_relation_with_troop", ":troop", "$g_talk_troop", ":value"),
		(try_end)
	]],

	[anyone|plyr, "lord_denounce_2",
	[],
	"Never mind. You must have misheard me.", "lord_pretalk",
	[]],

	[anyone, "lord_denounce_3",
	[
		(ge, "$g_talk_troop_relation", 10),
		(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
		(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1)
	],
	"Why would you say such a thing? To insult me like this, in spite of our friendship -- how much crueler is a knife in my back from an erstwhile friends, than the sword of a sworn foe. I do not know what game you are playing, but I want no part of it. Go away. I do not want to look at you.", "close_window",
	[
		(call_script, "script_succeed_quest", "qst_denounce_lord")
	]],

	[anyone, "lord_denounce_3",
	[
		(troop_slot_ge, "trp_player", 7, 300),
		(assign, reg0, 0),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 0),
			(this_or_next|is_between, "$g_talk_troop", "trp_kingdom_1_lord", "trp_knight_1_1"),
			(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
			(assign, reg0, 1),
		(try_end),
		(this_or_next|eq, reg0, 1),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 24),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 7),
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6)
	],
	"Hmf. Really? Is that your opinion, or did one of my rivals put those words in your mouth? Never mind. I will not play your game. Go away, and take your intrigues with you.", "close_window",
	[
		(call_script, "script_succeed_quest", "qst_denounce_lord")
	]],

	[anyone, "lord_denounce_3",
	[
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 21),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 23),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 25),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 7),
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6)
	],
	"I will not have you shame me in public. Retract your words, or meet me on the duelling ground.", "lord_denounce_4",
	[]],

	[anyone, "lord_denounce_3",
	[],
	"Is that so? Well, hear this -- you're a snake, and a {knave/strumpet}, and -- if you don't meet me on the duelling ground -- a coward. What say you to that? Do you retract your words, or shall we cross swords?", "lord_denounce_4",
	[]],

	[anyone|plyr, "lord_denounce_4",
	[],
	"It would be a pleasure to fight you.", "lord_respond_to_insult_challenge_duel_confirm",
	[]],

	[anyone|plyr, "lord_denounce_4",
	[],
	"I spoke rashly. I retract my words.", "lord_denounce_retract",
	[
		(call_script, "script_fail_quest", "qst_denounce_lord")
	]],

	[anyone, "lord_denounce_retract",
	[],
	"I thought as much. Now, be gone from here.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$g_comment_has_rejoinder", 1),
		(assign, "$g_comment_has_rejoinder", 0),
		(str_store_string, 9, "$g_rejoinder_to_last_comment")
	],
	"{s9}", "lord_respond_to_insult",
	[
		(try_begin),
			(troop_get_type, ":type_player", "trp_player"),
			(eq, ":type_player", 1),
			(unlock_achievement, 43),
		(try_end)
	]],

	[anyone, "lord_pretalk",
	[
		(lt, "$g_encountered_party_relation", 0),
		(encountered_party_is_attacker)
	],
	"But enough talking - yield or fight!", "party_encounter_lord_hostile_attacker_2",
	[]],

	[anyone, "lord_pretalk",
	[],
	"Anything else?", "lord_talk",
	[]],

	[anyone, "hero_pretalk",
	[],
	"Anything else?", "lord_talk",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(check_quest_active, "qst_resolve_dispute"),
		(quest_get_slot, ":resolve_dispute_target_troop", "qst_resolve_dispute", slot_quest_target_troop),
		(quest_get_slot, ":resolve_dispute_object_troop", "qst_resolve_dispute", slot_quest_object_troop),
		(assign, ":value", 0),
		(try_begin),
			(eq, ":resolve_dispute_target_troop", "$g_talk_troop"),
			(quest_slot_eq, "qst_resolve_dispute", slot_quest_target_state, 0),
			(assign, "$g_other_lord", ":resolve_dispute_object_troop"),
			(assign, ":value", ":resolve_dispute_object_troop"),
		(else_try),
			(eq, ":resolve_dispute_object_troop", "$g_talk_troop"),
			(quest_slot_eq, "qst_resolve_dispute", slot_quest_object_state, 0),
			(assign, "$g_other_lord", ":resolve_dispute_target_troop"),
			(assign, ":value", ":resolve_dispute_target_troop"),
		(try_end),
		(gt, ":value", 0),
		(str_store_troop_name, 11, "$g_other_lord")
	],
	"I wish to address your quarrel with {s11}", "lord_quarrel_intervention_1",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(encountered_party_is_attacker),
		(neg|is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop")
	],
	"Stay your hand! There is something I must say to you in private.", "lord_recruit_1_relation",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(check_quest_active, "qst_track_down_bandits"),
		(neg|check_quest_succeeded, "qst_track_down_bandits"),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 1)
	],
	"I am hunting a group of bandits with the following description... Have you seen them?", "lord_bandit_information",
	[]],

	[anyone, "lord_bandit_information",
	[
		(call_script, "script_get_manhunt_information_to_s15", "qst_track_down_bandits")
	],
	"{s15}", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$g_talk_troop_faction", "$players_kingdom"),
		(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, 1)
	],
	"Who do you think should be made the marshal of our realm?", "lord_internal_politics_cur_stance",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$g_talk_troop_faction", "$players_kingdom"),
		(faction_get_slot, ":players_kingdom_political_issue", "$players_kingdom", slot_faction_political_issue),
		(is_between, ":players_kingdom_political_issue", "p_town_1", "p_salt_mine"),
		(str_store_party_name, 4, ":players_kingdom_political_issue")
	],
	"Who do you think should receive the fief of {s4}?", "lord_internal_politics_cur_stance",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(is_between, "$players_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(neq, "$g_talk_troop_faction", "$players_kingdom"),
		(assign, ":value", 0),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(eq, "$player_has_homage", 1),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|eq, ":value", 1),
		(faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
		(try_begin),
			(faction_slot_ge, "$g_talk_troop_faction", 11, 1),
			(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
			(str_store_troop_name, 4, ":g_talk_troop_faction_leader"),
		(else_try),
			(str_store_faction_name, 4, "$g_talk_troop_faction"),
		(try_end),
		(str_store_faction_name, 5, "$players_kingdom")
	],
	"I need you to renounce your allegiance to {s4} and join the {s5} now, my {reg65?wife:husband}.", "lord_husband_auto_recruit",
	[]],

	[anyone, "lord_husband_auto_recruit",
	[
		(is_between, "$g_encountered_party", "p_town_1", "p_salt_mine"),
		(neg|party_slot_eq, "$g_encountered_party", slot_town_lord, "$g_talk_troop"),
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"Ask me again when we are outside of these walls, {s0}.", "lord_pretalk",
	[]],

	[anyone, "lord_husband_auto_recruit",
	[
		(is_between, "$g_encountered_party", "p_town_1", "p_salt_mine"),
		(neg|party_slot_eq, "$g_encountered_party", slot_town_lord, "$g_talk_troop"),
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"Ask me again when we are outside of these walls, {s0}.", "lord_pretalk",
	[]],

	[anyone, "lord_husband_auto_recruit",
	[
		(this_or_next|neg|is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 8),
		(this_or_next|neg|is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 8),
		(is_between, "$g_talk_troop_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(ge, ":players_kingdom_leader", 0),
		(ge, ":g_talk_troop_faction_leader", 0),
		(neq, ":g_talk_troop_faction_leader", "trp_player"),
		(call_script, "script_dplmc_get_faction_truce_length_with_faction", "$g_talk_troop_faction", "$players_kingdom"),
		(lt, reg0, 31),
		(troop_get_slot, ":g_talk_troop_lord_reputation_type", "$g_talk_troop", slot_lord_reputation_type),
		(neq, ":g_talk_troop_lord_reputation_type", 21),
		(neq, ":g_talk_troop_lord_reputation_type", 23),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":g_talk_troop_faction_leader"),
		(assign, ":var_4", reg0),
		(assign, ":value", "$g_talk_troop_effective_relation"),
		(try_begin),
			(this_or_next|eq, ":players_kingdom_leader", "trp_player"),
			(eq, "$players_kingdom", "fac_player_supporters_faction"),
			(val_max, ":value", "$g_talk_troop_effective_relation"),
			(game_get_reduce_campaign_ai, ":game_reduce_campaign_ai"),
			(assign, reg0, 20),
			(try_begin),
				(eq, ":game_reduce_campaign_ai", 0),
				(assign, reg0, 75),
			(else_try),
				(eq, ":game_reduce_campaign_ai", 1),
				(assign, reg0, 50),
			(else_try),
				(eq, ":game_reduce_campaign_ai", 2),
				(assign, reg0, 20),
			(try_end),
			(val_add, ":value", "$player_right_to_rule"),
			(val_sub, ":value", reg0),
		(else_try),
			(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":players_kingdom_leader"),
			(gt, reg0, "$g_talk_troop_relation"),
			(assign, ":value", reg0),
			(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
			(ge, ":skill_level_persuasion_player", 1),
			(try_begin),
				(ge, ":value", 0),
				(store_add, reg0, ":skill_level_persuasion_player", 10),
				(val_mul, ":value", reg0),
				(val_div, ":value", 10),
			(else_try),
				(store_sub, reg0, 20, ":skill_level_persuasion_player"),
				(val_mul, ":value", reg0),
				(val_div, ":value", 20),
			(try_end),
		(try_end),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_troop_original_faction, "$players_kingdom"),
			(store_mul, reg0, ":value", 2),
			(val_add, ":value", 10),
			(val_max, ":value", reg0),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_troop_original_faction, "$g_talk_troop_faction"),
			(store_mul, reg0, ":var_4", 2),
			(val_add, ":var_4", 10),
			(val_max, ":var_4", reg0),
			(eq, ":g_talk_troop_lord_reputation_type", 7),
			(store_add, reg0, ":var_4", 5),
			(val_mul, ":var_4", 3),
			(val_div, ":var_4", 2),
			(val_max, ":var_4", reg0),
		(try_end),
		(ge, ":var_4", ":value"),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(assign, reg0, ":var_4"),
			(assign, reg1, ":value"),
			(display_message, "@{!} DEBUG - current kingdom score {reg0} vs player kingdom score {reg1}"),
		(try_end),
		(str_store_faction_name, 2, "$g_talk_troop_faction")
	],
	"I must remain loyal to {s14}. I am sorry.", "lord_pretalk",
	[]],

	[anyone, "lord_husband_auto_recruit",
	[
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"As you wish, {s0}.", "close_window",
	[
		(assign, "$g_leave_encounter", 1),
		(call_script, "script_change_troop_faction", "$g_talk_troop", "$players_kingdom"),
		(try_begin),
			(store_relation, ":relation_players_kingdom_g_talk_troop_faction", "$players_kingdom", "$g_talk_troop_faction"),
			(ge, ":relation_players_kingdom_g_talk_troop_faction", 0),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(display_message, "str_lord_recruitment_provokes_home_faction"),
			(try_end),
			(call_script, "script_add_log_entry", 78, "trp_player", -1, "$g_talk_troop", "$g_talk_troop_faction"),
			(store_add, ":value", "$players_kingdom", 130),
			(val_sub, ":value", "fac_player_supporters_faction"),
			(faction_set_slot, "$g_talk_troop_faction", ":value", 30),
			(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
			(call_script, "script_troop_change_relation_with_troop", "trp_player", ":g_talk_troop_faction_leader", -3),
		(try_end),
		(try_begin),
			(faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player"),
			(call_script, "script_change_player_right_to_rule", 5),
		(try_end)
	]],

	[anyone|plyr, "lord_talk",
	[
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop")
	],
	"There is a matter which I would like to discuss in private.", "lord_recruit_1_relation",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(neg|encountered_party_is_attacker),
		(neg|is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$g_talk_troop_faction"),
		(lt, reg0, 50),
		(call_script, "script_dplmc_get_troop_standing_in_faction", "$g_talk_troop", "$g_talk_troop_faction"),
		(lt, reg0, 50),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(neq, "$g_talk_troop_faction", "fac_player_supporters_faction")
	],
	"There is something which I would like to discuss with to you in private.", "lord_recruit_1_relation",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(troop_slot_ge, "$g_talk_troop", 51, 1),
		(eq, "$cheat_mode", 1)
	],
	"CHEAT -- Reset lord decision seed and intrigue impatience", "lord_talk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_intrigue_impatience, 0),
		(store_random_in_range, ":random_in_range_0_9999", 0, 9999),
		(troop_set_slot, "$g_talk_troop", slot_troop_temp_decision_seed, ":random_in_range_0_9999")
	]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$cheat_mode", 1)
	],
	"CHEAT -- Let's duel (insult)", "lord_respond_to_insult_challenge_duel",
	[]],

	[anyone, "lord_respond_to_insult",
	[
		(eq, "$g_last_comment_copied_to_s42", "str_comment_intro_female_sadistic_admiring")
	],
	"Hah! I admire a quick tongue. Perhaps some day I shall remove it, with tongs, to admire it at greater leisure, but today, at least, I shall salute your wit and courage.", "lord_pretalk",
	[
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", 5),
		(call_script, "script_change_troop_renown", "trp_player", 2)
	]],

	[anyone, "lord_respond_to_insult",
	[
		(this_or_next|eq, "$g_last_comment_copied_to_s42", "str_comment_intro_female_pitiless_admiring"),
		(this_or_next|eq, "$g_last_comment_copied_to_s42", "str_comment_intro_female_common_upstanding"),
		(this_or_next|eq, "$g_last_comment_copied_to_s42", "str_comment_intro_female_noble_upstanding"),
		(this_or_next|eq, "$g_last_comment_copied_to_s42", "str_comment_intro_female_common_martial"),
		(eq, "$g_last_comment_copied_to_s42", "str_comment_intro_female_badtempered_admiring")
	],
	"I meant no offense.", "lord_pretalk",
	[
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", -2),
		(call_script, "script_change_troop_renown", "trp_player", 2)
	]],

	[anyone, "lord_respond_to_insult",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_leaded_party, "$g_encountered_party"),
		(store_party_size_wo_prisoners, ":party_size_wo_prisoners_g_talk_troop_party", "$g_talk_troop_party"),
		(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party", "p_main_party"),
		(val_mul, ":party_size_wo_prisoners_main_party", 3),
		(val_div, ":party_size_wo_prisoners_main_party", 2),
		(call_script, "script_dplmc_party_calculate_strength_in_terrain", "$g_encountered_party", -1, 0, 0),
		(assign, ":var_3", reg1),
		(call_script, "script_dplmc_party_calculate_strength_in_terrain", "p_main_party", -1, 0, 0),
		(assign, ":var_4", reg1),
		(val_mul, ":var_4", 3),
		(val_div, ":var_4", 2),
		(call_script, "script_dplmc_store_troop_personality_caution_level", "$g_talk_troop"),
		(try_begin),
			(lt, reg0, 0),
			(val_mul, ":party_size_wo_prisoners_g_talk_troop_party", 5),
			(val_div, ":party_size_wo_prisoners_g_talk_troop_party", 4),
			(val_mul, ":var_3", 5),
			(val_div, ":var_3", 4),
		(try_end),
		(this_or_next|gt, ":var_3", ":var_4"),
		(gt, ":party_size_wo_prisoners_g_talk_troop_party", ":party_size_wo_prisoners_main_party"),
		(neq, "$players_kingdom", "$g_talk_troop_faction"),
		(try_begin),
			(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", 1),
			(assign, reg0, 1),
			(assign, reg1, 0),
		(else_try),
			(neq, reg65, 0),
			(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", 0),
			(assign, reg0, 0),
			(assign, reg1, 1),
		(else_try),
			(assign, reg0, 0),
			(assign, reg1, 0),
		(try_end)
	],
	"Are you trying to provoke me? Well, I would have you know that I am under no obligation to duel {reg0?women:{reg1?boys:fools}}, commoners, rebels, or brigands. I could, however, order my {reg1?{reg65?women:soldiers}:{reg65?soldiers:men}} to seize you and horsewhip you. Would you like them to do that?", "lord_respond_to_insult_challenge_battle",
	[
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", -10),
		(call_script, "script_change_troop_renown", "trp_player", 2)
	]],

	[anyone, "lord_respond_to_insult",
	[
		(try_begin),
			(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", 1),
			(assign, reg0, 1),
			(assign, reg1, 0),
		(else_try),
			(neq, reg65, 0),
			(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", 0),
			(assign, reg0, 0),
			(assign, reg1, 1),
		(else_try),
			(assign, reg0, 0),
			(assign, reg1, 0),
		(try_end)
	],
	"Are you trying to provoke me? Well, I would have you know that I am under no obligation to duel {reg0?women:{reg1?boys:fools}}, commoners, rebels, or brigands. However, in your case, I would be delighted to make an exception. Are you ready for a lesson in deference to your betters, {varlot/girl}?", "lord_respond_to_insult_challenge_duel",
	[
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", -10),
		(call_script, "script_change_troop_renown", "trp_player", 2)
	]],

	[anyone, "lord_respond_to_insult",
	[
		(try_begin),
			(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", 1),
			(assign, reg0, 1),
			(assign, reg1, 0),
		(else_try),
			(neq, reg65, 0),
			(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", 0),
			(assign, reg0, 0),
			(assign, reg1, 1),
		(else_try),
			(assign, reg0, 0),
			(assign, reg1, 0),
		(try_end)
	],
	"Are you trying to provoke me? Well, I would have you know that I am under no obligation to duel {reg0?women:{reg1?boys:fools}}, commoners, rebels, or brigands. You are lucky that I am in a good mood, because I am perfectly within my rights to order my {reg1?{reg65?women:soldiers}:{reg65?soldiers:men}} to seize you and horsewhip you. Now begone -- I have had enough of you.", "close_window",
	[
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", -10),
		(call_script, "script_change_troop_renown", "trp_player", 2),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "lord_respond_to_insult_challenge_battle",
	[],
	"I would like to see them try.", "lord_respond_to_insult_challenge_battle_confirm",
	[
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", -10),
		(call_script, "script_change_troop_renown", "trp_player", 3)
	]],

	[anyone|plyr, "lord_respond_to_insult_challenge_battle",
	[],
	"This is not worth the shedding of blood.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_respond_to_insult_challenge_battle_confirm",
	[],
	"Enough of your insolence! At {him/her}, lads!", "close_window",
	[
		(assign, "$g_private_battle_with_troop", "$g_talk_troop"),
		(assign, "$cant_leave_encounter", 1),
		(assign, "$encountered_party_friendly", 0),
		(jump_to_menu, "mnu_simple_encounter")
	]],

	[anyone|plyr, "lord_respond_to_insult_challenge_duel",
	[],
	"I am ready to teach you one.", "lord_respond_to_insult_challenge_duel_confirm",
	[
		(str_store_troop_name_link, 13, "$g_talk_troop"),
		(setup_quest_text, "qst_duel_avenge_insult"),
		(call_script, "script_dplmc_store_troop_is_female_reg", "$g_talk_troop", 4),
		(str_store_string, 2, "str_you_intend_to_challenge_s13_to_force_him_to_retract_an_insult"),
		(call_script, "script_start_quest", "qst_duel_avenge_insult", "$g_talk_troop"),
		(quest_set_slot, "qst_duel_avenge_insult", slot_quest_target_troop, "$g_talk_troop"),
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", -10)
	]],

	[anyone|plyr, "lord_respond_to_insult_challenge_duel",
	[],
	"This is not worth the shedding of blood.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_respond_to_insult_challenge_duel_confirm",
	[],
	"So be it. Defend yourself!", "close_window",
	[
		(call_script, "script_set_up_duel_with_troop", "$g_talk_troop")
	]],

	[anyone, "lord_quarrel_intervention_1",
	[
		(assign, ":value", 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$g_other_lord"),
			(assign, ":value", 1),
		(try_end),
		(assign, reg3, ":value"),
		(assign, reg4, ":value"),
		(str_store_string, 14, "str_general_quarrel"),
		(assign, "$temp", "$g_other_lord"),
		(assign, ":value_2", 0),
		(store_add, ":value_3", "$num_log_entries", 1),
		(try_for_range, ":number", 1, ":value_3"),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 27),
			(troop_slot_eq, "trp_log_array_troop_object", ":number", "$temp"),
			(troop_slot_eq, "trp_log_array_center_object", ":number", "$g_talk_troop"),
			(troop_slot_eq, "trp_log_array_faction_object", ":number", "$g_talk_troop_faction"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(str_store_string, 14, reg0),
			(assign, ":value_2", 1),
		(else_try),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 32),
			(troop_slot_eq, "trp_log_array_actor", ":number", "$g_talk_troop"),
			(troop_slot_eq, "trp_log_array_center_object", ":number", "$temp"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(str_store_string, 14, reg0),
			(assign, ":value_2", 1),
		(else_try),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 33),
			(troop_slot_eq, "trp_log_array_actor", ":number", "$g_talk_troop"),
			(troop_slot_eq, "trp_log_array_center_object", ":number", "$temp"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(str_store_string, 14, reg0),
			(assign, ":value_2", 1),
		(else_try),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 26),
			(troop_slot_eq, "trp_log_array_actor", ":number", "$g_talk_troop"),
			(troop_slot_eq, "trp_log_array_troop_object", ":number", "$temp"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(str_store_string, 14, reg0),
			(assign, ":value_2", 1),
		(else_try),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 31),
			(troop_slot_eq, "trp_log_array_actor", ":number", "$g_talk_troop"),
			(troop_slot_eq, "trp_log_array_center_object", ":number", "$temp"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(troop_get_slot, ":log_array_troop_object_number", "trp_log_array_troop_object", ":number"),
			(assign, reg4, 0),
			(try_begin),
				(call_script, "script_cf_dplmc_troop_is_female", ":log_array_troop_object_number"),
				(assign, reg4, 1),
			(try_end),
			(str_store_string, 14, reg0),
			(assign, ":value_2", 1),
		(else_try),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 31),
			(troop_slot_eq, "trp_log_array_actor", ":number", "$temp"),
			(troop_slot_eq, "trp_log_array_center_object", ":number", "$g_talk_troop"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(troop_get_slot, ":log_array_troop_object_number", "trp_log_array_troop_object", ":number"),
			(assign, reg4, 0),
			(try_begin),
				(call_script, "script_cf_dplmc_troop_is_female", ":log_array_troop_object_number"),
				(assign, reg4, 1),
			(try_end),
			(str_store_string, 14, reg0),
			(assign, ":value_2", 1),
		(try_end),
		(try_begin),
			(eq, ":value_2", 0),
			(call_script, "script_troop_describes_quarrel_with_troop_to_s14", "$g_talk_troop", "$temp"),
		(try_end)
	],
	"{s14}", "lord_quarrel_intervention_2",
	[]],

	[anyone|plyr, "lord_quarrel_intervention_2",
	[],
	"Ah, well. It sounds like you're in the right, then.", "lord_quarrel_intervention_3a",
	[
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_other_lord", -20),
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", 10),
		(try_begin),
			(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
			(call_script, "script_add_log_entry", 27, "trp_player", "$g_other_lord", "$g_talk_troop", "fac_player_supporters_faction"),
		(try_end),
		(call_script, "script_end_quest", "qst_resolve_dispute")
	]],

	[anyone|plyr, "lord_quarrel_intervention_2",
	[
		(faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player")
	],
	"Whatever your differences, I want you to settle them.", "lord_quarrel_intervention_3b",
	[]],

	[anyone|plyr, "lord_quarrel_intervention_2",
	[
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player")
	],
	"Could you not be convinced to settle your differences?", "lord_quarrel_intervention_3b",
	[]],

	[anyone|plyr, "lord_quarrel_intervention_2",
	[],
	"On second thought, I want nothing to do with this.", "lord_pretalk",
	[
		(call_script, "script_abort_quest", "qst_resolve_dispute", 1)
	]],

	[anyone, "lord_quarrel_intervention_3a",
	[],
	"I'm glad that you think so.", "lord_pretalk",
	[]],

	[anyone, "lord_quarrel_intervention_3b",
	[
		(store_random_in_range, ":random_in_range_0_21", 0, 21),
		(le, ":random_in_range_0_21", "$g_talk_troop_effective_relation"),
		(str_store_troop_name, 11, "$g_other_lord")
	],
	"For the sake of our friendship, I defer to your judgment. I will try to make amends with {s11}.", "lord_quarrel_intervention_4",
	[
		(try_begin),
			(quest_slot_eq, "qst_resolve_dispute", slot_quest_target_troop, "$g_talk_troop"),
			(quest_set_slot, "qst_resolve_dispute", slot_quest_target_state, 1),
		(else_try),
			(quest_slot_eq, "qst_resolve_dispute", slot_quest_object_troop, "$g_talk_troop"),
			(quest_set_slot, "qst_resolve_dispute", slot_quest_object_state, 1),
		(try_end)
	]],

	[anyone, "lord_quarrel_intervention_3b",
	[
		(str_store_troop_name, 11, "$g_other_lord")
	],
	"I will not reconcile with {s11}. I know my rights.", "lord_pretalk",
	[
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", -15),
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_other_lord", 10),
		(try_begin),
			(eq, "$players_kingdom", "fac_player_supporters_faction"),
			(call_script, "script_add_log_entry", 27, "trp_player", "$g_talk_troop", "$g_other_lord", "fac_player_supporters_faction"),
		(try_end),
		(call_script, "script_end_quest", "qst_resolve_dispute")
	]],

	[anyone, "lord_quarrel_intervention_4",
	[
		(quest_slot_eq, "qst_resolve_dispute", slot_quest_object_state, 1),
		(quest_slot_eq, "qst_resolve_dispute", slot_quest_target_state, 1)
	],
	"Let it be as though our quarrel never occurred.", "lord_pretalk",
	[
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "$g_other_lord", 20),
		(call_script, "script_succeed_quest", "qst_resolve_dispute"),
		(call_script, "script_end_quest", "qst_resolve_dispute"),
		(call_script, "script_change_player_honor", 3),
		(call_script, "script_change_troop_renown", "trp_player", 25),
		(add_xp_as_reward, 500)
	]],

	[anyone, "lord_quarrel_intervention_4",
	[
		(str_store_troop_name, 11, "$g_other_lord"),
		(call_script, "script_dplmc_store_troop_is_female", "$g_other_lord")
	],
	"I suppose that you should speak to {s11}, and see if {reg0?she:he} will do the same for me.", "lord_pretalk",
	[]],

	[anyone, "lord_internal_politics_cur_stance",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_stance_on_faction_issue, "trp_player")
	],
	"I had already made up my mind to support you.", "lord_internal_politics_cur_stance_plyr_response",
	[]],

	[anyone, "lord_internal_politics_cur_stance",
	[
		(troop_get_slot, ":player_stance_on_faction_issue", "trp_player", slot_troop_stance_on_faction_issue),
		(troop_slot_eq, "$g_talk_troop", slot_troop_stance_on_faction_issue, ":player_stance_on_faction_issue"),
		(gt, ":player_stance_on_faction_issue", -1),
		(str_store_troop_name, 4, ":player_stance_on_faction_issue"),
		(call_script, "script_dplmc_cap_troop_describes_troop_to_troop_s1", 0, "$g_talk_troop", ":player_stance_on_faction_issue", "trp_player"),
		(str_store_string_reg, 4, 1)
	],
	"I had already made up my mind to support {s4}.", "lord_internal_politics_cur_stance_plyr_response",
	[]],

	[anyone, "lord_internal_politics_cur_stance",
	[
		(call_script, "script_npc_decision_checklist_take_stand_on_issue", "$g_talk_troop"),
		(eq, reg0, -1)
	],
	"I am unable to decide at this time", "lord_internal_politics_cur_stance_plyr_response",
	[]],

	[anyone, "lord_internal_politics_cur_stance",
	[],
	"I support {s15}. {s10}", "lord_internal_politics_cur_stance_plyr_response",
	[
		(call_script, "script_npc_decision_checklist_take_stand_on_issue", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(assign, ":var_2", reg1),
		(troop_set_slot, "$g_talk_troop", slot_troop_stance_on_faction_issue, ":var_1"),
		(str_store_string, 10, ":var_2"),
		(try_begin),
			(eq, ":var_1", "$g_talk_troop"),
			(str_clear, 10),
		(try_end),
		(call_script, "script_troop_describes_troop_to_s15", "$g_talk_troop", ":var_1")
	]],

	[anyone|plyr, "lord_internal_politics_cur_stance_plyr_response",
	[
		(troop_slot_eq, "trp_player", slot_troop_stance_on_faction_issue, -1),
		(eq, "$player_has_homage", 1)
	],
	"Let me tell you whom I support...", "lord_internal_politics_plyr_choose_candidate",
	[]],

	[anyone|plyr, "lord_internal_politics_cur_stance_plyr_response",
	[
		(eq, "$cheat_mode", 1),
		(eq, "$player_has_homage", 1)
	],
	"CHEAT -- Reset support", "lord_internal_politics_cur_stance_plyr_response",
	[
		(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1)
	]],

	[anyone, "lord_internal_politics_plyr_choose_candidate",
	[],
	"Whom do you support?", "lord_internal_politics_plyr_choose_candidate_select",
	[]],

	[anyone|plyr, "lord_internal_politics_plyr_choose_candidate_select",
	[],
	"I would like to nominate myself for that honor", "lord_internal_politics_pretalk",
	[
		(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, "trp_player")
	]],

	[anyone|plyr, "lord_internal_politics_plyr_choose_candidate_select",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(neq, ":player_spouse", "$g_talk_troop"),
		(is_between, ":player_spouse", "trp_npc1", "trp_heroes_end"),
		(troop_slot_eq, ":player_spouse", slot_troop_occupation, 2),
		(store_faction_of_troop, ":faction_of_troop_player_spouse", ":player_spouse"),
		(eq, ":faction_of_troop_player_spouse", "$players_kingdom"),
		(str_store_troop_name, 4, ":player_spouse"),
		(call_script, "script_dplmc_store_troop_is_female", ":player_spouse")
	],
	"I support my {reg0?wife:husband}, {s4}", "lord_internal_politics_pretalk",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, ":player_spouse")
	]],

	[anyone|plyr, "lord_internal_politics_plyr_choose_candidate_select",
	[
		(str_store_troop_name, 4, "$g_talk_troop")
	],
	"I would support you, {s4}", "lord_internal_politics_support_acknowledge",
	[]],

	[anyone|plyr, "lord_internal_politics_plyr_choose_candidate_select",
	[
		(troop_get_slot, ":g_talk_troop_stance_on_faction_issue", "$g_talk_troop", slot_troop_stance_on_faction_issue),
		(is_between, ":g_talk_troop_stance_on_faction_issue", "trp_npc1", "trp_heroes_end"),
		(str_store_troop_name, 4, ":g_talk_troop_stance_on_faction_issue"),
		(neq, ":g_talk_troop_stance_on_faction_issue", "$g_talk_troop")
	],
	"I would support your choice, {s4}", "lord_internal_politics_support_same_acknowledge",
	[]],

	[anyone|plyr, "lord_internal_politics_plyr_choose_candidate_select",
	[],
	"Never mind", "lord_pretalk",
	[]],

	[anyone, "lord_internal_politics_support_acknowledge",
	[
		(troop_get_slot, ":g_talk_troop_stance_on_faction_issue", "$g_talk_troop", slot_troop_stance_on_faction_issue),
		(neq, "$g_talk_troop", ":g_talk_troop_stance_on_faction_issue")
	],
	"That is most gracious of you, but I do not seek the honor, and I decline your support.", "lord_pretalk",
	[
		(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1)
	]],

	[anyone, "lord_internal_politics_support_acknowledge",
	[
		(lt, "$g_talk_troop_effective_relation", -5),
		(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
		(this_or_next|lt, reg0, 1),
		(lt, "$g_talk_troop_effective_relation", -10),
		(this_or_next|neg|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(this_or_next|neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(lt, "$g_talk_troop_effective_relation", -10),
		(this_or_next|neg|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(this_or_next|neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(this_or_next|neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 21),
		(lt, "$g_talk_troop_effective_relation", -20)
	],
	"I do not trust you, and I do not need your support.", "lord_pretalk",
	[
		(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1)
	]],

	[anyone, "lord_internal_politics_support_acknowledge",
	[],
	"That is most gracious of you", "lord_pretalk",
	[
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", 3),
		(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, "$g_talk_troop")
	]],

	[anyone, "lord_internal_politics_support_same_acknowledge",
	[
		(lt, "$g_talk_troop_effective_relation", -5),
		(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
		(this_or_next|lt, reg0, 1),
		(lt, "$g_talk_troop_effective_relation", -10),
		(this_or_next|neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(lt, "$g_talk_troop_effective_relation", -10),
		(this_or_next|neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(this_or_next|neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 21),
		(lt, "$g_talk_troop_effective_relation", -20),
		(troop_get_slot, ":g_talk_troop_stance_on_faction_issue", "$g_talk_troop", slot_troop_stance_on_faction_issue),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":g_talk_troop_stance_on_faction_issue", 3)
	],
	"You may tell {reg3?her:him} that yourself. I do not trust you, and I will have no part in any game which you are playing.", "lord_pretalk",
	[
		(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1)
	]],

	[anyone, "lord_internal_politics_support_same_acknowledge",
	[
		(troop_get_slot, ":g_talk_troop_stance_on_faction_issue", "$g_talk_troop", slot_troop_stance_on_faction_issue),
		(call_script, "script_troop_get_relation_with_troop", "trp_player", ":g_talk_troop_stance_on_faction_issue"),
		(lt, reg0, -5),
		(assign, ":var_2", reg0),
		(call_script, "script_dplmc_is_affiliated_family_member", ":g_talk_troop_stance_on_faction_issue"),
		(this_or_next|lt, reg0, 1),
		(lt, ":var_2", -10),
		(this_or_next|neg|troop_slot_eq, "trp_player", slot_troop_spouse, ":g_talk_troop_stance_on_faction_issue"),
		(lt, ":var_2", -10),
		(str_store_troop_name, 4, ":g_talk_troop_stance_on_faction_issue"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":g_talk_troop_stance_on_faction_issue", 3)
	],
	"Given your relation with {s4}, I do not think that {reg3?she:he} would welcome your support.", "lord_pretalk",
	[
		(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1)
	]],

	[anyone, "lord_internal_politics_support_same_acknowledge",
	[
		(troop_get_slot, ":g_talk_troop_stance_on_faction_issue", "$g_talk_troop", slot_troop_stance_on_faction_issue),
		(str_store_troop_name, 4, ":g_talk_troop_stance_on_faction_issue"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":g_talk_troop_stance_on_faction_issue", 3)
	],
	"I will tell {s4}. {reg3?She:He} will no doubt be grateful for your support.", "lord_pretalk",
	[
		(troop_get_slot, ":g_talk_troop_stance_on_faction_issue", "$g_talk_troop", slot_troop_stance_on_faction_issue),
		(call_script, "script_troop_change_relation_with_troop", "trp_player", ":g_talk_troop_stance_on_faction_issue", 2),
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", 1),
		(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, ":g_talk_troop_stance_on_faction_issue")
	]],

	[anyone|repeat_for_troops|plyr, "lord_internal_politics_plyr_choose_candidate_select",
	[
		(store_repeat_object, ":repeat_object"),
		(eq, 1, 0),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(eq, ":faction_of_troop_repeat_object", "$players_kingdom"),
		(neg|troop_slot_eq, "trp_player", slot_troop_spouse, ":repeat_object"),
		(str_store_troop_name, 4, ":repeat_object")
	],
	"I support {s4}", "lord_internal_politics_pretalk",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, ":repeat_object")
	]],

	[anyone, "lord_internal_politics_pretalk",
	[],
	"Ah. Most interesting.", "lord_internal_politics_cur_stance_plyr_response",
	[]],

	[anyone|plyr, "lord_internal_politics_cur_stance_plyr_response",
	[
		(eq, "$player_has_homage", 1),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_stance_on_faction_issue, "$g_talk_troop"),
		(neg|troop_slot_ge, "trp_player", 154, "trp_npc1"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_stance_on_faction_issue, "trp_player")
	],
	"Can I convince you to support me instead?", "lord_internal_politics_plyr_request_support",
	[]],

	[anyone|plyr, "lord_internal_politics_cur_stance_plyr_response",
	[
		(this_or_next|faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player"),
		(eq, "$player_has_homage", 1),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_stance_on_faction_issue, "$g_talk_troop"),
		(neg|troop_slot_ge, "trp_player", 154, "trp_npc1"),
		(troop_get_slot, ":player_stance_on_faction_issue", "trp_player", slot_troop_stance_on_faction_issue),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_stance_on_faction_issue, ":player_stance_on_faction_issue")
	],
	"Can I convince you to support someone else?", "dplmc_lord_internal_politics_plyr_request_support_1",
	[]],

	[anyone|plyr, "lord_internal_politics_cur_stance_plyr_response",
	[
		(this_or_next|faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player"),
		(eq, "$player_has_homage", 1),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_stance_on_faction_issue, "$g_talk_troop"),
		(troop_get_slot, ":player_stance_on_faction_issue", "trp_player", slot_troop_stance_on_faction_issue),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_stance_on_faction_issue, ":player_stance_on_faction_issue"),
		(is_between, ":player_stance_on_faction_issue", "trp_npc1", "trp_heroes_end"),
		(troop_slot_eq, ":player_stance_on_faction_issue", slot_troop_occupation, 2),
		(str_store_troop_name, 4, ":player_stance_on_faction_issue")
	],
	"Can I convince you to support {s4}?", "dplmc_lord_internal_politics_plyr_request_support_2",
	[
		(troop_get_slot, "$lord_selected", "trp_player", slot_troop_stance_on_faction_issue)
	]],

	[anyone, "dplmc_lord_internal_politics_plyr_request_support_1",
	[],
	"Whom did you have in mind?", "dplmc_lord_internal_politics_plyr_request_support_1",
	[]],

	[anyone|plyr, "dplmc_lord_internal_politics_plyr_request_support_1",
	[],
	"Never mind.", "lord_pretalk",
	[]],

	[anyone|repeat_for_troops|plyr, "dplmc_lord_internal_politics_plyr_request_support_1",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "trp_npc1", "trp_heroes_end"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(eq, ":faction_of_troop_repeat_object", "$players_kingdom"),
		(neq, ":repeat_object", "$g_talk_troop"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_stance_on_faction_issue, ":repeat_object"),
		(str_store_troop_name, 4, ":repeat_object"),
		(try_begin),
			(neg|troop_slot_eq, "$g_talk_troop", slot_troop_met, 0),
			(neg|troop_slot_eq, ":repeat_object", slot_troop_met, 0),
			(call_script, "script_dplmc_cap_troop_describes_troop_to_troop_s1", 1, "trp_player", ":repeat_object", "$g_talk_troop"),
			(str_store_string_reg, 4, 1),
		(try_end)
	],
	"{s4}", "dplmc_lord_internal_politics_plyr_request_support_2",
	[
		(store_repeat_object, ":repeat_object"),
		(assign, "$lord_selected", ":repeat_object")
	]],

	[anyone|plyr, "dplmc_lord_internal_politics_plyr_request_support_1",
	[],
	"Never mind.", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_internal_politics_plyr_request_support_2",
	[
		(lt, "$g_talk_troop_effective_relation", -5),
		(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
		(this_or_next|eq, reg0, 0),
		(le, "$g_talk_troop_effective_relation", -10)
	],
	"Given our relationship, I would prefer to keep my own counsel on this matter.", "lord_pretalk",
	[]],

	[anyone, "lord_internal_politics_support_same_acknowledge",
	[
		(call_script, "script_troop_get_relation_with_troop", "trp_player", "$lord_selected"),
		(lt, reg0, -5),
		(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
		(lt, reg0, 1),
		(str_store_troop_name, 4, "$lord_selected"),
		(assign, reg3, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$lord_selected"),
			(assign, reg3, 1),
		(try_end)
	],
	"Given your relation with {s4}, I do not think that {reg3?she:he} would welcome your support.", "lord_pretalk",
	[
		(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1)
	]],

	[anyone, "dplmc_lord_internal_politics_plyr_request_support_2",
	[
		(troop_slot_ge, "$lord_selected", 150, 25),
		(this_or_next|faction_slot_eq, "$players_kingdom", slot_faction_political_issue, 1),
		(troop_slot_ge, "$lord_selected", 150, 50),
		(str_store_troop_name, 4, "$lord_selected"),
		(assign, reg3, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$lord_selected"),
			(assign, reg3, 1),
		(try_end)
	],
	"{s4} has engendered too much controversy for {reg3?her:him} to be a viable candidate right now.  I would advise {reg3?her:him} to wait a little while before seeking any further honors.", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_internal_politics_plyr_request_support_2",
	[
		(faction_get_slot, ":players_kingdom_political_issue", "$players_kingdom", slot_faction_political_issue),
		(is_between, ":players_kingdom_political_issue", "p_town_1", "p_salt_mine"),
		(troop_get_slot, ":g_talk_troop_stance_on_faction_issue", "$g_talk_troop", slot_troop_stance_on_faction_issue),
		(troop_get_slot, ":lord_selected_renown", "$lord_selected", slot_troop_renown),
		(assign, ":value", 0),
		(try_begin),
			(this_or_next|is_between, ":g_talk_troop_stance_on_faction_issue", "trp_npc1", "trp_heroes_end"),
			(eq, ":g_talk_troop_stance_on_faction_issue", "trp_player"),
			(troop_get_slot, ":value", ":g_talk_troop_stance_on_faction_issue", slot_troop_renown),
		(try_end),
		(call_script, "script_dplmc_center_point_calc", "$g_talk_troop_faction", "$lord_selected", ":g_talk_troop_stance_on_faction_issue", 2),
		(assign, ":var_5", reg0),
		(assign, ":var_6", reg1),
		(assign, ":var_7", reg3),
		(val_max, ":var_6", 1),
		(store_div, ":value_2", ":lord_selected_renown", ":var_6"),
		(val_max, ":var_7", 1),
		(store_div, ":value_3", ":value", ":var_7"),
		(assign, "$temp", ":value_2"),
		(assign, "$temp_2", ":value_3"),
		(store_mul, ":value_4", ":var_5", 3),
		(val_div, ":value_4", 4),
		(lt, ":value_2", ":value_4"),
		(str_store_troop_name, 4, "$lord_selected"),
		(call_script, "script_dplmc_store_troop_is_female_reg", "$lord_selected", 3)
	],
	"{s4} has already been well-rewarded with fiefs appropriate to {reg3?her:his} accomplishments, I would say.", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_internal_politics_plyr_request_support_2",
	[
		(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, 1),
		(troop_get_slot, ":lord_selected_renown", "$lord_selected", slot_troop_renown),
		(lt, ":lord_selected_renown", 400),
		(str_store_troop_name, 4, "$lord_selected"),
		(assign, reg3, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$lord_selected"),
			(assign, reg3, 1),
		(try_end),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(assign, reg0, ":lord_selected_renown"),
			(str_store_string, 0, "str_score_reg0"),
			(assign, reg0, 400),
			(str_store_string, 1, "str_score_reg0"),
			(display_message, "@{!}DEBUG support check, {s4} {s0}, Threshold {s1}"),
		(try_end)
	],
	"I think {s4} would need to prove {reg3?herself:himself} further before {reg3?she:he} is eligible for that position.", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_internal_politics_plyr_request_support_2",
	[
		(faction_get_slot, ":players_kingdom_political_issue", "$players_kingdom", slot_faction_political_issue),
		(is_between, ":players_kingdom_political_issue", "p_town_1", "p_salt_mine"),
		(troop_get_slot, ":g_talk_troop_stance_on_faction_issue", "$g_talk_troop", slot_troop_stance_on_faction_issue),
		(gt, ":g_talk_troop_stance_on_faction_issue", -1),
		(assign, ":var_3", "$temp"),
		(assign, ":var_4", "$temp_2"),
		(val_mul, ":var_4", 3),
		(val_div, ":var_4", 4),
		(lt, ":var_3", ":var_4"),
		(str_store_troop_name, 3, ":g_talk_troop_stance_on_faction_issue"),
		(str_store_troop_name, 4, "$lord_selected"),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(assign, reg0, ":var_3"),
			(str_store_string, 0, "str_score_reg0"),
			(assign, reg0, ":var_4"),
			(str_store_string, 1, "str_score_reg0"),
			(display_message, "@{!}DEBUG support check, {s4} {s0}, Threshold {s1}"),
		(try_end),
		(str_store_party_name, 0, ":players_kingdom_political_issue")
	],
	"{s3} deserves to receive {s0} more than {s4}, I would say.", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_internal_politics_plyr_request_support_2",
	[
		(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, 1),
		(troop_get_slot, ":g_talk_troop_stance_on_faction_issue", "$g_talk_troop", slot_troop_stance_on_faction_issue),
		(gt, ":g_talk_troop_stance_on_faction_issue", -1),
		(troop_get_slot, ":lord_selected_renown", "$lord_selected", slot_troop_renown),
		(troop_get_slot, ":g_talk_troop_stance_on_faction_issue_renown", ":g_talk_troop_stance_on_faction_issue", slot_troop_renown),
		(val_mul, ":g_talk_troop_stance_on_faction_issue_renown", 3),
		(val_div, ":g_talk_troop_stance_on_faction_issue_renown", 4),
		(lt, ":lord_selected_renown", ":g_talk_troop_stance_on_faction_issue_renown"),
		(str_store_troop_name, 4, "$lord_selected"),
		(assign, reg3, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$lord_selected"),
			(assign, reg3, 1),
		(try_end),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(assign, reg0, ":lord_selected_renown"),
			(str_store_string, 0, "str_score_reg0"),
			(assign, reg0, ":g_talk_troop_stance_on_faction_issue_renown"),
			(str_store_string, 1, "str_score_reg0"),
			(display_message, "@{!}DEBUG support check, {s4} {s0}, Threshold {s1}"),
		(try_end)
	],
	"I think {s4} would need to prove {reg3?herself:himself} further before {reg3?she:he} is eligible for that position.", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_internal_politics_plyr_request_support_2",
	[
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", "$lord_selected"),
		(assign, ":var_1", reg0),
		(assign, ":var_2", reg0),
		(assign, ":value", 0),
		(troop_get_slot, ":g_talk_troop_stance_on_faction_issue", "$g_talk_troop", slot_troop_stance_on_faction_issue),
		(assign, ":value_2", 0),
		(try_begin),
			(gt, ":g_talk_troop_stance_on_faction_issue", -1),
			(neq, ":g_talk_troop_stance_on_faction_issue", "trp_player"),
			(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":g_talk_troop_stance_on_faction_issue"),
			(assign, ":value_2", reg0),
		(try_end),
		(try_begin),
			(val_max, reg0, ":var_2"),
			(val_max, reg0, 0),
			(gt, "$g_talk_troop_relation", reg0),
			(store_sub, ":value", "$g_talk_troop_relation", reg0),
			(val_add, ":value", 5),
			(val_div, ":value", 10),
		(try_end),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(val_add, ":var_2", ":skill_level_persuasion_player"),
		(try_begin),
			(gt, ":var_2", 0),
			(val_add, ":var_2", ":value"),
			(store_add, ":value_3", 10, ":skill_level_persuasion_player"),
			(val_mul, ":var_2", ":value_3"),
			(val_div, ":var_2", 10),
		(else_try),
			(lt, ":var_2", 0),
			(store_sub, ":value_3", 20, ":skill_level_persuasion_player"),
			(val_mul, ":var_2", ":value_3"),
			(val_div, ":var_2", 20),
			(val_add, ":var_2", ":value"),
		(try_end),
		(assign, "$temp", ":var_2"),
		(this_or_next|lt, "$temp", 0),
		(ge, ":value_2", "$temp"),
		(lt, ":var_1", 0),
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_lord_insult_default"),
		(str_store_troop_name, 4, "$lord_selected"),
		(str_store_string, 1, "str_dplmc_refuse_support_s43_named_s4")
	],
	"{s1}", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_internal_politics_plyr_request_support_2",
	[
		(lt, "$temp", 10),
		(lt, "$g_talk_troop_effective_relation", 10)
	],
	"Hmm... That is too much to ask, given the state of my relationship with the two of you.", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_internal_politics_plyr_request_support_2",
	[
		(troop_get_slot, ":g_talk_troop_stance_on_faction_issue", "$g_talk_troop", slot_troop_stance_on_faction_issue),
		(gt, ":g_talk_troop_stance_on_faction_issue", -1),
		(assign, ":var_2", "$temp"),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":g_talk_troop_stance_on_faction_issue"),
		(ge, reg0, ":var_2"),
		(assign, ":var_3", reg0),
		(troop_get_slot, reg0, ":g_talk_troop_stance_on_faction_issue", slot_troop_stance_on_faction_issue),
		(neq, reg0, "$lord_selected"),
		(neq, ":g_talk_troop_stance_on_faction_issue", "trp_player"),
		(str_store_troop_name, 4, ":g_talk_troop_stance_on_faction_issue"),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(assign, reg0, ":var_2"),
			(str_store_troop_name, 3, "$lord_selected"),
			(str_store_string, 0, "str_score_reg0"),
			(assign, reg0, ":var_3"),
			(str_store_string, 1, "str_score_reg0"),
			(display_message, "@{!}DEBUG support check, {s3} {s0}, Threshold {s1}"),
		(try_end)
	],
	"I am sorry. I would not wish to strain my relationship with {s4}", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_internal_politics_plyr_request_support_2",
	[
		(str_store_troop_name, 4, "$lord_selected")
	],
	"I will gladly support {s4}.", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_stance_on_faction_issue, "$lord_selected"),
		(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, "$lord_selected")
	]],

	[anyone|plyr, "lord_internal_politics_cur_stance_plyr_response",
	[],
	"Anyway, enough of politics for the time being.", "lord_pretalk",
	[]],

	[anyone, "lord_internal_politics_plyr_request_support",
	[
		(troop_slot_ge, "trp_player", 150, 25),
		(this_or_next|faction_slot_eq, "$players_kingdom", slot_faction_political_issue, 1),
		(troop_slot_ge, "trp_player", 150, 50)
	],
	"You have engendered too much controversy to be a viable candidate right now. I would advise you to wait a little while before seeking any further honors for yourself.", "lord_pretalk",
	[]],

	[anyone, "lord_internal_politics_plyr_request_support",
	[
		(troop_get_slot, ":g_talk_troop_stance_on_faction_issue", "$g_talk_troop", slot_troop_stance_on_faction_issue),
		(gt, ":g_talk_troop_stance_on_faction_issue", 0),
		(str_store_troop_name, 4, ":g_talk_troop_stance_on_faction_issue"),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":g_talk_troop_stance_on_faction_issue"),
		(ge, reg0, "$g_talk_troop_effective_relation"),
		(troop_get_slot, reg0, ":g_talk_troop_stance_on_faction_issue", slot_troop_stance_on_faction_issue),
		(neq, reg0, "trp_player")
	],
	"I am sorry. I would not wish to strain my relationship with {s4}", "lord_pretalk",
	[]],

	[anyone, "lord_internal_politics_plyr_request_support",
	[
		(faction_get_slot, ":players_kingdom_political_issue", "$players_kingdom", slot_faction_political_issue),
		(is_between, ":players_kingdom_political_issue", "p_town_1", "p_salt_mine"),
		(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
		(try_begin),
			(lt, "$g_disable_condescending_comments", 0),
			(neq, reg65, "$character_gender"),
			(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", "$character_gender"),
			(neg|troop_slot_ge, "$g_talk_troop", 52, 8),
			(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
			(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
			(neg|is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
			(val_div, ":player_renown", 2),
		(try_end),
		(assign, ":var_3", ":player_renown"),
		(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(eq, ":faction_of_troop_troop", "$players_kingdom"),
			(troop_get_slot, ":troop_renown", ":troop", slot_troop_renown),
			(val_add, ":var_3", ":troop_renown"),
		(try_end),
		(assign, ":var_7", 0),
		(assign, ":var_8", 0),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(eq, ":faction_of_party_party", "$players_kingdom"),
			(assign, ":value", 1),
			(try_begin),
				(is_between, ":party", "p_town_1", "p_castle_1"),
				(assign, ":value", 2),
			(try_end),
			(val_add, ":var_7", ":value"),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(val_add, ":var_8", ":value"),
		(try_end),
		(val_max, ":var_7", 1),
		(val_max, ":var_8", 1),
		(store_div, ":value_2", ":var_3", ":var_7"),
		(store_div, ":value_3", ":player_renown", ":var_8"),
		(store_mul, ":value_4", ":value_2", 3),
		(val_div, ":value_4", 4),
		(lt, ":value_3", ":value_4")
	],
	"You have already been well-rewarded with fiefs appropriate to your accomplishments, I would say.", "lord_pretalk",
	[]],

	[anyone, "lord_internal_politics_plyr_request_support",
	[
		(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, 1),
		(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
		(try_begin),
			(lt, "$g_disable_condescending_comments", 0),
			(neq, reg65, "$character_gender"),
			(neg|troop_slot_ge, "$g_talk_troop", 52, 8),
			(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
			(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
			(neg|is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
			(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", "$character_gender"),
			(val_div, ":player_renown", 2),
		(try_end),
		(lt, ":player_renown", 400)
	],
	"I think you would need to prove yourself further before you are eligible for that position.", "lord_pretalk",
	[]],

	[anyone, "lord_internal_politics_plyr_request_support",
	[
		(lt, "$g_talk_troop_effective_relation", 10)
	],
	"Hmm... That is too much to ask, given the state of our relationship. ", "lord_pretalk",
	[]],

	[anyone, "lord_internal_politics_plyr_request_support",
	[],
	"I would support you with pleasure. ", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_stance_on_faction_issue, "trp_player")
	]],

	[anyone, "lord_internal_politics_plyr_request_support",
	[],
	"{!}[Placeholder - sorry, not yet]", "lord_pretalk",
	[]],

	[anyone, "lord_recruit_1_relation",
	[
		(troop_slot_ge, "$g_talk_troop", 51, 100)
	],
	"I am a bit weary of talking politics. Perhaps at a later date", "lord_pretalk",
	[
		(troop_get_slot, reg3, "$g_talk_troop", slot_troop_intrigue_impatience),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(display_message, "str_intrigue_impatience=_reg3_must_be_less_than_100"),
		(try_end)
	]],

	[anyone, "lord_recruit_1_relation",
	[
		(assign, ":value", 1),
		(try_begin),
			(call_script, "script_cf_troop_can_intrigue", "$g_talk_troop", 1),
			(assign, ":value", 0),
		(try_end),
		(eq, ":value", 1),
		(str_store_string, 12, "str_youll_have_to_speak_to_me_at_some_other_time_then"),
		(try_begin),
			(lt, "$g_encountered_party_relation", 0),
			(encountered_party_is_attacker),
			(str_store_string, 12, "str_this_is_no_time_for_words"),
		(try_end),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(display_message, "str_lord_not_alone"),
		(try_end)
	],
	"{s12}", "lord_pretalk",
	[]],

	[anyone, "lord_recruit_1_relation",
	[
		(is_between, "$supported_pretender", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(troop_slot_eq, "$supported_pretender", slot_troop_original_faction, "$g_talk_troop_faction"),
		(assign, reg3, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$supported_pretender"),
			(assign, reg3, 1),
		(try_end),
		(str_store_troop_name, 16, "$supported_pretender"),
		(eq, "$skip_lord_assumes_argument", 0)
	],
	"You have raised the standard of rebellion on behalf of {s16}. Have you come to plead {reg3?her:his} case?", "lord_recruit_pretender",
	[]],

	[anyone|plyr, "lord_recruit_pretender",
	[],
	"I have", "lord_recruit_3_dilemma_1",
	[
		(troop_set_slot, "$g_talk_troop", slot_lord_recruitment_candidate, "$supported_pretender")
	]],

	[anyone|plyr, "lord_recruit_pretender",
	[],
	"No, that's not it. There's another issue I wish to discuss.", "lord_recruit_1_relation",
	[
		(assign, "$skip_lord_assumes_argument", 1)
	]],

	[anyone, "lord_recruit_1_relation",
	[
		(try_begin),
			(troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
			(assign, ":value", 20),
			(str_store_string, 13, "str_of_course_my_wife"),
			(str_store_string, 14, "str_perhaps_not_our_marriage_has_become_a_bit_strained_dont_you_think"),
			(str_store_string, 15, "str_why_is_that_my_wife_actually_our_marriage_has_become_such_that_i_prefer_to_have_a_witness_for_all_of_our_converations"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
			(assign, ":value", 6),
			(str_store_string, 13, "str_all_right_then_what_do_you_have_to_say_out_with_it"),
			(str_store_string, 14, "str_bah__im_in_no_mood_for_whispering_in_the_corner"),
			(str_store_string, 15, "str_bah_i_dont_like_you_that_much_im_not_going_to_go_plot_with_you_in_some_corner"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
			(assign, ":value", 8),
			(str_store_string, 13, "str_well__now_what_do_you_have_to_propose"),
			(str_store_string, 14, "str_trying_our_hand_at_intrigue_are_we_i_think_not"),
			(str_store_string, 15, "str_hah_i_trust_you_as_a_i_would_a_serpent_i_think_not"),
		(else_try),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 25),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 7),
			(assign, ":value", -10),
			(str_store_string, 13, "str_i_do_not_like_to_conduct_my_business_in_the_shadows_but_sometimes_it_must_be_done_what_do_you_have_to_say"),
			(str_store_string, 14, "str_i_would_prefer_to_conduct_our_affairs_out_in_the_open"),
			(str_store_string, 15, "str_do_not_take_this_amiss_but_with_you_i_would_prefer_to_conduct_our_affairs_out_in_the_open"),
		(else_try),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 24),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
			(assign, ":value", 4),
			(str_store_string, 13, "str_hmm_you_have_piqued_my_interest_what_do_you_have_to_say"),
			(str_store_string, 14, "str_em_lets_keep_our_affairs_out_in_the_open_for_the_time_being"),
			(str_store_string, 15, "str_em_lets_keep_our_affairs_out_in_the_open_for_the_time_being"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 3),
			(assign, ":value", 0),
			(str_store_string, 13, "str_thats_sensible__the_world_is_full_of_churls_who_poke_their_noses_into_their_betters_business_now_tell_me_what_it_is_that_you_have_to_say"),
			(str_store_string, 14, "str_what_do_you_take_me_for_a_plotter"),
			(str_store_string, 15, "str_hah_i_trust_you_as_a_i_would_a_serpent_i_think_not"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
			(assign, ":value", -10),
			(str_store_string, 13, "str_well_i_normally_like_to_keep_things_out_in_the_open_but_im_sure_someone_like_you_would_not_want_to_talk_in_private_unless_heshe_had_a_good_reason_what_is_it"),
			(str_store_string, 14, "str_surely_we_can_discuss_whatever_you_want_to_discuss_out_here_in_the_open_cant_we"),
			(str_store_string, 15, "str_surely_we_can_discuss_whatever_you_want_to_discuss_out_here_in_the_open_cant_we"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1),
			(assign, ":value", -5),
			(assign, reg3, reg65),
			(str_store_string, 13, "str_im_a_simple__man_not_one_for_intrigue_but_id_guess_that_you_have_something_worthwhile_to_say_what_is_it"),
			(str_store_string, 14, "str_forgive_me_but_im_not_one_for_going_off_in_corners_to_plot"),
			(str_store_string, 15, "str_please_do_not_take_this_amiss_but_i_do_not_trust_you"),
		(else_try),
			(troop_slot_ge, "$g_talk_troop", 52, 8),
			(assign, ":value", 10),
			(str_store_string, 13, "str_certainly_playername_what_is_it"),
			(str_store_string, 14, "str_forgive_me_but_id_prefer_to_keep_our_conversations_in_the_open"),
			(str_store_string, 15, "str_please_do_not_take_this_amiss_but_im_not_sure_you_and_i_are_still_on_those_terms"),
		(try_end),
		(assign, ":value_2", 0),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(try_begin),
			(lt, "$g_talk_troop_relation", -5),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(display_message, "str_persuasion__relation_less_than_5"),
			(try_end),
			(str_store_string, 12, "str_s15"),
		(else_try),
			(store_add, ":value_3", ":skill_level_persuasion_player", "$g_talk_troop_relation"),
			(val_add, ":value_3", ":value"),
			(assign, reg3, reg65),
			(game_get_reduce_campaign_ai, ":game_reduce_campaign_ai"),
			(try_begin),
				(eq, ":game_reduce_campaign_ai", 0),
				(val_sub, ":value_3", 5),
			(else_try),
				(eq, ":game_reduce_campaign_ai", 1),
			(else_try),
				(eq, ":game_reduce_campaign_ai", 2),
				(val_add, ":value_3", 5),
			(try_end),
			(lt, ":value_3", 10),
			(str_store_string, 12, "str_s14"),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(display_message, "str_persuasion__2__lord_reputation_modifier__relation_less_than_10"),
			(try_end),
			(str_store_string, 12, "str_s14"),
		(else_try),
			(str_store_string, 12, "str_s13"),
			(assign, ":value_2", 1),
		(try_end),
		(try_begin),
			(eq, ":value_2", 0),
			(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
			(ge, reg0, 1),
			(ge, "$g_talk_troop_relation", 0),
			(assign, reg3, reg65),
			(str_store_string, 12, "str_s13"),
			(assign, ":value_2", 1),
			(try_begin),
				(ge, "$cheat_mode", 1),
				(display_message, "@{!} DEBUG -- affiliated family member, overriding logic to continue"),
			(try_end),
		(try_end),
		(eq, ":value_2", 0)
	],
	"{s12}", "lord_pretalk",
	[]],

	[anyone, "lord_recruit_1_relation",
	[],
	"{s12}", "lord_recruit_2",
	[]],

	[anyone|plyr, "lord_recruit_2",
	[],
	"What do you think, in general terms, about kings, lords, and politics?", "lord_recruit_2_philosophy",
	[]],

	[anyone|plyr, "lord_recruit_2",
	[
		(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
		(lt, reg0, 50),
		(this_or_next|is_between, "$g_talk_troop", "trp_npc1", "trp_heroes_end"),
		(troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(neq, "$players_kingdom", "fac_player_supporters_faction"),
		(call_script, "script_dplmc_store_troop_is_female", "$g_talk_troop"),
		(assign, reg65, reg0),
		(assign, ":var_1", reg65),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(this_or_next|is_between, "$g_talk_troop", "trp_npc1", "trp_knight_1_1_wife"),
		(eq, ":var_1", 0),
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(str_store_troop_name, 11, ":g_encountered_party_faction_leader")
	],
	"My {reg65?wife:husband}, I believe that you should rethink your allegiance to {s11}", "lord_spouse_leave_faction",
	[]],

	[anyone, "lord_spouse_leave_faction",
	[
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":g_talk_troop_faction_leader"),
		(gt, reg0, 25),
		(str_store_troop_name, 9, ":g_talk_troop_faction_leader")
	],
	"{s9} has always been a good liege to me, but I will hear you out. What do you suggest we do?", "lord_spouse_leave_faction_2",
	[]],

	[anyone, "lord_spouse_leave_faction",
	[
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":g_talk_troop_faction_leader"),
		(gt, reg0, -5),
		(str_store_troop_name, 9, ":g_talk_troop_faction_leader")
	],
	"I see no particular reason to abandon {s9}, but I will heed your advice. What do you suggest we do?", "lord_spouse_leave_faction_2",
	[]],

	[anyone, "lord_spouse_leave_faction",
	[
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":g_talk_troop_faction_leader"),
		(str_store_troop_name, 9, ":g_talk_troop_faction_leader")
	],
	"Yes -- as a liege, {s9} is a great disappointment. What do you suggest we do?", "lord_spouse_leave_faction_2",
	[]],

	[anyone|plyr, "lord_spouse_leave_faction_2",
	[
		(try_begin),
			(eq, reg65, 1),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 5, 1),
		(else_try),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 4, 1),
		(try_end)
	],
	"I believe you should be {s1}, my {reg65?wife:husband}!", "lord_spouse_leave_faction_husband_king",
	[]],

	[anyone|plyr, "lord_spouse_leave_faction_2",
	[
		(try_begin),
			(eq, 1, "$character_gender"),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 5, 0),
		(else_try),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 4, 0),
		(try_end)
	],
	"I am the rightful ruler of the world", "lord_spouse_leave_faction_proclaim_queen",
	[]],

	[anyone|plyr, "lord_spouse_leave_faction_2",
	[],
	"Never mind", "lord_pretalk",
	[]],

	[anyone, "lord_spouse_leave_faction_proclaim_queen",
	[
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 25),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 7),
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":g_talk_troop_faction_leader"),
		(game_get_reduce_campaign_ai, ":game_reduce_campaign_ai"),
		(try_begin),
			(eq, ":game_reduce_campaign_ai", 0),
			(val_add, reg0, 10),
		(else_try),
			(eq, ":game_reduce_campaign_ai", 1),
		(else_try),
			(eq, ":game_reduce_campaign_ai", 2),
			(val_sub, reg0, 10),
		(try_end),
		(ge, reg0, ":skill_level_persuasion_player"),
		(str_store_troop_name, 11, ":g_talk_troop_faction_leader"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_faction_leader")
	],
	"I swore an oath to serve {s11}, and {reg0?she:he} has upheld {reg0?her:his} end of the bargain.  Let us have no more of this talk.", "lord_pretalk",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -1)
	]],

	[anyone, "lord_spouse_leave_faction_proclaim_queen",
	[
		(this_or_next|is_between, "$g_talk_troop", "trp_npc1", "trp_knight_1_1_wife"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(assign, ":value", 0),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_troop_original_faction, "$g_talk_troop_faction"),
			(this_or_next|neg|is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
			(troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 8),
			(this_or_next|neg|is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
			(troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 8),
			(game_get_reduce_campaign_ai, ":game_reduce_campaign_ai"),
			(try_begin),
				(eq, ":game_reduce_campaign_ai", 0),
				(assign, ":value", 75),
			(else_try),
				(eq, ":game_reduce_campaign_ai", 1),
				(assign, ":value", 50),
			(else_try),
				(eq, ":game_reduce_campaign_ai", 2),
				(assign, ":value", 25),
			(try_end),
		(try_end),
		(call_script, "script_dplmc_get_troop_morality_value", "$g_talk_troop", 4),
		(assign, ":value_2", reg0),
		(try_begin),
			(eq, ":value_2", 0),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 8),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 24),
			(assign, ":value_2", -1),
		(else_try),
			(eq, ":value_2", 0),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 7),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 25),
			(assign, ":value_2", 1),
		(try_end),
		(try_begin),
			(ge, ":value_2", 1),
			(val_mul, ":value", 3),
			(val_div, ":value", 2),
		(else_try),
			(lt, ":value_2", 0),
			(val_div, ":value", 2),
		(try_end),
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":g_talk_troop_faction_leader"),
		(assign, ":var_5", reg0),
		(store_add, ":value_3", ":value", ":var_5"),
		(store_add, ":value_4", "$player_right_to_rule", "$g_talk_troop_effective_relation"),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(assign, reg0, ":value_3"),
			(assign, reg1, ":value_4"),
			(display_message, "@{!}DEBUG - liege score {reg0} vs player score {reg1}"),
		(try_end),
		(ge, ":value_3", ":value_4"),
		(str_store_troop_name, 11, ":g_talk_troop_faction_leader")
	],
	"I see no reason to turn my back on {s11} now.", "lord_pretalk",
	[]],

	[anyone, "lord_spouse_leave_faction_husband_king",
	[
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(this_or_next|party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(party_slot_eq, ":party", slot_town_lord, "$g_talk_troop"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 0),
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"Perhaps some day, {s0} -- but before I declare myself {s1}, I should like for one of us to hold a fortress which could serve as our court before we declare ourselves publically.", "lord_pretalk",
	[]],

	[anyone, "lord_spouse_leave_faction_proclaim_queen",
	[
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(this_or_next|party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(party_slot_eq, ":party", slot_town_lord, "$g_talk_troop"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 0),
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"While I do not contest your claim, {s0}, I should like for one of us to hold a fortress which could serve as our court before we declare ourselves publically.", "lord_pretalk",
	[]],

	[anyone, "lord_spouse_leave_faction_proclaim_queen",
	[
		(assign, ":value", 0),
		(try_begin),
			(le, "$player_right_to_rule", 5),
			(try_begin),
				(eq, 1, "$character_gender"),
				(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 5, 0),
			(else_try),
				(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 4, 0),
			(try_end),
			(str_store_string, 11, "str_really_well_this_is_the_first_i_have_heard_of_it_unless_you_build_up_support_for_that_claim_you_may_find_it_difficult_to_find_allies_however_whenever_you_see_fit_to_declare_yourself_publically_as_queen_i_should_be_honored_to_be_your_consort"),
			(assign, "$player_right_to_rule", 5),
		(else_try),
			(lt, "$player_right_to_rule", 20),
			(str_store_string, 11, "str_yes_i_have_heard_such_talk_while_it_is_good_that_you_are_building_up_your_support_i_do_not_think_that_you_are_quite_ready_to_proclaim_yourself_yet_however_i_will_let_you_be_the_judge_of_that_and_when_you_decide_i_should_be_honored_to_be_your_consort"),
		(else_try),
			(str_store_string, 11, "str_yes_and_many_others_in_calradia_think_so_as_well_perhaps_it_is_time_that_you_declared_yourself_and_we_shall_ride_forth_together_to_claim_your_throne_i_should_be_honored_to_be_your_consort"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"{s11}", "lord_spouse_leave_faction_proclaim_queen_confirm",
	[]],

	[anyone, "lord_spouse_leave_faction_proclaim_queen",
	[],
	"{s11}", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_spouse_leave_faction_proclaim_queen_confirm",
	[],
	"I am ready now, my {wife/husband}. Let us go forth to seek our throne.", "close_window",
	[
		(assign, ":var_1", "$g_talk_troop"),
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(call_script, "script_troop_get_player_relation", ":g_talk_troop_faction_leader"),
		(assign, ":var_3", reg0),
		(assign, ":var_4", 0),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(this_or_next|party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(party_slot_eq, ":party", slot_town_lord, "$g_talk_troop"),
			(val_add, ":var_4", -10),
		(try_end),
		(store_add, ":value", ":var_3", 5),
		(val_div, ":value", -10),
		(val_min, ":value", 0),
		(try_begin),
			(assign, ":value_2", 0),
			(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
				(faction_slot_eq, ":faction", slot_faction_state, 0),
				(neq, ":faction", ":var_3"),
				(store_relation, ":relation_faction_g_talk_troop_faction", ":faction", "$g_talk_troop_faction"),
				(lt, ":relation_faction_g_talk_troop_faction", 0),
				(assign, ":value_2", 1),
			(try_end),
			(gt, ":value_2", 0),
			(val_add, ":value", -5),
		(try_end),
		(val_sub, ":value", 10),
		(call_script, "script_dplmc_center_point_calc", "$g_talk_troop_faction", "trp_player", ":var_1", 3),
		(assign, ":var_10", reg0),
		(assign, ":var_11", reg1),
		(assign, ":var_12", reg2),
		(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
		(troop_get_slot, ":var_1_renown", ":var_1", slot_troop_renown),
		(assign, ":value_3", 0),
		(try_begin),
			(eq, ":var_11", 0),
			(try_begin),
				(store_mul, reg0, ":var_10", 3),
				(val_div, reg0, 4),
				(ge, ":player_renown", reg0),
				(assign, ":value_3", 1),
				(val_add, ":value", 5),
			(try_end),
		(else_try),
			(gt, ":var_11", 0),
			(store_div, ":value_4", ":player_renown", ":var_11"),
			(store_mul, reg0, ":var_10", 5),
			(val_div, reg0, 4),
			(ge, ":value_4", reg0),
			(assign, ":value_3", 1),
			(val_add, ":value", 5),
		(try_end),
		(try_begin),
			(eq, ":var_12", 0),
			(try_begin),
				(store_mul, reg0, ":var_10", 3),
				(val_div, reg0, 4),
				(ge, ":var_1_renown", reg0),
				(assign, ":value_3", 1),
				(val_add, ":value", 5),
			(try_end),
		(else_try),
			(gt, ":var_12", 0),
			(store_div, ":value_5", ":var_1_renown", ":var_12"),
			(store_mul, reg0, ":var_10", 5),
			(val_div, reg0, 4),
			(ge, ":value_5", reg0),
			(assign, ":value_3", 1),
			(val_add, ":value", 5),
		(try_end),
		(call_script, "script_change_player_relation_with_troop", ":g_talk_troop_faction_leader", ":var_4"),
		(val_min, ":value", 0),
		(try_begin),
			(lt, ":value", 0),
			(call_script, "script_change_player_honor", ":value"),
		(try_end),
		(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(neq, ":troop", ":g_talk_troop_faction_leader"),
			(neq, ":troop", ":var_1"),
			(neq, ":troop", "trp_kingdom_heroes_including_player_begin"),
			(store_faction_of_troop, ":faction", ":troop"),
			(eq, ":faction", "$g_talk_troop_faction"),
			(assign, ":var_19", 0),
			(assign, ":var_20", 0),
			(call_script, "script_troop_get_player_relation", ":troop"),
			(assign, ":var_21", reg0),
			(call_script, "script_troop_get_relation_with_troop", ":troop", ":g_talk_troop_faction_leader"),
			(assign, ":var_22", reg0),
			(troop_get_slot, ":troop_lord_reputation_type", ":troop", slot_lord_reputation_type),
			(call_script, "script_dplmc_get_troop_morality_value", ":troop", 4),
			(assign, ":var_24", reg0),
			(assign, ":var_25", 0),
			(assign, ":var_26", 0),
			(try_for_range, ":party_2", "p_village_1", "p_salt_mine"),
				(party_slot_eq, ":party_2", slot_town_lord, ":troop"),
				(party_get_slot, ":party_2_village_bound_center", ":party_2", slot_village_bound_center),
				(ge, ":party_2_village_bound_center", 1),
				(this_or_next|party_slot_eq, ":party_2_village_bound_center", slot_town_lord, ":var_1"),
				(party_slot_eq, ":party_2_village_bound_center", slot_town_lord, "trp_player"),
				(val_add, ":var_25", 1),
				(party_slot_eq, ":party_2_village_bound_center", slot_town_lord, ":var_1"),
				(val_add, ":var_26", 1),
			(try_end),
			(try_begin),
				(this_or_next|ge, ":var_24", 1),
				(this_or_next|eq, ":troop_lord_reputation_type", 7),
				(eq, ":troop_lord_reputation_type", 25),
				(ge, ":var_22", 5),
				(val_sub, ":var_19", 1),
			(else_try),
				(this_or_next|lt, ":var_24", 0),
				(this_or_next|eq, ":troop_lord_reputation_type", 5),
				(this_or_next|eq, ":troop_lord_reputation_type", 8),
				(eq, ":troop_lord_reputation_type", 24),
				(ge, ":var_22", 25),
				(val_sub, ":var_19", 1),
			(else_try),
				(ge, ":var_22", 15),
				(val_sub, ":var_19", 1),
			(try_end),
			(try_begin),
				(lt, ":var_19", 0),
				(ge, ":var_22", ":var_21"),
				(val_sub, ":var_19", 1),
			(try_end),
			(try_begin),
				(ge, ":value_3", 1),
				(try_begin),
					(ge, ":var_24", 0),
					(neq, ":troop_lord_reputation_type", 5),
					(neq, ":troop_lord_reputation_type", 3),
					(neq, ":troop_lord_reputation_type", 2),
					(neq, ":troop_lord_reputation_type", 4),
					(neq, ":troop_lord_reputation_type", 24),
					(ge, ":var_21", 0),
					(val_add, ":var_19", ":value_3"),
				(else_try),
					(ge, ":var_21", 20),
					(val_add, ":var_19", ":value_3"),
				(try_end),
			(try_end),
			(try_begin),
				(ge, ":var_25", 1),
				(this_or_next|eq, ":troop_lord_reputation_type", 10),
				(this_or_next|eq, ":troop_lord_reputation_type", 24),
				(this_or_next|eq, ":troop_lord_reputation_type", 2),
				(this_or_next|eq, ":troop_lord_reputation_type", 3),
				(this_or_next|eq, ":troop_lord_reputation_type", 4),
				(this_or_next|eq, ":troop_lord_reputation_type", 5),
				(eq, ":troop_lord_reputation_type", 1),
				(val_sub, ":var_19", ":var_25"),
				(val_sub, ":var_19", ":var_25"),
				(val_sub, ":var_20", ":var_26"),
				(val_sub, ":var_20", ":var_26"),
			(else_try),
				(ge, ":var_25", 1),
				(lt, ":troop_lord_reputation_type", 21),
				(neq, ":troop_lord_reputation_type", 6),
				(val_sub, ":var_19", ":var_25"),
				(val_sub, ":var_20", ":var_26"),
			(try_end),
			(try_begin),
				(lt, ":var_20", 0),
				(call_script, "script_troop_change_relation_with_troop", ":troop", ":var_1", ":var_20"),
			(try_end),
			(lt, ":var_19", 0),
			(call_script, "script_change_player_relation_with_troop", ":troop", ":var_19"),
		(try_end),
		(call_script, "script_activate_player_faction", "trp_player"),
		(call_script, "script_change_troop_faction", "$g_talk_troop", "fac_player_supporters_faction"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "lord_spouse_leave_faction_proclaim_queen_confirm",
	[],
	"Perhaps I am not yet ready.", "lord_pretalk",
	[]],

	[anyone, "lord_spouse_leave_faction_husband_king",
	[
		(eq, "$players_kingdom", "fac_player_supporters_faction"),
		(gt, "$supported_pretender", 0),
		(str_store_troop_name, 4, "$supported_pretender")
	],
	"Perhaps, but I would need your full support to press that claim. You would want to resolve {s4}'s rebellion before pushing this any further.", "lord_pretalk",
	[]],

	[anyone, "lord_spouse_leave_faction_husband_king",
	[
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(str_store_troop_name, 4, ":g_talk_troop_faction_leader"),
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 4, 0)
	],
	"Most of the great families of this land have a claim to the throne... Given the recent issues with the succession, I should be as legitimate a {s0} as {s4}. ", "lord_spouse_leave_faction_husband_king_2",
	[]],

	[anyone, "lord_spouse_leave_faction_husband_king_2",
	[
		(try_begin),
			(eq, reg65, 0),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 4, 0),
		(else_try),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 5, 0),
		(try_end)
	],
	"While {s0}, I will defer to your judgment in the appointment of ministers, the conduct of diplomacy, and other such matters.", "lord_spouse_leave_faction_husband_king_3",
	[]],

	[anyone|plyr, "lord_spouse_leave_faction_husband_king_3",
	[],
	"Very well, my {wife/husband}. Let us ride forth to press your claim! ", "close_window",
	[
		(call_script, "script_change_troop_faction", "$g_talk_troop", "fac_player_supporters_faction"),
		(call_script, "script_activate_player_faction", "$g_talk_troop"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "lord_spouse_leave_faction_husband_king_3",
	[],
	"Actually, let us bide out time for a bit.", "lord_pretalk",
	[]],

	[anyone, "lord_recruit_2_philosophy",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_political_philosophy_default")
	],
	"{s43} Did you wish to speak of anything else?", "lord_recruit_2",
	[]],

	[anyone|plyr, "lord_recruit_2",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_recruitment_random, 0),
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(neq, "$g_talk_troop", ":g_talk_troop_faction_leader"),
		(neq, "trp_player", ":g_talk_troop_faction_leader"),
		(str_store_troop_name, 15, ":g_talk_troop_faction_leader")
	],
	"How do you feel about {s15}?", "lord_recruit_2_discontent",
	[]],

	[anyone|plyr, "lord_recruit_2",
	[
		(troop_slot_ge, "$g_talk_troop", 53, 1),
		(neq, "$g_talk_troop_faction", "$players_kingdom")
	],
	"Do you remember what I had told you earlier?", "lord_recruit_3_a",
	[]],

	[anyone|repeat_for_troops|plyr, "lord_recruit_2",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "trp_npc1", "trp_knight_1_1_wife"),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(eq, ":faction_of_troop_repeat_object", "$g_talk_troop_faction"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, ":repeat_object"),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":repeat_object"),
		(lt, reg0, -9),
		(str_store_troop_name, 16, ":repeat_object")
	],
	"I have heard that you have quarreled with {s16}", "lord_recruit_quarrel_describe",
	[
		(store_repeat_object, "$temp")
	]],

	[anyone, "lord_recruit_quarrel_describe",
	[
		(assign, ":value", 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$temp"),
			(assign, ":value", 1),
		(try_end),
		(assign, reg3, ":value"),
		(assign, reg4, ":value"),
		(assign, ":value_2", 0),
		(store_add, ":value_3", "$num_log_entries", 1),
		(try_for_range, ":number", 1, ":value_3"),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 27),
			(troop_slot_eq, "trp_log_array_troop_object", ":number", "$temp"),
			(troop_slot_eq, "trp_log_array_center_object", ":number", "$g_talk_troop"),
			(troop_slot_eq, "trp_log_array_faction_object", ":number", "$g_talk_troop_faction"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(str_store_string, 14, reg0),
			(assign, ":value_2", 1),
		(else_try),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 32),
			(troop_slot_eq, "trp_log_array_actor", ":number", "$g_talk_troop"),
			(troop_slot_eq, "trp_log_array_center_object", ":number", "$temp"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(str_store_string, 14, reg0),
			(assign, ":value_2", 1),
		(else_try),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 33),
			(troop_slot_eq, "trp_log_array_actor", ":number", "$g_talk_troop"),
			(troop_slot_eq, "trp_log_array_center_object", ":number", "$temp"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(str_store_string, 14, reg0),
			(assign, ":value_2", 1),
		(else_try),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 26),
			(troop_slot_eq, "trp_log_array_actor", ":number", "$g_talk_troop"),
			(troop_slot_eq, "trp_log_array_troop_object", ":number", "$temp"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(str_store_string, 14, reg0),
			(assign, ":value_2", 1),
		(else_try),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 31),
			(troop_slot_eq, "trp_log_array_actor", ":number", "$g_talk_troop"),
			(troop_slot_eq, "trp_log_array_center_object", ":number", "$temp"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(troop_get_slot, ":log_array_troop_object_number", "trp_log_array_troop_object", ":number"),
			(assign, reg4, 0),
			(try_begin),
				(call_script, "script_cf_dplmc_troop_is_female", ":log_array_troop_object_number"),
				(assign, reg4, 1),
			(try_end),
			(str_store_string, 14, reg0),
			(assign, ":value_2", 1),
		(else_try),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 31),
			(troop_slot_eq, "trp_log_array_actor", ":number", "$temp"),
			(troop_slot_eq, "trp_log_array_center_object", ":number", "$g_talk_troop"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(troop_get_slot, ":log_array_troop_object_number", "trp_log_array_troop_object", ":number"),
			(assign, reg4, 0),
			(try_begin),
				(call_script, "script_cf_dplmc_troop_is_female", ":log_array_troop_object_number"),
				(assign, reg4, 1),
			(try_end),
			(str_store_string, 14, reg0),
			(assign, ":value_2", 1),
		(try_end),
		(try_begin),
			(eq, ":value_2", 0),
			(call_script, "script_troop_describes_quarrel_with_troop_to_s14", "$g_talk_troop", "$temp"),
		(try_end),
		(call_script, "script_add_rumor_string_to_troop_notes", "$g_talk_troop", "$temp", 14)
	],
	"It is no secret. {s14}", "lord_recruit_2",
	[]],

	[anyone|plyr, "lord_recruit_2",
	[],
	"Never mind", "lord_pretalk",
	[]],

	[anyone, "lord_recruit_2_discontent",
	[
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(call_script, "script_calculate_troop_political_factors_for_liege", "$g_talk_troop", ":g_talk_troop_faction_leader"),
		(assign, ":var_2", reg3),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(display_message, "@{!}DEBUG : result for political is {reg3}"),
		(try_end),
		(try_begin),
			(lt, ":g_talk_troop_faction_leader", 0),
			(assign, ":value", 0),
			(str_store_string, 15, "str_noone"),
			(assign, reg15, 0),
		(else_try),
			(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":g_talk_troop_faction_leader"),
			(assign, ":value", reg0),
			(str_store_troop_name, 15, ":g_talk_troop_faction_leader"),
			(assign, reg15, 0),
			(call_script, "script_cf_dplmc_troop_is_female", ":g_talk_troop_faction_leader"),
			(assign, reg15, 1),
		(try_end),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 7),
			(assign, ":value_2", -5),
			(str_store_string, 12, "str_i_am_disturbed_about_my_lord_s15s_choice_of_companions"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1),
			(assign, ":value_2", -1),
			(str_store_string, 12, "str_well_ill_be_honest_i_feel_that_sometimes_s15_overlooks_my_rights_and_extends_his_protection_to_the_unworthy"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
			(assign, ":value_2", 5),
			(str_store_string, 12, "str_heh_one_thing_that_ill_say_about_s15_is_that_he_has_a_ripe_batch_of_bastards_in_his_court"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
			(assign, ":value_2", -4),
			(str_store_string, 12, "str_well_sometimes_i_have_to_say_that_i_question_s15s_judgment_regarding_those_who_he_keeps_in_his_court"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 3),
			(assign, ":value_2", 1),
			(str_store_string, 12, "str_s15_is_a_weak_man_who_too_easily_lends_his_ear_to_evil_council_and_gives_his_protection_to_some_who_have_done_me_wrong"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
			(assign, ":value_2", 3),
			(str_store_string, 12, "str_i_will_confess_that_sometimes_i_worry_about_s15s_judgment_particularly_in_the_matter_of_the_counsel_that_he_keeps"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
			(assign, ":value_2", 5),
			(str_store_string, 12, "str_what_do_i_think_i_think_that_s15_is_a_vile_pretender_a_friend_to_the_flatterer_and_the_hypocrite"),
		(else_try),
			(troop_slot_ge, "$g_talk_troop", 52, 8),
			(assign, ":value_2", 5),
			(str_store_string, 12, "str_well_s15_is_not_like_you_ill_say_that_much"),
		(try_end),
		(store_add, ":value_3", "$num_log_entries", 1),
		(try_for_range, ":number", 1, ":value_3"),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 27),
			(troop_slot_eq, "trp_log_array_actor", ":number", ":g_talk_troop_faction_leader"),
			(troop_slot_eq, "trp_log_array_center_object", ":number", "$g_talk_troop"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(str_store_string, 12, reg0),
		(else_try),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 32),
			(troop_slot_eq, "trp_log_array_actor", ":number", "$g_talk_troop"),
			(troop_slot_eq, "trp_log_array_troop_object", ":number", ":g_talk_troop_faction_leader"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(str_store_string, 12, reg0),
		(else_try),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 33),
			(troop_slot_eq, "trp_log_array_actor", ":number", "$g_talk_troop"),
			(troop_slot_eq, "trp_log_array_troop_object", ":number", ":g_talk_troop_faction_leader"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(str_store_string, 12, reg0),
		(else_try),
			(troop_slot_eq, "trp_log_array_entry_type", ":number", 26),
			(troop_slot_eq, "trp_log_array_actor", ":number", "$g_talk_troop"),
			(troop_slot_eq, "trp_log_array_faction_object", ":number", "$g_talk_troop_faction"),
			(call_script, "script_get_relevant_comment_for_log_entry", ":number"),
			(str_store_string, 12, reg0),
		(try_end),
		(val_mul, ":value_2", 2),
		(assign, "$lord_might_open_up", 0),
		(try_begin),
			(gt, ":var_2", 12),
			(gt, ":value", 0),
			(str_store_string, 12, "str_s15_long_may_he_live"),
		(else_try),
			(ge, ":var_2", ":value_2"),
			(str_store_string, 12, "str_he_is_my_liege_that_is_all_that_i_will_say_on_this_matter"),
			(assign, "$lord_might_open_up", 1),
		(try_end),
		(lt, ":var_2", ":value_2"),
		(call_script, "script_add_rumor_string_to_troop_notes", "$g_talk_troop", ":g_talk_troop_faction_leader", 12)
	],
	"{s12}", "lord_recruit_2_discontent_b",
	[]],

	[anyone, "lord_recruit_2_discontent",
	[],
	"{s12}", "lord_recruit_hesitant",
	[]],

	[anyone, "lord_recruit_2_discontent_b",
	[],
	"Sometimes, I do worry about the state of the realm.", "lord_recruit_3",
	[]],

	[anyone|plyr, "lord_recruit_hesitant",
	[
		(eq, "$lord_might_open_up", 1)
	],
	"Can't I persuade you to say a little more?", "lord_recruit_hesitant_persuade",
	[]],

	[anyone|plyr, "lord_recruit_hesitant",
	[],
	"Ah. Very good.", "lord_pretalk",
	[]],

	[anyone, "lord_recruit_hesitant_persuade",
	[
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(call_script, "script_calculate_troop_political_factors_for_liege", "$g_talk_troop", ":g_talk_troop_faction_leader"),
		(assign, ":var_2", reg3),
		(store_sub, ":value", 12, ":var_2"),
		(assign, reg3, ":value"),
		(val_div, ":value", 3),
		(store_sub, ":value_2", 14, ":value"),
		(troop_get_slot, ":g_talk_troop_temp_decision_seed", "$g_talk_troop", slot_troop_temp_decision_seed),
		(store_mod, ":value_3", ":g_talk_troop_temp_decision_seed", ":value_2"),
		(val_sub, ":value_3", 2),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(lt, ":value_3", ":skill_level_persuasion_player")
	],
	"If you put it that way, I admit that I do sometimes worry about the state of the realm.", "lord_recruit_3",
	[]],

	[anyone, "lord_recruit_hesitant_persuade",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_intrigue_impatience, 100),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", -1)
	],
	"You try my patience. I said that I have nothing to say.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_recruit_3",
	[],
	"Well, I have something to tell you.", "lord_recruit_3_a",
	[]],

	[anyone|plyr, "lord_recruit_3",
	[],
	"Well, that's interesting to know. But enough about politics.", "lord_pretalk",
	[]],

	[anyone, "lord_recruit_3_a",
	[
		(troop_slot_ge, "$g_talk_troop", 53, 1),
		(troop_get_slot, ":g_talk_troop_lord_recruitment_candidate", "$g_talk_troop", slot_lord_recruitment_candidate),
		(str_store_troop_name, 14, ":g_talk_troop_lord_recruitment_candidate"),
		(try_begin),
			(eq, ":g_talk_troop_lord_recruitment_candidate", "trp_player"),
			(str_store_string, 14, "@you"),
		(try_end),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_recruitment_argument, 1),
			(eq, ":g_talk_troop_lord_recruitment_candidate", "trp_player"),
			(str_store_string, 12, "str_that_you_are_the_rightful_heir_to_the_throne_of_calradia"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_recruitment_argument, 1),
			(str_store_troop_name, 14, ":g_talk_troop_lord_recruitment_candidate"),
			(str_store_string, 12, "str_that_s14_is_the_rightful_ruler_of_calradia"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_recruitment_argument, 2),
			(str_store_string, 12, "str_that_s14_will_rule_this_land_justly"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_recruitment_argument, 5),
			(str_store_string, 12, "str_that_s14_will_protect_our_rights_as_nobles"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_recruitment_argument, 4),
			(str_store_string, 12, "str_that_s14_will_unify_this_land_and_end_this_war"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_recruitment_argument, 3),
			(str_store_string, 12, "str_that_s14_will_reward_me_with_a_fief"),
		(try_end)
	],
	"{s12}", "lord_recruit_3_reset_claim",
	[]],

	[anyone|plyr, "lord_recruit_3_reset_claim",
	[],
	"Yes, that's it.", "lord_recruit_3_claim",
	[]],

	[anyone|plyr, "lord_recruit_3_reset_claim",
	[],
	"Let me phrase that a little differently.", "lord_recruit_3_a_reset",
	[]],

	[anyone, "lord_recruit_3_a",
	[],
	"Yes?", "lord_recruit_3_b",
	[]],

	[anyone, "lord_recruit_3_a_reset",
	[],
	"Yes?", "lord_recruit_3_b",
	[]],

	[anyone|plyr, "lord_recruit_3_b",
	[
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(eq, ":players_kingdom_leader", "trp_player")
	],
	"I ask for your support for the throne of this realm", "lord_recruit_3_why",
	[
		(troop_set_slot, "$g_talk_troop", slot_lord_recruitment_candidate, "trp_player"),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_troop_recruitment_random, 0),
			(troop_get_slot, ":g_talk_troop_temp_decision_seed", "$g_talk_troop", slot_troop_temp_decision_seed),
			(store_div, ":value", ":g_talk_troop_temp_decision_seed", 100),
			(val_add, ":value", 1),
			(troop_set_slot, "$g_talk_troop", slot_troop_recruitment_random, ":value"),
		(try_end)
	]],

	[anyone|plyr, "lord_recruit_3_b",
	[
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(neq, ":players_kingdom_leader", "trp_player"),
		(neq, "$players_kingdom", "$g_talk_troop_faction"),
		(str_store_troop_name, 45, ":players_kingdom_leader")
	],
	"I ask you to pledge allegiance to my liege, {s45}, as monarch of all the realm", "lord_recruit_3_why",
	[
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(troop_set_slot, "$g_talk_troop", slot_lord_recruitment_candidate, ":players_kingdom_leader"),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_troop_recruitment_random, 0),
			(troop_get_slot, ":g_talk_troop_temp_decision_seed", "$g_talk_troop", slot_troop_temp_decision_seed),
			(store_div, ":value", ":g_talk_troop_temp_decision_seed", 100),
			(val_add, ":value", 1),
			(troop_set_slot, "$g_talk_troop", slot_troop_recruitment_random, ":value"),
		(try_end)
	]],

	[anyone|plyr, "lord_recruit_3_b",
	[],
	"Never mind", "lord_pretalk",
	[]],

	[anyone, "lord_recruit_3_dilemma_1",
	[
		(troop_get_slot, ":g_talk_troop_lord_recruitment_candidate", "$g_talk_troop", slot_lord_recruitment_candidate),
		(str_store_troop_name, 45, ":g_talk_troop_lord_recruitment_candidate"),
		(assign, reg3, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":g_talk_troop_lord_recruitment_candidate"),
			(assign, reg3, 1),
		(try_end),
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(str_store_troop_name, 46, ":g_talk_troop_faction_leader"),
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_rebellion_dilemma_default")
	],
	"{s43}", "lord_recruit_3_dilemma_2",
	[]],

	[anyone, "lord_recruit_3_dilemma_2",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_rebellion_dilemma_2_default")
	],
	"{s43}", "lord_recruit_3_why",
	[]],

	[anyone, "lord_recruit_3_why",
	[
		(troop_slot_eq, "$g_talk_troop", slot_lord_recruitment_candidate, "trp_player"),
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(this_or_next|party_slot_eq, ":party", slot_town_lord, "$g_talk_troop"),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 0)
	],
	"Neither of us has so much as a single fortress to our name. Would you rule your sovereignty from an outlaw's den in the woods?", "lord_pretalk",
	[]],

	[anyone, "lord_recruit_3_why",
	[
		(troop_get_slot, ":g_talk_troop_lord_recruitment_candidate", "$g_talk_troop", slot_lord_recruitment_candidate),
		(try_begin),
			(eq, ":g_talk_troop_lord_recruitment_candidate", "trp_player"),
			(str_store_string, 44, "@you"),
		(else_try),
			(str_store_troop_name, 44, ":g_talk_troop_lord_recruitment_candidate"),
		(try_end)
	],
	"Why should I support {s44}?", "lord_recruit_3_d",
	[
		(troop_get_slot, ":g_talk_troop_lord_recruitment_candidate", "$g_talk_troop", slot_lord_recruitment_candidate),
		(try_begin),
			(assign, ":value", 0),
			(try_begin),
				(call_script, "script_cf_dplmc_troop_is_female", ":g_talk_troop_lord_recruitment_candidate"),
				(assign, ":value", 1),
			(try_end),
			(str_store_string, 45, "str_he"),
			(str_store_string, 47, "str_king"),
			(try_begin),
				(eq, ":value", 1),
				(str_store_string, 45, "str_she"),
				(str_store_string, 47, "str_queen"),
			(try_end),
			(try_begin),
				(eq, ":g_talk_troop_lord_recruitment_candidate", "$supported_pretender"),
				(eq, "$supported_pretender_old_faction", "fac_kingdom_3"),
				(str_store_string, 47, "str_khan"),
			(try_end),
			(try_begin),
				(eq, ":g_talk_troop_lord_recruitment_candidate", "trp_player"),
				(str_store_string, 45, "str_i"),
			(try_end),
		(try_end)
	]],

	[anyone|plyr, "lord_recruit_3_d",
	[
		(troop_get_slot, ":g_talk_troop_lord_recruitment_candidate", "$g_talk_troop", slot_lord_recruitment_candidate),
		(str_store_string, 43, "str_according_to_the_ancient_law_and_custom_of_the_calradians_s45_should_be_s47"),
		(try_begin),
			(gt, "$supported_pretender", 0),
			(eq, ":g_talk_troop_lord_recruitment_candidate", "$supported_pretender"),
			(str_store_faction_name, 46, "$supported_pretender_old_faction"),
			(str_store_string, 43, "str_because_s44_is_the_rightful_s47_of_the_s46"),
		(try_end)
	],
	"{s43}", "lord_recruit_3_claim",
	[
		(troop_set_slot, "$g_talk_troop", slot_lord_recruitment_argument, 1),
		(val_add, "$claim_arguments_made", 1),
		(assign, "$opposed_arguments_made", "$victory_arguments_made")
	]],

	[anyone|plyr, "lord_recruit_3_d",
	[],
	"If {he/she} were the ruler of the realm, {he/she} would deal with all men fairly and uphold the rights of the commons.", "lord_recruit_3_claim",
	[
		(troop_set_slot, "$g_talk_troop", slot_lord_recruitment_argument, 2),
		(val_add, "$ruler_arguments_made", 1),
		(assign, "$opposed_arguments_made", "$lords_arguments_made")
	]],

	[anyone|plyr, "lord_recruit_3_d",
	[],
	"If {he/she} were your liege, {he/she} would uphold your ancient rights as a noble of this land.", "lord_recruit_3_claim",
	[
		(troop_set_slot, "$g_talk_troop", slot_lord_recruitment_argument, 5),
		(val_add, "$lords_arguments_made", 1),
		(assign, "$opposed_arguments_made", "$ruler_arguments_made")
	]],

	[anyone|plyr, "lord_recruit_3_d",
	[],
	"Because {he/she} can unify the realm and end this discord.", "lord_recruit_3_claim",
	[
		(troop_set_slot, "$g_talk_troop", slot_lord_recruitment_argument, 4),
		(val_add, "$victory_arguments_made", 1),
		(assign, "$opposed_arguments_made", "$claim_arguments_made")
	]],

	[anyone|plyr, "lord_recruit_3_d",
	[],
	"Because {he/she} will reward you with lands.", "lord_recruit_3_claim",
	[
		(troop_set_slot, "$g_talk_troop", slot_lord_recruitment_argument, 3),
		(val_add, "$benefit_arguments_made", 1)
	]],

	[anyone|plyr, "lord_recruit_3_d",
	[],
	"Never mind", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_recruitment_random, 0)
	]],

	[anyone, "lord_recruit_3_claim",
	[
		(neg|troop_slot_eq, "$g_talk_troop", slot_lord_recruitment_argument, 3),
		(gt, "$opposed_arguments_made", 0),
		(troop_get_slot, ":g_talk_troop_recruitment_random", "$g_talk_troop", slot_troop_recruitment_random),
		(store_mul, ":value", "$opposed_arguments_made", 10),
		(val_add, ":value", ":g_talk_troop_recruitment_random"),
		(gt, ":value", 100),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_recruitment_argument, 1),
			(str_store_string, 12, "str_you_speak_of_claims_and_legalities_yet_to_others_you_talk_of_bringing_peace_by_force"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_recruitment_argument, 4),
			(str_store_string, 12, "str_you_speak_of_bringing_peace_by_force_yet_to_others_you_make_legal_claims"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_recruitment_argument, 2),
			(str_store_string, 12, "str_you_speak_to_some_of_upholding_the_rights_of_the_commons_yet_you_speak_to_others_of_uphold_the_rights_of_nobles_what_if_those_rights_are_in_conflict"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_recruitment_argument, 5),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 7, 12),
			(str_store_string, 12, "str_you_speak_to_me_of_upholding_my_rights_as_a_lord_but_to_others_you_talk_of_upholding_the_rights_of_all_commons_what_if_those_rights_come_into_conflict"),
		(try_end)
	],
	"Do you perhaps tell each person what you think they most want to hear? {s12}", "lord_recruit_3_claim",
	[
		(assign, "$opposed_arguments_made", -1)
	]],

	[anyone, "lord_recruit_3_claim",
	[
		(assign, "$g_persuasion_trump_used", 0),
		(troop_get_slot, ":g_talk_troop_lord_recruitment_candidate", "$g_talk_troop", slot_lord_recruitment_candidate),
		(assign, ":value", 0),
		(str_store_string, 12, "str_a_claim_should_be_strong_indeed_before_one_starts_talking_about_it"),
		(try_begin),
			(neq, ":g_talk_troop_lord_recruitment_candidate", "trp_player"),
			(str_store_string, 12, "str_indeed_please_continue"),
			(assign, ":value", 1),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1),
			(str_store_string, 12, "str_a_claim_should_be_strong_indeed_before_one_starts_talking_about_it"),
			(ge, "$player_right_to_rule", 10),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 4, 12),
			(str_store_string, 12, "str_a_king_should_prove_his_valor_beyond_any_doubt_before_he_starts_talking_about_a_claim_to_the_throne"),
			(troop_slot_ge, ":g_talk_troop_lord_recruitment_candidate", 7, 400),
			(assign, ":value", 1),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 4, 12),
			(str_store_string, 12, "str_you_must_prove_yourself_a_great_warrior_before_men_will_follow_you_as_king"),
			(troop_slot_ge, ":g_talk_troop_lord_recruitment_candidate", 7, 200),
			(assign, ":value", 1),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 7),
			(str_store_string, 12, "str_a_claim_to_the_throne_should_be_strong_indeed_before_one_presses_it"),
			(ge, "$player_right_to_rule", 20),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 4, 12),
			(str_store_string, 12, "str_indeed_but_a_man_must_also_prove_himself_a_great_warrior_before_men_will_follow_you_as_king"),
			(troop_slot_ge, ":g_talk_troop_lord_recruitment_candidate", 7, 200),
			(assign, ":value", 1),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 4, 12),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 9, 14),
			(str_store_string, 12, "str_my_pigherd_can_declare_himself_king_if_he_takes_he_fancy_i_think_you_need_to_break_a_few_more_heads_on_tbe_battlefield_before_men_will_follow_you"),
			(troop_slot_ge, ":g_talk_troop_lord_recruitment_candidate", 7, 200),
			(assign, ":value", 1),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 3),
			(str_store_string, 12, "str_if_you_do_not_wish_to_die_on_a_scaffold_like_so_many_failed_pretenders_before_you_i_would_suggest_that_you_to_build_your_claim_on_stronger_foundations_so_that_men_will_follow_you"),
			(ge, "$player_right_to_rule", 10),
			(str_store_string, 12, "str_if_you_do_not_wish_to_die_on_a_scaffold_like_so_many_failed_pretenders_before_you_i_would_advise_you_prove_yourself_on_the_field_of_battle_so_that_men_will_follow_you"),
			(troop_slot_ge, ":g_talk_troop_lord_recruitment_candidate", 7, 200),
			(assign, ":value", 1),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 2, 12),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 6, 14),
			(str_store_string, 12, "str_talk_is_for_heralds_and_lawyers_real_kings_prove_themselves_with_their_swords"),
			(troop_slot_ge, ":g_talk_troop_lord_recruitment_candidate", 7, 200),
			(assign, ":value", 1),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
			(str_store_string, 12, "str_i_were_you_i_would_try_to_prove_myself_a_bit_more_before_i_went_about_pressing_my_claim"),
			(troop_slot_ge, ":g_talk_troop_lord_recruitment_candidate", 7, 400),
			(assign, ":value", 1),
		(try_end),
		(str_clear, 14),
		(try_begin),
			(eq, ":value", 1),
			(str_store_string, 12, "str_indeed_please_continue"),
		(else_try),
			(eq, ":value", 0),
			(eq, "$g_persuasion_trump_used", 0),
			(assign, "$g_persuasion_trump_used", 1),
			(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
			(troop_get_slot, ":g_talk_troop_recruitment_random", "$g_talk_troop", slot_troop_recruitment_random),
			(try_begin),
				(eq, "$cheat_mode", 1),
			(try_end),
			(val_mul, ":skill_level_persuasion_player", 7),
			(ge, ":skill_level_persuasion_player", ":g_talk_troop_recruitment_random"),
			(assign, ":value", 1),
			(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_changed_my_mind_default"),
			(str_store_string, 14, "str_s12_s43"),
			(str_store_string, 12, 14),
		(try_end),
		(eq, ":value", 1)
	],
	"{s12}", "lord_recruit_4",
	[]],

	[anyone, "lord_recruit_3_claim",
	[],
	"{s12}", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_recruit_4",
	[
		(troop_get_slot, ":g_talk_troop_lord_recruitment_candidate", "$g_talk_troop", slot_lord_recruitment_candidate),
		(str_store_troop_name, 16, ":g_talk_troop_lord_recruitment_candidate"),
		(try_begin),
			(eq, ":g_talk_troop_lord_recruitment_candidate", "trp_player"),
			(str_store_string, 16, "str_me"),
		(try_end)
	],
	"I ask you to pledge your allegiance to {s16}.", "lord_recruit_4_objective_conditions",
	[]],

	[anyone|plyr, "lord_recruit_4",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_recruitment_random, 0)
	],
	"Never mind.", "lord_pretalk",
	[]],

	[anyone, "lord_recruit_4_objective_conditions",
	[
		(troop_get_slot, ":g_talk_troop_lord_recruitment_candidate", "$g_talk_troop", slot_lord_recruitment_candidate),
		(call_script, "script_calculate_troop_political_factors_for_liege", "$g_talk_troop", ":g_talk_troop_lord_recruitment_candidate"),
		(str_store_string, 33, 14),
		(assign, ":var_2", reg2),
		(assign, ":var_3", reg4),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(display_message, "str_preliminary_result_for_political_=_reg4"),
		(try_end),
		(assign, ":var_4", reg10),
		(assign, ":var_5", reg0),
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(call_script, "script_calculate_troop_political_factors_for_liege", "$g_talk_troop", ":g_talk_troop_faction_leader"),
		(store_sub, ":value", ":var_2", reg2),
		(store_sub, ":value_2", ":var_3", reg4),
		(assign, ":var_9", reg0),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg31, ":var_5"),
			(assign, reg32, ":var_9"),
			(display_message, "@{!}DEBUG : result for new liege : {reg31}"),
			(display_message, "@{!}DEBUG : result for old liege : {reg32}"),
		(try_end),
		(store_sub, "$pledge_chance", ":var_5", ":var_9"),
		(val_add, "$pledge_chance", 50),
		(val_div, "$pledge_chance", 2),
		(try_begin),
			(lt, ":var_3", 0),
			(try_begin),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 7),
				(str_store_string, 31, "str_i_worry_about_those_with_whom_you_have_chosen_to_surround_yourself"),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1),
				(str_store_string, 31, "str_there_are_some_outstanding_matters_between_me_and_some_of_your_vassals_"),
				(try_begin),
					(assign, reg41, ":var_3"),
					(ge, "$cheat_mode", 1),
					(display_message, "str_result_for_political_=_reg41"),
				(try_end),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
				(str_store_string, 31, "str_my_liege_has_his_faults_but_i_dont_care_for_your_toadies"),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
				(str_store_string, 31, "str_i_think_youre_a_good_man_but_im_worried_that_you_might_be_pushed_in_the_wrong_direction_by_some_of_those_around_you"),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 3),
				(str_store_string, 31, "str_i_am_loathe_to_fight_alongside_you_so_long_as_you_take_under_your_wing_varlots_and_base_men"),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
				(str_store_string, 31, "str_ill_be_honest__with_some_of_those_who_follow_you_i_think_id_be_more_comfortable_fighting_against_you_than_with_you"),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
				(str_store_string, 31, "str_i_say_that_you_can_judge_a_man_by_the_company_he_keeps_and_you_have_surrounded_yourself_with_vipers_and_vultures"),
			(else_try),
				(troop_slot_ge, "$g_talk_troop", 52, 8),
				(str_store_string, 31, "str_you_know_that_i_have_always_had_a_problem_with_some_of_our_companions"),
			(try_end),
		(else_try),
			(lt, ":value_2", 0),
			(str_store_string, 31, "str_politically_i_would_be_a_better_position_in_the_court_of_my_current_liege_than_in_yours"),
		(else_try),
			(str_store_string, 31, "str_i_am_more_comfortable_with_you_and_your_companions_than_with_my_current_liege"),
		(try_end),
		(try_begin),
			(lt, ":var_2", 10),
			(try_begin),
				(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
				(troop_slot_ge, "$g_talk_troop", 52, 8),
				(str_store_string, 32, "str_militarily_youre_in_no_position_to_protect_me_should_i_be_attacked_id_be_reluctant_to_join_you_until_you_could"),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 7),
				(str_store_string, 32, "str_militarily_when_i_consider_the_lay_of_the_land_i_realize_that_to_pledge_myself_to_you_now_would_endanger_my_faithful_retainers_and_my_family"),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1),
				(str_store_string, 32, "str_militarily_youre_in_no_position_to_come_to_my_help_if_someone_attacked_me_i_dont_mind_a_good_fight_but_i_like_to_have_a_chance_of_winning"),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
				(str_store_string, 32, "str_militarily_youre_in_no_position_to_come_to_my_help_if_someone_attacked_me_i_dont_mind_a_good_fight_but_i_like_to_have_a_chance_of_winning"),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
				(str_store_string, 32, "str_militarily_you_would_have_me_join_you_only_to_find_myself_isolated_amid_a_sea_of_enemies"),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 3),
				(str_store_string, 32, "str_militarily_you_would_have_me_join_you_only_to_find_myself_isolated_amid_a_sea_of_enemies"),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
				(str_store_string, 32, "str_militarily_youre_in_no_position_to_come_to_my_help_if_someone_attacked_me_youd_let_me_be_cut_down_like_a_dog_id_bet"),
			(try_end),
		(else_try),
			(lt, ":value", 0),
			(str_store_string, 32, "str_militarily_i_wouldnt_be_any_safer_if_i_joined_you"),
		(else_try),
			(str_store_string, 32, "str_militarily_i_might_be_safer_if_i_joined_you"),
		(try_end),
		(try_begin),
			(gt, ":var_4", 40),
			(str_store_string, 34, "str_finally_there_is_a_cost_to_ones_reputation_to_change_sides_in_this_case_the_cost_would_be_very_high"),
		(else_try),
			(gt, ":var_4", 20),
			(str_store_string, 34, "str_finally_there_is_a_cost_to_ones_reputation_to_change_sides_in_this_case_the_cost_would_be_significant"),
		(else_try),
			(str_store_string, 34, "str_finally_there_is_a_cost_to_ones_reputation_to_change_sides_in_this_case_however_many_men_would_understand"),
		(try_end)
	],
	"Let me think...", "lord_recruit_5_security",
	[]],

	[anyone, "lord_recruit_5_security",
	[],
	"{s32}", "lord_recruit_5_political",
	[]],

	[anyone, "lord_recruit_5_political",
	[],
	"{s31}", "lord_recruit_5_ideological",
	[]],

	[anyone, "lord_recruit_5_ideological",
	[],
	"{s33}", "lord_recruit_5_change_sides",
	[]],

	[anyone, "lord_recruit_5_change_sides",
	[],
	"{s34}", "lord_recruit_6",
	[
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg1, "$pledge_chance"),
			(display_message, "str_chance_of_success_=_reg1"),
		(try_end)
	]],

	[anyone|plyr, "lord_recruit_6",
	[],
	"It is time for you to make a decision.", "lord_recruit_6_reaction",
	[]],

	[anyone|plyr, "lord_recruit_6",
	[],
	"No need to decide anything -- we can speak of this at a later time.", "lord_pretalk",
	[]],

	[anyone, "lord_recruit_6_reaction",
	[],
	"Very well...", "lord_recruit_7_decision",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_recruitment_random, 0)
	]],

	[anyone, "lord_recruit_7_decision",
	[
		(troop_get_slot, ":g_talk_troop_temp_decision_seed", "$g_talk_troop", slot_troop_temp_decision_seed),
		(store_mod, ":value", ":g_talk_troop_temp_decision_seed", 100),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg3, ":value"),
			(display_message, "str_random_=_reg3"),
		(try_end),
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(str_store_troop_name, 14, ":g_talk_troop_faction_leader"),
		(assign, ":value_2", 0),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 3),
			(gt, ":value", "$pledge_chance"),
			(str_store_string, 12, "str_i_will_not_have_it_be_said_about_me_that_i_am_a_traitor_that_is_my_final_decision_i_have_nothing_more_to_say_on_this_matter"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1),
			(gt, ":value", "$pledge_chance"),
			(str_store_string, 12, "str_i_am_pledged_to_defend_s14_i_am_sorry_though_we_may_meet_on_the_battlefield_i_hope_that_we_will_still_be_friends"),
		(else_try),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
			(troop_slot_ge, "$g_talk_troop", 52, 8),
			(gt, ":value", "$pledge_chance"),
			(str_store_string, 12, "str_i_really_cannot_bring_myself_to_renounce_s14_i_am_sorry_please_lets_not_talk_about_this_any_more"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 7),
			(gt, ":value", "$pledge_chance"),
			(str_store_string, 12, "str_however_i_have_decided_that_i_must_remain_loyal_to_s14_i_am_sorry"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
			(gt, ":value", "$pledge_chance"),
			(str_store_string, 12, "str_however_i_will_not_let_you_lead_me_into_treason_do_not_talk_to_me_of_this_again"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
			(gt, ":value", "$pledge_chance"),
			(str_store_string, 12, "str_its_not_good_to_get_a_reputation_as_one_who_abandons_his_liege_that_is_my_decision_let_us_speak_no_more_of_this_matter"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
			(gt, ":value", "$pledge_chance"),
			(str_store_string, 12, "str_ive_decided_to_stick_with_s14_i_dont_want_to_talk_about_this_matter_any_more"),
		(else_try),
			(assign, ":value_2", 1),
		(try_end),
		(eq, ":value_2", 0)
	],
	"{s12}", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_intrigue_impatience, 500)
	]],

	[anyone, "lord_recruit_7_decision",
	[
		(troop_get_slot, ":g_talk_troop_lord_recruitment_candidate", "$g_talk_troop", slot_lord_recruitment_candidate),
		(str_store_troop_name, 4, ":g_talk_troop_lord_recruitment_candidate"),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(display_message, "str_lord_pledges_to_s4"),
		(try_end)
	],
	"Very well -- I am ready to pledge myself to {s4} as my {reg4?queen:king}.", "lord_recruit_pledge",
	[
		(troop_get_slot, ":g_talk_troop_lord_recruitment_candidate", "$g_talk_troop", slot_lord_recruitment_candidate),
		(try_begin),
			(eq, ":g_talk_troop_lord_recruitment_candidate", "trp_player"),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
		(else_try),
			(eq, ":g_talk_troop_lord_recruitment_candidate", "trp_player"),
			(faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 2),
			(call_script, "script_activate_player_faction", "trp_player"),
		(try_end),
		(assign, "$lord_expects_fief", 0),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_recruitment_argument, 3),
			(assign, "$lord_expects_fief", 1),
		(try_end),
		(call_script, "script_change_troop_faction", "$g_talk_troop", "$players_kingdom"),
		(try_begin),
			(store_relation, ":relation_players_kingdom_g_talk_troop_faction", "$players_kingdom", "$g_talk_troop_faction"),
			(ge, ":relation_players_kingdom_g_talk_troop_faction", 0),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(display_message, "str_lord_recruitment_provokes_home_faction"),
			(try_end),
			(call_script, "script_add_log_entry", 78, "trp_player", -1, "$g_talk_troop", "$g_talk_troop_faction"),
			(store_add, ":value", "$players_kingdom", 130),
			(val_sub, ":value", "fac_player_supporters_faction"),
			(faction_set_slot, "$g_talk_troop_faction", ":value", 30),
			(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
			(call_script, "script_troop_change_relation_with_troop", "trp_player", ":g_talk_troop_faction_leader", -3),
		(try_end),
		(troop_get_type, reg4, ":g_talk_troop_lord_recruitment_candidate"),
		(assign, reg4, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":g_talk_troop_lord_recruitment_candidate"),
			(assign, reg4, 1),
		(try_end),
		(try_begin),
			(eq, ":g_talk_troop_lord_recruitment_candidate", "trp_player"),
			(str_store_string, 4, "@you"),
			(call_script, "script_change_player_right_to_rule", 5),
		(else_try),
			(str_store_troop_name, 4, ":g_talk_troop_lord_recruitment_candidate"),
		(try_end)
	]],

	[anyone, "lord_recruit_pledge",
	[
		(eq, "$lord_expects_fief", 1)
	],
	"Remember. You have promised me a fief. I will hold you to that promise.", "lord_recruit_pledge",
	[
		(assign, "$lord_expects_fief", 0),
		(troop_set_slot, "$g_talk_troop", slot_lord_recruitment_argument, 0),
		(call_script, "script_add_log_entry", 37, "trp_player", 0, "$g_talk_troop", "$players_kingdom"),
		(troop_set_slot, "$g_talk_troop", slot_troop_promised_fief, 1)
	]],

	[anyone, "lord_recruit_pledge",
	[
		(troop_get_slot, ":g_talk_troop_lord_recruitment_candidate", "$g_talk_troop", slot_lord_recruitment_candidate),
		(eq, ":g_talk_troop_lord_recruitment_candidate", "trp_player"),
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 1, 0)
	],
	"So be it -- I pledge allegiance to you as your faithful vassal. I shall stand at your side to fight your enemies should you need my {s0}, and uphold your claims and those of your legitimate heirs. I expect in turn that you will protect me and recognize my rights as your vassal.", "lord_recruit_pledge_conclude",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_recruit_pledge",
	[
		(troop_get_slot, ":g_talk_troop_lord_recruitment_candidate", "$g_talk_troop", slot_lord_recruitment_candidate),
		(str_store_troop_name, 4, ":g_talk_troop_lord_recruitment_candidate"),
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 1, 0),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":g_talk_troop_lord_recruitment_candidate", 4)
	],
	"So be it -- you may inform {s4} that I am now {reg4?her:his} faithful vassal, that I will follow {reg4?her:him} as long as my breath remains, and I will be at {reg4?her:his} side to fight {reg4?her:his} enemies should {reg4?she:he} need my {s0}, and that I uphold {reg4?her:his} lawful claims and those of {reg4?her:his} legitimate heirs. In turn, I expect {reg4?her:his} protection and {reg4?her:his} recognition of my rights as {reg4?her:his} vassal.", "lord_recruit_pledge_conclude",
	[]],

	[anyone, "lord_recruit_pledge_conclude",
	[],
	"Now... It is a momentous step I have taken. I will take my leave, as I may need some time prepare myself for what comes next.", "close_window",
	[]],

	[anyone, "lord_start",
	[
		(check_quest_active, "qst_offer_gift"),
		(quest_slot_eq, "qst_offer_gift", slot_quest_target_troop, "$g_talk_troop"),
		(quest_slot_eq, "qst_offer_gift", slot_quest_current_state, 2),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 7),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1),
		(store_random_in_range, ":random_in_range_3", 3),
		(eq, ":random_in_range_3", 0),
		(quest_get_slot, ":offer_gift_giver_troop", "qst_offer_gift", slot_quest_giver_troop),
		(str_store_troop_name, 10, ":offer_gift_giver_troop"),
		(call_script, "script_troop_get_family_relation_to_troop", ":offer_gift_giver_troop", "$g_talk_troop"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"I received the gift, presented to me through my {s11} {s10}. It was a noble gesture, {s0}, and I regret that we ever quarreled.", "close_window",
	[
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", "trp_player"),
		(store_sub, ":value", 0, reg0),
		(val_add, ":value", 5),
		(val_max, ":value", 5),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", ":value"),
		(call_script, "script_end_quest", "qst_offer_gift"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_start",
	[
		(check_quest_active, "qst_offer_gift"),
		(quest_slot_eq, "qst_offer_gift", slot_quest_target_troop, "$g_talk_troop"),
		(quest_slot_eq, "qst_offer_gift", slot_quest_current_state, 2),
		(store_random_in_range, ":random_in_range_3", 3),
		(neq, ":random_in_range_3", 0),
		(quest_get_slot, ":offer_gift_giver_troop", "qst_offer_gift", slot_quest_giver_troop),
		(str_store_troop_name, 10, ":offer_gift_giver_troop"),
		(call_script, "script_troop_get_family_relation_to_troop", ":offer_gift_giver_troop", "$g_talk_troop")
	],
	"I received the gift, presented to me through my {s11} {s10}. For {reg4?her:his} sake, I am willing to let bygones be bygones.", "close_window",
	[
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", "trp_player"),
		(store_sub, ":value", 0, reg0),
		(val_max, ":value", 2),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", ":value"),
		(call_script, "script_end_quest", "qst_offer_gift"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_start",
	[
		(check_quest_active, "qst_offer_gift"),
		(quest_slot_eq, "qst_offer_gift", slot_quest_target_troop, "$g_talk_troop"),
		(quest_slot_eq, "qst_offer_gift", slot_quest_current_state, 2),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 3),
		(quest_get_slot, ":offer_gift_giver_troop", "qst_offer_gift", slot_quest_giver_troop),
		(str_store_troop_name, 10, ":offer_gift_giver_troop"),
		(call_script, "script_troop_get_family_relation_to_troop", ":offer_gift_giver_troop", "$g_talk_troop")
	],
	"I received the gift, presented to me through my {s11} {s10}. Bah! Do you think you can buy my friendship?", "close_window",
	[
		(call_script, "script_end_quest", "qst_offer_gift"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_start",
	[
		(check_quest_active, "qst_offer_gift"),
		(quest_slot_eq, "qst_offer_gift", slot_quest_target_troop, "$g_talk_troop"),
		(quest_slot_eq, "qst_offer_gift", slot_quest_current_state, 2),
		(quest_get_slot, ":offer_gift_giver_troop", "qst_offer_gift", slot_quest_giver_troop),
		(str_store_troop_name, 10, ":offer_gift_giver_troop"),
		(call_script, "script_troop_get_family_relation_to_troop", ":offer_gift_giver_troop", "$g_talk_troop")
	],
	"I received the gift, presented to me through my {s11} {s10}. As dear as {reg4?she:he} is to me, however, I cannot forget our differences.", "close_window",
	[
		(assign, "$g_leave_encounter", 1),
		(call_script, "script_end_quest", "qst_offer_gift")
	]],

	[anyone|plyr, "lord_talk",
	[
		(check_quest_active, "qst_denounce_lord"),
		(quest_slot_eq, "qst_denounce_lord", slot_quest_giver_troop, "$g_talk_troop"),
		(this_or_next|check_quest_succeeded, "qst_denounce_lord"),
		(check_quest_failed, "qst_denounce_lord"),
		(quest_get_slot, ":denounce_lord_target_troop", "qst_denounce_lord", slot_quest_target_troop),
		(str_store_troop_name, 4, ":denounce_lord_target_troop")
	],
	"I did as you suggested, and denounced {s4}", "denounce_lord_results",
	[]],

	[anyone, "denounce_lord_results",
	[
		(check_quest_succeeded, "qst_denounce_lord"),
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(str_store_troop_name, 4, ":g_talk_troop_faction_leader"),
		(quest_get_slot, ":denounce_lord_target_troop", "qst_denounce_lord", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":denounce_lord_target_troop")
	],
	"Yes, and hopefully now {s4} will think twice before entrusting {reg0?her:him} with any additional fiefs, honors, or offices. We are grateful to you.", "lord_pretalk",
	[
		(call_script, "script_succeed_quest", "qst_denounce_lord"),
		(call_script, "script_end_quest", "qst_denounce_lord"),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", 8),
		(add_xp_as_reward, 1000)
	]],

	[anyone, "denounce_lord_results",
	[
		(quest_get_slot, ":denounce_lord_target_troop", "qst_denounce_lord", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":denounce_lord_target_troop")
	],
	"So you did -- and we have heard that {reg0?she:he} forced you to retract your words, and thus emerged from this affair looking stronger than before. You will forgive me, if my gratitude to you is somewhat muted.", "close_window",
	[
		(call_script, "script_end_quest", "qst_denounce_lord")
	]],

	[anyone|plyr, "lord_talk",
	[
		(check_quest_active, "qst_intrigue_against_lord"),
		(quest_slot_eq, "qst_intrigue_against_lord", slot_quest_giver_troop, "$g_talk_troop"),
		(this_or_next|check_quest_succeeded, "qst_intrigue_against_lord"),
		(check_quest_failed, "qst_intrigue_against_lord"),
		(quest_get_slot, ":intrigue_against_lord_target_troop", "qst_intrigue_against_lord", slot_quest_target_troop),
		(str_store_troop_name, 4, ":intrigue_against_lord_target_troop"),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(str_store_troop_name, 5, ":players_kingdom_leader")
	],
	"I did as you asked, and spoke to {s5} about the danger posed by {s4}.", "lord_quest_intrigue_result",
	[]],

	[anyone, "lord_quest_intrigue_result",
	[
		(check_quest_succeeded, "qst_intrigue_against_lord"),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(str_store_troop_name, 5, ":players_kingdom_leader"),
		(quest_get_slot, ":denounce_lord_target_troop", "qst_denounce_lord", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":denounce_lord_target_troop")
	],
	"So we hear. Hopefully now {s5} will think twice before entrusting {reg0?her:him} with any additional fiefs, honors, or offices. We are grateful to you.", "lord_pretalk",
	[
		(call_script, "script_end_quest", "qst_intrigue_against_lord"),
		(quest_set_slot, "qst_intrigue_against_lord", slot_quest_dont_give_again_remaining_days, 30),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", 8),
		(add_xp_as_reward, 500)
	]],

	[anyone, "lord_quest_intrigue_result",
	[
		(check_quest_failed, "qst_intrigue_against_lord")
	],
	"So we hear -- but alas, {s5} seems not to have listened. Still, we are grateful to you for trying.", "close_window",
	[
		(call_script, "script_end_quest", "qst_intrigue_against_lord"),
		(quest_set_slot, "qst_intrigue_against_lord", slot_quest_dont_give_again_remaining_days, 30)
	]],

	[anyone|plyr, "lord_talk",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(check_quest_active, "qst_lend_companion"),
		(quest_slot_eq, "qst_lend_companion", slot_quest_giver_troop, "$g_talk_troop"),
		(store_current_day, ":current_day"),
		(quest_get_slot, ":lend_companion_target_amount", "qst_lend_companion", slot_quest_target_amount),
		(ge, ":current_day", ":lend_companion_target_amount"),
		(quest_get_slot, ":lend_companion_target_troop", "qst_lend_companion", slot_quest_target_troop),
		(str_store_troop_name, 14, ":lend_companion_target_troop"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":lend_companion_target_troop", 3)
	],
	"I should like {s14} returned to me, {s65}, if you no longer require {reg3?her:his} services.", "lord_lend_companion_end",
	[]],

	[anyone, "lord_lend_companion_end",
	[
		(neg|hero_can_join, "p_main_party")
	],
	"You've too many men in your company already, {playername}. You could not lead any more at the moment.", "lord_pretalk",
	[]],

	[anyone, "lord_lend_companion_end",
	[],
	"Certainly, {playername}. {reg3?She:He} is a bright {reg3?girl:fellow}, you're a lucky {man/woman} to have such worthy companions.", "lord_pretalk",
	[
		(quest_get_slot, ":lend_companion_target_troop", "qst_lend_companion", slot_quest_target_troop),
		(party_add_members, "p_main_party", ":lend_companion_target_troop", 1),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 3),
		(add_xp_as_reward, 100),
		(call_script, "script_end_quest", "qst_lend_companion"),
		(str_store_troop_name, 14, ":lend_companion_target_troop"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":lend_companion_target_troop", 3)
	]],

	[anyone|plyr, "lord_talk",
	[
		(check_quest_active, "qst_collect_debt"),
		(quest_slot_eq, "qst_collect_debt", slot_quest_current_state, 0),
		(quest_get_slot, ":collect_debt_target_troop", "qst_collect_debt", slot_quest_target_troop),
		(eq, "$g_talk_troop", ":collect_debt_target_troop"),
		(quest_get_slot, ":collect_debt_giver_troop", "qst_collect_debt", slot_quest_giver_troop),
		(str_store_troop_name, 1, ":collect_debt_giver_troop")
	],
	"I've come to collect the debt you owe to {s1}.", "lord_ask_to_collect_debt",
	[
		(assign, "$g_convince_quest", "qst_collect_debt")
	]],

	[anyone, "lord_ask_to_collect_debt",
	[
		(quest_get_slot, ":collect_debt_giver_troop", "qst_collect_debt", slot_quest_giver_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":collect_debt_giver_troop")
	],
	"Oh. Well, {s1} did lend me some silver a ways back, but I've done {reg0?her:him} many favours in the past and I consider that money as my due payment.", "lord_ask_to_collect_debt_2",
	[]],

	[anyone|plyr, "lord_ask_to_collect_debt_2",
	[
		(quest_get_slot, ":collect_debt_giver_troop", "qst_collect_debt", slot_quest_giver_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":collect_debt_giver_troop")
	],
	"{s1} considers it a debt. {reg0?She:He} asked me to speak to you on {reg0?her:his} behalf.", "convince_begin",
	[]],

	[anyone|plyr, "lord_ask_to_collect_debt_2",
	[],
	"Then I will not press the matter any further.", "lord_pretalk",
	[]],

	[anyone, "convince_accept",
	[
		(check_quest_active, "qst_collect_debt"),
		(quest_slot_eq, "qst_collect_debt", slot_quest_target_troop, "$g_talk_troop"),
		(quest_get_slot, ":collect_debt_giver_troop", "qst_collect_debt", slot_quest_giver_troop),
		(str_store_troop_name, 8, ":collect_debt_giver_troop"),
		(call_script, "script_dplmc_store_troop_is_female", ":collect_debt_giver_troop"),
		(quest_get_slot, reg10, "qst_collect_debt", slot_quest_target_amount)
	],
	"My debt to {s8} has long been overdue and was a source of great discomfort to me. Thank you for accepting to take the money to {reg0?her:him}. Please give {reg0?her:him} these {reg10} coins and thank {reg0?her:him} on my behalf.", "close_window",
	[
		(call_script, "script_troop_add_gold", "trp_player", reg10),
		(quest_set_slot, "qst_collect_debt", slot_quest_current_state, 1),
		(call_script, "script_succeed_quest", "qst_collect_debt"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "lord_talk",
	[
		(check_quest_active, "qst_persuade_lords_to_make_peace"),
		(quest_get_slot, ":persuade_lords_to_make_peace_target_troop", "qst_persuade_lords_to_make_peace", slot_quest_target_troop),
		(quest_get_slot, ":persuade_lords_to_make_peace_object_troop", "qst_persuade_lords_to_make_peace", slot_quest_object_troop),
		(this_or_next|eq, ":persuade_lords_to_make_peace_target_troop", "$g_talk_troop"),
		(eq, ":persuade_lords_to_make_peace_object_troop", "$g_talk_troop"),
		(quest_get_slot, ":persuade_lords_to_make_peace_target_faction", "qst_persuade_lords_to_make_peace", slot_quest_target_faction),
		(quest_get_slot, ":persuade_lords_to_make_peace_object_faction", "qst_persuade_lords_to_make_peace", slot_quest_object_faction),
		(str_store_faction_name, 12, ":persuade_lords_to_make_peace_target_faction"),
		(str_store_faction_name, 13, ":persuade_lords_to_make_peace_object_faction")
	],
	"Please, {s64}, it's time to end this war between {s12} and {s13}.", "lord_ask_to_make_peace",
	[
		(assign, "$g_convince_quest", "qst_persuade_lords_to_make_peace")
	]],

	[anyone, "lord_ask_to_make_peace",
	[],
	"Eh? I'm not sure I heard you right, {playername}. War is not easily forgotten by either side of the conflict, and I have a very long memory. Why should I take any interest in brokering peace with those dogs?", "lord_ask_to_make_peace_2",
	[]],

	[anyone|plyr, "lord_ask_to_make_peace_2",
	[],
	"Perhaps I can talk you into it...", "convince_begin",
	[]],

	[anyone|plyr, "lord_ask_to_make_peace_2",
	[],
	"Never mind, peace can wait for now.", "lord_pretalk",
	[]],

	[anyone, "convince_accept",
	[
		(check_quest_active, "qst_persuade_lords_to_make_peace"),
		(this_or_next|quest_slot_eq, "qst_persuade_lords_to_make_peace", slot_quest_target_troop, "$g_talk_troop"),
		(quest_slot_eq, "qst_persuade_lords_to_make_peace", slot_quest_object_troop, "$g_talk_troop"),
		(quest_get_slot, ":persuade_lords_to_make_peace_object_faction", "qst_persuade_lords_to_make_peace", slot_quest_object_faction),
		(quest_get_slot, ":persuade_lords_to_make_peace_target_faction", "qst_persuade_lords_to_make_peace", slot_quest_target_faction),
		(str_store_faction_name, 12, ":persuade_lords_to_make_peace_object_faction"),
		(str_store_faction_name, 13, ":persuade_lords_to_make_peace_target_faction"),
		(try_begin),
			(eq, ":persuade_lords_to_make_peace_object_faction", "$g_talk_troop_faction"),
			(str_store_faction_name, 14, ":persuade_lords_to_make_peace_target_faction"),
		(else_try),
			(str_store_faction_name, 14, ":persuade_lords_to_make_peace_object_faction"),
		(try_end)
	],
	"You... have convinced me, {playername}. Very well then, you've my blessing to bring a peace offer to {s14}. I cannot guarantee they will accept it, but on the off-chance they do, I will stand by it.", "close_window",
	[
		(store_mul, ":value", "$g_talk_troop", -1),
		(try_begin),
			(quest_slot_eq, "qst_persuade_lords_to_make_peace", slot_quest_target_troop, "$g_talk_troop"),
			(quest_set_slot, "qst_persuade_lords_to_make_peace", slot_quest_target_troop, ":value"),
		(else_try),
			(quest_set_slot, "qst_persuade_lords_to_make_peace", slot_quest_object_troop, ":value"),
		(try_end),
		(quest_set_slot, "qst_persuade_lords_to_make_peace", slot_quest_convince_value, 1500),
		(assign, "$g_leave_encounter", 1),
		(neg|quest_slot_ge, "qst_persuade_lords_to_make_peace", 2, 0),
		(neg|quest_slot_ge, "qst_persuade_lords_to_make_peace", 4, 0),
		(call_script, "script_succeed_quest", "qst_persuade_lords_to_make_peace")
	]],

	[anyone|plyr, "lord_talk",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(check_quest_active, "qst_duel_for_lady"),
		(neg|check_quest_concluded, "qst_duel_for_lady"),
		(quest_slot_eq, "qst_duel_for_lady", slot_quest_target_troop, "$g_talk_troop"),
		(quest_get_slot, ":duel_for_lady_giver_troop", "qst_duel_for_lady", slot_quest_giver_troop),
		(str_store_troop_name, 1, ":duel_for_lady_giver_troop")
	],
	"I want you to take back your accusations against {s1}.", "lord_challenge_duel_for_lady",
	[]],

	[anyone, "lord_challenge_duel_for_lady",
	[],
	"What accusations? Everyone knows that she beds her stable boys and anyone else she can lay hands on while her husband is away. I merely repeat the words of many.", "lord_challenge_duel_for_lady_2",
	[]],

	[anyone|plyr, "lord_challenge_duel_for_lady_2",
	[
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 1, 0)
	],
	"You will recant these lies, or prove them against my {s0}!", "lord_challenge_duel",
	[]],

	[anyone|plyr, "lord_challenge_duel_for_lady_2",
	[],
	"If you say so...", "lord_pretalk",
	[]],

	[anyone, "lord_challenge_duel",
	[
		(str_store_string, 15, "str_error__wrong_quest_type"),
		(try_begin),
			(check_quest_active, "qst_duel_for_lady"),
			(neg|check_quest_concluded, "qst_duel_for_lady"),
			(quest_slot_eq, "qst_duel_for_lady", slot_quest_target_troop, "$g_talk_troop"),
			(str_store_string, 15, "@You are challenging me to a duel? How droll! As you wish, {playername}, it will be good sport to bash your head in."),
		(else_try),
			(check_quest_active, "qst_duel_courtship_rival"),
			(neg|check_quest_concluded, "qst_duel_courtship_rival"),
			(quest_slot_eq, "qst_duel_courtship_rival", slot_quest_target_troop, "$g_talk_troop"),
			(str_store_string, 15, "str_call_me_coward_very_well_you_leave_me_no_choice"),
		(try_end)
	],
	"{s15}", "close_window",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -15),
		(call_script, "script_set_up_duel_with_troop", "$g_talk_troop")
	]],

	[anyone|plyr, "lord_talk",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(check_quest_active, "qst_duel_courtship_rival"),
		(neg|check_quest_concluded, "qst_duel_courtship_rival"),
		(quest_slot_eq, "qst_duel_courtship_rival", slot_quest_target_troop, "$g_talk_troop"),
		(quest_get_slot, ":duel_courtship_rival_giver_troop", "qst_duel_courtship_rival", slot_quest_giver_troop),
		(str_store_troop_name, 5, ":duel_courtship_rival_giver_troop")
	],
	"Relinquish your suit of {s5}!", "lord_challenge_courtship_rival",
	[]],

	[anyone, "lord_challenge_courtship_rival",
	[],
	"Or what? Do you intend to duel over a lady? I'll let you know -- our liege frowns on this sort of hot-headed challenge, when every man must stand together against the foreign foe.", "lord_challenge_courtship_rival_2",
	[]],

	[anyone|plyr, "lord_challenge_courtship_rival_2",
	[],
	"Do you fear to fight me?", "lord_challenge_duel",
	[]],

	[anyone|plyr, "lord_challenge_courtship_rival_2",
	[],
	"My pardon. I have spoken rashly...", "lord_pretalk",
	[
		(call_script, "script_end_quest", "qst_duel_courtship_rival")
	]],

	[anyone, "start",
	[
		(check_quest_active, "qst_deliver_love_letter"),
		(quest_get_slot, ":deliver_love_letter_target_troop", "qst_deliver_love_letter", slot_quest_target_troop),
		(eq, "$g_talk_troop", ":deliver_love_letter_target_troop"),
		(quest_get_slot, ":deliver_love_letter_giver_troop", "qst_deliver_love_letter", slot_quest_giver_troop),
		(str_store_troop_name, 9, ":deliver_love_letter_giver_troop"),
		(ge, "$love_letter", 3)
	],
	"Hello {playername}. what's that, you have a letter from {s9}? Let me see. Oh. What a peculiar turn of phrase. Oh my. I don't know what to say. Did {s9} really write this himself? I was unaware of his interest, but now that I know.... well, let's say that I shall look favourably on him when next we meet. Thank you {playername}, thank you so much!", "lady_pretalk",
	[
		(quest_get_slot, ":deliver_love_letter_giver_troop", "qst_deliver_love_letter", slot_quest_giver_troop),
		(call_script, "script_change_player_relation_with_troop", ":deliver_love_letter_giver_troop", 5),
		(add_xp_as_reward, 500),
		(assign, "$love_letter", 0),
		(call_script, "script_end_quest", "qst_deliver_love_letter")
	]],

	[anyone, "start",
	[
		(check_quest_active, "qst_deliver_love_letter"),
		(quest_get_slot, ":deliver_love_letter_target_troop", "qst_deliver_love_letter", slot_quest_target_troop),
		(eq, "$g_talk_troop", ":deliver_love_letter_target_troop"),
		(quest_get_slot, ":deliver_love_letter_giver_troop", "qst_deliver_love_letter", slot_quest_giver_troop),
		(str_store_troop_name, 9, ":deliver_love_letter_giver_troop"),
		(lt, "$love_letter", 3)
	],
	"Hello {playername}. what's that, you have a letter from {s9}? Let me see. Oh my. What a strange man. Did that poltroon really write this, or he get one of his stablehands to scrawl it? I have never been so insulted! If you see {s9} please tell him to keep his distance. Oaf!", "lady_pretalk",
	[
		(assign, "$love_letter", 0),
		(add_xp_as_reward, 500),
		(call_script, "script_end_quest", "qst_deliver_love_letter")
	]],

	[anyone|plyr, "lord_talk",
	[
		(check_quest_active, "qst_deliver_message"),
		(quest_get_slot, ":deliver_message_target_troop", "qst_deliver_message", slot_quest_target_troop),
		(eq, "$g_talk_troop", ":deliver_message_target_troop"),
		(quest_get_slot, ":deliver_message_giver_troop", "qst_deliver_message", slot_quest_giver_troop),
		(str_store_troop_name, 9, ":deliver_message_giver_troop")
	],
	"I bring a message from {s9}.", "lord_message_delivered",
	[]],

	[anyone, "lord_message_delivered",
	[
		(quest_get_slot, ":deliver_message_giver_troop", "qst_deliver_message", slot_quest_giver_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":deliver_message_giver_troop"),
		(assign, reg4, reg0)
	],
	"Oh? Let me see that... Well, well, well! It was good of you to bring me this, {playername}. Take my seal as proof that I've received it, and give my regards to {s9} when you see {reg4?her:him} again.", "lord_pretalk",
	[
		(call_script, "script_end_quest", "qst_deliver_message"),
		(quest_get_slot, ":deliver_message_giver_troop", "qst_deliver_message", slot_quest_giver_troop),
		(str_store_troop_name, 9, ":deliver_message_giver_troop"),
		(call_script, "script_change_player_relation_with_troop", ":deliver_message_giver_troop", 1),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1)
	]],

	[anyone|plyr, "lord_talk",
	[
		(check_quest_active, "qst_deliver_message_to_enemy_lord"),
		(quest_get_slot, ":deliver_message_to_enemy_lord_target_troop", "qst_deliver_message_to_enemy_lord", slot_quest_target_troop),
		(eq, "$g_talk_troop", ":deliver_message_to_enemy_lord_target_troop"),
		(quest_get_slot, ":deliver_message_to_enemy_lord_giver_troop", "qst_deliver_message_to_enemy_lord", slot_quest_giver_troop),
		(str_store_troop_name, 9, ":deliver_message_to_enemy_lord_giver_troop")
	],
	"I bring a message from {s9}.", "lord_message_delivered_enemy",
	[]],

	[anyone, "lord_message_delivered_enemy",
	[],
	"Oh? Let me see that... Hmmm. It was good of you to bring me this, {playername}. Take my seal as proof that I've received it, with my thanks.", "close_window",
	[
		(call_script, "script_end_quest", "qst_deliver_message_to_enemy_lord"),
		(quest_get_slot, ":deliver_message_to_enemy_lord_giver_troop", "qst_deliver_message_to_enemy_lord", slot_quest_giver_troop),
		(call_script, "script_change_player_relation_with_troop", ":deliver_message_to_enemy_lord_giver_troop", 1),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "lord_talk",
	[
		(check_quest_active, "qst_deliver_message_to_prisoner_lord"),
		(quest_slot_eq, "qst_deliver_message_to_prisoner_lord", slot_quest_target_troop, "$g_talk_troop"),
		(quest_get_slot, ":deliver_message_to_prisoner_lord_giver_troop", "qst_deliver_message_to_prisoner_lord", slot_quest_giver_troop),
		(str_store_troop_name, 11, ":deliver_message_to_prisoner_lord_giver_troop")
	],
	"I bring a message from {s11}.", "lord_deliver_message_prisoner",
	[
		(call_script, "script_end_quest", "qst_deliver_message_to_prisoner_lord")
	]],

	[anyone, "lord_deliver_message_prisoner",
	[],
	"Can it be true? Oh, thank you kindly, {playername}! You have brought hope and some small ray of light to these bleak walls. Perhaps one day I will be able to repay you.", "lord_deliver_message_prisoner_2",
	[]],

	[anyone|plyr, "lord_deliver_message_prisoner_2",
	[],
	" 'Twas the least I could do, {s65}.", "lord_deliver_message_prisoner_2a",
	[]],

	[anyone, "lord_deliver_message_prisoner_2a",
	[],
	"You've no idea how grateful I am, {playername}. A thousand thanks and more.", "close_window",
	[]],

	[anyone|plyr, "lord_deliver_message_prisoner_2",
	[],
	"Worry not, {s65}. You'll have ample opportunity once you are free again.", "lord_deliver_message_prisoner_2b",
	[]],

	[anyone, "lord_deliver_message_prisoner_2b",
	[],
	"Hah, of course, {playername}. My eternal thanks go with you.", "close_window",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(troop_slot_ge, "$g_talk_troop", 8, 0),
		(check_quest_active, "qst_rescue_lord_by_replace"),
		(quest_slot_eq, "qst_rescue_lord_by_replace", slot_quest_target_troop, "$g_talk_troop"),
		(neg|check_quest_succeeded, "qst_rescue_lord_by_replace")
	],
	"Fear not, I am here to rescue you.", "lord_rescue_by_replace_offer",
	[]],

	[anyone, "lord_rescue_by_replace_offer",
	[],
	"By God, are you serious? What is your plan?", "lord_rescue_by_replace_offer_2",
	[]],

	[anyone|plyr, "lord_rescue_by_replace_offer_2",
	[],
	"A simple ruse, {s65}. If we exchange garments, I shall take your place here in prison, while you make your escape disguised as myself. I paid the guards a handsome bribe, with which I am sure they have already purchased half the wine stocks of the nearest tavern. With some luck they'll soon get so drunk they'd have trouble recognising their own mothers, let alone telling one of us from the other. At least not until you are safely away.", "lord_rescue_by_replace_offer_3",
	[]],

	[anyone, "lord_rescue_by_replace_offer_3",
	[],
	"Hmm, it might just work... But what of you, my {friend/lady}? The guards won't take kindly to this trickery. You may end up spending some time in this cell yourself.", "lord_rescue_by_replace_offer_4",
	[]],

	[anyone|plyr, "lord_rescue_by_replace_offer_4",
	[],
	"Not to worry, {s65}. The place is already starting to grow on me.", "lord_rescue_by_replace_offer_5a",
	[]],

	[anyone|plyr, "lord_rescue_by_replace_offer_4",
	[],
	"I shall be fine as long there is an ample reward waiting at the end.", "lord_rescue_by_replace_offer_5b",
	[]],

	[anyone, "lord_rescue_by_replace_offer_5a",
	[],
	"You are a brave soul indeed. I won't forget this.", "lord_rescue_by_replace_offer_6",
	[]],

	[anyone, "lord_rescue_by_replace_offer_5b",
	[],
	"Of course, my {friend/lady}, of course! Come to me when you have regained your freedom, and perhaps I shall be able to repay the debt I owe you.", "lord_rescue_by_replace_offer_6",
	[]],

	[anyone|plyr, "lord_rescue_by_replace_offer_6",
	[],
	"Quickly, {s65}, let us change garments. It is past time you were away from here.", "close_window",
	[
		(call_script, "script_succeed_quest", "qst_rescue_lord_by_replace"),
		(quest_get_slot, ":rescue_lord_by_replace_target_troop", "qst_rescue_lord_by_replace", slot_quest_target_troop),
		(quest_get_slot, ":rescue_lord_by_replace_target_center", "qst_rescue_lord_by_replace", slot_quest_target_center),
		(party_remove_prisoners, ":rescue_lord_by_replace_target_center", ":rescue_lord_by_replace_target_troop", 1),
		(troop_set_slot, ":rescue_lord_by_replace_target_troop", slot_troop_prisoner_of_party, -1),
		(assign, "$auto_menu", -1),
		(assign, "$capturer_party", "$g_encountered_party"),
		(jump_to_menu, "mnu_captivity_rescue_lord_taken_prisoner"),
		(finish_mission)
	]],

	[anyone|plyr, "lord_talk",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(eq, "$players_oath_renounced_against_kingdom", "$g_talk_troop_faction"),
		(str_store_faction_name, 4, "$g_talk_troop_faction")
	],
	"{s66}, I wish to restore my old oath to {s4}.", "lord_ask_pardon_after_oath_renounced",
	[]],

	[anyone, "lord_ask_pardon_after_oath_renounced",
	[
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(neq, ":g_talk_troop_faction_leader", "$g_talk_troop"),
		(str_store_troop_name, 4, ":g_talk_troop_faction_leader"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_talk_troop_faction_leader")
	],
	"That is too great a matter for me to decide, {playername}. You should seek out {s4}. Such clemency is {reg0?hers:his} alone to grant or deny.", "lord_pretalk",
	[]],

	[anyone, "lord_ask_pardon_after_oath_renounced",
	[
		(assign, ":var_1", 0),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(party_slot_eq, ":party", slot_center_faction_when_oath_renounced, "$g_talk_troop_faction"),
			(val_add, ":var_1", 1),
		(try_end),
		(store_mul, ":value", ":var_1", 500),
		(store_current_hours, ":current_hours"),
		(val_sub, ":current_hours", "$players_oath_renounced_begin_time"),
		(val_add, ":value", ":current_hours"),
		(try_begin),
			(gt, ":value", 800),
			(assign, ":value_2", -1),
			(try_begin),
				(gt, ":value", 1500),
				(try_begin),
					(eq, "$players_oath_renounced_given_center", 0),
					(store_random_in_range, ":value_2", 0, ":var_1"),
				(try_end),
			(else_try),
				(assign, "$players_oath_renounced_given_center", 0),
			(try_end),
			(assign, ":var_7", 0),
			(try_for_range, ":party", "p_town_1", "p_village_1"),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
				(party_slot_eq, ":party", slot_center_faction_when_oath_renounced, "$g_talk_troop_faction"),
				(try_begin),
					(eq, ":value_2", 0),
					(assign, "$players_oath_renounced_given_center", ":party"),
				(else_try),
					(neq, "$players_oath_renounced_given_center", ":party"),
					(try_begin),
						(eq, ":var_7", 0),
						(str_store_party_name, 17, ":party"),
					(else_try),
						(eq, ":var_7", 1),
						(str_store_party_name, 16, ":party"),
						(str_store_string, 17, "@{s16} and {s17}"),
					(else_try),
						(str_store_party_name, 16, ":party"),
						(str_store_string, 17, "@{!}{s16}, {s17}"),
					(try_end),
					(val_add, ":var_7", 1),
				(try_end),
				(val_sub, ":value_2", 1),
			(try_end),
			(try_begin),
				(eq, ":var_7", 0),
				(str_store_string, 11, "@Very well, I will accept you back into my ranks, if you're ready to swear your solemn oath once more."),
				(assign, "$players_oath_renounced_terms_state", 1),
			(else_try),
				(str_store_string, 11, "@A pardon will only be possible if you are willing to cede {s17} to me. Do you agree my terms?"),
				(assign, "$players_oath_renounced_terms_state", 2),
			(try_end),
		(else_try),
			(str_store_string, 11, "@No. There is no chance of peace between us, I am not interested."),
			(assign, "$players_oath_renounced_terms_state", 0),
		(try_end)
	],
	"{s11}.", "lord_ask_pardon_terms",
	[]],

	[anyone|plyr, "lord_ask_pardon_terms",
	[
		(eq, "$players_oath_renounced_terms_state", 0)
	],
	"As you like, {s65}. I will accept your judgment.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_ask_pardon_terms",
	[
		(eq, "$players_oath_renounced_terms_state", 0)
	],
	"A shame, {s65}. A shame.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_ask_pardon_terms",
	[
		(eq, "$players_oath_renounced_terms_state", 0)
	],
	"Very well, go and die without me.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_ask_pardon_terms",
	[
		(eq, "$players_oath_renounced_terms_state", 1)
	],
	"Aye, I am ready.", "lord_ask_pardon_after_renounce_peace",
	[]],

	[anyone|plyr, "lord_ask_pardon_terms",
	[
		(eq, "$players_oath_renounced_terms_state", 1)
	],
	"On second thought, no. I don't wish to be in your service again.", "lord_ask_pardon_terms_rejected",
	[]],

	[anyone|plyr, "lord_ask_pardon_terms",
	[
		(eq, "$players_oath_renounced_terms_state", 2)
	],
	"Aye, I agree to those terms.", "lord_ask_pardon_after_renounce_peace",
	[]],

	[anyone|plyr, "lord_ask_pardon_terms",
	[
		(eq, "$players_oath_renounced_terms_state", 2)
	],
	"That is too high a price, {s65}. I must decline.", "lord_ask_pardon_terms_rejected",
	[]],

	[anyone, "lord_ask_pardon_after_renounce_peace",
	[],
	"Excellent. Though you strayed from us, {playername}, it gladdens all our hearts that you have found your way back to the right path. I hereby restore your homage to me. Rise once more as an honoured {man/warrior} in my service.", "lord_pretalk",
	[
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(party_slot_eq, ":party", slot_center_faction_when_oath_renounced, "$g_talk_troop_faction"),
			(neq, ":party", "$players_oath_renounced_given_center"),
			(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
			(try_begin),
				(ge, ":party_town_lord", 1),
				(call_script, "script_change_player_relation_with_troop", ":party_town_lord", -10),
			(try_end),
			(call_script, "script_give_center_to_faction", ":party", "$g_talk_troop_faction"),
		(try_end),
		(call_script, "script_player_join_faction", "$g_talk_troop_faction"),
		(assign, "$player_has_homage", 1),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 3)
	]],

	[anyone, "lord_ask_pardon_terms_rejected",
	[],
	"Then get out of my sight, traitor! Begone with you, and do not come back!", "close_window",
	[
		(assign, "$g_leave_encounter", 1),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -5)
	]],

	[anyone|plyr, "lord_talk",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(lt, "$g_talk_troop_faction_relation", 0),
		(assign, ":value", 0),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", 1),
		(try_end),
		(store_relation, ":relation_g_talk_troop_faction_players_kingdom", "$g_talk_troop_faction", "$players_kingdom"),
		(this_or_next|ge, ":relation_g_talk_troop_faction_players_kingdom", 0),
		(this_or_next|eq, "$players_kingdom", 0),
		(this_or_next|eq, ":value", 1),
		(eq, "$players_kingdom", "fac_player_supporters_faction"),
		(neq, "$players_oath_renounced_against_kingdom", "$g_talk_troop_faction"),
		(assign, ":value_2", 1),
		(try_begin),
			(gt, "$supported_pretender", 0),
			(eq, "$supported_pretender_old_faction", "$g_talk_troop_faction"),
			(assign, ":value_2", 0),
		(try_end),
		(eq, ":value_2", 1),
		(is_between, "$g_talk_troop_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(try_begin),
			(eq, ":value", 1),
			(assign, "$temp_2", 4411218),
		(else_try),
			(assign, "$temp_2", 0),
		(try_end),
		(str_store_faction_name, 4, "$g_talk_troop_faction")
	],
	"I wish to make peace with {s4}.", "lord_ask_pardon",
	[]],

	[anyone, "lord_ask_pardon",
	[
		(lt, "$g_talk_troop_relation", -10)
	],
	"Do you indeed, {playername}? Then go and trip on your sword. Give us all peace.", "lord_pretalk",
	[]],

	[anyone, "lord_ask_pardon",
	[
		(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1),
		(lt, "$player_right_to_rule", 10)
	],
	"{playername}, you are a {lord/lady} without a master, holding lands in your name, with only the barest scrap of a claim to legitimacy. No king in this world would accept a lasting peace with you.", "lord_pretalk",
	[]],

	[anyone, "lord_ask_pardon",
	[
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|eq, "$temp_2", 4411218),
		(eq, ":value", 1),
		(encountered_party_is_attacker)
	],
	"Make peace when I have you at an advantage? I think not.", "lord_pretalk",
	[]],

	[anyone, "lord_ask_pardon",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|eq, "$temp_2", 4411218),
		(eq, ":value", 1),
		(call_script, "script_npc_decision_checklist_peace_or_war", "$g_encountered_party_faction", "fac_player_supporters_faction", "trp_player"),
		(assign, "$temp", reg0),
		(lt, reg0, -2)
	],
	"I do not see it as being in my current interest to make peace, and have no interest in negotiations.", "lord_pretalk",
	[]],

	[anyone, "lord_ask_pardon",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(assign, ":var_1", "$temp"),
		(lt, ":var_1", 1),
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(assign, ":value", 1),
		(try_end),
		(try_begin),
			(eq, "$temp_2", 4411218),
			(assign, ":value_2", 1),
		(else_try),
			(assign, ":value_2", 0),
		(try_end),
		(this_or_next|eq, ":value_2", 1),
		(eq, ":value", 1),
		(call_script, "script_dplmc_get_truce_pay_amount", "fac_player_supporters_faction", "$g_talk_troop_faction", ":var_1"),
		(assign, ":var_6", reg0),
		(assign, ":var_7", reg1),
		(assign, "$temp", ":var_6"),
		(assign, "$temp_2", ":var_7"),
		(assign, reg0, -1),
		(try_begin),
			(is_between, "$g_concession_demanded", "p_town_1", "p_salt_mine"),
			(store_faction_of_party, ":faction_of_party_g_concession_demanded", "$g_concession_demanded"),
			(assign, ":value_3", "fac_player_supporters_faction"),
			(try_begin),
				(eq, ":value_2", 1),
				(assign, ":value_3", "$players_kingdom"),
			(try_end),
			(this_or_next|eq, ":faction_of_party_g_concession_demanded", ":value_3"),
			(eq, ":faction_of_party_g_concession_demanded", "fac_player_supporters_faction"),
			(assign, reg0, 1),
		(try_end),
		(this_or_next|ge, ":var_6", 1),
		(eq, reg0, 1),
		(try_begin),
			(neq, reg0, 1),
			(assign, reg1, ":var_6"),
			(str_store_string, 0, "str_reg1_denars"),
		(else_try),
			(ge, ":var_7", 1),
			(str_store_party_name, 0, "$g_concession_demanded"),
			(assign, reg1, ":var_7"),
			(str_store_string, 1, "str_reg1_denars"),
			(str_store_string, 0, "str_dplmc_s0_and_s1"),
		(else_try),
			(str_store_party_name, 0, "$g_concession_demanded"),
		(try_end)
	],
	"As things stand I do not see it as being in my current interest to make peace, but if you were to hand over {s0} I would be willing to agree to a truce of twenty days.", "dplmc_lord_ask_pardon_ruler_1",
	[]],

	[anyone|plyr, "dplmc_lord_ask_pardon_ruler_1",
	[
		(assign, ":value", 0),
		(assign, ":var_2", "$temp"),
		(assign, ":var_3", "$temp_2"),
		(assign, ":value_2", 0),
		(try_begin),
			(ge, ":var_3", 1),
			(ge, "$g_concession_demanded", 1),
			(str_store_party_name, 0, "$g_concession_demanded"),
			(assign, reg1, ":var_3"),
			(str_store_string, 1, "str_reg1_denars"),
			(str_store_string, 0, "str_dplmc_s0_and_s1"),
			(assign, ":value_2", ":var_3"),
			(assign, ":value", 1),
		(else_try),
			(ge, "$g_concession_demanded", 1),
			(str_store_party_name, 0, "$g_concession_demanded"),
			(assign, ":value_2", 0),
			(assign, ":value", 1),
		(else_try),
			(neq, reg0, 1),
			(assign, reg1, ":var_2"),
			(str_store_string, 0, "str_reg1_denars"),
			(assign, ":value", 1),
			(assign, ":value_2", ":var_2"),
		(try_end),
		(assign, "$temp", ":value"),
		(assign, "$temp_2", ":value_2"),
		(eq, ":value", 1),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", ":value_2")
	],
	"I accept.  I will give you {s0}, and let there be peace.", "close_window",
	[
		(assign, ":var_1", "$temp_2"),
		(troop_remove_gold, "trp_player", ":var_1"),
		(call_script, "script_dplmc_faction_leader_splits_gold", "$g_talk_troop_faction", ":var_1"),
		(try_begin),
			(ge, "$g_concession_demanded", 1),
			(call_script, "script_give_center_to_faction", "$g_concession_demanded", "$g_talk_troop_faction"),
		(try_end),
		(call_script, "script_diplomacy_start_peace_between_kingdoms", "$g_talk_troop_faction", "$players_kingdom", 1),
		(eq, "$talk_context", 2),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "dplmc_lord_ask_pardon_ruler_1",
	[
		(assign, ":var_1", "$temp"),
		(assign, ":var_2", "$temp_2"),
		(eq, ":var_1", 1),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(lt, ":troop_gold_player", ":var_2"),
		(assign, reg1, ":var_2"),
		(str_store_string, 0, "str_reg1_denars")
	],
	"I don't have {s0} with me.", "dplmc_lord_ask_pardon_ruler_2a",
	[]],

	[anyone, "dplmc_lord_ask_pardon_ruler_2a",
	[],
	"In that case, the war will continue.", "lord_pretalk",
	[]],

	[anyone|plyr, "dplmc_lord_ask_pardon_ruler_1",
	[],
	"On second thought, such an accord would not be in my interests.", "lord_pretalk",
	[]],

	[anyone, "lord_ask_pardon",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(assign, ":value", 1),
		(try_end),
		(assign, ":value_2", 0),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value_2", 1),
			(assign, "$temp_2", 4411218),
		(else_try),
			(assign, "$temp_2", 0),
		(try_end),
		(this_or_next|eq, ":value_2", 1),
		(eq, ":value", 1)
	],
	"Yes... I am weary of fighting you. I could offer you a truce of twenty days. If you keep your word and do not molest my lands and subjects, we may talk again...", "lord_truce_offer",
	[]],

	[anyone|plyr, "lord_truce_offer",
	[],
	"I accept. Let us stop making war upon each other, for the time being anyway", "close_window",
	[
		(call_script, "script_diplomacy_start_peace_between_kingdoms", "$g_encountered_party_faction", "$players_kingdom", 1),
		(eq, "$talk_context", 2),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "lord_truce_offer",
	[],
	"On second thought, such an accord would not be in my interests.", "lord_pretalk",
	[]],

	[anyone, "lord_ask_pardon",
	[
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
		(assign, ":value", 0),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(eq, ":faction_of_party_party", "fac_player_supporters_faction"),
			(assign, ":value", 1),
		(try_end),
		(neq, "$temp_2", 4411218),
		(eq, ":value", 0),
		(store_sub, ":value_2", 4, "$g_talk_troop_faction_relation"),
		(val_mul, ":value_2", ":value_2"),
		(store_mul, reg16, ":value_2", 10),
		(str_store_faction_name, 4, "$g_talk_troop_faction")
	],
	"Hmm. I could use my considerable influence to arrange a pardon for you, {playername}, but there are some who see you as an enemy and will not be satisfied unless you pay tribute. All in all, you'd need to bring no less than {reg16} coins to make any friends in {s4}.", "lord_ask_pardon_2",
	[]],

	[anyone, "lord_ask_pardon",
	[
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(neq, "$g_talk_troop", ":g_talk_troop_faction_leader"),
		(str_store_troop_name, 7, ":g_talk_troop_faction_leader")
	],
	"I am in no position to offer you anything. You must speak to {s7}.", "lord_pretalk",
	[]],

	[anyone, "lord_ask_pardon",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(neq, "$temp_2", 4411218),
		(neg|faction_slot_ge, "fac_player_supporters_faction", 11, 1),
		(store_sub, ":value", 4, "$g_talk_troop_faction_relation"),
		(val_mul, ":value", ":value"),
		(store_mul, reg16, ":value", 10),
		(str_store_faction_name, 4, "$g_talk_troop_faction")
	],
	"Yes... I have bigger worries than you or your followers. However, you have wronged my subjects, and wrongs demand compensation. For the sum of {reg16} coins, I suppose that I could agree to grant you a pardon. What do you say?", "lord_ask_pardon_2",
	[]],

	[anyone, "lord_ask_pardon",
	[],
	"I am sorry. I am in no position to offer you a pardon", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_ask_pardon_2",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", reg16)
	],
	"I have the money here. {reg16} coins.", "lord_ask_pardon_tribue_accept",
	[]],

	[anyone|plyr, "lord_ask_pardon_2",
	[],
	"I fear I cannot pay that much.", "lord_ask_pardon_tribue_deny",
	[]],

	[anyone, "lord_ask_pardon_tribue_accept",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop")
	],
	"Excellent, {playername}. I will use this to make amends to those you have wronged, and I will let it be known that you are no longer an enemy of the {s4}.", "close_window",
	[
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(try_begin),
			(eq, ":g_talk_troop_faction_leader", "$g_talk_troop"),
			(call_script, "script_dplmc_faction_leader_splits_gold", "$g_talk_troop_faction", reg16),
		(else_try),
			(store_div, ":value", reg16, 2),
			(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", ":value", "$g_talk_troop"),
			(store_sub, ":value", reg16, ":value"),
			(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", ":value", ":g_talk_troop_faction_leader"),
		(try_end),
		(troop_remove_gold, "trp_player", reg16),
		(store_relation, ":relation_g_talk_troop_faction_players_kingdom", "$g_talk_troop_faction", "$players_kingdom"),
		(try_begin),
			(this_or_next|eq, "$players_kingdom", 0),
			(ge, ":relation_g_talk_troop_faction_players_kingdom", 0),
			(call_script, "script_set_player_relation_with_faction", "$g_talk_troop_faction", 0),
		(try_end),
		(assign, "$g_leave_town_outside", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_ask_pardon_tribue_accept",
	[],
	"Excellent, {playername}. I'll use the coin to smooth the feathers of those that can oppose your pardon, and I'm sure that word will soon spread that you are no longer an enemy of {s4}.", "close_window",
	[
		(try_begin),
			(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
			(store_div, ":value", reg16, 20),
			(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", ":value", "$g_talk_troop"),
			(assign, ":var_2", reg16),
			(val_sub, ":var_2", ":value"),
		(try_end),
		(call_script, "script_dplmc_faction_leader_splits_gold", "$g_talk_troop_faction", ":var_2"),
		(troop_remove_gold, "trp_player", reg16),
		(store_relation, ":relation_g_talk_troop_faction_players_kingdom", "$g_talk_troop_faction", "$players_kingdom"),
		(try_begin),
			(this_or_next|eq, "$players_kingdom", 0),
			(ge, ":relation_g_talk_troop_faction_players_kingdom", 0),
			(call_script, "script_set_player_relation_with_faction", "$g_talk_troop_faction", 0),
		(else_try),
			(call_script, "script_diplomacy_start_peace_between_kingdoms", "$g_talk_troop_faction", "$players_kingdom", 1),
		(try_end),
		(assign, "$g_leave_town_outside", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_ask_pardon_tribue_deny",
	[],
	"Then there's nothing I can do for you, {playername}. No silver, no pardon.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(store_partner_quest, ":partner_quest"),
		(ge, ":partner_quest", 0)
	],
	"About the task you gave me...", "lord_active_mission_1",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(neg|troop_slot_eq, "trp_player", slot_troop_spouse, -1),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop")
	],
	"Let us discuss matters related to our household.", "lord_switch_to_spouse",
	[]],

	[anyone, "lord_switch_to_spouse",
	[
		(assign, ":value", -1),
		(try_begin),
			(is_between, "$current_town", "p_town_1", "p_village_1"),
			(this_or_next|party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
			(party_slot_eq, "$current_town", slot_town_lord, "$g_talk_troop"),
			(assign, ":value", "$current_town"),
		(else_try),
			(try_for_range, ":party", "p_town_1", "p_village_1"),
				(eq, ":value", -1),
				(this_or_next|party_slot_eq, ":party", slot_town_lord, "trp_player"),
				(party_slot_eq, ":party", slot_town_lord, "$g_talk_troop"),
				(assign, ":value", ":party"),
			(try_end),
			(is_between, ":value", "p_town_1", "p_village_1"),
		(else_try),
			(is_between, "$current_town", "p_town_1", "p_village_1"),
			(assign, ":value", "$current_town"),
		(try_end),
		(neg|is_between, ":value", "p_town_1", "p_village_1"),
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"Let us wait until we are in a hall, {s0}, as it is difficult to deal with household inventories and such matters in the field.", "lord_pretalk",
	[]],

	[anyone, "lord_switch_to_spouse",
	[
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"Certainly, {s0}", "spouse_talk",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$freelancer_state", 0),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(ge, "$g_talk_troop_faction_relation", 0),
		(store_partner_quest, ":partner_quest"),
		(lt, ":partner_quest", 0),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "trp_player"),
		(neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop")
	],
	"Do you have any tasks for me?", "lord_request_mission_ask",
	[]],

	[plyr|trp_kingdom_8_lord, "lord_talk",
	[
		(eq, "$g_war_of_five_kings", 1),
		(party_slot_eq, "p_town_23", slot_town_lord, "trp_kingdom_8_lord"),
		(eq, "$g_renly_quest", 0),
		(eq, "$players_kingdom", "fac_kingdom_8")
	],
	"My lord, what will you do about Renly?", "wildfire_talk2",
	[]],

	[trp_kingdom_8_lord, "wildfire_talk2",
	[],
	"What has Renly ever done to earn a throne? He sits in council and jests with Littlefinger, and at tourneys he dons his splendid suit of armor and allows himself to be knocked off his horse by a better man. That is the sum of my brother Renly, who wants to be king. It is not a question of wanting.", "wildfire_talk3",
	[]],

	[trp_kingdom_8_lord, "wildfire_talk3",
	[],
	"The throne is mine, as Robert's heir. That is law. After me, it must pass to my daughter, unless Selyse should finally give me a son. I am king. Wants do not enter into it. I have a duty to my daughter. To the realm. Even to Robert. He loved me but little, I know, yet he was my brother. The Lannister woman gave him horns and made a motley fool of him. She may have murdered him as well, as she murdered Jon Arryn and Ned Stark. For such crimes there must be justice. I mean to scour King's Landing clean, to bring justice to lord and peasant alike, and for that I must sit the Iron Throne.", "wildfire_talk5",
	[]],

	[plyr|trp_kingdom_8_lord, "wildfire_talk5",
	[],
	"How can I be of service, my lord?", "wildfire_talk6",
	[]],

	[trp_kingdom_8_lord, "wildfire_talk6",
	[],
	"How indeed. The lady Melisandre looked into the fires, and saw a way for me to regain my rightful seat. Talk to her, {playername}. Find a way to bring justice to my Seven Kingdoms.", "lord_pretalk",
	[
		(setup_quest_text, "qst_renly_quest_1"),
		(str_store_string, 2, "@Visit the red priestess, Melisandre. You can find her lighting fires on the shores of the island of Dragonstone."),
		(call_script, "script_start_quest", "qst_renly_quest_1", "$g_talk_troop"),
		(assign, "$g_renly_quest", 1),
		(enable_party, "p_renly_quest_shore")
	]],

	[plyr|trp_knight_8_3, "lord_talk",
	[
		(check_quest_active, "qst_renly_quest_2"),
		(party_slot_eq, "p_town_23", slot_town_lord, "trp_kingdom_8_lord"),
		(eq, "$players_kingdom", "fac_kingdom_8")
	],
	"Ser Davos, I need help getting into Storm's End.", "wildfire_talk2",
	[]],

	[trp_knight_8_3, "wildfire_talk2",
	[],
	"Why, {playername}? Anyone can walk up to the gates and enter amidst the crowd of smallfolk always doing business inside the castle during the day. Unless, that is, you're accompanying someone who would never pass for a peasant.", "wildfire_talk3",
	[]],

	[trp_knight_8_3, "wildfire_talk3",
	[],
	"I know the seas and rivers, the shapes of the coasts along the Narrow Sea. I know hidden coves where boats can land unseen, and once I dared the storms to deliver a ship with onions to a castle. I think I can guess who you want me to deliver to Storm's End. The king is under her spell, {playername}, and perhaps you are too, but it is an evil thing you're doing.", "wildfire_talk5",
	[]],

	[plyr|trp_knight_8_3, "wildfire_talk5",
	[],
	"Will you help me?", "wildfire_talk6",
	[]],

	[trp_knight_8_3, "wildfire_talk6",
	[],
	"I do as my king commands. But king Stannis' brother is no fool, and will have posted guards to overlook the cavern underneath Storm's End. I will send my eldest son Dale in a fast ship, carrying the Red Woman, to wait beyond the horizon of Shipbreaker's Bay. In the meantime, I need you to create a diversion that will have the guards looking elsewhere, while Dale ferries the Red Woman into the cavern. What happens after that, I want no part of.", "wildfire_talk7",
	[]],

	[trp_knight_8_3, "wildfire_talk7",
	[],
	"Close to Storm's End lies the Rainwood. A fire engulfing that should be more than enough to draw the attention of every man, woman and child in the castle away from their duties. The part of the forest closest to the castle is the private hunting ground of the Lord of Storm's End, and no one lives there, but lighting it on fire won't be easy. The Rainwood is not a dry forest. You'll need to bring a lot of oil, and pitch, and soak the trees in the stuff before you try and start a fire. Once that is done, and the forest is engulfed, Dale will play his part.", "lord_pretalk",
	[
		(call_script, "script_end_quest", "qst_renly_quest_2"),
		(setup_quest_text, "qst_renly_quest_3"),
		(str_store_string, 2, "@Ser Davos proposed a plan where you start a fire in the Rainwood, the wood close to Storm's End. Once that is done, his eldest son Dale will ferry Melisandre into the watery passage beneath Storm's End while the defenders attention are elsewhere. You'll need 1 Jar of Oil and 10 Barrels of Pitch to set the Rainwood on fire. Barrels of Pitch can be bought in Gulltown."),
		(call_script, "script_start_quest", "qst_renly_quest_3", "$g_talk_troop"),
		(enable_party, "p_renly_quest_rainwood"),
		(enable_party, "p_renly_quest_rainwood_fire_1"),
		(enable_party, "p_renly_quest_rainwood_fire_2"),
		(enable_party, "p_renly_quest_rainwood_fire_3"),
		(enable_party, "p_renly_quest_rainwood_fire_4")
	]],

	[plyr|trp_kingdom_8_lord, "lord_talk",
	[
		(check_quest_active, "qst_renly_quest_5"),
		(eq, "$g_war_of_five_kings", 1),
		(party_slot_eq, "p_town_23", slot_town_lord, "trp_kingdom_8_lord"),
		(eq, "$players_kingdom", "fac_kingdom_8")
	],
	"My lord, how can I serve you?", "stannis_talk_2",
	[]],

	[trp_kingdom_8_lord, "stannis_talk_2",
	[],
	"{playername}. Renly still lives. Perhaps that is for the best. You did a brave thing. Melisandre talks of Azor Ahai, of a champion of light. I never asked for this, no more than I asked to be king. Yet dare I disregard her? We do not choose our destinies. Yet we must ... we must do our duty, no? Great or small, we must do our duty.", "stannis_talk_3",
	[]],

	[trp_kingdom_8_lord, "stannis_talk_3",
	[],
	"These pardoned lords would do well to reflect on that. Good men and true will fight for Joffrey, wrongly believing him the true king. A northman might even say the same of Robb Stark. But these lords who flocked to my brother�s banners knew him for a usurper. They turned their backs on their rightful king for no better reason than dreams of power and glory, and I have marked them for what they are. Pardoned them, yes. Forgiven. But not forgotten.", "stannis_talk_4",
	[]],

	[plyr|trp_kingdom_8_lord, "stannis_talk_4",
	[],
	"What do you mean, my lord?", "stannis_talk_5",
	[]],

	[trp_kingdom_8_lord, "stannis_talk_5",
	[],
	"Every man shall reap what he has sown, from the highest lord to the lowest gutter rat. And some will lose more than the tips off their fingers, I promise you. They have made my kingdom bleed, and I do not forget that.", "lord_pretalk",
	[
		(call_script, "script_change_player_relation_with_troop", "trp_kingdom_8_lord", 15),
		(call_script, "script_change_player_relation_with_troop", "trp_knight_8_3", 15),
		(add_xp_as_reward, 5000),
		(call_script, "script_end_quest", "qst_renly_quest_5")
	]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$g_talk_troop_faction", "$players_kingdom"),
		(eq, "$player_has_homage", 1),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "trp_player"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop")
	],
	"Do you think we can work together to advance our standings in this realm?", "combined_political_quests",
	[
		(call_script, "script_get_political_quest", "$g_talk_troop"),
		(assign, "$political_quest_found", reg0),
		(assign, "$political_quest_target_troop", reg1),
		(assign, "$political_quest_object_troop", reg2)
	]],

	[anyone, "combined_political_quests",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(lt, "$g_talk_troop_effective_relation", -5),
		(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
		(lt, reg0, 1)
	],
	"I do not imagine that you and I have many mutual interests.", "lord_pretalk",
	[]],

	[anyone, "combined_political_quests",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(gt, "$political_quest_found", 0),
		(assign, ":value", 1),
		(try_begin),
			(call_script, "script_cf_troop_can_intrigue", "$g_talk_troop", 1),
			(assign, ":value", 0),
		(try_end),
		(eq, ":value", 1)
	],
	"Hmm.. Perhaps we can discuss this matter in a more private setting, at a later date.", "lord_pretalk",
	[]],

	[anyone, "combined_political_quests",
	[
		(this_or_next|eq, "$political_quest_found", "qst_intrigue_against_lord"),
		(eq, "$political_quest_found", "qst_denounce_lord"),
		(troop_slot_ge, "trp_player", 150, 30),
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 8, 0)
	],
	"Hmm.. I do have an idea, but it would require you that you be free of controversy. If you were to wait some time without getting into any arguments with the other {s0} of our realm, perhaps we could proceed further.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(le, "$talk_context", 2),
		(faction_slot_eq, "$players_kingdom", slot_faction_leader, "$g_talk_troop"),
		(faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player")
	],
	"I wish to resign the marshalship", "lord_ask_resign_marshalship",
	[]],

	[anyone, "lord_ask_resign_marshalship",
	[],
	"So be it. I shall have to find someone else.", "lord_pretalk",
	[
		(assign, ":var_1", "$players_kingdom"),
		(faction_set_slot, ":var_1", slot_faction_political_issue, 1),
		(store_current_hours, ":current_hours"),
		(val_max, ":current_hours", 0),
		(faction_set_slot, ":var_1", slot_faction_political_issue_time, ":current_hours"),
		(faction_get_slot, ":var_1_marshall", ":var_1", slot_faction_marshall),
		(try_begin),
			(ge, ":var_1_marshall", 0),
			(troop_get_slot, ":var_1_marshall_leaded_party", ":var_1_marshall", slot_troop_leaded_party),
			(party_is_active, ":var_1_marshall_leaded_party"),
			(party_set_marshall, ":var_1_marshall_leaded_party", 0),
		(try_end),
		(faction_set_slot, ":var_1", slot_faction_marshall, -1),
		(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(eq, ":faction_of_troop_troop", ":var_1"),
			(troop_set_slot, ":troop", slot_troop_stance_on_faction_issue, -1),
		(try_end),
		(try_begin),
			(eq, "$players_kingdom", ":var_1"),
			(troop_set_slot, "trp_player", slot_troop_stance_on_faction_issue, -1),
		(try_end),
		(call_script, "script_add_notification_menu", "mnu_notification_relieved_as_marshal", 0, 0)
	]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$freelancer_state", 0),
		(le, "$talk_context", 2),
		(ge, "$g_talk_troop_faction_relation", 0),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(neq, "$players_kingdom", "$g_talk_troop_faction"),
		(store_partner_quest, ":partner_quest"),
		(neq, ":partner_quest", "qst_join_faction")
	],
	"{s66}, I have come to offer you my sword in vassalage!", "lord_ask_enter_service",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$freelancer_state", 0),
		(le, "$talk_context", 2),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(eq, "$players_kingdom", "$g_talk_troop_faction"),
		(eq, "$player_has_homage", 0),
		(store_partner_quest, ":partner_quest"),
		(neq, ":partner_quest", "qst_join_faction")
	],
	"{s66}, I wish to become your sworn {man/woman} and fight for your honour.", "lord_ask_enter_service",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(le, "$talk_context", 2),
		(ge, "$g_talk_troop_faction_relation", 0),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(eq, "$players_kingdom", "$g_talk_troop_faction"),
		(eq, "$player_has_homage", 1),
		(neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$g_talk_troop_faction"),
		(lt, reg0, 50)
	],
	"{s66}, I wish to be released from my oath to you.", "lord_ask_leave_service",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(eq, 1, 0),
		(le, "$talk_context", 2),
		(ge, "$g_talk_troop_faction_relation", 0)
	],
	"I have an offer for you.", "lord_talk_preoffer",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(ge, "$g_talk_troop_faction_relation", 0),
		(troop_get_slot, ":g_talk_troop_leaded_party", "$g_talk_troop", slot_troop_leaded_party),
		(ge, ":g_talk_troop_leaded_party", 1),
		(party_get_attached_to, ":attached_to_g_talk_troop_leaded_party", ":g_talk_troop_leaded_party"),
		(lt, ":attached_to_g_talk_troop_leaded_party", 0),
		(call_script, "script_dplmc_player_can_give_troops_to_troop", "$g_talk_troop"),
		(ge, reg0, 1)
	],
	"I want to give some troops to you.", "lord_give_troops",
	[]],

	[anyone, "lord_give_troops",
	[
		(call_script, "script_party_get_ideal_size", "$g_talk_troop_party"),
		(assign, ":var_1", reg0),
		(game_get_reduce_campaign_ai, ":game_reduce_campaign_ai"),
		(try_begin),
			(le, ":game_reduce_campaign_ai", 0),
			(val_mul, ":var_1", 3),
			(val_add, ":var_1", 1),
			(val_div, ":var_1", 2),
			(val_max, ":var_1", 100),
		(else_try),
			(eq, ":game_reduce_campaign_ai", 1),
			(val_mul, ":var_1", 2),
			(val_max, ":var_1", 150),
		(else_try),
			(ge, ":game_reduce_campaign_ai", 2),
			(val_mul, ":var_1", 5),
			(val_add, ":var_1", 1),
			(val_div, ":var_1", 2),
			(val_max, ":var_1", 200),
		(try_end),
		(store_party_size_wo_prisoners, ":party_size_wo_prisoners_g_talk_troop_party", "$g_talk_troop_party"),
		(ge, ":party_size_wo_prisoners_g_talk_troop_party", ":var_1")
	],
	"I can't accomodate any more {reg65?men:soldiers} right now.  My supply lines are overtaxed as it is.", "lord_pretalk",
	[]],

	[anyone, "lord_give_troops",
	[
		(call_script, "script_party_get_ideal_size", "$g_talk_troop_party"),
		(assign, ":var_1", reg0),
		(store_party_size_wo_prisoners, ":party_size_wo_prisoners_g_talk_troop_party", "$g_talk_troop_party"),
		(gt, ":party_size_wo_prisoners_g_talk_troop_party", ":var_1")
	],
	"I have plenty of soldiers at the moment, but I suppose I could accomodate a few more.", "lord_pretalk",
	[
		(change_screen_give_members, "$g_talk_troop_party")
	]],

	[anyone, "lord_give_troops",
	[
		(troop_get_slot, ":g_talk_troop_leaded_party", "$g_talk_troop", slot_troop_leaded_party),
		(call_script, "script_party_copy", "p_temp_party", ":g_talk_troop_leaded_party"),
		(call_script, "script_process_outlaws_for_party", "p_temp_party")
	],
	"Well, I could use some good soldiers.", "lord_give_troops_1",
	[
		(change_screen_give_members)
	]],

	[anyone, "lord_give_troops_1",
	[],
	"Thank you.", "lord_give_troops_2",
	[]],

	[anyone|plyr, "lord_give_troops_2",
	[
		(troop_get_slot, ":g_talk_troop_leaded_party", "$g_talk_troop", slot_troop_leaded_party),
		(call_script, "script_party_copy", "p_temp_party_2", ":g_talk_troop_leaded_party"),
		(call_script, "script_process_outlaws_for_party", "p_temp_party_2")
	],
	"It's my pleasure to do this.", "lord_pretalk",
	[
		(call_script, "script_party_calculate_strength", "p_temp_party", 0),
		(assign, ":var_1", reg0),
		(call_script, "script_party_calculate_strength", "p_temp_party_2", 0),
		(assign, ":var_2", reg0),
		(store_sub, ":value", ":var_2", ":var_1"),
		(val_div, ":value", 50),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", ":value")
	]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$g_talk_troop_faction", "$players_kingdom"),
		(faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"I have a new task for you.", "lord_give_order_ask",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$g_talk_troop_faction", "$players_kingdom"),
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"May I suggest a course of action?", "lord_give_suggestion_ask",
	[]],

	[anyone, "lord_give_order_ask",
	[],
	"Yes?", "lord_give_order",
	[]],

	[anyone, "lord_give_suggestion_ask",
	[
		(faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player")
	],
	"I will gladly follow your direction, {my lord/your Highness}. If you intend to direct an extensive campaign, however, you may also wish to declare yourself marshal, so there is no cause for confusion.", "lord_give_order",
	[]],

	[anyone, "lord_give_suggestion_ask",
	[
		(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
		(lt, reg0, 1),
		(lt, "$g_talk_troop_effective_relation", 5)
	],
	"My apologies. I don't know you well enough to take your advice.", "lord_pretalk",
	[]],

	[anyone, "lord_give_suggestion_ask",
	[],
	"What is it?", "lord_give_order",
	[]],

	[anyone|plyr, "lord_give_order",
	[
		(faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player")
	],
	"Follow me.", "lord_give_order_answer",
	[
		(assign, "$temp", 11),
		(assign, "$temp_2", "p_main_party"),
		(store_current_hours, ":current_hours"),
		(party_set_slot, "$g_talk_troop_party", 261, "trp_kingdom_heroes_including_player_begin"),
		(party_set_slot, "$g_talk_troop_party", 262, "$temp"),
		(party_set_slot, "$g_talk_troop_party", 263, "$temp_2"),
		(party_set_slot, "$g_talk_troop_party", 264, ":current_hours")
	]],

	[anyone|plyr, "lord_give_order",
	[
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player")
	],
	"Will you follow me? I have a plan...", "lord_give_order_answer",
	[
		(assign, "$temp", 11),
		(assign, "$temp_2", "p_main_party"),
		(store_current_hours, ":current_hours"),
		(party_set_slot, "$g_talk_troop_party", 261, "trp_kingdom_heroes_including_player_begin"),
		(party_set_slot, "$g_talk_troop_party", 262, "$temp"),
		(party_set_slot, "$g_talk_troop_party", 263, "$temp_2"),
		(party_set_slot, "$g_talk_troop_party", 264, ":current_hours")
	]],

	[anyone|plyr, "lord_give_order",
	[
		(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
		(this_or_next|ge, reg0, 1),
		(this_or_next|faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player"),
		(faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player")
	],
	"Go to...", "lord_give_order_details_ask",
	[
		(assign, "$temp", 7)
	]],

	[anyone|plyr, "lord_give_order",
	[
		(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
		(this_or_next|ge, reg0, 1),
		(this_or_next|faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player"),
		(faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player")
	],
	"Raid around the village of...", "lord_give_order_details_ask",
	[
		(assign, "$temp", 5)
	]],

	[anyone|plyr, "lord_give_order",
	[
		(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
		(this_or_next|ge, reg0, 1),
		(this_or_next|faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player"),
		(faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player")
	],
	"Patrol around...", "lord_give_order_details_ask",
	[
		(assign, "$temp", 4)
	]],

	[anyone|plyr, "lord_give_order",
	[
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 1),
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(party_slot_eq, ":g_talk_troop_party_ai_object", slot_center_is_besieged_by, "$g_talk_troop_party"),
		(party_slot_eq, ":g_talk_troop_party_ai_object", slot_village_state, 5),
		(str_store_party_name, 11, ":g_talk_troop_party_ai_object")
	],
	"Together, you and I can take {s11}. You should assault immediately...", "lord_give_order_assault",
	[]],

	[anyone|plyr, "lord_give_order",
	[
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player")
	],
	"We are under attack, but the enemy can be repulsed. You should ride towards...", "lord_give_order_details_ask",
	[
		(assign, "$temp", 4)
	]],

	[anyone|plyr, "lord_give_order",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_marshall, "$g_talk_troop")
	],
	"We are under attack, but the enemy can be repulsed. You should assemble the army and march to...", "lord_give_order_details_ask",
	[
		(assign, "$temp", 4)
	]],

	[anyone, "lord_give_order_assault",
	[
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(party_get_slot, ":g_talk_troop_party_ai_object_center_is_besieged_by", ":g_talk_troop_party_ai_object", slot_center_is_besieged_by),
		(neq, ":g_talk_troop_party_ai_object_center_is_besieged_by", "$g_talk_troop_party"),
		(party_stack_get_troop_id, ":party_stack_troop_id_g_talk_troop_party_ai_object_center_is_besieged_by_0", ":g_talk_troop_party_ai_object_center_is_besieged_by", 0),
		(str_store_troop_name, 4, ":party_stack_troop_id_g_talk_troop_party_ai_object_center_is_besieged_by_0"),
		(troop_get_type, reg4, ":party_stack_troop_id_g_talk_troop_party_ai_object_center_is_besieged_by_0"),
		(assign, reg4, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":party_stack_troop_id_g_talk_troop_party_ai_object_center_is_besieged_by_0"),
			(assign, reg4, 1),
		(try_end)
	],
	"{s4} is directing this siege. I suggest you speak to {reg4?her:him}", "lord_pretalk",
	[]],

	[anyone, "lord_give_order_assault",
	[
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(party_get_slot, ":g_talk_troop_party_ai_object_center_siege_begin_hours", ":g_talk_troop_party_ai_object", slot_center_siege_begin_hours),
		(store_current_hours, ":current_hours"),
		(store_sub, ":value", ":current_hours", ":g_talk_troop_party_ai_object_center_siege_begin_hours"),
		(try_begin),
			(assign, ":var_5", 9),
		(try_end),
		(val_sub, ":var_5", ":value"),
		(gt, ":var_5", 0),
		(try_begin),
			(gt, ":var_5", 1),
			(assign, reg3, ":var_5"),
			(str_store_string, 11, "str_reg3_hours"),
		(else_try),
			(str_store_string, 11, "str_hour"),
		(try_end)
	],
	"Our preparations are not yet ready. We need another {s11}", "lord_pretalk",
	[]],

	[anyone, "lord_give_order_assault",
	[],
	"Very well -- to the walls!", "close_window",
	[
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(call_script, "script_begin_assault_on_center", ":g_talk_troop_party_ai_object"),
		(party_set_slot, "$g_talk_troop_party", 266, 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "lord_give_order",
	[
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player")
	],
	"There is a fortress which can easily be taken. Go to..", "lord_give_order_details_ask",
	[
		(assign, "$temp", 1)
	]],

	[anyone|plyr, "lord_give_order",
	[],
	"The enemy is coming in force. Flee in the direction of...", "lord_give_order_details_ask",
	[
		(assign, "$temp", 14)
	]],

	[anyone|plyr, "lord_give_order",
	[
		(faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player")
	],
	"I won't need you for some time. You are free to do as you like.", "lord_give_order_stop",
	[]],

	[anyone|plyr, "lord_give_order",
	[
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 11),
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_object, "p_main_party")
	],
	"You no longer need to accompany me.", "lord_give_order_stop",
	[]],

	[anyone|plyr, "lord_give_order",
	[],
	"Never mind.", "lord_pretalk",
	[]],

	[anyone, "lord_give_order_details_ask",
	[
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
		(call_script, "script_dplmc_get_troop_morality_value", "$g_talk_troop", 1),
		(this_or_next|ge, reg0, 1),
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1),
		(eq, "$temp", 14)
	],
	"It is not my way to turn tail and run, without even laying eyes on the enemy.", "lord_pretalk",
	[]],

	[anyone, "lord_give_order_details_ask",
	[
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
		(eq, "$temp", 1)
	],
	"You want me to shed my blood outside a fortress while others stand by and watch? I think not.", "lord_pretalk",
	[]],

	[anyone, "lord_give_order_details_ask",
	[],
	"Where?", "lord_give_order_details",
	[]],

	[anyone|repeat_for_parties|plyr, "lord_give_order_details",
	[
		(store_repeat_object, ":repeat_object"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(store_relation, ":relation_faction_of_party_repeat_object_players_kingdom", ":faction_of_party_repeat_object", "$players_kingdom"),
		(assign, ":value", 0),
		(try_begin),
			(this_or_next|eq, "$temp", 14),
			(eq, "$temp", 7),
			(try_begin),
				(this_or_next|party_slot_eq, ":repeat_object", slot_party_type, 2),
				(party_slot_eq, ":repeat_object", slot_party_type, 3),
				(eq, ":faction_of_party_repeat_object", "$players_kingdom"),
				(assign, ":value", 1),
			(try_end),
		(else_try),
			(eq, "$temp", 5),
			(try_begin),
				(party_slot_eq, ":repeat_object", slot_party_type, 4),
				(lt, ":relation_faction_of_party_repeat_object_players_kingdom", 0),
				(assign, ":value", 1),
			(try_end),
		(else_try),
			(eq, "$temp", 1),
			(try_begin),
				(this_or_next|party_slot_eq, ":repeat_object", slot_party_type, 2),
				(party_slot_eq, ":repeat_object", slot_party_type, 3),
				(party_slot_eq, ":repeat_object", slot_center_is_besieged_by, -1),
				(lt, ":relation_faction_of_party_repeat_object_players_kingdom", 0),
				(assign, ":value", 1),
			(try_end),
		(else_try),
			(eq, "$temp", 4),
			(try_begin),
				(eq, ":faction_of_party_repeat_object", "$players_kingdom"),
				(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
				(assign, ":value", 1),
			(else_try),
				(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
				(store_distance_to_party_from_party, ":distance_to_party_from_party_repeat_object_main_party", ":repeat_object", "p_main_party"),
				(le, ":distance_to_party_from_party_repeat_object_main_party", 25),
				(assign, ":value", 1),
			(try_end),
		(try_end),
		(eq, ":value", 1),
		(neq, ":repeat_object", "$g_encountered_party"),
		(str_store_party_name, 1, ":repeat_object")
	],
	"{s1}", "lord_give_order_answer",
	[
		(store_repeat_object, "$temp_2"),
		(store_current_hours, ":current_hours"),
		(party_set_slot, "$g_talk_troop_party", 261, "trp_kingdom_heroes_including_player_begin"),
		(party_set_slot, "$g_talk_troop_party", 262, "$temp"),
		(party_set_slot, "$g_talk_troop_party", 263, "$temp_2"),
		(party_set_slot, "$g_talk_troop_party", 264, ":current_hours")
	]],

	[anyone|plyr, "lord_give_order_details",
	[],
	"Never mind.", "lord_pretalk",
	[]],

	[anyone, "lord_give_order_stop",
	[],
	"All right. I will stop here.", "lord_pretalk",
	[
		(party_set_slot, "$g_talk_troop_party", 262, -1),
		(party_set_slot, "$g_talk_troop_party", 263, -1),
		(store_current_hours, ":current_hours"),
		(val_sub, ":current_hours", 36),
		(val_max, ":current_hours", 0),
		(party_set_slot, "$g_talk_troop_party", 261, "trp_kingdom_heroes_including_player_begin"),
		(party_set_slot, "$g_talk_troop_party", 262, -1),
		(party_set_slot, "$g_talk_troop_party", 263, -1),
		(party_set_slot, "$g_talk_troop_party", 264, ":current_hours"),
		(troop_get_slot, ":g_talk_troop_leaded_party", "$g_talk_troop", slot_troop_leaded_party),
		(try_begin),
			(gt, ":g_talk_troop_leaded_party", 0),
			(call_script, "script_party_set_ai_state", ":g_talk_troop_leaded_party", -1, -1),
			(party_set_slot, ":g_talk_troop_leaded_party", slot_party_commander_party, -1),
		(try_end)
	]],

	[anyone, "lord_give_order_answer",
	[
		(eq, "$temp", 11),
		(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
		(lt, reg0, 1),
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_leader, "trp_player"),
		(call_script, "script_troop_get_player_relation", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(troop_get_slot, ":g_talk_troop_renown", "$g_talk_troop", slot_troop_renown),
		(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
		(try_begin),
			(lt, "$g_disable_condescending_comments", 0),
			(neq, reg65, "$character_gender"),
			(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", "$character_gender"),
			(neg|troop_slot_ge, "$g_talk_troop", 52, 8),
			(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
			(neg|is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
			(val_div, ":player_renown", 2),
		(try_end),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(store_div, ":value", ":var_1", 5),
		(val_min, ":value", 10),
		(store_add, ":value_2", ":value", ":skill_level_persuasion_player"),
		(store_sub, ":value_3", 20, ":value_2"),
		(val_mul, ":value_3", ":g_talk_troop_renown"),
		(val_div, ":value_3", 10),
		(this_or_next|lt, ":player_renown", ":value_3"),
		(lt, ":var_1", 0)
	],
	"That would hardly be proper. It would be more appropriate for you to follow me instead. Did you have any other ideas?", "lord_give_order",
	[
		(party_set_slot, "$g_talk_troop_party", 261, 0),
		(party_set_slot, "$g_talk_troop_party", 262, 0),
		(party_set_slot, "$g_talk_troop_party", 263, 0),
		(party_set_slot, "$g_talk_troop_party", 264, 0)
	]],

	[anyone, "lord_give_order_answer",
	[
		(call_script, "script_npc_decision_checklist_party_ai", "$g_talk_troop"),
		(eq, reg0, "$temp"),
		(eq, reg1, "$temp_2"),
		(str_clear, 12),
		(try_begin),
			(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_marshall, "trp_player"),
			(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "trp_player"),
			(str_store_string, 12, "str_but_if_this_goes_badly"),
		(try_end)
	],
	"All right. I will do that.{s12}", "lord_pretalk",
	[
		(call_script, "script_party_set_ai_state", "$g_talk_troop_party", "$temp", "$temp_2"),
		(str_clear, 12),
		(try_begin),
			(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_marshall, "trp_player"),
			(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "trp_player"),
			(str_store_string, 12, "str_but_if_this_goes_badly"),
		(try_end),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_give_order_answer",
	[],
	"I am sorry. I need to attend my own business at the moment.", "lord_pretalk",
	[
		(call_script, "script_npc_decision_checklist_party_ai", "$g_talk_troop"),
		(call_script, "script_party_set_ai_state", "$g_talk_troop_party", reg0, reg1)
	]],

	[anyone, "lord_start",
	[],
	"What is it?", "lord_talk",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$g_talk_troop_faction", "$players_kingdom"),
		(faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(this_or_next|faction_slot_eq, "$players_kingdom", slot_faction_ai_state, 0),
		(faction_slot_eq, "$players_kingdom", slot_faction_ai_state, 6)
	],
	"I want to start a new campaign. Let us assemble the army here.", "lord_give_order_call_to_arms_verify",
	[]],

	[anyone, "lord_give_order_call_to_arms_verify",
	[],
	"You wish to summon all lords for a new campaign?", "lord_give_order_call_to_arms_verify_2",
	[]],

	[anyone|plyr, "lord_give_order_call_to_arms_verify_2",
	[],
	"Yes. We must gather all our forces before we march on the enemy.", "lord_give_order_call_to_arms",
	[]],

	[anyone|plyr, "lord_give_order_call_to_arms_verify_2",
	[],
	"On second thought, it won't be necessary to summon everyone.", "lord_pretalk",
	[]],

	[anyone, "lord_give_order_call_to_arms",
	[],
	"All right then. I will send messengers and tell everyone to come here.", "lord_pretalk",
	[
		(assign, "$player_marshal_ai_state", 1),
		(assign, "$player_marshal_ai_object", "p_main_party"),
		(call_script, "script_decide_faction_ai", "$players_kingdom"),
		(assign, "$g_recalculate_ais", 1)
	]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$g_talk_troop_faction", "$players_kingdom"),
		(faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_ai_state, 0),
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_ai_state, 6)
	],
	"I want to end the campaign and let everyone return home.", "lord_give_order_disband_army_verify",
	[]],

	[anyone, "lord_give_order_disband_army_verify",
	[],
	"You want to end the current campaign and release all lords from duty?", "lord_give_order_disband_army_2",
	[]],

	[anyone|plyr, "lord_give_order_disband_army_2",
	[],
	"Yes. We no longer need all our forces here.", "lord_give_order_disband_army",
	[]],

	[anyone|plyr, "lord_give_order_disband_army_2",
	[],
	"On second thought, it will be better to stay together for now.", "lord_pretalk",
	[]],

	[anyone, "lord_give_order_disband_army",
	[],
	"All right. I will let everyone know that they are released from duty.", "lord_pretalk",
	[
		(assign, "$player_marshal_ai_state", 0),
		(assign, "$player_marshal_ai_object", -1),
		(call_script, "script_decide_faction_ai", "$players_kingdom"),
		(assign, "$g_recalculate_ais", 1)
	]],

	[anyone|plyr, "lord_talk",
	[
		(ge, "$g_encountered_party_relation", 0),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"I wish to ask you something.", "lord_talk_ask_something",
	[]],

	[anyone, "lord_talk_ask_something",
	[],
	"Aye? What is it?", "lord_talk_ask_something_2",
	[]],

	[anyone|plyr, "lord_talk_ask_something_2",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(ge, "$g_talk_troop_effective_relation", 0),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 8),
		(this_or_next|is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife")
	],
	"Have your skills increased since the days when we were travelling companions?", "lord_talk_ask_skill",
	[]],

	[anyone, "lord_talk_ask_skill",
	[],
	"Let me show you...", "lord_pretalk",
	[
		(change_screen_view_character)
	]],

	[anyone|plyr, "lord_talk_ask_something_2",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"If it would please you, can you tell me about your skills?", "lord_talk_ask_skill",
	[]],

	[anyone, "lord_talk_ask_skill",
	[],
	"Well, all right.", "lord_pretalk",
	[
		(change_screen_view_character)
	]],

	[anyone, "lord_talk_ask_something_again",
	[],
	"Is there anything else?", "lord_talk_ask_something_2",
	[]],

	[anyone|plyr, "lord_talk_ask_something_2",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"I want to know the location of someone.", "lord_talk_ask_location",
	[]],

	[anyone|plyr, "lord_talk_ask_something_2",
	[
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_leaded_party, -1)
	],
	"What are you and your men doing?", "lord_tell_objective",
	[
		(neg|troop_slot_eq, "trp_knight_1_3", slot_troop_occupation, 2),
		(party_get_slot, ":g_talk_troop_party_ai_state", "$g_talk_troop_party", slot_party_ai_state),
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(party_get_ai_initiative, reg4, "$g_talk_troop_party"),
			(party_get_helpfulness, reg5, "$g_talk_troop_party"),
			(display_message, "@{!}DEBUG : Initiative {reg4}, helpfulness {reg5}"),
		(try_end),
		(str_clear, 14),
		(str_clear, 15),
		(str_clear, 16),
		(try_begin),
			(call_script, "script_npc_decision_checklist_party_ai", "$g_talk_troop"),
			(eq, reg0, ":g_talk_troop_party_ai_state"),
			(eq, reg1, ":g_talk_troop_party_ai_object"),
		(else_try),
			(call_script, "script_party_set_ai_state", "$g_talk_troop_party", reg0, reg1),
			(str_store_string, 14, "str_however_circumstances_have_changed_since_we_made_that_decision_and_i_may_reconsider_shortly_s16"),
			(try_begin),
				(ge, "$cheat_mode", 1),
				(display_message, "@{!}DEBUG -- ai behavior: {reg0}, ai object: {reg1}"),
			(try_end),
		(try_end)
	]],

	[anyone|plyr, "lord_talk_ask_something_2",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"What is the realm doing?", "lord_talk_ask_about_strategy",
	[]],

	[anyone, "lord_talk_ask_about_strategy",
	[
		(eq, "$players_kingdom", "$g_talk_troop_faction"),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_marshall, "trp_player"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 6)
	],
	"You should decide that, as you are the marshal.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_talk_ask_something_2",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"How goes the war?", "lord_talk_ask_about_war",
	[]],

	[anyone|plyr, "lord_talk_ask_something_2",
	[
		(check_quest_active, "qst_formal_marriage_proposal"),
		(neg|check_quest_failed, "qst_formal_marriage_proposal"),
		(neg|check_quest_succeeded, "qst_formal_marriage_proposal"),
		(neg|troop_slot_ge, "trp_player", 30, "trp_npc1"),
		(quest_slot_eq, "qst_formal_marriage_proposal", slot_quest_target_troop, "$g_talk_troop"),
		(quest_get_slot, ":formal_marriage_proposal_giver_troop", "qst_formal_marriage_proposal", slot_quest_giver_troop),
		(str_store_troop_name, 10, ":formal_marriage_proposal_giver_troop"),
		(call_script, "script_troop_get_family_relation_to_troop", ":formal_marriage_proposal_giver_troop", "$g_talk_troop"),
		(call_script, "script_troop_get_relation_with_troop", "trp_player", ":formal_marriage_proposal_giver_troop"),
		(try_begin),
			(gt, reg0, 20),
			(str_store_string, 19, "str_i_wish_to_marry_your_s11_s10_i_ask_for_your_blessing"),
		(else_try),
			(str_store_string, 19, "str_i_wish_to_marry_your_s11_s10_i_ask_for_your_help"),
		(try_end)
	],
	"{s19}", "lord_marriage_permission",
	[]],

	[anyone|plyr, "lord_talk_ask_something_2",
	[
		(le, "$talk_context", 2),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(eq, "$players_kingdom", "$g_talk_troop_faction"),
		(this_or_next|eq, "$player_has_homage", 1),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "trp_player"),
		(str_store_string, 19, "str_dplmc_fief_exchange_ask_interest")
	],
	"{s19}", "dplmc_lord_ask_exchange_fief_1",
	[]],

	[anyone, "dplmc_lord_ask_exchange_fief_1",
	[
		(lt, "$g_talk_troop_effective_relation", 0),
		(str_store_string, 19, "str_dplmc_fief_exchange_not_interested")
	],
	"{s19}", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_ask_exchange_fief_1",
	[
		(call_script, "script_dplmc_get_troop_standing_in_faction", "$g_talk_troop", "$g_talk_troop_faction"),
		(ge, reg0, 50),
		(str_store_string, 19, "str_dplmc_fief_exchange_listen")
	],
	"{s19}", "dplmc_lord_exchange_fief_select_1",
	[]],

	[anyone, "dplmc_lord_ask_exchange_fief_1",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "trp_player"),
		(str_store_string, 19, "str_dplmc_fief_exchange_listen_player_approval")
	],
	"{s19}", "dplmc_lord_exchange_fief_select_1",
	[]],

	[anyone, "dplmc_lord_ask_exchange_fief_1",
	[
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(str_store_troop_name, 10, ":g_talk_troop_faction_leader"),
		(str_store_string, 19, "str_dplmc_fief_exchange_listen_s10_approval")
	],
	"{s19}", "dplmc_lord_exchange_fief_select_1",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_lord_exchange_fief_select_1",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(party_slot_eq, ":repeat_object", slot_town_lord, "$g_talk_troop"),
		(str_store_party_name, 1, ":repeat_object")
	],
	"{s1}", "dplmc_lord_ask_exchange_fief_2",
	[
		(store_repeat_object, "$fief_selected")
	]],

	[anyone|plyr, "dplmc_lord_exchange_fief_select_1",
	[],
	"Never mind", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_ask_exchange_fief_2",
	[
		(str_store_string, 19, "str_dplmc_fief_exchange_listen_2")
	],
	"{s19}", "dplmc_lord_exchange_fief_select_2",
	[]],

	[anyone|repeat_for_parties|plyr, "dplmc_lord_exchange_fief_select_2",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(party_slot_eq, ":repeat_object", slot_town_lord, "trp_player"),
		(str_store_party_name, 1, ":repeat_object")
	],
	"{s1}", "dplmc_lord_exchange_fief_select_3",
	[
		(store_repeat_object, "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_lord_exchange_fief_select_2",
	[],
	"Never mind", "lord_pretalk",
	[]],

	[anyone, "dplmc_lord_exchange_fief_select_3",
	[
		(call_script, "script_dplmc_evaluate_fief_exchange", "$g_talk_troop", "$fief_selected", "trp_player", "$diplomacy_var"),
		(ge, reg0, 0),
		(assign, reg3, reg0)
	],
	"{s14}", "dplmc_lord_exchange_fief_confirm",
	[]],

	[anyone, "dplmc_lord_exchange_fief_select_3",
	[
		(call_script, "script_dplmc_evaluate_fief_exchange", "$g_talk_troop", "$fief_selected", "trp_player", "$diplomacy_var")
	],
	"{s14}", "lord_pretalk",
	[]],

	[anyone|plyr, "dplmc_lord_exchange_fief_confirm",
	[
		(call_script, "script_dplmc_evaluate_fief_exchange", "$g_talk_troop", "$fief_selected", "trp_player", "$diplomacy_var"),
		(ge, reg0, 0),
		(assign, reg3, reg0),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", reg3),
		(try_begin),
			(ge, reg3, 1),
			(str_store_string, 14, "str_dplmc_fief_exchange_confirm_reg3_denars"),
		(else_try),
			(str_store_string, 14, "str_dplmc_fief_exchange_confirm"),
		(try_end)
	],
	"{s14}", "lord_pretalk",
	[
		(assign, ":var_1", "$g_move_heroes"),
		(assign, "$g_move_heroes", 1),
		(try_begin),
			(assign, ":var_2", "$fief_selected"),
			(assign, ":var_3", "$diplomacy_var"),
			(call_script, "script_dplmc_evaluate_fief_exchange", "$g_talk_troop", ":var_2", "trp_player", ":var_3"),
			(try_begin),
				(assign, ":var_4", reg0),
				(ge, ":var_4", 1),
				(troop_remove_gold, "trp_player", ":var_4"),
				(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", ":var_4", "$g_talk_troop"),
			(try_end),
			(assign, ":value", 0),
			(try_begin),
				(is_between, ":var_2", "p_town_1", "p_village_1"),
				(assign, ":value", 1),
			(try_end),
			(assign, ":value_2", 0),
			(try_begin),
				(is_between, ":var_3", "p_town_1", "p_village_1"),
				(assign, ":value_2", 1),
			(try_end),
			(party_clear, "p_temp_party"),
			(party_clear, "p_temp_party_2"),
			(try_begin),
				(eq, ":value", 1),
				(call_script, "script_party_add_party", "p_temp_party", ":var_2"),
				(party_clear, ":var_2"),
			(try_end),
			(try_begin),
				(eq, ":value_2", 1),
				(call_script, "script_party_add_party", "p_temp_party_2", ":var_3"),
				(party_clear, ":var_3"),
			(try_end),
			(assign, ":value_3", ":var_3"),
			(assign, ":value_4", "$g_talk_troop"),
			(party_set_slot, ":value_3", 400, 0),
			(try_begin),
				(party_template_get_slot, ":party_template_slot_troop_trees_859", "$troop_trees", 859),
				(party_slot_eq, ":value_3", slot_village_infested_by_bandits, ":party_template_slot_troop_trees_859"),
				(party_set_slot, ":value_3", slot_village_infested_by_bandits, 0),
			(try_end),
			(try_begin),
				(is_between, ":value_3", "p_town_1", "p_village_1"),
				(troop_get_slot, ":value_4_banner_scene_prop", ":value_4", slot_troop_banner_scene_prop),
				(gt, ":value_4_banner_scene_prop", 0),
				(val_sub, ":value_4_banner_scene_prop", "spr_banner_a"),
				(val_add, ":value_4_banner_scene_prop", "icon_banner_01"),
				(party_set_banner_icon, ":value_3", ":value_4_banner_scene_prop"),
			(try_end),
			(party_set_slot, ":value_3", slot_town_lord, ":value_4"),
			(call_script, "script_update_center_notes", ":value_3"),
			(assign, ":value_3", ":var_2"),
			(assign, ":value_4", "trp_player"),
			(party_set_slot, ":value_3", 400, 0),
			(try_begin),
				(party_template_get_slot, ":party_template_slot_troop_trees_859", "$troop_trees", 859),
				(party_slot_eq, ":value_3", slot_village_infested_by_bandits, ":party_template_slot_troop_trees_859"),
				(party_set_slot, ":value_3", slot_village_infested_by_bandits, 0),
			(try_end),
			(try_begin),
				(is_between, ":value_3", "p_town_1", "p_village_1"),
				(troop_get_slot, ":value_4_banner_scene_prop", ":value_4", slot_troop_banner_scene_prop),
				(gt, ":value_4_banner_scene_prop", 0),
				(val_sub, ":value_4_banner_scene_prop", "spr_banner_a"),
				(val_add, ":value_4_banner_scene_prop", "icon_banner_01"),
				(party_set_banner_icon, ":value_3", ":value_4_banner_scene_prop"),
			(try_end),
			(party_set_slot, ":value_3", slot_town_lord, ":value_4"),
			(call_script, "script_update_center_notes", ":value_3"),
			(try_begin),
				(eq, ":value_2", 1),
				(eq, ":value", 1),
				(call_script, "script_party_add_party", ":var_2", "p_temp_party_2"),
				(call_script, "script_party_add_party", ":var_3", "p_temp_party"),
			(else_try),
				(eq, ":value_2", 1),
				(neq, ":value", 1),
				(call_script, "script_party_add_party", ":var_3", "p_temp_party_2"),
				(call_script, "script_party_add_party", ":var_3", "p_temp_party"),
			(else_try),
				(neq, ":value_2", 1),
				(eq, ":value", 1),
				(call_script, "script_party_add_party", ":var_2", "p_temp_party_2"),
				(call_script, "script_party_add_party", ":var_2", "p_temp_party"),
			(try_end),
			(call_script, "script_update_troop_notes", "$g_talk_troop"),
			(call_script, "script_update_troop_notes", "trp_player"),
			(party_clear, "p_temp_party"),
			(party_clear, "p_temp_party_2"),
			(str_store_troop_name, 1, "trp_player"),
			(str_store_party_name, 2, "$diplomacy_var"),
			(str_store_troop_name, 3, "$g_talk_troop"),
			(str_store_party_name, 4, "$fief_selected"),
			(display_log_message, "@{s1} exchanged {s2} to {s3} for {s4}."),
		(else_try),
			(display_message, "str_error_string"),
		(try_end),
		(assign, "$g_move_heroes", ":var_1")
	]],

	[anyone|plyr, "dplmc_lord_exchange_fief_confirm",
	[],
	"Actually, forget about this for now.", "lord_pretalk",
	[]],

	[anyone, "lord_marriage_permission",
	[
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_love_interests_end, 1)
	],
	"Great heaven, man -- if I haven't given you permission to see her, do you think I'm going to give you permission to marry her?", "lord_pretalk",
	[
		(call_script, "script_fail_quest", "qst_formal_marriage_proposal"),
		(call_script, "script_end_quest", "qst_formal_marriage_proposal")
	]],

	[anyone, "lord_marriage_permission",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_love_interests_end, 1),
		(quest_get_slot, ":formal_marriage_proposal_giver_troop", "qst_formal_marriage_proposal", slot_quest_giver_troop),
		(call_script, "script_troop_get_relation_with_troop", "trp_player", ":formal_marriage_proposal_giver_troop"),
		(lt, reg0, 20),
		(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
		(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 3),
		(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
		(call_script, "script_troop_get_family_relation_to_troop", ":formal_marriage_proposal_giver_troop", "$g_talk_troop")
	],
	"It is not my way to push my {s11} to marry against her will or her better judgment", "lord_pretalk",
	[
		(call_script, "script_fail_quest", "qst_formal_marriage_proposal"),
		(call_script, "script_end_quest", "qst_formal_marriage_proposal")
	]],

	[anyone, "lord_marriage_permission",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_love_interests_end, 1),
		(quest_get_slot, ":formal_marriage_proposal_giver_troop", "qst_formal_marriage_proposal", slot_quest_giver_troop),
		(call_script, "script_troop_get_relation_with_troop", "trp_player", ":formal_marriage_proposal_giver_troop"),
		(lt, reg0, 20),
		(assign, ":value", "$g_talk_troop_relation"),
		(try_for_range, ":troop", "trp_knight_1_1", "trp_kingdom_1_pretender"),
			(this_or_next|troop_slot_eq, ":troop", slot_troop_love_interest_1, ":formal_marriage_proposal_giver_troop"),
			(this_or_next|troop_slot_eq, ":troop", slot_troop_love_interest_2, ":formal_marriage_proposal_giver_troop"),
			(troop_slot_eq, ":troop", slot_troop_love_interest_3, ":formal_marriage_proposal_giver_troop"),
			(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":troop"),
			(gt, reg0, ":value"),
			(assign, ":value", reg0),
			(str_store_troop_name, 12, ":troop"),
		(try_end),
		(gt, ":value", "$g_talk_troop_relation"),
		(call_script, "script_troop_get_family_relation_to_troop", ":formal_marriage_proposal_giver_troop", "$g_talk_troop")
	],
	"Sorry, lad -- I'm not going to make my {s11} marry you, when I'd rather see her married to {s12}", "lord_pretalk",
	[
		(call_script, "script_fail_quest", "qst_formal_marriage_proposal"),
		(call_script, "script_end_quest", "qst_formal_marriage_proposal")
	]],

	[anyone, "lord_marriage_permission",
	[
		(quest_get_slot, ":formal_marriage_proposal_giver_troop", "qst_formal_marriage_proposal", slot_quest_giver_troop),
		(str_store_troop_name, 11, ":formal_marriage_proposal_giver_troop")
	],
	"Splendid news, my young man -- I shall be proud to have you in our family. Now, let us talk the terms of the marriage. As per our custom, the two of us must make sure that {s11} has sufficient finances to support herself, in the event of any unforeseen circumstances..", "lord_marriage_permission_endowment",
	[
		(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
		(troop_get_slot, ":g_talk_troop_renown", "$g_talk_troop", slot_troop_renown),
		(store_mul, "$marriage_dowry", ":player_renown", 20),
		(val_min, "$marriage_dowry", 20000),
		(store_mul, "$marriage_dower", ":g_talk_troop_renown", 20),
		(val_min, "$marriage_dower", 20000)
	]],

	[anyone, "lord_marriage_permission_endowment",
	[
		(assign, reg3, "$marriage_dower"),
		(assign, reg4, "$marriage_dowry")
	],
	"I would say that, taking into consideration the prestige of our two houses, that you can provide a dower of {reg3} coins, while I will supply a dowry of {reg4} coins. This shall be her ladyship's property, as a security, lest for any reason you are unable to provide for her. What say you to that?", "lord_marriage_permission_endowment_answer",
	[]],

	[anyone|plyr, "lord_marriage_permission_endowment_answer",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", "$marriage_dower")
	],
	"Very well -- so let it be.", "lord_marriage_permission_engagement_date",
	[]],

	[anyone|plyr, "lord_marriage_permission_endowment_answer",
	[],
	"I cannot afford that right now.", "lord_marriage_permission_endowment_answer_delay",
	[]],

	[anyone|plyr, "lord_marriage_permission_endowment_answer",
	[
		(eq, 1, 0)
	],
	"That is too much to pay.", "lord_marriage_permission_endowment_answer_no",
	[]],

	[anyone, "lord_marriage_permission_endowment_answer_no",
	[],
	"Well. I cannot in all decency allow my daughter to marry without some security, can I? Let me know if you change your mind.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_marriage_permission_engagement_date",
	[
		(quest_get_slot, ":formal_marriage_proposal_giver_troop", "qst_formal_marriage_proposal", slot_quest_giver_troop),
		(call_script, "script_get_kingdom_lady_social_determinants", ":formal_marriage_proposal_giver_troop"),
		(assign, ":var_2", reg1),
		(is_between, ":var_2", "p_town_1", "p_village_1"),
		(party_slot_eq, ":var_2", slot_village_state, 0),
		(str_store_party_name, 24, ":var_2")
	],
	"Splendid! You two may now consider yourselves offically betrothed. Very well -- I shall plan to hold a great feast in {s24}, as soon as circumstances permit. We will be sure to notify you when the day comes.", "close_window",
	[
		(quest_get_slot, ":formal_marriage_proposal_giver_troop", "qst_formal_marriage_proposal", slot_quest_giver_troop),
		(troop_set_slot, "trp_player", slot_troop_betrothed, ":formal_marriage_proposal_giver_troop"),
		(troop_set_slot, ":formal_marriage_proposal_giver_troop", slot_troop_betrothed, "trp_player"),
		(call_script, "script_end_quest", "qst_formal_marriage_proposal"),
		(troop_remove_gold, "trp_player", "$marriage_dower"),
		(call_script, "script_get_kingdom_lady_social_determinants", ":formal_marriage_proposal_giver_troop"),
		(assign, ":var_2", reg1),
		(str_store_troop_name, 3, ":formal_marriage_proposal_giver_troop"),
		(str_store_troop_name, 4, "$g_talk_troop"),
		(str_store_party_name, 5, ":var_2"),
		(setup_quest_text, "qst_wed_betrothed"),
		(str_store_string, 2, "str_you_plan_to_marry_s3_at_a_feast_hosted_by_s4_in_s5_you_should_be_notifed_of_the_feast_as_soon_as_it_is_held"),
		(call_script, "script_start_quest", "qst_wed_betrothed", "$g_talk_troop"),
		(quest_set_slot, "qst_wed_betrothed", slot_quest_expiration_days, 365),
		(quest_set_slot, "qst_wed_betrothed", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_set_slot, "qst_wed_betrothed", slot_quest_target_troop, ":formal_marriage_proposal_giver_troop"),
		(try_begin),
			(eq, "$talk_context", 2),
			(assign, "$g_leave_encounter", 1),
		(try_end)
	]],

	[anyone, "lord_marriage_permission_engagement_date",
	[],
	"Unfortunately, there is one final complication -- there is no safe place to hold the wedding. Let us hold off on finalizing this, for the time being.", "close_window",
	[]],

	[anyone, "lord_marriage_permission_endowment_answer_delay",
	[],
	"No matter -- take the time you need to raise the money. I want her ladyship to be well looked after.", "lord_pretalk",
	[]],

	[anyone, "lord_marriage_permission_endowment_answer_delay",
	[],
	"That is a shame, but I would be remiss in my duty if I allowed her ladyship to face an uncertain future.", "lord_pretalk",
	[
		(call_script, "script_fail_quest", "qst_formal_marriage_proposal"),
		(call_script, "script_end_quest", "qst_formal_marriage_proposal")
	]],

	[anyone|plyr, "lord_talk_ask_something_2",
	[
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_love_interests_end, 1),
		(assign, "$marriage_candidate", 0),
		(try_for_range, ":troop", "trp_knight_1_1_wife", "trp_heroes_end"),
			(eq, "$marriage_candidate", 0),
			(troop_slot_ge, ":troop", 5, 2),
			(neg|troop_slot_eq, ":troop", slot_troop_met, 4),
			(neg|troop_slot_ge, ":troop", 30, 0),
			(call_script, "script_get_kingdom_lady_social_determinants", ":troop"),
			(eq, reg0, "$g_talk_troop"),
			(assign, "$marriage_candidate", ":troop"),
			(str_clear, 14),
			(call_script, "script_troop_get_family_relation_to_troop", ":troop", "$g_talk_troop"),
			(gt, reg0, 0),
			(str_store_string, 14, "str_your_s11_"),
		(try_end),
		(gt, "$marriage_candidate", 0),
		(str_store_troop_name, 12, "$marriage_candidate"),
		(str_clear, 10),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_troop_love_interests_end, -1),
			(str_store_string, 10, "str_i_ask_again_may"),
		(else_try),
			(str_store_string, 10, "str_may"),
		(try_end)
	],
	"{s10} I have the honor of visiting with {s14}{s12}?", "lord_courtship_permission",
	[]],

	[anyone, "lord_courtship_permission",
	[
		(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
		(eq, reg0, 1),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
			(str_store_string, 12, "str_very_well_as_far_as_im_concerned_i_suppose_she_can_see_most_anyone_she_likes__within_reason_of_course"),
		(else_try),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
			(str_store_string, 12, "str_very_well_an_alliance_with_you_could_be_valuable_go_chat_with_her_and_see_if_you_can_get_her_to_take_a_fancy_to_you_if_she_doesnt_and_if_we_still_want_to_conclude_this_business_then_i_can_make_her_see_reason"),
		(else_try),
			(str_store_string, 12, "str_you_have_my_blessing_to_pay_suit_to_her__so_long_as_your_intentions_are_honorable_of_course_depending_on_how_things_proceed_between_you_two_we_may_have_more_to_discuss_at_a_later_date"),
		(try_end)
	],
	"{s12}", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_love_interests_end, 1)
	]],

	[anyone, "lord_courtship_permission",
	[
		(troop_slot_ge, "$marriage_candidate", 5, 2),
		(neg|troop_slot_eq, "$marriage_candidate", slot_troop_met, 4),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
		(call_script, "script_troop_get_relation_with_troop", "$marriage_candidate", "trp_player"),
		(gt, reg0, 0)
	],
	"From what I hear, you have already spoken to her -- without my permission. Let me tell you this: I am her lord and guardian, and I have plans for her. I will not be mocked behind my back as a man who cannot control the women of his household. I would ask you not to discuss this matter with me again.", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_love_interests_end, -1),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", -1)
	]],

	[anyone, "lord_courtship_permission",
	[
		(call_script, "script_npc_decision_checklist_male_guardian_assess_suitor", "$g_talk_troop", "trp_player"),
		(lt, reg0, 1),
		(str_store_string, 14, reg1)
	],
	"{s14}", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_love_interests_end, -1)
	]],

	[anyone, "lord_courtship_permission",
	[
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
			(str_store_string, 12, "str_very_well_as_far_as_im_concerned_i_suppose_she_can_see_most_anyone_she_likes__within_reason_of_course"),
		(else_try),
			(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
			(str_store_string, 12, "str_very_well_an_alliance_with_you_could_be_valuable_go_chat_with_her_and_see_if_you_can_get_her_to_take_a_fancy_to_you_if_she_doesnt_and_if_we_still_want_to_conclude_this_business_then_i_can_make_her_see_reason"),
		(else_try),
			(str_store_string, 12, "str_you_have_my_blessing_to_pay_suit_to_her__so_long_as_your_intentions_are_honorable_of_course_depending_on_how_things_proceed_between_you_two_we_may_have_more_to_discuss_at_a_later_date"),
		(try_end)
	],
	"{s12}", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_love_interests_end, 1)
	]],

	[anyone|plyr, "lord_talk_ask_something_2",
	[
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_love_interests_end, 1),
		(neg|troop_slot_ge, "trp_player", 30, "trp_npc1"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_betrothed, "trp_player"),
		(troop_get_slot, reg0, "trp_player", slot_troop_betrothed),
		(neq, reg0, "$g_talk_troop"),
		(try_begin),
			(ge, reg0, 1),
			(neg|troop_slot_ge, reg0, 2, 11),
			(store_faction_of_troop, reg0, reg0),
			(this_or_next|eq, reg0, "$players_kingdom"),
			(this_or_next|eq, reg0, "fac_player_supporters_faction"),
			(eq, reg0, "$g_talk_troop_faction"),
			(assign, reg0, 1),
		(else_try),
			(assign, reg0, -1),
		(try_end),
		(lt, reg0, 1),
		(call_script, "script_dplmc_troop_get_family_relation_to_troop", "$g_talk_troop", "trp_player"),
		(lt, reg0, 2),
		(call_script, "script_dplmc_store_troop_is_female", "$g_talk_troop"),
		(assign, reg65, reg0)
	],
	"What would it take to cement a lasting alliance with your house?", "lord_talk_ask_marriage_1",
	[]],

	[anyone|plyr, "lord_talk_ask_something_2",
	[],
	"Never mind.", "lord_pretalk",
	[]],

	[anyone, "lord_talk_ask_location",
	[
		(lt, "$g_talk_troop_effective_relation", 0),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(this_or_next|is_between, "$g_talk_troop", "trp_npc1", "trp_knight_1_1_wife"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(assign, ":value", -5),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
			(assign, ":value", 0),
		(else_try),
			(eq, "$g_talk_troop_faction", "$players_kingdom"),
			(assign, ":value", -10),
		(try_end),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
			(val_sub, ":value", 5),
		(try_end),
		(lt, "$g_talk_troop_effective_relation", ":value"),
		(call_script, "script_dplmc_player_can_give_troops_to_troop", "$g_talk_troop"),
		(lt, reg0, 1)
	],
	"Then you will have to ask someone else.", "lord_pretalk",
	[]],

	[anyone, "lord_talk_ask_location",
	[
		(lt, "$g_talk_troop_effective_relation", 0),
		(this_or_next|is_between, "$g_talk_troop", "trp_knight_1_1_wife", "trp_heroes_end"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(assign, ":value", -4),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
			(assign, ":value", 0),
		(else_try),
			(eq, "$g_talk_troop_faction", "$players_kingdom"),
			(assign, ":value", -9),
		(try_end),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
			(val_sub, ":value", 5),
		(try_end),
		(lt, "$g_talk_troop_effective_relation", ":value"),
		(call_script, "script_dplmc_player_can_give_troops_to_troop", "$g_talk_troop"),
		(lt, reg0, 1)
	],
	"I am afraid you will have to ask someone else.", "lady_pretalk",
	[]],

	[anyone, "lord_talk_ask_location",
	[],
	"Very well, I may or may not have an answer for you. About whom do you wish to hear?", "lord_talk_ask_location_2",
	[]],

	[anyone|repeat_for_troops|plyr, "lord_talk_ask_location_2",
	[
		(store_repeat_object, ":repeat_object"),
		(neq, "$g_talk_troop", ":repeat_object"),
		(is_between, ":repeat_object", "trp_npc1", "trp_heroes_end"),
		(neq, ":repeat_object", "trp_player"),
		(this_or_next|troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 6),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(eq, "$g_encountered_party_faction", ":faction_of_troop_repeat_object"),
		(str_store_troop_name, 1, ":repeat_object"),
		(try_begin),
			(faction_slot_eq, "$players_kingdom", slot_faction_marshall, ":repeat_object"),
			(str_store_string, 1, "@Our marshal, {s1}"),
		(else_try),
			(faction_slot_eq, "$players_kingdom", slot_faction_leader, ":repeat_object"),
			(str_store_string, 1, "@Our liege, {s1}"),
		(else_try),
			(neg|troop_slot_eq, "$g_talk_troop", slot_troop_met, 0),
			(neg|troop_slot_eq, ":repeat_object", slot_troop_met, 0),
			(call_script, "script_dplmc_cap_troop_describes_troop_to_troop_s1", 1, "trp_player", ":repeat_object", "$g_talk_troop"),
		(try_end),
		(call_script, "script_change_looking_for_dialog_string", ":repeat_object")
	],
	"{s1}", "lord_talk_ask_location_3",
	[
		(store_repeat_object, "$hero_requested_to_learn_location")
	]],

	[anyone|plyr, "lord_talk_ask_location_2",
	[
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(is_between, "$g_talk_troop", "trp_knight_1_1_wife", "trp_heroes_end")
	],
	"{s1}", "lord_talk_ask_location",
	[]],

	[anyone|plyr, "lord_talk_ask_location_2",
	[
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(neg|is_between, "$g_talk_troop", "trp_knight_1_1_wife", "trp_heroes_end")
	],
	"{s1}", "lord_talk_ask_location",
	[]],

	[anyone, "lord_talk_ask_location_3",
	[
		(is_between, "$g_talk_troop", "trp_knight_1_1_wife", "trp_heroes_end"),
		(call_script, "script_update_troop_location_notes", "$hero_requested_to_learn_location", 1),
		(call_script, "script_get_information_about_troops_position", "$hero_requested_to_learn_location", 0)
	],
	"{s1}", "lady_pretalk",
	[]],

	[anyone, "lord_talk_ask_location_3",
	[
		(call_script, "script_update_troop_location_notes", "$hero_requested_to_learn_location", 1),
		(call_script, "script_get_information_about_troops_position", "$hero_requested_to_learn_location", 0)
	],
	"{s1}", "lord_pretalk",
	[]],

	[anyone, "lord_talk_ask_about_war",
	[],
	"{s12}", "lord_talk_ask_about_war_2",
	[
		(assign, ":var_1", 0),
		(try_for_range_backwards, ":var_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(faction_slot_eq, ":var_2", slot_faction_state, 0),
			(store_relation, ":relation_var_2_g_talk_troop_faction", ":var_2", "$g_talk_troop_faction"),
			(lt, ":relation_var_2_g_talk_troop_faction", 0),
			(try_begin),
				(eq, ":var_1", 0),
				(str_store_faction_name_link, 12, ":var_2"),
			(else_try),
				(eq, ":var_1", 1),
				(str_store_faction_name_link, 11, ":var_2"),
				(str_store_string, 12, "@{s11} and {s12}"),
			(else_try),
				(str_store_faction_name_link, 11, ":var_2"),
				(str_store_string, 12, "@{!}{s11}, {s12}"),
			(try_end),
			(val_add, ":var_1", 1),
		(try_end),
		(try_begin),
			(eq, ":var_1", 0),
			(str_store_string, 12, "@We are not at war with anyone."),
		(else_try),
			(str_store_string, 12, "@We are at war with {s12}."),
		(try_end)
	]],

	[anyone|repeat_for_factions|plyr, "lord_talk_ask_about_war_2",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(faction_slot_eq, ":repeat_object", slot_faction_state, 0),
		(store_relation, ":relation_repeat_object_g_talk_troop_faction", ":repeat_object", "$g_talk_troop_faction"),
		(lt, ":relation_repeat_object_g_talk_troop_faction", 0),
		(str_store_faction_name, 1, ":repeat_object")
	],
	"Tell me more about the war with {s1}.", "lord_talk_ask_about_war_details",
	[
		(store_repeat_object, "$faction_requested_to_learn_more_details_about_the_war_against")
	]],

	[anyone|plyr, "lord_talk_ask_about_war_2",
	[],
	"That's all I wanted to know. Thank you.", "lord_pretalk",
	[]],

	[anyone, "lord_talk_ask_about_war_details",
	[],
	"{s9}.", "lord_talk_ask_about_war_2",
	[
		(store_add, ":value", "$faction_requested_to_learn_more_details_about_the_war_against", 140),
		(val_sub, ":value", "fac_player_supporters_faction"),
		(faction_get_slot, ":g_talk_troop_faction_value", "$g_talk_troop_faction", ":value"),
		(store_add, ":value", "$g_talk_troop_faction", 140),
		(val_sub, ":value", "fac_player_supporters_faction"),
		(faction_get_slot, ":faction_requested_to_learn_more_details_about_the_war_against_value", "$faction_requested_to_learn_more_details_about_the_war_against", ":value"),
		(val_max, ":faction_requested_to_learn_more_details_about_the_war_against_value", 1),
		(store_mul, ":value_2", ":g_talk_troop_faction_value", 100),
		(val_div, ":value_2", ":faction_requested_to_learn_more_details_about_the_war_against_value"),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg3, ":g_talk_troop_faction_value"),
			(assign, reg4, ":faction_requested_to_learn_more_details_about_the_war_against_value"),
			(assign, reg5, ":value_2"),
			(display_message, "str_war_damage_inflicted_reg3_suffered_reg4_ratio_reg5"),
		(try_end),
		(str_store_string, 9, "str_error__did_not_calculate_war_progress_string_properly"),
		(try_begin),
			(lt, ":g_talk_troop_faction_value", 5),
			(str_store_string, 9, "str_the_war_has_barely_begun_so_and_it_is_too_early_to_say_who_is_winning_and_who_is_losing"),
		(else_try),
			(gt, ":g_talk_troop_faction_value", 100),
			(gt, ":value_2", 200),
			(str_store_string, 9, "str_we_have_been_hitting_them_very_hard_and_giving_them_little_chance_to_recover"),
		(else_try),
			(gt, ":g_talk_troop_faction_value", 80),
			(gt, ":value_2", 150),
			(str_store_string, 9, "str_the_fighting_has_been_hard_but_we_have_definitely_been_getting_the_better_of_them"),
		(else_try),
			(gt, ":faction_requested_to_learn_more_details_about_the_war_against_value", 100),
			(lt, ":value_2", 50),
			(str_store_string, 9, "str_they_have_been_hitting_us_very_hard_and_causing_great_suffering"),
		(else_try),
			(gt, ":faction_requested_to_learn_more_details_about_the_war_against_value", 80),
			(lt, ":value_2", 68),
			(str_store_string, 9, "str_the_fighting_has_been_hard_and_i_am_afraid_that_we_have_been_having_the_worst_of_it"),
		(else_try),
			(gt, ":faction_requested_to_learn_more_details_about_the_war_against_value", 50),
			(gt, ":g_talk_troop_faction_value", 50),
			(gt, ":value_2", 65),
			(str_store_string, 9, "str_both_sides_have_suffered_in_the_fighting"),
		(else_try),
			(gt, ":value_2", 125),
			(str_store_string, 9, "str_no_clear_winner_has_yet_emerged_in_the_fighting_but_i_think_we_are_getting_the_better_of_them"),
		(else_try),
			(gt, ":value_2", 80),
			(str_store_string, 9, "str_no_clear_winner_has_yet_emerged_in_the_fighting_but_i_fear_they_may_be_getting_the_better_of_us"),
		(else_try),
			(str_store_string, 9, "str_no_clear_winner_has_yet_emerged_in_the_fighting"),
		(try_end),
		(try_begin),
			(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
			(call_script, "script_npc_decision_checklist_peace_or_war", "$g_talk_troop_faction", "$faction_requested_to_learn_more_details_about_the_war_against", -1),
			(str_store_string, 9, "str_s9_s14"),
		(try_end)
	]],

	[anyone, "lord_talk_ask_about_strategy",
	[
		(faction_get_slot, ":g_encountered_party_faction_ai_state", "$g_encountered_party_faction", slot_faction_ai_state),
		(faction_get_slot, ":g_encountered_party_faction_ai_object", "$g_encountered_party_faction", slot_faction_ai_object),
		(faction_get_slot, ":g_encountered_party_faction_marshall", "$g_encountered_party_faction", slot_faction_marshall),
		(try_begin),
			(eq, ":g_encountered_party_faction_marshall", -1),
			(faction_get_slot, ":g_encountered_party_faction_marshall", "$g_encountered_party_faction", slot_faction_leader),
		(try_end),
		(call_script, "script_npc_decision_checklist_faction_ai_alt", ":g_encountered_party_faction_marshall"),
		(assign, ":var_4", reg0),
		(assign, ":var_5", reg1),
		(try_begin),
			(gt, ":g_encountered_party_faction_ai_object", -1),
			(str_store_party_name, 8, ":g_encountered_party_faction_ai_object"),
		(try_end),
		(try_begin),
			(eq, ":g_encountered_party_faction_ai_state", 0),
			(str_store_string, 7, "str_there_is_no_campaign_currently_in_progress"),
		(else_try),
			(eq, ":g_encountered_party_faction_ai_state", 1),
			(str_store_string, 7, "str_we_are_assembling_the_army"),
		(else_try),
			(eq, ":g_encountered_party_faction_ai_state", 2),
			(str_store_string, 7, "str_we_aim_to_take_the_fortress_of_s8"),
		(else_try),
			(eq, ":g_encountered_party_faction_ai_state", 3),
			(str_store_string, 7, "str_we_are_on_a_raid_and_are_now_targeting_s8"),
		(else_try),
			(eq, ":g_encountered_party_faction_ai_state", 4),
			(str_store_string, 7, "str_we_are_trying_to_seek_out_and_defeat_s8"),
		(else_try),
			(eq, ":g_encountered_party_faction_ai_state", 5),
			(str_store_string, 7, "str_we_are_riding_to_the_defense_of_s8"),
		(else_try),
			(eq, ":g_encountered_party_faction_ai_state", 6),
			(str_store_string, 7, "str_we_are_gathering_for_a_feast_at_s8"),
		(try_end),
		(str_clear, 9),
		(try_begin),
			(eq, ":g_encountered_party_faction_ai_state", 1),
			(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
			(gt, ":g_talk_troop_faction_marshall", -1),
			(troop_get_slot, ":g_talk_troop_faction_marshall_leaded_party", ":g_talk_troop_faction_marshall", slot_troop_leaded_party),
			(party_is_active, ":g_talk_troop_faction_marshall_leaded_party"),
			(this_or_next|eq, "$g_talk_troop", ":g_talk_troop_faction_marshall"),
			(party_slot_eq, "$g_talk_troop_party", slot_party_ai_object, ":g_talk_troop_faction_marshall_leaded_party"),
			(party_get_slot, ":g_talk_troop_faction_marshall_leaded_party_ai_object", ":g_talk_troop_faction_marshall_leaded_party", slot_party_ai_object),
			(try_begin),
				(eq, ":g_talk_troop_faction_marshall_leaded_party_ai_object", -1),
				(str_store_string, 9, "str_we_are_waiting_here_for_vassals"),
			(else_try),
				(str_store_party_name, 11, ":g_talk_troop_faction_marshall_leaded_party_ai_object"),
				(str_store_string, 9, "str_we_are_travelling_to_s11_for_vassals"),
			(try_end),
		(try_end),
		(try_begin),
			(this_or_next|neq, ":g_encountered_party_faction_ai_state", ":var_4"),
			(neq, ":g_encountered_party_faction_ai_object", ":var_5"),
			(str_store_string, 14, "str__however_that_may_change_shortly_s14"),
		(try_end)
	],
	"{s7} {s9} {s14}", "lord_strategy_follow_evaluation",
	[]],

	[anyone, "lord_strategy_follow_evaluation",
	[
		(this_or_next|faction_slot_eq, "$g_talk_troop_faction", slot_faction_marshall, "$g_talk_troop"),
		(this_or_next|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 0),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 6)
	],
	"Did you have any other questions?", "lord_talk_ask_something_2",
	[]],

	[anyone, "lord_strategy_follow_evaluation",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 1),
		(call_script, "script_npc_decision_checklist_faction_ai_alt", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(neq, ":var_1", 1),
		(store_current_hours, ":current_hours"),
		(faction_get_slot, ":g_talk_troop_faction_ai_current_state_started", "$g_talk_troop_faction", slot_faction_ai_current_state_started),
		(val_sub, ":current_hours", ":g_talk_troop_faction_ai_current_state_started"),
		(ge, ":current_hours", 40),
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(is_between, ":g_talk_troop_faction_marshall", "trp_npc1", "trp_knight_1_1_wife"),
		(neq, ":g_talk_troop_faction_marshall", "$g_talk_troop"),
		(str_store_troop_name, 4, ":g_talk_troop_faction_marshall")
	],
	"Our leader {s4} is far too cautious. {reg4?She:He} should either use the army to attack the enemy, or let it go home.", "lord_strategy_follow_up",
	[
		(assign, "$g_talk_troop_disagrees_with_marshal", 1)
	]],

	[anyone, "lord_strategy_follow_evaluation",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 1),
		(store_current_hours, ":current_hours"),
		(faction_get_slot, ":g_talk_troop_faction_ai_current_state_started", "$g_talk_troop_faction", slot_faction_ai_current_state_started),
		(val_sub, ":current_hours", ":g_talk_troop_faction_ai_current_state_started"),
		(ge, ":current_hours", 40),
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(is_between, ":g_talk_troop_faction_marshall", "trp_npc1", "trp_knight_1_1_wife"),
		(neq, ":g_talk_troop_faction_marshall", "$g_talk_troop"),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":g_talk_troop_faction_marshall"),
		(lt, reg0, 5),
		(str_store_troop_name, 4, ":g_talk_troop_faction_marshall")
	],
	"Our army sits, doing nothing. Apparently, too few vassals have answered the call to arms. Perhaps {s4} does not enjoy the confidence of the great lords of this realm.", "lord_strategy_follow_up",
	[
		(assign, "$g_talk_troop_disagrees_with_marshal", 1)
	]],

	[anyone, "lord_strategy_follow_evaluation",
	[
		(call_script, "script_npc_decision_checklist_faction_ai_alt", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, ":var_1"),
		(assign, ":value", 1),
		(try_begin),
			(eq, ":var_1", 3),
			(str_store_string, 4, "@go on the offensive now."),
		(else_try),
			(eq, ":var_1", 2),
			(str_store_string, 4, "@go on the offensive now."),
		(else_try),
			(eq, ":var_1", 5),
			(str_store_string, 4, "@act to defend our lands."),
		(else_try),
			(eq, ":var_1", 1),
			(str_store_string, 4, "@take more time to gather the army."),
		(else_try),
			(assign, ":value", 0),
		(try_end),
		(eq, ":value", 1),
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(is_between, ":g_talk_troop_faction_marshall", "trp_npc1", "trp_knight_1_1_wife"),
		(neq, ":g_talk_troop_faction_marshall", "$g_talk_troop"),
		(str_store_troop_name, 10, ":g_talk_troop_faction_marshall"),
		(assign, "$g_talk_troop_disagrees_with_marshal", 1)
	],
	"I disagree with this strategy. I would prefer to {s4}.", "lord_strategy_follow_up",
	[
		(assign, "$g_talk_troop_disagrees_with_marshal", 1)
	]],

	[anyone, "lord_strategy_follow_evaluation",
	[
		(this_or_next|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 2),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 3),
		(call_script, "script_find_center_to_attack_alt", "$g_talk_troop", 1, 0),
		(assign, ":var_1", reg0),
		(is_between, ":var_1", "p_town_1", "p_salt_mine"),
		(faction_get_slot, ":g_talk_troop_faction_ai_object", "$g_talk_troop_faction", slot_faction_ai_object),
		(neq, ":g_talk_troop_faction_ai_object", ":var_1"),
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(is_between, ":g_talk_troop_faction_marshall", "trp_npc1", "trp_knight_1_1_wife"),
		(neq, ":g_talk_troop_faction_marshall", "$g_talk_troop"),
		(call_script, "script_npc_decision_checklist_evaluate_enemy_center_for_attack", ":g_talk_troop_faction_marshall", ":var_1", 1, 0),
		(str_store_string, 9, reg1),
		(str_store_party_name, 8, ":var_1"),
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(is_between, ":g_talk_troop_faction_marshall", "trp_npc1", "trp_knight_1_1_wife"),
		(neq, ":g_talk_troop_faction_marshall", "$g_talk_troop"),
		(str_store_troop_name, 10, ":g_talk_troop_faction_marshall")
	],
	"I personally would prefer to attack {s8}, but our marshal {s10} believes that it {s9}", "lord_strategy_follow_up",
	[
		(assign, "$g_talk_troop_disagrees_with_marshal", 1)
	]],

	[anyone, "lord_strategy_follow_evaluation",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 5),
		(call_script, "script_find_center_to_defend", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(is_between, ":var_1", "p_town_1", "p_salt_mine"),
		(faction_get_slot, ":g_talk_troop_faction_ai_object", "$g_talk_troop_faction", slot_faction_ai_object),
		(neq, ":g_talk_troop_faction_ai_object", ":var_1"),
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(is_between, ":g_talk_troop_faction_marshall", "trp_npc1", "trp_knight_1_1_wife"),
		(neq, ":g_talk_troop_faction_marshall", "$g_talk_troop"),
		(str_store_party_name, 8, ":var_1"),
		(str_store_party_name, 9, ":g_talk_troop_faction_ai_object")
	],
	"I personally would prefer to defend {s8}, instead of {s9}.", "lord_strategy_follow_up",
	[
		(assign, "$g_talk_troop_disagrees_with_marshal", 1)
	]],

	[anyone, "lord_strategy_follow_evaluation",
	[
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(this_or_next|neg|is_between, ":g_talk_troop_faction_marshall", "trp_npc1", "trp_knight_1_1_wife"),
		(eq, ":g_talk_troop_faction_marshall", "$g_talk_troop")
	],
	"Is there anything else?", "lord_talk",
	[]],

	[anyone, "lord_strategy_follow_evaluation",
	[],
	"This strategy seems reasonable to me.", "lord_strategy_follow_up",
	[
		(assign, "$g_talk_troop_disagrees_with_marshal", 0)
	]],

	[anyone|plyr, "lord_strategy_follow_up",
	[
		(this_or_next|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 2),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 3)
	],
	"If you're attacking, why aren't you...", "lord_strategy_why_not",
	[]],

	[anyone|plyr, "lord_strategy_follow_up",
	[],
	"I see....", "lord_talk_ask_something_again",
	[]],

	[anyone|plyr, "lord_strategy_follow_up",
	[
		(eq, "$g_talk_troop_disagrees_with_marshal", 1),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(is_between, ":g_talk_troop_faction_marshall", "trp_npc1", "trp_knight_1_1_wife"),
		(str_store_troop_name, 4, ":g_talk_troop_faction_marshall")
	],
	"Would you say, then, that {s4} should no longer be marshal?", "lord_talk_replace_marshal",
	[]],

	[anyone, "lord_talk_replace_marshal",
	[
		(faction_get_slot, ":g_talk_troop_faction_political_issue", "$g_talk_troop_faction", slot_faction_political_issue),
		(is_between, ":g_talk_troop_faction_political_issue", "p_town_1", "p_salt_mine"),
		(str_store_party_name, 4, ":g_talk_troop_faction_political_issue")
	],
	"I believe that our realm should resolve the issue of {s4} before we begin to debate replacing the marshal.", "lord_talk_ask_something_again",
	[]],

	[anyone, "lord_talk_replace_marshal",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_political_issue, 1),
		(troop_get_slot, ":g_talk_troop_stance_on_faction_issue", "$g_talk_troop", slot_troop_stance_on_faction_issue),
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(neq, ":g_talk_troop_stance_on_faction_issue", ":g_talk_troop_faction_marshall"),
		(str_store_troop_name, 4, ":g_talk_troop_stance_on_faction_issue"),
		(str_store_troop_name, 5, ":g_talk_troop_faction_marshall")
	],
	"Yes. I have already made my position on this matter clear. I believe that {s4} should be marshal instead of {s5}.", "lord_talk_ask_something_again",
	[]],

	[anyone, "lord_talk_replace_marshal",
	[
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":g_talk_troop_faction_marshall"),
		(assign, ":var_2", reg0),
		(gt, ":var_2", "$g_talk_troop_effective_relation")
	],
	"I will make up my mind on this matter without your persuasion.", "lord_talk_ask_something_again",
	[]],

	[anyone, "lord_talk_replace_marshal",
	[],
	"Hmm...", "lord_talk_replace_marshal_decision",
	[
		(faction_set_slot, "$g_talk_troop_faction", slot_faction_political_issue, 1)
	]],

	[anyone, "lord_talk_replace_marshal_decision",
	[
		(call_script, "script_npc_decision_checklist_take_stand_on_issue", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_marshall, ":var_1"),
		(call_script, "script_troop_describes_troop_to_s15", "$g_talk_troop", ":var_1")
	],
	"Yes, I would say that. At this point, I would be tempted to say that I support {s15} instead. I am glad that you and I had this discussion, so that I know that we are of the same mind on this matter.", "lord_talk_ask_something_again",
	[
		(call_script, "script_npc_decision_checklist_take_stand_on_issue", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(troop_set_slot, "$g_talk_troop", slot_troop_stance_on_faction_issue, ":var_1"),
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(troop_get_slot, ":g_talk_troop_faction_marshall_days_on_mission", ":g_talk_troop_faction_marshall", slot_troop_days_on_mission),
		(val_add, ":g_talk_troop_faction_marshall_days_on_mission", 5),
		(troop_set_slot, ":g_talk_troop_faction_marshall", slot_troop_days_on_mission, ":g_talk_troop_faction_marshall_days_on_mission"),
		(call_script, "script_troop_describes_troop_to_s15", "$g_talk_troop", ":var_1")
	]],

	[anyone, "lord_talk_replace_marshal_decision",
	[
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(str_store_troop_name, 4, ":g_talk_troop_faction_marshall")
	],
	"Not necessarily. It is possible for {s4} and I have to have an honest disagreement over strategy, without my seeking to replace him.", "lord_talk_ask_something_again",
	[]],

	[anyone, "lord_strategy_why_not",
	[],
	"Yes?", "lord_strategy_why_not_select",
	[]],

	[anyone|plyr, "lord_strategy_why_not_select",
	[],
	"Never mind", "lord_talk_ask_something_again",
	[]],

	[anyone|plyr, "lord_strategy_why_not_select",
	[
		(this_or_next|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 3),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 2),
		(faction_get_slot, ":g_talk_troop_faction_ai_object", "$g_talk_troop_faction", slot_faction_ai_object),
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(gt, ":g_talk_troop_faction_marshall", -1),
		(call_script, "script_find_center_to_attack_alt", ":g_talk_troop_faction_marshall", 1, 0),
		(neq, reg0, ":g_talk_troop_faction_ai_object"),
		(str_store_party_name, 4, ":g_talk_troop_faction_ai_object")
	],
	"..planning to continue with the attack on {s4}?", "lord_strategy_why_not_reason",
	[]],

	[anyone|repeat_for_parties|plyr, "lord_strategy_why_not_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(eq, ":faction_of_party_repeat_object", "$g_talk_troop_faction"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_object, ":repeat_object"),
		(neq, "$g_target_after_gathering", ":repeat_object"),
		(party_slot_ge, ":repeat_object", 67, 1),
		(str_store_party_name, 4, ":repeat_object")
	],
	"..defending {s4}?", "lord_strategy_why_not_reason",
	[
		(store_repeat_object, "$temp")
	]],

	[anyone|repeat_for_parties|plyr, "lord_strategy_why_not_select",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_salt_mine"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(store_relation, ":relation_faction_of_party_repeat_object_g_talk_troop_faction", ":faction_of_party_repeat_object", "$g_talk_troop_faction"),
		(lt, ":relation_faction_of_party_repeat_object_g_talk_troop_faction", 0),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_object, ":repeat_object"),
		(str_store_party_name, 4, ":repeat_object")
	],
	"..attacking {s4}?", "lord_strategy_why_not_reason",
	[
		(store_repeat_object, "$temp"),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(store_sub, ":value", "$g_talk_troop_faction", "fac_player_supporters_faction"),
			(val_add, ":value", 268),
			(store_current_hours, ":current_hours"),
			(party_get_slot, ":temp_value", "$temp", ":value"),
			(val_sub, ":current_hours", ":temp_value"),
		(try_end)
	]],

	[anyone, "lord_strategy_why_not_reason",
	[
		(assign, ":var_1", "$temp"),
		(store_faction_of_party, ":faction_of_party_var_1", ":var_1"),
		(eq, ":faction_of_party_var_1", "$g_talk_troop_faction"),
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(call_script, "script_find_center_to_defend", ":g_talk_troop_faction_marshall"),
		(assign, ":var_4", reg0),
		(assign, ":var_5", reg1),
		(assign, ":var_6", reg2),
		(try_begin),
			(call_script, "script_find_center_to_attack_alt", ":g_talk_troop_faction_marshall", 1, 0),
			(assign, ":var_7", reg1),
			(call_script, "script_find_center_to_attack_alt", ":g_talk_troop_faction_marshall", 1, 1),
			(assign, ":var_8", reg1),
			(try_begin),
				(ge, ":var_8", ":var_7"),
				(assign, ":value", ":var_8"),
			(else_try),
				(assign, ":value", ":var_7"),
			(try_end),
			(gt, ":value", ":var_5"),
			(assign, reg4, ":var_7"),
			(assign, reg5, ":var_5"),
			(str_store_string, 9, "str_reason_1"),
		(else_try),
			(assign, ":value_2", 0),
			(try_begin),
				(is_between, ":var_1", "p_village_1", "p_salt_mine"),
				(is_between, ":var_4", "p_town_1", "p_village_1"),
				(assign, ":value_2", 1),
			(try_end),
			(try_begin),
				(is_between, ":var_1", "p_castle_1", "p_village_1"),
				(is_between, ":var_4", "p_town_1", "p_castle_1"),
				(assign, ":value_2", 1),
			(try_end),
			(eq, ":value_2", 1),
			(str_store_party_name, 8, ":var_4"),
			(str_store_string, 9, "str_reason_2"),
		(else_try),
			(neq, ":var_4", ":var_1"),
			(str_store_party_name, 8, ":var_4"),
			(str_store_string, 9, "str_reason_3"),
		(else_try),
			(troop_get_slot, ":g_talk_troop_faction_marshall_leaded_party", ":g_talk_troop_faction_marshall", slot_troop_leaded_party),
			(party_is_active, ":g_talk_troop_faction_marshall_leaded_party"),
			(party_get_slot, ":g_talk_troop_faction_marshall_leaded_party_cached_strength", ":g_talk_troop_faction_marshall_leaded_party", slot_party_cached_strength),
			(party_get_slot, ":g_talk_troop_faction_marshall_leaded_party_follower_strength", ":g_talk_troop_faction_marshall_leaded_party", slot_party_follower_strength),
			(store_add, ":value_3", ":g_talk_troop_faction_marshall_leaded_party_cached_strength", ":g_talk_troop_faction_marshall_leaded_party_follower_strength"),
			(ge, ":var_6", ":value_3"),
			(assign, reg4, ":var_6"),
			(assign, reg5, ":value_3"),
			(str_store_string, 9, "str_reason_4"),
		(else_try),
			(str_store_string, 9, "str_reason_5"),
		(try_end)
	],
	"{s9}", "lord_talk_why_not_repeat",
	[]],

	[anyone, "lord_strategy_why_not_reason",
	[
		(assign, ":var_1", "$temp"),
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(faction_get_slot, ":g_talk_troop_faction_ai_object", "$g_talk_troop_faction", slot_faction_ai_object),
		(call_script, "script_npc_decision_checklist_evaluate_enemy_center_for_attack", ":g_talk_troop_faction_marshall", ":g_talk_troop_faction_ai_object", 1, 0),
		(assign, "$g_faction_object_score", reg0),
		(assign, "$g_do_not_skip_other_than_current_ai_object", 1),
		(call_script, "script_npc_decision_checklist_evaluate_enemy_center_for_attack", ":g_talk_troop_faction_marshall", ":var_1", 1, 0),
		(assign, "$g_do_not_skip_other_than_current_ai_object", 0),
		(lt, reg0, 0),
		(assign, ":var_4", reg1),
		(try_begin),
			(eq, "$g_use_current_ai_object_as_s8", 0),
			(str_store_party_name, 8, ":var_1"),
		(else_try),
			(str_store_party_name, 8, ":g_talk_troop_faction_ai_object"),
		(try_end),
		(str_store_string, 9, ":var_4"),
		(str_clear, 10),
		(str_store_troop_name, 11, ":g_talk_troop_faction_marshall")
	],
	"Our marshal {s11} believes that {s8} {s9}{s10}", "lord_talk_why_not_repeat",
	[]],

	[anyone, "lord_strategy_why_not_reason",
	[
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(faction_get_slot, ":g_talk_troop_faction_ai_object", "$g_talk_troop_faction", slot_faction_ai_object),
		(call_script, "script_npc_decision_checklist_evaluate_enemy_center_for_attack", ":g_talk_troop_faction_marshall", ":g_talk_troop_faction_ai_object", 1, 0),
		(assign, ":var_3", reg2),
		(call_script, "script_npc_decision_checklist_evaluate_enemy_center_for_attack", ":g_talk_troop_faction_marshall", "$temp", 1, 0),
		(assign, ":var_4", reg2),
		(try_begin),
			(eq, ":var_4", 0),
			(str_store_string, 7, "str_reason_6"),
		(else_try),
			(lt, ":var_4", 200),
			(str_store_string, 7, "str_reason_7"),
		(else_try),
			(is_between, ":var_4", 200, 300),
			(str_store_string, 7, "str_reason_8"),
		(else_try),
			(ge, ":var_4", 300),
			(str_store_string, 7, "str_reason_9"),
		(else_try),
			(str_store_string, 7, "str_error_string"),
		(try_end),
		(try_begin),
			(eq, ":var_3", 0),
			(str_store_string, 8, "str_reason_6"),
		(else_try),
			(lt, ":var_3", 200),
			(str_store_string, 8, "str_reason_7"),
		(else_try),
			(is_between, ":var_3", 200, 300),
			(str_store_string, 8, "str_reason_8"),
		(else_try),
			(ge, ":var_3", 300),
			(str_store_string, 8, "str_reason_9"),
		(else_try),
			(str_store_string, 8, "str_error_string"),
		(try_end),
		(try_begin),
			(ge, ":g_talk_troop_faction_ai_object", 0),
			(str_store_party_name, 4, ":g_talk_troop_faction_ai_object"),
		(else_try),
			(ge, "$g_target_after_gathering", 0),
			(str_store_party_name, 4, "$g_target_after_gathering"),
		(else_try),
			(str_store_party_name, 4, "str_error_string"),
		(try_end),
		(str_store_troop_name, 5, ":g_talk_troop_faction_marshall"),
		(try_begin),
			(eq, "$cheat_mode", 1),
			(store_sub, ":value", "$g_talk_troop_faction", "fac_player_supporters_faction"),
			(val_add, ":value", 268),
			(store_current_hours, ":current_hours"),
			(party_get_slot, ":temp_value", "$temp", ":value"),
			(val_sub, ":current_hours", ":temp_value"),
			(store_sub, ":value", "$g_talk_troop_faction", "fac_player_supporters_faction"),
			(val_add, ":value", 268),
			(store_current_hours, ":current_hours"),
			(party_get_slot, ":temp_value", ":g_talk_troop_faction_ai_object", ":value"),
			(val_sub, ":current_hours", ":temp_value"),
		(try_end),
		(try_begin),
			(assign, ":value_2", 0),
			(try_begin),
				(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 1),
				(lt, "$g_target_after_gathering", 0),
				(assign, ":value_2", 1),
			(try_end),
			(this_or_next|eq, ":value_2", 1),
			(this_or_next|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 2),
			(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 3),
			(str_store_string, 3, "str_has_decided_that_an_attack_on_"),
			(str_store_string, 6, "str_this_would_be_better_worth_the_effort"),
		(else_try),
			(str_store_string, 3, "str_has_decided_to_defend_"),
			(str_store_party_name, 9, "$temp"),
			(str_store_string, 6, "str_before_going_offensive_we_should_protect_our_lands_if_there_is_any_threat_so_this_can_be_reason_marshall_choosed_defending_s4"),
			(str_clear, 8),
		(try_end)
	],
	"We could go there. {s7} However, {s5} {s3} {s4}. {s6} {s8}.", "lord_talk_why_not_repeat",
	[]],

	[anyone, "lord_talk_why_not_repeat",
	[],
	"Did you have any similar questions? Why we are not...", "lord_strategy_why_not_select",
	[]],

	[anyone, "lord_talk_ask_marriage_1",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 8),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_betrothed, "trp_player"),
		(troop_slot_eq, "trp_player", slot_troop_betrothed, "$g_talk_troop")
	],
	"Have no fear, I have no intention of changing my mind.  We will be married as soon as there is an opportunity worthy of the august event.", "lord_pretalk",
	[]],

	[anyone, "lord_talk_ask_marriage_1",
	[
		(eq, "$g_talk_troop", "trp_kingdom_6_pretender"),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 8),
		(this_or_next|ge, "$g_disable_condescending_comments", 2),
		(neq, reg65, "$character_gender"),
		(try_begin),
			(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
			(is_between, ":g_talk_troop_original_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(str_store_faction_name, 0, ":g_talk_troop_original_faction"),
		(else_try),
			(str_store_faction_name, 0, "$g_talk_troop_faction"),
		(try_end)
	],
	"I do not forget that it was your strong right arm that placed me on this throne.  Do you aim to take Baybak's place as my {husband/wife}, to rule the {s0} with me as Commander of the Armies even as I am Mother of the Realm?", "dplmc_claimant_marriage_proposal_pc_confirm",
	[]],

	[anyone, "lord_talk_ask_marriage_1",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 8),
		(this_or_next|ge, "$g_disable_condescending_comments", 2),
		(neq, reg65, "$character_gender"),
		(try_begin),
			(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
			(is_between, ":g_talk_troop_original_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(str_store_faction_name, 0, ":g_talk_troop_original_faction"),
		(else_try),
			(str_store_faction_name, 0, "$g_talk_troop_faction"),
		(try_end)
	],
	"Are you proposing to rule the {s0} alongside me as my {husband/wife}?", "dplmc_claimant_marriage_proposal_pc_confirm",
	[]],

	[anyone|plyr, "dplmc_claimant_marriage_proposal_pc_confirm",
	[],
	"Yes. That is my proposal.", "dplmc_claimant_marriage_proposal_pc_reax",
	[]],

	[anyone|plyr, "dplmc_claimant_marriage_proposal_pc_confirm",
	[],
	"No, I think you have misunderstood me.  Forget I brought it up.", "lord_pretalk",
	[]],

	[anyone|plyr, "dplmc_claimant_marriage_proposal_pc_confirm",
	[
		(lt, "$g_disable_condescending_comments", 2),
		(eq, reg65, "$character_gender")
	],
	"Oh, HELL no!  No, you totally have the wrong idea... forget I said anything.", "lord_pretalk",
	[]],

	[anyone, "dplmc_claimant_marriage_proposal_pc_reax",
	[
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_betrothed, "trp_player"),
		(troop_slot_eq, "trp_player", slot_troop_betrothed, "$g_talk_troop")
	],
	"Have no fear, I have no intention of changing my mind.  We will be married as soon as there is an opportunity worthy of the august event.", "lord_pretalk",
	[]],

	[anyone, "dplmc_claimant_marriage_proposal_pc_reax",
	[
		(troop_get_slot, ":g_talk_troop_spouse", "$g_talk_troop", slot_troop_spouse),
		(ge, ":g_talk_troop_spouse", 0),
		(str_store_troop_name, 0, ":g_talk_troop_spouse")
	],
	"Unfortunately this is impossible, since I am already married to {s0}.", "lord_pretalk",
	[]],

	[anyone, "dplmc_claimant_marriage_proposal_pc_reax",
	[
		(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
		(ge, ":player_spouse", 1),
		(str_store_troop_name, 0, ":player_spouse")
	],
	"Unfortunately this is impossible, since you are already married to {s0}.", "lord_pretalk",
	[]],

	[anyone, "dplmc_claimant_marriage_proposal_pc_reax",
	[
		(troop_get_slot, ":g_talk_troop_betrothed", "$g_talk_troop", slot_troop_betrothed),
		(ge, ":g_talk_troop_betrothed", 0),
		(str_store_troop_name, 0, ":g_talk_troop_betrothed")
	],
	"Unfortunately this is impossible, since I am already engaged to {s0}.", "lord_pretalk",
	[]],

	[anyone, "dplmc_claimant_marriage_proposal_pc_reax",
	[
		(troop_get_slot, ":player_betrothed", "trp_player", slot_troop_betrothed),
		(ge, ":player_betrothed", 1),
		(str_store_troop_name, 0, ":player_betrothed")
	],
	"Unfortunately this is impossible, since you are already engaged to {s0}.", "lord_pretalk",
	[]],

	[anyone, "dplmc_claimant_marriage_proposal_pc_reax",
	[
		(assign, reg0, -1),
		(str_store_string, 14, "str_error_string"),
		(try_begin),
			(call_script, "script_cf_dplmc_evaluate_pretender_proposal", "$g_talk_troop"),
		(try_end),
		(lt, reg0, 1)
	],
	"{s14}", "lord_pretalk",
	[]],

	[anyone, "dplmc_claimant_marriage_proposal_pc_reax",
	[],
	"{s14}", "lord_marriage_proposal_female_pc_confirm_engagement",
	[]],

	[anyone, "lord_talk_ask_marriage_1",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(ge, "$g_talk_troop_relation", 50),
		(troop_slot_ge, "trp_player", 7, 500),
		(store_character_level, ":character_level_player", "trp_player"),
		(ge, ":character_level_player", 15)
	],
	"It is our custom to seal any such alliances with marriage.  You have made quite a few waves since your arrival, and I might be willing to consider such an arrangement, but unfortunately no one in my household is eligible to wed.", "lord_pretalk",
	[]],

	[anyone, "lord_talk_ask_marriage_1",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(try_begin),
			(eq, reg65, 1),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 5, 0),
		(else_try),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 4, 0),
		(try_end)
	],
	"You will not take offense if I tell you that, as a ruler, I have other plans for my children.", "lord_pretalk",
	[]],

	[anyone, "lord_talk_ask_marriage_1",
	[
		(assign, "$marriage_candidate", -1),
		(try_begin),
			(assign, ":value", "$character_gender"),
			(assign, ":value_2", reg65),
			(this_or_next|eq, ":value_2", 1),
			(eq, ":value", 1),
			(troop_slot_eq, "$g_talk_troop", slot_troop_spouse, -1),
			(assign, "$marriage_candidate", "$g_talk_troop"),
		(else_try),
			(assign, ":value", "$character_gender"),
			(assign, ":value_2", reg65),
			(eq, ":value_2", 0),
			(assign, "$marriage_candidate", -1),
			(assign, ":value_3", "trp_heroes_end"),
			(try_for_range, ":troop", "trp_knight_1_1_wife", ":value_3"),
				(neg|troop_slot_ge, ":troop", 2, 11),
				(troop_slot_eq, ":troop", slot_troop_spouse, -1),
				(troop_slot_eq, ":troop", slot_troop_betrothed, -1),
				(call_script, "script_get_kingdom_lady_social_determinants", ":troop"),
				(eq, reg0, "$g_talk_troop"),
				(call_script, "script_dplmc_store_troop_is_female", ":troop"),
				(neq, reg0, ":value"),
				(assign, ":value_3", ":troop"),
				(call_script, "script_troop_get_family_relation_to_troop", ":troop", "$g_talk_troop"),
				(assign, "$marriage_candidate", ":troop"),
				(str_store_troop_name, 14, "$marriage_candidate"),
				(str_store_string, 15, "str_it_is_our_custom_to_seal_any_such_alliances_with_marriage_and_in_fact_we_have_been_looking_for_a_suitable_groom_for_my_s11_s14"),
			(try_end),
		(try_end),
		(eq, "$marriage_candidate", -1)
	],
	"It is our custom to seal any such alliances with marriage. Unfortunately, no one in my household is eligible to wed.", "lord_pretalk",
	[]],

	[anyone, "lord_talk_ask_marriage_1",
	[
		(neq, "$marriage_candidate", "$g_talk_troop")
	],
	"{s15}", "lord_courtship_pre_permission",
	[]],

	[anyone, "lord_talk_ask_marriage_1",
	[
		(eq, "$marriage_candidate", "$g_talk_troop")
	],
	"Are you proposing that you and I marry?", "lord_marriage_proposal_female_pc_confirm",
	[]],

	[anyone|plyr, "lord_courtship_pre_permission",
	[
		(neg|troop_slot_ge, "trp_player", 30, 1),
		(neg|troop_slot_ge, "trp_player", 34, 1),
		(neq, reg65, 1),
		(assign, ":var_1", "$character_gender"),
		(eq, ":var_1", 0),
		(str_clear, 15),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_troop_love_interests_end, -1),
			(str_store_string, 15, "str_once_again_"),
		(try_end)
	],
	"May I {s15}suggest that I be considered as a {groom/bride}?", "lord_courtship_permission",
	[]],

	[anyone|plyr, "lord_courtship_pre_permission",
	[
		(eq, "$cheat_mode", 2)
	],
	"CHEAT -- Start engagement", "lord_marriage_permission_engagement_date",
	[
		(setup_quest_text, "qst_formal_marriage_proposal"),
		(str_store_string, 2, "str_cheat__marriage_proposal"),
		(call_script, "script_start_quest", "qst_formal_marriage_proposal", "$marriage_candidate"),
		(quest_set_slot, "qst_formal_marriage_proposal", slot_quest_giver_troop, "$marriage_candidate")
	]],

	[anyone|plyr, "lord_courtship_pre_permission",
	[],
	"Never mind", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_marriage_proposal_female_pc_confirm",
	[],
	"Yes. That is my proposal.", "lord_marriage_proposal_female_pc_reax",
	[]],

	[anyone|plyr, "lord_marriage_proposal_female_pc_confirm",
	[],
	"No, I think you have misunderstood me.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_marriage_proposal_female_pc_confirm",
	[
		(lt, "$g_disable_condescending_comments", 2),
		(eq, reg65, "$character_gender")
	],
	"Oh, HELL no!  No, you totally have the wrong idea... forget I said anything.", "lord_pretalk",
	[]],

	[anyone, "lord_marriage_proposal_female_pc_reax",
	[
		(call_script, "script_npc_decision_checklist_marry_female_pc", "$g_talk_troop"),
		(le, reg0, 0)
	],
	"{s14}", "lord_pretalk",
	[]],

	[anyone, "lord_marriage_proposal_female_pc_reax",
	[
		(call_script, "script_npc_decision_checklist_marry_female_pc", "$g_talk_troop"),
		(eq, reg0, 2)
	],
	"{s14}", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_met, 2)
	]],

	[anyone, "lord_marriage_proposal_female_pc_reax",
	[],
	"{s14}", "lord_marriage_proposal_female_pc_next_step",
	[]],

	[anyone, "lord_marriage_proposal_female_pc_next_step",
	[
		(lt, "$g_disable_condescending_comments", 2),
		(neq, reg65, "$character_gender"),
		(is_between, "$g_talk_troop", "trp_npc1", "trp_heroes_end"),
		(this_or_next|neg|is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 8),
		(this_or_next|neg|is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 8),
		(troop_get_slot, reg0, "$g_talk_troop", slot_lord_reputation_type),
		(neq, reg0, 4),
		(neq, reg0, 6),
		(this_or_next|lt, "$g_disable_condescending_comments", 0),
		(this_or_next|eq, reg0, 21),
		(this_or_next|eq, reg0, 25),
		(this_or_next|eq, reg0, 1),
		(eq, reg0, 7),
		(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", "$character_gender"),
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 8, 0)
	],
	"I must say, though. You live your life like a {woman/man}, riding where you will, with the company you choose. This will not make it easy for the other {s0} to accept our marriage. I don't suppose that you would give up adventuring, for the sake of our marriage?", "lord_marriage_proposal_female_pc_next_step_2",
	[]],

	[anyone|plyr, "lord_marriage_proposal_female_pc_next_step_2",
	[],
	"I think not!", "lord_marriage_proposal_female_pc_next_step_5",
	[]],

	[anyone|plyr, "lord_marriage_proposal_female_pc_next_step_2",
	[],
	"Very well.", "lord_marriage_proposal_female_pc_next_step_5",
	[]],

	[anyone, "lord_marriage_proposal_female_pc_next_step",
	[],
	"I suppose the next step would be for me to send a message to your family, asking for their permission to marry you, but I suppose that you make your own decisions.", "lord_marriage_proposal_female_pc_next_step_4",
	[]],

	[anyone|plyr, "lord_marriage_proposal_female_pc_next_step_4",
	[],
	"You assume correctly.", "lord_marriage_proposal_female_pc_next_step_5",
	[]],

	[anyone, "lord_marriage_proposal_female_pc_next_step_5",
	[
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 8, 0)
	],
	"Very well, then. As there are no obstacles to our marriage, should we then consider ourselves engaged to be wed? I will organize a great feast, and we can exchange our vows before all the {s0} of the realm. If you are willing, that is...", "lord_marriage_proposal_female_pc_confirm_engagement",
	[]],

	[anyone|plyr, "lord_marriage_proposal_female_pc_confirm_engagement",
	[],
	"I am willing.", "lord_marriage_proposal_female_pc_confirm_engagement_yes",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_betrothed, "trp_player"),
		(troop_set_slot, "trp_player", slot_troop_betrothed, "$g_talk_troop"),
		(assign, "$g_other_quest", 0),
		(try_begin),
			(store_partner_quest, ":partner_quest_g_talk_troop", "$g_talk_troop"),
			(gt, ":partner_quest_g_talk_troop", 0),
			(assign, "$g_other_quest", ":partner_quest_g_talk_troop"),
		(try_end),
		(str_store_troop_name, 4, "$g_talk_troop"),
		(setup_quest_text, "qst_wed_betrothed_female"),
		(str_store_string, 2, "str_you_plan_to_marry_s4_as_you_have_no_family_in_calradia_he_will_organize_the_wedding_feast"),
		(call_script, "script_start_quest", "qst_wed_betrothed_female", "$g_talk_troop"),
		(quest_set_slot, "qst_wed_betrothed_female", slot_quest_expiration_days, 120),
		(quest_set_slot, "qst_wed_betrothed_female", slot_quest_giver_troop, "$g_talk_troop")
	]],

	[anyone|plyr, "lord_marriage_proposal_female_pc_confirm_engagement",
	[],
	"Actually, I would like to reconsider.", "lord_marriage_proposal_female_pc_confirm_engagement_no",
	[]],

	[anyone, "lord_marriage_proposal_female_pc_confirm_engagement_yes",
	[
		(str_clear, 12),
		(try_begin),
			(gt, "$g_other_quest", 0),
			(call_script, "script_succeed_quest", "$g_other_quest"),
			(call_script, "script_end_quest", "$g_other_quest"),
			(str_store_string, 12, "str_cancel_fiancee_quest"),
		(try_end)
	],
	"Very well. Hopefully, a little over a month from now, we shall be wed.{s12}", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_marriage_proposal_female_pc_confirm_engagement_no",
	[],
	"Take whatever time you need, my {lord/lady}.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$talk_context", 2),
		(lt, "$g_encountered_party_relation", 0),
		(str_store_troop_name, 4, "$g_talk_troop")
	],
	"I say this only once, {s4}! Surrender or die!", "party_encounter_lord_hostile_ultimatum_surrender",
	[]],

	[anyone, "party_encounter_lord_hostile_ultimatum_surrender",
	[],
	"{s43}", "close_window",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_lord_challenged_default"),
		(call_script, "script_make_kingdom_hostile_to_player", "$g_encountered_party_faction", -3),
		(try_begin),
			(gt, "$g_talk_troop_relation", -10),
			(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -1),
		(try_end),
		(assign, "$encountered_party_hostile", 1),
		(assign, "$encountered_party_friendly", 0)
	]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$talk_context", 2),
		(neq, "$g_encountered_party_faction", "$players_kingdom"),
		(ge, "$g_encountered_party_relation", 0)
	],
	"I'm here to deliver you my demands!", "lord_predemand",
	[]],

	[anyone, "lord_predemand",
	[],
	"Eh? What do you want?", "lord_demand",
	[]],

	[anyone|plyr, "lord_demand",
	[
		(neq, "$g_encountered_party_faction", "$players_kingdom"),
		(ge, "$g_encountered_party_relation", 0)
	],
	"I offer you one chance to surrender or die.", "lord_ultimatum_surrender",
	[]],

	[anyone, "lord_ultimatum_surrender",
	[
		(ge, "$g_encountered_party_relation", 0)
	],
	"{s43}", "lord_attack_verify",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_unprovoked_attack_default"),
		(try_begin),
			(faction_slot_ge, "$g_encountered_party_faction", 120, 1),
			(str_store_faction_name, 34, "$g_encountered_party_faction"),
			(str_store_string, 43, "str_s43_just_so_you_know_if_you_attack_me_you_will_be_in_violation_of_the_truce_you_signed_with_the_s34"),
		(try_end),
		(try_begin),
			(eq, "$players_kingdom", "fac_player_supporters_faction"),
			(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
			(str_store_string, 43, "str_s43_also_you_should_know_that_an_unprovoked_assault_is_declaration_of_war"),
		(else_try),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(str_store_string, 43, "str_s43_also_you_should_know_that_an_unprovoked_assault_is_declaration_of_war"),
		(try_end)
	]],

	[anyone|plyr, "lord_attack_verify",
	[],
	"Forgive me, my lord. I don't know what I was thinking.", "lord_attack_verify_cancel",
	[]],

	[anyone, "lord_attack_verify_cancel",
	[],
	"Be gone, then.", "close_window",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "lord_attack_verify",
	[],
	"That is none of your business. Prepare to fight!", "lord_attack_verify_commit",
	[]],

	[anyone, "lord_ultimatum_surrender",
	[],
	"{s43}", "lord_attack_verify_b",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_unnecessary_attack_default"),
		(call_script, "script_make_kingdom_hostile_to_player", "$g_encountered_party_faction", -3),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -5),
		(assign, "$encountered_party_hostile", 1),
		(assign, "$encountered_party_friendly", 0)
	]],

	[anyone|plyr, "lord_attack_verify_b",
	[],
	"Forgive me, my lord. I don't know what I was thinking.", "lord_attack_verify_cancel",
	[]],

	[anyone|plyr, "lord_attack_verify_b",
	[],
	"I stand my ground. Prepare to fight!", "lord_attack_verify_commit",
	[]],

	[anyone, "lord_attack_verify_commit",
	[],
	"{s43}", "close_window",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_lord_challenged_default"),
		(try_begin),
			(ge, "$g_encountered_party_relation", 0),
			(call_script, "script_diplomacy_party_attacks_neutral", "p_main_party", "$g_encountered_party"),
		(try_end),
		(assign, ":value", 0),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", 1),
		(try_end),
		(try_begin),
			(neq, "$players_kingdom", "fac_player_supporters_faction"),
			(neq, ":value", 1),
			(call_script, "script_make_kingdom_hostile_to_player", "$g_encountered_party_faction", -3),
		(else_try),
			(this_or_next|eq, ":value", 1),
			(eq, "$players_kingdom", "fac_player_supporters_faction"),
			(call_script, "script_diplomacy_start_war_between_kingdoms", "fac_player_supporters_faction", "$g_encountered_party_faction", 1),
		(try_end),
		(assign, "$encountered_party_hostile", 1),
		(assign, "$encountered_party_friendly", 0),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -30)
	]],

	[anyone|plyr, "lord_demand",
	[],
	"Forgive me. It's nothing.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_home_speech_delivered, 0),
		(assign, ":value", 0),
		(try_for_range, ":troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
			(neq, ":troop", "$g_talk_troop"),
			(troop_slot_eq, ":troop", slot_troop_original_faction, "$g_talk_troop_faction"),
			(assign, ":value", ":troop"),
		(try_end),
		(troop_slot_ge, ":value", 5, 1),
		(str_store_troop_name, 45, ":value"),
		(troop_get_type, reg3, ":value"),
		(assign, reg3, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":value"),
			(assign, reg3, 1),
		(try_end)
	],
	"I have met in my travels one who calls {reg3?herself:himself} {s45}...", "liege_defends_claim_1",
	[]],

	[anyone, "liege_defends_claim_1",
	[],
	"Oh really? It is not everyone who dares mention that name in my presence. I am not sure whether to reward your bravery, or punish you for your impudence.", "liege_defends_claim_2",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_home_speech_delivered, 1)
	]],

	[anyone, "liege_defends_claim_2",
	[],
	"Very well. I will indulge your curiosity. But listen closely, because I do not wish to speak of this matter again.", "liege_defends_claim_3",
	[]],

	[anyone, "liege_defends_claim_3",
	[],
	"{s48}", "liege_defends_claim_4",
	[
		(store_sub, ":value", "$g_talk_troop_faction", "fac_kingdom_1"),
		(val_add, ":value", "str_swadian_rebellion_monarch_response_1"),
		(str_store_string, 48, ":value")
	]],

	[anyone, "liege_defends_claim_4",
	[],
	"{s48}", "lord_talk",
	[
		(store_sub, ":value", "$g_talk_troop_faction", "fac_kingdom_1"),
		(val_add, ":value", "str_swadian_rebellion_monarch_response_2"),
		(str_store_string, 48, ":value")
	]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$cheat_mode", 2),
		(gt, "$supported_pretender", 0),
		(eq, "$supported_pretender_old_faction", "$g_talk_troop_faction"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(troop_slot_ge, "$g_talk_troop", 10, 1)
	],
	"{!}CHEAT - Join our cause by force.", "lord_join_rebellion_suggest_cheat",
	[]],

	[anyone|plyr, "party_encounter_lord_hostile_attacker_2",
	[
		(eq, "$cheat_mode", 2),
		(gt, "$supported_pretender", 0),
		(eq, "$supported_pretender_old_faction", "$g_talk_troop_faction"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(troop_slot_ge, "$g_talk_troop", 10, 1)
	],
	"{!}CHEAT - Join our cause by force.", "lord_join_rebellion_suggest_cheat",
	[]],

	[anyone, "lord_join_rebellion_suggest_cheat",
	[],
	"Cheat:Allright.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_home_speech_delivered, 1),
		(call_script, "script_change_troop_faction", "$g_talk_troop", "$players_kingdom"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "lord_talk",
	[
		(troop_get_slot, ":g_talk_troop_prisoner_of_party", "$g_talk_troop", slot_troop_prisoner_of_party),
		(is_between, ":g_talk_troop_prisoner_of_party", "p_town_1", "p_salt_mine"),
		(neg|party_slot_eq, ":g_talk_troop_prisoner_of_party", slot_town_lord, "trp_player"),
		(neq, "$talk_context", 18)
	],
	"I've come to break you out of here.", "lord_prison_break_chains",
	[]],

	[anyone, "lord_prison_break_chains",
	[],
	"Thank the heavens you came! However, I'm not going anywhere with these chains on my legs. You'll need to get the key away from the guard somehow.", "close_window",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(ge, "$cheat_mode", 1),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"{!}CHEAT - Take the following action.", "lord_suggest_action_ask",
	[]],

	[anyone, "lord_tell_objective",
	[
		(troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"What am I doing? What does it look like I'm doing?! I'm a prisoner here!", "lord_pretalk",
	[]],

	[anyone, "lord_tell_objective",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_leaded_party, -1)
	],
	"I am not commanding any {reg65?soldiers:men} at the moment.", "lord_pretalk",
	[]],

	[anyone, "lord_tell_objective",
	[
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 7),
		(party_get_attached_to, ":attached_to_l_g_talk_troop_party", "$g_talk_troop_party"),
		(try_begin),
			(lt, ":attached_to_l_g_talk_troop_party", 0),
			(party_get_cur_town, ":attached_to_l_g_talk_troop_party", "$g_talk_troop_party"),
		(try_end),
		(is_between, ":attached_to_l_g_talk_troop_party", "p_town_1", "p_salt_mine")
	],
	"We are resting at {s1}. {s14}{s15}", "lord_pretalk",
	[
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(str_store_party_name, 1, ":g_talk_troop_party_ai_object")
	]],

	[anyone, "lord_tell_objective",
	[
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 7)
	],
	"We are travelling to {s1}. {s14}{s15}", "lord_pretalk",
	[
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(str_store_party_name, 1, ":g_talk_troop_party_ai_object")
	]],

	[anyone|auto_proceed, "lord_tell_objective",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_marshall, "$g_talk_troop"),
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 16)
	],
	"{!}Warning: This line should never display.", "lord_tell_objective_2",
	[]],

	[anyone, "lord_tell_objective_2",
	[],
	"I am heading to the vicinity of {s1}. {s14}{s15}", "lord_pretalk",
	[
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(str_store_party_name, 1, ":g_talk_troop_party_ai_object")
	]],

	[anyone, "lord_tell_objective",
	[
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 16)
	],
	"We are recruiting new soldiers from {s1}. {s14}{s15}", "lord_pretalk",
	[
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(str_store_party_name, 1, ":g_talk_troop_party_ai_object")
	]],

	[anyone, "lord_tell_objective",
	[
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 4)
	],
	"We are scouting for the enemy around {s1}. {s14}{s15}", "lord_pretalk",
	[
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(str_store_party_name, 1, ":g_talk_troop_party_ai_object")
	]],

	[anyone, "lord_tell_objective",
	[
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 5),
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(str_store_party_name, 1, ":g_talk_troop_party_ai_object")
	],
	"We are laying waste to the village of {s1}. {s14}{s15}", "lord_pretalk",
	[]],

	[anyone, "lord_tell_objective",
	[
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 14)
	],
	"We are retreating to {s1}. {s14}{s15}", "lord_pretalk",
	[
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(str_store_party_name, 1, ":g_talk_troop_party_ai_object")
	]],

	[anyone, "lord_tell_objective",
	[
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 1)
	],
	"We are besieging {s1}.", "lord_pretalk",
	[
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(str_store_party_name, 1, ":g_talk_troop_party_ai_object")
	]],

	[anyone, "lord_tell_objective",
	[
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 10),
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(party_is_active, ":g_talk_troop_party_ai_object")
	],
	"We are fighting against {s1}. {s14}{s15}", "lord_pretalk",
	[
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(str_store_party_name, 1, ":g_talk_troop_party_ai_object")
	]],

	[anyone, "lord_tell_objective",
	[
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 12)
	],
	"I am screening {s1}'s advance. {s14}{s15}", "lord_pretalk",
	[
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(party_stack_get_troop_id, ":party_stack_troop_id_g_talk_troop_party_ai_object_0", ":g_talk_troop_party_ai_object", 0),
		(str_store_troop_name, 1, ":party_stack_troop_id_g_talk_troop_party_ai_object_0")
	]],

	[anyone, "lord_tell_objective",
	[
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 11)
	],
	"We are accompanying {s1}. {s14}{s15}", "lord_pretalk",
	[
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(str_store_party_name, 1, ":g_talk_troop_party_ai_object")
	]],

	[anyone, "lord_tell_objective",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_marshall, "$g_talk_troop"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 0),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 6)
	],
	"I am leading the army of the realm.", "lord_talk_ask_about_strategy",
	[]],

	[anyone, "lord_tell_objective",
	[
		(assign, ":value", 0),
		(try_begin),
			(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, -1),
			(assign, ":value", 1),
		(else_try),
			(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 10),
			(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
			(neg|party_is_active, ":g_talk_troop_party_ai_object"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"We are reconsidering our next objective.", "lord_pretalk",
	[]],

	[anyone, "lord_tell_objective",
	[],
	"I don't know: {reg1} {s1} (ERROR)", "lord_pretalk",
	[
		(party_get_slot, reg1, "$g_talk_troop_party", slot_party_ai_state),
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(str_store_party_name, 1, ":g_talk_troop_party_ai_object")
	]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$talk_context", 2),
		(eq, 1, 0),
		(eq, "$g_talk_troop_faction", "$players_kingdom"),
		(party_slot_eq, "$g_encountered_party", slot_party_following_player, 0),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_marshall, "trp_player")
	],
	"Will you follow me? I have a plan.", "lord_ask_follow",
	[]],

	[anyone, "lord_ask_follow",
	[
		(party_get_slot, ":g_encountered_party_dont_follow_player_until_time", "$g_encountered_party", slot_party_dont_follow_player_until_time),
		(store_current_hours, ":current_hours"),
		(lt, ":current_hours", ":g_encountered_party_dont_follow_player_until_time")
	],
	"I enjoy your company, {playername}, but there are other things I must attend to. Perhaps in a few days I can ride with you again.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_ask_follow",
	[
		(troop_get_slot, ":g_talk_troop_renown", "$g_talk_troop", slot_troop_renown),
		(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
		(val_mul, ":g_talk_troop_renown", 3),
		(val_div, ":g_talk_troop_renown", 4),
		(lt, ":player_renown", ":g_talk_troop_renown")
	],
	"That would hardly be proper, {playername}. Why don't you follow me instead?", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_ask_follow",
	[
		(lt, "$g_talk_troop_effective_relation", 25)
	],
	"{s43}", "close_window",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_lord_follow_refusal_default"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_ask_follow",
	[],
	"Lead the way, {playername}! Let us bring death and defeat to all our enemies.", "close_window",
	[
		(party_set_slot, "$g_talk_troop_party", slot_party_commander_party, "p_main_party"),
		(call_script, "script_npc_decision_checklist_party_ai", "$g_talk_troop"),
		(call_script, "script_party_set_ai_state", "$g_talk_troop_party", reg0, reg1),
		(store_current_hours, ":current_hours"),
		(store_add, ":value", 30, "$g_talk_troop_relation"),
		(val_div, ":value", 2),
		(val_add, ":current_hours", ":value"),
		(party_set_slot, "$g_encountered_party", slot_party_follow_player_until_time, ":current_hours"),
		(party_set_slot, "$g_encountered_party", slot_party_following_player, 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_talk_preoffer",
	[],
	"Yes?", "lord_talk_offer",
	[]],

	[anyone|plyr, "lord_talk_offer",
	[
		(eq, 1, 0)
	],
	"I wish to ransom one of your prisoners.", "knight_offer_join",
	[]],

	[anyone|plyr, "lord_talk_offer",
	[],
	"Never mind.", "lord_pretalk",
	[]],

	[anyone, "knight_offer_join",
	[
		(call_script, "script_cf_is_quest_troop", "$g_talk_troop")
	],
	"I fear I cannot join you at the moment, {playername}, I've important business to attend to and it cannot wait.", "hero_pretalk",
	[]],

	[anyone, "knight_offer_join",
	[
		(lt, "$g_talk_troop_relation", 5),
		(store_character_level, ":character_level_player", "trp_player"),
		(store_character_level, ":character_level_g_talk_troop", "$g_talk_troop"),
		(val_mul, ":character_level_player", 2),
		(lt, ":character_level_player", ":character_level_g_talk_troop")
	],
	"You forget your place. I do not take orders from the likes of you.", "hero_pretalk",
	[]],

	[anyone, "knight_offer_join",
	[
		(assign, ":var_1", 0),
		(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 5),
			(val_add, ":var_1", 1),
		(try_end),
		(assign, reg5, ":var_1"),
		(store_add, reg6, reg5, 1),
		(val_mul, reg6, reg6),
		(val_mul, reg6, 1000),
		(gt, reg6, 0)
	],
	"I would be glad to fight at your side, my friend, but there is a problem... The thing is, I've found myself in a bit of debt that I must repay very soon. {reg6} coins altogether, and I am honour-bound to return every coin. Unless you've got {reg6} coins with you that you can spare, I've to keep my mind on getting this weight off my neck.", "knight_offer_join_2",
	[]],

	[anyone, "knight_offer_join",
	[
		(gt, reg6, 100000)
	],
	"Join you? I think not.", "close_window",
	[]],

	[anyone, "knight_offer_join",
	[],
	"Aye, my friend, I'll be happy to join you.", "knight_offer_join_2",
	[]],

	[anyone|plyr, "knight_offer_join_2",
	[
		(gt, reg6, 0),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(gt, ":troop_gold_player", reg6)
	],
	"Here, take it, all {reg6} coins you need. 'Tis only money.", "knight_offer_join_accept",
	[
		(troop_remove_gold, "trp_player", reg6)
	]],

	[anyone|plyr, "knight_offer_join_2",
	[
		(le, reg6, 0)
	],
	"Then let us ride together, my friend.", "knight_offer_join_accept",
	[]],

	[anyone|plyr, "knight_offer_join_2",
	[
		(eq, "$talk_context", 8)
	],
	"That's good to know. I will think on it.", "close_window",
	[]],

	[anyone|plyr, "knight_offer_join_2",
	[
		(neq, "$talk_context", 8)
	],
	"That's good to know. I will think on it.", "hero_pretalk",
	[]],

	[anyone, "knight_offer_join_accept",
	[
		(troop_slot_ge, "$g_talk_troop", 10, 1)
	],
	"I've some trusted men in my band who could be of use to you. What do you wish to do with them?", "knight_offer_join_accept_party",
	[]],

	[anyone, "knight_offer_join_accept",
	[],
	"Ah, certainly, it might be fun!", "close_window",
	[
		(call_script, "script_recruit_troop_as_companion", "$g_talk_troop"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "knight_offer_join_accept_party",
	[],
	"You may disband your men. I've no need for other troops.", "knight_join_party_disband",
	[]],

	[anyone|plyr, "knight_offer_join_accept_party",
	[
		(troop_get_slot, ":g_talk_troop_leaded_party", "$g_talk_troop", slot_troop_leaded_party),
		(party_can_join_party, ":g_talk_troop_leaded_party", "p_main_party")
	],
	"Your men may join as well. We need every soldier we can muster.", "knight_join_party_join",
	[]],

	[anyone|plyr, "knight_offer_join_accept_party",
	[
		(is_between, "$g_encountered_party", "p_town_1", "p_salt_mine")
	],
	"Lead your men out of the town. I shall catch up with you on the road.", "knight_join_party_lead_out",
	[]],

	[anyone|plyr, "knight_offer_join_accept_party",
	[
		(neg|is_between, "$g_encountered_party", "p_town_1", "p_salt_mine")
	],
	"Keep doing what you were doing. I'll catch up with you later.", "knight_join_party_lead_out",
	[]],

	[anyone, "knight_join_party_disband",
	[],
	"Ah . . . Very well, {playername}. Much as I dislike losing good men, the decision is yours. I'll disband my troops and join you.", "close_window",
	[
		(call_script, "script_recruit_troop_as_companion", "$g_talk_troop"),
		(troop_get_slot, ":g_talk_troop_leaded_party", "$g_talk_troop", slot_troop_leaded_party),
		(party_detach, ":g_talk_troop_leaded_party"),
		(remove_party, ":g_talk_troop_leaded_party"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "knight_join_party_join",
	[],
	"Excellent. My lads and I will ride with you.", "close_window",
	[
		(call_script, "script_recruit_troop_as_companion", "$g_talk_troop"),
		(party_remove_members, "p_main_party", "$g_talk_troop", 1),
		(troop_get_slot, ":g_talk_troop_leaded_party", "$g_talk_troop", slot_troop_leaded_party),
		(assign, "$g_move_heroes", 1),
		(call_script, "script_party_add_party", "p_main_party", ":g_talk_troop_leaded_party"),
		(party_detach, ":g_talk_troop_leaded_party"),
		(remove_party, ":g_talk_troop_leaded_party"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "knight_join_party_lead_out",
	[],
	"Very well then. I shall maintain a patrol of this area. Return if you have further orders for me.", "close_window",
	[
		(call_script, "script_recruit_troop_as_companion", "$g_talk_troop"),
		(party_remove_members, "p_main_party", "$g_talk_troop", 1),
		(troop_get_slot, ":g_talk_troop_leaded_party", "$g_talk_troop", slot_troop_leaded_party),
		(party_set_faction, ":g_talk_troop_leaded_party", "fac_player_supporters_faction"),
		(party_detach, ":g_talk_troop_leaded_party"),
		(party_set_ai_behavior, ":g_talk_troop_leaded_party", 2),
		(party_set_flags, ":g_talk_troop_leaded_party", 65536, 0)
	]],

	[anyone, "lord_enter_service_reject",
	[
		(eq, "$players_kingdom", "fac_player_supporters_faction")
	],
	"Indeed.... Did you offer vassalage, then, just to by time? Very well -- you shall have time to reconsider, but if you are toying with me, it will do your reputation no credit.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_give_oath_give_up",
	[
		(eq, "$players_kingdom", "fac_player_supporters_faction")
	],
	"Indeed.... Did you offer vassalage, then, just to buy time? Very well -- you shall have time to reconsider, but if you are toying with me, it will do your reputation no credit.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_enter_service_reject",
	[],
	"What pigswill! And to think I would offer you a place among my nobles. Begone, beggar, before I lose my temper!", "close_window",
	[
		(try_begin),
			(store_partner_quest, ":partner_quest"),
			(eq, ":partner_quest", "qst_join_faction"),
			(call_script, "script_abort_quest", "qst_join_faction", 1),
		(try_end),
		(assign, "$g_invite_faction", 0),
		(assign, "$g_invite_faction_lord", 0),
		(assign, "$g_invite_offered_center", 0),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_ask_enter_service",
	[
		(gt, "$players_kingdom", 0),
		(neq, "$players_kingdom", "$g_talk_troop_faction"),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(neq, ":players_kingdom_leader", "trp_player"),
		(str_store_troop_name, 5, ":players_kingdom_leader")
	],
	"You are already oath-bound to serve {s5}, are you not?", "lord_give_oath_under_oath_already",
	[]],

	[anyone|plyr, "lord_give_oath_under_oath_already",
	[],
	"Indeed I am, {s65}. Forgive my rambling.", "lord_pretalk",
	[]],

	[anyone, "lord_ask_enter_service",
	[
		(lt, "$g_talk_troop_effective_relation", -5)
	],
	"I accept oaths only from those I can trust to keep them, {playername}.", "lord_pretalk",
	[]],

	[anyone, "lord_ask_enter_service",
	[
		(lt, "$g_disable_condescending_comments", 2),
		(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", "$character_gender"),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(assign, "$bypass_female_vassal_explanation", 1),
		(try_end),
		(eq, "$bypass_female_vassal_explanation", 0)
	],
	"My {lord/lady}, you seem to have the makings of a good war leader. For a {man/woman} to show such skill is an uncommon thing, but not completely without precedent. Noble{men/women} have often taken command of armies after their {wives/husbands} or {mothers/fathers} were slain or captured, for example.", "lord_ask_enter_service_female_2",
	[
		(assign, "$bypass_female_vassal_explanation", 1)
	]],

	[anyone, "lord_ask_enter_service_female_2",
	[
		(try_begin),
			(eq, reg65, 1),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 5, 0),
		(else_try),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 4, 0),
		(try_end)
	],
	"However, I have never heard of a {s0} who granted a fief to a {man/woman}, no matter how valorous, simply because {reg65?she:he} needed an extra vassal. Were I to do such a thing, I would raise eyebrows across the realm. {People/Men} would say that I was besotted or bewitched, or that I aimed to overturn the natural order of things. As much as I regret it, I cannot afford to grant you a fief.", "lord_ask_enter_service_female_response",
	[]],

	[anyone|plyr, "lord_ask_enter_service_female_response",
	[],
	"What if I were to take one of your enemy's castles by force?", "lord_ask_enter_service_female_solution_capture",
	[]],

	[anyone|plyr, "lord_ask_enter_service_female_response",
	[
		(neg|troop_slot_ge, "trp_player", 30, "trp_npc1")
	],
	"What if I were to marry one of your lords?", "lord_ask_enter_service_female_solution_marriage",
	[]],

	[anyone|plyr, "lord_ask_enter_service_female_response",
	[],
	"Perhaps one of your competitors will prove to be more open-minded.", "lord_ask_enter_service_female_solution_competitor",
	[]],

	[anyone|plyr, "lord_ask_enter_service_female_response",
	[],
	"I would be willing to fight for you, even without the fief.", "lord_ask_enter_service",
	[]],

	[anyone|plyr, "lord_ask_enter_service_female_response",
	[],
	"Never mind.", "lord_pretalk",
	[]],

	[anyone, "lord_ask_enter_service_female_solution_marriage",
	[],
	"Well, I still would not be willing to grant you any fiefs. However, you would no doubt have the use of your {wife/husband}'s properties, which would allow you to act as one of my vassals in all but name. Did you have an other questions?", "lord_ask_enter_service_female_response",
	[]],

	[anyone, "lord_ask_enter_service_female_solution_competitor",
	[],
	"Oh, perhaps you might find someone who was truly desperate -- but then, I would think, they would not have many fiefs to bestow. Did you have an other questions?", "lord_ask_enter_service_female_response",
	[]],

	[anyone, "lord_ask_enter_service_female_solution_capture",
	[],
	"Well, in that case, depending on the circumstances, I might be inclined to let you keep it. Did you have an other questions?", "lord_ask_enter_service_female_response",
	[]],

	[anyone, "lord_ask_enter_service",
	[
		(assign, "$g_invite_offered_center", -1),
		(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
		(store_mul, ":value", "$g_talk_troop_effective_relation", 5),
		(val_add, ":value", ":player_renown"),
		(call_script, "script_get_number_of_hero_centers", "trp_player"),
		(assign, ":var_3", reg0),
		(store_mul, ":value_2", ":var_3", 50),
		(val_add, ":value", ":value_2"),
		(assign, ":var_5", "$character_gender"),
		(assign, ":value_3", 0),
		(try_begin),
			(lt, "$g_disable_condescending_comments", 0),
			(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", ":var_5"),
			(assign, ":value_3", 1),
			(val_div, ":value", 2),
		(try_end),
		(ge, ":value", 150),
		(try_begin),
			(this_or_next|ge, "$g_disable_condescending_comments", 2),
			(eq, ":value_3", 0),
			(eq, ":var_3", 0),
			(call_script, "script_get_poorest_village_of_faction", "$g_talk_troop_faction"),
			(gt, reg0, 0),
			(assign, "$g_invite_offered_center", reg0),
		(try_end),
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 1, 0)
	],
	"You are known as a brave warrior and a fine leader of men, {playername}. I shall be pleased to accept your {s0} into my service and bestow vassalage upon you, if you are ready to swear homage to me.", "lord_give_oath_1",
	[]],

	[anyone, "lord_ask_enter_service",
	[
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 1, 0)
	],
	"You've yet to show yourself as a competent commander, {playername}. Take your {s0} to my enemies and prove to me that you are worthy of becoming my vassal. Then we may speak more of this.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_give_oath_1",
	[],
	"I am ready, {s65}.", "lord_give_oath_2",
	[]],

	[anyone|plyr, "lord_give_oath_1",
	[],
	"Forgive me, {s65}, I must give the matter more thought first...", "lord_give_oath_give_up",
	[]],

	[anyone, "lord_give_oath_give_up",
	[
		(eq, 1, "$character_gender")
	],
	"Take whatever time you need, my lady.", "lord_pretalk",
	[]],

	[anyone, "lord_give_oath_give_up",
	[],
	"What are you playing at, {playername}? Go and make up your mind, and stop wasting my time.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_give_oath_2",
	[],
	"Good. Then repeat the words of the oath with me: I swear homage to you as lawful ruler of {s41}.", "lord_give_oath_3",
	[
		(str_store_faction_name, 41, "$g_talk_troop_faction"),
		(try_begin),
			(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
			(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
			(troop_get_slot, ":g_talk_troop_original_faction", "$g_talk_troop", slot_troop_original_faction),
			(str_store_faction_name, 41, ":g_talk_troop_original_faction"),
		(try_end)
	]],

	[anyone|plyr, "lord_give_oath_3",
	[],
	"I pledge homage to you as lawful ruler of {s41}.", "lord_give_oath_4",
	[]],

	[anyone|plyr, "lord_give_oath_3",
	[],
	"Excuse me. But I feel I need to think about this.", "lord_give_oath_give_up",
	[]],

	[anyone, "lord_give_oath_4",
	[],
	"I will remain as your loyal and devoted {man/follower} as long as my breath remains....", "lord_give_oath_5",
	[]],

	[anyone|plyr, "lord_give_oath_5",
	[],
	"I will remain as your loyal and devoted {man/follower} as long as my breath remains...", "lord_give_oath_6",
	[]],

	[anyone|plyr, "lord_give_oath_5",
	[],
	"May I ask for some time to think about this?", "lord_give_oath_give_up",
	[]],

	[anyone, "lord_give_oath_6",
	[],
	"...and I will be at your side to fight your enemies should you need my sword.", "lord_give_oath_7",
	[]],

	[anyone|plyr, "lord_give_oath_7",
	[],
	"...and I will be at your side to fight your enemies should you need my sword.", "lord_give_oath_8",
	[]],

	[anyone|plyr, "lord_give_oath_7",
	[],
	"Please give me more time to think about this.", "lord_give_oath_give_up",
	[]],

	[anyone, "lord_give_oath_8",
	[],
	"Finally, I will uphold your lawful claims and those of your legitimate heirs.", "lord_give_oath_9",
	[]],

	[anyone|plyr, "lord_give_oath_9",
	[],
	"Finally, I will uphold your lawful claims and those of your legitimate heirs.", "lord_give_oath_101",
	[]],

	[anyone|plyr, "lord_give_oath_9",
	[],
	"I must have more time to consider this.", "lord_give_oath_give_up",
	[]],

	[anyone, "lord_give_oath_101",
	[],
	"This I swear by all the gods known to man...", "lord_give_oath_102",
	[]],

	[anyone|plyr, "lord_give_oath_102",
	[],
	"This I swear by all the gods known to man.", "lord_give_oath_10",
	[]],

	[anyone|plyr, "lord_give_oath_102",
	[],
	"I must have more time to consider this.", "lord_give_oath_give_up",
	[]],

	[anyone, "lord_give_oath_10",
	[],
	"Very well. You have given me your solemn oath, {playername}. May you uphold it always, with proper courage and devotion.", "lord_give_oath_go_on_2",
	[]],

	[anyone, "lord_give_oath_go_on_2",
	[
		(try_begin),
			(gt, "$g_invite_offered_center", 1),
			(store_faction_of_party, ":faction_of_party_g_invite_offered_center", "$g_invite_offered_center"),
			(neq, ":faction_of_party_g_invite_offered_center", "$g_talk_troop_faction"),
			(assign, reg1, "$g_invite_offered_center"),
			(display_message, "@{!}ERROR: Tried to offer {reg1} as a fief to the player, but it is not owned by the leader's faction."),
			(assign, "$g_invite_offered_center", -1),
		(try_end),
		(assign, reg1, 1),
		(try_begin),
			(le, "$g_invite_offered_center", 0),
			(assign, reg1, 0),
		(else_try),
			(str_store_party_name, 1, "$g_invite_offered_center"),
		(try_end)
	],
	"Let it be known that from this day forward, you are my sworn {man/follower} and vassal. I give you my protection and grant you the right to bear arms in my name, and I pledge that I shall not deprive you of your life, liberty or properties except by the lawful judgment of your peers or by the law and custom of the land.{reg1? Furthermore I give you the fief of {s1} with all its rents and revenues.:}", "lord_give_oath_go_on_3",
	[]],

	[anyone, "lord_give_oath_go_on_3",
	[],
	"You have done a wise thing, {playername}. Serve me well and I promise, you will rise high.", "lord_give_conclude",
	[]],

	[anyone|plyr, "lord_give_conclude",
	[
		(assign, reg39, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$g_talk_troop"),
			(assign, reg39, 1),
		(try_end),
		(assign, reg65, reg39),
		(try_begin),
			(this_or_next|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
			(troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
			(str_store_string, 41, "str_very_well__you_are_now_my_liege_as_well_as_my_husband"),
		(else_try),
			(str_store_string, 41, "str_i_thank_you_reg39my_ladylord"),
		(try_end)
	],
	"{s41}", "lord_give_conclude_2",
	[
		(assign, ":value", 0),
		(try_begin),
			(this_or_next|is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
			(troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
			(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
			(assign, ":value", 1),
			(assign, "$supported_pretender", "$g_talk_troop"),
			(troop_get_slot, "$supported_pretender_old_faction", "$g_talk_troop", slot_troop_original_faction),
			(troop_set_faction, "$g_talk_troop", "fac_player_supporters_faction"),
			(faction_set_slot, "fac_player_supporters_faction", slot_faction_leader, "$g_talk_troop"),
			(assign, "$g_talk_troop_faction", "fac_player_supporters_faction"),
			(quest_set_slot, "qst_rebel_against_kingdom", slot_quest_giver_troop, "$g_talk_troop"),
			(quest_set_slot, "qst_rebel_against_kingdom", slot_quest_target_faction, "$supported_pretender_old_faction"),
			(str_store_faction_name_link, 14, "$supported_pretender_old_faction"),
			(str_store_troop_name_link, 13, "$g_talk_troop"),
			(setup_quest_text, "qst_rebel_against_kingdom"),
			(str_store_string, 2, "@You promised to help {s13} claim the throne of {s14}."),
			(call_script, "script_start_quest", "qst_rebel_against_kingdom", "$g_talk_troop"),
		(try_end),
		(try_begin),
			(eq, "$players_kingdom", "fac_player_supporters_faction"),
			(call_script, "script_deactivate_player_faction"),
			(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(call_script, "script_change_troop_faction", ":troop", "$g_talk_troop_faction"),
			(try_end),
		(try_end),
		(try_begin),
			(is_between, "$players_oath_renounced_against_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(neq, "$players_oath_renounced_against_kingdom", "$g_talk_troop_faction"),
			(store_relation, ":relation_player_supporters_faction_players_oath_renounced_against_kingdom", "fac_player_supporters_faction", "$players_oath_renounced_against_kingdom"),
			(val_min, ":relation_player_supporters_faction_players_oath_renounced_against_kingdom", -40),
			(call_script, "script_set_player_relation_with_faction", "$players_oath_renounced_against_kingdom", ":relation_player_supporters_faction_players_oath_renounced_against_kingdom"),
			(call_script, "script_update_all_notes"),
			(assign, "$g_recalculate_ais", 1),
		(try_end),
		(try_begin),
			(is_between, "$players_kingdom", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(neq, "$players_kingdom", "fac_player_supporters_faction"),
			(neq, "$players_kingdom", "$g_talk_troop_faction"),
			(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
			(call_script, "script_add_log_entry", 23, "trp_player", -1, ":players_kingdom_leader", "$players_kingdom"),
			(try_begin),
				(eq, ":value", 1),
				(call_script, "script_activate_player_faction", "$g_talk_troop"),
			(try_end),
			(call_script, "script_player_leave_faction", 0),
		(try_end),
		(call_script, "script_player_join_faction", "$g_talk_troop_faction"),
		(try_begin),
			(gt, "$g_invite_offered_center", 0),
			(call_script, "script_give_center_to_lord", "$g_invite_offered_center", "trp_player", 0),
			(try_begin),
				(faction_slot_eq, "$players_kingdom", slot_faction_political_issue, "$g_invite_offered_center"),
				(faction_set_slot, "$players_kingdom", slot_faction_political_issue, -1),
			(try_end),
		(try_end),
		(call_script, "script_add_log_entry", 21, "trp_player", -1, "$g_talk_troop", "$g_talk_troop_faction"),
		(try_begin),
			(check_quest_active, "qst_join_faction"),
			(eq, "$g_invite_faction_lord", "$g_talk_troop"),
			(call_script, "script_end_quest", "qst_join_faction"),
		(else_try),
			(check_quest_active, "qst_join_faction"),
			(call_script, "script_abort_quest", "qst_join_faction", 0),
		(try_end),
		(assign, "$player_has_homage", 1),
		(assign, "$g_player_banner_granted", 1),
		(assign, "$g_invite_faction", 0),
		(assign, "$g_invite_faction_lord", 0),
		(assign, "$g_invite_offered_center", 0),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_give_conclude_2",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"So be it, {s0}. May all my vassals be as valiant and loyal as you.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_give_conclude_2",
	[],
	"I have great hopes for you {playername}. I know you shall prove yourself worthy of the trust I have placed in you.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_ask_enter_service",
	[
		(str_store_faction_name, 5, "$g_talk_troop_faction")
	],
	"Heh, a wise move, {playername}. With loyal service, a {man/woman} in my service could become wealthy and powerful, and our enemies... Well, our enemies are as wheat before a scythe. However, to enter my service you must first renounce all worldly oaths and bonds, and swear to serve only the {s5}.", "lord_enter_service_swear",
	[]],

	[anyone|plyr, "lord_enter_service_swear",
	[],
	"I do so swear, {s65}.", "lord_enter_service_swear_accepted",
	[]],

	[anyone|plyr, "lord_enter_service_swear",
	[],
	"I need some time to think about this.", "lord_enter_service_swear_denied",
	[]],

	[anyone, "lord_enter_service_swear_denied",
	[],
	"Are you having me on? I've no time for games, {playername}. Make up your mind and stop wasting my time.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_enter_service_swear_accepted",
	[
		(str_store_faction_name, 5, "$g_talk_troop_faction")
	],
	"Then it is my pleasure to welcome you to the service of my house. From this day on, {playername}, you are a soldier of the {s5} with all the duties and privileges that come with it.", "lord_enter_service_swear_accepted_2",
	[]],

	[anyone, "lord_enter_service_swear_accepted_2",
	[
		(str_store_faction_name, 5, "$g_talk_troop_faction")
	],
	"I charge you with rooting out and destroying the forces of our enemies wherever you may find them. Moreover, I will have special tasks for you from time to time, as may some of my other vassal lords. Serve, fight, and honour your oaths. These things will take you far, if you've a mind for promotion. May God grant us long lives and many victories to toast in my hall!", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_ask_leave_service",
	[
		(ge, "$g_talk_troop_relation", 1)
	],
	"Hrm. Has your oath become burdensome, {playername}? It is unusual to request release from homage, but in respect of your fine service, I will not hold you if you truly wish to end it. Though you would be sorely missed.", "lord_ask_leave_service_verify",
	[]],

	[anyone, "lord_ask_leave_service",
	[],
	"Release from homage? Hmm, perhaps it would be for the best... However, {playername}, you must be sure that release is what you desire. This is not a thing done lightly.", "lord_ask_leave_service_verify",
	[]],

	[anyone|plyr, "lord_ask_leave_service_verify",
	[],
	"It is something I must do, {s65}.", "lord_ask_leave_service_2",
	[]],

	[anyone|plyr, "lord_ask_leave_service_verify",
	[],
	"You are right, {s65}. My place is here.", "lord_ask_leave_service_giveup",
	[]],

	[anyone, "lord_ask_leave_service_giveup",
	[],
	"I am pleased to hear it, {playername}. I hope you'll banish such unworthy thoughts from your mind from now on.", "lord_pretalk",
	[]],

	[anyone, "lord_ask_leave_service_2",
	[],
	"Then you are sure? Also, be aware that if you leave my services, you will be surrendering to me all the fiefs which you hold in my name.", "lord_ask_leave_service_verify_again",
	[]],

	[anyone|plyr, "lord_ask_leave_service_verify_again",
	[],
	"Yes, {s65}.", "lord_ask_leave_service_3",
	[]],

	[anyone|plyr, "lord_ask_leave_service_verify_again",
	[],
	"Of course not, {s65}. I am ever your loyal vassal.", "lord_ask_leave_service_giveup",
	[]],

	[anyone, "lord_ask_leave_service_3",
	[],
	"As you wish. I hereby declare your oaths to be null and void. You will no longer hold land or titles in my name, and you are released from your duties to my house. You are free, {playername}.", "lord_ask_leave_service_end",
	[
		(call_script, "script_add_log_entry", 23, "trp_player", -1, "$g_talk_troop", "$g_talk_troop_faction"),
		(call_script, "script_player_leave_faction", 1)
	]],

	[anyone|plyr, "lord_ask_leave_service_end",
	[],
	"Thank you, my lord. It was an honour to serve you.", "lord_ask_leave_service_end_2",
	[]],

	[anyone|plyr, "lord_ask_leave_service_end",
	[],
	"My thanks. It feels good to be {a free man/free} once again.", "lord_ask_leave_service_end_2",
	[]],

	[anyone, "lord_ask_leave_service_end_2",
	[],
	"Farewell then, {playername}, and good luck go with you.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_active_mission_1",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_lend_companion"),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(check_quest_active, "qst_lend_companion"),
		(quest_slot_eq, "qst_lend_companion", slot_quest_giver_troop, "$g_talk_troop"),
		(store_current_day, ":current_day"),
		(quest_get_slot, ":lend_companion_target_amount", "qst_lend_companion", slot_quest_target_amount),
		(ge, ":current_day", ":lend_companion_target_amount")
	],
	"Oh, you want your companion back? I see...", "lord_lend_companion_end",
	[]],

	[anyone, "lord_active_mission_1",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_lend_companion")
	],
	"{playername}, I must beg your patience, I still have need of your companion. Please return later when things have settled.", "lord_pretalk",
	[]],

	[anyone, "lord_active_mission_1",
	[],
	"Yes, have you made any progress on it?", "lord_active_mission_2",
	[]],

	[anyone|plyr, "lord_active_mission_2",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(check_quest_active, "qst_capture_prisoners"),
		(quest_slot_eq, "qst_capture_prisoners", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_get_slot, ":capture_prisoners_target_amount", "qst_capture_prisoners", slot_quest_target_amount),
		(quest_get_slot, ":capture_prisoners_target_troop", "qst_capture_prisoners", slot_quest_target_troop),
		(party_count_prisoners_of_type, ":var_3", "p_main_party", ":capture_prisoners_target_troop"),
		(ge, ":var_3", ":capture_prisoners_target_amount"),
		(assign, reg1, ":capture_prisoners_target_amount"),
		(str_store_troop_name_plural, 1, ":capture_prisoners_target_troop")
	],
	"Indeed. I brought you {reg1} {s1} as prisoners.", "lord_generic_mission_thank",
	[
		(quest_get_slot, ":capture_prisoners_target_amount", "qst_capture_prisoners", slot_quest_target_amount),
		(quest_get_slot, ":capture_prisoners_target_troop", "qst_capture_prisoners", slot_quest_target_troop),
		(party_remove_prisoners, "p_main_party", ":capture_prisoners_target_troop", ":capture_prisoners_target_amount"),
		(party_add_prisoners, "$g_encountered_party", ":capture_prisoners_target_troop", ":capture_prisoners_target_amount"),
		(call_script, "script_finish_quest", "qst_capture_prisoners", 100)
	]],

	[anyone|plyr, "lord_active_mission_2",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_capture_enemy_hero"),
		(assign, ":value", 0),
		(quest_get_slot, ":capture_enemy_hero_target_faction", "qst_capture_enemy_hero", slot_quest_target_faction),
		(party_get_num_prisoner_stacks, ":num_prisoner_stacks_main_party", "p_main_party"),
		(try_for_range, ":number", 0, ":num_prisoner_stacks_main_party"),
			(party_prisoner_stack_get_troop_id, ":party_prisoner_stack_troop_id_main_party_number", "p_main_party", ":number"),
			(troop_is_hero, ":party_prisoner_stack_troop_id_main_party_number"),
			(store_faction_of_troop, ":faction_of_troop_party_prisoner_stack_troop_id_main_party_number", ":party_prisoner_stack_troop_id_main_party_number"),
			(eq, ":capture_enemy_hero_target_faction", ":faction_of_troop_party_prisoner_stack_troop_id_main_party_number"),
			(troop_slot_eq, ":party_prisoner_stack_troop_id_main_party_number", slot_troop_occupation, 2),
			(assign, ":value", 1),
			(quest_set_slot, "qst_capture_enemy_hero", slot_quest_target_troop, ":party_prisoner_stack_troop_id_main_party_number"),
		(try_end),
		(eq, ":value", 1),
		(str_store_faction_name, 13, ":capture_enemy_hero_target_faction")
	],
	"Oh, indeed. I've captured a lord from {s13} for you.", "capture_enemy_hero_thank",
	[]],

	[anyone, "capture_enemy_hero_thank",
	[],
	"Many thanks, my friend. He will serve very well for a bargain. You've done a fine work here. Please accept these {reg5} coins for your help.", "capture_enemy_hero_thank_2",
	[
		(quest_get_slot, ":capture_enemy_hero_target_troop", "qst_capture_enemy_hero", slot_quest_target_troop),
		(quest_get_slot, ":capture_enemy_hero_target_faction", "qst_capture_enemy_hero", slot_quest_target_faction),
		(party_remove_prisoners, "p_main_party", ":capture_enemy_hero_target_troop", 1),
		(store_relation, ":relation_g_encountered_party_faction_capture_enemy_hero_target_faction", "$g_encountered_party_faction", ":capture_enemy_hero_target_faction"),
		(try_begin),
			(lt, ":relation_g_encountered_party_faction_capture_enemy_hero_target_faction", 0),
			(party_add_prisoners, "$g_encountered_party", ":capture_enemy_hero_target_troop", 1),
		(else_try),
			(troop_set_slot, ":capture_enemy_hero_target_troop", slot_troop_prisoner_of_party, -1),
		(try_end),
		(quest_get_slot, ":capture_enemy_hero_gold_reward", "qst_capture_enemy_hero", slot_quest_gold_reward),
		(assign, reg5, ":capture_enemy_hero_gold_reward"),
		(call_script, "script_troop_add_gold", "trp_player", ":capture_enemy_hero_gold_reward"),
		(add_xp_as_reward, 2500),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 4),
		(call_script, "script_end_quest", "qst_capture_enemy_hero")
	]],

	[anyone|plyr, "capture_enemy_hero_thank_2",
	[],
	"Certainly, {s65}.", "lord_pretalk",
	[]],

	[anyone|plyr, "capture_enemy_hero_thank_2",
	[],
	"It was nothing.", "lord_pretalk",
	[]],

	[anyone|plyr, "capture_enemy_hero_thank_2",
	[],
	"Give me more of a challenge next time.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_active_mission_2",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_raise_troops"),
		(quest_get_slot, ":partner_quest_target_troop", ":partner_quest", slot_quest_target_troop),
		(quest_get_slot, ":partner_quest_target_amount", ":partner_quest", slot_quest_target_amount),
		(party_count_companions_of_type, ":var_4", "p_main_party", ":partner_quest_target_troop"),
		(ge, ":var_4", ":partner_quest_target_amount"),
		(assign, reg1, ":partner_quest_target_amount"),
		(str_store_troop_name_plural, 13, ":partner_quest_target_troop")
	],
	"Indeed. I have raised {reg1} {s13}. You can take them.", "lord_raise_troops_thank",
	[
		(quest_get_slot, ":raise_troops_target_troop", "qst_raise_troops", slot_quest_target_troop),
		(quest_get_slot, ":raise_troops_target_amount", "qst_raise_troops", slot_quest_target_amount),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 3),
		(party_remove_members, "p_main_party", ":raise_troops_target_troop", ":raise_troops_target_amount"),
		(call_script, "script_end_quest", "qst_raise_troops"),
		(troop_get_slot, ":g_talk_troop_leaded_party", "$g_talk_troop", slot_troop_leaded_party),
		(gt, ":g_talk_troop_leaded_party", 0),
		(party_add_members, ":g_talk_troop_leaded_party", ":raise_troops_target_troop", ":raise_troops_target_amount")
	]],

	[anyone, "lord_raise_troops_thank",
	[],
	"These men may well turn the tide in my plans, {playername}. I am confident you've trained them well. My thanks and my compliments to you.", "lord_raise_troops_thank_2",
	[]],

	[anyone|plyr, "lord_raise_troops_thank_2",
	[],
	"Well, the lads are at your command now, my lord. I am sure you will take good care of them.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_active_mission_2",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(check_quest_active, "qst_collect_taxes"),
		(quest_slot_eq, "qst_collect_taxes", slot_quest_giver_troop, "$g_talk_troop"),
		(check_quest_succeeded, "qst_collect_taxes"),
		(eq, "$qst_collect_taxes_halve_taxes", 0),
		(quest_get_slot, ":collect_taxes_gold_reward", "qst_collect_taxes", slot_quest_gold_reward),
		(store_mul, ":value", ":collect_taxes_gold_reward", 8),
		(val_div, ":value", 10),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", ":value"),
		(assign, reg19, ":collect_taxes_gold_reward"),
		(quest_get_slot, ":collect_taxes_target_center", "qst_collect_taxes", slot_quest_target_center),
		(str_store_party_name, 3, ":collect_taxes_target_center")
	],
	"Here are all the taxes from {s3}. It comes up to {reg19} coins.", "lord_collect_taxes_success",
	[]],

	[anyone|plyr, "lord_active_mission_2",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(check_quest_active, "qst_collect_taxes"),
		(quest_slot_eq, "qst_collect_taxes", slot_quest_giver_troop, "$g_talk_troop"),
		(check_quest_succeeded, "qst_collect_taxes"),
		(eq, "$qst_collect_taxes_halve_taxes", 1),
		(quest_get_slot, ":collect_taxes_gold_reward", "qst_collect_taxes", slot_quest_gold_reward),
		(store_mul, ":value", ":collect_taxes_gold_reward", 95),
		(val_div, ":value", 100),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", ":value"),
		(assign, reg19, ":collect_taxes_gold_reward"),
		(quest_get_slot, ":collect_taxes_target_center", "qst_collect_taxes", slot_quest_target_center),
		(str_store_party_name, 3, ":collect_taxes_target_center")
	],
	"Here are the taxes from {s3}. It comes up to {reg19} coins.", "lord_collect_taxes_half_success",
	[]],

	[anyone|plyr, "lord_active_mission_2",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(check_quest_active, "qst_collect_taxes"),
		(quest_slot_eq, "qst_collect_taxes", slot_quest_giver_troop, "$g_talk_troop"),
		(check_quest_failed, "qst_collect_taxes"),
		(quest_get_slot, ":collect_taxes_gold_reward", "qst_collect_taxes", slot_quest_gold_reward),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", ":collect_taxes_gold_reward"),
		(assign, reg19, ":collect_taxes_gold_reward"),
		(quest_get_slot, ":collect_taxes_target_center", "qst_collect_taxes", slot_quest_target_center),
		(str_store_party_name, 3, ":collect_taxes_target_center")
	],
	"Unfortunately, a revolt broke up while I was collecting the taxes. I could only collect {reg19} coins.", "lord_collect_taxes_fail",
	[]],

	[anyone, "lord_collect_taxes_success",
	[
		(quest_get_slot, ":collect_taxes_gold_reward", "qst_collect_taxes", slot_quest_gold_reward),
		(store_mul, ":value", ":collect_taxes_gold_reward", 8),
		(val_div, ":value", 10),
		(assign, reg20, ":value"),
		(store_sub, reg21, ":collect_taxes_gold_reward", ":value")
	],
	"Well done, {playername}, very well done indeed! You were truly the right {man/person} for the job. I promised you a fifth of the taxes, so that amounts to {reg21} coins. If you give me {reg20} coins, you may keep the difference. A good result for everyone, eh?", "lord_pretalk",
	[
		(troop_remove_gold, "trp_player", reg20),
		(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", reg20, "$g_talk_troop"),
		(quest_set_slot, "qst_collect_taxes", slot_quest_gold_reward, 0),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 2),
		(call_script, "script_end_quest", "qst_collect_taxes")
	]],

	[anyone, "lord_collect_taxes_half_success",
	[
		(quest_get_slot, ":collect_taxes_gold_reward", "qst_collect_taxes", slot_quest_gold_reward),
		(val_mul, ":collect_taxes_gold_reward", 95),
		(val_div, ":collect_taxes_gold_reward", 100),
		(assign, reg20, ":collect_taxes_gold_reward")
	],
	"What?! Is this some scheme of yours, {playername}? That's less than half the taxes I'm owed! You have let them get away with murder as well as my money. What a farce! You can forget the money I promised you, I'm taking {reg20} coins from what you collected, and you're lucky I'm leaving you a few coins for honour's sake.", "lord_pretalk",
	[
		(troop_remove_gold, "trp_player", reg20),
		(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", reg20, "$g_talk_troop"),
		(quest_set_slot, "qst_collect_taxes", slot_quest_gold_reward, 0),
		(call_script, "script_end_quest", "qst_collect_taxes")
	]],

	[anyone, "lord_collect_taxes_fail",
	[],
	"God, what a bloody mess you've gotten us into, {playername}.This could turn very ugly if I do not take immediate action.I certainly hope you're not here expecting to be paid for failure.Hand over my {reg19} coins, if you please, and end our business together.", "lord_pretalk",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -1),
		(quest_get_slot, ":collect_taxes_gold_reward", "qst_collect_taxes", slot_quest_gold_reward),
		(troop_remove_gold, "trp_player", ":collect_taxes_gold_reward"),
		(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", ":collect_taxes_gold_reward", "$g_talk_troop"),
		(quest_set_slot, "qst_collect_taxes", slot_quest_gold_reward, 0),
		(call_script, "script_end_quest", "qst_collect_taxes")
	]],

	[anyone|plyr, "lord_active_mission_2",
	[
		(check_quest_active, "qst_hunt_down_fugitive"),
		(quest_slot_eq, "qst_hunt_down_fugitive", slot_quest_giver_troop, "$g_talk_troop"),
		(check_quest_succeeded, "qst_hunt_down_fugitive"),
		(quest_get_slot, ":hunt_down_fugitive_target_center", "qst_hunt_down_fugitive", slot_quest_target_center),
		(str_store_party_name, 3, ":hunt_down_fugitive_target_center"),
		(quest_get_slot, ":hunt_down_fugitive_target_dna", "qst_hunt_down_fugitive", slot_quest_target_dna),
		(call_script, "script_get_name_from_dna_to_s50", ":hunt_down_fugitive_target_dna"),
		(str_store_string, 4, 50)
	],
	"I found {s4} hiding at {s3} and gave him his punishment.", "lord_hunt_down_fugitive_success",
	[]],

	[anyone|plyr, "lord_active_mission_2",
	[
		(check_quest_active, "qst_hunt_down_fugitive"),
		(quest_slot_eq, "qst_hunt_down_fugitive", slot_quest_giver_troop, "$g_talk_troop"),
		(check_quest_failed, "qst_hunt_down_fugitive")
	],
	"I'm afraid he got away.", "lord_hunt_down_fugitive_fail",
	[]],

	[anyone, "lord_hunt_down_fugitive_success",
	[],
	"And we'll all be a lot better off without him! Thank you, {playername}, for removing this long-festering thorn from my side. 'Tis good to know you can be trusted to handle things with an appropriate level of tactfulness. A bounty I promised, and a bounty you shall have. 300 coins and not a copper less!", "lord_hunt_down_fugitive_success_2",
	[
		(add_xp_as_reward, 300)
	]],

	[anyone|plyr, "lord_hunt_down_fugitive_success_2",
	[],
	"Let me take the money, {s65}. Thank you.", "lord_hunt_down_fugitive_reward_accept",
	[]],

	[anyone|plyr, "lord_hunt_down_fugitive_success_2",
	[],
	"This is blood money. I can't accept it.", "lord_hunt_down_fugitive_reward_reject",
	[]],

	[anyone, "lord_hunt_down_fugitive_reward_accept",
	[],
	"Of course, {playername}. Here you are. Once again, you've my thanks for ridding me of that {s43}.", "lord_pretalk",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_lord_insult_default"),
		(call_script, "script_troop_add_gold", "trp_player", 300),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(call_script, "script_end_quest", "qst_hunt_down_fugitive")
	]],

	[anyone, "lord_hunt_down_fugitive_reward_reject",
	[],
	"You are a {man/woman} for whom justice is its own reward, eh? As you wish it, {playername}, as you wish it. An honourable sentiment, to be true. Regardless, you've my thanks for ridding me of that {s43}.", "lord_pretalk",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_lord_insult_default"),
		(call_script, "script_change_player_honor", 3),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(call_script, "script_end_quest", "qst_hunt_down_fugitive")
	]],

	[anyone, "lord_hunt_down_fugitive_fail",
	[],
	"It is a sad day when that {s43} manages to avoid the hand of justice yet again. I thought you would be able to do this, {playername}. Clearly I was wrong.", "lord_pretalk",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_lord_insult_default"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -1),
		(call_script, "script_end_quest", "qst_hunt_down_fugitive")
	]],

	[anyone|plyr, "lord_active_mission_2",
	[],
	"I am still working on it.", "lord_active_mission_3",
	[]],

	[anyone|plyr, "lord_active_mission_2",
	[],
	"I am afraid I won't be able to do this quest.", "lord_mission_failed",
	[]],

	[anyone, "lord_active_mission_3",
	[],
	"Good. Remember, I am counting on you.", "lord_pretalk",
	[]],

	[anyone, "lord_mission_failed",
	[],
	"{s43}", "lord_pretalk",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_lord_mission_failed_default"),
		(store_partner_quest, ":partner_quest"),
		(call_script, "script_abort_quest", ":partner_quest", 1)
	]],

	[anyone, "lord_suggest_action_ask",
	[],
	"{!}What do you suggest?", "lord_suggest_action",
	[]],

	[anyone|plyr, "lord_suggest_action",
	[],
	"{!}CHEAT: I want to join your faction.", "lord_suggest_join_faction",
	[]],

	[anyone, "lord_suggest_join_faction",
	[],
	"{!}Alright then.", "lord_give_oath_5",
	[]],

	[anyone|plyr, "lord_suggest_action",
	[],
	"{!}CHEAT: I want to know your leaded party ID.", "lord_suggest_learn_party_id",
	[]],

	[anyone, "lord_suggest_learn_party_id",
	[
		(assign, reg1, "$g_encountered_party"),
		(troop_get_slot, reg0, "$g_talk_troop", slot_troop_leaded_party)
	],
	"{!}It is {reg0}. Encountered party is {reg1}", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_suggest_action",
	[],
	"{!}CHEAT: I want to know your AI initiative.", "lord_suggest_learn_ai_initiative",
	[]],

	[anyone, "lord_suggest_learn_ai_initiative",
	[
		(party_get_ai_initiative, reg0, "$g_encountered_party")
	],
	"{!}It is {reg0}.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_suggest_action",
	[
		(eq, "$players_kingdom", "$g_talk_troop_faction")
	],
	"{!}CHEAT: I want to be your kingdom's marshall.", "lord_suggest_become_marshall",
	[]],

	[anyone, "lord_suggest_become_marshall",
	[],
	"{!}Alright then.", "lord_pretalk",
	[
		(faction_get_slot, ":g_talk_troop_faction_marshall", "$g_talk_troop_faction", slot_faction_marshall),
		(try_begin),
			(ge, ":g_talk_troop_faction_marshall", 0),
			(troop_get_slot, ":g_talk_troop_faction_marshall_leaded_party", ":g_talk_troop_faction_marshall", slot_troop_leaded_party),
			(party_is_active, ":g_talk_troop_faction_marshall_leaded_party"),
			(party_set_marshall, ":g_talk_troop_faction_marshall_leaded_party", 0),
		(try_end),
		(faction_set_slot, "$g_talk_troop_faction", slot_faction_marshall, "trp_player"),
		(faction_set_slot, "$g_talk_troop_faction", slot_faction_ai_state, 0),
		(assign, "$g_recalculate_ais", 1)
	]],

	[anyone|plyr, "lord_suggest_action",
	[
		(neq, "$talk_context", 4)
	],
	"{!}CHEAT: Let us attack an enemy town or castle.", "lord_suggest_attack_enemy_castle",
	[]],

	[anyone|plyr, "lord_suggest_action",
	[
		(neq, "$talk_context", 4)
	],
	"{!}CHEAT: Let us return back to a friendly town.", "lord_suggest_go_to_friendly_town",
	[]],

	[anyone|plyr, "lord_suggest_action",
	[
		(neq, "$talk_context", 4)
	],
	"{!}CHEAT: Let us attack an enemy war party.", "lord_suggest_attack_enemy_party",
	[]],

	[anyone|plyr, "lord_suggest_action",
	[
		(eq, "$talk_context", 4)
	],
	"{!}CHEAT: Let us lift this siege.", "lord_suggest_lift_siege",
	[]],

	[anyone|plyr, "lord_suggest_action",
	[
		(neq, "$talk_context", 4)
	],
	"{!}CHEAT: Follow me.", "lord_suggest_follow_me",
	[]],

	[anyone|plyr, "lord_suggest_action",
	[
		(neq, "$talk_context", 4)
	],
	"{!}CHEAT: Follow someone.", "lord_suggest_follow_other",
	[]],

	[anyone|plyr, "lord_suggest_action",
	[
		(neq, "$talk_context", 4)
	],
	"{!}CHEAT: Raid a village.", "lord_suggest_raid_village",
	[]],

	[anyone|plyr, "lord_suggest_action",
	[],
	"{!}CHEAT: Like me.", "lord_pretalk",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 20)
	]],

	[anyone, "lord_suggest_lift_siege",
	[],
	"{!}As you wish, {playername}.", "close_window",
	[
		(call_script, "script_party_set_ai_state", "$g_talk_troop_party", -1),
		(party_leave_cur_battle, "$g_talk_troop_party"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_suggest_go_to_friendly_town",
	[],
	"{!}Hmm. Which town or castle do you suggest we go to?", "lord_suggest_go_to_friendly_town2",
	[]],

	[anyone|repeat_for_parties|plyr, "lord_suggest_go_to_friendly_town2",
	[
		(store_repeat_object, ":repeat_object"),
		(this_or_next|party_slot_eq, ":repeat_object", slot_party_type, 2),
		(party_slot_eq, ":repeat_object", slot_party_type, 3),
		(neq, ":repeat_object", "$g_encountered_party"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(eq, ":faction_of_party_repeat_object", "$g_talk_troop_faction"),
		(str_store_party_name, 1, ":repeat_object")
	],
	"{!}CHEAT: {s1}", "lord_suggest_go_to_friendly_town3",
	[
		(store_repeat_object, "$town_suggested_to_go_to")
	]],

	[anyone|plyr, "lord_suggest_go_to_friendly_town2",
	[],
	"{!}CHEAT: Never mind.", "lord_pretalk",
	[]],

	[anyone, "lord_suggest_go_to_friendly_town3",
	[
		(str_store_party_name, 1, "$town_suggested_to_go_to")
	],
	"{!}Very well, we go to {s1}.", "lord_pretalk",
	[
		(call_script, "script_party_set_ai_state", "$g_talk_troop_party", 7, "$town_suggested_to_go_to")
	]],

	[anyone, "lord_suggest_attack_enemy_party",
	[],
	"{!}Hmm. Which party do you suggest we attack?", "lord_suggest_attack_enemy_party2",
	[]],

	[anyone|repeat_for_parties|plyr, "lord_suggest_attack_enemy_party2",
	[
		(store_repeat_object, ":repeat_object"),
		(party_slot_eq, ":repeat_object", slot_party_type, 13),
		(party_is_active, ":repeat_object"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(store_relation, ":relation_faction_of_party_repeat_object_g_talk_troop_faction", ":faction_of_party_repeat_object", "$g_talk_troop_faction"),
		(le, ":relation_faction_of_party_repeat_object_g_talk_troop_faction", -10),
		(call_script, "script_get_closest_walled_center", ":repeat_object"),
		(assign, ":var_4", reg0),
		(str_store_party_name, 3, ":var_4"),
		(str_store_faction_name, 2, ":faction_of_party_repeat_object"),
		(str_store_party_name, 1, ":repeat_object")
	],
	"{!}CHEAT: {s1} of {s2} around {s3}", "lord_suggest_attack_enemy_party3",
	[
		(store_repeat_object, "$suggested_to_attack_party")
	]],

	[anyone|plyr, "lord_suggest_attack_enemy_party2",
	[],
	"{!}CHEAT: Never mind.", "lord_pretalk",
	[]],

	[anyone, "lord_suggest_attack_enemy_party3",
	[
		(str_store_party_name, 1, "$suggested_to_attack_party")
	],
	"{!}As you wish, we will attack {s1}.", "lord_pretalk",
	[
		(call_script, "script_party_set_ai_state", "$g_talk_troop_party", 10, "$suggested_to_attack_party")
	]],

	[anyone, "lord_suggest_attack_enemy_castle",
	[],
	"{!}Hmm. Which one do you suggest we attack?", "lord_suggets_attack_enemy_castle2",
	[]],

	[anyone|repeat_for_parties|plyr, "lord_suggets_attack_enemy_castle2",
	[
		(store_repeat_object, ":repeat_object"),
		(this_or_next|party_slot_eq, ":repeat_object", slot_party_type, 2),
		(party_slot_eq, ":repeat_object", slot_party_type, 3),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(store_relation, ":relation_faction_of_party_repeat_object_g_talk_troop_faction", ":faction_of_party_repeat_object", "$g_talk_troop_faction"),
		(le, ":relation_faction_of_party_repeat_object_g_talk_troop_faction", -10),
		(str_store_faction_name, 2, ":faction_of_party_repeat_object"),
		(str_store_party_name, 1, ":repeat_object")
	],
	"{!}CHEAT: {s1} of {s2}", "lord_suggets_attack_enemy_castle3",
	[
		(store_repeat_object, "$suggested_to_attack_center")
	]],

	[anyone|plyr, "lord_suggets_attack_enemy_castle2",
	[],
	"{!}CHEAT: Never mind my lord.", "lord_pretalk",
	[]],

	[anyone, "lord_suggets_attack_enemy_castle3",
	[
		(str_store_party_name, 1, "$suggested_to_attack_center")
	],
	"That should be possible. Very well, we'll attack {s1}.", "lord_pretalk",
	[
		(call_script, "script_party_set_ai_state", "$g_talk_troop_party", 1, "$suggested_to_attack_center")
	]],

	[anyone, "lord_suggest_raid_village",
	[],
	"{!}Hmm. Which village do you suggest we attack?", "lord_suggest_raid_village_2",
	[]],

	[anyone|repeat_for_parties|plyr, "lord_suggest_raid_village_2",
	[
		(store_repeat_object, ":repeat_object"),
		(party_slot_eq, ":repeat_object", slot_party_type, 4),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(store_relation, ":relation_faction_of_party_repeat_object_g_talk_troop_faction", ":faction_of_party_repeat_object", "$g_talk_troop_faction"),
		(le, ":relation_faction_of_party_repeat_object_g_talk_troop_faction", -10),
		(str_store_faction_name, 2, ":faction_of_party_repeat_object"),
		(str_store_party_name, 1, ":repeat_object")
	],
	"{!}CHEAT: {s1} of {s2}", "lord_suggest_raid_village_3",
	[
		(store_repeat_object, "$suggested_to_attack_center")
	]],

	[anyone|plyr, "lord_suggest_raid_village_2",
	[],
	"{!}CHEAT: Never mind.", "lord_pretalk",
	[]],

	[anyone, "lord_suggest_raid_village_3",
	[
		(str_store_party_name, 1, "$suggested_to_attack_center")
	],
	"{!}That should be possible. Very well, we'll attack {s1}.", "lord_pretalk",
	[
		(call_script, "script_party_set_ai_state", "$g_talk_troop_party", 5, "$suggested_to_attack_center")
	]],

	[anyone, "lord_suggest_follow_me",
	[],
	"{!}Aye, I'll follow you.", "lord_pretalk",
	[
		(party_set_slot, "$g_talk_troop_party", slot_party_commander_party, "p_main_party"),
		(call_script, "script_npc_decision_checklist_party_ai", "$g_talk_troop"),
		(call_script, "script_party_set_ai_state", "$g_talk_troop_party", reg0, reg1)
	]],

	[anyone, "lord_suggest_follow_other",
	[],
	"{!}Who do you want me to follow?", "lord_suggest_follow_other_2",
	[]],

	[anyone|repeat_for_parties|plyr, "lord_suggest_follow_other_2",
	[
		(store_repeat_object, ":repeat_object"),
		(party_slot_eq, ":repeat_object", slot_party_type, 13),
		(neq, ":repeat_object", "$g_talk_troop"),
		(store_faction_of_party, ":faction_of_party_repeat_object", ":repeat_object"),
		(eq, ":faction_of_party_repeat_object", "$g_talk_troop_faction"),
		(str_store_party_name, 1, ":repeat_object")
	],
	"{!}CHEAT: {s1}", "lord_suggest_follow_other_3",
	[
		(store_repeat_object, "$town_suggested_to_go_to")
	]],

	[anyone|plyr, "lord_suggest_follow_other_2",
	[],
	"{!}CHEAT: Never mind.", "lord_pretalk",
	[]],

	[anyone, "lord_suggest_follow_other_3",
	[
		(str_store_party_name, 1, "$town_suggested_to_go_to")
	],
	"{!}As you wish, I shall be accompanying {s1}.", "lord_pretalk",
	[
		(party_set_slot, "$g_talk_troop_party", slot_party_commander_party, "$town_suggested_to_go_to"),
		(call_script, "script_npc_decision_checklist_party_ai", "$g_talk_troop"),
		(call_script, "script_party_set_ai_state", "$g_talk_troop_party", reg0, reg1)
	]],

	[anyone|plyr, "lord_suggest_action",
	[],
	"{!}CHEAT: Nothing, {s65}. It's not important.", "lord_pretalk",
	[]],

	[anyone|auto_proceed, "lord_request_mission_ask",
	[
		(eq, "$players_kingdom", 0),
		(ge, "$g_talk_troop_faction_relation", 0),
		(ge, "$g_talk_troop_relation", 0),
		(troop_slot_ge, "trp_player", 7, 30),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(faction_get_slot, ":g_talk_troop_faction_last_mercenary_offer_time", "$g_talk_troop_faction", slot_faction_last_mercenary_offer_time),
		(assign, ":var_2", 0),
		(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(faction_slot_eq, "$g_talk_troop_faction", slot_faction_state, 0),
			(store_relation, ":relation_g_talk_troop_faction_faction", "$g_talk_troop_faction", ":faction"),
			(lt, ":relation_g_talk_troop_faction_faction", 0),
			(val_add, ":var_2", 1),
		(try_end),
		(ge, ":var_2", 1),
		(store_current_hours, ":current_hours"),
		(store_add, ":value", ":g_talk_troop_faction_last_mercenary_offer_time", 168),
		(val_add, ":g_talk_troop_faction_last_mercenary_offer_time", 24),
		(ge, ":current_hours", ":g_talk_troop_faction_last_mercenary_offer_time"),
		(store_random_in_range, ":random_in_range_0_100", 0, 100),
		(this_or_next|lt, ":random_in_range_0_100", 20),
		(ge, ":current_hours", ":value"),
		(assign, reg0, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", "$character_gender"),
			(assign, reg0, 1),
		(try_end),
		(this_or_next|eq, reg0, 0),
		(this_or_next|ge, "$g_disable_condescending_comments", 2),
		(this_or_next|troop_slot_ge, "$g_talk_troop", 52, 8),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6)
	],
	"{!}Warning: This line should never display.", "lord_propose_mercenary",
	[
		(store_current_hours, ":current_hours"),
		(faction_set_slot, "$g_talk_troop_faction", slot_faction_last_mercenary_offer_time, ":current_hours")
	]],

	[anyone, "lord_propose_mercenary",
	[
		(call_script, "script_party_calculate_strength", "p_main_party", 0),
		(assign, ":value", reg0),
		(val_add, ":value", 100),
		(call_script, "script_round_value", ":value"),
		(assign, ":value", reg0),
		(assign, "$temp", ":value"),
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(neq, ":g_talk_troop_faction_leader", "$g_talk_troop"),
		(str_store_faction_name, 9, "$g_talk_troop_faction"),
		(str_store_troop_name, 10, ":g_talk_troop_faction_leader"),
		(try_begin),
			(lt, "$g_disable_condescending_comments", 0),
			(neq, reg65, "$character_gender"),
			(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", "$character_gender"),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 1),
			(str_store_string, 11, "str_now_some_might_say_that_women_have_no_business_leading_mercenary_companies_but_i_suspect_that_you_would_prove_them_wrong_what_do_you_say"),
		(else_try),
			(str_store_string, 11, "@What do you say to entering the service of {s9} as a mercenary captain? I have no doubt that you would be up to the task."),
		(try_end)
	],
	"As it happens, {playername}, I promised {s10} that I would hire a company of sellswords for an upcoming campaign.", "lord_mercenary_service",
	[]],

	[anyone|plyr, "lord_mercenary_service",
	[],
	"I'm not interested, thank you.", "lord_mercenary_service_reject",
	[]],

	[anyone|plyr, "lord_mercenary_service",
	[],
	"Aye, I'll join {s9}.", "lord_mercenary_service_accept",
	[]],

	[anyone|plyr, "lord_mercenary_service",
	[],
	"I'm interested. Please tell me more.", "lord_mercenary_elaborate_pay",
	[]],

	[anyone, "lord_mercenary_service_accept",
	[
		(str_store_faction_name, 9, "$g_talk_troop_faction")
	],
	"Perfect. Of course you shall have to make a formal declaration of allegiance, and give your oath that you and your company will remain in service to {s9} for a period of no less than one month.", "lord_mercenary_service_verify",
	[]],

	[anyone|plyr, "lord_mercenary_service_verify",
	[],
	"As you wish. Your enemies are my enemies.", "lord_mercenary_service_verify_2",
	[]],

	[anyone|plyr, "lord_mercenary_service_verify",
	[],
	"On second thought, forget it.", "lord_mercenary_service_reject",
	[]],

	[anyone, "lord_mercenary_service_verify_2",
	[],
	"That will do. You've made a wise choice, my friend. {s9} does well by its loyal fighters, you will receive many rewards for your service.", "lord_mercenary_service_accept_3",
	[
		(call_script, "script_troop_add_gold", "trp_player", "$temp"),
		(store_current_day, ":current_day"),
		(store_add, "$mercenary_service_next_renew_day", ":current_day", 30),
		(call_script, "script_player_join_faction", "$g_talk_troop_faction"),
		(str_store_faction_name, 9, "$g_talk_troop_faction")
	]],

	[anyone, "lord_mercenary_service_accept_3",
	[],
	"Now, I suggest you prepare for a serious campaign. Train and equip your soldiers as best you can in the meantime, and respond quickly when you are summoned for duty.", "lord_pretalk",
	[]],

	[anyone, "lord_mercenary_service_reject",
	[
		(str_store_faction_name, 9, "$g_talk_troop_faction")
	],
	"I'm very sorry to hear that. You'll find no better place than {s9}, be sure of that.", "lord_pretalk",
	[]],

	[anyone, "lord_mercenary_elaborate_pay",
	[
		(assign, reg12, "$temp")
	],
	"I can offer you a contract for one month. At the end of this period, it can be extended on a monthly basis. An initial sum of {reg12} coins will be paid to you to seal the contract. After that, you'll receive wages from {s10} each week, according to the number and quality of the soldiers in your company. You still have your rights to battlefield loot and salvage, as well as any prisoners you capture. War can be very profitable at times...", "lord_mercenary_elaborate_1",
	[
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(str_store_troop_name, 10, ":g_talk_troop_faction_leader")
	]],

	[anyone, "lord_mercenary_service_elaborate_duty",
	[],
	"Duties... There are only a few, none of them difficult. The very first thing is to declare your allegiance. An oath of loyalty to our cause. Once that's done, you shall be required to fulfill certain responsibilities. You'll participate in military campaigns, fulfill any duties given to you by your commanders, and most of all you shall attack the enemies of our sovereignty wherever you might find them.", "lord_mercenary_elaborate_1",
	[
		(faction_get_slot, ":g_talk_troop_faction_leader", "$g_talk_troop_faction", slot_faction_leader),
		(str_store_troop_name, 10, ":g_talk_troop_faction_leader")
	]],

	[anyone|plyr, "lord_mercenary_elaborate_1",
	[],
	"And what about my duties as a mercenary?", "lord_mercenary_service_elaborate_duty",
	[]],

	[anyone|plyr, "lord_mercenary_elaborate_1",
	[],
	"Can I hold on to any castles I take?", "lord_mercenary_elaborate_castle",
	[]],

	[anyone|plyr, "lord_mercenary_elaborate_1",
	[
		(neg|troop_slot_ge, "trp_player", 13, 1)
	],
	"Can I fly my own banner?", "lord_mercenary_elaborate_banner",
	[]],

	[anyone|plyr, "lord_mercenary_elaborate_1",
	[],
	"How much will you pay me for my service?", "lord_mercenary_elaborate_pay",
	[]],

	[anyone|plyr, "lord_mercenary_elaborate_1",
	[],
	"Sounds good. I wish to enter your service as a mercenary.", "lord_mercenary_service_accept",
	[]],

	[anyone|plyr, "lord_mercenary_elaborate_1",
	[],
	"Apologies, my sword is not for hire.", "lord_mercenary_service_reject",
	[]],

	[anyone, "lord_mercenary_elaborate_castle",
	[
		(lt, "$g_disable_condescending_comments", 2),
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
		(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", "$character_gender")
	],
	"Only my loyal vassals can own lands and castles in my realm -- and all my vassals are {women/men}. I am not inclined to depart from this tradition without a very good reason. If you prove yourself in battle, you can swear an oath of homage to me and become my vassal. We may then discuss how you may obtain a castle.", "lord_mercenary_elaborate_1",
	[]],

	[anyone, "lord_mercenary_elaborate_castle",
	[
		(lt, "$g_disable_condescending_comments", 2),
		(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", "$character_gender"),
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 6, 0),
		(faction_get_slot, reg0, "$g_talk_troop_faction", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female", reg0),
		(try_begin),
			(eq, reg0, 1),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 5, 1),
		(else_try),
			(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 4, 1),
		(try_end)
	],
	"Hmm... Only loyal vassals of {s10} can own lands and castles. While {s0} will sometimes accept vassalage from {men/women} who prove themselves in battle, and grant them land, I have never heard of a {s1} who gave fiefs to {men/women}. You had best discuss that issue with {s10} {reg0?herself:himself}.", "lord_mercenary_elaborate_1",
	[]],

	[anyone, "lord_mercenary_elaborate_castle",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop")
	],
	"Only my loyal vassals can own lands and castles in my realm. A mercenary can not be trusted with such a responsibility. However, after serving for some time, you can swear homage to me and become my vassal. Then you will be rewarded with a fief.", "lord_mercenary_elaborate_1",
	[]],

	[anyone, "lord_mercenary_elaborate_castle",
	[
		(faction_get_slot, reg0, "$g_talk_troop_faction", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female", reg0)
	],
	"Only loyal vassals of {s10} can own lands and castles. You understand, a simple mercenary cannot be trusted with such responsibility. However, after serving for some time, you may earn the right to swear homage to {s10} and become {reg0?her:his} vassal. Then you would be rewarded with a fief.", "lord_mercenary_elaborate_1",
	[]],

	[anyone, "lord_mercenary_elaborate_banner",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop")
	],
	"Only my noble vassals have the honour of carrying their own banners. However, after some time in mercenary service, you may earn the opportunity to swear homage to me and become my vassal, gaining the right to choose a banner of your own and fight under it in battle.", "lord_mercenary_elaborate_1",
	[]],

	[anyone, "lord_mercenary_elaborate_banner",
	[
		(faction_get_slot, reg0, "$g_talk_troop_faction", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female", reg0)
	],
	"Only noble vassals of {s10} have the honour of carrying their own banners. However, after some time of mercenary service, perhaps you can earn the opportunity to swear homage to {s10} and become {reg0?her:his} vassal, gaining the right to choose a banner of your own and fight under it in battle.", "lord_mercenary_elaborate_1",
	[]],

	[anyone, "lord_request_mission_ask",
	[
		(store_partner_quest, ":partner_quest"),
		(ge, ":partner_quest", 0)
	],
	"You still haven't finished the last job I gave you, {playername}. You should be working on that, not asking me for other things to do.", "lord_pretalk",
	[]],

	[anyone, "lord_request_mission_ask",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	],
	"I don't have any other jobs for you right now.", "lord_pretalk",
	[]],

	[anyone|auto_proceed, "lord_request_mission_ask",
	[],
	"A task?", "lord_tell_mission",
	[
		(call_script, "script_get_quest", "$g_talk_troop"),
		(assign, "$random_quest_no", reg0)
	]],

	[anyone, "lord_request_mission_ask",
	[
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_met, 2),
		(troop_slot_eq, "trp_player", slot_troop_betrothed, "$g_talk_troop")
	],
	"My {lord/lady}, by the traditions of courtship, I should be offering my services to you. Unfortunately, I have little time right now, so I beg you to take this declaration of my esteem in its place.", "lord_pretalk",
	[]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$player_has_homage", 1),
		(neq, "$random_quest_no", "qst_raise_troops"),
		(neq, "$random_quest_no", "qst_escort_lady"),
		(neq, "$random_quest_no", "qst_lend_companion"),
		(neq, "$random_quest_no", "qst_capture_enemy_hero"),
		(neq, "$random_quest_no", "qst_cause_provocation"),
		(assign, ":value", 0),
		(assign, ":value_2", 0),
		(try_begin),
			(call_script, "script_dplmc_is_affiliated_family_member", "$g_talk_troop"),
			(this_or_next|ge, reg0, 1),
			(troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
			(assign, ":value", 1),
		(else_try),
			(ge, "$g_talk_troop_faction_relation", 0),
			(ge, "$g_talk_troop_relation", 50),
			(try_begin),
				(this_or_next|is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
				(is_between, "$g_talk_troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
				(neg|troop_slot_eq, "$g_talk_troop", slot_troop_playerparty_history, 8),
				(assign, ":value", 1),
			(else_try),
				(call_script, "script_troop_get_family_relation_to_troop", "$g_talk_troop", "trp_player"),
				(ge, reg0, 2),
				(assign, ":value", 1),
			(try_end),
		(try_end),
		(try_begin),
			(this_or_next|troop_slot_eq, "trp_player", slot_troop_father, "$g_talk_troop"),
			(this_or_next|troop_slot_eq, "trp_player", slot_troop_mother, "$g_talk_troop"),
			(this_or_next|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
			(faction_slot_eq, "$g_talk_troop_faction", slot_faction_marshall, "$g_talk_troop"),
			(assign, ":value_2", 1),
		(else_try),
			(troop_get_slot, reg0, "$g_talk_troop", slot_troop_renown),
			(val_mul, reg0, 3),
			(val_div, reg0, 4),
			(assign, ":var_3", reg0),
			(try_begin),
				(lt, "$g_disable_condescending_comments", 0),
				(neq, reg65, "$character_gender"),
				(neg|troop_slot_ge, "$g_talk_troop", 52, 8),
				(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 4),
				(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 6),
				(neg|is_between, "$g_talk_troop", "trp_npc1", "trp_kingdom_1_lord"),
				(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_talk_troop_faction", "trp_player"),
				(val_mul, ":var_3", 2),
			(try_end),
			(assign, reg0, ":var_3"),
			(neg|troop_slot_ge, "trp_player", 7, reg0),
			(assign, ":value_2", 1),
		(else_try),
			(troop_get_slot, ":player_spouse", "trp_player", slot_troop_spouse),
			(is_between, ":player_spouse", "trp_npc1", "trp_heroes_end"),
			(this_or_next|troop_slot_eq, ":player_spouse", slot_troop_father, "$g_talk_troop"),
			(troop_slot_eq, ":player_spouse", slot_troop_mother, "$g_talk_troop"),
			(assign, ":value_2", 1),
		(try_end),
		(assign, ":value_3", 0),
		(try_begin),
			(this_or_next|ge, ":value", 1),
			(ge, ":value_2", 1),
			(this_or_next|eq, "$random_quest_no", "qst_deliver_message_to_prisoner_lord"),
			(this_or_next|eq, "$random_quest_no", "qst_meet_spy_in_enemy_town"),
			(this_or_next|eq, "$random_quest_no", "qst_deliver_message"),
			(this_or_next|eq, "$random_quest_no", "qst_collect_taxes"),
			(this_or_next|eq, "$random_quest_no", "qst_follow_spy"),
			(eq, "$random_quest_no", "qst_capture_prisoners"),
			(assign, ":value_3", 1),
		(else_try),
			(ge, ":value", 1),
			(this_or_next|eq, "$random_quest_no", "qst_kill_local_merchant"),
			(eq, "$random_quest_no", "qst_incriminate_loyal_commander"),
			(assign, ":value_3", 1),
		(try_end),
		(eq, ":value_3", 0),
		(try_begin),
			(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
			(troop_get_slot, reg0, "trp_player", slot_troop_spouse),
			(this_or_next|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "trp_player"),
			(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, reg0),
			(this_or_next|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "trp_player"),
			(ge, reg0, 1),
			(assign, reg0, 1),
		(else_try),
			(assign, reg0, 0),
		(try_end)
	],
	"There are some minor errands which I need completed, but it would be more appropriate to give them to one of my own {reg65?servants:men}, not to {reg0?my sworn liege:a sworn vassal of the realm}.", "lord_tell_mission_sworn_vassal",
	[]],

	[anyone, "lord_tell_mission_sworn_vassal",
	[
		(this_or_next|party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 1),
		(party_slot_eq, "$g_talk_troop_party", slot_party_ai_state, 5),
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(is_between, ":g_talk_troop_party_ai_object", "p_town_1", "p_salt_mine"),
		(str_store_party_name, 4, ":g_talk_troop_party_ai_object")
	],
	"If you are looking for action against our foes, you may join our attack on {s4}. The enemy may come in force to oppose us, so it is good to have as many {reg65?soldiers:{soldiers/men}} as possible.", "lord_pretalk",
	[]],

	[anyone, "lord_tell_mission_sworn_vassal",
	[
		(eq, "$g_talk_troop_faction", "$players_kingdom"),
		(party_get_slot, ":g_talk_troop_party_ai_object", "$g_talk_troop_party", slot_party_ai_object),
		(is_between, ":g_talk_troop_party_ai_object", "p_town_1", "p_salt_mine"),
		(party_get_slot, ":g_talk_troop_party_ai_object_center_last_spotted_enemy", ":g_talk_troop_party_ai_object", slot_center_last_spotted_enemy),
		(party_is_active, ":g_talk_troop_party_ai_object_center_last_spotted_enemy"),
		(store_faction_of_party, ":faction_of_party_g_talk_troop_party_ai_object_center_last_spotted_enemy", ":g_talk_troop_party_ai_object_center_last_spotted_enemy"),
		(store_relation, ":relation_faction_of_party_g_talk_troop_party_ai_object_center_last_spotted_enemy_g_talk_troop_faction", ":faction_of_party_g_talk_troop_party_ai_object_center_last_spotted_enemy", "$g_talk_troop_faction"),
		(lt, ":relation_faction_of_party_g_talk_troop_party_ai_object_center_last_spotted_enemy_g_talk_troop_faction", 0),
		(is_between, ":faction_of_party_g_talk_troop_party_ai_object_center_last_spotted_enemy", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(str_store_party_name, 4, ":g_talk_troop_party_ai_object"),
		(str_store_faction_name, 5, ":faction_of_party_g_talk_troop_party_ai_object_center_last_spotted_enemy")
	],
	"If you are looking for action against our foes, you may try venturing out to {s4}. We have received word that a force of the {s5} is in the area, and I am going there myself. I cannot guarantee you that our enemies will be there when you arrive, of course.", "lord_pretalk",
	[]],

	[anyone, "lord_tell_mission_sworn_vassal",
	[
		(eq, "$g_talk_troop_faction", "$players_kingdom"),
		(assign, ":value", -1),
		(assign, ":value_2", 9999),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(store_faction_of_party, ":faction_of_party_party", ":party"),
			(eq, ":faction_of_party_party", "$g_talk_troop_faction"),
			(party_get_slot, ":party_center_last_spotted_enemy", ":party", slot_center_last_spotted_enemy),
			(party_is_active, ":party_center_last_spotted_enemy"),
			(store_faction_of_party, ":faction_of_party_party_center_last_spotted_enemy", ":party_center_last_spotted_enemy"),
			(is_between, ":faction_of_party_party_center_last_spotted_enemy", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(store_relation, ":relation_faction_of_party_party_center_last_spotted_enemy_g_talk_troop_faction", ":faction_of_party_party_center_last_spotted_enemy", "$g_talk_troop_faction"),
			(lt, ":relation_faction_of_party_party_center_last_spotted_enemy_g_talk_troop_faction", 0),
			(store_distance_to_party_from_party, ":distance_to_party_from_party_party_main_party", ":party", "p_main_party"),
			(lt, ":distance_to_party_from_party_party_main_party", ":value_2"),
			(assign, ":value", ":party"),
			(assign, ":value_2", ":distance_to_party_from_party_party_main_party"),
			(str_store_faction_name, 5, ":faction_of_party_party_center_last_spotted_enemy"),
		(try_end),
		(is_between, ":value", "p_town_1", "p_salt_mine"),
		(str_store_party_name, 4, ":value")
	],
	"If you are looking for action against our foes, you may try venturing out to {s4}. We have received word that a force of the {s5} is in the area. I am not currently headed that way, but others may be.  I cannot guarantee you that our enemies will be there when you arrive, of course.", "lord_pretalk",
	[]],

	[anyone, "lord_tell_mission_sworn_vassal",
	[],
	"If a worthy task presents itself, however, I may have a favor to ask of you at a later date.", "lord_pretalk",
	[]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_destroy_bandit_lair"),
		(quest_get_slot, ":destroy_bandit_lair_target_party", "qst_destroy_bandit_lair", slot_quest_target_party),
		(party_stack_get_troop_id, ":party_stack_troop_id_destroy_bandit_lair_target_party_0", ":destroy_bandit_lair_target_party", 0),
		(str_store_troop_name_plural, 4, ":party_stack_troop_id_destroy_bandit_lair_target_party_0")
	],
	"Yes -- there is something you can do for us. We have heard reports that a group of {s4} have established a hideout in this area, and have been attacking travellers. If you could find their lair and destroy it, we would be very grateful.", "destroy_lair_quest_brief",
	[]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_rescue_prisoner"),
		(assign, reg3, 0),
		(try_begin),
			(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
			(troop_get_slot, ":random_quest_no_target_troop_prisoner_of_party", ":random_quest_no_target_troop", slot_troop_prisoner_of_party),
			(party_get_slot, ":random_quest_no_target_troop_prisoner_of_party_town_lord", ":random_quest_no_target_troop_prisoner_of_party", slot_town_lord),
			(call_script, "script_cf_dplmc_troop_is_female", ":random_quest_no_target_troop_prisoner_of_party_town_lord"),
			(assign, reg3, 1),
		(try_end)
	],
	"My {s11}, {s13}, has been taken prisoner by {s14} of the {s15}. Normally, honorable nobles will grant prisoners of gentle blood the privilege of parole, and treat them as honored guests so long as they give their word that they will not attempt to escape, until such time as a ransom can be paid.  But {s14}, instead of granting {s13} parole, has consigned my {s11} to {reg3?her:his} dungeons -- no doubt in the hope that {reg3?she:he} can demand more from us.", "lord_mission_rescue_prisoner",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(troop_get_slot, ":random_quest_no_target_troop_prisoner_of_party", ":random_quest_no_target_troop", slot_troop_prisoner_of_party),
		(call_script, "script_troop_get_family_relation_to_troop", ":random_quest_no_target_troop", "$g_talk_troop"),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_troop_name_link, 13, ":random_quest_no_target_troop"),
		(str_store_party_name_link, 24, ":random_quest_no_target_troop_prisoner_of_party"),
		(party_get_slot, ":random_quest_no_target_troop_prisoner_of_party_town_lord", ":random_quest_no_target_troop_prisoner_of_party", slot_town_lord),
		(str_store_troop_name, 14, ":random_quest_no_target_troop_prisoner_of_party_town_lord"),
		(store_faction_of_party, ":faction_of_party_random_quest_no_target_troop_prisoner_of_party", ":random_quest_no_target_troop_prisoner_of_party"),
		(str_store_faction_name, 15, ":faction_of_party_random_quest_no_target_troop_prisoner_of_party"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "str_s9_asked_you_to_rescue_s13_who_is_prisoner_at_s24")
	]],

	[anyone, "lord_mission_rescue_prisoner",
	[],
	"We need you to get my {s11} out of prison. You may be able to pay a ransom -- in which case we could cover your expenses, up to 5000 coins. If you have connections within {s24}, you may be able to use them to sneak {reg4?her:him} out. Or, you may try a more direct approach -- walk up to the gaoler, take the keys by force, and then fight your way out. Can you do this for us?", "lord_mission_rescue_prisoner_confirm",
	[]],

	[anyone|plyr, "lord_mission_rescue_prisoner_confirm",
	[],
	"I can try.", "lord_mission_rescue_prisoner_accepted",
	[]],

	[anyone|plyr, "lord_mission_rescue_prisoner_confirm",
	[],
	"I don't think that I can help you.", "lord_mission_rescue_prisoner_rejected",
	[]],

	[anyone, "lord_mission_rescue_prisoner_rejected",
	[],
	"It would not have been an easy task. Perhaps we will find another way.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_mission_rescue_prisoner_accepted",
	[],
	"We are most grateful. Could I ask you how you were planning to proceed?", "lord_mission_rescue_prisoner_method",
	[
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1)
	]],

	[anyone, "lord_mission_rescue_other_ideas",
	[],
	"Did you have any other ideas which you wished to discuss?", "lord_mission_rescue_prisoner_method",
	[]],

	[anyone|plyr, "lord_mission_rescue_prisoner_method",
	[
		(eq, 1, 0)
	],
	"{!}I am thinking of paying the ransom.", "lord_mission_rescue_prisoner_method_ransom",
	[]],

	[anyone|plyr, "lord_mission_rescue_prisoner_method",
	[
		(eq, 1, 0)
	],
	"{!}I am thinking of using my connections in {s24}.", "close_window",
	[]],

	[anyone|plyr, "lord_mission_rescue_prisoner_method",
	[],
	"I am thinking of breaking into the prison in {s24}, finding {s13}, and fighting my way out.", "lord_mission_rescue_prisoner_method_prisonbreak",
	[]],

	[anyone|plyr, "lord_mission_rescue_prisoner_method",
	[],
	"I am thinking of taking {s24} by storm.", "lord_mission_rescue_prisoner_method_siege",
	[]],

	[anyone|plyr, "lord_mission_rescue_prisoner_method",
	[],
	"I have done enough planning. Time to act!", "lord_mission_rescue_prisoner_planning_end",
	[]],

	[anyone, "lord_mission_rescue_prisoner_planning_end",
	[],
	"May the heavens protect you.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_mission_rescue_prisoner_method_ransom",
	[],
	"{!}[Ransom option not yet implemented]", "lord_mission_rescue_other_ideas",
	[]],

	[anyone, "lord_mission_rescue_prisoner_method_prisonbreak",
	[],
	"I had discussed this idea with some of my men. One could enter {s24}, either in disguise or openly, then walk up to the prison guard and try to take the keys by force. However, getting out may be difficult. The garrison may be slow to react, but even so, you are likely to find yourself fighting a half dozen or more of the enemy at once, with limited space in which to maneuver. If you can fight your way past them, though, you can probably get out.", "lord_mission_rescue_prisoner_method_prisonbreak_2",
	[]],

	[anyone, "lord_mission_rescue_prisoner_method_prisonbreak_2",
	[],
	"You may find it useful to create a distraction, to divert the attention of some of the garrison. If you have any connections in the villages near {s24}, this may be a time to put them to use.", "lord_mission_rescue_other_ideas",
	[]],

	[anyone, "lord_mission_rescue_prisoner_method_siege",
	[],
	"Well, that is certainly the most direct approach.", "lord_mission_rescue_other_ideas",
	[]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_deliver_message"),
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":random_quest_no_target_troop")
	],
	"I need to send a letter to {s13} who should be currently at {s4}. If you will be heading towards there, would you deliver it to {reg0?her:him}? The letter needs to be in {reg0?her:his} hands in 30 days.", "lord_mission_deliver_message",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_troop_name_link, 13, ":random_quest_no_target_troop"),
		(str_store_party_name_link, 4, ":random_quest_no_target_center"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s9} asked you to take a message to {s13}. {s13} was believed to be at {s4} when you were given this quest.")
	]],

	[anyone|plyr, "lord_mission_deliver_message",
	[],
	"Certainly, I intend to pass by {s4} and it would be no trouble.", "lord_mission_deliver_message_accepted",
	[]],

	[anyone|plyr, "lord_mission_deliver_message",
	[],
	"I doubt I'll be seeing {s13} anytime soon, {s65}. You'd best send it with someone else.", "lord_mission_deliver_message_rejected",
	[]],

	[anyone|plyr, "lord_mission_deliver_message",
	[],
	"I am no errand {boy/girl}, {reg65?my lady:sir}. Hire a courier for your trivialities.", "lord_mission_deliver_message_rejected_rudely",
	[]],

	[anyone, "lord_mission_deliver_message_accepted",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":random_quest_no_target_troop")
	],
	"I appreciate it, {playername}. Here's the letter, and a small sum to cover your travel expenses. Give my regards to {s13} when you see {reg0?her:him}.", "close_window",
	[
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(call_script, "script_troop_add_gold", "trp_player", 30),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_mission_deliver_message_rejected",
	[],
	"Ah, all right then. Well, I am sure I will find someone else.", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "lord_mission_deliver_message_rejected_rudely",
	[],
	"Hm, is this how you respond to a polite request for a small favor? A poor show, {playername}. I didn't know you would take offence.", "lord_mission_deliver_message_rejected_rudely_2",
	[]],

	[anyone|plyr, "lord_mission_deliver_message_rejected_rudely_2",
	[],
	"Then you shall know better from now on.", "lord_mission_deliver_message_rejected_rudely_3",
	[]],

	[anyone|plyr, "lord_mission_deliver_message_rejected_rudely_2",
	[],
	"Forgive my temper, {s65}. I'll deliver your letter.", "lord_mission_deliver_message_accepted",
	[]],

	[anyone, "lord_mission_deliver_message_rejected_rudely_3",
	[],
	"All right. I will remember that.", "close_window",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -4),
		(quest_set_slot, "$random_quest_no", slot_quest_dont_give_again_remaining_days, 150),
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_deliver_message_to_enemy_lord"),
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":random_quest_no_target_troop")
	],
	"I need to deliver a letter to {s13} of {s15}, who must be at {s4} currently. If you are going towards there, would you deliver my letter to {reg0?her:him}? The letter needs to reach {reg0?her:him} in 40 days.", "lord_mission_deliver_message",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_troop_name_link, 13, ":random_quest_no_target_troop"),
		(str_store_party_name_link, 4, ":random_quest_no_target_center"),
		(store_faction_of_troop, ":faction_of_troop_random_quest_no_target_troop", ":random_quest_no_target_troop"),
		(str_store_faction_name_link, 15, ":faction_of_troop_random_quest_no_target_troop"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s9} asked you to take a message to {s13} of the {s15}. {s13} was believed to be at {s4} when you were given this quest.")
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_deliver_love_letter")
	],
	"Ah, love. Have you ever been in love, {playername}? I have fallen for a lady. I saw {s13} at a banquet not long ago, and have thought of little else since... I must know if she feels the same way. Will you deliver this message for me?", "lord_mission_deliver_love_letter",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_troop_name, 13, ":random_quest_no_target_troop"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s9} asked you to take a Love Letter to {s13}.")
	]],

	[anyone|plyr, "lord_mission_deliver_love_letter",
	[],
	"Certainly, I will carry your message.", "lord_mission_deliver_love_letter_accepted",
	[]],

	[anyone|plyr, "lord_mission_deliver_love_letter",
	[],
	"I doubt I'll be seeing {s13} anytime soon, {s65}. You'd best send it with someone else.", "lord_mission_deliver_love_letter_rejected",
	[]],

	[anyone, "lord_mission_deliver_love_letter_accepted",
	[],
	"I appreciate it, {playername}. Er, there's just one small snag. I'm not a literary man, and I suspect this type of thing is beyond me. You will have to help me write the note. Hmmm, let's see. How do you think I should start it off? I was thinking either, 'Greetings, wench,' or 'My love, my darling, I hunger for your touch'.", "lord_mission_deliver_love_letter1",
	[]],

	[anyone|plyr, "lord_mission_deliver_love_letter1",
	[],
	"Greetings, wench.", "lord_mission_deliver_love_letter_2",
	[
		(val_add, "$love_letter", -2)
	]],

	[anyone|plyr, "lord_mission_deliver_love_letter1",
	[],
	"My love, my darling, I hunger for your love.", "lord_mission_deliver_love_letter_2",
	[
		(val_add, "$love_letter", -1)
	]],

	[anyone|plyr, "lord_mission_deliver_love_letter1",
	[],
	"Er, how about, Dear Lady, I hope this letter finds you well.", "lord_mission_deliver_love_letter_2",
	[
		(val_add, "$love_letter", 1)
	]],

	[anyone, "lord_mission_deliver_love_letter_2",
	[],
	"Excellent, I like it! Now, what next? ^'I could not help but notice your bustle at the ball,' 'Your fragile beauty excites my desires,' or 'I admire a woman with some meat on her bones'?", "lord_mission_deliver_love_letter3",
	[]],

	[anyone|plyr, "lord_mission_deliver_love_letter3",
	[],
	"I could not help but notice your bustle at the ball.", "lord_mission_deliver_love_letter_4",
	[
		(val_add, "$love_letter", 1)
	]],

	[anyone|plyr, "lord_mission_deliver_love_letter3",
	[],
	"Your fragile beauty excites my desires.", "lord_mission_deliver_love_letter_4",
	[
		(val_add, "$love_letter", 0)
	]],

	[anyone|plyr, "lord_mission_deliver_love_letter3",
	[],
	"I admire a woman with some meat on her bones.", "lord_mission_deliver_love_letter_4",
	[
		(val_add, "$love_letter", -1)
	]],

	[anyone, "lord_mission_deliver_love_letter_4",
	[],
	"Wonderful. Truly a masterpiece. And to conclude on a high note? ^How about, 'In truth, I love you more than my own horse.' No? Well, what about, 'Your beauty dazzles me like glare of the sun on an enemy shield.' Ahhh, I like that one.", "lord_mission_deliver_love_letter5",
	[]],

	[anyone|plyr, "lord_mission_deliver_love_letter5",
	[],
	"In truth, I love you more than my own horse.", "lord_mission_deliver_love_letter_6",
	[
		(val_add, "$love_letter", -1)
	]],

	[anyone|plyr, "lord_mission_deliver_love_letter5",
	[],
	"Your beauty dazzles me like glare of the sun on an enemy shield.", "lord_mission_deliver_love_letter_6",
	[
		(val_add, "$love_letter", 1)
	]],

	[anyone|plyr, "lord_mission_deliver_love_letter5",
	[],
	"Maybe, your noble mien evokes a subtle mystery?", "lord_mission_deliver_love_letter_6",
	[
		(val_add, "$love_letter", 2)
	]],

	[anyone, "lord_mission_deliver_love_letter_6",
	[],
	"I appreciate your help, {playername}. Here's the letter, and some money to cover your travel expenses. Ha ha! How can she resist?", "close_window",
	[
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(call_script, "script_troop_add_gold", "trp_player", 50),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 5),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_mission_deliver_love_letter_rejected",
	[],
	"Ah, all right then. Well, I am sure I will find someone else.", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_escort_lady"),
		(quest_get_slot, ":random_quest_no_object_troop", "$random_quest_no", slot_quest_object_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":random_quest_no_object_troop"),
		(assign, reg4, reg0)
	],
	"There is a small thing... My {s17} {s13} is due for a visit to {reg4?her:his} relatives at {s14}. The visit has been postponed several times already with all the trouble on the roads, but this time {reg4?he:she} is adamant about going. So, I want to at least make sure {reg4?she:he}'s well-guarded. I trust you well, {playername} so I would be very grateful if you could escort {reg4?her:him} to {s14} and make sure {reg4?she:he} arrives safe and sound.", "lord_mission_told",
	[
		(quest_get_slot, ":random_quest_no_object_troop", "$random_quest_no", slot_quest_object_troop),
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(call_script, "script_dplmc_troop_get_family_relation_to_troop", ":random_quest_no_object_troop", "$g_talk_troop"),
		(try_begin),
			(this_or_next|le, reg1, "str_error_string"),
			(lt, reg0, 1),
			(assign, reg1, "str_dplmc_friend"),
		(try_end),
		(str_store_string, 17, reg1),
		(call_script, "script_dplmc_cap_troop_describes_troop_to_troop_s1", 1, "$g_talk_troop", ":random_quest_no_object_troop", "trp_player"),
		(str_store_troop_name_link, 11, "$g_talk_troop"),
		(str_store_troop_name_link, 13, ":random_quest_no_object_troop"),
		(str_store_party_name_link, 14, ":random_quest_no_target_center"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s11} asked you to escort {reg65?her:his} {s17} {s13} to {s14}.")
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_deal_with_bandits_at_lords_village")
	],
	"A group of bandits have taken refuge in my village of {s15}. They are plundering nearby farms, and getting rich and fat stealing my taxes and feasting on my cattle.I'd like nothing better than to go out there and teach them a lesson, but I have my hands full at the moment, so I can't do anything about it.", "lord_mission_deal_with_bandits_told",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(str_store_party_name_link, 15, ":random_quest_no_target_center"),
		(str_store_troop_name_link, 13, "$g_talk_troop"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s13} asked you to deal with the bandits who are occupying the village of {s15} and then report back to {reg65?her:him.")
	]],

	[anyone|plyr, "lord_mission_deal_with_bandits_told",
	[],
	"Worry not, I can go to {s15} and deal with these scum for you.", "lord_mission_deal_with_bandits_accepted",
	[]],

	[anyone|plyr, "lord_mission_deal_with_bandits_told",
	[],
	"You shall have to find help elsewhere, I am too busy.", "lord_mission_deal_with_bandits_rejected",
	[]],

	[anyone, "lord_mission_deal_with_bandits_accepted",
	[],
	"Will you do that? Know that, I will be grateful to you. Here is some money for the expenses of your campaign. Make an example of those {s43}s.", "close_window",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_lord_insult_default"),
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(call_script, "script_troop_add_gold", "trp_player", 200),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_mission_deal_with_bandits_rejected",
	[],
	"Ah... Very well then, forget I brought it up.", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_raise_troops"),
		(try_begin),
			(call_script, "script_cf_dplmc_faction_has_bias_against_gender", "$g_encountered_party_faction", 0),
			(assign, reg0, 1),
		(else_try),
			(assign, reg0, 0),
		(try_end)
	],
	"No lord should have to admit this, {playername}, but I was inspecting my soldiers the other day and there are {reg0?{reg65?women:soldiers}:{reg65?soldiers:men}} here who don't know which end of a sword to hold. {s43} You are a warrior of renown, {playername}. Will you train some troops for me? I would be grateful to you.", "lord_tell_mission_raise_troops",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_troop_train_request_default")
	]],

	[anyone|plyr, "lord_tell_mission_raise_troops",
	[],
	"How many men do you need?", "lord_tell_mission_raise_troops_2",
	[]],

	[anyone, "lord_tell_mission_raise_troops_2",
	[],
	"If you can raise {reg1} {s14} and bring them to me, that will probably be enough.", "lord_mission_raise_troops_told",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(quest_get_slot, reg1, "$random_quest_no", slot_quest_target_amount),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_troop_name_plural, 14, ":random_quest_no_target_troop"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s9} asked you to raise {reg1} {s14} and bring them to {reg65?her:him}.")
	]],

	[anyone|plyr, "lord_mission_raise_troops_told",
	[
		(quest_get_slot, reg1, "$random_quest_no", slot_quest_target_amount)
	],
	"Of course, {s65}. Give me {reg1} fresh recruits and I'll train them to be {s14}.", "lord_mission_raise_troops_accepted",
	[]],

	[anyone|plyr, "lord_mission_raise_troops_told",
	[],
	"I am too busy these days to train anyone.", "lord_mission_raise_troops_rejected",
	[]],

	[anyone, "lord_mission_raise_troops_accepted",
	[],
	"You've taken a weight off my shoulders, {playername}. I shall tell my sergeants to send you the recruits and attach them to your command. Also, I'll advance you some money to help with expenses. Here, this purse should do it. Thank you for your help.", "close_window",
	[
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(call_script, "script_troop_add_gold", "trp_player", 100),
		(quest_get_slot, ":random_quest_no_object_troop", "$random_quest_no", slot_quest_object_troop),
		(quest_get_slot, ":random_quest_no_target_amount", "$random_quest_no", slot_quest_target_amount),
		(party_add_members, "p_main_party", ":random_quest_no_object_troop", ":random_quest_no_target_amount"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_mission_raise_troops_rejected",
	[],
	"Oh, of course. I had expected as much. Well, good luck to you then.", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_collect_taxes"),
		(assign, reg9, 0),
		(try_begin),
			(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
			(party_slot_eq, ":random_quest_no_target_center", slot_party_type, 3),
			(assign, reg9, 1),
		(try_end)
	],
	"You probably know that I am the lord of the {reg9?town:village} of {s3}. However, it has been months since {s3} has delivered the taxes and rents due me as its rightful lord. Apparently the populace there has grown unruly lately and I need someone to go there and remind them of their obligations. And to . . . persuade them if they won't listen. If you go there and raise the taxes they owe me, I will grant you one-fifth of everything you collect.", "lord_mission_collect_taxes_told",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_party_name_link, 3, ":random_quest_no_target_center"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s9} asked you to collect taxes from {s3}. {reg65?She:He} offered to leave you one-fifth of all the money you collect there.")
	]],

	[anyone|plyr, "lord_mission_collect_taxes_told",
	[],
	"A fair offer, {s65}. We have an agreement.", "lord_mission_collect_taxes_accepted",
	[]],

	[anyone|plyr, "lord_mission_collect_taxes_told",
	[],
	"Forgive me, I don't have the time.", "lord_mission_collect_taxes_rejected",
	[]],

	[anyone, "lord_mission_collect_taxes_accepted",
	[],
	"Welcome news, {playername}. I will entrust this matter to you. Remember, those {reg9?townsmen:peasants} are foxy beasts, they will make every excuse not to pay me my rightful incomes. Do not let them fool you.", "close_window",
	[
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(assign, "$g_leave_encounter", 1),
		(assign, reg9, 0),
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(try_begin),
			(party_slot_eq, ":random_quest_no_target_center", slot_party_type, 3),
			(assign, reg9, 1),
		(try_end)
	]],

	[anyone, "lord_mission_collect_taxes_rejected",
	[],
	"Oh, yes. Well, good luck to you then.", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_hunt_down_fugitive")
	],
	"I have something you could help with, an issue with the lawless villain known as {s4}.  He murdered one of my men and has been on the run from his judgment ever since. I can't let him get away with avoiding justice, so I've put a bounty of 300 coins on his head. Friends of the murdered man reckon that this assassin may have taken refuge with his kinsmen at {s3}. You might be able to hunt him down and give him what he deserves, and claim the bounty for yourself.", "lord_mission_hunt_down_fugitive_told",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(quest_get_slot, ":random_quest_no_target_dna", "$random_quest_no", slot_quest_target_dna),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_party_name_link, 3, ":random_quest_no_target_center"),
		(call_script, "script_get_name_from_dna_to_s50", ":random_quest_no_target_dna"),
		(str_store_string, 4, 50),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s9} asked you to hunt down a fugitive named {s4}. He is currently believed to be at {s3}.")
	]],

	[anyone|plyr, "lord_mission_hunt_down_fugitive_told",
	[],
	"Then I will hunt him down and execute the law.", "lord_mission_hunt_down_fugitive_accepted",
	[]],

	[anyone|plyr, "lord_mission_hunt_down_fugitive_told",
	[],
	"I am too busy to go after him at the moment.", "lord_mission_hunt_down_fugitive_rejected",
	[]],

	[anyone, "lord_mission_hunt_down_fugitive_accepted",
	[],
	"That's excellent, {playername}. I will be grateful to you and so will the family of the man he murdered. And of course the bounty on his head will be yours if you can get him. Well, good hunting to you.", "close_window",
	[
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_mission_hunt_down_fugitive_rejected",
	[],
	"As you wish, {playername}.I suppose there are plenty of bounty hunters around to get the job done . . .", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_kill_local_merchant")
	],
	"The wretched truth is that I owe a considerable sum of money to one of the merchants here in {s3}. I've no intention of paying it back, of course, but that loud-mouthed fool is making a terrible fuss about it. He even had the audacity to come and threaten me -- me! -- with a letter of complaint to the trade guilds and bankers. Why, he'd ruin my good reputation! So I need a {man/woman} I can trust, someone who will guarantee the man's silence. For good.", "lord_mission_told_kill_local_merchant",
	[
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_party_name_link, 3, "$current_town"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s9} asked you to assassinate a local merchant at {s3}.")
	]],

	[anyone|plyr, "lord_mission_told_kill_local_merchant",
	[],
	"Worry not, he shan't breathe a word.", "lord_mission_accepted_kill_local_merchant",
	[]],

	[anyone|plyr, "lord_mission_told_kill_local_merchant",
	[],
	"I'm no common murderer, my lord. Find someone else for your dirty job.", "lord_mission_rejected",
	[]],

	[anyone, "lord_mission_accepted_kill_local_merchant",
	[],
	"Very good. I trust in your skill and discretion, {playername}. Do not disappoint me. Go now and wait for my word, I'll send you a message telling when and where you can catch the merchant. Dispose of him for me and I shall reward you generously.", "close_window",
	[
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(assign, "$g_leave_town", 1),
		(assign, "$qst_kill_local_merchant_center", "$current_town"),
		(rest_for_hours, 10, 4, 0),
		(finish_mission)
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_meet_spy_in_enemy_town"),
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(str_store_party_name, 13, ":random_quest_no_target_center"),
		(store_faction_of_party, ":faction_of_party"),
		(str_store_faction_name, 14, ":faction_of_party")
	],
	"I have a sensitive matter which needs tending to, {playername}, and no trustworthy retainers to take care of it. The fact is that I have a spy in {s13} to keep an eye on things for me, and report anything that might warrant my attention. Every week I send someone to collect the spy's reports and bring them back to me. The job's yours if you wish it.", "lord_mission_told_meet_spy_in_enemy_town",
	[]],

	[anyone|plyr, "lord_mission_told_meet_spy_in_enemy_town",
	[],
	"I don't mind a bit of skullduggery. Count me in.", "quest_meet_spy_in_enemy_town_accepted",
	[]],

	[anyone|plyr, "lord_mission_told_meet_spy_in_enemy_town",
	[],
	"I must decline. This cloak-and-dagger work isn't fit for me.", "quest_meet_spy_in_enemy_town_rejected",
	[]],

	[anyone, "quest_meet_spy_in_enemy_town_accepted",
	[],
	"Excellent! Make your way to {s13} as soon as you can, the spy will be waiting.", "quest_meet_spy_in_enemy_town_accepted_response",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(quest_get_slot, ":random_quest_no_target_amount", "$random_quest_no", slot_quest_target_amount),
		(store_sub, ":value", ":random_quest_no_target_amount", "str_secret_sign_1"),
		(val_add, ":value", "str_countersign_1"),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_string, 11, ":random_quest_no_target_amount"),
		(str_store_string, 12, ":value"),
		(str_store_party_name_link, 13, ":random_quest_no_target_center"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s9} has asked you to meet with a spy in {s13}."),
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(call_script, "script_cf_center_get_free_walker", ":random_quest_no_target_center"),
		(call_script, "script_center_set_walker_to_type", ":random_quest_no_target_center", reg0, 3),
		(str_store_item_name, 14, "$spy_item_worn"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "quest_meet_spy_in_enemy_town_accepted_response",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(str_store_party_name_link, 13, ":random_quest_no_target_center")
	],
	"{s13} is heavily defended. How can I get close without being noticed?", "quest_meet_spy_in_enemy_town_accepted_2",
	[]],

	[anyone, "quest_meet_spy_in_enemy_town_accepted_2",
	[],
	"You shall have to use stealth. Take care to avoid enemy strongholds, villages and patrols, and don't bring too many men with you. If you fail to sneak in the first time, give it a while for the garrison to lower its guard again, or you may have a difficult time infiltrating the town.", "quest_meet_spy_in_enemy_town_accepted_response",
	[]],

	[anyone|plyr, "quest_meet_spy_in_enemy_town_accepted_response",
	[],
	"How will I recognise the spy?", "quest_meet_spy_in_enemy_town_accepted_3",
	[]],

	[anyone, "quest_meet_spy_in_enemy_town_accepted_3",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(str_store_party_name_link, 13, ":random_quest_no_target_center"),
		(assign, reg7, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$spy_quest_troop"),
			(assign, reg7, 1),
		(try_end),
		(quest_get_slot, ":random_quest_no_target_amount", "$random_quest_no", slot_quest_target_amount),
		(store_sub, ":value", ":random_quest_no_target_amount", "str_secret_sign_1"),
		(val_add, ":value", "str_countersign_1"),
		(str_store_string, 11, ":random_quest_no_target_amount"),
		(str_store_string, 12, ":value")
	],
	"Once you get to {s13} you must talk to the locals, the spy will be one of them. If you think you've found the spy, say the phrase '{s11}' The spy will respond with the phrase '{s12}' Thus you will know the other, and {reg7?she:he} will give you any information {reg7?she:he}'s gathered in my service.", "quest_meet_spy_in_enemy_town_accepted_response",
	[]],

	[anyone|plyr, "quest_meet_spy_in_enemy_town_accepted_response",
	[],
	"Will I be paid?", "quest_meet_spy_in_enemy_town_accepted_4",
	[]],

	[anyone, "quest_meet_spy_in_enemy_town_accepted_4",
	[],
	"Of course, I have plenty of silver in my coffers for loyal {men/women} like you. Do well by me, {playername}, and you'll rise high.", "quest_meet_spy_in_enemy_town_accepted_response",
	[]],

	[anyone|plyr, "quest_meet_spy_in_enemy_town_accepted_response",
	[],
	"I know what to do. Farewell, my lord.", "quest_meet_spy_in_enemy_town_accepted_end",
	[]],

	[anyone, "quest_meet_spy_in_enemy_town_accepted_end",
	[
		(quest_get_slot, ":random_quest_no_target_amount", "$random_quest_no", slot_quest_target_amount),
		(store_sub, ":value", ":random_quest_no_target_amount", "str_secret_sign_1"),
		(val_add, ":value", "str_countersign_1"),
		(str_store_string, 11, ":random_quest_no_target_amount"),
		(str_store_string, 12, ":value")
	],
	"Good luck, {playername}. Remember, the secret phrase is '{s11}' The counterphrase is '{s12}' Bring any reports back to me, and I'll compensate you for your trouble.", "lord_pretalk",
	[]],

	[anyone, "quest_meet_spy_in_enemy_town_rejected",
	[],
	"As you wish, {playername}, but I strongly advise you to forget anything I told you about any spies. They do not exist, have never existed, and no one will ever find them. Remember that.", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_cause_provocation"),
		(quest_get_slot, ":random_quest_no_target_faction", "$random_quest_no", slot_quest_target_faction),
		(str_store_faction_name_link, 13, ":random_quest_no_target_faction")
	],
	"This peace with {s13} ill suits me, {playername}. We've let those swine have their way for far too long. Now they get stronger with each passing and their arrogance knows no bounds. I say, we must wage war on them before it's too late! Unfortunately, some of the bleeding hearts among our realm's lords are blocking a possible declaration of war. Witless cowards with no stomach for blood.", "lord_mission_told_raid_caravan_to_start_war",
	[]],

	[anyone|plyr, "lord_mission_told_raid_caravan_to_start_war",
	[],
	"You are right, {s65}, but what can we do?", "lord_mission_tell_raid_caravan_to_start_war_2",
	[]],

	[anyone|plyr, "lord_mission_told_raid_caravan_to_start_war",
	[],
	"I disagree, my lord. It is better that there be peace.", "quest_raid_caravan_to_start_war_rejected_1",
	[]],

	[anyone, "lord_mission_tell_raid_caravan_to_start_war_2",
	[
		(quest_get_slot, ":random_quest_no_target_faction", "$random_quest_no", slot_quest_target_faction),
		(str_store_faction_name_link, 13, ":random_quest_no_target_faction"),
		(str_store_faction_name, 14, "$g_talk_troop_faction")
	],
	"Ah, 'tis good to hear someone who understands! As a matter of fact, there is something we can do, {playername}. A little bit of provocation... If one of our war parties managed to enter their territory and pillage one of their caravans, or raided one of their villages, and perhaps left behind a little token or two of the {s14}, they would have ample cause to declare war on us. And then, well, even the cowards among us must rise to defend themselves. So what do you say? Are you interested?", "lord_mission_tell_raid_caravan_to_start_war_3",
	[]],

	[anyone|plyr, "lord_mission_tell_raid_caravan_to_start_war_3",
	[],
	"An excellent plan. Count me in.", "quest_raid_caravan_to_start_war_accepted",
	[]],

	[anyone|plyr, "lord_mission_tell_raid_caravan_to_start_war_3",
	[],
	"Why don't you do that yourself?", "lord_mission_tell_raid_caravan_to_start_war_4",
	[]],

	[anyone, "lord_mission_tell_raid_caravan_to_start_war_4",
	[],
	"Well, {playername}, some of the lords in our sovereignty won't like the idea of someone inciting a war without their consent. They are already looking for an excuse to get at me, and if I did this they could make me pay for it dearly. You, on the other hand, are young and well-liked and daring, so you might just get away with it. And of course I will back you up and defend your actions against your opponents. All in all, a few lords might be upset at your endeavour, but I am sure you won't be bothered with that.", "lord_mission_tell_raid_caravan_to_start_war_5",
	[]],

	[anyone|plyr, "lord_mission_tell_raid_caravan_to_start_war_5",
	[],
	"That seems reasonable. I am willing to do this.", "quest_raid_caravan_to_start_war_accepted",
	[]],

	[anyone|plyr, "lord_mission_tell_raid_caravan_to_start_war_5",
	[],
	"I don't like this. Find yourself someone else to take the blame for your schemes.", "quest_raid_caravan_to_start_war_rejected_2",
	[]],

	[anyone, "quest_raid_caravan_to_start_war_accepted",
	[],
	"Very good! A raid on a caravan, or, if you can't manage that, an attack on one of their villages, should do the trick. Now, good luck and good hunting. Go set the borders aflame!", "close_window",
	[
		(quest_get_slot, ":random_quest_no_target_faction", "$random_quest_no", slot_quest_target_faction),
		(quest_get_slot, ":random_quest_no_target_amount", "$random_quest_no", slot_quest_target_amount),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_faction_name_link, 13, ":random_quest_no_target_faction"),
		(assign, reg13, ":random_quest_no_target_amount"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "str_s9_asked_you_to_attack_a_village_or_some_caravans_as_to_provoke_a_war_with_s13"),
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "quest_raid_caravan_to_start_war_rejected_1",
	[],
	"Ah, you think so? But how long will your precious peace last? Not long, believe me.", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "quest_raid_caravan_to_start_war_rejected_2",
	[],
	"Hm. As you wish, {playername}. I thought you had some fire in you, but it seems I was wrong.", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_bring_back_runaway_serfs")
	],
	"Well, some of the serfs working my fields in {s4} have run away. The ungrateful swine, I let them plough my fields and rent my cottages, and this is how they repay me! From what I've been hearing, they're running to {s3} as fast as they can, and have split up into three groups to try and avoid capture. I want you to capture all three groups and fetch them back to {s4} by whatever means necessary. I should really have them hanged for attempting to escape, but we need hands for the upcoming harvest, so I'll let them go off this time with a good beating.", "lord_mission_told",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(quest_get_slot, ":random_quest_no_object_center", "$random_quest_no", slot_quest_object_center),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_party_name_link, 3, ":random_quest_no_target_center"),
		(str_store_party_name_link, 4, ":random_quest_no_object_center"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "str_s9_asked_you_to_catch_the_three_groups_of_runaway_serfs_and_bring_them_back_to_s4_alive_and_breathing_he_said_that_all_three_groups_are_heading_towards_s3")
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_follow_spy")
	],
	"I have good information that a man in this very town is actually an enemy spy. He should be seized and hanged for his impudence, but we also believe that very soon he will leave town to meet with his master, the man to whom the spy feeds all his little whispers. The spy himself is of little import, but the master is a dangerous man, and could tell us a great deal if we could only get our hands on him...", "lord_tell_mission_follow_spy",
	[]],

	[anyone, "lord_tell_mission_follow_spy",
	[],
	"I want you to wait here until the spy leaves town. Then you must follow him, stealthily, to the meeting place. You must take absolute care not to be seen by the spy on your way, else he may suspect foul play and turn back. When the master appears, you must ambush and arrest them and bring the pair back to me. Alive, if you please.", "lord_tell_mission_follow_spy_2",
	[]],

	[anyone|plyr, "lord_tell_mission_follow_spy_2",
	[],
	"I'll do it, {s65}.", "lord_tell_mission_follow_spy_accepted",
	[]],

	[anyone|plyr, "lord_tell_mission_follow_spy_2",
	[],
	"No, this skulking is not for me.", "lord_tell_mission_follow_spy_rejected",
	[]],

	[anyone, "lord_tell_mission_follow_spy_accepted",
	[],
	"Good, I'm sure you'll do a fine job of it. One of my men will point the spy out to you when he leaves, so you will know the man to follow. Remember, I want them both, and I want them alive.", "close_window",
	[
		(str_store_troop_name_link, 11, "$g_talk_troop"),
		(str_store_party_name_link, 12, "$g_encountered_party"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s11} asked you to follow the spy that will leave {s12}. Be careful not to let the spy see you on the way, or he may get suspicious and turn back. Once the spy meets with his accomplice, you are to capture them and bring them back to {s11}."),
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(try_begin),
			(eq, "$troop_trees", "trp_troop_tree_0"),
			(spawn_around_party, "p_main_party", "pt_spy_partners"),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_1"),
			(spawn_around_party, "p_main_party", "pt_spy_partners_r"),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_2"),
			(spawn_around_party, "p_main_party", "pt_spy_partners_e"),
		(try_end),
		(assign, "$qst_follow_spy_spy_partners_party", reg0),
		(party_set_position, "$qst_follow_spy_spy_partners_party", 63),
		(party_set_ai_behavior, "$qst_follow_spy_spy_partners_party", 0),
		(party_set_flags, "$qst_follow_spy_spy_partners_party", 65536, 0),
		(set_spawn_radius, 0),
		(spawn_around_party, "$g_encountered_party", "pt_spy"),
		(assign, "$qst_follow_spy_spy_party", reg0),
		(party_set_ai_behavior, "$qst_follow_spy_spy_party", 1),
		(party_set_ai_object, "$qst_follow_spy_spy_party", "$qst_follow_spy_spy_partners_party"),
		(party_set_flags, "$qst_follow_spy_spy_party", 65536, 0),
		(assign, "$g_leave_town", 1),
		(rest_for_hours, 2, 4, 0)
	]],

	[anyone, "lord_tell_mission_follow_spy_rejected",
	[],
	"A shame. Well, carry on as you were, {playername}...", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_capture_enemy_hero")
	],
	"There is a difficult job I need done, {playername}, and you may be the {man/one} who can carry it off. I need someone to capture one of the noble lords of {s13} and bring him to me. Afterwards, I'll be able to exchange him in return for a relative of mine held by {s13}. It is a simple enough job, but whomever you choose will be guarded by an elite band of personal retainers. Are you up for a fight?", "lord_tell_mission_capture_enemy_hero",
	[
		(quest_get_slot, ":random_quest_no_target_faction", "$random_quest_no", slot_quest_target_faction),
		(str_store_faction_name, 13, ":random_quest_no_target_faction")
	]],

	[anyone|plyr, "lord_tell_mission_capture_enemy_hero",
	[],
	"Consider it done, {s65}.", "lord_tell_mission_capture_enemy_hero_accepted",
	[]],

	[anyone|plyr, "lord_tell_mission_capture_enemy_hero",
	[],
	"I must refuse, {s65}. I am not a kidnapper.", "lord_tell_mission_capture_enemy_hero_rejected",
	[]],

	[anyone, "lord_tell_mission_capture_enemy_hero_accepted",
	[],
	"I like your spirit! Go and bring me one of our enemies, and I'll toast your name in my hall when you return! And reward you for your efforts, of course...", "close_window",
	[
		(quest_get_slot, ":random_quest_no_target_faction", "$random_quest_no", slot_quest_target_faction),
		(str_store_troop_name_link, 11, "$g_talk_troop"),
		(str_store_faction_name_link, 13, ":random_quest_no_target_faction"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s11} asked you to capture a lord from the {s13}, any lord, and then drag your victim back to {s11} for safekeeping."),
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_tell_mission_capture_enemy_hero_rejected",
	[],
	"Clearly you lack the mettle I had thought you possessed. Very well, {playername}, I will find someone else.", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_lend_companion")
	],
	"I don't have a job for you right now, but your companion {s3} is a skilled {reg3?lass:fellow} and I need someone with {reg3?her:his} talents. Will you lend {reg3?her:him} to me for a while?", "lord_tell_mission_lend_companion",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(quest_get_slot, ":random_quest_no_target_amount", "$random_quest_no", slot_quest_target_amount),
		(val_add, ":random_quest_no_target_amount", 1),
		(assign, reg1, ":random_quest_no_target_amount"),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_troop_name, 3, ":random_quest_no_target_troop"),
		(setup_quest_text, "$random_quest_no"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":random_quest_no_target_troop", 3),
		(str_store_string, 2, "@{s9} asked you to lend your companion {s3} to him for a week.")
	]],

	[anyone|plyr, "lord_tell_mission_lend_companion",
	[],
	"How long will you be needing {reg3?her:him}?", "lord_tell_mission_lend_companion_2",
	[]],

	[anyone, "lord_tell_mission_lend_companion_2",
	[],
	"Just a few days, a week at most.", "lord_mission_lend_companion_told",
	[]],

	[anyone|plyr, "lord_mission_lend_companion_told",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(str_store_troop_name, 3, ":random_quest_no_target_troop")
	],
	"Then I will leave {s3} with you for one week.", "lord_tell_mission_lend_companion_accepted",
	[]],

	[anyone|plyr, "lord_mission_lend_companion_told",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(str_store_troop_name, 3, ":random_quest_no_target_troop")
	],
	"I am sorry, but I cannot do without {s3} for a whole week.", "lord_tell_mission_lend_companion_rejected",
	[]],

	[anyone, "lord_tell_mission_lend_companion_accepted",
	[],
	"I cannot thank you enough, {playername}. Worry not, your companion shall be returned to you with due haste.", "close_window",
	[
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(party_remove_members, "p_main_party", ":random_quest_no_target_troop", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_tell_mission_lend_companion_rejected",
	[],
	"Well, that's damned unfortunate, but I suppose I cannot force you or {s3} to agree. I shall have to make do without.", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_collect_debt"),
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":random_quest_no_target_troop")
	],
	"Some time ago, I loaned out a considerable sum of money to {s3}. {reg4} coins, to be precise. {reg0?She:He} was supposed to pay it back within a month but I haven't received a copper from {reg0?her:him} since. That was months ago. If you could collect the debt from {reg0?her:him} on my behalf, I would be grateful indeed. I would even let you keep one fifth of the money for your trouble. What do you say?", "lord_tell_mission_collect_debt",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(quest_get_slot, reg4, "$random_quest_no", slot_quest_target_amount),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_troop_name_link, 3, ":random_quest_no_target_troop"),
		(str_store_party_name_link, 4, ":random_quest_no_target_center"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s9} asked you to collect the debt of {reg4} coins {s3} owes to {reg65?her:him}. {s3} was at {s4} when you were given this quest.")
	]],

	[anyone|plyr, "lord_tell_mission_collect_debt",
	[],
	"Do you know where I can find {s3}, {s65}?", "lord_tell_mission_collect_debt_2",
	[]],

	[anyone, "lord_tell_mission_collect_debt_2",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":random_quest_no_target_troop")
	],
	"If you leave now, you should be able to find {reg0?her:him} at {s4}. I've no doubt that {reg0?she:he} will be suitably embarassed by {reg0?her:his} conduct and give you all the money {reg0?she:he} owes me.", "lord_tell_mission_collect_debt_3",
	[]],

	[anyone|plyr, "lord_tell_mission_collect_debt_3",
	[],
	"Then I will talk to {s3} on your behalf.", "lord_tell_mission_collect_debt_accepted",
	[]],

	[anyone|plyr, "lord_tell_mission_collect_debt_3",
	[],
	"Forgive me, {s65}, but I doubt I would be more successful than yourself.", "lord_tell_mission_collect_debt_rejected",
	[]],

	[anyone, "lord_tell_mission_collect_debt_accepted",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":random_quest_no_target_troop")
	],
	"You made me very happy by accepting this {playername}. Please, talk to {s3} and don't leave {reg0?her:him} without my money.", "close_window",
	[
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "lord_tell_mission_collect_debt_rejected",
	[],
	"Perhaps not, {playername}. I suppose I'm never getting that money back...", "lord_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_incriminate_loyal_commander"),
		(quest_get_slot, ":incriminate_loyal_commander_target_troop", "qst_incriminate_loyal_commander", slot_quest_target_troop),
		(quest_get_slot, ":incriminate_loyal_commander_object_troop", "qst_incriminate_loyal_commander", slot_quest_object_troop),
		(quest_get_slot, ":incriminate_loyal_commander_target_center", "qst_incriminate_loyal_commander", slot_quest_target_center),
		(str_store_troop_name_link, 13, ":incriminate_loyal_commander_target_troop"),
		(str_store_party_name_link, 14, ":incriminate_loyal_commander_target_center"),
		(str_store_troop_name_link, 15, ":incriminate_loyal_commander_object_troop"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":incriminate_loyal_commander_target_troop", 3)
	],
	"I tell you, that blubbering fool {s13} is not fit to rule {s14}. God knows {reg3?she:he} would be divested of {reg3?her:his} lands in an instant were it not for one of {reg3?her:his} loyal vassals, {s15}. As long as {reg3?she:he} has {reg3?her:his} vassal aiding {reg3?her:him}, it will be a difficult job beating {reg3?her:him}. So I need to get {s15} out of the picture, and I have a plan just to do that... With your help, naturally.", "lord_tell_mission_incriminate_commander",
	[]],

	[anyone|plyr, "lord_tell_mission_incriminate_commander",
	[],
	"{s66}, I am all ears.", "lord_tell_mission_incriminate_commander_2",
	[]],

	[anyone|plyr, "lord_tell_mission_incriminate_commander",
	[],
	"I don't wish to involve myself in anything dishonourable against {s15}.", "lord_tell_mission_incriminate_commander_rejected",
	[]],

	[anyone, "lord_tell_mission_incriminate_commander_rejected",
	[],
	"Dishonourable? Bah! I was hoping I could count on you, {playername}, but you've shown me what a fool I was. I shall have to find someone whose loyalty I can trust.", "lord_pretalk",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -5),
		(call_script, "script_change_player_honor", 2)
	]],

	[anyone, "lord_tell_mission_incriminate_commander_2",
	[
		(quest_get_slot, ":incriminate_loyal_commander_target_troop", "qst_incriminate_loyal_commander", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":incriminate_loyal_commander_target_troop", 3),
		(quest_get_slot, ":incriminate_loyal_commander_object_troop", "qst_incriminate_loyal_commander", slot_quest_object_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":incriminate_loyal_commander_object_troop"),
		(assign, reg0, reg4)
	],
	"I have written a fake letter to {s15}, bearing my own seal, which implicates {reg4?her:him} in a conspiracy with us to stage a coup in {s14}, in my favour. If we can make {s13} believe the letter is genuine, {reg3?she:he} will deal with {s15} very swiftly. Of course, the challenge there is to convince {s13} that the letter is indeed real...", "lord_tell_mission_incriminate_commander_3",
	[]],

	[anyone|plyr, "lord_tell_mission_incriminate_commander_3",
	[],
	"Please continue, {s65}...", "lord_tell_mission_incriminate_commander_4",
	[]],

	[anyone|plyr, "lord_tell_mission_incriminate_commander_3",
	[],
	"No, I will not sully myself with this dishonourable scheme.", "lord_tell_mission_incriminate_commander_rejected",
	[]],

	[anyone, "lord_tell_mission_incriminate_commander_4",
	[],
	"This is where you come into play. You'll take the letter to {s14}, then give it to one of your soldiers and instruct him to take it to {s15}. I will have one of my spies inform the town garrison so that your man will be arrested on his way. The guards will then find the letter and take it to {s13}. They'll torture your man, of course, to try and get the truth out of him, but all he knows is that you ordered the letter to be delivered to {s15} under the utmost secrecy. {s13} knows you serve me, and the fool will certainly believe the whole charade.", "lord_tell_mission_incriminate_commander_5",
	[]],

	[anyone|plyr, "lord_tell_mission_incriminate_commander_5",
	[],
	"Is that all?", "lord_tell_mission_incriminate_commander_7",
	[]],

	[anyone, "lord_tell_mission_incriminate_commander_7",
	[
		(str_store_troop_name, 8, "$incriminate_quest_sacrificed_troop"),
		(str_store_troop_name_plural, 9, "$incriminate_quest_sacrificed_troop"),
		(quest_get_slot, ":incriminate_loyal_commander_target_troop", "qst_incriminate_loyal_commander", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":incriminate_loyal_commander_target_troop", 3)
	],
	"There is one more thing... Your messenger must be someone trustworthy. If you sent the letter with a simple peasant, someone expendable, {s13} might suspect a plot. {reg3?She:He} may have the wits of a snail, but even a snail can see the obvious. Give the letter to someone of rank. One of your {s9}, perhaps.", "lord_tell_mission_incriminate_commander_8",
	[]],

	[anyone|plyr, "lord_tell_mission_incriminate_commander_8",
	[],
	"What? I can't send one of my trusted {s9} to his death!", "lord_tell_mission_incriminate_commander_9",
	[]],

	[anyone|plyr, "lord_tell_mission_incriminate_commander_8",
	[],
	"Then a {s8} it will be.", "lord_tell_mission_incriminate_commander_fin",
	[]],

	[anyone, "lord_tell_mission_incriminate_commander_9",
	[],
	"Come now, {playername}. There is a place for sentimentality, but this is not it. Believe me, you shall be generously compensated, and what is the purpose of soldiers if not to die at our say-so?", "lord_tell_mission_incriminate_commander_10",
	[]],

	[anyone|plyr, "lord_tell_mission_incriminate_commander_10",
	[],
	"A {s8} it is.", "lord_tell_mission_incriminate_commander_fin",
	[]],

	[anyone|plyr, "lord_tell_mission_incriminate_commander_10",
	[],
	"No, I'll not sacrifice one of my chosen men.", "lord_tell_mission_incriminate_commander_rejected",
	[]],

	[anyone, "lord_tell_mission_incriminate_commander_fin",
	[],
	"I can't tell you how pleased I am to hear that, {playername}. You are removing one of the greatest obstacles in my path. Here is the letter, as well as 300 coins for your expenses. Remember, there'll be more once you succeed. Much, much more...", "lord_pretalk",
	[
		(quest_get_slot, ":incriminate_loyal_commander_target_troop", "qst_incriminate_loyal_commander", slot_quest_target_troop),
		(quest_get_slot, ":incriminate_loyal_commander_object_troop", "qst_incriminate_loyal_commander", slot_quest_object_troop),
		(quest_get_slot, ":incriminate_loyal_commander_target_center", "qst_incriminate_loyal_commander", slot_quest_target_center),
		(call_script, "script_troop_add_gold", "trp_player", 300),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 2),
		(str_store_troop_name_link, 11, "$g_talk_troop"),
		(str_store_troop_name_link, 13, ":incriminate_loyal_commander_target_troop"),
		(str_store_party_name_link, 14, ":incriminate_loyal_commander_target_center"),
		(str_store_troop_name_plural, 15, "$incriminate_quest_sacrificed_troop"),
		(str_store_troop_name_link, 16, ":incriminate_loyal_commander_object_troop"),
		(setup_quest_text, "$random_quest_no"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":incriminate_loyal_commander_target_troop", 3),
		(str_store_string, 2, "@{s11} gave you a fake letter to fool {s13} into banishing his vassal {s16}. You are to go near {s14}, give the letter to one of your {s15} and send him into the town as a messenger, believing his orders to be genuine."),
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop")
	]],

	[anyone, "lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_capture_prisoners")
	],
	"A group of my soldiers were captured in a recent skirmish with the enemy. Thankfully we have a mutual agreement of prisoner exchange, and they will release my men, but they want us to give them prisoners of equal rank and number. Prisoners I don't currently have. So, I need a good {man/warrior} to find me {reg1} {s3} as prisoners, that I may exchange them.", "lord_mission_told",
	[
		(quest_get_slot, ":capture_prisoners_target_troop", "qst_capture_prisoners", slot_quest_target_troop),
		(quest_get_slot, ":capture_prisoners_target_amount", "qst_capture_prisoners", slot_quest_target_amount),
		(assign, reg1, ":capture_prisoners_target_amount"),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_troop_name_by_count, 3, ":capture_prisoners_target_troop", ":capture_prisoners_target_amount"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s9} has requested you to bring him {reg1} {s3} as prisoners.")
	]],

	[anyone, "lord_tell_mission",
	[],
	"No {playername}. I do not need your help at this time.", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_mission_told",
	[],
	"You can count on me, {s65}.", "lord_mission_accepted",
	[]],

	[anyone|plyr, "lord_mission_told",
	[],
	"I fear I cannot accept such a mission at the moment.", "lord_mission_rejected",
	[]],

	[anyone, "lord_mission_accepted",
	[],
	"Excellent, {playername}, excellent. I have every confidence in you.", "close_window",
	[
		(assign, "$g_leave_encounter", 1),
		(try_begin),
			(eq, "$random_quest_no", "qst_escort_lady"),
			(quest_get_slot, ":random_quest_no_object_troop", "$random_quest_no", slot_quest_object_troop),
			(troop_set_slot, ":random_quest_no_object_troop", slot_troop_cur_center, 0),
			(troop_join, ":random_quest_no_object_troop"),
		(else_try),
			(eq, "$random_quest_no", "qst_deliver_message_to_enemy_lord"),
			(call_script, "script_troop_add_gold", "trp_player", 10),
		(else_try),
			(eq, "$random_quest_no", "qst_bring_back_runaway_serfs"),
			(quest_get_slot, ":random_quest_no_giver_center", "$random_quest_no", slot_quest_giver_center),
			(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
			(quest_get_slot, ":random_quest_no_target_party_template", "$random_quest_no", slot_quest_target_party_template),
			(set_spawn_radius, 3),
			(spawn_around_party, ":random_quest_no_giver_center", ":random_quest_no_target_party_template"),
			(assign, "$qst_bring_back_runaway_serfs_party_1", reg0),
			(party_set_ai_behavior, "$qst_bring_back_runaway_serfs_party_1", 1),
			(party_set_ai_object, "$qst_bring_back_runaway_serfs_party_1", ":random_quest_no_target_center"),
			(party_set_flags, "$qst_bring_back_runaway_serfs_party_1", 65536, 0),
			(spawn_around_party, ":random_quest_no_giver_center", ":random_quest_no_target_party_template"),
			(assign, "$qst_bring_back_runaway_serfs_party_2", reg0),
			(party_set_ai_behavior, "$qst_bring_back_runaway_serfs_party_2", 1),
			(party_set_ai_object, "$qst_bring_back_runaway_serfs_party_2", ":random_quest_no_target_center"),
			(party_set_flags, "$qst_bring_back_runaway_serfs_party_2", 65536, 0),
			(spawn_around_party, ":random_quest_no_giver_center", ":random_quest_no_target_party_template"),
			(assign, "$qst_bring_back_runaway_serfs_party_3", reg0),
			(party_set_ai_behavior, "$qst_bring_back_runaway_serfs_party_3", 1),
			(party_set_ai_object, "$qst_bring_back_runaway_serfs_party_3", ":random_quest_no_target_center"),
			(party_set_flags, "$qst_bring_back_runaway_serfs_party_3", 65536, 0),
		(try_end),
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(try_begin),
			(eq, "$random_quest_no", "qst_lend_surgeon"),
			(assign, "$g_leave_town_outside", 1),
			(assign, "$auto_enter_town", "$g_encountered_party"),
			(rest_for_hours, 4),
			(assign, "$lord_requested_to_talk_to", "$g_talk_troop"),
		(try_end)
	]],

	[anyone, "lord_mission_rejected",
	[],
	"Is that so? Well, I suppose you're just not up to the task. I shall have to look for somebody with more mettle.", "close_window",
	[
		(assign, "$g_leave_encounter", 1),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -1),
		(try_begin),
			(quest_slot_eq, "$random_quest_no", slot_quest_dont_give_again_remaining_days, 0),
			(quest_set_slot, "$random_quest_no", slot_quest_dont_give_again_remaining_days, 1),
		(try_end),
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$freelancer_state", 0),
		(ge, "$g_talk_troop_faction_relation", 0),
		(neq, "$players_kingdom", "$g_talk_troop_faction"),
		(eq, "$players_kingdom", 0),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"I would like to join your retinue.", "lord_request_enlistment",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$g_talk_troop", "$enlisted_lord"),
		(eq, "$freelancer_state", 1),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"My liege, I would like to be reassigned to another division.", "lord_request_reassignment",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$g_talk_troop", "$enlisted_lord"),
		(neq, "$freelancer_state", 0),
		(ge, "$g_talk_troop_faction_relation", 0),
		(neq, "$players_kingdom", "$g_talk_troop_faction"),
		(eq, "$players_kingdom", 0),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"My liege, I would like to retire from your service.", "lord_request_retire",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$g_talk_troop", "$enlisted_lord"),
		(eq, "$freelancer_state", 1),
		(ge, "$g_talk_troop_faction_relation", 0),
		(neq, "$players_kingdom", "$g_talk_troop_faction"),
		(eq, "$players_kingdom", 0),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"My liege, I would like to request some personal leave.", "lord_request_vacation",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(eq, "$g_talk_troop", "$enlisted_lord"),
		(eq, "$freelancer_state", 2),
		(ge, "$g_talk_troop_faction_relation", 0),
		(neq, "$players_kingdom", "$g_talk_troop_faction"),
		(eq, "$players_kingdom", 0),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"My liege, I am ready to return to your retinue.", "ask_return_from_leave",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"I must leave now.", "lord_leave_prison",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(lt, "$g_talk_troop_faction_relation", 0),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"This audience is over. I leave now.", "lord_leave",
	[]],

	[anyone|plyr, "lord_talk",
	[
		(ge, "$g_talk_troop_faction_relation", 0),
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0)
	],
	"I must beg my leave.", "lord_leave",
	[]],

	[anyone, "lord_leave",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(lt, "$g_talk_troop_faction_relation", 0),
		(store_partner_quest, ":partner_quest"),
		(lt, ":partner_quest", 0),
		(troop_slot_eq, "$g_talk_troop", slot_troop_does_not_give_quest, 0),
		(call_script, "script_get_quest", "$g_talk_troop"),
		(assign, "$random_quest_no", reg0),
		(ge, "$random_quest_no", 0),
		(this_or_next|eq, "$random_quest_no", "qst_lend_surgeon"),
		(eq, 2, 1)
	],
	"Before you go, {playername}, I have something to ask of you... We may be enemies in this war, but I pray that you believe, as I do, that we can still be civil towards each other. Thus I hoped that you would be kind enough to assist me in something important to me.", "lord_leave_give_quest",
	[]],

	[anyone|plyr, "lord_leave_give_quest",
	[],
	"I am listening.", "enemy_lord_tell_mission",
	[]],

	[anyone, "enemy_lord_tell_mission",
	[
		(eq, "$random_quest_no", "qst_lend_surgeon")
	],
	"I have a friend here, an old warrior, who is very sick. Pestilence has infected an old battle wound, and unless he is seen to by a surgeon soon,  he will surely die. This man is dear to me, {playername}, but he's also stubborn as a hog and refuses to have anyone look at his injury because he doesn't trust the physicians here. I have heard that you've a capable surgeon with you. If you would let your surgeon come here and have a look, {reg3?she:he} may be able to convince him to give his consent to an operation. Please, I will be deeply indebted to you if you grant me this request.", "lord_mission_told",
	[
		(quest_get_slot, ":random_quest_no_object_troop", "$random_quest_no", slot_quest_object_troop),
		(str_store_troop_name_link, 1, "$g_talk_troop"),
		(str_store_troop_name, 3, ":random_quest_no_object_troop"),
		(assign, reg3, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":random_quest_no_object_troop"),
			(assign, reg3, 1),
		(try_end),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@Lend your experienced surgeon {s3} to {s1}.")
	]],

	[anyone, "enemy_lord_tell_mission",
	[
		(str_store_quest_name, 7, "$random_quest_no")
	],
	"{!}ERROR: MATCHED WITH QUEST: {s7}.", "close_window",
	[]],

	[anyone, "lord_leave_prison",
	[],
	"We'll meet again.", "close_window",
	[]],

	[anyone|auto_proceed, "lord_leave",
	[
		(eq, 1, "$character_gender"),
		(call_script, "script_troop_get_romantic_chemistry_with_troop", "trp_player", "$g_talk_troop"),
		(gt, reg0, 7),
		(ge, "$g_talk_troop_relation", 0),
		(neg|troop_slot_ge, "$g_talk_troop", 34, "trp_npc1"),
		(neg|troop_slot_ge, "$g_talk_troop", 30, "trp_npc1"),
		(neg|troop_slot_ge, "trp_player", 34, "trp_npc1"),
		(neg|troop_slot_ge, "trp_player", 30, "trp_npc1"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop")
	],
	"Farewell, my lady. I shall remain your most ardent admirer.", "close_window",
	[
		(eq, "$talk_context", 2),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|auto_proceed, "lord_leave",
	[
		(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop")
	],
	"Of course, {playername}. Farewell.", "close_window",
	[
		(eq, "$talk_context", 2),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|auto_proceed, "lord_leave",
	[
		(ge, "$g_talk_troop_relation", 10)
	],
	"Good journeys to you, {playername}.", "close_window",
	[
		(eq, "$talk_context", 2),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|auto_proceed, "lord_leave",
	[
		(ge, "$g_talk_troop_faction_relation", 0)
	],
	"Yes, yes. Farewell.", "close_window",
	[
		(eq, "$talk_context", 2),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|auto_proceed, "lord_leave",
	[],
	"We will meet again.", "close_window",
	[
		(eq, "$talk_context", 2),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "member_chat",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6)
	],
	"Are you enjoying the journey, {s65}?", "lady_journey_1",
	[]],

	[anyone, "lady_journey_1",
	[],
	"I am doing quite fine, {playername}. Thank you for your concern.", "close_window",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(this_or_next|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(this_or_next|is_between, "$g_talk_troop", "trp_npc1", "trp_heroes_end"),
		(troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"Yes?", "spouse_talk",
	[]],

	[anyone|plyr, "spouse_talk",
	[
		(eq, "$g_player_minister", "$g_talk_troop")
	],
	"As you are my chief minister, I wish to speak to about affairs of state", "minister_issues",
	[]],

	[anyone|plyr, "spouse_talk",
	[
		(assign, "$political_quest_to_cancel", -1),
		(try_begin),
			(check_quest_active, "qst_offer_gift"),
			(quest_slot_eq, "qst_offer_gift", slot_quest_giver_troop, "$g_talk_troop"),
			(assign, "$political_quest_to_cancel", "qst_offer_gift"),
			(str_store_string, 10, "str_offer_gift_description"),
		(else_try),
			(check_quest_active, "qst_resolve_dispute"),
			(quest_slot_eq, "qst_resolve_dispute", slot_quest_giver_troop, "$g_talk_troop"),
			(assign, "$political_quest_to_cancel", "qst_resolve_dispute"),
			(str_store_string, 10, "str_resolve_dispute_description"),
		(try_end),
		(gt, "$political_quest_to_cancel", 0)
	],
	"Let's abandon our plan to {s10}.", "spouse_cancel_political_quest",
	[]],

	[anyone, "spouse_cancel_political_quest",
	[],
	"Are you sure you want to drop that idea?", "spouse_cancel_political_quest_confirm",
	[]],

	[anyone|plyr, "spouse_cancel_political_quest_confirm",
	[],
	"Yes, I am sure. Let's abandon that idea.", "spouse_pretalk",
	[
		(call_script, "script_abort_quest", "$political_quest_to_cancel", 1)
	]],

	[anyone|plyr, "spouse_cancel_political_quest_confirm",
	[],
	"Actually, never mind.", "spouse_pretalk",
	[]],

	[anyone|plyr, "spouse_talk",
	[],
	"Let us think of a way to improve our standing in this realm", "combined_political_quests",
	[
		(call_script, "script_get_political_quest", "$g_talk_troop"),
		(assign, "$political_quest_found", reg0),
		(assign, "$political_quest_target_troop", reg1),
		(assign, "$political_quest_object_troop", reg2)
	]],

	[anyone|plyr, "spouse_talk",
	[
		(gt, "$g_player_tournament_placement", 3),
		(this_or_next|troop_slot_ge, "$g_talk_troop", 52, 21),
		(this_or_next|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(is_between, "$g_talk_troop", "trp_knight_1_1_wife", "trp_heroes_end")
	],
	"My {reg65?wife:husband}, I would like to dedicate my successes in this recent tourney to you", "dplmc_spouse_tournament_dedication_reaction",
	[
		(try_begin),
			(gt, "$g_player_tournament_placement", 3),
			(val_sub, "$g_player_tournament_placement", 3),
			(val_mul, "$g_player_tournament_placement", 2),
		(else_try),
			(assign, "$g_player_tournament_placement", 0),
		(try_end),
		(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
			(neg|troop_slot_eq, ":troop", slot_troop_occupation, 15),
			(neq, ":troop", "$g_talk_troop"),
			(this_or_next|troop_slot_eq, "trp_player", slot_troop_spouse, ":troop"),
			(this_or_next|troop_slot_eq, ":troop", slot_troop_spouse, "trp_player"),
			(troop_slot_eq, "trp_player", slot_troop_betrothed, ":troop"),
			(call_script, "script_troop_change_relation_with_troop", ":troop", "trp_player", -1),
		(try_end),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lady_used_tournament, 1),
			(val_div, "$g_player_tournament_placement", 3),
			(str_store_string, 9, "str_another_tournament_dedication_oh_i_suppose_it_is_always_flattering"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 21),
			(val_mul, "$g_player_tournament_placement", 2),
			(str_store_string, 9, "str_do_you_why_what_a_most_gallant_thing_to_say"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 25),
			(val_div, "$g_player_tournament_placement", 2),
			(str_store_string, 9, "str_hmm_i_cannot_say_that_i_altogether_approve_of_such_frivolity_but_i_must_confess_myself_a_bit_flattered"),
		(else_try),
			(str_store_string, 9, "str_why_thank_you_you_are_most_kind_to_do_so"),
		(try_end),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", "$g_player_tournament_placement"),
		(assign, "$g_player_tournament_placement", 0),
		(troop_set_slot, "$g_talk_troop", slot_lady_used_tournament, 1)
	]],

	[anyone, "dplmc_spouse_tournament_dedication_reaction",
	[],
	"{s9}", "spouse_pretalk",
	[]],

	[anyone|plyr, "spouse_talk",
	[
		(neg|check_quest_active, "qst_organize_feast")
	],
	"I was thinking that perhaps we could host a feast", "spouse_organize_feast",
	[]],

	[anyone|plyr, "spouse_talk",
	[],
	"Let us take inventory of our household possessions", "spouse_household_possessions",
	[
		(change_screen_loot, "trp_household_possessions")
	]],

	[anyone, "spouse_household_possessions",
	[],
	"Anyway, that is the content of our larder.", "spouse_pretalk",
	[]],

	[anyone|plyr, "spouse_talk",
	[],
	"We shall speak later, my {wife/husband}", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "wedding_ceremony_bride_vow",
	[],
	"My husband, I hearby pledge to be your wife, to stand with you in good times and bad. May the heavens smile upon us and bless us with children, livestock, and land.", "wedding_ceremony_player_vow",
	[
		(quest_get_slot, ":wed_betrothed_target_troop", "qst_wed_betrothed", slot_quest_target_troop),
		(set_conversation_speaker_troop, ":wed_betrothed_target_troop")
	]],

	[anyone|plyr, "wedding_ceremony_player_vow",
	[],
	"I pledge the same. Let us be husband and wife.", "wedding_ceremony_vows_complete",
	[]],

	[anyone|plyr, "wedding_ceremony_player_vow",
	[],
	"Wait -- hold on... I'm not quite ready for this.", "close_window",
	[]],

	[anyone, "wedding_ceremony_vows_complete",
	[],
	"I now declare you and {s3} to be husband and wife. Go now to the chamber prepared for you, and we shall make arrangements for your bride to join {reg10?you in your hall in:your liege's court at} {s11}.", "close_window",
	[
		(call_script, "script_courtship_event_bride_marry_groom", "$g_player_bride", "trp_player", 0),
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_player_bride"),
		(str_store_troop_name, 3, "$g_player_bride"),
		(try_begin),
			(neq, reg0, "trp_player"),
			(str_store_string, 11, "str_error__player_not_logged_as_groom"),
		(else_try),
			(str_store_party_name, 11, reg1),
			(troop_set_slot, "$g_player_bride", slot_troop_cur_center, reg1),
			(assign, reg10, 1),
			(party_slot_eq, reg1, slot_town_lord, "trp_player"),
			(assign, reg10, 0),
		(try_end)
	]],

	[anyone, "spouse_pretalk",
	[
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"Is there anything else, {s0}?", "spouse_talk",
	[]],

	[anyone, "spouse_organize_feast",
	[
		(faction_slot_eq, "$players_kingdom", slot_faction_ai_state, 6),
		(faction_slot_eq, "$players_kingdom", slot_faction_ai_object, "$g_encountered_party"),
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"A splendid idea, {s0}. However, let us wait for the current feast here to conclude, before organizing another.", "spouse_pretalk",
	[]],

	[anyone, "spouse_organize_feast",
	[
		(assign, ":value", 0),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|eq, ":value", 1),
		(eq, "$players_kingdom", "fac_player_supporters_faction"),
		(neg|is_between, "$g_player_court", "p_town_1", "p_salt_mine"),
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"A splendid idea, {s0}. However, we must establish a court before hosting a feast.", "spouse_pretalk",
	[]],

	[anyone, "spouse_organize_feast",
	[
		(assign, ":value", 0),
		(try_begin),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|eq, ":value", 1),
		(eq, "$players_kingdom", "fac_player_supporters_faction"),
		(store_current_hours, ":current_hours"),
		(faction_get_slot, ":players_kingdom_last_feast_concluded", "$players_kingdom", slot_faction_last_feast_concluded),
		(val_sub, ":current_hours", ":players_kingdom_last_feast_concluded"),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(assign, reg4, ":current_hours"),
			(str_store_faction_name, 4, "$players_kingdom"),
			(display_message, "@{!}DEBUG -- {reg4} hours since last feast for {s4}"),
		(try_end),
		(lt, ":current_hours", 120),
		(store_sub, ":value_2", 168, ":current_hours"),
		(val_div, ":value_2", 24),
		(assign, reg3, ":value_2"),
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"A splendid idea, {s0}. However, our realm has recently had a feast. Perhaps we should wait another {reg3} days before we organize another one.", "spouse_pretalk",
	[]],

	[anyone, "spouse_organize_feast",
	[
		(call_script, "script_dplmc_print_player_spouse_says_my_husband_wife_to_s0", "$g_talk_troop", 0)
	],
	"A splendid idea, {s0}. However, to not insult our guests, we must make sure that we can provide a large and varied repast, for the lords, their families, and their retinues. All told, we should count on a couple of hundred mouths to feed, over several days. Let us take an inventory of our household possessions...", "spouse_evaluate_larder_for_feast",
	[]],

	[anyone, "spouse_evaluate_larder_for_feast",
	[
		(call_script, "script_internal_politics_rate_feast_to_s9", "trp_household_possessions", 600, "$players_kingdom", 0),
		(assign, "$feast_quality", reg0)
	],
	"{s9}", "spouse_feast_confirm",
	[]],

	[anyone|plyr, "spouse_feast_confirm",
	[],
	"Let me add more items to our storehouses", "spouse_feast_added_items",
	[
		(change_screen_loot, "trp_household_possessions")
	]],

	[anyone, "spouse_feast_added_items",
	[],
	"All right -- let me reevalute what is there...", "spouse_evaluate_larder_for_feast",
	[]],

	[anyone|plyr, "spouse_feast_confirm",
	[
		(gt, "$feast_quality", 1)
	],
	"Let us dispatch the invitations", "spouse_feast_confirm_yes",
	[]],

	[anyone|plyr, "spouse_feast_confirm",
	[],
	"Let us wait, then", "spouse_pretalk",
	[]],

	[anyone, "spouse_feast_confirm_yes",
	[
		(neq, "$players_kingdom", "fac_player_supporters_faction")
	],
	"I shall send word, then, that we will host a feast as soon as conditions in the realm permit. You perhaps should continue to stock our larder, so that we may do justice to our reputation for hospitality.", "spouse_pretalk",
	[
		(assign, ":value", -1),
		(try_begin),
			(is_between, "$g_encountered_party", "p_town_1", "p_village_1"),
			(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_lord, "trp_player"),
			(party_slot_eq, "$g_encountered_party", slot_town_lord, "$g_talk_troop"),
			(assign, ":value", "$g_encountered_party"),
		(else_try),
			(try_for_range, ":party", "p_town_1", "p_village_1"),
				(eq, ":value", -1),
				(this_or_next|party_slot_eq, ":party", slot_town_lord, "trp_player"),
				(party_slot_eq, ":party", slot_town_lord, "$g_talk_troop"),
				(assign, ":value", ":party"),
			(try_end),
		(else_try),
			(is_between, "$g_encountered_party", "p_town_1", "p_village_1"),
			(assign, ":value", "$g_encountered_party"),
		(try_end),
		(str_store_party_name, 9, ":value"),
		(setup_quest_text, "qst_organize_feast"),
		(str_store_string, 2, "str_you_intend_to_bring_goods_to_s9_in_preparation_for_the_feast_which_will_be_held_as_soon_as_conditions_permit"),
		(quest_set_slot, "qst_organize_feast", slot_quest_target_center, ":value"),
		(quest_set_slot, "qst_organize_feast", slot_quest_expiration_days, 30),
		(call_script, "script_start_quest", "qst_organize_feast", "$g_talk_troop")
	]],

	[anyone, "spouse_feast_confirm_yes",
	[],
	"Very well, then. Let the feast begin immediately at our court {reg4?here:} in {s9}. You perhaps should continue to stock our larder, so that we may do justice to our reputation for hospitality. You may declare the feast to be concluded at any time, either by beginning a campaign or by letting it be known that the vassals can return to their homes.", "spouse_pretalk",
	[
		(str_store_party_name, 9, "$g_player_court"),
		(setup_quest_text, "qst_organize_feast"),
		(str_store_string, 2, "str_you_intend_to_bring_goods_to_s9_in_preparation_for_the_feast_which_will_be_held_as_soon_as_conditions_permit"),
		(quest_set_slot, "qst_organize_feast", slot_quest_target_center, "$g_player_court"),
		(quest_set_slot, "qst_organize_feast", slot_quest_expiration_days, 30),
		(call_script, "script_start_quest", "qst_organize_feast", "$g_talk_troop"),
		(faction_set_slot, "$players_kingdom", slot_faction_ai_state, 6),
		(faction_set_slot, "$players_kingdom", slot_faction_ai_object, "$g_player_court"),
		(assign, "$player_marshal_ai_state", 6),
		(assign, "$player_marshal_ai_object", "$g_player_court"),
		(assign, "$g_recalculate_ais", 1),
		(assign, reg4, 1),
		(try_begin),
			(neq, "$g_encountered_party", "$g_player_court"),
			(assign, reg4, 0),
		(try_end)
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_wed_betrothed"),
		(quest_slot_eq, "qst_wed_betrothed", slot_quest_target_troop, "$g_talk_troop"),
		(quest_slot_ge, "qst_wed_betrothed", 23, 2)
	],
	"How wonderful it is... In a short while we shall be married! However, I should point out that, in the remaining few days, it is not customary for us to speak too much together.", "close_window",
	[
		(try_begin),
			(check_quest_active, "qst_visit_lady"),
			(quest_slot_eq, "qst_visit_lady", slot_quest_giver_troop, "$g_talk_troop"),
			(call_script, "script_end_quest", "qst_visit_lady"),
		(try_end)
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_wed_betrothed"),
		(quest_slot_eq, "qst_wed_betrothed", slot_quest_target_troop, "$g_talk_troop"),
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(troop_get_slot, ":var_1_leaded_party", ":var_1", slot_troop_leaded_party),
		(party_is_active, ":var_1_leaded_party"),
		(party_get_attached_to, ":attached_to_var_1_leaded_party", ":var_1_leaded_party"),
		(eq, ":attached_to_var_1_leaded_party", "$g_encountered_party"),
		(call_script, "script_troop_get_family_relation_to_troop", ":var_1", "$g_talk_troop"),
		(str_store_troop_name, 4, ":var_1")
	],
	"Em, {playername}, you might not be used to our wedding customs, but I had hoped that someone would tell you... Speak first to my {s11}, {s4}.", "close_window",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_wed_betrothed"),
		(quest_slot_eq, "qst_wed_betrothed", slot_quest_target_troop, "$g_talk_troop"),
		(quest_get_slot, ":wed_betrothed_giver_troop", "qst_wed_betrothed", slot_quest_giver_troop),
		(call_script, "script_troop_get_family_relation_to_troop", ":wed_betrothed_giver_troop", "$g_talk_troop"),
		(str_store_troop_name, 10, ":wed_betrothed_giver_troop")
	],
	"I do not know where to find my {s11} {s10}, who by tradition should preside over our wedding. Perhaps we should wait until {reg4?she:he} can be found...", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(neq, "$g_talk_troop_faction", "$g_encountered_party_faction"),
		(party_get_slot, ":g_encountered_party_town_lord", "$g_encountered_party", slot_town_lord),
		(ge, ":g_encountered_party_town_lord", "trp_npc1"),
		(str_store_troop_name, 12, ":g_encountered_party_town_lord")
	],
	"The honorable {s12} has agreed to allow us to return home to our families. We shall be departing shortly.", "close_window",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(neq, "$g_talk_troop_faction", "$g_encountered_party_faction"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_prisoner_of_party, "$g_encountered_party"),
		(gt, "$g_time_since_last_talk", 24)
	],
	"So great is my loneliness! How I miss my family!", "kingdom_lady_captive",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(neq, "$g_talk_troop_faction", "$g_encountered_party_faction"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_prisoner_of_party, "$g_encountered_party"),
		(lt, "$g_talk_troop_relation", 1)
	],
	"You are a cad, to hold a {reg65?lady:free-spirited lad} like this...", "kingdom_lady_captive",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(neq, "$g_talk_troop_faction", "$g_encountered_party_faction"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_prisoner_of_party, "$g_encountered_party"),
		(lt, "$g_talk_troop_relation", 11)
	],
	"It is strange. On occasion you have shown me such kindness, and yet you continue to hold me here against my will.", "kingdom_lady_captive",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(neq, "$g_talk_troop_faction", "$g_encountered_party_faction"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_prisoner_of_party, "$g_encountered_party")
	],
	"Why haven't my family paid my ransom? You may hold me as prisoner, but it seems that you care for me more than they do!", "kingdom_lady_captive",
	[]],

	[anyone|auto_proceed, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(neq, "$g_talk_troop_faction", "$g_encountered_party_faction"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_cur_center, "$g_encountered_party"),
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(neq, "$g_encountered_party_faction", "fac_player_supporters_faction"),
		(store_faction_of_troop, ":faction_of_troop_var_1", ":var_1"),
		(neq, ":faction_of_troop_var_1", "$g_encountered_party_faction")
	],
	"{!}.", "lady_stranded_next",
	[]],

	[anyone, "lady_stranded_next",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Greetings, {s0}. The tides of war have left me stranded here in this fortress, but I will shortly be departing. ", "close_window",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(neq, "$g_talk_troop_faction", "$g_encountered_party_faction"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_cur_center, "$g_encountered_party"),
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(store_faction_of_troop, ":faction_of_troop_var_1", ":var_1"),
		(neq, ":faction_of_troop_var_1", "$g_encountered_party_faction")
	],
	"{playername} -- I assume that you, as a {man/lady} of honor, will accord gentle-born {reg65?ladies:lads} such as ourselves the right to return to our families, and not demand a ransom.", "lady_talk_refugee",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(neq, "$g_talk_troop_faction", "$g_encountered_party_faction"),
		(troop_get_slot, ":g_talk_troop_cur_center", "$g_talk_troop", slot_troop_cur_center),
		(str_clear, 5),
		(try_begin),
			(is_between, ":g_talk_troop_cur_center", "p_town_1", "p_salt_mine"),
			(str_store_party_name, 4, ":g_talk_troop_cur_center"),
			(str_store_string, 5, "str_for_s4"),
		(try_end)
	],
	"We will shortly depart{s5}. It is good to know that some people in this world retain a sense of honor.", "close_window",
	[]],

	[anyone|plyr, "lady_talk_refugee",
	[],
	"Of course, my lady", "close_window",
	[
		(troop_get_slot, ":g_talk_troop_cur_center", "$g_talk_troop", slot_troop_cur_center),
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(assign, ":var_2", reg1),
		(troop_set_slot, "$g_talk_troop", slot_troop_cur_center, ":var_2"),
		(try_begin),
			(neq, ":g_talk_troop_cur_center", ":var_2"),
			(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", 1),
		(try_end)
	]],

	[anyone|plyr, "lady_talk_refugee",
	[],
	"You assume wrong, {reg65?my lady:sirrah}!", "lady_captive_talk",
	[]],

	[anyone, "lady_captive_talk",
	[],
	"What?! What infamy is this?", "lady_captive_confirm",
	[]],

	[anyone|plyr, "lady_captive_confirm",
	[],
	"My apologies - you must have misunderstood me. Of course you may leave.", "close_window",
	[]],

	[anyone|plyr, "lady_captive_confirm",
	[],
	"Contact your family to arrange for a ransom, my lady.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_prisoner_of_party, "$g_encountered_party"),
		(call_script, "script_change_player_honor", -2),
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", -10),
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(store_faction_of_troop, ":faction_of_troop_var_1", ":var_1"),
		(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
			(this_or_next|troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(troop_slot_eq, ":troop", slot_troop_occupation, 6),
			(neq, "$g_talk_troop", ":troop"),
			(neq, ":troop", "trp_kingdom_heroes_including_player_begin"),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(this_or_next|is_between, ":troop", "trp_knight_1_1_wife", "trp_heroes_end"),
			(eq, ":faction_of_troop_troop", ":faction_of_troop_var_1"),
			(assign, ":value", 0),
			(try_begin),
				(eq, ":troop", ":var_1"),
				(val_min, ":value", -10),
			(try_end),
			(call_script, "script_troop_get_family_relation_to_troop", "$g_talk_troop", ":troop"),
			(val_min, reg0, 10),
			(store_mul, ":value", reg0, -1),
			(try_begin),
				(ge, reg0, 2),
				(troop_slot_eq, ":troop", slot_lord_reputation_type, 21),
				(val_sub, ":value", 1),
			(try_end),
			(try_begin),
				(troop_slot_eq, ":troop", slot_troop_betrothed, "$g_talk_troop"),
				(val_min, ":value", -10),
			(else_try),
				(lt, reg0, 2),
				(is_between, ":troop", "trp_knight_1_1", "trp_kingdom_1_pretender"),
				(this_or_next|troop_slot_eq, ":troop", slot_troop_love_interest_1, "$g_talk_troop"),
				(this_or_next|troop_slot_eq, ":troop", slot_troop_love_interest_2, "$g_talk_troop"),
				(troop_slot_eq, ":troop", slot_troop_love_interest_3, "$g_talk_troop"),
				(call_script, "script_troop_get_relation_with_troop", ":troop", "$g_talk_troop"),
				(assign, ":var_6", reg0),
				(ge, ":var_6", 5),
				(val_min, ":value", -1),
				(ge, ":var_6", 10),
				(val_min, ":value", -2),
				(ge, ":var_6", 15),
				(val_min, ":value", -3),
				(ge, ":var_6", 20),
				(val_min, ":value", -4),
			(try_end),
			(try_begin),
				(troop_slot_eq, ":troop", slot_lord_reputation_type, 2),
				(lt, ":value", 0),
				(val_sub, ":value", 2),
			(try_end),
			(lt, ":value", 0),
			(call_script, "script_troop_change_relation_with_troop", "trp_player", ":troop", ":value"),
		(try_end)
	]],

	[anyone|plyr, "kingdom_lady_captive",
	[],
	"Then write to your family, and ask them to hurry up with the ransom!", "close_window",
	[]],

	[anyone|plyr, "kingdom_lady_captive",
	[],
	"I have changed my mind -- you are free to go", "close_window",
	[
		(try_begin),
			(party_count_prisoners_of_type, ":value", "p_main_party", "$g_talk_troop"),
			(gt, ":value", 0),
			(party_remove_prisoners, "p_main_party", "$g_talk_troop", 1),
		(else_try),
			(party_count_prisoners_of_type, ":value", "$g_encountered_party", "$g_talk_troop"),
			(gt, ":value", 0),
			(party_remove_prisoners, "$g_encountered_party", "$g_talk_troop", 1),
		(else_try),
			(troop_get_slot, ":g_talk_troop_prisoner_of_party", "$g_talk_troop", slot_troop_prisoner_of_party),
			(ge, ":g_talk_troop_prisoner_of_party", 0),
			(party_count_prisoners_of_type, ":value", ":g_talk_troop_prisoner_of_party", "$g_talk_troop"),
			(gt, ":value", 0),
			(party_remove_prisoners, ":g_talk_troop_prisoner_of_party", "$g_talk_troop", 1),
		(try_end),
		(troop_set_slot, "$g_talk_troop", slot_troop_prisoner_of_party, -1),
		(call_script, "script_remove_troop_from_prison", "$g_talk_troop"),
		(str_store_troop_name, 7, "$g_talk_troop"),
		(display_message, "str_dplmc_has_been_set_free")
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_duel_courtship_rival"),
		(check_quest_failed, "qst_duel_courtship_rival"),
		(quest_slot_eq, "qst_duel_courtship_rival", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_get_slot, ":duel_courtship_rival_target_troop", "qst_duel_courtship_rival", slot_quest_target_troop),
		(str_store_troop_name, 10, ":duel_courtship_rival_target_troop"),
		(lt, "$g_talk_troop_relation", 0)
	],
	"Well, {playername} -- you fought a duel with {s10}, and lost. According to our custom and tradition, I should no longer receive you. Farewell, {playername}.", "close_window",
	[
		(call_script, "script_end_quest", "qst_duel_courtship_rival"),
		(troop_set_slot, "$g_talk_troop", slot_troop_met, 4)
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_duel_courtship_rival"),
		(check_quest_failed, "qst_duel_courtship_rival"),
		(quest_slot_eq, "qst_duel_courtship_rival", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_get_slot, ":duel_courtship_rival_target_troop", "qst_duel_courtship_rival", slot_quest_target_troop),
		(str_store_troop_name, 10, ":duel_courtship_rival_target_troop"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":duel_courtship_rival_target_troop", 3)
	],
	"Oh {playername} -- I heard of your duel with {s10}. I wish now that you had never fought {reg3?her:him}, for our honor and tradition demand that, having lost to {reg3?her:him}, you now break off your suit with me. Farewell, {playername}.", "lady_duel_lost",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_met, 4),
		(call_script, "script_end_quest", "qst_duel_courtship_rival")
	]],

	[anyone|plyr, "lady_duel_lost",
	[],
	"Very well - we must do as tradition demands... Farewell, my lady", "close_window",
	[]],

	[anyone|plyr, "lady_duel_lost",
	[],
	"Let honor and tradition hang!", "lady_duel_lost_flaunt_conventions",
	[]],

	[anyone, "lady_duel_lost_flaunt_conventions",
	[],
	"Oh, {playername}! Although people will talk, it would so break my heart to no longer be able to see you. We shall ignore this silly, cruel tradition.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_met, 2),
		(call_script, "script_change_player_honor", -5)
	]],

	[anyone, "lady_duel_lost_flaunt_conventions",
	[],
	"No, {playername} -- I cannot afford to fritter away my good name, and neither can you.", "close_window",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_duel_courtship_rival"),
		(check_quest_succeeded, "qst_duel_courtship_rival"),
		(quest_slot_eq, "qst_duel_courtship_rival", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_get_slot, ":duel_courtship_rival_target_troop", "qst_duel_courtship_rival", slot_quest_target_troop),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":duel_courtship_rival_target_troop"),
		(lt, reg0, 0),
		(str_store_troop_name_link, 10, ":duel_courtship_rival_target_troop"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":duel_courtship_rival_target_troop", 3)
	],
	"Oh, {playername} -- I have heard that you won your duel with {s10}. I'm grateful that you have delivered me from that {reg3?woman:man}'s attentions!", "lady_start",
	[
		(call_script, "script_end_quest", "qst_duel_courtship_rival"),
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", 3),
		(add_xp_as_reward, 1000)
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_duel_courtship_rival"),
		(check_quest_succeeded, "qst_duel_courtship_rival"),
		(quest_slot_eq, "qst_duel_courtship_rival", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_get_slot, ":duel_courtship_rival_target_troop", "qst_duel_courtship_rival", slot_quest_target_troop),
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 24),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":duel_courtship_rival_target_troop"),
		(str_store_troop_name_link, 10, ":duel_courtship_rival_target_troop"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":duel_courtship_rival_target_troop", 3)
	],
	"Well, {playername} --  you won your duel with {s10}. Clearly, {reg3?she:he} was not worthy of my affections.", "lady_start",
	[
		(call_script, "script_end_quest", "qst_duel_courtship_rival"),
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", 2),
		(add_xp_as_reward, 1000)
	]],

	[anyone|auto_proceed, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_duel_courtship_rival"),
		(check_quest_succeeded, "qst_duel_courtship_rival"),
		(quest_slot_eq, "qst_duel_courtship_rival", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_get_slot, ":duel_courtship_rival_target_troop", "qst_duel_courtship_rival", slot_quest_target_troop),
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 21),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":duel_courtship_rival_target_troop"),
		(str_store_troop_name_link, 10, ":duel_courtship_rival_target_troop")
	],
	"{!}.", "lady_duel_rep_1",
	[]],

	[anyone, "lady_duel_rep_1",
	[],
	"Well, {playername} --  you won your duel with {s10}. Oh, such foolishness, that {men/people} should fight over me! Sigh... But it is a bit romantic, I suppose.", "lady_start",
	[
		(call_script, "script_end_quest", "qst_duel_courtship_rival"),
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", 1),
		(add_xp_as_reward, 1000)
	]],

	[anyone|auto_proceed, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_duel_courtship_rival"),
		(check_quest_succeeded, "qst_duel_courtship_rival"),
		(quest_slot_eq, "qst_duel_courtship_rival", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_get_slot, ":duel_courtship_rival_target_troop", "qst_duel_courtship_rival", slot_quest_target_troop),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":duel_courtship_rival_target_troop"),
		(str_store_troop_name_link, 10, ":duel_courtship_rival_target_troop")
	],
	"{!}.", "lady_duel_rep_2",
	[]],

	[anyone, "lady_duel_rep_2",
	[
		(quest_get_slot, ":duel_courtship_rival_target_troop", "qst_duel_courtship_rival", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":duel_courtship_rival_target_troop")
	],
	"Well, {playername} --  you won your duel with {s10}. Honor now demands that {reg0?she:he} and I no longer meet... I was fond of {reg0?her:him}, you know. You did me no service by fighting {reg0?her:him}.", "lady_start",
	[
		(call_script, "script_end_quest", "qst_duel_courtship_rival"),
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", -2),
		(add_xp_as_reward, 1000)
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_duel_for_lady"),
		(check_quest_succeeded, "qst_duel_for_lady"),
		(quest_slot_eq, "qst_duel_for_lady", slot_quest_giver_troop, "$g_talk_troop"),
		(le, "$talk_context", 4),
		(quest_get_slot, ":duel_for_lady_target_troop", "qst_duel_for_lady", slot_quest_target_troop),
		(str_store_troop_name_link, 13, ":duel_for_lady_target_troop"),
		(call_script, "script_dplmc_store_troop_is_female_reg", ":duel_for_lady_target_troop", 3)
	],
	"My dear {playername}, how joyous to see you again! I heard you gave that vile {s13} a well-deserved lesson. I hope {reg3?she:he} never forgets {reg3?her:his} humiliation. I've a reward for you, but I fear it's little compared to what you've done for me.", "lady_qst_duel_for_lady_succeeded_1",
	[]],

	[anyone|plyr, "lady_qst_duel_for_lady_succeeded_1",
	[],
	"Oh, it will just have to do.", "lady_qst_duel_for_lady_succeeded_2",
	[
		(str_store_string, 10, "@Then take it, with my eternal thanks. You are a noble {man/woman}. I will never forget that you helped me in my time of need.")
	]],

	[anyone|plyr, "lady_qst_duel_for_lady_succeeded_1",
	[],
	"{s66}, this is far too much!", "lady_qst_duel_for_lady_succeeded_2",
	[
		(str_store_string, 10, "@Forgive me, {playername}, but I must insist you accept it. The money means little to me, and I owe you so much. Here, take it, and let us speak no more of this."),
		(call_script, "script_change_player_honor", 1)
	]],

	[anyone|plyr, "lady_qst_duel_for_lady_succeeded_1",
	[],
	"Please, {s65}, no reward is necessary.", "lady_qst_duel_for_lady_succeeded_2",
	[
		(str_store_string, 10, "@{playername}, what a dear {man/woman} you are, but I will not allow you to refuse this. I owe you far more than I can say, and I am sure you can put this money to far better use than I."),
		(call_script, "script_change_player_honor", 2)
	]],

	[anyone, "lady_qst_duel_for_lady_succeeded_2",
	[],
	"{s10}", "lady_pretalk",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 10),
		(add_xp_as_reward, 1000),
		(call_script, "script_troop_add_gold", "trp_player", 2000),
		(call_script, "script_end_quest", "qst_duel_for_lady")
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_duel_for_lady"),
		(check_quest_failed, "qst_duel_for_lady"),
		(quest_slot_eq, "qst_duel_for_lady", slot_quest_giver_troop, "$g_talk_troop"),
		(le, "$talk_context", 4),
		(quest_get_slot, ":duel_for_lady_target_troop", "qst_duel_for_lady", slot_quest_target_troop),
		(str_store_troop_name_link, 13, ":duel_for_lady_target_troop")
	],
	"I was told that you sought satisfaction from {s13} to prove my innocence, {playername}. It was a fine gesture, and I thank you for your efforts.", "lady_qst_duel_for_lady_failed",
	[]],

	[anyone|plyr, "lady_qst_duel_for_lady_failed",
	[],
	"I beg your forgiveness for my defeat, {s65}...", "lady_qst_duel_for_lady_failed_2",
	[]],

	[anyone, "lady_qst_duel_for_lady_failed_2",
	[],
	"It matters not, dear {playername}. You tried. The truth cannot be proven at the point of a sword, but you willingly put your life at stake for my honour. That alone will convince many of my innocence.", "lady_pretalk",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 6),
		(add_xp_as_reward, 400),
		(call_script, "script_end_quest", "qst_duel_for_lady")
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_escort_lady"),
		(eq, "$talk_context", 10),
		(quest_slot_eq, "qst_escort_lady", slot_quest_object_troop, "$g_talk_troop")
	],
	"Thank you for escorting me here, {playername}. Please accept this gift as a token of my gratitude. I hope we shall meet again sometime in the future.", "lady_escort_lady_succeeded",
	[
		(quest_get_slot, ":escort_lady_target_center", "qst_escort_lady", slot_quest_target_center),
		(add_xp_as_reward, 300),
		(call_script, "script_troop_add_gold", "trp_player", 250),
		(call_script, "script_end_quest", "qst_escort_lady"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 2),
		(troop_set_slot, "$g_talk_troop", slot_troop_cur_center, ":escort_lady_target_center"),
		(remove_member_from_party, "$g_talk_troop")
	]],

	[anyone|plyr, "lady_escort_lady_succeeded",
	[],
	"It was an honor to serve you, {s65}.", "close_window",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(troop_set_slot, "$g_talk_troop", slot_troop_love_interest_3, 0),
		(check_quest_active, "qst_visit_lady"),
		(quest_slot_eq, "qst_visit_lady", slot_quest_giver_troop, "$g_talk_troop")
	],
	"Ah {playername} - you must have received my message. How happy I am that you could come!", "lady_start",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 1),
		(call_script, "script_end_quest", "qst_visit_lady")
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_formal_marriage_proposal"),
		(quest_slot_eq, "qst_formal_marriage_proposal", slot_quest_giver_troop, "$g_talk_troop"),
		(neg|check_quest_succeeded, "qst_formal_marriage_proposal"),
		(neg|check_quest_failed, "qst_formal_marriage_proposal")
	],
	"{playername} - is there any word from my family?", "lady_proposal_pending",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_formal_marriage_proposal"),
		(quest_slot_eq, "qst_formal_marriage_proposal", slot_quest_giver_troop, "$g_talk_troop"),
		(check_quest_failed, "qst_formal_marriage_proposal"),
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(call_script, "script_troop_get_family_relation_to_troop", ":var_1", "$g_talk_troop")
	],
	"I hear that my {s11} has refused your request to marry me. Does that mean that we must part?", "lady_betrothed",
	[
		(call_script, "script_end_quest", "qst_formal_marriage_proposal")
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(le, "$talk_context", 4),
		(check_quest_active, "qst_rescue_lord_by_replace"),
		(check_quest_succeeded, "qst_rescue_lord_by_replace"),
		(quest_slot_eq, "qst_rescue_lord_by_replace", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_get_slot, ":rescue_lord_by_replace_target_troop", "qst_rescue_lord_by_replace", slot_quest_target_troop),
		(call_script, "script_troop_get_family_relation_to_troop", ":rescue_lord_by_replace_target_troop", "$g_talk_troop")
	],
	"Oh, {playername}, you brought {reg4?her:him} back to me! Thank you ever so much for rescuing my {s11}. Please, take this as some small repayment for your noble deed.", "lady_generic_mission_succeeded",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 8),
		(add_xp_as_reward, 2000),
		(call_script, "script_troop_add_gold", "trp_player", 1500),
		(call_script, "script_end_quest", "qst_rescue_lord_by_replace")
	]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(check_quest_active, "qst_rescue_prisoner"),
		(check_quest_succeeded, "qst_rescue_prisoner"),
		(quest_slot_eq, "qst_rescue_prisoner", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_get_slot, ":rescue_prisoner_target_troop", "qst_rescue_prisoner", slot_quest_target_troop),
		(call_script, "script_troop_get_family_relation_to_troop", ":rescue_prisoner_target_troop", "$g_talk_troop")
	],
	"Oh, {playername}, you brought {reg4?her:him} back to me! Thank you ever so much for rescuing my {s11}. Please, take this as some small repayment for your noble deed.", "rescue_prisoner_succeed_1",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 8),
		(add_xp_as_reward, 2000),
		(call_script, "script_troop_add_gold", "trp_player", 1500),
		(call_script, "script_end_quest", "qst_rescue_prisoner")
	]],

	[anyone|plyr, "rescue_prisoner_succeed_1",
	[],
	"Always an honour to serve, {s65}.", "lady_pretalk",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(eq, "$g_talk_troop_met", 0),
		(gt, "$g_player_tournament_placement", 4),
		(str_clear, 8)
	],
	"You must be {playername}. We have just had the honor of watching you distinguish yourself in the recent melee{s8}.", "lady_meet_end",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(eq, "$g_talk_troop_met", 0),
		(le, "$talk_context", 4),
		(assign, ":value", 0),
		(str_clear, 15),
		(try_for_range, ":troop", "trp_knight_1_1", "trp_kingdom_1_pretender"),
			(call_script, "script_troop_get_family_relation_to_troop", ":troop", "$g_talk_troop"),
			(gt, reg0, 5),
			(call_script, "script_troop_get_relation_with_troop", "trp_player", ":troop"),
			(gt, reg0, 10),
			(str_store_string, 15, 11),
			(str_store_troop_name, 16, ":troop"),
			(assign, ":value", ":troop"),
		(try_end),
		(gt, ":value", 0)
	],
	"You must be {playername}. My {s15} {s16} has spoken most highly of you. I am delighted to make your acquaintance.", "lady_meet_end",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(eq, "$g_talk_troop_met", 0),
		(le, "$talk_context", 4)
	],
	"I say, you don't look familiar...", "lady_premeet",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_met, 4),
		(lt, "$g_talk_troop_relation", 0)
	],
	"Ah, {playername}. How good it is to see you again. However, I believe that I am required elsewhere.", "close_window",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_met, 4)
	],
	"{playername} -- how good it is to see you. (Whispers:) I still remember your visits fondly.", "lady_start",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(eq, "$g_talk_troop_met", 0),
		(gt, "$g_player_tournament_placement", 4),
		(ge, "$g_talk_troop_relation", 0)
	],
	"Ah, {playername}. How spendid it was to see you distinguish yourself in the recent tourney.", "lady_meet_end",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(str_store_string, 12, "str_hello_playername")
	],
	"{s12}", "lady_start",
	[]],

	[anyone, "lady_start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(troop_slot_ge, "$g_talk_troop", 5, 2),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_met, 4),
		(troop_get_slot, ":g_talk_troop_betrothed", "$g_talk_troop", slot_troop_betrothed),
		(gt, ":g_talk_troop_betrothed", -1),
		(neq, ":g_talk_troop_betrothed", "trp_player"),
		(str_store_troop_name, 5, ":g_talk_troop_betrothed"),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":g_talk_troop_betrothed"),
		(lt, reg0, 0),
		(ge, "$g_talk_troop_relation", 10)
	],
	"I have sad news. I have become betrothed to {s5} -- against my will, I should say! Oh {playername} - I would so much rather be wed to you!", "lady_betrothed",
	[]],

	[anyone, "lady_start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(troop_slot_ge, "$g_talk_troop", 5, 2),
		(troop_get_slot, ":g_talk_troop_betrothed", "$g_talk_troop", slot_troop_betrothed),
		(gt, ":g_talk_troop_betrothed", -1),
		(neq, ":g_talk_troop_betrothed", "trp_player"),
		(str_store_troop_name, 5, ":g_talk_troop_betrothed")
	],
	"Good {playername} -- I have become betrothed to {s5}. It is now no longer seemly for us to see each other like this.", "lady_betrothed",
	[]],

	[anyone, "lady_start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(troop_slot_eq, "$g_talk_troop", slot_troop_met, 2),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_met, 4),
		(neg|troop_slot_ge, "trp_player", 30, "trp_npc1"),
		(neg|troop_slot_ge, "$g_talk_troop", 30, "trp_npc1"),
		(gt, "$g_talk_troop_relation", 0),
		(assign, "$romantic_rival", -1),
		(try_for_range, ":troop", "trp_knight_1_1", "trp_kingdom_1_pretender"),
			(this_or_next|troop_slot_eq, ":troop", slot_troop_love_interest_1, "$g_talk_troop"),
			(this_or_next|troop_slot_eq, ":troop", slot_troop_love_interest_2, "$g_talk_troop"),
			(troop_slot_eq, ":troop", slot_troop_love_interest_2, "$g_talk_troop"),
			(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":troop"),
			(le, reg0, -4),
			(this_or_next|troop_slot_eq, ":troop", slot_lord_reputation_type, 5),
			(this_or_next|troop_slot_eq, ":troop", slot_lord_reputation_type, 2),
			(this_or_next|troop_slot_eq, ":troop", slot_lord_reputation_type, 8),
			(troop_slot_eq, ":troop", slot_lord_reputation_type, 3),
			(assign, "$romantic_rival", ":troop"),
		(try_end),
		(gt, "$romantic_rival", 0),
		(call_script, "script_dplmc_store_troop_is_female", "$romantic_rival")
	],
	"I must tell you -- there is another lord who has been paying me attentions, although I cannot abide {reg0?her:him}. I fear {reg0?she:he} has designs on me, and may try to force me to wed against my will.", "lady_other_suitor",
	[]],

	[anyone, "lady_start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(lt, "$g_time_since_last_talk", 24),
		(troop_slot_eq, "$g_talk_troop", slot_troop_met, 2),
		(gt, "$g_talk_troop_relation", 0),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 22),
			(str_store_string, 11, "str_i_do_enjoy_speaking_to_you_but_i_am_sure_you_understand_that_our_people_cluck_their_tongues_at_a_woman_to_spend_too_long_conversing_with_a_man_outside_her_family__although_the_heavens_know_its_never_the_man_who_is_held_to_blame_"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 24),
			(str_store_string, 11, "str_as_much_as_i_enjoy_speaking_to_you_i_do_not_care_to_be_gossiped_about_by_others_who_might_lack_my_grace_and_beauty_"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 25),
			(str_store_string, 11, "str_i_do_so_enjoy_speaking_to_you_but_as_a_daughter_of_one_of_the_great_families_of_this_land_i_must_set_an_example_of_propriety_"),
		(else_try),
			(str_store_string, 11, "str_i_do_so_enjoy_speaking_to_you_but_as_a_daughter_of_good_family_i_must_protect_my_reputation_"),
		(try_end)
	],
	"{s11}It is probably not suitable for us to tarry too long here in conversation, but I would hope to see you again soon.", "lady_talk",
	[]],

	[anyone, "lady_start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(lt, "$g_time_since_last_talk", 24),
		(troop_slot_eq, "$g_talk_troop", slot_troop_met, 2),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 22),
			(str_store_string, 11, "str_although_it_is_kind_of_you_to_pay_me_such_attentions_i_suspect_that_you_might_find_other_ladies_who_may_be_more_inclined_to_return_your_affection"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 24),
			(str_store_string, 11, "str_as_flattered_as_i_am_by_your_attentions_perhaps_you_should_seek_out_another_lady_of_somewhat_shall_we_say_different_tastes"),
		(else_try),
			(str_store_string, 11, "str_as_flattered_as_i_am_by_your_attentions_i_am_a_daughter_of_good_family_and_must_be_aware_of_my_reputation_it_is_not_seemly_that_i_converse_too_much_at_one_time_with_one_man_i_am_sure_you_understand_now_if_you_will_excuse_me"),
		(try_end)
	],
	"{s11}", "lady_talk",
	[]],

	[anyone, "lady_start",
	[
		(eq, "$lady_flirtation_location", "$g_encountered_party"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_met, 1)
	],
	"I was planning to retire for a little while, but perhaps we may have a chance to speak more later...", "lady_talk",
	[]],

	[anyone, "lady_start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6),
		(troop_slot_eq, "$g_talk_troop", slot_troop_met, 2),
		(gt, "$g_talk_troop_relation", 0),
		(str_clear, 12),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_troop_met, 2),
			(gt, "$g_talk_troop_relation", 0),
			(gt, "$g_time_since_last_talk", 24),
			(try_begin),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 23),
				(str_store_string, 12, "str_ah_my_gentle_playername_how_much_good_it_does_my_heart_to_see_you_again"),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 22),
				(str_store_string, 12, "str_playername__i_am_so_glad_to_see_you_again_i_must_say_i_do_envy_your_freedom_to_ride_out_and_experience_the_world"),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 25),
				(str_store_string, 12, "str_playername__i_am_so_glad_to_see_you_i_trust_that_you_have_been_behaving_honorably_since_last_we_met"),
			(else_try),
				(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 24),
				(str_store_string, 12, "str_greetings_playername__it_is_good_to_see_you_i_hope_that_you_have_had_success_in_your_efforts_to_make_your_name_in_the_world"),
			(else_try),
				(str_store_string, 12, "str_playername__i_am_so_glad_that_you_were_able_to_come"),
			(try_end),
		(try_end)
	],
	"It is so delightful to have a chance to spend some time together.{s12}", "lady_talk",
	[]],

	[anyone, "lady_start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 6)
	],
	"What brings you here today?", "lady_talk",
	[]],

	[anyone|plyr, "lady_proposal_pending",
	[],
	"No word so far...", "close_window",
	[]],

	[anyone|plyr, "lady_proposal_pending",
	[],
	"On second thought, now is not the time for us to marry", "lady_proposal_pending_end",
	[]],

	[anyone, "lady_proposal_pending_end",
	[
		(try_begin),
			(gt, "$g_talk_troop_effective_relation", 19),
			(str_store_string, 11, "str_very_well__i_will_let_you_choose_the_time"),
		(else_try),
			(str_store_string, 11, "str_good_i_am_glad_that_you_have_abandoned_the_notion_of_pushing_me_into_marriage_before_i_was_ready"),
		(try_end)
	],
	"{s11}", "close_window",
	[
		(call_script, "script_end_quest", "qst_formal_marriage_proposal")
	]],

	[anyone|plyr, "lady_betrothed",
	[],
	"Never! We must elope together at once!", "lady_suggest_elope",
	[]],

	[anyone|plyr, "lady_betrothed",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_betrothed, -1),
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(call_script, "script_troop_get_family_relation_to_troop", reg0, "$g_talk_troop")
	],
	"Perhaps I may still be able to change your {s11}'s mind", "lady_pretalk",
	[]],

	[anyone|plyr, "lady_betrothed",
	[],
	"So be it -- let us then part", "lady_conclude_relationship",
	[]],

	[anyone, "lady_suggest_elope",
	[
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 21)
	],
	"Good {playername} -- you are a good and kind man, but a lady cannot defy her family. Such things are not done!", "lady_conclude_relationship",
	[]],

	[anyone, "lady_suggest_elope",
	[
		(assign, "$romantic_rival", -1),
		(try_for_range, ":troop", "trp_knight_1_1", "trp_kingdom_1_pretender"),
			(this_or_next|troop_slot_eq, ":troop", slot_troop_love_interest_1, "$g_talk_troop"),
			(this_or_next|troop_slot_eq, ":troop", slot_troop_love_interest_2, "$g_talk_troop"),
			(troop_slot_eq, ":troop", slot_troop_love_interest_2, "$g_talk_troop"),
			(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":troop"),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(str_store_troop_name, 4, ":troop"),
				(display_message, "str_rival_found_s4_reg0_relation"),
			(try_end),
			(gt, reg0, "$g_talk_troop_relation"),
			(assign, "$romantic_rival", ":troop"),
		(try_end),
		(gt, "$romantic_rival", -1)
	],
	"As you may know, I have been entertaining offers from a number of {gentlemen/suitors} such as yourself. I am not yet at a stage where I can commit to any of them.", "lady_other_suitor",
	[]],

	[anyone, "lady_suggest_elope",
	[
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 24),
		(neg|troop_slot_ge, "trp_player", 7, 350)
	],
	"Ah {playername}, you must realize. You are still finding your way in the world. I have great affection for you, {playername}, but I will not consign myself to obscurity.", "lady_conclude_relationship",
	[]],

	[anyone, "lady_suggest_elope",
	[
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 25),
		(lt, "$player_honor", 20)
	],
	"Ah {playername}, although you are kind to me, I am not certain enough of your moral fiber to risk such a thing. Although I bear little affection for my betrothed, it would be a weighty thing to go against my family's wishes, and I am not certain enough of you to take that step.", "lady_conclude_relationship",
	[]],

	[anyone, "lady_suggest_elope",
	[
		(le, "$g_talk_troop_effective_relation", 20)
	],
	"Good {playername} -- to elope would be to throw away my ties with my family, which are everything to me! I have a considerable affection for you, but I am not sure that I am prepared to risk that.", "lady_conclude_relationship",
	[]],

	[anyone, "lady_suggest_elope",
	[
		(assign, "$home_for_spouse", -1),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(eq, "$home_for_spouse", -1),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(is_between, ":party", "p_town_1", "p_village_1"),
			(assign, "$home_for_spouse", ":party"),
		(try_end),
		(eq, "$home_for_spouse", -1)
	],
	"Good {playername} -- I am not used to the hardships of campaigning as you are. I want a home to call my own. If you were lord of a castle or town with a great hall, I would gladly go there as your {reg0?wife:husband}, to be {reg0?mistress:keeper} of the household. But I do not wish to live like a hunted animal.", "lady_conclude_relationship",
	[]],

	[anyone, "lady_suggest_elope",
	[
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(call_script, "script_troop_get_family_relation_to_troop", reg0, "$g_talk_troop")
	],
	"Elope with you? Yes -- we could do that. It is a great step to defy my family -- but a loveless marriage, and life without you, might be a far worse thing! But be warned -- this will be a terrible blow to my {s11}'s prestige, and {reg4?she:he} will do everything in {reg4?her:his} power to bring you down.", "lady_elope_agree",
	[]],

	[anyone|plyr, "lady_elope_agree",
	[],
	"Quickly, then! There is no time to lose.", "lady_elope_agree_nurse",
	[]],

	[anyone|plyr, "lady_elope_agree",
	[],
	"Everything in {reg4?her:his} power, you say? Em... Let me think about this...", "close_window",
	[]],

	[anyone, "lady_elope_agree_nurse",
	[],
	"Your lordship... Your ladyship... Would you like me to witness your exchange of vows?", "lady_elope_agree_lady_vows",
	[
		(set_conversation_speaker_troop, 2900)
	]],

	[anyone, "lady_elope_agree_lady_vows",
	[
		(str_store_troop_name, 4, "$g_talk_troop")
	],
	"Yes, do that. For my part, I make the following vow: I, {s4}, do swear that I accept {playername} as my {husband/wife}, according to the ancient law and custom of our land...", "lady_elope_agree_nurse_2",
	[]],

	[anyone, "lady_elope_agree_nurse_2",
	[],
	"Very good. Do you, {playername}, swear similarly to accept {s4} as your {reg65?wife:husband}?", "lady_elope_agree_player_vows",
	[
		(set_conversation_speaker_troop, 2900)
	]],

	[anyone|plyr, "lady_elope_agree_player_vows",
	[],
	"I do.", "close_window",
	[
		(call_script, "script_courtship_event_bride_marry_groom", "$g_talk_troop", "trp_player", 1)
	]],

	[anyone|plyr, "lady_elope_agree_player_vows",
	[],
	"Eh, what? This is all moving too fast...", "close_window",
	[]],

	[anyone|plyr, "lady_elope_agree",
	[],
	"Oh, really? My dear -- I could never separate a {reg65?lady:young lad} from {reg65?her:his} family like that...", "lady_conclude_relationship",
	[]],

	[anyone, "lady_conclude_relationship",
	[],
	"So I suppose our time together must come to an end...", "lady_conclude_relationship_confirm",
	[]],

	[anyone|plyr, "lady_conclude_relationship_confirm",
	[],
	"Yes -- it must be...", "lady_conclude_relationship_confirm_yes",
	[]],

	[anyone|plyr, "lady_conclude_relationship_confirm",
	[],
	"Wait -- perhaps there is still a chance for us!", "lady_conclude_relationship_confirm_no",
	[]],

	[anyone, "lady_conclude_relationship_confirm_yes",
	[],
	"Farewell, {playername}. We will see each other, in the courts and castles of this realm, but we must keep our distance from each other. I will remember these days fondly, nonetheless.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_met, 4)
	]],

	[anyone, "lady_conclude_relationship_confirm_no",
	[],
	"In that case, we shall see what the future brings.", "close_window",
	[]],

	[anyone|plyr, "lady_generic_mission_succeeded",
	[],
	"Always an honour to serve, {s65}.", "lady_pretalk",
	[]],

	[anyone|plyr, "lady_premeet",
	[],
	"I am {playername}.", "lady_meet",
	[]],

	[anyone|plyr, "lady_premeet",
	[],
	"My name is {playername}. At your service.", "lady_meet",
	[]],

	[anyone, "lady_meet",
	[
		(troop_slot_ge, "trp_player", 7, 200)
	],
	"Of course. How splendid to finally make your acquaintance.", "lady_meet_end",
	[]],

	[anyone, "lady_meet",
	[],
	"{playername}? I do not believe I've heard of you before.", "lady_meet_end",
	[]],

	[anyone, "lady_meet_end",
	[
		(eq, "$lady_flirtation_location", "$g_encountered_party")
	],
	"I am about to retire for a little while, but perhaps we may have a chance to speak more later...", "lady_talk",
	[]],

	[anyone, "lady_meet_end",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_spouse, -1),
		(call_script, "script_troop_get_romantic_chemistry_with_troop", "$g_talk_troop", "trp_player"),
		(le, reg0, 0),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", "trp_player"),
		(le, reg0, 0)
	],
	"Now, if you will excuse me...", "lady_talk",
	[]],

	[anyone, "lady_meet_end",
	[],
	"Can I help you with anything?", "lady_talk",
	[]],

	[anyone|plyr, "lady_talk",
	[
		(neg|troop_slot_ge, "$g_talk_troop", 8, 0),
		(ge, "$g_encountered_party_relation", 0)
	],
	"I want to know the location of someone.", "lord_talk_ask_location",
	[]],

	[anyone, "lady_pretalk",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_spouse, -1),
		(call_script, "script_troop_get_romantic_chemistry_with_troop", "$g_talk_troop", "trp_player"),
		(le, reg0, 0),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", "trp_player"),
		(le, reg0, 0)
	],
	"Now, if you will excuse me...", "lady_talk",
	[]],

	[anyone, "lady_pretalk",
	[],
	"Is there anything else?", "lady_talk",
	[]],

	[anyone|plyr, "lady_talk",
	[
		(neq, "$g_talk_troop_met", 0)
	],
	"I wished to ask about one of your relatives.", "dplmc_lady_relations2",
	[]],

	[anyone, "dplmc_lady_relations2",
	[],
	"About which lord do you want information?", "dplmc_lady_info_relative_select",
	[]],

	[anyone|repeat_for_troops|plyr, "dplmc_lady_info_relative_select",
	[
		(store_repeat_object, ":repeat_object"),
		(neq, "$g_talk_troop", ":repeat_object"),
		(is_between, ":repeat_object", "trp_npc1", "trp_heroes_end"),
		(neq, ":repeat_object", "trp_player"),
		(neq, ":repeat_object", "$g_talk_troop"),
		(troop_slot_ge, ":repeat_object", 2, 2),
		(neg|troop_slot_ge, ":repeat_object", 2, 9),
		(neg|troop_slot_eq, ":repeat_object", slot_troop_occupation, 11),
		(call_script, "script_troop_get_family_relation_to_troop", ":repeat_object", "$g_talk_troop"),
		(assign, ":var_2", reg0),
		(ge, ":var_2", 2),
		(str_store_troop_name, 18, ":repeat_object")
	],
	"Your {s11} {s18}", "dplmc_lady_info_relative_1",
	[
		(store_repeat_object, "$lord_selected")
	]],

	[anyone|plyr, "dplmc_lady_info_relative_select",
	[],
	"Never mind.", "lady_pretalk",
	[]],

	[anyone, "dplmc_lady_info_relative_1",
	[
		(lt, "$g_talk_troop_effective_relation", 0)
	],
	"Pardon, but I do not feel comfortable discussing such personal matters with you.", "lady_pretalk",
	[]],

	[anyone, "dplmc_lady_info_relative_1",
	[
		(call_script, "script_dplmc_troop_political_notes_to_s47", "$lord_selected")
	],
	"{s47}", "dplmc_lady_info_relative_2",
	[]],

	[anyone, "dplmc_lady_info_relative_1",
	[
		(is_between, "$lord_selected", "trp_knight_1_1_wife", "trp_heroes_end"),
		(troop_slot_eq, "$lord_selected", slot_troop_spouse, -1),
		(assign, ":var_1", "$lord_selected"),
		(troop_get_slot, ":var_1_betrothed", ":var_1", slot_troop_betrothed),
		(is_between, ":var_1_betrothed", "trp_npc1", "trp_knight_1_1_wife"),
		(str_store_troop_name, 9, ":var_1"),
		(str_store_troop_name, 11, ":var_1_betrothed"),
		(str_store_string, 12, "str_s9_is_now_betrothed_to_s11_soon_we_believe_there_shall_be_a_wedding"),
		(try_begin),
			(troop_slot_eq, ":var_1", slot_troop_met, 2),
			(assign, "$romantic_rival", ":var_1_betrothed"),
		(try_end)
	],
	"{12}", "lady_pretalk",
	[]],

	[anyone, "dplmc_lady_info_relative_2",
	[
		(is_between, "$lord_selected", "trp_knight_1_1_wife", "trp_heroes_end"),
		(assign, "$lady_selected", "$lord_selected"),
		(try_begin),
			(str_store_string, 12, "str_i_have_not_heard_any_news_about_her"),
			(str_store_troop_name, 9, "$lady_selected"),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(display_message, "str_searching_for_rumors_for_s9"),
			(try_end),
			(assign, "$romantic_rival", -1),
			(assign, ":value", 0),
			(try_for_range, ":number", 0, "$num_log_entries"),
				(troop_slot_eq, "trp_log_array_actor", ":number", "$lady_selected"),
				(troop_get_slot, ":log_array_troop_object_number", "trp_log_array_troop_object", ":number"),
				(str_clear, 11),
				(try_begin),
					(is_between, ":log_array_troop_object_number", 0, "trp_heroes_end"),
					(str_store_troop_name, 11, ":log_array_troop_object_number"),
				(try_end),
				(troop_get_slot, ":log_array_center_object_number", "trp_log_array_center_object", ":number"),
				(str_clear, 10),
				(try_begin),
					(is_between, ":log_array_center_object_number", 0, "trp_heroes_end"),
					(str_store_troop_name, 10, ":log_array_center_object_number"),
				(try_end),
				(assign, ":var_5", "$lady_selected"),
				(try_begin),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 51),
					(str_store_string, 12, "str_they_say_that_s9_has_shown_favor_to_s11_perhaps_it_will_not_be_long_until_they_are_betrothed__if_her_family_permits"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
					(try_begin),
						(troop_slot_eq, ":var_5", slot_troop_met, 2),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_1, ":var_5"),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_2, ":var_5"),
						(troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_3, ":var_5"),
						(assign, "$romantic_rival", ":log_array_troop_object_number"),
					(try_end),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 53),
					(str_store_string, 12, "str_they_say_that_s9_has_been_forced_by_her_family_into_betrothal_with_s11"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
					(try_begin),
						(troop_slot_eq, ":var_5", slot_troop_met, 2),
						(assign, "$romantic_rival", ":log_array_troop_object_number"),
					(try_end),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 52),
					(str_store_string, 12, "str_they_say_that_s9_has_agreed_to_s11s_suit_and_the_two_are_now_betrothed"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
					(try_begin),
						(troop_slot_eq, ":var_5", slot_troop_met, 2),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_1, ":var_5"),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_2, ":var_5"),
						(troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_3, ":var_5"),
						(assign, "$romantic_rival", ":log_array_troop_object_number"),
					(try_end),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 59),
					(str_store_string, 12, "str_they_say_that_s9_under_pressure_from_her_family_has_agreed_to_betrothal_with_s11"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
					(try_begin),
						(troop_slot_eq, ":var_5", slot_troop_met, 2),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_1, ":var_5"),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_2, ":var_5"),
						(troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_3, ":var_5"),
						(assign, "$romantic_rival", ":log_array_troop_object_number"),
					(try_end),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 54),
					(str_store_string, 12, "str_they_say_that_s9_has_refused_s11s_suit"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 58),
					(str_store_string, 12, "str_they_say_that_s11_has_tired_of_pursuing_s9"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 55),
					(str_store_string, 12, "str_they_say_that_s9s_family_has_forced_her_to_renounce_s11_whom_she_much_loved"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 57),
					(str_store_string, 12, "str_they_say_that_s9_has_run_away_with_s11_causing_her_family_much_grievance"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 56),
					(str_store_string, 12, "str_they_say_that_s9_and_s11_have_wed"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
				(else_try),
					(troop_get_slot, ":log_array_troop_object_number", ":var_5", slot_troop_love_interests_end),
					(is_between, ":log_array_troop_object_number", "trp_npc1", "trp_knight_1_1_wife"),
					(str_store_troop_name, 11, ":log_array_troop_object_number"),
					(str_store_string, 12, "str_they_say_that_s9_was_recently_visited_by_s11_who_knows_where_that_might_lead"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
					(try_begin),
						(troop_slot_eq, ":var_5", slot_troop_met, 2),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_1, ":var_5"),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_2, ":var_5"),
						(troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_3, ":var_5"),
						(assign, "$romantic_rival", ":log_array_troop_object_number"),
					(try_end),
				(try_end),
			(try_end),
			(try_begin),
				(neq, ":value_2", "$romantic_rival"),
				(assign, "$romantic_rival", -1),
			(try_end),
			(try_begin),
				(gt, ":value", 0),
				(call_script, "script_add_rumor_string_to_troop_notes", ":value", ":value_2", 12),
			(try_end),
		(else_try),
			(eq, "$lady_selected", -1),
			(str_store_string, 12, "str_there_is_not_much_to_tell_but_it_is_still_early_in_the_season"),
		(else_try),
			(assign, reg4, "$lady_selected"),
			(str_store_troop_name, 9, "$lady_selected"),
			(str_store_string, 12, "str_error_lady_selected_=_s9"),
		(try_end)
	],
	"{s12}.", "lady_pretalk",
	[]],

	[anyone, "dplmc_lady_info_relative_2",
	[
		(call_script, "script_update_troop_location_notes", "$lord_selected", 1),
		(call_script, "script_get_information_about_troops_position", "$lord_selected", 0)
	],
	"{s1}", "lady_pretalk",
	[]],

	[anyone|plyr, "lady_talk",
	[
		(neq, "$g_talk_troop_met", 0)
	],
	"Do you know of any ongoing feasts?", "dplmc_lady_feasts",
	[]],

	[anyone, "dplmc_lady_feasts",
	[
		(str_clear, 12),
		(assign, ":value", 0),
		(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(faction_slot_eq, ":faction", slot_faction_state, 0),
			(faction_slot_eq, ":faction", slot_faction_ai_state, 6),
			(assign, ":value", 1),
			(faction_get_slot, ":faction_ai_object", ":faction", slot_faction_ai_object),
			(str_store_party_name, 4, ":faction_ai_object"),
			(str_store_faction_name, 3, ":faction"),
			(store_current_hours, ":current_hours"),
			(faction_get_slot, ":faction_last_feast_concluded", ":faction", slot_faction_last_feast_concluded),
			(store_sub, ":value_2", ":current_hours", ":faction_last_feast_concluded"),
			(try_begin),
				(gt, ":value_2", 48),
				(str_store_string, 12, "str_s12there_is_a_feast_of_the_s3_in_progress_at_s4_but_it_has_been_going_on_for_a_couple_of_days_and_is_about_to_end_"),
			(else_try),
				(gt, ":value_2", 24),
				(str_store_string, 12, "str_s12there_is_a_feast_of_the_s3_in_progress_at_s4_which_should_last_for_at_least_another_day_"),
			(else_try),
				(str_store_string, 12, "str_s12there_is_a_feast_of_the_s3_in_progress_at_s4_which_has_only_just_begun_"),
			(try_end),
		(try_end),
		(try_begin),
			(eq, ":value", 0),
			(str_store_string, 12, "str_not_at_this_time_no"),
		(else_try),
			(str_store_string, 12, "str_s12the_great_lords_bring_their_daughters_and_sisters_to_these_occasions_to_see_and_be_seen_so_they_represent_an_excellent_opportunity_to_make_a_ladys_acquaintance"),
		(try_end)
	],
	"{s12}", "lady_pretalk",
	[]],

	[anyone|plyr, "lady_talk",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"May I have the honor of knowing more about you, {reg65?my lady:good sir}?", "lady_relations",
	[]],

	[anyone, "lady_relations",
	[
		(str_store_string, 12, "str_i_am"),
		(assign, ":value", 0),
		(assign, ":value_2", 0),
		(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
			(call_script, "script_troop_get_family_relation_to_troop", "$g_talk_troop", ":troop"),
			(this_or_next|gt, reg0, 5),
			(party_slot_eq, "$g_encountered_party", slot_town_lord, ":troop"),
			(gt, reg0, 0),
			(str_store_troop_name, 14, ":troop"),
			(try_begin),
				(eq, ":value", 1),
				(str_store_string, 12, "str_s12"),
			(try_end),
			(str_store_string, 12, "str_s12_s11_to_s14"),
			(assign, ":value", 1),
			(try_begin),
				(party_slot_eq, "$g_encountered_party", slot_town_lord, ":troop"),
				(assign, ":value_2", 1),
			(try_end),
		(try_end),
		(try_begin),
			(eq, ":value_2", 1),
			(str_store_string, 12, "str_s12"),
		(else_try),
			(eq, ":value_2", 0),
			(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_state, 6),
			(faction_slot_eq, "$g_talk_troop_faction", slot_faction_ai_object, "$g_encountered_party"),
			(str_store_string, 12, "str_s12_i_am_here_for_the_feast"),
		(else_try),
			(str_store_string, 12, "str_s12"),
		(try_end)
	],
	"{s12}", "lady_pretalk",
	[
		(assign, "$g_talk_troop_met", 1)
	]],

	[anyone|plyr, "lady_talk",
	[
		(this_or_next|neq, reg65, "$character_gender"),
		(ge, "$g_disable_condescending_comments", 2),
		(troop_slot_eq, "$g_talk_troop", slot_troop_met, 1),
		(troop_slot_eq, "$g_talk_troop", slot_troop_spouse, -1),
		(neg|troop_slot_ge, "trp_player", 30, "trp_npc1"),
		(neq, "$lady_flirtation_location", "$g_encountered_party")
	],
	"My {reg65?lady:lord}, I would like to profess myself your most ardent admirer", "lady_profess_admiration",
	[
		(call_script, "script_troop_get_romantic_chemistry_with_troop", "$g_talk_troop", "trp_player"),
		(assign, ":var_1", reg0),
		(val_div, ":var_1", 2),
		(val_max, ":var_1", -2),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", ":var_1"),
		(assign, "$g_time_to_spare", 0)
	]],

	[anyone|plyr, "lady_talk",
	[
		(this_or_next|ge, "$g_disable_condescending_comments", 2),
		(neq, reg65, "$character_gender"),
		(gt, "$g_player_tournament_placement", 3)
	],
	"My {reg65?lady:lord}, I would like to dedicate my successes in this recent tourney to you", "lady_tournament_dedication_reaction",
	[
		(try_begin),
			(gt, "$g_player_tournament_placement", 3),
			(val_sub, "$g_player_tournament_placement", 3),
			(val_mul, "$g_player_tournament_placement", 2),
		(else_try),
			(assign, "$g_player_tournament_placement", 0),
		(try_end),
		(try_begin),
			(neg|troop_slot_eq, "trp_player", slot_troop_spouse, -1),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(neg|troop_slot_eq, ":troop", slot_troop_occupation, 15),
				(neq, ":troop", "$g_talk_troop"),
				(this_or_next|troop_slot_eq, "trp_player", slot_troop_spouse, ":troop"),
				(this_or_next|troop_slot_eq, ":troop", slot_troop_spouse, "trp_player"),
				(troop_slot_eq, "trp_player", slot_troop_betrothed, ":troop"),
				(call_script, "script_troop_change_relation_with_troop", ":troop", "trp_player", -1),
			(try_end),
		(try_end),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lady_used_tournament, 1),
			(val_div, "$g_player_tournament_placement", 3),
			(str_store_string, 9, "str_another_tournament_dedication_oh_i_suppose_it_is_always_flattering"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 21),
			(val_mul, "$g_player_tournament_placement", 2),
			(str_store_string, 9, "str_do_you_why_what_a_most_gallant_thing_to_say"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 25),
			(val_div, "$g_player_tournament_placement", 2),
			(str_store_string, 9, "str_hmm_i_cannot_say_that_i_altogether_approve_of_such_frivolity_but_i_must_confess_myself_a_bit_flattered"),
		(else_try),
			(str_store_string, 9, "str_why_thank_you_you_are_most_kind_to_do_so"),
		(try_end),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", "$g_player_tournament_placement"),
		(assign, "$g_player_tournament_placement", 0),
		(troop_set_slot, "$g_talk_troop", slot_lady_used_tournament, 1)
	]],

	[anyone, "lady_tournament_dedication_reaction",
	[],
	"{s9}", "lady_pretalk",
	[]],

	[anyone, "lady_profess_admiration",
	[
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", "trp_player"),
		(gt, reg0, 0),
		(try_begin),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 25),
			(str_store_string, 11, "str_you_are_most_courteous_and_courtesy_is_a_fine_virtue_"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 24),
			(str_store_string, 11, "str_hmm_youre_a_bold_one_but_i_like_that_"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 22),
			(str_store_string, 11, "str_ah_well_they_all_say_that_but_no_matter_a_compliment_well_delivered_is_at_least_a_good_start_"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 23),
			(str_store_string, 11, "str_oh_do_you_mean_that_such_a_kind_thing_to_say"),
		(else_try),
			(str_store_string, 11, "str_you_are_a_most_gallant_young_man_"),
		(try_end)
	],
	"{s11}I would like it very much if we could see more of each other.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_met, 2),
		(assign, "$lady_flirtation_location", "$g_encountered_party")
	]],

	[anyone, "lady_profess_admiration",
	[],
	"Ah... You are too kind... My, the hour is getting rather late, isn't it? I really must be going.", "lady_pretalk",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_met, 2)
	]],

	[anyone|plyr, "lady_talk",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_met, 2),
		(eq, "$g_time_to_spare", 1),
		(eq, "$talk_context", 16)
	],
	"Do you like music, my {reg65?lady:lord}?", "lady_recite_poetry",
	[
		(assign, "$g_time_to_spare", 0)
	]],

	[anyone, "lady_recite_poetry",
	[],
	"That would depend on the song. Did you intend to recite a verse?", "lady_recite_poetry",
	[]],

	[anyone|plyr, "lady_recite_poetry",
	[
		(gt, "$tragic_poem_recitations", 0),
		(troop_slot_eq, "$g_talk_troop", slot_troop_home_speech_delivered, 0)
	],
	"'And who are you, the proud lord said,'", "lady_recite_poetry_response",
	[
		(assign, "$poem_selected", 1),
		(troop_set_slot, "$g_talk_troop", slot_troop_home_speech_delivered, 1)
	]],

	[anyone|plyr, "lady_recite_poetry",
	[
		(gt, "$comic_poem_recitations", 0),
		(troop_slot_eq, "$g_talk_troop", slot_troop_personalitymatch_state, 0)
	],
	"'A bear there was, A bear, A BEAR!'", "lady_recite_poetry_response",
	[
		(assign, "$poem_selected", 3),
		(troop_set_slot, "$g_talk_troop", slot_troop_personalitymatch_state, 1)
	]],

	[anyone|plyr, "lady_recite_poetry",
	[
		(gt, "$mystic_poem_recitations", 0),
		(troop_slot_eq, "$g_talk_troop", slot_troop_personalityclash_penalties, 0)
	],
	"You are the first and the last/the outer and the inner...", "lady_recite_poetry_response",
	[
		(assign, "$poem_selected", 4),
		(troop_set_slot, "$g_talk_troop", slot_troop_personalityclash_penalties, 1)
	]],

	[anyone|plyr, "lady_recite_poetry",
	[
		(gt, "$heroic_poem_recitations", 0),
		(troop_slot_eq, "$g_talk_troop", slot_troop_personalityclash2_state, 0)
	],
	"'A light pierced the gloom over Maidenpool...'", "lady_recite_poetry_response",
	[
		(assign, "$poem_selected", 2),
		(troop_set_slot, "$g_talk_troop", slot_troop_personalityclash2_state, 1)
	]],

	[anyone|plyr, "lady_recite_poetry",
	[
		(gt, "$allegoric_poem_recitations", 0),
		(troop_slot_eq, "$g_talk_troop", slot_troop_personalitymatch_object, 0)
	],
	"I deflected her skeptical questioning darts/with armor made of purest devotion...", "lady_recite_poetry_response",
	[
		(assign, "$poem_selected", 5),
		(troop_set_slot, "$g_talk_troop", slot_troop_personalitymatch_object, 1)
	]],

	[anyone|plyr, "lady_recite_poetry",
	[],
	"Actually, I can't think of any that I would care to recite...", "lady_pretalk",
	[]],

	[anyone, "lady_recite_poetry_response",
	[
		(call_script, "script_courtship_poem_reactions", "$g_talk_troop", "$poem_selected")
	],
	"{s11}", "lady_private_conversation_end",
	[
		(assign, ":var_1", reg0),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", ":var_1"),
		(call_script, "script_courtship_poem_reactions", "$g_talk_troop", "$poem_selected")
	]],

	[anyone, "lady_private_conversation_end",
	[
		(str_clear, 11),
		(try_begin),
			(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", "trp_player"),
			(gt, reg0, 0),
			(str_store_string, 11, "str__do_come_and_see_me_again_soon"),
		(try_end)
	],
	"Time is passing quickly, and we cannot linger here too long.", "lady_pretalk",
	[
		(assign, "$g_time_to_spare", 0)
	]],

	[anyone|plyr, "lady_talk",
	[
		(neg|check_quest_active, "qst_formal_marriage_proposal"),
		(neg|troop_slot_ge, "trp_player", 34, "trp_npc1"),
		(neg|troop_slot_ge, "trp_player", 30, "trp_npc1"),
		(troop_slot_eq, "$g_talk_troop", slot_troop_met, 2),
		(eq, "$talk_context", 16)
	],
	"Do you think that we may have a future together, {reg65?my lady:kind sir}?", "lady_marriage_discussion",
	[]],

	[anyone, "lady_marriage_discussion",
	[
		(assign, "$romantic_rival", -1),
		(try_for_range, ":troop", "trp_knight_1_1", "trp_kingdom_1_pretender"),
			(this_or_next|troop_slot_eq, ":troop", slot_troop_love_interest_1, "$g_talk_troop"),
			(this_or_next|troop_slot_eq, ":troop", slot_troop_love_interest_2, "$g_talk_troop"),
			(troop_slot_eq, ":troop", slot_troop_love_interest_2, "$g_talk_troop"),
			(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", ":troop"),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(str_store_troop_name, 4, ":troop"),
				(display_message, "str_rival_found_s4_reg0_relation"),
			(try_end),
			(gt, reg0, "$g_talk_troop_relation"),
			(assign, "$romantic_rival", ":troop"),
		(try_end),
		(gt, "$romantic_rival", -1)
	],
	"As you may know, I have been entertaining offers from a number of {nobles/suitors} such as yourself. I am not yet at a stage where I can commit to any of them.", "lady_other_suitor",
	[]],

	[anyone, "lady_marriage_discussion",
	[
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 24),
		(neg|troop_slot_ge, "trp_player", 7, 350)
	],
	"It is good to hear that you are thinking seriously about the future. However, I would like to see you rise a little further in the world before I am ready to commit to marry you.", "lady_proposal_refused",
	[]],

	[anyone, "lady_marriage_discussion",
	[
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 25),
		(lt, "$player_honor", 10)
	],
	"It is good to hear that your intentions are honorable. However, I have resolved only to marry a man of the strongest moral fiber. I would like you to prove yourself more in that regard.", "lady_proposal_refused",
	[]],

	[anyone, "lady_marriage_discussion",
	[
		(lt, "$g_talk_troop_relation", 20)
	],
	"Sir -- it is comforting to hear that your intentions towards me are honorable. But perhaps we should take the time to get to allow our affections for each other to grow a little stronger, before making any such decision.", "lady_proposal_refused",
	[]],

	[anyone, "lady_marriage_discussion",
	[
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(troop_slot_eq, ":var_1", slot_troop_love_interests_end, -1),
		(str_store_troop_name, 4, reg0),
		(call_script, "script_troop_get_family_relation_to_troop", ":var_1", "$g_talk_troop")
	],
	"Oh {playername}, how happy that would make me! But my {s11} {s4} would never allow it... Perhaps it is best that we part...", "lady_betrothed",
	[]],

	[anyone, "lady_marriage_discussion",
	[
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(call_script, "script_troop_get_family_relation_to_troop", ":var_1", "$g_talk_troop"),
		(str_store_troop_name, 4, ":var_1")
	],
	"Oh {playername}, how happy that would make me! Go ask my {s11} {s4} for permission!", "close_window",
	[
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(str_store_troop_name, 12, ":var_1"),
		(str_store_troop_name, 15, "$g_talk_troop"),
		(setup_quest_text, "qst_formal_marriage_proposal"),
		(str_store_string, 2, "str_you_intend_to_ask_s12_for_permission_to_marry_s15"),
		(quest_set_slot, "qst_formal_marriage_proposal", slot_quest_target_troop, ":var_1"),
		(quest_set_slot, "qst_formal_marriage_proposal", slot_quest_expiration_days, 30),
		(quest_set_slot, "qst_formal_marriage_proposal", slot_quest_current_state, 0),
		(call_script, "script_start_quest", "qst_formal_marriage_proposal", "$g_talk_troop"),
		(quest_set_slot, "qst_formal_marriage_proposal", slot_quest_giver_troop, "$g_talk_troop"),
		(call_script, "script_troop_get_family_relation_to_troop", ":var_1", "$g_talk_troop"),
		(str_store_troop_name, 4, ":var_1")
	]],

	[anyone|plyr, "lady_proposal_refused",
	[
		(is_between, "$g_talk_troop_relation", 12, 20),
		(this_or_next|neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 24),
		(troop_slot_ge, "trp_player", 7, 350),
		(this_or_next|neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 25),
		(ge, "$player_honor", 10)
	],
	"Perhaps I can persuade you to delay no further.", "lady_proposal_refused_persuade_check",
	[]],

	[anyone, "lady_proposal_refused_persuade_check",
	[],
	"What do you have to say?", "lady_proposal_refused_persuade_player_response",
	[
		(assign, reg4, 20),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", "trp_player"),
		(assign, ":var_1", reg0),
		(assign, reg5, ":var_1"),
		(assign, reg9, 1),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(store_sub, ":value", 20, ":var_1"),
		(val_mul, ":skill_level_persuasion_player", 2),
		(try_begin),
			(gt, ":value", ":skill_level_persuasion_player"),
			(assign, "$g_persuasion_failure_chance", 100),
		(else_try),
			(store_mul, "$g_persuasion_failure_chance", ":value", 100),
			(val_div, "$g_persuasion_failure_chance", ":skill_level_persuasion_player"),
		(try_end),
		(assign, reg8, "$g_persuasion_failure_chance"),
		(store_sub, reg7, 100, "$g_persuasion_failure_chance"),
		(dialog_box, "str_persuasion_opportunity")
	]],

	[anyone|plyr, "lady_proposal_refused_persuade_player_response",
	[],
	"Love is as a rose, my {reg65?lady:lord}. Left unplucked, it may wither.", "lady_proposal_refused_persuade_result",
	[]],

	[anyone|plyr, "lady_proposal_refused_persuade_player_response",
	[],
	"Oh, never mind.", "lady_pretalk",
	[]],

	[anyone, "lady_proposal_refused_persuade_result",
	[
		(store_random_in_range, ":random_in_range_0_100", 0, 100),
		(lt, ":random_in_range_0_100", "$g_persuasion_failure_chance")
	],
	"Enough! I shall not be rushed into marriage, with you or with anyone else! You have made me very cross. Please, leave me alone for a while. I shall let you know when I am ready to speak to you again.", "close_window",
	[
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", -1),
		(jump_to_menu, "mnu_town"),
		(finish_mission)
	]],

	[anyone, "lady_proposal_refused_persuade_result",
	[
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(troop_slot_eq, ":var_1", slot_troop_love_interests_end, -1),
		(str_store_troop_name, 4, reg0),
		(call_script, "script_troop_get_family_relation_to_troop", ":var_1", "$g_talk_troop")
	],
	"Oh {playername}, I could never allow that to happen! Oh, if only we could be wed! But my {s11} {s4} would never give {reg4?her:his} permission... Perhaps it is best that we part...", "lady_betrothed",
	[
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", 5)
	]],

	[anyone, "lady_proposal_refused_persuade_result",
	[
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(call_script, "script_troop_get_family_relation_to_troop", ":var_1", "$g_talk_troop"),
		(str_store_troop_name, 4, ":var_1")
	],
	"Oh {playername}, I could never allow that to happen! Go ask my {s11} {s4} {reg4?her:his} permission for us to be wed!", "close_window",
	[
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", 5),
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(str_store_troop_name, 12, ":var_1"),
		(str_store_troop_name, 15, "$g_talk_troop"),
		(setup_quest_text, "qst_formal_marriage_proposal"),
		(str_store_string, 2, "str_you_intend_to_ask_s12_for_permission_to_marry_s15"),
		(quest_set_slot, "qst_formal_marriage_proposal", slot_quest_target_troop, ":var_1"),
		(quest_set_slot, "qst_formal_marriage_proposal", slot_quest_expiration_days, 30),
		(quest_set_slot, "qst_formal_marriage_proposal", slot_quest_current_state, 0),
		(call_script, "script_start_quest", "qst_formal_marriage_proposal", "$g_talk_troop"),
		(quest_set_slot, "qst_formal_marriage_proposal", slot_quest_giver_troop, "$g_talk_troop")
	]],

	[anyone|plyr, "lady_proposal_refused",
	[],
	"Very well -- I shall continue to strive to be worthy of your esteem!", "close_window",
	[]],

	[anyone|plyr, "lady_proposal_refused",
	[
		(this_or_next|ge, "$cheat_mode", 1),
		(lt, "$g_disable_condescending_comments", 0),
		(neg|check_quest_active, "qst_formal_marriage_proposal")
	],
	"I am tired of these games! I will speak to your family about arranging a wedding immediately..", "lady_player_threatens_compel",
	[]],

	[anyone, "lady_player_threatens_compel",
	[],
	"What? Do you mean that?", "lady_player_threatens_compel_2",
	[]],

	[anyone|plyr, "lady_player_threatens_compel_2",
	[],
	"No, of couse not. Please forgive my burst of temper", "lady_private_conversation_end",
	[]],

	[anyone|plyr, "lady_player_threatens_compel_2",
	[],
	"Yes -- you clearly do not know what is in your best interests.", "close_window",
	[
		(call_script, "script_get_kingdom_lady_social_determinants", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(str_store_troop_name, 10, "$g_talk_troop"),
		(str_store_troop_name, 12, ":var_1"),
		(setup_quest_text, "qst_formal_marriage_proposal"),
		(str_store_string, 2, "str_you_intend_to_ask_s12_to_pressure_s10_to_marry_you"),
		(quest_set_slot, "qst_formal_marriage_proposal", slot_quest_target_troop, ":var_1"),
		(quest_set_slot, "qst_formal_marriage_proposal", slot_quest_expiration_days, 30),
		(quest_set_slot, "qst_formal_marriage_proposal", slot_quest_current_state, 0),
		(call_script, "script_start_quest", "qst_formal_marriage_proposal", "$g_talk_troop"),
		(quest_set_slot, "qst_formal_marriage_proposal", slot_quest_giver_troop, "$g_talk_troop")
	]],

	[anyone|plyr, "lady_other_suitor",
	[],
	"It grieves me to hear that, my {reg65?lady:lord}, but such things must be", "lady_pretalk",
	[]],

	[anyone|plyr, "lady_other_suitor",
	[],
	"Who is the miscreant! Tell me {his/her} name!", "lady_other_suitor_challenge",
	[]],

	[anyone|plyr, "lady_other_suitor",
	[
		(lt, "$g_disable_condescending_comments", 0)
	],
	"I am tired of these games! I will demand that your family compel you to marry me..", "lady_player_threatens_compel",
	[]],

	[anyone, "lady_other_suitor_challenge",
	[
		(check_quest_active, "qst_duel_courtship_rival"),
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", "$romantic_rival"),
		(lt, reg0, 0),
		(call_script, "script_dplmc_store_troop_is_female", "$romantic_rival")
	],
	"I would be so grateful! But from what I understand, you already have a duel on your hands. {reg0?She:He} is not honor-bound to fight you, if you are committed to another combat. Please, conclude your other business in a hurry, to rescue me from that {reg0?woman:man}'s attentions!.", "lady_pretalk",
	[]],

	[anyone, "lady_other_suitor_challenge",
	[
		(check_quest_active, "qst_duel_courtship_rival"),
		(assign, reg0, 1),
		(try_begin),
			(eq, reg65, "$character_gender"),
			(assign, reg0, 0),
		(try_end)
	],
	"Ah! Such talk. But from what I hear, you already have a duel on your hands. Finish one before you start another! Sigh... {reg0?You {men/women}:People} can be so silly...", "lady_pretalk",
	[]],

	[anyone, "lady_other_suitor_challenge",
	[
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", "$romantic_rival"),
		(lt, reg0, 0),
		(str_store_troop_name, 5, "$romantic_rival"),
		(call_script, "script_dplmc_store_troop_is_female", "$romantic_rival")
	],
	"It is {s5}. Please, rescue me from that {reg0?woman:man}'s attentions!", "lady_other_suitor_challenge_confirm",
	[]],

	[anyone, "lady_other_suitor_challenge",
	[
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 24),
		(str_store_troop_name, 5, "$romantic_rival")
	],
	"Will you now? This should be interesting. Very well. Your rival is {s5}. Let us see which of you has the greater mettle.", "lady_other_suitor_challenge_confirm",
	[
		(assign, "$quarrel_penalty", 0)
	]],

	[anyone, "lady_other_suitor_challenge",
	[
		(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 21),
		(str_store_troop_name, 5, "$romantic_rival")
	],
	"Oh, fie! I wish that this were not a matter of honor, so I could refuse such a request. But alas, I feel compelled to tell you that your rival is {s5}. I wish that heaven had not granted me such a fair visage, so that I would not inspire such passions in {men/women}!", "lady_other_suitor_challenge_confirm",
	[
		(assign, "$quarrel_penalty", -1)
	]],

	[anyone, "lady_other_suitor_challenge",
	[
		(str_store_troop_name, 5, "$romantic_rival")
	],
	"I will have none of such talk! It is nonsense for you and {s5} to fight over -- whoops! I beg of you, forget the name that just escaped my lips...", "lady_other_suitor_challenge_confirm",
	[
		(assign, "$quarrel_penalty", -3)
	]],

	[anyone|plyr, "lady_other_suitor_challenge_confirm",
	[
		(call_script, "script_dplmc_store_troop_is_female", "$romantic_rival")
	],
	"So be it! I shall challenge {reg0?her:him} to a trial of arms!", "lady_other_suitor_challenge_confirm_yes",
	[]],

	[anyone|plyr, "lady_other_suitor_challenge_confirm",
	[],
	"On second thought, I let my passions run away with me there. Never mind.", "lady_other_suitor_challenge_confirm_no",
	[]],

	[anyone, "lady_other_suitor_challenge_confirm_yes",
	[
		(try_begin),
			(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", "$romantic_rival"),
			(lt, reg0, 0),
			(str_store_string, 15, "str_do_be_careful_i_am_so_much_endebted_to_you_for_this"),
		(else_try),
			(troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 24),
			(str_store_string, 15, "str_go_then__we_shall_see_which_of_you_triumphs"),
		(else_try),
			(str_store_string, 15, "str_sigh_i_will_never_truly_understand_men_and_their_rash_actions"),
		(try_end)
	],
	"{s15}", "lady_pretalk",
	[
		(call_script, "script_troop_change_relation_with_troop", "trp_player", "$g_talk_troop", "$quarrel_penalty"),
		(str_store_troop_name, 11, "$g_talk_troop"),
		(str_store_troop_name_link, 13, "$romantic_rival"),
		(setup_quest_text, "qst_duel_courtship_rival"),
		(call_script, "script_dplmc_store_troop_is_female_reg", "$romantic_rival", 4),
		(str_store_string, 2, "str_you_intend_to_challenge_s13_to_force_him_to_relinquish_his_suit_of_s11"),
		(call_script, "script_start_quest", "qst_duel_courtship_rival", "$g_talk_troop"),
		(quest_set_slot, "qst_duel_courtship_rival", slot_quest_target_troop, "$romantic_rival"),
		(quest_set_slot, "qst_duel_courtship_rival", slot_quest_xp_reward, 400),
		(quest_set_slot, "qst_duel_courtship_rival", slot_quest_expiration_days, 60),
		(quest_set_slot, "qst_duel_courtship_rival", slot_quest_current_state, 0)
	]],

	[anyone, "lady_other_suitor_challenge_confirm_no",
	[],
	"Good. You are wise not to let your temper guide you.", "lady_private_conversation_end",
	[]],

	[anyone|plyr, "lady_talk",
	[
		(troop_slot_ge, "$g_talk_troop", 30, 0),
		(store_partner_quest, ":partner_quest"),
		(lt, ":partner_quest", 0)
	],
	"Is there anything I can do to win your favour?", "lady_ask_for_quest",
	[
		(call_script, "script_get_quest", "$g_talk_troop"),
		(assign, "$random_quest_no", reg0)
	]],

	[anyone, "lady_ask_for_quest",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	],
	"I don't have anything else for you to do right now.", "lady_pretalk",
	[]],

	[anyone, "lady_ask_for_quest",
	[
		(this_or_next|eq, "$random_quest_no", "qst_rescue_lord_by_replace"),
		(eq, "$random_quest_no", "qst_rescue_prisoner"),
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(call_script, "script_troop_get_family_relation_to_troop", ":random_quest_no_target_troop", "$g_talk_troop"),
		(str_store_string, 17, 11),
		(call_script, "script_dplmc_store_troop_is_female", ":random_quest_no_target_troop")
	],
	"Oh, I fear I may never see my {s17}, {s13}, again... {s13} is a prisoner in the dungeon of {s14}. We have tried to negotiate a ransom, but it has been set too high. We can never hope to raise that much money without selling everything we own. Instead I came up with a plan to get {s13} out of there, but it requires someone to make a great sacrifice, and so far my pleas have fallen on deaf ears...", "lady_mission_told",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(call_script, "script_troop_get_family_relation_to_troop", ":random_quest_no_target_troop", "$g_talk_troop"),
		(str_store_string, 17, 11),
		(str_store_troop_name, 11, "$g_talk_troop"),
		(str_store_troop_name_link, 13, ":random_quest_no_target_troop"),
		(str_store_party_name_link, 14, ":random_quest_no_target_center"),
		(setup_quest_text, "$random_quest_no"),
		(try_begin),
			(eq, "$random_quest_no", "qst_rescue_lord_by_replace"),
			(str_store_string, 2, "@{s11} asked you to rescue {his/her} {s17}, {s13}, from {s14} by switching clothes and taking {his/her} place in prison."),
		(else_try),
			(str_store_string, 2, "@{s11} asked you to rescue {his/her} {s17}, {s13}, from {s14}."),
		(try_end)
	]],

	[anyone, "lady_ask_for_quest",
	[
		(eq, "$random_quest_no", "qst_deliver_message_to_prisoner_lord"),
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(call_script, "script_troop_get_family_relation_to_troop", ":random_quest_no_target_troop", "$g_talk_troop")
	],
	"My poor {s11}, {s13}, is a prisoner in the {s14} dungeons. The only way we can talk to each other is by exchanging letters whenever we can, but the journey is so dangerous that we get little chance to do so. Please, would you deliver one for me?", "lady_mission_told",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(str_store_troop_name, 11, "$g_talk_troop"),
		(str_store_troop_name_link, 13, ":random_quest_no_target_troop"),
		(str_store_party_name_link, 14, ":random_quest_no_target_center"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@{s11} asked you to deliver a message to {s13}, who is imprisoned at {s14}.")
	]],

	[anyone, "lady_ask_for_quest",
	[
		(eq, "$random_quest_no", "qst_duel_for_lady")
	],
	"Dear {playername}, you are kind to ask, but you know little of my troubles and I can't possibly ask you to throw yourself into danger on my behalf.", "lady_quest_duel_for_lady",
	[]],

	[anyone|plyr, "lady_quest_duel_for_lady",
	[],
	"Tell me what the problem is, and I can make my own decision.", "lady_quest_duel_for_lady_2",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(str_store_troop_name, 11, "$g_talk_troop"),
		(str_store_troop_name_link, 13, ":random_quest_no_target_troop"),
		(str_store_string, 2, "@You agreed to challenge {s13} to defend {s11}'s honour."),
		(setup_quest_text, "$random_quest_no")
	]],

	[anyone, "lady_quest_duel_for_lady_2",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":random_quest_no_target_troop"),
		(store_sub, reg1, 1, reg65),
		(try_begin),
			(troop_slot_ge, "$g_talk_troop", 30, 0),
			(troop_get_slot, ":g_talk_troop_spouse", "$g_talk_troop", slot_troop_spouse),
			(assign, reg1, 0),
			(call_script, "script_cf_dplmc_troop_is_female", ":g_talk_troop_spouse"),
			(assign, reg1, 1),
		(try_end)
	],
	"Very well, as you wish it... My {reg1?wife:husband} has made certain enemies in {reg1?her:his} life, {playername}. One of the most insidious is {s13}. {reg0?She:He} is going around making terrible accusations against me, impugning my honour at every turn! Because {reg0?she:he} cannot harm my {reg1?wife:husband} directly, {reg0?she:he} is using me as a target to try and stain our name. You should hear the awful things {reg0?she:he}'s said! I only wish there was someone brave enough to make {reg0?her:him} recant {reg0?her:his} slander, but {s13} is a very fine swordsman, and {reg0?she:he}'s widely feared...", "lady_quest_duel_for_lady_3",
	[]],

	[anyone|plyr, "lady_quest_duel_for_lady_3",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":random_quest_no_target_troop")
	],
	"I fear {reg0?her:him} not, {s65}. I will make {reg0?her:him} take back {reg0?her:his} lies.", "lady_quest_duel_for_lady_3_accepted",
	[]],

	[anyone, "lady_quest_duel_for_lady_3_accepted",
	[],
	"Oh! I can't ask that of you, {playername}, but... I would be forever indebted to you, and you are so sure. It would mean so much if you would defend my honour. Thank you a thousand times, all my prayers and my favour go with you.", "close_window",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(call_script, "script_report_quest_troop_positions", "$random_quest_no", ":random_quest_no_target_troop", 3),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 3)
	]],

	[anyone|plyr, "lady_quest_duel_for_lady_3",
	[
		(quest_get_slot, ":random_quest_no_target_troop", "$random_quest_no", slot_quest_target_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":random_quest_no_target_troop")
	],
	"If {reg0?she:he}'s that dangerous, perhaps maybe it would be better to ignore {reg0?her:him}...", "lady_quest_duel_for_lady_3_rejected",
	[]],

	[anyone, "lady_quest_duel_for_lady_3_rejected",
	[],
	"Oh... Perhaps you're right, {playername}. I should let go of these silly childhood ideas of chivalry and courage. {Men/People} are not like that, not anymore. Good day to you.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -1)
	]],

	[anyone, "lady_ask_for_quest",
	[],
	"No, {playername}, I've no need for a champion right now.", "lady_pretalk",
	[]],

	[anyone|plyr, "lady_mission_told",
	[],
	"As you wish it, {s65}, it shall be done.", "lady_mission_accepted",
	[]],

	[anyone|plyr, "lady_mission_told",
	[],
	"{s66}, I fear I cannot help you right now.", "lady_mission_rejected",
	[]],

	[anyone, "lady_mission_accepted",
	[],
	"You are a true {gentleman/lady}, {playername}. Thank you so much for helping me", "close_window",
	[
		(try_begin),
			(eq, "$random_quest_no", "qst_deliver_message_to_prisoner_lord"),
			(call_script, "script_troop_add_gold", "trp_player", 10),
		(try_end),
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop")
	]],

	[anyone, "lady_mission_rejected",
	[],
	"You'll not help a {reg65?woman:young lad} in need? You should be ashamed, {playername}... Please leave me, I have some important embroidery to catch up.", "close_window",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -1),
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone|plyr, "lady_talk",
	[
		(troop_slot_ge, "$g_talk_troop", 30, 0)
	],
	"I want to improve my relation with a lord. Can you help me?", "lady_restore_relation",
	[]],

	[anyone, "lady_restore_relation",
	[
		(le, "$g_talk_troop_relation", 0)
	],
	"{playername}, I don't know you well enough to act on your behalf. I am sorry.", "lady_pretalk",
	[]],

	[anyone, "lady_restore_relation",
	[],
	"Hmm. I guess you got on the wrong side of somebody. Very well, who do you want to restore your relation with?", "lady_restore_relation_2",
	[]],

	[anyone|repeat_for_troops|plyr, "lady_restore_relation_2",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "trp_npc1", "trp_knight_1_1_wife"),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(eq, "$g_talk_troop_faction", ":faction_of_troop_repeat_object"),
		(call_script, "script_troop_get_player_relation", ":repeat_object"),
		(lt, reg0, 0),
		(str_store_troop_name, 1, ":repeat_object"),
		(call_script, "script_troop_get_family_relation_to_troop", ":repeat_object", "$g_talk_troop"),
		(try_begin),
			(ge, reg0, 1),
			(str_store_string, 10, 1),
			(str_store_string, 1, "str_dplmc_your_s11_s10"),
		(try_end)
	],
	"{s1}", "lady_restore_relation_2b",
	[
		(store_repeat_object, "$troop_to_restore_relations_with")
	]],

	[anyone|plyr, "lady_restore_relation_2",
	[],
	"Never mind. I get along with everyone well enough.", "lady_pretalk",
	[]],

	[anyone, "lady_restore_relation_2b",
	[
		(str_store_troop_name, 10, "$troop_to_restore_relations_with")
	],
	"Well I can try to help you there. I am sure a few expensive gifts will make {s10} look at you more favorably.", "lady_restore_relation_3",
	[]],

	[anyone, "lady_restore_relation_3",
	[
		(str_store_troop_name, 10, "$troop_to_restore_relations_with"),
		(assign, "$lady_restore_cost_1", 1000),
		(assign, "$lady_restore_cost_2", 2000),
		(assign, "$lady_restore_cost_3", 3000),
		(call_script, "script_troop_get_family_relation_to_troop", "$troop_to_restore_relations_with", "$g_talk_troop"),
		(try_begin),
			(ge, reg0, 10),
			(assign, "$lady_restore_cost_1", 750),
			(assign, "$lady_restore_cost_2", 1500),
			(assign, "$lady_restore_cost_3", 2250),
			(str_store_string, 10, 11),
		(else_try),
			(ge, reg0, 1),
			(assign, "$lady_restore_cost_1", 900),
			(assign, "$lady_restore_cost_2", 1800),
			(assign, "$lady_restore_cost_3", 2700),
			(str_store_string, 10, 11),
		(try_end),
		(assign, reg10, "$lady_restore_cost_1"),
		(assign, reg11, "$lady_restore_cost_2"),
		(assign, reg12, "$lady_restore_cost_3")
	],
	"You can improve your relation with {s10} by sending {reg4?her:him} a gift worth {reg10} coins. But if you can afford spending {reg11} coins on the gift, it would make a good impression on {reg4?her:him}. And if you can go up to {reg12} coins, that would really help smooth things out.", "lady_restore_relation_4",
	[]],

	[anyone|plyr, "lady_restore_relation_4",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", "$lady_restore_cost_1"),
		(assign, reg10, "$lady_restore_cost_1")
	],
	"I think a gift of {reg10} coins will do.", "lady_restore_relation_5",
	[
		(assign, "$temp", 1),
		(assign, "$temp_2", "$lady_restore_cost_1")
	]],

	[anyone|plyr, "lady_restore_relation_4",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", "$lady_restore_cost_2"),
		(assign, reg11, "$lady_restore_cost_2")
	],
	"Maybe I can afford {reg11} coins.", "lady_restore_relation_5",
	[
		(assign, "$temp", 2),
		(assign, "$temp_2", "$lady_restore_cost_2")
	]],

	[anyone|plyr, "lady_restore_relation_4",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", "$lady_restore_cost_3"),
		(assign, reg12, "$lady_restore_cost_3")
	],
	"In that case, I am ready to spend {reg12} coins.", "lady_restore_relation_5",
	[
		(assign, "$temp", 3),
		(assign, "$temp_2", "$lady_restore_cost_3")
	]],

	[anyone|plyr, "lady_restore_relation_4",
	[],
	"I don't think I can afford a gift at the moment.", "lady_restore_relation_cant_afford",
	[]],

	[anyone, "lady_restore_relation_5",
	[],
	"Excellent. Then I'll choose an appropriate gift for you and send it to {s10} with your compliments. I am sure {reg4?she:he} will appreciate the gesture.", "lady_restore_relation_6",
	[
		(troop_remove_gold, "trp_player", "$temp_2"),
		(call_script, "script_change_player_relation_with_troop", "$troop_to_restore_relations_with", "$temp"),
		(call_script, "script_dplmc_store_troop_is_female_reg", "$troop_to_restore_relations_with", 4)
	]],

	[anyone|plyr, "lady_restore_relation_6",
	[],
	"Thank you for your help, my lady.", "lady_pretalk",
	[]],

	[anyone, "lady_restore_relation_cant_afford",
	[],
	"I am afraid, I can't be of much help in that case, {playername}. I am sorry.", "lady_pretalk",
	[]],

	[anyone|plyr, "lady_talk",
	[],
	"I must beg my leave.", "lady_leave",
	[]],

	[anyone|auto_proceed, "lady_leave",
	[
		(call_script, "script_troop_get_relation_with_troop", "$g_talk_troop", "trp_player"),
		(try_begin),
			(lt, reg0, 0),
			(str_store_string, 12, "str_farewell"),
		(else_try),
			(str_store_string, 12, "str_farewell_playername"),
		(try_end)
	],
	"{s12}", "close_window",
	[
		(eq, "$talk_context", 2),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "convince_begin",
	[],
	"I still don't see why I should accept what you're asking of me.", "convince_options",
	[
		(quest_get_slot, "$convince_value", "$g_convince_quest", slot_quest_convince_value)
	]],

	[anyone|plyr, "convince_options",
	[
		(assign, reg8, "$convince_value")
	],
	"Then I'll make it worth your while. ({reg8} coins)", "convince_bribe",
	[]],

	[anyone|plyr, "convince_options",
	[
		(store_div, "$convince_relation_penalty", "$convince_value", 300),
		(val_add, "$convince_relation_penalty", 1),
		(assign, reg9, "$convince_relation_penalty")
	],
	"Please, do it for the sake of our friendship. (-{reg9} to relation)", "convince_friendship",
	[]],

	[anyone|plyr, "convince_options",
	[],
	"Let me try and convince you. (Persuasion)", "convince_persuade_begin",
	[]],

	[anyone|plyr, "convince_options",
	[],
	"Never mind.", "lord_pretalk",
	[]],

	[anyone, "convince_bribe",
	[],
	"Mmm, a generous gift to my coffers would certainly help matters... {reg8} coins should do it. If you agree, then I'll go with your suggestion.", "convince_bribe_verify",
	[]],

	[anyone|plyr, "convince_bribe_verify",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(lt, ":troop_gold_player", "$convince_value")
	],
	"I'm afraid my finances will not allow for such a gift.", "convince_bribe_cant_afford",
	[]],

	[anyone|plyr, "convince_bribe_verify",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", "$convince_value")
	],
	"Very well, please accept these {reg8} coins as a token of my gratitude.", "convince_bribe_goon",
	[]],

	[anyone|plyr, "convince_bribe_verify",
	[],
	"Let me think about this some more.", "convince_begin",
	[]],

	[anyone, "convince_bribe_cant_afford",
	[],
	"Ah. In that case, there is little I can do, unless you have some further argument to make.", "convince_options",
	[]],

	[anyone, "convince_bribe_goon",
	[],
	"My dear {playername}, your generous gift has led me to reconsider what you ask, and I have come to appreciate the wisdom of your proposal.", "convince_accept",
	[
		(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", "$convince_value", "$g_talk_troop"),
		(troop_remove_gold, "trp_player", "$convince_value")
	]],

	[anyone, "convince_friendship",
	[
		(store_add, ":value", 5, "$convince_relation_penalty"),
		(ge, "$g_talk_troop_effective_relation", ":value")
	],
	"You've done well by me in the past, {playername}, and for that I will go along with your request, but know that I do not like you using our relationship this way.", "convince_friendship_verify",
	[]],

	[anyone|plyr, "convince_friendship_verify",
	[],
	"I am sorry, my friend, but I need your help in this.", "convince_friendship_go_on",
	[]],

	[anyone|plyr, "convince_friendship_verify",
	[],
	"If it will not please you, then I'll try something else.", "lord_pretalk",
	[]],

	[anyone, "convince_friendship_go_on",
	[],
	"All right then, {playername}, I will accept this for your sake. But remember, you owe me for this.", "convince_accept",
	[
		(store_sub, ":value", 0, "$convince_relation_penalty"),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", ":value")
	]],

	[anyone, "convince_friendship",
	[
		(ge, "$g_talk_troop_relation", -5)
	],
	"I don't think I owe you such a favor {playername}. I see no reason to accept this for you.", "lord_pretalk",
	[]],

	[anyone, "convince_friendship",
	[],
	"Is this a joke? You've some nerve asking me for favours, {playername}, and let me assure you you'll get none.", "lord_pretalk",
	[]],

	[anyone, "convince_persuade_begin",
	[
		(troop_get_slot, ":g_talk_troop_last_persuasion_time", "$g_talk_troop", slot_troop_last_persuasion_time),
		(store_current_hours, ":current_hours"),
		(store_add, ":value", ":g_talk_troop_last_persuasion_time", 24),
		(gt, ":current_hours", ":value")
	],
	"Very well. Make your case.", "convince_persuade_begin_2",
	[]],

	[anyone|plyr, "convince_persuade_begin_2",
	[],
	"[Attempt to persuade]", "convince_persuade",
	[
		(try_begin),
			(store_random_in_range, ":random_in_range_0_100", 0, 100),
			(lt, ":random_in_range_0_100", 30),
			(store_current_hours, ":current_hours"),
			(troop_set_slot, "$g_talk_troop", slot_troop_last_persuasion_time, ":current_hours"),
		(try_end),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(store_add, ":value", ":skill_level_persuasion_player", 5),
		(store_random_in_range, ":random_in_range_0_value", 0, ":value"),
		(store_random_in_range, ":random_in_range_0_value_2", 0, ":value"),
		(store_add, ":random_in_range_0_100", ":random_in_range_0_value", ":random_in_range_0_value_2"),
		(assign, ":value_2", "$convince_value"),
		(convert_to_fixed_point, ":value_2"),
		(store_sqrt, ":value_2", ":value_2"),
		(convert_from_fixed_point, ":value_2"),
		(val_div, ":value_2", 10),
		(val_add, ":value_2", 4),
		(store_sub, "$persuasion_strength", ":random_in_range_0_100", ":value_2"),
		(val_mul, "$persuasion_strength", 20),
		(assign, reg5, "$persuasion_strength"),
		(val_sub, "$convince_value", "$persuasion_strength"),
		(quest_set_slot, "$g_convince_quest", slot_quest_convince_value, "$convince_value"),
		(str_store_troop_name, 50, "$g_talk_troop"),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$g_talk_troop"),
			(assign, reg51, 1),
			(assign, reg65, 1),
		(else_try),
			(assign, reg51, 0),
			(assign, reg65, 0),
		(try_end),
		(try_begin),
			(lt, "$persuasion_strength", -30),
			(str_store_string, 5, "str_persuasion_summary_very_bad"),
		(else_try),
			(lt, "$persuasion_strength", -10),
			(str_store_string, 5, "str_persuasion_summary_bad"),
		(else_try),
			(lt, "$persuasion_strength", 10),
			(str_store_string, 5, "str_persuasion_summary_average"),
		(else_try),
			(lt, "$persuasion_strength", 30),
			(str_store_string, 5, "str_persuasion_summary_good"),
		(else_try),
			(str_store_string, 5, "str_persuasion_summary_very_good"),
		(try_end),
		(dialog_box, "@{s5} (Persuasion strength: {reg5})", "@Persuasion Attempt")
	]],

	[anyone|plyr, "convince_persuade_begin_2",
	[],
	"Wait, perhaps there is another way to convince you.", "convince_begin",
	[]],

	[anyone, "convince_persuade_begin",
	[],
	"By God's grace, {playername}! Haven't we talked enough already? I am tired of listening to you, and I do not want to hear any more of it right now.", "lord_pretalk",
	[]],

	[anyone, "convince_persuade",
	[
		(le, "$convince_value", 0)
	],
	"All right, all right. You have persuaded me to it. I'll go ahead with what you suggest.", "convince_accept",
	[]],

	[anyone, "convince_persuade",
	[
		(gt, "$persuasion_strength", 5)
	],
	"You've a point, {playername}, I'll admit that much. However I am not yet convinced I should do as you bid.", "convince_options",
	[]],

	[anyone, "convince_persuade",
	[
		(gt, "$persuasion_strength", -5)
	],
	"Enough, {playername}. You've a lot of arguments, but I find none of them truly convincing. I stand by what I said before.", "convince_options",
	[]],

	[anyone, "convince_persuade",
	[],
	"Truthfully, {playername}, I fail to see the virtue of your reasoning. What you ask for makes even less sense now than it did before.", "convince_options",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 7),
		(eq, "$talk_context", 12),
		(str_store_party_name, 1, "$g_encountered_party")
	],
	"I must congratulate you on your victory, my {lord/lady}. Welcome to {s1}. We, the housekeepers of this castle, are at your service.", "siege_won_seneschal_1",
	[]],

	[anyone|plyr, "siege_won_seneschal_1",
	[],
	"Are you the seneschal?", "siege_won_seneschal_2",
	[]],

	[anyone, "siege_won_seneschal_2",
	[],
	"Indeed I am, my {lord/lady}. I have always served the masters of {s1} to the best of my ability, whichever side they might be on. Thus you may count on my utmost loyalty for as long as you are the {lord/lady} of this place. Now, do you intend to keep me on as the seneschal? I promise you will not be disappointed.", "siege_won_seneschal_3",
	[]],

	[anyone|plyr, "siege_won_seneschal_3",
	[],
	"Very well, you may keep your post for the time being.", "siege_won_seneschal_4",
	[]],

	[anyone|plyr, "siege_won_seneschal_3",
	[],
	"You can stay, but I shall be keeping a close watch on you.", "siege_won_seneschal_4",
	[]],

	[anyone, "siege_won_seneschal_4",
	[],
	"Thank you, my {lord/lady}. If you do not mind my impudence, may I inquire as to what you wish to do with the castle?", "siege_won_seneschal_5",
	[]],

	[anyone|plyr, "siege_won_seneschal_5",
	[],
	"I will sell it to another lord.", "siege_won_seneschal_6",
	[]],

	[anyone|plyr, "siege_won_seneschal_5",
	[],
	"I intend to claim it for myself.", "siege_won_seneschal_6",
	[]],

	[anyone|plyr, "siege_won_seneschal_5",
	[],
	"I haven't given it much thought. What are my options?", "siege_won_seneschal_list_options",
	[]],

	[anyone, "siege_won_seneschal_list_options",
	[],
	"According to our laws and traditions, you can do one of several things. First, you could station a garrison here to protect the castle from any immediate counterattacks, then request an audience with some wealthy lord and ask him to make you an offer. It would be worth a tidy sum, believe you me. If you do not wish to sell, then you will have to find yourself a liege lord and protector who would accept homage from you. Without a royal investiture and an army at your back, you would have a difficult time holding on to the castle. Both you and {s1} would become great big targets for any man with a few soldiers and a scrap of ambition. ", "siege_won_seneschal_list_options_2",
	[]],

	[anyone|plyr, "siege_won_seneschal_list_options_2",
	[],
	"What do you mean, a liege lord and protector? I won this place by my own hand, I don't need anyone else!", "siege_won_seneschal_list_options_3",
	[]],

	[anyone, "siege_won_seneschal_list_options_3",
	[],
	"Of course you don't, my {lord/lady}. However, no lord in the land will recognize your claim to the castle unless it is verified by royal decree. They would call {s1} an outlaw stronghold and take it from you at the earliest opportunity. Surely not even you could stand against a whole army.", "siege_won_seneschal_list_options_4",
	[]],

	[anyone|plyr, "siege_won_seneschal_list_options_4",
	[],
	"Hmm. I'll give it some thought.", "siege_won_seneschal_6",
	[]],

	[anyone, "siege_won_seneschal_6",
	[],
	"I am very pleased to hear it, my {lord/lady}. I am only trying to serve you to the best of my ability. Now, if at any time you find you have further need of me, I will be in the great hall arranging a smooth handover of the castle to your forces. ", "close_window",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 7),
		(eq, "$g_talk_troop_met", 0),
		(str_store_party_name, 1, "$g_encountered_party")
	],
	"Good day. I do not believe I've seen you here before. Let me extend my welcome to you as the seneschal of {s1}.", "seneschal_intro_1",
	[]],

	[anyone|plyr, "seneschal_intro_1",
	[],
	"A pleasure to meet you, {s65}.", "seneschal_intro_1a",
	[]],

	[anyone, "seneschal_intro_1a",
	[],
	"How can I help you?", "seneschal_talk",
	[]],

	[anyone|plyr, "seneschal_intro_1",
	[],
	"What exactly do you do here?", "seneschal_intro_1b",
	[]],

	[anyone, "seneschal_intro_1b",
	[],
	"Ah, a seneschal's duties are many, good {my lord/woman}. For example, I collect the rents from my lord's estates, I manage the castle's storerooms, I deal with the local peasantry, I take care of castle staff, I arrange supplies for the garrison... All mundane matters on this fief are my responsibility, on behalf of my lord. Everything except commanding the soldiers themselves.", "seneschal_talk",
	[]],

	[anyone, "start",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 7)
	],
	"Good day.", "seneschal_talk",
	[]],

	[anyone, "seneschal_pretalk",
	[],
	"Anything else?", "seneschal_talk",
	[]],

	[anyone|plyr, "seneschal_talk",
	[
		(store_relation, ":relation_player_supporters_faction_g_encountered_party_faction", "fac_player_supporters_faction", "$g_encountered_party_faction"),
		(ge, ":relation_player_supporters_faction_g_encountered_party_faction", 0)
	],
	"I would like to ask you a question...", "seneschal_ask_something",
	[]],

	[anyone|plyr, "seneschal_talk",
	[
		(store_relation, ":relation_player_supporters_faction_g_encountered_party_faction", "fac_player_supporters_faction", "$g_encountered_party_faction"),
		(ge, ":relation_player_supporters_faction_g_encountered_party_faction", 0)
	],
	"I wish to know more about someone...", "seneschal_ask_about_someone",
	[]],

	[anyone, "seneschal_ask_about_someone",
	[],
	"Perhaps I may be able to help. Whom did you have in mind?", "seneschal_ask_about_someone_2",
	[]],

	[anyone|plyr, "seneschal_ask_about_someone_2",
	[],
	"Never mind.", "seneschal_pretalk",
	[]],

	[anyone|plyr, "seneschal_talk",
	[],
	"I must take my leave of you now. Farewell.", "close_window",
	[]],

	[anyone, "seneschal_ask_something",
	[],
	"I'll do what I can to help, of course. What did you wish to ask?", "seneschal_ask_something_2",
	[]],

	[anyone|plyr, "seneschal_ask_something_2",
	[],
	"Perhaps you know where to find someone...", "seneschal_ask_location",
	[]],

	[anyone, "seneschal_ask_location",
	[],
	"Well, a man in my position does hear a lot of things. Of whom were you thinking?", "seneschal_ask_location_2",
	[]],

	[anyone|repeat_for_troops|plyr, "seneschal_ask_location_2",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "trp_npc1", "trp_heroes_end"),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(eq, "$g_encountered_party_faction", ":faction_of_troop_repeat_object"),
		(str_store_troop_name, 1, ":repeat_object")
	],
	"{s1}", "seneschal_ask_location_3",
	[
		(store_repeat_object, "$hero_requested_to_learn_location")
	]],

	[anyone|plyr, "seneschal_ask_location_2",
	[],
	"Never mind.", "seneschal_pretalk",
	[]],

	[anyone, "seneschal_ask_location_3",
	[
		(call_script, "script_get_information_about_troops_position", "$hero_requested_to_learn_location", 0)
	],
	"{s1}", "seneschal_pretalk",
	[]],

	[anyone, "start",
	[
		(eq, "$caravan_escort_state", 1),
		(eq, "$g_encountered_party", "$caravan_escort_party_id"),
		(le, "$talk_context", 2),
		(store_distance_to_party_from_party, reg0, "$caravan_escort_destination_town", "$caravan_escort_party_id"),
		(lt, reg0, 5),
		(str_store_party_name, 3, "$caravan_escort_destination_town"),
		(assign, reg3, "$caravan_escort_agreed_reward")
	],
	"There! I can see the walls of {s3} in the distance. We've made it safely. Here, take this purse of {reg3} coins, as I promised. I hope we can travel together again someday.", "close_window",
	[
		(assign, "$caravan_escort_state", 0),
		(call_script, "script_troop_add_gold", "trp_player", "$caravan_escort_agreed_reward"),
		(assign, reg4, "$caravan_escort_agreed_reward"),
		(val_mul, reg4, 1),
		(add_xp_as_reward, reg4),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(eq, "$caravan_escort_state", 1),
		(eq, "$g_encountered_party", "$caravan_escort_party_id"),
		(eq, "$talk_context", 2)
	],
	"We've made it this far... Is everything clear up ahead?", "talk_caravan_escort",
	[]],

	[anyone|plyr, "talk_caravan_escort",
	[],
	"There might be bandits nearby. Stay close.", "talk_caravan_escort_2a",
	[]],

	[anyone, "talk_caravan_escort_2a",
	[],
	"Trust me, {playername}, we're already staying as close to you as we can. Lead the way.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "talk_caravan_escort",
	[],
	"No sign of trouble, we can breathe easy.", "talk_caravan_escort_2b",
	[]],

	[anyone, "talk_caravan_escort_2b",
	[],
	"I'll breathe easy when we reach {s1} and not a moment sooner. Let's keep moving.", "close_window",
	[
		(str_store_party_name, 1, "$caravan_escort_destination_town"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 2),
		(eq, "$g_encountered_party_type", 11),
		(party_slot_ge, "$g_encountered_party", 52, "$g_current_hours")
	],
	"What do you want? We paid our toll to you less than three days ago.", "merchant_talk",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 2),
		(this_or_next|eq, "$g_encountered_party_type", 14),
		(eq, "$g_encountered_party_type", 11),
		(ge, "$g_encountered_party_relation", 0)
	],
	"Hail, friend.", "merchant_talk",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 2),
		(eq, "$g_encountered_party_type", 11),
		(lt, "$g_encountered_party_relation", 0),
		(eq, "$g_encountered_party_faction", "fac_merchants")
	],
	"What do you want? We are but simple merchants, we've no quarrel with you, so leave us alone.", "merchant_talk",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 2),
		(eq, "$g_encountered_party_type", 11),
		(lt, "$g_encountered_party_relation", 0),
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(str_store_troop_name, 9, ":g_encountered_party_faction_leader")
	],
	"Be warned, knave! This caravan is under the protection of {s9}. Step out of our way or you will face his fury!", "merchant_talk",
	[]],

	[anyone, "start",
	[
		(party_slot_eq, "$g_encountered_party", slot_party_type, 11),
		(this_or_next|eq, "$talk_context", 2),
		(eq, "$talk_context", 0)
	],
	"Yes? What do you want?", "merchant_talk",
	[]],

	[anyone, "merchant_pretalk",
	[],
	"Anything else?", "merchant_talk",
	[]],

	[anyone|plyr, "merchant_talk",
	[
		(le, "$talk_context", 2),
		(check_quest_active, "qst_cause_provocation"),
		(neg|check_quest_concluded, "qst_cause_provocation"),
		(quest_slot_eq, "qst_cause_provocation", slot_quest_target_faction, "$g_encountered_party_faction"),
		(quest_get_slot, ":cause_provocation_giver_troop", "qst_cause_provocation", slot_quest_giver_troop),
		(store_faction_of_troop, ":faction_of_troop_cause_provocation_giver_troop", ":cause_provocation_giver_troop"),
		(str_store_faction_name, 17, ":faction_of_troop_cause_provocation_giver_troop")
	],
	"You are trespassing in the territory of the {s17}. I am confiscating this caravan and all its goods!", "caravan_start_war_quest_1",
	[]],

	[anyone, "caravan_start_war_quest_1",
	[
		(quest_get_slot, ":cause_provocation_giver_troop", "qst_cause_provocation", slot_quest_giver_troop),
		(store_faction_of_troop, ":faction_of_troop_cause_provocation_giver_troop", ":cause_provocation_giver_troop"),
		(str_store_faction_name, 17, ":faction_of_troop_cause_provocation_giver_troop")
	],
	"What? What nonsense is this? We are at peace with the {s17}, and are free to cross its lands!", "caravan_start_war_quest_2",
	[]],

	[anyone|plyr, "caravan_start_war_quest_2",
	[],
	"We'll see about that! Defend yourselves!", "merchant_attack",
	[]],

	[anyone|plyr, "caravan_start_war_quest_2",
	[],
	"Hmm. Maybe this was all a misunderstanding. Farewell.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "merchant_talk",
	[
		(le, "$talk_context", 2),
		(eq, "$g_encountered_party_faction", "$players_kingdom")
	],
	"I have an offer for you.", "merchant_talk_offer",
	[]],

	[anyone, "merchant_talk_offer",
	[],
	"What is it?", "merchant_talk_offer_2",
	[]],

	[anyone|plyr, "merchant_talk_offer_2",
	[
		(eq, "$talk_context", 2),
		(eq, "$g_encountered_party_faction", "$players_kingdom")
	],
	"I can escort you to your destination for a price.", "caravan_offer_protection",
	[]],

	[anyone|plyr, "merchant_talk_offer_2",
	[],
	"Nothing. Forget it", "merchant_pretalk",
	[]],

	[anyone|plyr, "merchant_talk",
	[
		(check_quest_active, "qst_track_down_bandits")
	],
	"I am hunting a group of bandits with the following description... Have you seen them?", "merchant_bandit_information",
	[]],

	[anyone, "merchant_bandit_information",
	[
		(call_script, "script_get_manhunt_information_to_s15", "qst_track_down_bandits")
	],
	"{s15}", "merchant_pretalk",
	[]],

	[anyone|plyr, "merchant_talk",
	[
		(eq, "$talk_context", 2)
	],
	"Tell me about your journey", "merchant_trip_explanation",
	[]],

	[anyone, "merchant_trip_explanation",
	[
		(party_get_slot, ":g_encountered_party_last_traded_center", "$g_encountered_party", slot_party_last_traded_center),
		(party_get_slot, ":g_encountered_party_ai_object", "$g_encountered_party", slot_party_ai_object),
		(str_store_party_name, 11, ":g_encountered_party_last_traded_center"),
		(str_store_party_name, 12, ":g_encountered_party_ai_object"),
		(str_store_string, 14, "str___we_believe_that_there_is_money_to_be_made_selling_"),
		(store_sub, ":value", 267, "itm_trade_spice"),
		(assign, ":value_2", 0),
		(try_for_range, ":item", "itm_trade_spice", "itm_trade_dummy01"),
			(store_add, ":value_3", ":item", ":value"),
			(party_get_slot, ":g_encountered_party_last_traded_center_value_3", ":g_encountered_party_last_traded_center", ":value_3"),
			(party_get_slot, ":g_encountered_party_ai_object_value_3", ":g_encountered_party_ai_object", ":value_3"),
			(gt, ":g_encountered_party_ai_object_value_3", ":g_encountered_party_last_traded_center_value_3"),
			(store_sub, ":value_4", ":g_encountered_party_ai_object_value_3", ":g_encountered_party_last_traded_center_value_3"),
			(gt, ":value_4", 200),
			(str_store_item_name, 15, ":item"),
			(str_store_string, 14, "str_s14s15_"),
			(assign, ":value_2", 1),
		(try_end),
		(try_begin),
			(eq, ":value_2", 0),
			(str_store_string, 14, "str__we_carry_a_selection_of_goods_although_the_difference_in_prices_for_each_is_not_so_great_we_hope_to_make_a_profit_off_of_the_whole"),
		(else_try),
			(str_store_string, 14, "str_s14and_other_goods"),
		(try_end)
	],
	"We are coming from {s11} and heading to {s12}.{s14}", "merchant_pretalk",
	[]],

	[anyone|plyr, "merchant_talk",
	[
		(eq, "$talk_context", 2),
		(neg|party_slot_ge, "$g_encountered_party", 52, "$g_current_hours")
	],
	"I demand something from you!", "merchant_demand",
	[]],

	[anyone, "merchant_demand",
	[
		(eq, "$talk_context", 2)
	],
	"What do you want?", "merchant_demand_2",
	[]],

	[anyone|plyr, "merchant_demand_2",
	[
		(neq, "$g_encountered_party_faction", "$players_kingdom")
	],
	"There is a toll for free passage here!", "merchant_demand_toll",
	[]],

	[anyone, "merchant_demand_toll",
	[
		(gt, "$g_strength_ratio", 70),
		(store_div, reg6, "$g_ally_strength", 2),
		(val_add, reg6, 40),
		(assign, "$temp", reg6)
	],
	"Please, I don't want any trouble. I can give you {reg6} coins, just let us go.", "merchant_demand_toll_2",
	[]],

	[anyone, "merchant_demand_toll",
	[
		(store_div, reg6, "$g_ally_strength", 4),
		(val_add, reg6, 10),
		(assign, "$temp", reg6)
	],
	"I don't want any trouble. I can give you {reg6} coins if you'll let us go.", "merchant_demand_toll_2",
	[]],

	[anyone|plyr, "merchant_demand_toll_2",
	[],
	"Agreed, hand it over and you may go in peace.", "merchant_demand_toll_accept",
	[]],

	[anyone, "merchant_demand_toll_accept",
	[
		(assign, reg6, "$temp")
	],
	"Very well then. Here's {reg6} coins. ", "close_window",
	[
		(assign, "$g_leave_encounter", 1),
		(call_script, "script_troop_add_gold", "trp_player", "$temp"),
		(store_add, ":value", "$g_current_hours", 72),
		(party_set_slot, "$g_encountered_party", slot_party_last_toll_paid_hours, ":value"),
		(try_begin),
			(ge, "$g_encountered_party_relation", -5),
			(store_relation, ":relation_g_encountered_party_faction_player_supporters_faction", "$g_encountered_party_faction", "fac_player_supporters_faction"),
			(try_begin),
				(gt, ":relation_g_encountered_party_faction_player_supporters_faction", 0),
				(val_sub, ":relation_g_encountered_party_faction_player_supporters_faction", 1),
			(try_end),
			(val_sub, ":relation_g_encountered_party_faction_player_supporters_faction", 1),
			(call_script, "script_set_player_relation_with_faction", "$g_encountered_party_faction", ":relation_g_encountered_party_faction_player_supporters_faction"),
		(try_end),
		(call_script, "script_add_log_entry", 3, "trp_player", -1, -1, "$g_encountered_party_faction"),
		(assign, reg6, "$temp")
	]],

	[anyone|plyr, "merchant_demand_toll_2",
	[],
	"I changed my mind, I can't take your money.", "merchant_pretalk",
	[]],

	[anyone|plyr, "merchant_demand_toll_2",
	[],
	"No, I want everything you have! [Attack]", "merchant_attack",
	[]],

	[anyone|plyr, "merchant_demand_2",
	[
		(neq, "$g_encountered_party_faction", "$players_kingdom")
	],
	"Hand over your gold and valuables now!", "merchant_attack_begin",
	[]],

	[anyone|plyr, "merchant_demand_2",
	[],
	"Nothing. Forget it.", "merchant_pretalk",
	[]],

	[anyone, "merchant_attack_begin",
	[],
	"Are you robbing us?{s11}", "merchant_attack_verify",
	[
		(str_clear, 11),
		(try_begin),
			(faction_slot_ge, "$g_encountered_party_faction", 120, 1),
			(str_store_string, 11, "str__have_you_not_signed_a_truce_with_our_lord"),
		(try_end)
	]],

	[anyone|plyr, "merchant_attack_verify",
	[],
	"Robbing you? No, no! It was a joke.", "merchant_attack_verify_norob",
	[]],

	[anyone, "merchant_attack_verify_norob",
	[],
	"God, don't joke about that, {lad/lass}. For a moment I thought we were in real trouble.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "merchant_attack_verify",
	[],
	"Of course I'm robbing you. Now hand over your goods.", "merchant_attack",
	[
		(call_script, "script_diplomacy_party_attacks_neutral", "p_main_party", "$g_encountered_party")
	]],

	[anyone, "merchant_attack",
	[],
	"Damn you, you won't get anything from us without a fight!", "close_window",
	[
		(store_relation, ":relation_g_encountered_party_faction_player_supporters_faction", "$g_encountered_party_faction", "fac_player_supporters_faction"),
		(try_begin),
			(gt, ":relation_g_encountered_party_faction_player_supporters_faction", 0),
			(val_sub, ":relation_g_encountered_party_faction_player_supporters_faction", 10),
		(try_end),
		(val_sub, ":relation_g_encountered_party_faction_player_supporters_faction", 5),
		(call_script, "script_set_player_relation_with_faction", "$g_encountered_party_faction", ":relation_g_encountered_party_faction_player_supporters_faction"),
		(call_script, "script_diplomacy_party_attacks_neutral", "p_main_party", "$g_encountered_party"),
		(assign, "$encountered_party_hostile", 1),
		(assign, "$encountered_party_friendly", 0)
	]],

	[anyone, "caravan_offer_protection",
	[],
	"These roads are dangerous indeed. One can never have enough protection.", "caravan_offer_protection_2",
	[
		(get_party_ai_object, ":party_ai_object_g_encountered_party", "$g_encountered_party"),
		(store_distance_to_party_from_party, "$caravan_distance_to_target", ":party_ai_object_g_encountered_party", "$g_encountered_party"),
		(assign, "$caravan_escort_offer", "$caravan_distance_to_target"),
		(val_sub, "$caravan_escort_offer", 10),
		(call_script, "script_party_calculate_strength", "p_main_party", 0),
		(assign, ":var_2", reg0),
		(val_min, ":var_2", 200),
		(val_add, ":var_2", 20),
		(val_mul, "$caravan_escort_offer", ":var_2"),
		(val_div, "$caravan_escort_offer", 50),
		(val_max, "$caravan_escort_offer", 5)
	]],

	[anyone, "caravan_offer_protection_2",
	[
		(lt, "$caravan_distance_to_target", 10)
	],
	"An escort? We're almost there already! Thank you for the offer, though.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "caravan_offer_protection_2",
	[
		(get_party_ai_object, ":party_ai_object_g_encountered_party", "$g_encountered_party"),
		(str_store_party_name, 1, ":party_ai_object_g_encountered_party"),
		(assign, reg2, "$caravan_escort_offer")
	],
	"We are heading to {s1}. I will pay you {reg2} coins if you escort us there.", "caravan_offer_protection_3",
	[]],

	[anyone|plyr, "caravan_offer_protection_3",
	[],
	"Agreed.", "caravan_offer_protection_4",
	[]],

	[anyone, "caravan_offer_protection_4",
	[],
	"I want you to stay close to us along the way. We'll need your help if we get ambushed by bandits.", "caravan_offer_protection_5",
	[]],

	[anyone|plyr, "caravan_offer_protection_5",
	[],
	"Don't worry, you can trust me.", "caravan_offer_protection_6",
	[]],

	[anyone, "caravan_offer_protection_6",
	[
		(get_party_ai_object, ":party_ai_object_g_encountered_party", "$g_encountered_party"),
		(str_store_party_name, 1, ":party_ai_object_g_encountered_party")
	],
	"Good. Come and collect your money when we're within sight of {s1}. For now, let's just get underway.", "close_window",
	[
		(get_party_ai_object, ":party_ai_object_g_encountered_party", "$g_encountered_party"),
		(assign, "$caravan_escort_destination_town", ":party_ai_object_g_encountered_party"),
		(assign, "$caravan_escort_party_id", "$g_encountered_party"),
		(assign, "$caravan_escort_agreed_reward", "$caravan_escort_offer"),
		(assign, "$caravan_escort_state", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "caravan_offer_protection_3",
	[],
	"Forget it.", "caravan_offer_protection_4b",
	[]],

	[anyone, "caravan_offer_protection_4b",
	[],
	"Perhaps another time, then.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "merchant_talk",
	[
		(eq, "$talk_context", 2),
		(lt, "$g_talk_troop_faction_relation", 0)
	],
	"Not so fast. First, hand over all your goods and money.", "talk_caravan_enemy_2",
	[]],

	[anyone, "talk_caravan_enemy_2",
	[],
	"Never. It is our duty to protect these goods. You shall have to fight us, brigand!", "close_window",
	[
		(store_relation, ":relation_g_encountered_party_faction_player_supporters_faction", "$g_encountered_party_faction", "fac_player_supporters_faction"),
		(val_min, ":relation_g_encountered_party_faction_player_supporters_faction", 0),
		(val_sub, ":relation_g_encountered_party_faction_player_supporters_faction", 4),
		(call_script, "script_set_player_relation_with_faction", "$g_encountered_party_faction", ":relation_g_encountered_party_faction_player_supporters_faction"),
		(call_script, "script_diplomacy_party_attacks_neutral", "p_main_party", "$g_encountered_party")
	]],

	[anyone|plyr, "merchant_talk",
	[],
	"[Leave]", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 0),
		(faction_slot_eq, "$g_encountered_party_faction", slot_faction_castle_guard_troop, "$g_talk_troop"),
		(assign, ":value", 0),
		(try_begin),
			(eq, "$g_encountered_party_faction", "$players_kingdom"),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|eq, ":value", 1),
		(this_or_next|eq, "$g_encountered_party_faction", "fac_player_supporters_faction"),
		(party_slot_eq, "$g_encountered_party", slot_town_lord, "trp_player"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Good day, {s0}. Will you be visiting the prison?", "prison_guard_players",
	[]],

	[anyone|plyr, "prison_guard_players",
	[],
	"Yes. Unlock the door.", "close_window",
	[
		(call_script, "script_enter_dungeon", "$current_town", "mt_visit_town_castle")
	]],

	[anyone|plyr, "prison_guard_players",
	[],
	"No, not now.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 0),
		(faction_slot_eq, "$g_encountered_party_faction", slot_faction_castle_guard_troop, "$g_talk_troop")
	],
	"Yes? What do you want?", "prison_guard_talk",
	[]],

	[anyone|plyr, "prison_guard_talk",
	[],
	"Who is imprisoned here?", "prison_guard_ask_prisoners",
	[]],

	[anyone|plyr, "prison_guard_talk",
	[],
	"I want to speak with a prisoner.", "prison_guard_visit_prison",
	[]],

	[anyone|plyr, "prison_guard_talk",
	[
		(party_slot_eq, "$g_encountered_party", slot_town_lord, "trp_player")
	],
	"I want to release a prisoner.", "dplmc_prison_guard_talk_ask_prisoner",
	[]],

	[anyone, "dplmc_prison_guard_talk_ask_prisoner",
	[],
	"Alright, which prisoner shall I set free?", "dplmc_prison_guard_talk_prisoner_select",
	[]],

	[anyone|repeat_for_troops|plyr, "dplmc_prison_guard_talk_prisoner_select",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(troop_get_slot, ":repeat_object_prisoner_of_party", ":repeat_object", slot_troop_prisoner_of_party),
		(eq, ":repeat_object_prisoner_of_party", "$g_encountered_party"),
		(str_store_troop_name, 10, ":repeat_object"),
		(store_faction_of_troop, ":faction_of_troop_repeat_object", ":repeat_object"),
		(str_store_faction_name, 11, ":faction_of_troop_repeat_object")
	],
	"{s10} of {s11}.", "dplmc_prison_guard_exchange_prisoner_ask_confirm",
	[
		(store_repeat_object, "$diplomacy_var"),
		(store_faction_of_troop, "$g_faction_selected", "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_prison_guard_talk_prisoner_select",
	[],
	"No one.", "close_window",
	[]],

	[anyone, "dplmc_prison_guard_exchange_prisoner_ask_confirm",
	[
		(str_store_troop_name, 10, "$diplomacy_var"),
		(store_faction_of_troop, ":faction_of_troop_diplomacy_var", "$diplomacy_var"),
		(str_store_faction_name, 11, ":faction_of_troop_diplomacy_var")
	],
	"As you wish, I will release {s10} of {s11}.", "dplmc_prison_guard_exchange_prisoner_confirm",
	[]],

	[anyone|plyr, "dplmc_prison_guard_exchange_prisoner_confirm",
	[],
	"Very well.", "close_window",
	[
		(party_remove_prisoners, "$g_encountered_party", "$diplomacy_var", 1),
		(call_script, "script_remove_troop_from_prison", "$diplomacy_var"),
		(str_store_troop_name, 7, "$diplomacy_var"),
		(display_message, "str_dplmc_has_been_set_free"),
		(call_script, "script_change_player_relation_with_troop", "$diplomacy_var", 3),
		(call_script, "script_change_player_honor", 1),
		(call_script, "script_update_troop_notes", "$diplomacy_var")
	]],

	[anyone|plyr, "dplmc_prison_guard_exchange_prisoner_confirm",
	[],
	"No, I changed my mind.", "close_window",
	[]],

	[anyone, "prison_guard_ask_prisoners",
	[],
	"Currently, {s50} {reg1?are:is} imprisoned here.{s49}", "prison_guard_talk",
	[
		(party_clear, "p_temp_party"),
		(party_clear, "p_temp_party_2"),
		(assign, ":var_1", 0),
		(assign, ":var_2", 0),
		(party_get_num_prisoner_stacks, ":num_prisoner_stacks_l_g_encountered_party", "$g_encountered_party"),
		(try_for_range, ":number", 0, ":num_prisoner_stacks_l_g_encountered_party"),
			(party_prisoner_stack_get_troop_id, ":party_prisoner_stack_troop_id_g_encountered_party_number", "$g_encountered_party", ":number"),
			(troop_is_hero, ":party_prisoner_stack_troop_id_g_encountered_party_number"),
			(try_begin),
				(call_script, "script_cf_prisoner_offered_parole", ":party_prisoner_stack_troop_id_g_encountered_party_number"),
				(party_add_members, "p_temp_party_2", ":party_prisoner_stack_troop_id_g_encountered_party_number", 1),
				(val_add, ":var_2", 1),
			(else_try),
				(party_add_members, "p_temp_party", ":party_prisoner_stack_troop_id_g_encountered_party_number", 1),
				(val_add, ":var_1", 1),
			(try_end),
		(try_end),
		(call_script, "script_print_party_members", "p_temp_party"),
		(str_store_string, 50, "str_s51"),
		(try_begin),
			(gt, ":var_1", 1),
			(assign, reg1, 1),
		(else_try),
			(assign, reg1, 0),
		(try_end),
		(str_clear, 49),
		(try_begin),
			(ge, ":var_2", 1),
			(call_script, "script_print_party_members", "p_temp_party_2"),
			(try_begin),
				(ge, ":var_2", 2),
				(assign, reg2, 1),
			(else_try),
				(assign, reg2, 0),
			(try_end),
			(str_store_string, 49, "str__meanwhile_s51_reg2areis_being_held_in_the_castle_but_reg2havehas_made_pledges_not_to_escape_and_reg2areis_being_held_in_more_comfortable_quarters"),
		(try_end)
	]],

	[anyone, "prison_guard_visit_prison",
	[
		(this_or_next|faction_slot_eq, "$g_encountered_party_faction", slot_faction_marshall, "trp_player"),
		(this_or_next|party_slot_eq, "$g_encountered_party", slot_town_lord, "trp_player"),
		(eq, "$g_encountered_party_faction", "$players_kingdom")
	],
	"Of course. Go in.", "close_window",
	[
		(call_script, "script_enter_dungeon", "$current_town", "mt_visit_town_castle")
	]],

	[anyone, "prison_guard_visit_prison",
	[
		(assign, ":var_1", 0),
		(party_get_num_prisoner_stacks, ":num_prisoner_stacks_l_g_encountered_party", "$g_encountered_party"),
		(assign, ":value", ":num_prisoner_stacks_l_g_encountered_party"),
		(try_for_range, ":number", 0, ":value"),
			(party_prisoner_stack_get_troop_id, ":party_prisoner_stack_troop_id_g_encountered_party_number", "$g_encountered_party", ":number"),
			(troop_is_hero, ":party_prisoner_stack_troop_id_g_encountered_party_number"),
			(try_begin),
				(call_script, "script_cf_prisoner_offered_parole", ":party_prisoner_stack_troop_id_g_encountered_party_number"),
			(else_try),
				(val_add, ":var_1", 1),
				(assign, ":value", 0),
			(try_end),
		(try_end),
		(ge, ":var_1", 1)
	],
	"You need to get permission from the lord to talk to prisoners.", "prison_guard_visit_prison_2",
	[]],

	[anyone, "prison_guard_visit_prison",
	[],
	"There is nobody inside, therefore you can freely go inside and look around.", "prison_guard_visit_prison_nobody",
	[]],

	[anyone|plyr, "prison_guard_visit_prison_nobody",
	[],
	"All right then. I'll take a look at the prison.", "close_window",
	[
		(call_script, "script_enter_dungeon", "$current_town", "mt_visit_town_castle")
	]],

	[anyone|plyr, "prison_guard_visit_prison_nobody",
	[],
	"I have more important business to do.", "close_window",
	[]],

	[anyone|plyr, "prison_guard_visit_prison_2",
	[],
	"All right then. I'll try that.", "close_window",
	[]],

	[anyone|plyr, "prison_guard_visit_prison_2",
	[],
	"Come on now. I thought you were the boss here.", "prison_guard_visit_prison_3",
	[]],

	[anyone, "prison_guard_visit_prison_3",
	[],
	"He-heh. You got that right. Still, I can't let you into the prison.", "prison_guard_visit_prison_4",
	[]],

	[anyone|plyr, "prison_guard_visit_prison_4",
	[],
	"All right then. I'll leave now.", "close_window",
	[]],

	[anyone|plyr, "prison_guard_visit_prison_4",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 100)
	],
	"I found a purse with 100 coins a few paces away. I reckon it belongs to you.", "prison_guard_visit_prison_5",
	[]],

	[anyone, "prison_guard_visit_prison_5",
	[],
	"Ah! I was looking for this all day. How good of you to bring it back {Ser/my lady}. Well, now that I know what an honest {man/lady} you are, there can be no harm in letting you inside for a look. Go in.... Just so you know, though -- I'll be hanging onto the keys, in case you were thinking about undoing anyone's chains.", "close_window",
	[
		(troop_remove_gold, "trp_player", 100),
		(call_script, "script_enter_dungeon", "$current_town", "mt_visit_town_castle")
	]],

	[anyone|plyr, "prison_guard_visit_prison_4",
	[],
	"Give me the keys to the cells -- now!", "prison_guard_visit_break",
	[]],

	[anyone, "prison_guard_visit_break",
	[],
	"Help! Help! Prison break!", "close_window",
	[
		(call_script, "script_activate_town_guard"),
		(assign, "$g_main_attacker_agent", "$g_talk_agent"),
		(assign, "$talk_context", 18),
		(assign, ":var_1", "trp_heroes_end"),
		(try_for_range, ":troop", "trp_npc1", ":var_1"),
			(troop_set_slot, ":troop", slot_troop_mission_participation, 0),
		(try_end)
	]],

	[anyone|plyr, "prison_guard_talk",
	[],
	"Never mind.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 0),
		(faction_slot_eq, "$g_encountered_party_faction", slot_faction_town_walker_male_troop, "$g_talk_troop"),
		(assign, ":value", 0),
		(try_begin),
			(eq, "$g_encountered_party_faction", "$players_kingdom"),
			(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
			(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
			(ge, reg0, 50),
			(assign, ":value", 1),
		(try_end),
		(this_or_next|eq, ":value", 1),
		(this_or_next|eq, "$g_encountered_party_faction", "fac_player_supporters_faction"),
		(party_slot_eq, "$g_encountered_party", slot_town_lord, "trp_player")
	],
	"Your orders, {Lord/Lady}?", "castle_guard_players",
	[]],

	[anyone|plyr, "castle_guard_players",
	[],
	"Open the door. I'll go in.", "close_window",
	[
		(call_script, "script_enter_court", "$current_town")
	]],

	[anyone|plyr, "castle_guard_players",
	[],
	"Never mind.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 0),
		(faction_slot_eq, "$g_encountered_party_faction", slot_faction_town_walker_male_troop, "$g_talk_troop"),
		(eq, "$sneaked_into_town", 1),
		(gt, "$g_time_since_last_talk", 0)
	],
	"Get out of my sight, beggar! You stink!", "castle_guard_sneaked_intro_1",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 0),
		(faction_slot_eq, "$g_encountered_party_faction", slot_faction_town_walker_male_troop, "$g_talk_troop"),
		(eq, "$sneaked_into_town", 1)
	],
	"Get lost before I lose my temper you vile beggar!", "close_window",
	[]],

	[anyone|plyr, "castle_guard_sneaked_intro_1",
	[],
	"I want to enter the hall and speak to the lord.", "castle_guard_sneaked_intro_2",
	[]],

	[anyone|plyr, "castle_guard_sneaked_intro_1",
	[],
	"[Leave]", "close_window",
	[]],

	[anyone, "castle_guard_sneaked_intro_2",
	[],
	"Are you out of your mind, {man/woman}? Beggars are not allowed into the hall. Now get lost or I'll beat you bloody.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 0),
		(faction_slot_eq, "$g_encountered_party_faction", slot_faction_town_walker_male_troop, "$g_talk_troop")
	],
	"What do you want?", "castle_guard_intro_1",
	[]],

	[anyone|plyr, "castle_guard_intro_1",
	[],
	"I want to enter the hall and speak to the lord.", "castle_guard_intro_2",
	[]],

	[anyone|plyr, "castle_guard_intro_1",
	[],
	"Never mind.", "close_window",
	[]],

	[anyone, "castle_guard_intro_2",
	[
		(faction_slot_eq, "$g_encountered_party_faction", slot_faction_ai_state, 6),
		(faction_slot_eq, "$g_encountered_party_faction", slot_faction_ai_object, "$current_town"),
		(this_or_next|neq, "$players_kingdom", "$g_encountered_party_faction"),
		(neg|troop_slot_ge, "trp_player", 7, 50),
		(neg|troop_slot_ge, "trp_player", 7, 125),
		(neq, "$g_player_eligible_feast_center_no", "$current_town"),
		(neg|check_quest_active, "qst_wed_betrothed"),
		(neg|check_quest_active, "qst_wed_betrothed_female"),
		(neg|troop_slot_ge, "trp_player", 30, 1)
	],
	"I'm afraid there is a feast in progress, and you are not invited.", "close_window",
	[]],

	[anyone, "castle_guard_intro_2",
	[],
	"You can go in after leaving your weapons with me. No one is allowed to carry arms into the lord's hall.", "castle_guard_intro_3",
	[]],

	[anyone|plyr, "castle_guard_intro_3",
	[],
	"Here, take my arms. I'll go in.", "close_window",
	[
		(call_script, "script_enter_court", "$current_town")
	]],

	[anyone|plyr, "castle_guard_intro_3",
	[],
	"No, I give my arms to no one.", "castle_guard_intro_2b",
	[]],

	[anyone, "castle_guard_intro_2b",
	[],
	"Then you can't go in.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 3)
	],
	"What do you want?", "castle_gate_guard_talk",
	[]],

	[anyone, "castle_gate_guard_pretalk",
	[],
	"Yes?", "castle_gate_guard_talk",
	[]],

	[anyone|plyr, "castle_gate_guard_talk",
	[
		(ge, "$g_encountered_party_relation", 0)
	],
	"We need shelter for the night. Will you let us in?", "castle_gate_open",
	[]],

	[anyone|plyr, "castle_gate_guard_talk",
	[
		(party_slot_ge, "$g_encountered_party", 7, 1)
	],
	"I want to speak with the lord of the castle.", "request_meeting_castle_lord",
	[]],

	[anyone|plyr, "castle_gate_guard_talk",
	[],
	"I want to speak with someone in the castle.", "request_meeting_other",
	[]],

	[anyone|plyr, "castle_gate_guard_talk",
	[],
	"[Leave]", "close_window",
	[]],

	[anyone, "request_meeting_castle_lord",
	[
		(party_get_slot, ":g_encountered_party_town_lord", "$g_encountered_party", slot_town_lord),
		(call_script, "script_get_troop_attached_party", ":g_encountered_party_town_lord"),
		(eq, "$g_encountered_party", reg0),
		(str_store_troop_name, 2, ":g_encountered_party_town_lord"),
		(assign, "$lord_requested_to_talk_to", ":g_encountered_party_town_lord")
	],
	"Wait here. {s2} will see you.", "close_window",
	[]],

	[anyone, "request_meeting_castle_lord",
	[],
	"My lord is not here now.", "castle_gate_guard_pretalk",
	[]],

	[anyone, "request_meeting_other",
	[],
	"Who is that?", "request_meeting_3",
	[]],

	[anyone|repeat_for_troops|plyr, "request_meeting_3",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_is_hero, ":repeat_object"),
		(troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(call_script, "script_get_troop_attached_party", ":repeat_object"),
		(eq, "$g_encountered_party", reg0),
		(str_store_troop_name, 3, ":repeat_object")
	],
	"{s3}", "request_meeting_4",
	[
		(store_repeat_object, "$lord_requested_to_talk_to")
	]],

	[anyone|plyr, "request_meeting_3",
	[],
	"Never mind.", "close_window",
	[
		(assign, "$lord_requested_to_talk_to", 0)
	]],

	[anyone, "request_meeting_4",
	[
		(call_script, "script_dplmc_store_troop_is_female", "$lord_requested_to_talk_to")
	],
	"Wait there. I'll send {reg0?her:him} your request.", "request_meeting_5",
	[]],

	[anyone|plyr, "request_meeting_5",
	[],
	"I'm waiting...", "request_meeting_6",
	[]],

	[anyone, "request_meeting_6",
	[
		(call_script, "script_troop_get_player_relation", "$lord_requested_to_talk_to"),
		(assign, ":var_1", reg0),
		(gt, ":var_1", -20)
	],
	"All right. {s2} will talk to you now.", "close_window",
	[
		(str_store_troop_name, 2, "$lord_requested_to_talk_to")
	]],

	[anyone, "request_meeting_6",
	[
		(str_store_troop_name, 2, "$lord_requested_to_talk_to"),
		(call_script, "script_dplmc_store_troop_is_female", "$lord_requested_to_talk_to")
	],
	"{s2} says {reg0?she:he} will not see you. Begone now.", "close_window",
	[]],

	[anyone, "castle_gate_open",
	[
		(party_get_slot, ":g_encountered_party_town_lord", "$g_encountered_party", slot_town_lord),
		(call_script, "script_get_troop_attached_party", ":g_encountered_party_town_lord"),
		(eq, "$g_encountered_party", reg0),
		(ge, "$g_encountered_party_relation", 0),
		(call_script, "script_troop_get_player_relation", ":g_encountered_party_town_lord"),
		(assign, ":var_2", reg0),
		(ge, ":var_2", 5),
		(str_store_troop_name, 2, ":g_encountered_party_town_lord")
	],
	"My lord {s2} will be happy to see you {Ser/my lady}. Come on in. I am opening the gates for you.", "close_window",
	[
		(assign, "$g_permitted_to_center", 1)
	]],

	[anyone, "castle_gate_open",
	[
		(party_get_slot, ":g_encountered_party_town_lord", "$g_encountered_party", slot_town_lord),
		(call_script, "script_get_troop_attached_party", ":g_encountered_party_town_lord"),
		(neq, "$g_encountered_party", reg0),
		(ge, "$g_encountered_party_relation", 0),
		(call_script, "script_troop_get_player_relation", ":g_encountered_party_town_lord"),
		(assign, ":var_2", reg0),
		(ge, ":var_2", 5),
		(str_store_troop_name, 2, ":g_encountered_party_town_lord")
	],
	"My lord {s2} is not in the castle now. But I think he would approve of you taking shelter here. Come on in. I am opening the gates for you.", "close_window",
	[
		(assign, "$g_permitted_to_center", 1)
	]],

	[anyone, "castle_gate_open",
	[
		(party_get_slot, ":g_encountered_party_town_lord", "$g_encountered_party", slot_town_lord),
		(call_script, "script_troop_get_player_relation", ":g_encountered_party_town_lord"),
		(assign, ":var_2", reg0),
		(ge, ":var_2", -2)
	],
	"Come on in. I am opening the gates for you.", "close_window",
	[
		(assign, "$g_permitted_to_center", 1)
	]],

	[anyone, "castle_gate_open",
	[
		(party_get_slot, ":g_encountered_party_town_lord", "$g_encountered_party", slot_town_lord),
		(call_script, "script_troop_get_player_relation", ":g_encountered_party_town_lord"),
		(assign, ":var_2", reg0),
		(ge, ":var_2", -19),
		(str_store_troop_name, 2, ":g_encountered_party_town_lord")
	],
	"Come on in. But make sure your men behave sensibly within the walls. My lord {s2} does not want trouble here.", "close_window",
	[
		(assign, "$g_permitted_to_center", 1)
	]],

	[anyone, "castle_gate_open",
	[
		(party_get_slot, ":g_encountered_party_town_lord", "$g_encountered_party", slot_town_lord),
		(str_store_troop_name, 2, ":g_encountered_party_town_lord")
	],
	"My lord {s2} does not want you here. Begone now.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 5)
	],
	"You have come just in time. Let us join our forces now and teach our enemy a lesson.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 6)
	],
	"You are making a big mistake by fighting against us.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 13),
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$g_talk_troop_met", 0),
		(ge, "$g_talk_troop_relation", 17)
	],
	"I don't think we have met properly my friend. You just saved my life out there, and I still don't know your name...", "ally_thanks_meet",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 13),
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$g_talk_troop_met", 0),
		(ge, "$g_talk_troop_relation", 5),
		(str_store_troop_name, 1, "$g_talk_troop")
	],
	"Your help was most welcome stranger. My name is {s1}. Can I learn yours?", "ally_thanks_meet",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 13),
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$g_talk_troop_met", 0),
		(ge, "$g_talk_troop_relation", 0),
		(str_store_troop_name, 1, "$g_talk_troop")
	],
	"Thanks for your help, stranger. We haven't met properly yet, have we? What is your name?", "ally_thanks_meet",
	[]],

	[anyone|plyr, "ally_thanks_meet",
	[],
	"My name is {playername}.", "ally_thanks_meet_2",
	[]],

	[anyone, "ally_thanks_meet_2",
	[
		(ge, "$g_talk_troop_relation", 15),
		(str_store_troop_name, 1, "$g_talk_troop")
	],
	"Well met indeed {playername}. My name is {s1} and I am forever in your debt. If there is ever anything I can help you with, just let me know...", "close_window",
	[]],

	[anyone, "ally_thanks_meet_2",
	[
		(ge, "$g_talk_troop_relation", 5)
	],
	"Well met {playername}. I am in your debt for what you just did. I hope one day I will find a way to repay it.", "close_window",
	[]],

	[anyone, "ally_thanks_meet_2",
	[],
	"Well met {playername}. I am {s1}. Thanks for your help and I hope we meet again.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 13),
		(troop_is_hero, "$g_talk_troop"),
		(ge, "$g_talk_troop_relation", 30),
		(ge, "$g_relation_boost", 10)
	],
	"Again you save our necks, {playername}! Truly, you are the best of friends. {s43}", "close_window",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_battle_won_default"),
		(try_begin),
			(party_stack_get_troop_id, ":party_stack_troop_id_encountered_party_backup_0", "p_encountered_party_backup", 0),
			(is_between, ":party_stack_troop_id_encountered_party_backup_0", "trp_npc1", "trp_knight_1_1_wife"),
			(call_script, "script_add_log_entry", 17, "trp_player", -1, ":party_stack_troop_id_encountered_party_backup_0", -1),
		(try_end)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 13),
		(troop_is_hero, "$g_talk_troop"),
		(ge, "$g_talk_troop_relation", 20),
		(ge, "$g_relation_boost", 5)
	],
	"You arrived just in the nick of time! {playername}. You have my deepest thanks! {s43}", "close_window",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_battle_won_default"),
		(call_script, "script_add_log_entry", 17, "trp_player", -1, "$g_talk_troop", -1)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 13),
		(troop_is_hero, "$g_talk_troop"),
		(ge, "$g_talk_troop_relation", 0),
		(ge, "$g_relation_boost", 3)
	],
	"You turned up just in time, {playername}. I will not forget your help. {s43}", "close_window",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_battle_won_default"),
		(call_script, "script_add_log_entry", 17, "trp_player", -1, "$g_talk_troop", -1)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 13),
		(troop_is_hero, "$g_talk_troop"),
		(ge, "$g_talk_troop_relation", -5)
	],
	"Good to see you here, {playername}. {s43}", "close_window",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_battle_won_default"),
		(call_script, "script_troop_change_relation_with_troop", "$g_talk_troop", "trp_player", 1)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 13),
		(troop_is_hero, "$g_talk_troop"),
		(ge, "$g_relation_boost", 4)
	],
	"{s43}", "close_window",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_battle_won_grudging_default")
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 13),
		(troop_is_hero, "$g_talk_troop")
	],
	"{s43}", "close_window",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_battle_won_unfriendly_default")
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 13),
		(ge, "$g_relation_boost", 10),
		(party_get_num_companions, reg1, "$g_encountered_party"),
		(val_sub, reg1, 1)
	],
	"Thank you for your help {Ser/my lady}. You saved {reg1?our lives:my life} out there.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 13),
		(ge, "$g_relation_boost", 5)
	],
	"Thank you for your help {Ser/my lady}. Things didn't look very well for us but then you came up and everything changed.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 13)
	],
	"Thank you for your help, {Ser/my lady}. It was fortunate to have you nearby.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 8),
		(store_conversation_troop, ":conversation_troop"),
		(eq, ":conversation_troop", "trp_kidnapped_girl")
	],
	"Oh {Ser/my lady}. Thank you so much for rescuing me. Will you take me to my family now?", "kidnapped_girl_liberated_battle",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 8),
		(store_conversation_troop, ":conversation_troop"),
		(eq, ":conversation_troop", "trp_kidnapped_wife")
	],
	"Oh {my lord/my lady}. Thank you so much for rescuing me. Will you take me back to my village now?", "kidnapped_wife_liberated_battle",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 8)
	],
	"I am in your debt for freeing me friend.", "freed_hero_answer",
	[]],

	[anyone|plyr, "freed_hero_answer",
	[],
	"You're not going anywhere. You'll be my prisoner now!", "freed_hero_answer_1",
	[
		(store_conversation_troop, ":conversation_troop"),
		(party_add_prisoners, "p_main_party", ":conversation_troop", 1)
	]],

	[anyone, "freed_hero_answer_1",
	[],
	"Alas. Will my luck never change?", "close_window",
	[]],

	[anyone|plyr, "freed_hero_answer",
	[],
	"You're free to go, {s65}.", "freed_hero_answer_2",
	[]],

	[anyone, "freed_hero_answer_2",
	[],
	"Thank you, good {my lord/lady}. I never forget someone who's done me a good turn.", "close_window",
	[]],

	[anyone|plyr, "freed_hero_answer",
	[],
	"Would you like to join me?", "freed_hero_answer_3",
	[]],

	[anyone, "freed_hero_answer_3",
	[
		(store_random_in_range, ":random_in_range_0_2", 0, 2),
		(eq, ":random_in_range_0_2", 0)
	],
	"All right I will join you.", "close_window",
	[
		(store_conversation_troop, ":conversation_troop"),
		(party_add_members, "p_main_party", ":conversation_troop", 1)
	]],

	[anyone, "freed_hero_answer_3",
	[],
	"No, I want to go on my own.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 9)
	],
	"You'll not live long to enjoy your victory. My kinsmen will soon wipe out the stain of this defeat.", "defeat_hero_answer",
	[]],

	[anyone|plyr, "defeat_hero_answer",
	[],
	"You are my prisoner now.", "defeat_hero_answer_1",
	[
		(party_add_prisoners, "p_main_party", "$g_talk_troop", 1),
		(troop_set_slot, "$g_talk_troop", slot_troop_prisoner_of_party, "p_main_party"),
		(call_script, "script_event_hero_taken_prisoner_by_player", "$g_talk_troop")
	]],

	[anyone, "defeat_hero_answer_1",
	[],
	"Damn you. You will regret this.", "close_window",
	[]],

	[anyone|plyr, "defeat_hero_answer",
	[],
	"You're free to go this time, but don't cross my path again.", "defeat_hero_answer_2",
	[]],

	[anyone, "defeat_hero_answer_2",
	[],
	"We will meet again.", "close_window",
	[]],

	[anyone, "combined_political_quests",
	[
		(eq, "$political_quest_found", "qst_resolve_dispute")
	],
	"{s9}", "political_quest_suggested",
	[
		(quest_set_slot, "qst_resolve_dispute", slot_quest_target_troop, "$political_quest_target_troop"),
		(quest_set_slot, "qst_resolve_dispute", slot_quest_object_troop, "$political_quest_object_troop"),
		(quest_get_slot, ":resolve_dispute_target_troop", "qst_resolve_dispute", slot_quest_target_troop),
		(quest_get_slot, ":resolve_dispute_object_troop", "qst_resolve_dispute", slot_quest_object_troop),
		(str_store_troop_name, 4, ":resolve_dispute_target_troop"),
		(str_store_troop_name, 5, ":resolve_dispute_object_troop"),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(str_store_troop_name, 7, ":players_kingdom_leader"),
		(try_begin),
			(eq, "$players_kingdom", "fac_player_supporters_faction"),
			(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
			(str_store_string, 9, "str_you_may_be_aware_my_lord_of_the_quarrel_between_s4_and_s5_which_is_damaging_the_unity_of_this_realm_and_sapping_your_authority_if_you_could_persuade_the_lords_to_reconcile_it_would_boost_your_own_standing_however_in_taking_this_on_you_run_the_risk_of_one_the_lords_deciding_that_you_have_taken_the_rivals_side"),
		(else_try),
			(str_store_string, 9, "str_you_may_be_aware_my_lord_of_the_quarrel_between_s4_and_s5_which_is_damaging_the_unity_of_this_realm_and_sapping_your_authority_if_you_could_persuade_the_lords_to_reconcile_i_imagine_that_s7_would_be_most_pleased_however_in_taking_this_on_you_run_the_risk_of_one_the_lords_deciding_that_you_have_taken_the_rivals_side"),
		(try_end)
	]],

	[anyone, "political_quest_follow_on",
	[
		(eq, "$political_quest_found", "qst_resolve_dispute")
	],
	"I think that is a wise move. Good luck to you.", "close_window",
	[
		(assign, "$g_leave_encounter", 1),
		(setup_quest_text, "qst_resolve_dispute"),
		(quest_get_slot, ":resolve_dispute_target_troop", "qst_resolve_dispute", slot_quest_target_troop),
		(str_store_troop_name_link, 11, ":resolve_dispute_target_troop"),
		(quest_get_slot, ":resolve_dispute_object_troop", "qst_resolve_dispute", slot_quest_object_troop),
		(str_store_troop_name_link, 12, ":resolve_dispute_object_troop"),
		(str_store_string, 2, "str_resolve_the_dispute_between_s11_and_s12"),
		(call_script, "script_start_quest", "qst_resolve_dispute", -1),
		(quest_set_slot, "qst_resolve_dispute", slot_quest_expiration_days, 30),
		(quest_set_slot, "qst_resolve_dispute", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_set_slot, "qst_resolve_dispute", slot_quest_target_state, 0),
		(quest_set_slot, "qst_resolve_dispute", slot_quest_object_state, 0),
		(quest_get_slot, ":resolve_dispute_target_troop", "qst_resolve_dispute", slot_quest_target_troop),
		(str_store_troop_name, 11, ":resolve_dispute_target_troop"),
		(quest_get_slot, ":resolve_dispute_object_troop", "qst_resolve_dispute", slot_quest_object_troop),
		(str_store_troop_name, 12, ":resolve_dispute_object_troop")
	]],

	[anyone, "combined_political_quests",
	[
		(eq, "$political_quest_found", "qst_offer_gift"),
		(quest_set_slot, "qst_offer_gift", slot_quest_target_troop, "$political_quest_target_troop"),
		(quest_get_slot, ":offer_gift_target_troop", "qst_offer_gift", slot_quest_target_troop),
		(str_store_troop_name, 4, ":offer_gift_target_troop"),
		(troop_get_type, reg4, ":offer_gift_target_troop"),
		(call_script, "script_troop_get_family_relation_to_troop", ":offer_gift_target_troop", "$g_talk_troop")
	],
	"Your relations with {s4} are not all that they could be. As {reg4?she:he} is my {s11}, I can mediate to attempt to mend your quarrel. Perhaps the best way for me to do this would be to send {reg4?her:him} a gift -- a fur-trimmed velvet robe, perhaps. If you can provide me with a bolt of velvet and a length of furs, I can have one made and sent to {reg4?her:him.}", "political_quest_suggested",
	[
		(quest_get_slot, ":offer_gift_target_troop", "qst_offer_gift", slot_quest_target_troop),
		(troop_get_type, reg4, ":offer_gift_target_troop")
	]],

	[anyone, "political_quest_follow_on",
	[
		(eq, "$political_quest_found", "qst_offer_gift")
	],
	"Splendid. I shall await the materials.", "close_window",
	[
		(assign, "$g_leave_encounter", 1),
		(setup_quest_text, "qst_offer_gift"),
		(quest_get_slot, ":offer_gift_target_troop", "qst_offer_gift", slot_quest_target_troop),
		(str_store_troop_name, 14, ":offer_gift_target_troop"),
		(str_store_troop_name, 12, "$g_talk_troop"),
		(assign, reg4, reg65),
		(str_store_string, 2, "str_you_intend_to_bring_gift_for_s14"),
		(call_script, "script_start_quest", "qst_offer_gift", "$g_talk_troop"),
		(quest_set_slot, "qst_offer_gift", slot_quest_expiration_days, 30),
		(quest_set_slot, "qst_offer_gift", slot_quest_current_state, 0)
	]],

	[anyone, "combined_political_quests",
	[
		(eq, "$political_quest_found", "qst_denounce_lord"),
		(this_or_next|eq, "$g_talk_troop", "$g_player_minister"),
		(troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(str_store_troop_name, 4, "$political_quest_target_troop"),
		(call_script, "script_dplmc_store_troop_is_female_reg", "$political_quest_target_troop", 4),
		(str_store_faction_name, 5, "$players_kingdom"),
		(troop_get_slot, ":political_quest_target_troop_lord_reputation_type", "$political_quest_target_troop", slot_lord_reputation_type),
		(val_add, ":political_quest_target_troop_lord_reputation_type", "str_lord_derogatory_default"),
		(str_store_string, 7, ":political_quest_target_troop_lord_reputation_type"),
		(troop_get_slot, ":political_quest_target_troop_lord_reputation_type", "$political_quest_target_troop", slot_lord_reputation_type),
		(val_add, ":political_quest_target_troop_lord_reputation_type", "str_lord_derogatory_result"),
		(str_store_string, 8, ":political_quest_target_troop_lord_reputation_type")
	],
	"As you may realize, {s4} has many enemies among the lords of the {s5}. In particular, they feel that {reg4?she:he} is {s7}, and worry that {reg4?she:he} will {s8}. Were you to denounce {s4} to {reg4?her:his} face, you may reap much popularity -- although, of course, you would make an enemy of {reg4?her:him}, and risk being challenged to a duel.", "political_quest_suggested",
	[]],

	[anyone, "combined_political_quests",
	[
		(eq, "$political_quest_found", "qst_denounce_lord"),
		(call_script, "script_dplmc_store_troop_is_female_reg", "$political_quest_target_troop", 4),
		(str_clear, 9),
		(call_script, "script_troop_get_relation_with_troop", "trp_player", "$g_talk_troop"),
		(assign, ":var_1", reg0),
		(str_store_troop_name, 4, "$political_quest_target_troop"),
		(try_begin),
			(ge, ":var_1", 2),
			(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 5),
			(neg|troop_slot_eq, "$g_talk_troop", slot_lord_reputation_type, 2),
			(str_store_string, 9, "str_i_realize_that_you_are_on_good_terms_with_s4_but_we_ask_you_to_do_this_for_the_good_of_the_realm"),
		(else_try),
			(ge, ":var_1", 2),
			(str_store_string, 9, "str_i_realize_that_you_are_on_good_terms_with_s4_but_the_blow_will_hurt_him_more"),
		(try_end),
		(str_store_faction_name, 5, "$players_kingdom"),
		(str_store_troop_name, 4, "$political_quest_target_troop"),
		(troop_get_slot, ":political_quest_target_troop_lord_reputation_type", "$political_quest_target_troop", slot_lord_reputation_type),
		(val_add, ":political_quest_target_troop_lord_reputation_type", "str_lord_derogatory_default"),
		(str_store_string, 7, ":political_quest_target_troop_lord_reputation_type"),
		(troop_get_slot, ":political_quest_target_troop_lord_reputation_type", "$political_quest_target_troop", slot_lord_reputation_type),
		(val_add, ":political_quest_target_troop_lord_reputation_type", "str_lord_derogatory_result"),
		(str_store_string, 8, ":political_quest_target_troop_lord_reputation_type")
	],
	"As you may realize, many of us in the peerage of the {s5} consider {s4} to be {s7}, and a liability to our cause. We worry that {reg4?she:he} will {s8}. People know my views on {s4} already, but if you were to denounce {reg4?her:him} to {reg4?her:his} face, you would further erode his standing -- and discourage our liege from entrusting {reg4?her:him} with any more power or responsibility. Of course, you would make an enemy of {reg4?her:him}, and risk being challenged to a duel.{s9}", "political_quest_suggested",
	[]],

	[anyone, "political_quest_follow_on",
	[
		(eq, "$political_quest_found", "qst_denounce_lord"),
		(this_or_next|eq, "$g_talk_troop", "$g_player_minister"),
		(troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop")
	],
	"We appreciate what you are doing. I find such intrigues distasteful, but it is all for the good of the {s5}.", "close_window",
	[
		(quest_set_slot, "qst_denounce_lord", slot_quest_target_troop, "$political_quest_target_troop"),
		(quest_get_slot, ":denounce_lord_target_troop", "qst_denounce_lord", slot_quest_target_troop),
		(str_store_troop_name_link, 14, ":denounce_lord_target_troop"),
		(str_store_troop_name_link, 12, "$g_talk_troop"),
		(str_store_string, 2, "str_you_intend_to_denounce_s14_to_his_face_on_behalf_of_s14"),
		(setup_quest_text, "qst_denounce_lord"),
		(call_script, "script_start_quest", "$political_quest_found", "$g_talk_troop"),
		(quest_set_slot, "qst_denounce_lord", slot_quest_expiration_days, 60),
		(str_store_faction_name, 5, "$players_kingdom"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "political_quest_follow_on",
	[
		(eq, "$political_quest_found", "qst_denounce_lord")
	],
	"Very well. It is always risky to involve yourself in intrigues of this sort, but in this case, I think you will benefit.", "close_window",
	[
		(quest_set_slot, "qst_denounce_lord", slot_quest_target_troop, "$political_quest_target_troop"),
		(quest_get_slot, ":denounce_lord_target_troop", "qst_denounce_lord", slot_quest_target_troop),
		(str_store_troop_name_link, 14, ":denounce_lord_target_troop"),
		(str_store_troop_name_link, 12, "$g_talk_troop"),
		(str_store_string, 2, "str_you_intend_to_denounce_s14_to_his_face_on_behalf_of_s14"),
		(setup_quest_text, "qst_denounce_lord"),
		(call_script, "script_start_quest", "$political_quest_found", "$g_talk_troop"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "combined_political_quests",
	[
		(eq, "$political_quest_found", "qst_intrigue_against_lord"),
		(str_store_troop_name, 4, "$political_quest_target_troop"),
		(call_script, "script_dplmc_store_troop_is_female_reg", "$political_quest_target_troop", 4),
		(str_store_faction_name, 5, "$players_kingdom"),
		(troop_get_slot, ":political_quest_target_troop_lord_reputation_type", "$political_quest_target_troop", slot_lord_reputation_type),
		(val_add, ":political_quest_target_troop_lord_reputation_type", "str_lord_derogatory_default"),
		(str_store_string, 7, ":political_quest_target_troop_lord_reputation_type"),
		(troop_get_slot, ":political_quest_target_troop_lord_reputation_type_2", "$political_quest_target_troop", slot_lord_reputation_type),
		(val_add, ":political_quest_target_troop_lord_reputation_type_2", "str_lord_derogatory_result"),
		(str_store_string, 8, ":political_quest_target_troop_lord_reputation_type_2"),
		(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
		(str_store_troop_name, 9, ":players_kingdom_leader")
	],
	"You and I have a common interest in seeking to curtail the rise of {s4}. I feel that {reg4?she:he} is {s7}, and worry that {reg4?she:he} will {s8}. Were you to tell our liege {s9} your opinion of {s4}, it might discourage {s9} from granting {s4} any further powers or responsibilities, at least for a while, and I would be much obliged to you.", "political_quest_suggested",
	[]],

	[anyone, "political_quest_follow_on",
	[
		(eq, "$political_quest_found", "qst_intrigue_against_lord"),
		(str_store_faction_name, 5, "$players_kingdom")
	],
	"We appreciate what you are doing. I find such intrigues distasteful, but it is all for the good of the {s5}.", "close_window",
	[
		(quest_set_slot, "qst_intrigue_against_lord", slot_quest_target_troop, "$political_quest_target_troop"),
		(quest_get_slot, ":intrigue_against_lord_target_troop", "qst_intrigue_against_lord", slot_quest_target_troop),
		(store_faction_of_troop, ":faction_of_troop_intrigue_against_lord_target_troop", ":intrigue_against_lord_target_troop"),
		(faction_get_slot, ":faction_of_troop_intrigue_against_lord_target_troop_leader", ":faction_of_troop_intrigue_against_lord_target_troop", slot_faction_leader),
		(str_store_troop_name_link, 14, ":intrigue_against_lord_target_troop"),
		(str_store_troop_name_link, 13, ":faction_of_troop_intrigue_against_lord_target_troop_leader"),
		(str_store_troop_name_link, 12, "$g_talk_troop"),
		(str_store_string, 2, "str_you_intend_to_denounce_s14_to_s13_on_behalf_of_s12"),
		(setup_quest_text, "qst_intrigue_against_lord"),
		(call_script, "script_start_quest", "$political_quest_found", "$g_talk_troop"),
		(quest_set_slot, "qst_intrigue_against_lord", slot_quest_expiration_days, 60),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "combined_political_quests",
	[],
	"I cannot think of anything right now, but we will have some items of mutual interest in the future.", "political_quest_suggested",
	[]],

	[anyone|plyr, "political_quest_suggested",
	[
		(gt, "$political_quest_found", 0)
	],
	"I like that idea.", "political_quest_follow_on",
	[]],

	[anyone|plyr, "political_quest_suggested",
	[
		(gt, "$political_quest_found", 0)
	],
	"Hmm.. Maybe you can think of something else?", "combined_political_quests",
	[
		(quest_set_slot, "$political_quest_found", slot_quest_dont_give_again_remaining_days, 3),
		(call_script, "script_get_political_quest", "$g_talk_troop"),
		(assign, "$political_quest_found", reg0),
		(assign, "$political_quest_target_troop", reg1),
		(assign, "$political_quest_object_troop", reg2)
	]],

	[anyone|plyr, "political_quest_suggested",
	[],
	"Let us discuss another topic", "political_quests_end",
	[]],

	[anyone, "political_quests_end",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2)
	],
	"Very well.", "lord_pretalk",
	[]],

	[anyone, "political_quests_end",
	[
		(troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop")
	],
	"Very well.", "spouse_pretalk",
	[]],

	[anyone, "political_quests_end",
	[
		(eq, "$g_talk_troop", "$g_player_minister")
	],
	"Very well.", "minister_pretalk",
	[]],

	[anyone, "political_quests_end",
	[],
	"Very well.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[trp_local_merchant, "start",
	[],
	"Mercy! Please don't kill me!", "local_merchant_mercy",
	[]],

	[anyone|plyr, "local_merchant_mercy",
	[
		(quest_get_slot, ":kill_local_merchant_giver_troop", "qst_kill_local_merchant", slot_quest_giver_troop),
		(str_store_troop_name, 2, ":kill_local_merchant_giver_troop"),
		(assign, reg4, 0),
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", ":kill_local_merchant_giver_troop"),
			(assign, reg4, 1),
		(try_end)
	],
	"I have nothing against you {reg65?woman:man}. But {s2} wants you dead. Sorry.", "local_merchant_mercy_no",
	[]],

	[anyone, "local_merchant_mercy_no",
	[],
	"Damn you! May you burn in Hell!", "close_window",
	[]],

	[anyone|plyr, "local_merchant_mercy",
	[],
	"I'll let you live, if you promise me...", "local_merchant_mercy_yes",
	[]],

	[anyone, "local_merchant_mercy_yes",
	[],
	"Of course, I promise, I'll do anything. Just spare my life... ", "local_merchant_mercy_yes_2",
	[]],

	[anyone|plyr, "local_merchant_mercy_yes_2",
	[],
	"You are going to forget about {s2}'s debt to you. And you will sign a paper stating that {reg4?she:he} owes you nothing.", "local_merchant_mercy_yes_3",
	[]],

	[anyone, "local_merchant_mercy_yes_3",
	[],
	"Yes, of course. I'll do as you say.", "local_merchant_mercy_yes_4",
	[]],

	[anyone|plyr, "local_merchant_mercy_yes_4",
	[],
	"And if my lord hears so much of a hint of a complaint about this issue, then I'll come back for you, and it won't matter how much you scream for mercy then. Do you understand me?", "local_merchant_mercy_yes_5",
	[]],

	[anyone, "local_merchant_mercy_yes_5",
	[],
	"Yes {Ser/my lady}. Don't worry. I won't make any complaint.", "local_merchant_mercy_yes_6",
	[]],

	[anyone|plyr, "local_merchant_mercy_yes_6",
	[],
	"Good. Go now, before I change my mind.", "close_window",
	[
		(quest_set_slot, "qst_kill_local_merchant", slot_quest_current_state, 2),
		(call_script, "script_succeed_quest", "qst_kill_local_merchant"),
		(finish_mission)
	]],

	[trp_fugitive, "start",
	[],
	"What do you want?", "fugitive_1",
	[]],

	[plyr|trp_fugitive, "fugitive_1",
	[
		(quest_get_slot, ":hunt_down_fugitive_target_dna", "qst_hunt_down_fugitive", slot_quest_target_dna),
		(call_script, "script_get_name_from_dna_to_s50", ":hunt_down_fugitive_target_dna"),
		(str_store_string, 4, 50)
	],
	"I am looking for a murderer by the name of {s4}. You fit his description.", "fugitive_2",
	[]],

	[plyr|trp_fugitive, "fugitive_1",
	[],
	"Nothing. Sorry to trouble you.", "close_window",
	[]],

	[trp_fugitive, "fugitive_2",
	[],
	"I don't understand, {Ser/my lady}. I never killed anyone. I think you've got the wrong man.", "fugitive_3",
	[]],

	[plyr|trp_fugitive, "fugitive_3",
	[],
	"Then drop your sword. If you are innocent, you have nothing to fear. We'll go now and talk to your neighbours, and if they verify your story, I'll go on my way.", "fugitive_4",
	[]],

	[anyone, "fugitive_4",
	[],
	"I'm not going anywhere, friend. You're going to have to fight for your silver, today.", "fugitive_5",
	[]],

	[plyr|trp_fugitive, "fugitive_5",
	[],
	"No problem. I really just need your head, anyway.", "fugitive_fight_start",
	[]],

	[plyr|trp_fugitive, "fugitive_5",
	[],
	"I come not for money, but to execute the law!", "fugitive_fight_start",
	[]],

	[plyr|trp_fugitive, "fugitive_5",
	[],
	"Alas, that you cannot be made to see reason.", "fugitive_fight_start",
	[]],

	[anyone, "fugitive_fight_start",
	[],
	"Die, dog!", "close_window",
	[
		(set_party_battle_mode),
		(quest_set_slot, "qst_hunt_down_fugitive", slot_quest_current_state, 1),
		(call_script, "script_activate_tavern_attackers")
	]],

	[trp_runaway_girl, "start",
	[
		(check_quest_active, "qst_hunt_down_girl"),
		(neg|check_quest_succeeded, "qst_hunt_down_girl"),
		(neg|check_quest_failed, "qst_hunt_down_girl")
	],
	"Slain! All slain! All that blood! Please don't hurt me.", "fugitive_12",
	[]],

	[trp_runaway_girl, "start",
	[
		(check_quest_active, "qst_hunt_down_girl"),
		(check_quest_succeeded, "qst_hunt_down_girl")
	],
	"I will do as you say.", "close_window",
	[]],

	[trp_runaway_girl, "start",
	[
		(check_quest_active, "qst_hunt_down_girl"),
		(check_quest_failed, "qst_hunt_down_girl")
	],
	"I will do as you say.", "close_window",
	[]],

	[plyr|trp_runaway_girl, "fugitive_12",
	[
		(quest_get_slot, ":hunt_down_girl_target_dna", "qst_hunt_down_girl", slot_quest_target_dna),
		(call_script, "script_get_girl_name_from_dna_to_s50", ":hunt_down_girl_target_dna"),
		(str_store_string, 4, 50)
	],
	"I am looking for a runaway maiden called {s4}. You fit her description.", "fugitive_22",
	[]],

	[plyr|trp_runaway_girl, "fugitive_12",
	[],
	"Calm down dear. I have no business with you.", "close_window",
	[]],

	[trp_runaway_girl, "fugitive_22",
	[],
	"I suppose there's no point pretending otherwise... I merely wanted to make a better life with my love. And he was so fair to look at! But...but my father will kill me for sure if I go back.", "fugitive_32",
	[]],

	[plyr|trp_runaway_girl, "fugitive_32",
	[],
	"I'm sure you have nothing to fear in returning to your village. The people there seemed a nice enough lot.", "fugitive_42",
	[]],

	[trp_runaway_girl, "fugitive_42",
	[],
	"And what would you know? You think I risked fleeing in the night over some love-struck boy? Fool! Terrible things happen in that village. Terrible things!", "fugitive_52",
	[]],

	[plyr|trp_runaway_girl, "fugitive_52",
	[],
	"Really? I won't ask what 'things', but you can stay here if you want.", "fugitive_72",
	[
		(quest_set_slot, "qst_hunt_down_girl", slot_quest_current_state, 1),
		(call_script, "script_change_player_honor", 10),
		(call_script, "script_fail_quest", "qst_hunt_down_girl")
	]],

	[plyr|trp_runaway_girl, "fugitive_52",
	[],
	"Get someone else to listen to your tales. Be off with you!", "fugitive_62",
	[]],

	[anyone, "fugitive_62",
	[],
	"I see I have no choice...", "close_window",
	[
		(call_script, "script_succeed_quest", "qst_hunt_down_girl")
	]],

	[anyone, "fugitive_72",
	[],
	"Oh... Thank you, {my lord/my lady}!", "close_window",
	[]],

	[anyone, "member_chat",
	[
		(check_quest_active, "qst_incriminate_loyal_commander"),
		(quest_slot_eq, "qst_incriminate_loyal_commander", slot_quest_current_state, 0),
		(store_conversation_troop, "$g_talk_troop"),
		(eq, "$g_talk_troop", "$incriminate_quest_sacrificed_troop"),
		(quest_get_slot, ":incriminate_loyal_commander_target_center", "qst_incriminate_loyal_commander", slot_quest_target_center),
		(store_distance_to_party_from_party, ":distance_to_party_from_party_main_party_incriminate_loyal_commander_target_center", "p_main_party", ":incriminate_loyal_commander_target_center"),
		(lt, ":distance_to_party_from_party_main_party_incriminate_loyal_commander_target_center", 10)
	],
	"Yes {Ser/my lady}?", "sacrificed_messenger_1",
	[]],

	[anyone|plyr, "sacrificed_messenger_1",
	[
		(quest_get_slot, ":incriminate_loyal_commander_target_center", "qst_incriminate_loyal_commander", slot_quest_target_center),
		(str_store_party_name, 1, ":incriminate_loyal_commander_target_center"),
		(quest_get_slot, ":incriminate_loyal_commander_object_troop", "qst_incriminate_loyal_commander", slot_quest_object_troop),
		(str_store_troop_name, 2, ":incriminate_loyal_commander_object_troop")
	],
	"Take this letter to {s1} and give it to {s2}.", "sacrificed_messenger_2",
	[]],

	[anyone|plyr, "sacrificed_messenger_1",
	[],
	"Nothing. Nothing at all.", "close_window",
	[]],

	[anyone, "sacrificed_messenger_2",
	[],
	"Yes {Ser/my lady}. You can trust me. I will not fail you.", "sacrificed_messenger_3",
	[]],

	[anyone|plyr, "sacrificed_messenger_3",
	[],
	"Good. I will not forget your service. You will be rewarded when you return.", "close_window",
	[
		(party_remove_members, "p_main_party", "$g_talk_troop", 1),
		(set_spawn_radius, 0),
		(spawn_around_party, "p_main_party", "pt_sacrificed_messenger"),
		(assign, ":var_1", reg0),
		(party_add_members, ":var_1", "$g_talk_troop", 1),
		(party_set_ai_behavior, ":var_1", 1),
		(quest_get_slot, ":incriminate_loyal_commander_target_center", "qst_incriminate_loyal_commander", slot_quest_target_center),
		(party_set_ai_object, ":var_1", ":incriminate_loyal_commander_target_center"),
		(party_set_flags, ":var_1", 65536, 0),
		(quest_set_slot, "qst_incriminate_loyal_commander", slot_quest_current_state, 2),
		(quest_set_slot, "qst_incriminate_loyal_commander", slot_quest_target_party, ":var_1")
	]],

	[anyone|plyr, "sacrificed_messenger_3",
	[],
	"Arggh! I can't do this. I can't send you to your own death!", "sacrificed_messenger_cancel",
	[]],

	[anyone, "sacrificed_messenger_cancel",
	[],
	"What do you mean {Ser/my lady}?", "sacrificed_messenger_cancel_2",
	[]],

	[anyone|plyr, "sacrificed_messenger_cancel_2",
	[
		(quest_get_slot, ":incriminate_loyal_commander_giver_troop", "qst_incriminate_loyal_commander", slot_quest_giver_troop),
		(str_store_troop_name, 3, ":incriminate_loyal_commander_giver_troop")
	],
	"There's a trap set up for you in the town. {s3} ordered me to sacrifice one of my chosen warriors to fool the enemy, but he will just need to find another way.", "sacrificed_messenger_cancel_3",
	[
		(quest_get_slot, ":incriminate_loyal_commander_giver_troop", "qst_incriminate_loyal_commander", slot_quest_giver_troop),
		(quest_set_slot, "qst_incriminate_loyal_commander", slot_quest_current_state, 1),
		(call_script, "script_change_player_relation_with_troop", ":incriminate_loyal_commander_giver_troop", -5),
		(call_script, "script_change_player_honor", 3),
		(call_script, "script_fail_quest", "qst_incriminate_loyal_commander")
	]],

	[anyone, "sacrificed_messenger_cancel_3",
	[],
	"Thank you, {Ser/my lady}. I will follow you to the gates of hell. But this would not be a good death.", "close_window",
	[]],

	[party_tpl|pt_sacrificed_messenger, "start",
	[],
	"Don't worry, {Ser/my lady}, I'm on my way.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_spy, "start",
	[],
	"Good day {Ser/my lady}. Such fine weather don't you think? If you'll excuse me now I must go on my way.", "follow_spy_talk",
	[]],

	[anyone|plyr, "follow_spy_talk",
	[
		(quest_get_slot, ":follow_spy_giver_troop", "qst_follow_spy", slot_quest_giver_troop),
		(str_store_troop_name, 1, ":follow_spy_giver_troop")
	],
	"In the name of {s1}, you are under arrest!", "follow_spy_talk_2",
	[]],

	[anyone, "follow_spy_talk_2",
	[],
	"You won't get me alive!", "close_window",
	[]],

	[anyone|plyr, "follow_spy_talk",
	[],
	"Never mind me. I was just passing by.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_spy_partners, "start",
	[],
	"Greetings.", "spy_partners_talk",
	[]],

	[party_tpl|pt_spy_partners_r, "start",
	[],
	"Greetings.", "spy_partners_talk",
	[]],

	[party_tpl|pt_spy_partners_e, "start",
	[],
	"Greetings.", "spy_partners_talk",
	[]],

	[anyone|plyr, "spy_partners_talk",
	[
		(quest_get_slot, ":follow_spy_giver_troop", "qst_follow_spy", slot_quest_giver_troop),
		(str_store_troop_name, 1, ":follow_spy_giver_troop")
	],
	"In the name of {s1} You are under arrest!", "spy_partners_talk_2",
	[]],

	[anyone, "spy_partners_talk_2",
	[],
	"You will have to fight us first!", "close_window",
	[]],

	[anyone|plyr, "spy_partners_talk",
	[],
	"Never mind me. I was just passing by.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_runaway_serfs, "start",
	[
		(party_slot_eq, "$g_encountered_party", slot_town_center, 0)
	],
	"Good day {Ser/my lady}.", "runaway_serf_intro_1",
	[
		(party_set_slot, "$g_encountered_party", slot_town_center, 1)
	]],

	[anyone|plyr, "runaway_serf_intro_1",
	[
		(quest_get_slot, ":bring_back_runaway_serfs_giver_troop", "qst_bring_back_runaway_serfs", slot_quest_giver_troop),
		(str_store_troop_name, 4, ":bring_back_runaway_serfs_giver_troop")
	],
	"I have been sent by your {s4} whom you are running from. He will not punish you if you return now.", "runaway_serf_intro_2",
	[]],

	[anyone, "runaway_serf_intro_2",
	[
		(quest_get_slot, ":bring_back_runaway_serfs_target_center", "qst_bring_back_runaway_serfs", slot_quest_target_center),
		(str_store_party_name, 6, ":bring_back_runaway_serfs_target_center"),
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(str_store_party_name, 1, ":bring_back_runaway_serfs_object_center")
	],
	"My good {Ser/my lady}. Our lives at our village {s1} was unbearable. We worked all day long and still went to bed hungry. We are going to {s6} to start a new life, where we will be treated like humans.", "runaway_serf_intro_3",
	[]],

	[anyone|plyr, "runaway_serf_intro_3",
	[
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(str_store_party_name, 1, ":bring_back_runaway_serfs_object_center")
	],
	"You have gone against our laws by running from your bondage. You will go back to {s1} now!", "runaway_serf_go_back",
	[
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(call_script, "script_change_player_relation_with_center", ":bring_back_runaway_serfs_object_center", -1)
	]],

	[anyone|plyr, "runaway_serf_intro_3",
	[],
	"Well, maybe you are right. All right then. If anyone asks, I haven't seen you.", "runaway_serf_let_go",
	[
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(call_script, "script_change_player_relation_with_center", ":bring_back_runaway_serfs_object_center", 1)
	]],

	[anyone, "runaway_serf_go_back",
	[
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(str_store_party_name, 5, ":bring_back_runaway_serfs_object_center")
	],
	"All right {Ser/my lady}. As you wish. We'll head back to {s5} now.", "close_window",
	[
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(party_set_ai_object, "$g_encountered_party", ":bring_back_runaway_serfs_object_center"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "runaway_serf_let_go",
	[],
	"God bless you, {Ser/my lady}. We will not forget your help.", "close_window",
	[
		(party_set_slot, "$g_encountered_party", slot_town_castle, 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_runaway_serfs, "start",
	[
		(party_slot_eq, "$g_encountered_party", slot_town_castle, 1)
	],
	"Good day {Ser/my lady}. Don't worry. If anyone asks, we haven't seen you.", "runaway_serf_reconsider",
	[]],

	[anyone|plyr, "runaway_serf_reconsider",
	[],
	"I have changed my mind. You must back to your village!", "runaway_serf_go_back",
	[
		(party_set_slot, "$g_encountered_party", slot_town_castle, 0),
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(call_script, "script_change_player_relation_with_center", ":bring_back_runaway_serfs_object_center", -2)
	]],

	[anyone|plyr, "runaway_serf_reconsider",
	[],
	"Good. Go quickly now before I change my mind.", "runaway_serf_let_go",
	[]],

	[party_tpl|pt_runaway_serfs, "start",
	[
		(party_slot_eq, "$g_encountered_party", slot_town_castle, 0),
		(get_party_ai_object, ":party_ai_object"),
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(neq, ":bring_back_runaway_serfs_object_center", ":party_ai_object")
	],
	"Good day {Ser/my lady}. We were heading back to {s5}, but I am afraid we lost our way.", "runaway_serf_talk_caught",
	[]],

	[anyone|plyr, "runaway_serf_talk_caught",
	[],
	"Do not test my patience. You are going back now!", "runaway_serf_go_back",
	[]],

	[anyone|plyr, "runaway_serf_talk_caught",
	[],
	"Well, if you are that eager to go, then go.", "runaway_serf_let_go",
	[
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(call_script, "script_change_player_relation_with_center", ":bring_back_runaway_serfs_object_center", 1)
	]],

	[party_tpl|pt_runaway_serfs, "start",
	[
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(str_store_party_name, 5, ":bring_back_runaway_serfs_object_center")
	],
	"We are on our way back to {s5} {Ser/my lady}.", "runaway_serf_talk_again_return",
	[]],

	[anyone|plyr, "runaway_serf_talk_again_return",
	[],
	"Make haste now. The sooner you return the better.", "runaway_serf_talk_again_return_2",
	[]],

	[anyone|plyr, "runaway_serf_talk_again_return",
	[],
	"Good. Keep going.", "runaway_serf_talk_again_return_2",
	[]],

	[anyone|plyr, "runaway_serf_talk_again_return_2",
	[],
	"Yes {Ser/my lady}. As you wish.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_runaway_serfs_r, "start",
	[
		(party_slot_eq, "$g_encountered_party", slot_town_center, 0)
	],
	"Good day {Ser/my lady}.", "runaway_serf_intro_1",
	[
		(party_set_slot, "$g_encountered_party", slot_town_center, 1)
	]],

	[party_tpl|pt_runaway_serfs_r, "start",
	[
		(party_slot_eq, "$g_encountered_party", slot_town_castle, 1)
	],
	"Good day, my {lord/lady}. Don't worry. If anyone asks, we haven't seen you.", "runaway_serf_reconsider",
	[]],

	[party_tpl|pt_runaway_serfs_r, "start",
	[
		(party_slot_eq, "$g_encountered_party", slot_town_castle, 0),
		(get_party_ai_object, ":party_ai_object"),
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(neq, ":bring_back_runaway_serfs_object_center", ":party_ai_object")
	],
	"Good day, {lord/lady}. We were heading back to {s5}, but I am afraid we lost our way.", "runaway_serf_talk_caught",
	[]],

	[party_tpl|pt_runaway_serfs_r, "start",
	[
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(str_store_party_name, 5, ":bring_back_runaway_serfs_object_center")
	],
	"We are on our way back to {s5} {Ser/my lady}.", "runaway_serf_talk_again_return",
	[]],

	[party_tpl|pt_runaway_serfs_e, "start",
	[
		(party_slot_eq, "$g_encountered_party", slot_town_center, 0)
	],
	"Good day to you, my {lord/lady}.", "runaway_serf_intro_1",
	[
		(party_set_slot, "$g_encountered_party", slot_town_center, 1)
	]],

	[party_tpl|pt_runaway_serfs_e, "start",
	[
		(party_slot_eq, "$g_encountered_party", slot_town_castle, 1)
	],
	"Good day, my {lord/lady}. Don't worry. If anyone asks, we haven't seen you.", "runaway_serf_reconsider",
	[]],

	[party_tpl|pt_runaway_serfs_e, "start",
	[
		(party_slot_eq, "$g_encountered_party", slot_town_castle, 0),
		(get_party_ai_object, ":party_ai_object"),
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(neq, ":bring_back_runaway_serfs_object_center", ":party_ai_object")
	],
	"Good day, my {lord/lady}. We were heading back to {s5}, but I am afraid we lost our way.", "runaway_serf_talk_caught",
	[]],

	[party_tpl|pt_runaway_serfs_e, "start",
	[
		(quest_get_slot, ":bring_back_runaway_serfs_object_center", "qst_bring_back_runaway_serfs", slot_quest_object_center),
		(str_store_party_name, 5, ":bring_back_runaway_serfs_object_center")
	],
	"We are on our way back to {s5}, my {lord/lady}.", "runaway_serf_talk_again_return",
	[]],

	[anyone, "start",
	[
		(check_quest_active, "qst_track_down_bandits"),
		(quest_slot_eq, "qst_track_down_bandits", slot_quest_target_party, "$g_encountered_party"),
		(neg|is_between, "$g_encountered_party_faction", "fac_player_supporters_faction", "fac_kingdoms_end")
	],
	"This must be your unlucky day, mate. We're just about the worst people you could run into, in these parts.", "troublesome_bandits_intro_1",
	[]],

	[anyone|plyr, "troublesome_bandits_intro_1",
	[],
	"Heh. For me, you are nothing more than walking money bags. A merchant in {s1} offered me good money for your heads.", "troublesome_bandits_intro_2",
	[
		(quest_get_slot, ":track_down_bandits_giver_center", "qst_track_down_bandits", slot_quest_giver_center),
		(str_store_party_name, 1, ":track_down_bandits_giver_center")
	]],

	[anyone, "troublesome_bandits_intro_2",
	[],
	"A bounty hunter! Kill {him/her}! Kill {him/her} now!", "close_window",
	[
		(encounter_attack)
	]],

	[party_tpl|pt_deserters, "start",
	[
		(eq, "$talk_context", 2),
		(party_get_slot, ":g_encountered_party_ignore_player_until", "$g_encountered_party", slot_party_ignore_player_until),
		(store_current_hours, ":current_hours"),
		(store_sub, ":value", ":g_encountered_party_ignore_player_until", ":current_hours"),
		(gt, ":value", 0)
	],
	"What do you want? You want to pay us some more money?", "deserter_paid_talk",
	[]],

	[anyone|plyr, "deserter_paid_talk",
	[],
	"Sorry to trouble you. I'll be on my way now.", "deserter_paid_talk_2a",
	[]],

	[anyone, "deserter_paid_talk_2a",
	[],
	"Yeah. Stop fooling around and go make some money. I want to see that purse full next time I see you.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "deserter_paid_talk",
	[],
	"No. It's your turn to pay me this time.", "deserter_paid_talk_2b",
	[]],

	[anyone, "deserter_paid_talk_2b",
	[],
	"What nonsense are you talking about? You want trouble? You got it.", "close_window",
	[
		(party_set_slot, "$g_encountered_party", slot_party_ignore_player_until, 0),
		(party_ignore_player, "$g_encountered_party", 0)
	]],

	[party_tpl|pt_deserters, "start",
	[
		(eq, "$talk_context", 2)
	],
	"We are the free brothers. We will fight only for ourselves from now on. Now give us your gold or taste our steel.", "deserter_talk",
	[]],

	[anyone|plyr, "deserter_talk",
	[],
	"When I'm done with you, you'll regret ever leaving your army.", "close_window",
	[]],

	[anyone|plyr, "deserter_talk",
	[],
	"There's no need to fight. I am ready to pay for free passage.", "deserter_barter",
	[]],

	[anyone|plyr, "deserter_talk",
	[
		(store_num_free_stacks, ":num_free_stacks_main_party", "p_main_party"),
		(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_0", "$g_encountered_party", 0),
		(this_or_next|gt, ":num_free_stacks_main_party", 0),
		(main_party_has_troop, ":party_stack_troop_id_g_encountered_party_0")
	],
	"I will give you money and good protection if you join my party.", "deserter_recruit",
	[]],

	[anyone, "deserter_recruit",
	[],
	"Sounds like a good deal. To show us your good will, pay us {reg5} coins and we will join you.", "deserter_recruit_2",
	[
		(party_get_num_companion_stacks, ":num_companion_stacks_l_g_encountered_party", "$g_encountered_party"),
		(assign, ":var_2", 0),
		(try_for_range, ":number", 0, ":num_companion_stacks_l_g_encountered_party"),
			(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_number", "$g_encountered_party", ":number"),
			(party_stack_get_size, ":party_stack_size_g_encountered_party_number", "$g_encountered_party", ":number"),
			(call_script, "script_game_get_join_cost", ":party_stack_troop_id_g_encountered_party_number"),
			(assign, ":var_6", reg0),
			(val_mul, ":var_6", ":party_stack_size_g_encountered_party_number"),
			(val_add, ":var_2", ":var_6"),
		(try_end),
		(assign, "$temp", ":var_2"),
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(store_mul, ":value", 3, ":skill_level_persuasion_player"),
		(store_sub, ":value_2", 100, ":value"),
		(val_mul, "$temp", ":value_2"),
		(val_div, "$temp", 100),
		(assign, reg5, "$temp")
	]],

	[anyone|plyr, "deserter_recruit_2",
	[
		(store_troop_gold, reg2, "trp_player"),
		(ge, reg2, "$temp"),
		(assign, reg5, "$temp")
	],
	"All right here's your {reg5} coins.", "deserter_recruit_3a",
	[
		(troop_remove_gold, "trp_player", "$temp"),
		(display_message, "@Your current action is disgraceful.", 0x00ff0000),
		(store_div, ":value", "$temp", -50),
		(call_script, "script_change_troop_renown", "trp_player", ":value")
	]],

	[anyone|plyr, "deserter_recruit_2",
	[],
	"I don't have that much money with me", "deserter_barter_3b",
	[]],

	[anyone, "deserter_recruit_3a",
	[],
	"Ok, we are at your service from now on.", "close_window",
	[
		(call_script, "script_party_add_party", "p_main_party", "$g_encountered_party"),
		(party_detach, "$g_encountered_party"),
		(remove_party, "$g_encountered_party"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "deserter_barter",
	[],
	"Good. You are clever. Now, having a look at your baggage, I reckon a fellow like you could pretty easily afford {reg5} coins. We wouldn't want to be too greedy, now would we? Pay us, and then you can go.", "deserter_barter_2",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(troop_get_inventory_capacity, ":inventory_capacity_player", "trp_player"),
		(try_for_range, ":number", 0, ":inventory_capacity_player"),
			(troop_get_inventory_slot, ":inventory_slot_player_number", "trp_player", ":number"),
			(ge, ":inventory_slot_player_number", 0),
			(try_begin),
				(is_between, ":inventory_slot_player_number", "itm_trade_spice", "itm_trade_dummy01"),
				(store_item_value, ":item_value_inventory_slot_player_number", ":inventory_slot_player_number"),
				(val_add, ":troop_gold_player", ":item_value_inventory_slot_player_number"),
			(try_end),
		(try_end),
		(store_div, "$g_tribute_amount", ":troop_gold_player", 10),
		(val_max, "$g_tribute_amount", 10),
		(assign, reg5, "$g_tribute_amount")
	]],

	[anyone|plyr, "deserter_barter_2",
	[
		(store_troop_gold, reg2),
		(ge, reg2, "$g_tribute_amount"),
		(assign, reg5, "$g_tribute_amount")
	],
	"All right here's your {reg5} coins.", "deserter_barter_3a",
	[
		(troop_remove_gold, "trp_player", "$g_tribute_amount")
	]],

	[anyone|plyr, "deserter_barter_2",
	[],
	"I don't have that much money with me", "deserter_barter_3b",
	[]],

	[anyone, "deserter_barter_3b",
	[],
	"Too bad. Then we'll have to sell you to the slavers.", "close_window",
	[]],

	[anyone, "deserter_barter_3a",
	[],
	"Heh. That wasn't difficult, now, was it? All right. Go now.", "close_window",
	[
		(store_current_hours, ":current_hours"),
		(val_add, ":current_hours", 72),
		(party_set_slot, "$g_encountered_party", slot_party_ignore_player_until, ":current_hours"),
		(party_ignore_player, "$g_encountered_party", 72),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(store_conversation_troop, reg1),
		(ge, reg1, "trp_town_1_tavernkeeper"),
		(lt, reg1, "trp_town_1_merchant")
	],
	"Good day dear {friend/my lady}. How can I help you?", "tavernkeeper_talk",
	[]],

	[anyone, "tavernkeeper_pretalk",
	[],
	"Anything else?", "tavernkeeper_talk",
	[]],

	[anyone|plyr, "tavernkeeper_talk",
	[
		(check_quest_active, "qst_deliver_wine"),
		(quest_slot_eq, "qst_deliver_wine", slot_quest_target_center, "$g_encountered_party"),
		(quest_get_slot, ":deliver_wine_target_item", "qst_deliver_wine", slot_quest_target_item),
		(quest_get_slot, ":deliver_wine_target_amount", "qst_deliver_wine", slot_quest_target_amount),
		(store_item_kind_count, ":item_kind_count_deliver_wine_target_item", ":deliver_wine_target_item"),
		(ge, ":item_kind_count_deliver_wine_target_item", ":deliver_wine_target_amount"),
		(assign, reg9, ":deliver_wine_target_amount"),
		(str_store_item_name, 4, ":deliver_wine_target_item")
	],
	"I was told to deliver you {reg9} units of {s4}.", "tavernkeeper_deliver_wine",
	[]],

	[anyone, "tavernkeeper_deliver_wine",
	[],
	"At last! My stock was almost depleted. I had paid the cost of the {s4} in advance. Here, take these {reg5} coins. That should cover your pay. And give {s9} my regards. I'll put in a good word for you next time I deal with him.", "tavernkeeper_pretalk",
	[
		(quest_get_slot, ":deliver_wine_target_item", "qst_deliver_wine", slot_quest_target_item),
		(quest_get_slot, ":deliver_wine_target_amount", "qst_deliver_wine", slot_quest_target_amount),
		(quest_get_slot, ":deliver_wine_gold_reward", "qst_deliver_wine", slot_quest_gold_reward),
		(quest_get_slot, ":deliver_wine_giver_troop", "qst_deliver_wine", slot_quest_giver_troop),
		(troop_remove_items, "trp_player", ":deliver_wine_target_item", ":deliver_wine_target_amount"),
		(call_script, "script_troop_add_gold", "trp_player", ":deliver_wine_gold_reward"),
		(assign, ":var_5", ":deliver_wine_gold_reward"),
		(val_mul, ":var_5", 6),
		(add_xp_as_reward, ":var_5"),
		(assign, reg5, ":deliver_wine_gold_reward"),
		(str_store_item_name, 4, ":deliver_wine_target_item"),
		(str_store_troop_name, 9, ":deliver_wine_giver_troop"),
		(quest_get_slot, ":deliver_wine_giver_center", "qst_deliver_wine", slot_quest_giver_center),
		(call_script, "script_change_player_relation_with_center", ":deliver_wine_giver_center", 2),
		(call_script, "script_change_player_relation_with_center", "$current_town", 1),
		(call_script, "script_end_quest", "qst_deliver_wine")
	]],

	[anyone|plyr, "tavernkeeper_talk",
	[
		(check_quest_active, "qst_deliver_wine"),
		(quest_slot_eq, "qst_deliver_wine", slot_quest_target_center, "$g_encountered_party"),
		(quest_get_slot, ":deliver_wine_target_item", "qst_deliver_wine", slot_quest_target_item),
		(quest_get_slot, ":deliver_wine_target_amount", "qst_deliver_wine", slot_quest_target_amount),
		(store_item_kind_count, ":item_kind_count_deliver_wine_target_item", ":deliver_wine_target_item"),
		(lt, ":item_kind_count_deliver_wine_target_item", ":deliver_wine_target_amount"),
		(gt, ":item_kind_count_deliver_wine_target_item", 0),
		(assign, reg9, ":deliver_wine_target_amount"),
		(str_store_item_name, 4, ":deliver_wine_target_item")
	],
	"I was told to deliver you {reg9} units of {s4}, but I lost some of the cargo on the way.", "tavernkeeper_deliver_wine_incomplete",
	[]],

	[anyone, "tavernkeeper_deliver_wine_incomplete",
	[],
	"Attacked by bandits eh? You are lucky they left you alive. Anyway, I can pay you no more than {reg5} coins for this. And I will let {s1} know that my order was delivered less than completely, so you will probably be charged for this loss.", "tavernkeeper_pretalk",
	[
		(quest_get_slot, ":deliver_wine_target_item", "qst_deliver_wine", slot_quest_target_item),
		(quest_get_slot, ":deliver_wine_target_amount", "qst_deliver_wine", slot_quest_target_amount),
		(quest_get_slot, ":deliver_wine_gold_reward", "qst_deliver_wine", slot_quest_gold_reward),
		(quest_get_slot, ":deliver_wine_giver_troop", "qst_deliver_wine", slot_quest_giver_troop),
		(store_item_kind_count, ":item_kind_count_deliver_wine_target_item", ":deliver_wine_target_item"),
		(troop_remove_items, "trp_player", ":deliver_wine_target_item", ":item_kind_count_deliver_wine_target_item"),
		(val_mul, ":deliver_wine_gold_reward", ":item_kind_count_deliver_wine_target_item"),
		(val_div, ":deliver_wine_gold_reward", ":deliver_wine_target_amount"),
		(call_script, "script_troop_add_gold", "trp_player", ":deliver_wine_gold_reward"),
		(assign, reg5, ":deliver_wine_gold_reward"),
		(assign, ":var_6", ":deliver_wine_gold_reward"),
		(val_mul, ":var_6", 6),
		(add_xp_as_reward, ":var_6"),
		(str_store_troop_name, 1, ":deliver_wine_giver_troop"),
		(assign, ":var_7", "$qst_deliver_wine_debt"),
		(store_sub, ":value", ":deliver_wine_target_amount", ":item_kind_count_deliver_wine_target_item"),
		(val_mul, ":var_7", ":value"),
		(val_div, ":var_7", ":deliver_wine_target_amount"),
		(val_add, "$debt_to_merchants_guild", ":var_7"),
		(quest_get_slot, ":deliver_wine_giver_center", "qst_deliver_wine", slot_quest_giver_center),
		(call_script, "script_change_player_relation_with_center", ":deliver_wine_giver_center", 1),
		(call_script, "script_end_quest", "qst_deliver_wine")
	]],

	[anyone|plyr, "tavernkeeper_talk",
	[
		(check_quest_active, "qst_deliver_wine"),
		(quest_slot_eq, "qst_deliver_wine", slot_quest_target_center, "$g_encountered_party"),
		(quest_get_slot, ":deliver_wine_target_item", "qst_deliver_wine", slot_quest_target_item),
		(store_item_kind_count, ":item_kind_count_deliver_wine_target_item", ":deliver_wine_target_item"),
		(eq, ":item_kind_count_deliver_wine_target_item", 0),
		(quest_get_slot, reg9, "qst_deliver_wine", slot_quest_target_amount),
		(str_store_item_name, 4, ":deliver_wine_target_item")
	],
	"I was told to deliver you {reg9} units of {s4}, but I lost the cargo on the way.", "tavernkeeper_deliver_wine_lost",
	[]],

	[anyone, "tavernkeeper_deliver_wine_lost",
	[],
	"What? I was waiting for that {s4} for weeks! And now you are telling me that you lost it? You may rest assured that I will let {s1} know about this.", "tavernkeeper_pretalk",
	[
		(add_xp_as_reward, 40),
		(quest_get_slot, ":deliver_wine_target_item", "qst_deliver_wine", slot_quest_target_item),
		(quest_get_slot, ":deliver_wine_giver_troop", "qst_deliver_wine", slot_quest_giver_troop),
		(str_store_item_name, 4, ":deliver_wine_target_item"),
		(str_store_troop_name, 1, ":deliver_wine_giver_troop"),
		(val_add, "$debt_to_merchants_guild", "$qst_deliver_wine_debt"),
		(call_script, "script_end_quest", "qst_deliver_wine")
	]],

	[anyone|plyr, "tavernkeeper_talk",
	[
		(store_current_hours, ":current_hours"),
		(val_sub, ":current_hours", 24),
		(gt, ":current_hours", "$buy_drinks_last_time"),
		(call_script, "script_dplmc_print_cultural_word_to_sreg", "$g_talk_troop", 10, 0)
	],
	"I'd like to buy every man who comes in here tonight a jar of your best {s0}.", "tavernkeeper_buy_drinks",
	[]],

	[anyone, "tavernkeeper_buy_drinks",
	[],
	"Of course, {my lord/my lady}. I reckon {reg5} coins should be enough for that. What should I tell the lads?", "tavernkeeper_buy_drinks_2",
	[
		(assign, "$temp", 1000),
		(assign, reg5, "$temp")
	]],

	[anyone|plyr, "tavernkeeper_buy_drinks_2",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", "$temp"),
		(str_store_party_name, 10, "$current_town")
	],
	"Let everyone know of the generosity of {playername} to the people of {s10}.", "tavernkeeper_buy_drinks_end",
	[]],

	[anyone, "tavernkeeper_buy_drinks_end",
	[
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$current_town")
	],
	"Don't worry {s0}. Your name will be cheered and toasted here all night.", "tavernkeeper_pretalk",
	[
		(troop_remove_gold, "trp_player", "$temp"),
		(call_script, "script_change_player_relation_with_center", "$current_town", 1),
		(store_current_hours, ":current_hours"),
		(assign, "$buy_drinks_last_time", ":current_hours")
	]],

	[anyone|plyr, "tavernkeeper_talk",
	[
		(store_current_hours, ":current_hours"),
		(val_sub, ":current_hours", 24),
		(gt, ":current_hours", "$buy_drinks_last_time")
	],
	"I'd like to buy me and my men a barrel of your best ale.", "tavernkeeper_buy_drinks_troops",
	[]],

	[anyone, "tavernkeeper_buy_drinks_troops",
	[],
	"Of course, {my lord/my lady}. I reckon {reg5} coins should be enough for that. What should I tell the lads?", "tavernkeeper_buy_drinks_troops_2",
	[
		(assign, "$temp", 20),
		(store_party_size_wo_prisoners, reg5, "p_main_party"),
		(store_mul, "$temp", "$temp", reg5),
		(assign, reg5, "$temp")
	]],

	[anyone|plyr, "tavernkeeper_buy_drinks_troops_2",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", "$temp"),
		(str_store_party_name, 10, "$current_town")
	],
	"The price is fair enough, let my men have at it.", "tavernkeeper_buy_drinks_troops_end",
	[]],

	[anyone, "tavernkeeper_buy_drinks_troops_end",
	[],
	"Don't worry {Ser/my lady}. Your men will enjoy their pints.", "tavernkeeper_pretalk",
	[
		(troop_remove_gold, "trp_player", "$temp"),
		(call_script, "script_change_player_party_morale", 20),
		(store_current_hours, ":current_hours"),
		(assign, "$buy_drinks_last_time", ":current_hours"),
		(rest_for_hours, 2, 5, 0)
	]],

	[anyone|plyr, "tavernkeeper_buy_drinks_troops_2",
	[],
	"Actually, cancel that order.", "tavernkeeper_pretalk",
	[]],

	[anyone|plyr, "tavernkeeper_buy_drinks_2",
	[],
	"Actually, cancel that order.", "tavernkeeper_pretalk",
	[]],

	[anyone|plyr, "tavernkeeper_talk",
	[
		(neq, "$g_encountered_party_faction", "fac_player_supporters_faction")
	],
	"Have you heard of anyone in this realm who might have a job for a {man/woman} like myself?", "tavernkeeper_job_ask",
	[]],

	[anyone, "tavernkeeper_job_ask",
	[
		(str_store_string, 9, "str__of_course_the_land_is_currently_at_peace_so_you_may_have_better_luck_in_other_realms"),
		(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(store_relation, ":relation_g_encountered_party_faction_faction", "$g_encountered_party_faction", ":faction"),
			(lt, ":relation_g_encountered_party_faction_faction", 0),
			(str_clear, 9),
		(try_end),
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(str_store_troop_name, 10, ":g_encountered_party_faction_leader"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_encountered_party_faction_leader")
	],
	"Hmm... Well, {s10} is often looking for sellswords to fight in {reg0?her:his} wars.{s9}", "tavernkeeper_job_search",
	[
		(assign, "$g_troop_list_no", 0)
	]],

	[anyone, "tavernkeeper_job_search",
	[],
	"Let me think some more...", "tavernkeeper_job_result",
	[
		(call_script, "script_npc_find_quest_for_player_to_s11", "$g_encountered_party_faction"),
		(assign, ":var_1", reg0),
		(call_script, "script_get_dynamic_quest", ":var_1"),
		(assign, ":var_2", reg0),
		(try_begin),
			(gt, ":var_1", -1),
			(str_store_troop_name, 7, ":var_1"),
			(str_clear, 9),
			(assign, ":value", -1),
			(try_begin),
				(troop_slot_eq, ":var_1", slot_troop_occupation, 2),
				(troop_get_slot, ":var_1_leaded_party", ":var_1", slot_troop_leaded_party),
				(party_is_active, ":var_1_leaded_party"),
				(party_get_attached_to, ":value", ":var_1_leaded_party"),
			(else_try),
				(is_between, ":var_1", "trp_town_1_mayor", "trp_village_1_elder"),
				(try_for_range, ":party", "p_town_1", "p_castle_1"),
					(party_slot_eq, ":party", slot_town_elder, ":var_1"),
					(assign, ":value", ":party"),
				(try_end),
			(try_end),
			(try_begin),
				(gt, ":value", -1),
				(try_begin),
					(eq, ":value", "$g_encountered_party"),
					(str_store_string, 8, "str_here"),
				(else_try),
					(str_store_string, 8, "str_over"),
				(try_end),
				(str_store_party_name, 12, ":value"),
				(str_store_string, 9, "str_s8_in_s12"),
			(try_end),
			(call_script, "script_dplmc_store_troop_is_female_reg", ":var_1", 4),
			(try_begin),
				(eq, ":var_2", "qst_track_down_bandits"),
				(str_store_string, 10, "str__has_put_together_a_bounty_on_some_bandits_who_have_been_attacking_travellers_in_the_area"),
			(else_try),
				(eq, ":var_2", "qst_destroy_bandit_lair"),
				(str_store_string, 10, "str__has_been_worried_about_bandits_establishing_a_hideout_near_his_home"),
			(else_try),
				(eq, ":var_2", "qst_retaliate_for_border_incident"),
				(str_store_string, 10, "str__is_looking_for_a_way_to_avoid_an_impending_war"),
			(else_try),
				(eq, ":var_2", "qst_rescue_prisoner"),
				(str_store_string, 10, "str__may_need_help_rescuing_an_imprisoned_family_member"),
			(else_try),
				(eq, ":var_2", "qst_cause_provocation"),
				(str_store_string, 10, "str__has_been_asking_around_for_someone_who_might_want_work_id_watch_yourself_with_him_though"),
			(else_try),
				(str_store_string, 10, "str_tavernkeeper_invalid_quest"),
			(try_end),
			(call_script, "script_dplmc_store_troop_is_female_reg", ":var_1", 4),
		(try_end)
	]],

	[anyone, "tavernkeeper_job_result",
	[
		(store_sub, ":value", "trp_village_1_elder", 1),
		(lt, "$g_troop_list_no", ":value")
	],
	"I have heard that {s7} {s9}{s10} You may want to speak with {reg4?her:him}.", "tavernkeeper_job_search",
	[]],

	[anyone, "tavernkeeper_job_result",
	[
		(store_sub, ":value", "trp_village_1_elder", 1),
		(ge, "$g_troop_list_no", ":value")
	],
	"There may be other work, of course -- lords and guildmasters often have other tasks which we don't hear about. Also, the villages around here frequently need help, although they'd be more likely to pay you with a wedge of cheese and goodwill than with cold hard coins.", "tavernkeeper_job_result_2",
	[]],

	[anyone, "tavernkeeper_job_result_2",
	[],
	"I'll keep my ears open for other opportunities. You may want to ask again from time to time.", "close_window",
	[]],

	[anyone|plyr, "tavernkeeper_talk",
	[],
	"I guess I should leave now.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_ransom_broker_1", "trp_tavern_traveler_1"),
		(eq, "$g_talk_troop_met", 0),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Greetings to you, {s0}. You look like someone who should get to know me.", "ransom_broker_intro",
	[]],

	[anyone|plyr, "ransom_broker_intro",
	[],
	"Why is that?", "ransom_broker_intro_2",
	[]],

	[anyone, "ransom_broker_intro_2",
	[],
	"I broker ransoms for the poor wretches who are captured in these endless wars. Normally I travel between the salt mines and the slave markets on the coast, on commission from those whose relatives have gone missing. But if I'm out on my errands of mercy, and I come across a fellow dragging around a captive or two, well, there's no harm in a little speculative investment, is there? And you look like the type who might have a prisoner to sell.", "ransom_broker_info_talk",
	[
		(assign, "$ransom_broker_families_told", 0),
		(assign, "$ransom_broker_prices_told", 0),
		(assign, "$ransom_broker_ransom_me_told", 0)
	]],

	[anyone|plyr, "ransom_broker_info_talk",
	[
		(eq, "$ransom_broker_families_told", 0)
	],
	"What if their families can't pay?", "ransom_broker_families",
	[]],

	[anyone, "ransom_broker_families",
	[],
	"Oh, then I spin them a few heartwarming tales of life on the galleys. You'd be surprised what sorts of treasures a peasant can dig out of his cowshed or wheedle out of his cousins, assuming he's got the proper motivation! And if in the end they cannot come up with the silver, then there are always slave merchants who are looking for galley slaves. One cannot do the Gods work with an empty purse, you see.", "ransom_broker_info_talk",
	[
		(assign, "$ransom_broker_families_told", 1)
	]],

	[anyone|plyr, "ransom_broker_info_talk",
	[
		(eq, "$ransom_broker_prices_told", 0)
	],
	"What can I get for a prisoner?", "ransom_broker_prices",
	[]],

	[anyone, "ransom_broker_prices",
	[],
	"It varies. I fancy that I have a fine eye for assessing a ransom. There are a dozen little things about a man that will tell you whether he goes to bed hungry, or dines each night on soft dumplings and goose. The real money of course is in the gentry, and if you ever want to do my job you'll want to learn about every landowning family in the known world, their estates, their heraldry, their offspring both lawful and bastard, and, of course, their credit with the merchants.", "ransom_broker_info_talk",
	[
		(assign, "$ransom_broker_prices_told", 1)
	]],

	[anyone|plyr, "ransom_broker_info_talk",
	[
		(eq, "$ransom_broker_ransom_me_told", 0)
	],
	"Would you be able to ransom me if I were taken?", "ransom_broker_ransom_me",
	[]],

	[anyone, "ransom_broker_ransom_me",
	[],
	"Of course. I'm welcome in every court. There's not many who can say that! So always be sure to keep a pot of coins buried somewhere, and a loyal servant who can find it in a hurry.", "ransom_broker_info_talk",
	[
		(assign, "$ransom_broker_ransom_me_told", 1)
	]],

	[anyone|plyr, "ransom_broker_info_talk",
	[],
	"That's all I need to know. Thank you.", "ransom_broker_pretalk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_ransom_broker_1", "trp_tavern_traveler_1")
	],
	"Greetings. If you have any prisoners, I will be happy to buy them from you.", "ransom_broker_talk",
	[]],

	[anyone, "ransom_broker_pretalk",
	[],
	"Anyway, if you have any prisoners, I will be happy to buy them from you.", "ransom_broker_talk",
	[]],

	[anyone|plyr, "ransom_broker_talk",
	[
		(store_num_regular_prisoners, reg0),
		(ge, reg0, 1)
	],
	"Then you'd better bring your purse. I have got prisoners to sell.", "ransom_broker_sell_prisoners",
	[]],

	[anyone|plyr, "ransom_broker_talk",
	[
		(store_num_regular_prisoners, reg0),
		(ge, reg0, 1)
	],
	"I want to sell all the prisoners I have with me.", "ransom_broker_sell_prisoners_all",
	[]],

	[anyone, "ransom_broker_sell_prisoners_all",
	[
		(call_script, "script_dplmc_sell_all_prisoners", 0, 0),
		(store_num_regular_prisoners, reg2),
		(val_sub, reg2, 1)
	],
	"Let's see...  I'll give you {reg0} coins for your {reg1} {reg2?prisoners:prisoner}.  Do we have a deal?", "ransom_broker_sell_prisoners_all_2",
	[]],

	[anyone|plyr, "ransom_broker_sell_prisoners_all_2",
	[],
	"We have a deal.", "ransom_broker_sell_prisoners_2",
	[
		(call_script, "script_dplmc_sell_all_prisoners", 1, 0)
	]],

	[anyone|plyr, "ransom_broker_sell_prisoners_all_2",
	[],
	"Let me think about it again.", "ransom_broker_pretalk",
	[]],

	[anyone|plyr, "ransom_broker_talk",
	[],
	"Tell me about what you do again.", "ransom_broker_intro_2",
	[]],

	[anyone|plyr, "ransom_broker_talk",
	[],
	"I wish to ransom one of my companions.", "ransom_broker_ransom_companion",
	[]],

	[anyone, "ransom_broker_ransom_companion",
	[],
	"Whom do you wish to ransom?", "ransom_broker_ransom_companion_choose",
	[]],

	[anyone|repeat_for_troops|plyr, "ransom_broker_ransom_companion_choose",
	[
		(store_repeat_object, ":repeat_object"),
		(neg|troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(is_between, ":repeat_object", "trp_npc1", "trp_kingdom_1_lord"),
		(troop_slot_ge, ":repeat_object", 8, "p_town_1"),
		(str_store_troop_name, 4, ":repeat_object")
	],
	"{s4}", "ransom_broker_ransom_companion_name_sum",
	[
		(store_repeat_object, "$companion_to_be_ransomed")
	]],

	[anyone|plyr, "ransom_broker_ransom_companion_choose",
	[],
	"Never mind", "ransom_broker_pretalk",
	[]],

	[anyone, "ransom_broker_ransom_companion_name_sum",
	[],
	"Let me check my ledger, here... Yes. Your friend is being held in the dungeon at {s7}. How interesting! I remember hearing that the rats down there are unusually large -- like mastiffs, they say... Now... For the very reasonable sum of {reg5} coins, which includes both the ransom and my commission and expenses, we can arrange it so that {s5} can once again enjoy {reg4?her:his} freedom. What do you say?", "ransom_broker_ransom_companion_verify",
	[
		(str_store_troop_name, 5, "$companion_to_be_ransomed"),
		(call_script, "script_dplmc_store_troop_is_female_reg", "$companion_to_be_ransomed", 4),
		(troop_get_slot, ":companion_to_be_ransomed_prisoner_of_party", "$companion_to_be_ransomed", slot_troop_prisoner_of_party),
		(str_store_party_name, 7, ":companion_to_be_ransomed_prisoner_of_party"),
		(store_character_level, ":character_level_companion_to_be_ransomed", "$companion_to_be_ransomed"),
		(store_add, "$companion_ransom_amount", ":character_level_companion_to_be_ransomed", 20),
		(val_mul, "$companion_ransom_amount", ":character_level_companion_to_be_ransomed"),
		(val_mul, "$companion_ransom_amount", 5),
		(assign, reg5, "$companion_ransom_amount")
	]],

	[anyone|plyr, "ransom_broker_ransom_companion_verify",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", "$companion_ransom_amount")
	],
	"Here's your money.", "ransom_broker_ransom_companion_accept",
	[
		(troop_remove_gold, "trp_player", "$companion_ransom_amount"),
		(troop_set_slot, "$companion_to_be_ransomed", slot_troop_occupation, 5),
		(troop_set_slot, "$companion_to_be_ransomed", slot_troop_current_mission, 8),
		(troop_set_slot, "$companion_to_be_ransomed", slot_troop_days_on_mission, 1),
		(try_begin),
			(troop_get_slot, ":companion_to_be_ransomed_prisoner_of_party", "$companion_to_be_ransomed", slot_troop_prisoner_of_party),
			(try_begin),
				(is_between, ":companion_to_be_ransomed_prisoner_of_party", "p_town_1", "p_salt_mine"),
				(party_get_slot, ":companion_to_be_ransomed_prisoner_of_party_town_lord", ":companion_to_be_ransomed_prisoner_of_party", slot_town_lord),
				(is_between, ":companion_to_be_ransomed_prisoner_of_party_town_lord", "trp_npc1", "trp_heroes_end"),
				(call_script, "script_dplmc_distribute_gold_to_lord_and_holdings", "$companion_ransom_amount", ":companion_to_be_ransomed_prisoner_of_party_town_lord"),
			(else_try),
				(store_faction_of_party, ":faction_of_party_companion_to_be_ransomed_prisoner_of_party", ":companion_to_be_ransomed_prisoner_of_party"),
				(call_script, "script_dplmc_faction_leader_splits_gold", ":faction_of_party_companion_to_be_ransomed_prisoner_of_party", "$companion_ransom_amount"),
			(try_end),
			(party_count_prisoners_of_type, ":var_4", ":companion_to_be_ransomed_prisoner_of_party", "$companion_to_be_ransomed"),
			(gt, ":var_4", 0),
			(party_remove_prisoners, ":companion_to_be_ransomed_prisoner_of_party", "$companion_to_be_ransomed", 1),
		(try_end),
		(troop_set_slot, "$companion_to_be_ransomed", slot_troop_prisoner_of_party, -1),
		(troop_set_slot, "$companion_to_be_ransomed", slot_troop_personalityclash_penalties, 0),
		(troop_set_slot, "$companion_to_be_ransomed", slot_troop_morality_penalties, 0)
	]],

	[anyone|plyr, "ransom_broker_ransom_companion_verify",
	[],
	"I can't afford that right now.", "ransom_broker_ransom_companion_refuse",
	[]],

	[anyone, "ransom_broker_ransom_companion_accept",
	[],
	"Splendid! In a few days, I would think, you should find {s5} riding to rejoin you, blinking in the sunlight and no doubt very grateful! Is there any other way in which I can help you?", "ransom_broker_talk",
	[
		(str_store_troop_name, 5, "$companion_to_be_ransomed")
	]],

	[anyone, "ransom_broker_ransom_companion_refuse",
	[],
	"Of course, of course... Never mind what they say about the rats, by the way -- I've never actually seen one myself, on account of the pitch-black darkness. Anyway, I'm sure that {s5} will understand why it's important for you to control expenditures. Now... Was there anything else?", "ransom_broker_talk",
	[
		(str_store_troop_name, 5, "$companion_to_be_ransomed")
	]],

	[anyone|plyr, "ransom_broker_talk",
	[],
	"Not this time. Good-bye.", "close_window",
	[]],

	[anyone, "ransom_broker_sell_prisoners",
	[],
	"Let me see what you have...", "ransom_broker_sell_prisoners_2",
	[
		(change_screen_trade_prisoners)
	]],

	[anyone, "ransom_broker_sell_prisoners_2",
	[],
	"I will be staying here for a few days. Let me know if you need my services.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tavern_traveler_1", "trp_tavern_bookseller_1"),
		(str_store_troop_name, 10, "$g_talk_troop"),
		(eq, "$g_talk_troop_met", 0)
	],
	"Greetings, friend. You look like the kind of {man/person} who'd do well to know me. I travel a lot all across all the world and keep an open ear. I can provide you information that you might find useful. For a meager price of course.", "tavern_traveler_talk",
	[
		(assign, "$traveler_land_asked", 0)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tavern_traveler_1", "trp_tavern_bookseller_1"),
		(gt, "$last_lost_companion", 0),
		(assign, ":value", -1),
		(troop_get_slot, ":value", "$last_lost_companion", slot_troop_cur_center),
		(is_between, ":value", "p_town_1", "p_castle_1"),
		(str_store_troop_name, 10, "$last_lost_companion"),
		(str_store_party_name, 11, ":value")
	],
	"Greetings, {playername}. I saw your companion {s10} at a tavern in {s11} some days ago. I thought you might like to know.", "tavern_traveler_lost_companion_thanks",
	[
		(assign, "$last_lost_companion", 0)
	]],

	[anyone|plyr, "tavern_traveler_lost_companion_thanks",
	[
		(troop_get_type, reg3, "$last_lost_companion")
	],
	"Thanks. I'll go and find {reg3?her:him} there.", "tavern_traveler_pretalk",
	[]],

	[anyone|plyr, "tavern_traveler_lost_companion_thanks",
	[],
	"Thanks, but I don't really care.", "tavern_traveler_pretalk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tavern_traveler_1", "trp_tavern_bookseller_1")
	],
	"Greetings, {playername}.", "tavern_traveler_talk",
	[
		(assign, "$traveler_land_asked", 0)
	]],

	[anyone, "tavern_traveler_pretalk",
	[],
	"Yes?", "tavern_traveler_talk",
	[]],

	[anyone|plyr, "tavern_traveler_talk",
	[
		(eq, "$traveler_land_asked", 0)
	],
	"What can you tell me about this land?", "tavern_traveler_tell_kingdoms",
	[
		(assign, "$traveler_land_asked", 1)
	]],

	[anyone, "tavern_traveler_tell_kingdoms",
	[],
	"The Free cities of Essos have been trying to eliminate each other since the Bleeding Years, more than three hundred years ago. Until recently, Westeros was ruled by a single king, but with Robert Baratheons death, the seven kingdoms have fragmented, with both his brothers and his son claiming the throne, and Robb Stark fighting for independence. I hear that the Dothraki have been causing trouble in the east, but I seldom travel that far, and either way, the Demon Road, the Ruins of Valyria and the Dothraki Sea make the journey dangerous. Only fools travel that way! Anyhow, at least the current chaos, gripping the world, must present an adventurer such as yourself with quite the opportunities. With some luck and skill, you can make a name for yourself here, amass a fortune perhaps, or gain great power. Opportunities are endless and so are the rewards, if you are willing to risk your life for them.", "tavern_traveler_tell_kingdoms_2",
	[]],

	[anyone|plyr, "tavern_traveler_tell_kingdoms_2",
	[],
	"Tell me more about these opportunities.", "tavern_traveler_tell_kingdoms_3",
	[]],

	[anyone|plyr, "tavern_traveler_tell_kingdoms_2",
	[],
	"Thank you. That was all I needed to know.", "close_window",
	[]],

	[anyone, "tavern_traveler_tell_kingdoms_3",
	[
		(gt, "$player_has_homage", 0)
	],
	"Well, you probably know everything I could tell you already. You seem to be doing pretty well.", "tavern_traveler_tell_kingdoms_4",
	[]],

	[anyone, "tavern_traveler_tell_kingdoms_3",
	[],
	"The archons, kings, princes and lords will pay good money for sellswords if they are engaged in a war. If you have done a bit of fighting, speaking with one of their lords will probably result in being offered a sellsword contract. However the real rewards come if you can manage to become a vassal to a king or a lord. A vassal can own villages, castles and towns and get rich with the taxes and revenues of these estates. Normally, only nobles of the realm own land in this way, but in time of war, a king will not hesitate to accept someone who distinguishes {himself/herself} on the battlefield as a vassal, and grant {him/her} the right to own land.", "tavern_traveler_tell_kingdoms_4a",
	[]],

	[anyone, "tavern_traveler_tell_kingdoms_4a",
	[],
	"It is not unheard-of for adventurers to renounce allegiance to king altogether, declare themselves kings, and claim land in their own name. This is a difficult path, however, as the great nobles of the land, with their long ancestries, are not likely to accept such upstarts as their liege. Such rulers would need to be very careful in establishing their right to rule, or they would be set upon from all sides.", "tavern_traveler_tell_kingdoms_4",
	[]],

	[anyone, "tavern_traveler_tell_kingdoms_4",
	[],
	"It might be easier for an adventurer like yourself to pledge support to an existing king's rival.  There are many such pretenders in the world -- those who are born to the right family, who go around and stir up trouble saying they have a better claim to the throne than the current ruler. If those claim holders could find supporters, they could easily start civil wars and perhaps even replace the ruler one day.", "tavern_traveler_tell_kingdoms_5",
	[]],

	[anyone|plyr, "tavern_traveler_tell_kingdoms_5",
	[],
	"Interesting. Where can I find these claim holders?", "tavern_traveler_tell_kingdoms_6",
	[]],

	[anyone|plyr, "tavern_traveler_tell_kingdoms_5",
	[],
	"I guess I heard enough already. Thank you.", "close_window",
	[]],

	[anyone, "tavern_traveler_tell_kingdoms_6",
	[],
	"A claim holder's life would be in danger in his own country of course. Therefore, they usually stay at rival courts, raising support and hoping to find someone willing to champion their cause. I usually hear news about some of them, and may be able to tell you their location with some precision. But of course, I would ask for a little something for such a service.", "tavern_traveler_pretalk",
	[
		(assign, "$traveller_claimants_mentioned", 1)
	]],

	[anyone|plyr, "tavern_traveler_talk",
	[
		(eq, "$traveller_claimants_mentioned", 1)
	],
	"I want to know the location of a claimant.", "tavern_traveler_pretender_location",
	[]],

	[anyone, "tavern_traveler_pretender_location",
	[],
	"Whose location do you want to know?", "tavern_traveler_pretender_location_ask",
	[]],

	[anyone|repeat_for_troops|plyr, "tavern_traveler_pretender_location_ask",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
		(neg|troop_slot_eq, ":repeat_object", slot_troop_occupation, 2),
		(troop_slot_ge, ":repeat_object", 12, 1),
		(str_store_troop_name, 11, ":repeat_object"),
		(neq, ":repeat_object", "$supported_pretender")
	],
	"{s11}", "tavern_traveler_pretender_location_ask_2",
	[
		(store_repeat_object, "$temp")
	]],

	[anyone|plyr, "tavern_traveler_pretender_location_ask",
	[],
	"Never mind.", "tavern_traveler_pretalk",
	[]],

	[anyone, "tavern_traveler_pretender_location_ask_2",
	[],
	"I can reveal this information to you for a small price, let's say 30 silver coins.", "tavern_traveler_pretender_location_ask_money",
	[]],

	[anyone|plyr, "tavern_traveler_pretender_location_ask_money",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 30)
	],
	"All right. Here is 30 coins.", "tavern_traveler_pretender_location_tell",
	[
		(troop_remove_gold, "trp_player", 30)
	]],

	[anyone|plyr, "tavern_traveler_pretender_location_ask_money",
	[],
	"Never mind.", "tavern_traveler_pretalk",
	[]],

	[anyone, "tavern_traveler_pretender_location_tell",
	[],
	"{s15} is currently at {s11}.", "tavern_traveler_pretalk",
	[
		(str_store_troop_name, 15, "$temp"),
		(troop_get_slot, ":temp_cur_center", "$temp", slot_troop_cur_center),
		(str_store_party_name, 11, ":temp_cur_center")
	]],

	[anyone|plyr, "tavern_traveler_talk",
	[],
	"I am looking for book merchants...", "tavern_traveler_bookseller_location",
	[]],

	[anyone, "tavern_traveler_bookseller_location",
	[
		(assign, ":var_1", 0),
		(try_for_range, ":party", "p_town_1", "p_castle_1"),
			(neg|party_slot_eq, ":party", slot_center_tavern_bookseller, 0),
			(party_get_slot, ":party_center_tavern_bookseller", ":party", slot_center_tavern_bookseller),
			(troop_slot_ge, ":party_center_tavern_bookseller", 5, 1),
			(val_add, ":var_1", 1),
		(try_end),
		(eq, ":var_1", 0)
	],
	"I am sorry I haven't run across any lately.", "tavern_traveler_pretalk",
	[]],

	[anyone, "tavern_traveler_bookseller_location",
	[],
	"I might have crossed paths with one or two recently. For 100 fine coins, I'll tell you where.", "tavern_traveler_bookseller_location_ask_money",
	[]],

	[anyone|plyr, "tavern_traveler_bookseller_location_ask_money",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 100)
	],
	"All right. Here is 100 coins.", "tavern_traveler_bookseller_location_tell",
	[
		(troop_remove_gold, "trp_player", 100)
	]],

	[anyone|plyr, "tavern_traveler_bookseller_location_ask_money",
	[],
	"Never mind.", "tavern_traveler_pretalk",
	[]],

	[anyone, "tavern_traveler_bookseller_location_tell",
	[],
	"You can find them at {s11}.", "tavern_traveler_pretalk",
	[
		(assign, ":var_1", 0),
		(try_for_range, ":party", "p_town_1", "p_castle_1"),
			(neg|party_slot_eq, ":party", slot_center_tavern_bookseller, 0),
			(party_get_slot, ":party_center_tavern_bookseller", ":party", slot_center_tavern_bookseller),
			(troop_slot_ge, ":party_center_tavern_bookseller", 5, 1),
			(val_add, ":var_1", 1),
			(try_begin),
				(eq, ":var_1", 1),
				(str_store_party_name, 11, ":party"),
			(else_try),
				(eq, ":var_1", 2),
				(str_store_party_name, 12, ":party"),
				(str_store_string, 11, "@{s12} and {s11}"),
			(try_end),
		(try_end),
		(display_message, "@You can find book merchants at {s11}.")
	]],

	[anyone|plyr, "tavern_traveler_talk",
	[],
	"I am looking for ransom brokers...", "tavern_traveler_ransom_broker_location",
	[]],

	[anyone, "tavern_traveler_ransom_broker_location",
	[
		(assign, ":var_1", 0),
		(try_for_range, ":party", "p_town_1", "p_castle_1"),
			(neq, ":party", "p_town_1"),
			(neg|party_slot_eq, ":party", slot_center_ransom_broker, 0),
			(party_get_slot, ":party_center_ransom_broker", ":party", slot_center_ransom_broker),
			(troop_slot_ge, ":party_center_ransom_broker", 5, 1),
			(val_add, ":var_1", 1),
		(try_end),
		(eq, ":var_1", 0)
	],
	"I am sorry I haven't run across any lately.", "tavern_traveler_pretalk",
	[]],

	[anyone, "tavern_traveler_ransom_broker_location",
	[],
	"I know where they are. For 50 silver, I'll tell you.", "tavern_traveler_ransom_broker_location_ask_money",
	[]],

	[anyone|plyr, "tavern_traveler_ransom_broker_location_ask_money",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 50)
	],
	"All right. Here is 50 coins.", "tavern_traveler_ransom_broker_location_tell",
	[
		(troop_remove_gold, "trp_player", 50)
	]],

	[anyone|plyr, "tavern_traveler_ransom_broker_location_ask_money",
	[],
	"Never mind.", "tavern_traveler_pretalk",
	[]],

	[anyone, "tavern_traveler_ransom_broker_location_tell",
	[],
	"You can find them at {s11}.", "tavern_traveler_pretalk",
	[
		(assign, ":var_1", 0),
		(try_for_range, ":party", "p_town_1", "p_castle_1"),
			(neq, ":party", "p_town_1"),
			(neg|party_slot_eq, ":party", slot_center_ransom_broker, 0),
			(party_get_slot, ":party_center_ransom_broker", ":party", slot_center_ransom_broker),
			(troop_slot_ge, ":party_center_ransom_broker", 5, 1),
			(val_add, ":var_1", 1),
			(try_begin),
				(eq, ":var_1", 1),
				(str_store_party_name, 11, ":party"),
			(else_try),
				(str_store_party_name, 12, ":party"),
				(eq, ":var_1", 2),
				(str_store_string, 11, "@{s12} and {s11}"),
			(else_try),
				(str_store_string, 11, "@{s12}, {s11}"),
			(try_end),
		(try_end),
		(display_message, "@You can find ransom brokers at {s11}.")
	]],

	[anyone|plyr, "tavern_traveler_talk",
	[
		(assign, ":value", "p_salt_mine"),
		(assign, ":value_2", "p_village_1"),
		(assign, ":value_3", "p_castle_1"),
		(try_for_range, ":party", "p_village_1", ":value"),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(assign, ":value", ":party"),
		(try_end),
		(try_for_range, ":party", "p_castle_1", ":value_2"),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(assign, ":value_2", ":party"),
		(try_end),
		(try_for_range, ":party", "p_town_1", ":value_3"),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(assign, ":value_3", ":party"),
		(try_end),
		(assign, ":value_4", 0),
		(try_begin),
			(eq, "$g_player_chamberlain", -1),
			(neg|troop_slot_eq, "trp_dplmc_chamberlain", slot_troop_met, 0),
			(this_or_next|is_between, ":value", "p_village_1", "p_salt_mine"),
			(this_or_next|is_between, ":value_2", "p_castle_1", "p_village_1"),
			(is_between, ":value_3", "p_town_1", "p_castle_1"),
			(assign, ":value_4", 1),
		(else_try),
			(eq, "$g_player_constable", -1),
			(neg|troop_slot_eq, "trp_dplmc_constable", slot_troop_met, 0),
			(this_or_next|is_between, ":value_2", "p_castle_1", "p_village_1"),
			(is_between, ":value_3", "p_town_1", "p_castle_1"),
			(assign, ":value_4", 1),
		(else_try),
			(eq, "$g_player_chancellor", -1),
			(neg|troop_slot_eq, "trp_dplmc_chancellor", slot_troop_met, 0),
			(is_between, ":value_3", "p_town_1", "p_castle_1"),
			(assign, ":value_4", 1),
		(try_end),
		(neq, ":value_4", 0)
	],
	"I am looking for one of my former employees...", "dplmc_tavern_traveler_employee_1",
	[]],

	[anyone, "dplmc_tavern_traveler_employee_1",
	[],
	"Maybe I can help you. Who are you looking for?", "dplmc_tavern_traveler_employee_2",
	[]],

	[anyone|plyr, "dplmc_tavern_traveler_employee_2",
	[
		(eq, "$g_player_chamberlain", -1),
		(neg|troop_slot_eq, "trp_dplmc_chamberlain", slot_troop_met, 0),
		(assign, ":value", "p_salt_mine"),
		(try_for_range, ":party", "p_town_1", ":value"),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(assign, ":value", ":party"),
		(try_end),
		(is_between, ":value", "p_town_1", "p_salt_mine"),
		(str_store_troop_name, 11, "trp_dplmc_chamberlain")
	],
	"My fomer chamberlain, {s11}.", "dplmc_tavern_traveler_employee_3",
	[
		(assign, "$temp", "trp_dplmc_chamberlain")
	]],

	[anyone|plyr, "dplmc_tavern_traveler_employee_2",
	[
		(eq, "$g_player_constable", -1),
		(neg|troop_slot_eq, "trp_dplmc_constable", slot_troop_met, 0),
		(assign, ":value", "p_village_1"),
		(try_for_range, ":party", "p_town_1", ":value"),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(assign, ":value", ":party"),
		(try_end),
		(is_between, ":value", "p_town_1", "p_village_1"),
		(str_store_troop_name, 11, "trp_dplmc_constable")
	],
	"My fomer constable, {s11}.", "dplmc_tavern_traveler_employee_3",
	[
		(assign, "$temp", "trp_dplmc_constable")
	]],

	[anyone|plyr, "dplmc_tavern_traveler_employee_2",
	[
		(eq, "$g_player_chancellor", -1),
		(neg|troop_slot_eq, "trp_dplmc_chancellor", slot_troop_met, 0),
		(assign, ":value", "p_castle_1"),
		(try_for_range, ":party", "p_town_1", ":value"),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(assign, ":value", ":party"),
		(try_end),
		(is_between, ":value", "p_town_1", "p_castle_1"),
		(str_store_troop_name, 11, "trp_dplmc_chancellor")
	],
	"My fomer chancellor, {s11}.", "dplmc_tavern_traveler_employee_3",
	[
		(assign, "$temp", "trp_dplmc_chancellor")
	]],

	[anyone|plyr, "dplmc_tavern_traveler_employee_2",
	[],
	"Never mind.", "tavern_traveler_pretalk",
	[]],

	[anyone, "dplmc_tavern_traveler_employee_3",
	[
		(this_or_next|eq, "$temp", "trp_dplmc_chamberlain"),
		(this_or_next|eq, "$temp", "trp_dplmc_constable"),
		(eq, "$temp", "trp_dplmc_chancellor"),
		(neg|troop_slot_eq, "$temp", slot_troop_occupation, 15),
		(neg|troop_slot_eq, "$temp", slot_troop_occupation, 2),
		(neg|troop_slot_ge, "$temp", 8, 1),
		(try_begin),
			(eq, "$temp", "trp_dplmc_chamberlain"),
			(assign, "$g_player_chamberlain", 0),
		(else_try),
			(eq, "$temp", "trp_dplmc_constable"),
			(assign, "$g_player_constable", 0),
		(else_try),
			(eq, "$temp", "trp_dplmc_chancellor"),
			(assign, "$g_player_chancellor", 0),
		(try_end),
		(call_script, "script_dplmc_store_troop_is_female", "$temp")
	],
	"I will send word to {reg0?her:him} that you are looking for {reg0?her:him}.", "tavern_traveler_pretalk",
	[]],

	[anyone|plyr, "dplmc_tavern_traveler_employee_3",
	[],
	"I am afraid I'm not able to help you.", "tavern_traveler_pretalk",
	[]],

	[anyone|plyr, "tavern_traveler_talk",
	[],
	"I am looking for one of my companions...", "tavern_traveler_companion_location",
	[]],

	[anyone, "tavern_traveler_companion_location",
	[],
	"Maybe I can help you. Who are you looking for?", "tavern_traveler_companion_location_ask",
	[]],

	[anyone|repeat_for_troops|plyr, "tavern_traveler_companion_location_ask",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "trp_npc1", "trp_kingdom_1_lord"),
		(troop_slot_ge, ":repeat_object", 82, 1),
		(neg|troop_slot_eq, ":repeat_object", slot_troop_playerparty_history, 8),
		(neg|troop_slot_eq, ":repeat_object", slot_troop_met, 0),
		(assign, ":value", 0),
		(try_begin),
			(this_or_next|troop_slot_ge, ":repeat_object", 12, 1),
			(troop_slot_ge, ":repeat_object", 8, 0),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1),
		(str_store_troop_name, 11, ":repeat_object")
	],
	"{s11}", "tavern_traveler_companion_location_ask_2",
	[
		(store_repeat_object, "$temp")
	]],

	[anyone|plyr, "tavern_traveler_companion_location_ask",
	[],
	"Never mind.", "tavern_traveler_pretalk",
	[]],

	[anyone, "tavern_traveler_companion_location_ask_2",
	[
		(str_store_troop_name, 15, "$temp")
	],
	"I guess I know where {s15} is. For 30 coins, I'll tell you.", "tavern_traveler_companion_location_ask_money",
	[]],

	[anyone|plyr, "tavern_traveler_companion_location_ask_money",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 30)
	],
	"All right. Here is 30 coins.", "tavern_traveler_companion_location_tell",
	[
		(troop_remove_gold, "trp_player", 30)
	]],

	[anyone|plyr, "tavern_traveler_companion_location_ask_money",
	[],
	"Never mind.", "tavern_traveler_pretalk",
	[]],

	[anyone, "tavern_traveler_companion_location_tell",
	[],
	"{s15} is currently at {s11}.{s12}", "tavern_traveler_pretalk",
	[
		(str_store_troop_name, 15, "$temp"),
		(try_begin),
			(troop_slot_ge, "$temp", 12, 1),
			(troop_get_slot, ":temp_cur_center", "$temp", slot_troop_cur_center),
			(str_store_string, 12, "str_space"),
		(else_try),
			(troop_get_slot, ":temp_cur_center", "$temp", slot_troop_prisoner_of_party),
			(try_begin),
				(is_between, ":temp_cur_center", "p_town_1", "p_castle_1"),
				(str_store_string, 13, "str_town"),
			(else_try),
				(str_store_string, 13, "str_castle"),
			(try_end),
			(troop_get_type, reg4, "$temp"),
			(str_store_string, 12, "str__but_he_is_holding_there_as_a_prisoner_at_dungeon_of_s13"),
		(try_end),
		(try_begin),
			(party_is_active, ":temp_cur_center"),
			(str_store_party_name, 11, ":temp_cur_center"),
		(else_try),
			(str_store_party_name, 11, "str_prisoner_at_large"),
		(try_end)
	]],

	[anyone|plyr, "tavern_traveler_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tavern_traveler_1", "trp_tavern_bookseller_1"),
		(party_get_slot, ":g_encountered_party_center_traveler_info_faction", "$g_encountered_party", slot_center_traveler_info_faction),
		(str_store_faction_name, 17, ":g_encountered_party_center_traveler_info_faction")
	],
	"Greetings. They say you're the kind of {man/woman} who'd be interested to hear that I travel frequently to {s17}. I'll tell you all I know for a mere 100 coins.", "tavern_traveler_answer",
	[]],

	[anyone|plyr, "tavern_traveler_answer",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 100)
	],
	"Here's 100 coins. Tell me what you know.", "tavern_traveler_continue",
	[
		(party_get_slot, ":g_encountered_party_center_traveler_info_faction", "$g_encountered_party", slot_center_traveler_info_faction),
		(call_script, "script_update_faction_traveler_notes", ":g_encountered_party_center_traveler_info_faction"),
		(change_screen_notes, 2, ":g_encountered_party_center_traveler_info_faction")
	]],

	[anyone|plyr, "tavern_traveler_answer",
	[],
	"Sorry friend. I am not interested.", "close_window",
	[]],

	[anyone, "tavern_traveler_continue",
	[],
	"Well, that's all I can tell you. Good bye.", "close_window",
	[
		(troop_remove_gold, "trp_player", 100)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tavern_bookseller_1", "trp_tavern_minstrel_1")
	],
	"Good day, will you be looking at my books?", "bookseller_talk",
	[]],

	[anyone|plyr, "bookseller_talk",
	[],
	"Yes. Show me what you have for sale.", "bookseller_buy",
	[]],

	[anyone, "bookseller_buy",
	[],
	"Of course.", "book_trade_completed",
	[
		(change_screen_trade)
	]],

	[anyone, "book_trade_completed",
	[],
	"Anything else?", "bookseller_talk",
	[]],

	[anyone|plyr, "bookseller_talk",
	[],
	"Nothing. Thanks.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_mystic_merchant_1", "trp_slave_swadian")
	],
	"Good day my friend, I have some unidentified items with me. I will sell these items to you by the base price of them. You probably buy an item with a good prefix by a low price or buy an item with a bad prefix by a hight price. Do you want to try your fortune?", "mystic_merchant_talk",
	[]],

	[anyone|plyr, "mystic_merchant_talk",
	[],
	"That sounds good. I want to have a try.", "mystic_merchant_type",
	[]],

	[anyone, "mystic_merchant_type",
	[],
	"Which type do you want to check?", "mystic_merchant_type_sel",
	[]],

	[anyone|plyr, "mystic_merchant_type_sel",
	[],
	"Weapons.", "mystic_merchant_type_items",
	[
		(assign, "$temp", 1)
	]],

	[anyone|plyr, "mystic_merchant_type_sel",
	[],
	"Armors.", "mystic_merchant_type_items",
	[
		(assign, "$temp", 2)
	]],

	[anyone|plyr, "mystic_merchant_type_sel",
	[],
	"Horses.", "mystic_merchant_type_items",
	[
		(assign, "$temp", 3)
	]],

	[anyone|plyr, "mystic_merchant_type_sel",
	[],
	"Never mind.", "mystic_merchant_pretalk",
	[]],

	[anyone, "mystic_merchant_type_items",
	[],
	"Which one?", "mystic_merchant_item_sel",
	[]],

	[anyone|repeat_for_100|plyr, "mystic_merchant_item_sel",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_get_inventory_capacity, ":inventory_capacity_l_g_talk_troop", "$g_talk_troop"),
		(is_between, ":repeat_object", 10, ":inventory_capacity_l_g_talk_troop"),
		(troop_get_inventory_slot, ":inventory_slot_g_talk_troop_repeat_object", "$g_talk_troop", ":repeat_object"),
		(gt, ":inventory_slot_g_talk_troop_repeat_object", -1),
		(item_get_type, ":type_inventory_slot_g_talk_troop_repeat_object", ":inventory_slot_g_talk_troop_repeat_object"),
		(assign, ":value", 0),
		(try_begin),
			(eq, "$temp", 1),
			(is_between, ":type_inventory_slot_g_talk_troop_repeat_object", 2, 11),
			(assign, ":value", 1),
		(else_try),
			(eq, "$temp", 2),
			(is_between, ":type_inventory_slot_g_talk_troop_repeat_object", 12, 16),
			(assign, ":value", 1),
		(else_try),
			(eq, "$temp", 3),
			(eq, ":type_inventory_slot_g_talk_troop_repeat_object", 1),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1),
		(str_store_item_name, 1, ":inventory_slot_g_talk_troop_repeat_object"),
		(store_item_value, ":item_value_inventory_slot_g_talk_troop_repeat_object", ":inventory_slot_g_talk_troop_repeat_object"),
		(call_script, "script_game_get_item_buy_price_factor", ":inventory_slot_g_talk_troop_repeat_object"),
		(assign, ":var_7", reg0),
		(val_mul, ":item_value_inventory_slot_g_talk_troop_repeat_object", ":var_7"),
		(val_div, ":item_value_inventory_slot_g_talk_troop_repeat_object", 100),
		(assign, reg1, ":item_value_inventory_slot_g_talk_troop_repeat_object")
	],
	"{s1}(price: {reg1}).", "mystic_merchant_pretalk",
	[
		(store_repeat_object, ":repeat_object"),
		(troop_get_inventory_slot, ":inventory_slot_g_talk_troop_repeat_object", "$g_talk_troop", ":repeat_object"),
		(troop_get_inventory_slot_modifier, ":inventory_slot_modifier_g_talk_troop_repeat_object", "$g_talk_troop", ":repeat_object"),
		(str_store_item_name, 3, ":inventory_slot_g_talk_troop_repeat_object"),
		(store_sub, ":value", ":inventory_slot_modifier_g_talk_troop_repeat_object", 0),
		(val_add, ":value", "str_imod_plain"),
		(str_store_string, 4, ":value"),
		(store_item_value, ":item_value_inventory_slot_g_talk_troop_repeat_object", ":inventory_slot_g_talk_troop_repeat_object"),
		(call_script, "script_game_get_item_buy_price_factor", ":inventory_slot_g_talk_troop_repeat_object"),
		(assign, ":var_6", reg0),
		(val_mul, ":item_value_inventory_slot_g_talk_troop_repeat_object", ":var_6"),
		(val_div, ":item_value_inventory_slot_g_talk_troop_repeat_object", 100),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(lt, ":troop_gold_player", ":item_value_inventory_slot_g_talk_troop_repeat_object"),
			(display_message, "@You don't have enough money."),
		(else_try),
			(store_free_inventory_capacity, ":free_inventory_capacity_player", "trp_player"),
			(le, ":free_inventory_capacity_player", 0),
			(display_message, "@You don't have enough room."),
		(else_try),
			(troop_remove_gold, "trp_player", ":item_value_inventory_slot_g_talk_troop_repeat_object"),
			(troop_set_inventory_slot, "$g_talk_troop", ":repeat_object", -1),
			(set_show_messages, 0),
			(troop_add_item, "trp_player", ":inventory_slot_g_talk_troop_repeat_object", ":inventory_slot_modifier_g_talk_troop_repeat_object"),
			(set_show_messages, 1),
			(try_begin),
				(item_slot_eq, ":inventory_slot_modifier_g_talk_troop_repeat_object", 69, 1),
				(display_message, "@Good luck. You get a {s4}{s3}.", 0x0000ff00),
			(else_try),
				(item_slot_eq, ":inventory_slot_modifier_g_talk_troop_repeat_object", 69, -1),
				(display_message, "@Bad luck. You get a {s4}{s3}.", 0x00ff0000),
			(else_try),
				(display_message, "@You get a {s3}."),
			(try_end),
		(try_end)
	]],

	[anyone|plyr, "mystic_merchant_item_sel",
	[],
	"Let me see something else.", "mystic_merchant_type",
	[]],

	[anyone, "mystic_merchant_pretalk",
	[],
	"Anything else?", "mystic_merchant_talk",
	[]],

	[anyone|plyr, "mystic_merchant_talk",
	[],
	"No, I must leave now.", "close_window",
	[]],

	[trp_custom_master, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hail and well met. I am Master Grazmak mo Senko, of the great city of Astapor, most favoured of the great Harpy, the jewel of the east and heir to the Ghiscari Empire!", "ranger_introduce_1",
	[]],

	[plyr|trp_custom_master, "ranger_introduce_1",
	[],
	"Greetings. Where is Astapor?", "ranger_introduce_2",
	[]],

	[trp_custom_master, "ranger_introduce_2",
	[],
	"Astapor lies in Slaver's Bay, close to the Isle of Cedars. The Good Masters, of whom I am amongst, deal with the most magnificent soldiers in the world, the Unsullied! Trained from childhood, they're the fiercest, most stalwart, most loyal soldiers in the world! None might stand before them! Being the barbarian that you are, I imagine that you are not familiar with the story of the Three Thousand of Qohor? Khal Temmo and his khalasar was defeated by three thousand Unsullied. Only four hundred remained at the end of the battle, but Khal Temmo was dead and so was all his sons and twelve thousand of his warriors!", "ranger_introduce_3",
	[]],

	[plyr|trp_custom_master, "ranger_introduce_3",
	[],
	"I see. You're selling slave soldiers. If they're really that good, why are they not part of every army in the world?", "ranger_introduce_4",
	[]],

	[trp_custom_master, "ranger_introduce_4",
	[],
	"Bah! Petty lords and knights, would-be kings and princes, filthy khals and greedy magisters, they do not understand warfare. They think any soldier is the same. The Unsullied training starts a age five and is from dawn to dusk. It is brutal, designed not only to teach them how to fight, but to strip away all individuality, empathy, and self-worth. Only one in three survive, and those that fail at any stage are killed. They are fully castrated - penis and testicles cut - and their manhoods burned at the altar of the Lady of Spears. They regularly consume an elixir called the Wine of Courage to deaden their sensitivity to pain. They will obey every command, even fall on their sword should you wish it.", "ranger_introduce_5",
	[]],

	[plyr|trp_custom_master, "ranger_introduce_5",
	[],
	"You have roused my interest Master Grazmak, what can you offer me?", "ranger_introduce_6",
	[]],

	[trp_custom_master, "ranger_introduce_6",
	[],
	"Usually, we sell Unsullied by the century, so as to not split them up. They have a tendency to become fat and bloated. Keeping them together ensures that their discipline and fighting prowess keeps. However, I have heard worrying news from the east, talk of dragons and brimstones. So I am looking to settle down in this area and as such will only be able to sell Unsullied in small groups.", "ranger_master_talk",
	[]],

	[trp_custom_master, "start",
	[
		(eq, "$g_talk_troop_met", 1)
	],
	"Hello again, {playername}.", "ranger_master_talk",
	[]],

	[plyr|trp_custom_master, "ranger_master_talk",
	[],
	"I'd like to hire some Unsullied.", "ranger_master_hire_male",
	[]],

	[plyr|trp_custom_master, "ranger_master_talk",
	[
		(party_get_slot, ":main_party_465", "p_main_party", 465),
		(neq, ":main_party_465", 465, 100),
		(neg|is_between, ":main_party_465", "p_town_1", "p_castle_1")
	],
	"I'd like you to take up residence at my place and instruct young recruits about your way of warfare.", "ranger_master_hire_himself",
	[]],

	[plyr|trp_custom_master, "ranger_master_talk",
	[
		(party_get_slot, ":main_party_465", "p_main_party", 465),
		(this_or_next|eq, ":main_party_465", 465, 100),
		(is_between, ":main_party_465", "p_town_1", "p_castle_1")
	],
	"I would like you to take up residence somewhere else.", "custom_master_reassign_location",
	[]],

	[plyr|trp_custom_master, "ranger_master_talk",
	[],
	"Can you tell me the history of Slaver's Bay?", "ranger_master_customize",
	[]],

	[trp_custom_master, "ranger_master_customize",
	[],
	"When the Doom came to Valyria, the ancient and proud cities of Astapor, Meereen and Yunkai rose once again to prominence. We deal in slaves, and it has made us rich and powerful. The Meereenese train slaves of all sorts, while the Yunkai specialize in bedslaves. In Astapor, we train the Unsullied, the heirs of the lockstep legions of Old Ghis. Further to the south, New Ghis claims to be the true heir to the Ghiscari Empire, but I say it is we, the masters of Astapor, who are the true descendants of Grazdan the Great!", "ranger_master_talk",
	[]],

	[plyr|trp_custom_master, "ranger_master_talk",
	[],
	"Tell me your story again.", "ranger_introduce_2",
	[]],

	[plyr|trp_custom_master, "ranger_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_custom_master, "ranger_master_hire_male",
	[
		(assign, reg1, "$g_num_ranger_recruits")
	],
	"I have {reg1?{reg1}:none} Unsullied available for hire at the moment. {reg1?Each recruit costs 800 coins to hire. How many do you want to hire?:}", "ranger_master_hire",
	[]],

	[repeat_for_100|plyr|trp_custom_master, "ranger_master_hire",
	[
		(store_repeat_object, ":repeat_object"),
		(gt, ":repeat_object", 0),
		(assign, ":var_2", "$g_num_ranger_recruits"),
		(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
		(val_min, ":var_2", ":free_companions_capacity_main_party"),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(val_div, ":troop_gold_player", 800),
		(val_min, ":var_2", ":troop_gold_player"),
		(le, ":repeat_object", ":var_2"),
		(assign, reg0, ":repeat_object")
	],
	"{reg0}", "ranger_master_hire_done",
	[
		(try_begin),
			(eq, "$troop_trees", "trp_troop_tree_0"),
			(assign, ":value", "trp_unsullied"),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_1"),
			(assign, ":value", "trp_unsullied"),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_2"),
			(assign, ":value", "trp_unsullied"),
		(try_end),
		(store_repeat_object, ":repeat_object"),
		(try_begin),
			(party_add_members, "p_main_party", ":value", ":repeat_object"),
			(val_sub, "$g_num_ranger_recruits", ":repeat_object"),
		(try_end),
		(store_mul, ":value_2", ":repeat_object", 800),
		(troop_remove_gold, "trp_player", ":value_2")
	]],

	[plyr|trp_custom_master, "ranger_master_hire",
	[],
	"Nevermind.", "ranger_master_hire_done",
	[]],

	[trp_custom_master, "ranger_master_hire_done",
	[],
	"Anything else?", "ranger_master_talk",
	[]],

	[trp_custom_master, "ranger_master_hire_himself",
	[
		(assign, reg1, 10000)
	],
	"Abandon the freedom that comes with roaming the taverns of these lands, and only train brave young men from your lands? You'll have to provide all the equipment, the training grounds, the tutor fees, and of course a little extra for the right to have me at your court. If you want me to stay at your court, it will cost you {reg1} coins per month.", "ranger_master_hire_self",
	[]],

	[plyr|trp_custom_master, "ranger_master_hire_self",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 10000)
	],
	"You drive a hard bargain, but I'm sure you're worth it.", "ranger_master_agree",
	[
		(troop_remove_gold, "trp_player", 10000),
		(party_set_slot, "p_main_party", 465, 100)
	]],

	[plyr|trp_custom_master, "ranger_master_hire_self",
	[
		(try_begin),
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(lt, ":troop_gold_player", 10000),
			(str_store_string, 1, "@I must admit I can't afford to pay you at the moment."),
		(else_try),
			(str_store_string, 1, "@Are you mad? That's not going to happen!"),
		(try_end)
	],
	"{s1}", "close_window",
	[]],

	[trp_custom_master, "ranger_master_agree",
	[
		(assign, reg20, 0),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
			(eq, ":party_town_lord", "trp_player"),
			(val_add, reg20, 1),
		(try_end),
		(ge, reg20, 1)
	],
	"A wise decission. I'll pack my gear and move to your court.", "close_window",
	[]],

	[trp_custom_master, "ranger_master_agree",
	[
		(assign, reg20, 0),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
			(eq, ":party_town_lord", "trp_player"),
			(val_add, reg20, 1),
		(try_end),
		(eq, reg20, 0)
	],
	"It seems that you have no hall of your own. I'll wait for you in a tavern of your choice until that is resolved.", "choose_custom_tavern",
	[]],

	[repeat_for_parties|plyr|trp_custom_master, "choose_custom_tavern",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_castle_1"),
		(str_store_party_name, 1, ":repeat_object")
	],
	"{s1}", "close_window",
	[
		(store_repeat_object, reg1),
		(party_set_slot, "p_main_party", 465, reg1)
	]],

	[trp_custom_master, "custom_master_reassign_location",
	[],
	"Where would you like me to go?", "choose_custom_location",
	[]],

	[plyr|trp_custom_master, "choose_custom_location",
	[
		(assign, reg20, 0),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
			(eq, ":party_town_lord", "trp_player"),
			(val_add, reg20, 1),
		(try_end),
		(eq, reg20, 1)
	],
	"Wait at my court for me.", "close_window",
	[
		(party_set_slot, "p_main_party", 465, 100)
	]],

	[repeat_for_parties|plyr|trp_custom_master, "choose_custom_location",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "p_town_1", "p_castle_1"),
		(str_store_party_name, 1, ":repeat_object")
	],
	"{s1}", "close_window",
	[
		(store_repeat_object, reg1),
		(party_set_slot, "p_main_party", 465, reg1)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_tavern_minstrel_1", "trp_septon_1")
	],
	"Greetings to you, {most noble lord/most noble lady}.", "minstrel_1",
	[]],

	[anyone|plyr, "minstrel_1",
	[
		(eq, "$minstrels_introduced", 0)
	],
	"What is it you do?", "minstrel_job_description",
	[
		(assign, "$minstrels_introduced", 1)
	]],

	[anyone|plyr, "minstrel_1",
	[
		(eq, "$minstrels_introduced", 1)
	],
	"I have some questions about courtship.", "minstrel_courtship_questions",
	[]],

	[anyone|plyr, "minstrel_1",
	[
		(eq, "$minstrels_introduced", 1)
	],
	"Can you teach me any songs?", "minstrel_courtship_poem",
	[]],

	[anyone, "minstrel_courtship_poem",
	[
		(eq, "$allegoric_poem_recitations", 0),
		(this_or_next|eq, "$g_talk_troop", "trp_tavern_minstrel_1"),
		(eq, "$g_talk_troop", "trp_tavern_minstrel_5")
	],
	"I can teach you the song, 'The Storming of the Castle of Love.' It is short enough to be easily learned. It is an allegoric poem, replete with symbols and metaphor. It describes how a brave prince from the Stormlands wins the heart of his lady by learning the virtues of chivalry, becoming a true and noble knight. Its theme -- that the role of a woman is to inspire but also civilize a man -- is appreciated by some noble ladies, but not all.", "minstrel_courtship_poem_teach",
	[
		(assign, "$poem_selected", 5)
	]],

	[anyone, "minstrel_courtship_poem",
	[
		(eq, "$mystic_poem_recitations", 0),
		(this_or_next|eq, "$g_talk_troop", "trp_tavern_minstrel_3"),
		(eq, "$g_talk_troop", "trp_tavern_minstrel_1")
	],
	"I can teach you the song, 'The Maidens Desire.' It is a lyrical poem, which can be interpreted either erotically or spiritually. The lover realizes the majesty of the Seven by gazing upon the body of his beloved. I believe that it appeals to women of a certain romantic temperament, but you risk scandalizing or boring others.", "minstrel_courtship_poem_teach",
	[
		(assign, "$poem_selected", 4)
	]],

	[anyone, "minstrel_courtship_poem",
	[
		(eq, "$tragic_poem_recitations", 0),
		(this_or_next|eq, "$g_talk_troop", "trp_tavern_minstrel_3"),
		(eq, "$g_talk_troop", "trp_tavern_minstrel_2")
	],
	"I can teach you the tragic ballad of the Rains of Castamere. It's a fairly recent song, commisioned by Lord Tywin Lannister after his victory over the rebellious lords Reyne and Tarbeck. They denounced their allegiance to the old Lord Paramount of the Westerlands, Tytos Lannister, but his son and heir Ser Tywin soon had them regretting their pride.", "minstrel_courtship_poem_teach",
	[
		(assign, "$poem_selected", 1)
	]],

	[anyone, "minstrel_courtship_poem",
	[
		(eq, "$heroic_poem_recitations", 0),
		(this_or_next|eq, "$g_talk_troop", "trp_tavern_minstrel_4"),
		(eq, "$g_talk_troop", "trp_tavern_minstrel_2")
	],
	"I can teach you part of the song of Florian and Jonquil. It is a heroic tale, full of blood and battle. Florian the Fool sees the highborn maiden Jonquil bathing in the pool near Maidenpool. He is taken with her, but sadly she is promised to marry the King of the Rivers and Hills, a vain and cruel man. Knowing that he will never be allowed to even kiss her, Florian challenges the arrogant king to a battle of arms and wits for the hand of fair Jonquil.", "minstrel_courtship_poem_teach",
	[
		(assign, "$poem_selected", 2)
	]],

	[anyone, "minstrel_courtship_poem",
	[
		(eq, "$comic_poem_recitations", 0),
		(this_or_next|eq, "$g_talk_troop", "trp_tavern_minstrel_5"),
		(eq, "$g_talk_troop", "trp_tavern_minstrel_4")
	],
	"I can teach you the song The Bear and the Maiden Fair. It's a rather ribald song, mostly enjoyed in Westeros by lowborn and highborn alike. It describes in a humorous tone the story of three boys, a bear and a goat going to a fair, where the bear rescues a young innocent maiden who was hoping for a knight.", "minstrel_courtship_poem_teach",
	[
		(assign, "$poem_selected", 3)
	]],

	[anyone, "minstrel_courtship_poem_teach",
	[],
	"To teach it to you, I will need some hours of your time -- and, of course, a small fee for my services. About 300 silver coins would suffice.", "minstrel_courtship_poem_teach_2",
	[]],

	[anyone, "minstrel_courtship_poem",
	[],
	"I believe you already know the songs I am best equipped to teach.", "minstrel_pretalk",
	[]],

	[anyone|plyr, "minstrel_courtship_poem_teach_2",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 300)
	],
	"Yes -- teach me that one", "minstrel_courtship_poem_teach_3",
	[]],

	[anyone|plyr, "minstrel_courtship_poem_teach_2",
	[],
	"Never mind", "minstrel_pretalk",
	[]],

	[anyone, "minstrel_courtship_poem_teach_3",
	[
		(eq, "$poem_selected", 5)
	],
	"Very well -- repeat after me:^   I deflected her skeptical questioning darts^   with armor made of purest devotion^   purged in the fire of my heart^   from the slag of any baser emotion", "minstrel_courtship_poem_teach_4",
	[]],

	[anyone, "minstrel_courtship_poem_teach_3",
	[
		(eq, "$poem_selected", 4)
	],
	"Very well -- repeat after me:^   You are the first and the last^   the outer and the inner^   When I drink from the cup of love^   I escape the tread of time^   A moment in solitude with you^   Would have no beginning and no end", "minstrel_courtship_poem_teach_4",
	[]],

	[anyone, "minstrel_courtship_poem_teach_3",
	[
		(eq, "$poem_selected", 1)
	],
	"Very well -- repeat after me:^  And who are you, the proud lord said,^  that I must bow so low?^  Only a cat of a different coat,^  that's all the truth I know.^  In a coat of gold or a coat of red,^  a lion still has claws,^  And mine are long and sharp, my lord,^  as long and sharp as yours.", "minstrel_courtship_poem_teach_4",
	[]],

	[anyone, "minstrel_courtship_poem_teach_3",
	[
		(eq, "$poem_selected", 2)
	],
	"Very well -- repeat after me:^   A light pierced the gloom over Maidenpool...^   Where charge of surf broke on smooth shore^   Fair haired the maiden stood^   Amidst the sapphire pool^   Over chirp of bird, of leaf and grass^   The fool looked on in wonder.", "minstrel_courtship_poem_teach_4",
	[]],

	[anyone, "minstrel_courtship_poem_teach_3",
	[
		(eq, "$poem_selected", 3)
	],
	"Very well -- repeat after me:^   A bear there was, A bear, A BEAR!^   All black and brown, And covered with hair!^   Oh come they said, Oh come to the fair!^   The fair? said he, But I'm a bear!^   All black and brown, And covered in hair!?^   And down the road, from here to there,^   From here! To there! Three boys, a goat,^   And a dancing bear!", "minstrel_courtship_poem_teach_4",
	[]],

	[anyone|plyr, "minstrel_courtship_poem_teach_4",
	[
		(eq, "$poem_selected", 5)
	],
	"'I deflected her skeptical questioning darts...'", "minstrel_learn_poem_continue",
	[
		(troop_remove_gold, "trp_player", 300),
		(val_add, "$allegoric_poem_recitations", 1)
	]],

	[anyone|plyr, "minstrel_courtship_poem_teach_4",
	[
		(eq, "$poem_selected", 4)
	],
	"'You are the first and the last..'", "minstrel_learn_poem_continue",
	[
		(troop_remove_gold, "trp_player", 300),
		(val_add, "$mystic_poem_recitations", 1)
	]],

	[anyone|plyr, "minstrel_courtship_poem_teach_4",
	[
		(eq, "$poem_selected", 1)
	],
	"'And who are you, the proud lord said,'", "minstrel_learn_poem_continue",
	[
		(troop_remove_gold, "trp_player", 300),
		(val_add, "$tragic_poem_recitations", 1)
	]],

	[anyone|plyr, "minstrel_courtship_poem_teach_4",
	[
		(eq, "$poem_selected", 2)
	],
	"'A light pierced the gloom over Maidenpool...'", "minstrel_learn_poem_continue",
	[
		(troop_remove_gold, "trp_player", 300),
		(val_add, "$heroic_poem_recitations", 1)
	]],

	[anyone|plyr, "minstrel_courtship_poem_teach_4",
	[
		(eq, "$poem_selected", 3)
	],
	"'A bear there was, A bear, A BEAR!'", "minstrel_learn_poem_continue",
	[
		(troop_remove_gold, "trp_player", 300),
		(val_add, "$comic_poem_recitations", 1)
	]],

	[anyone|plyr, "minstrel_courtship_poem_teach_4",
	[],
	"Pshaw... What kind of doggerel is that?", "minstrel_courtship_poem_teach_reject",
	[]],

	[anyone, "minstrel_courtship_poem_teach_reject",
	[],
	"Very well. If the song is not to your taste, then keep your coin. But remember -- with poets and with lovers, what is important is not what pleases you. What is important is what your pleases your audience. If you wish to learn the poem, I am still willing to teach.", "minstrel_pretalk",
	[]],

	[anyone, "minstrel_learn_poem_continue",
	[],
	"Very good -- but there are many stanzas to go. Now, listen closely...", "close_window",
	[
		(try_begin),
			(try_begin),
				(eq, "$poem_selected", 4),
				(set_achievement_stat, 38, 0, 1),
			(else_try),
				(eq, "$poem_selected", 1),
				(set_achievement_stat, 38, 1, 1),
			(else_try),
				(eq, "$poem_selected", 2),
				(set_achievement_stat, 38, 2, 1),
			(else_try),
				(eq, "$poem_selected", 3),
				(set_achievement_stat, 38, 3, 1),
			(else_try),
				(eq, "$poem_selected", 5),
				(set_achievement_stat, 38, 4, 1),
			(try_end),
			(assign, ":var_1", 0),
			(try_for_range, ":number", 0, 5),
				(get_achievement_stat, ":achievement_stat_38_number", 38, ":number"),
				(eq, ":achievement_stat_38_number", 1),
				(val_add, ":var_1", 1),
			(try_end),
			(try_begin),
				(ge, ":var_1", 3),
				(unlock_achievement, 38),
			(try_end),
		(try_end),
		(assign, "$g_leave_town", 1),
		(rest_for_hours, 2, 2, 0),
		(finish_mission)
	]],

	[anyone|plyr, "minstrel_1",
	[
		(eq, "$minstrels_introduced", 1)
	],
	"Can you tell me anything about the eligible maidens in this realm?", "minstrel_gossip",
	[]],

	[anyone, "minstrel_gossip",
	[],
	"About whom did you wish to know?", "minstrel_gossip_select",
	[]],

	[anyone|plyr, "minstrel_gossip_select",
	[],
	"Just tell me the latest piece of gossip", "minstrel_gossip_maiden_selected_2",
	[
		(assign, "$lady_selected", -1),
		(assign, "$romantic_rival", -1),
		(try_for_range, ":number", 0, "$num_log_entries"),
			(troop_get_slot, ":log_array_actor_number", "trp_log_array_actor", ":number"),
			(is_between, ":log_array_actor_number", "trp_knight_1_1_wife", "trp_heroes_end"),
			(neg|troop_slot_eq, "trp_player", slot_troop_spouse, ":log_array_actor_number"),
			(troop_get_slot, ":log_array_entry_type_number", "trp_log_array_entry_type", ":number"),
			(is_between, ":log_array_entry_type_number", 50, 65),
			(store_faction_of_troop, ":faction_of_troop_log_array_actor_number", ":log_array_actor_number"),
			(store_faction_of_party, ":faction_of_party_g_encountered_party", "$g_encountered_party"),
			(eq, ":faction_of_troop_log_array_actor_number", ":faction_of_party_g_encountered_party"),
			(assign, "$lady_selected", ":log_array_actor_number"),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(str_store_troop_name, 4, ":log_array_actor_number"),
				(troop_get_slot, reg4, "trp_log_array_entry_type", ":number"),
				(assign, reg5, "$num_log_entries"),
				(display_message, "str_log_entry_type_reg4_for_s4_total_entries_reg5"),
			(try_end),
		(try_end)
	]],

	[anyone|repeat_for_troops|plyr, "minstrel_gossip_select",
	[
		(store_repeat_object, "$temp"),
		(troop_slot_eq, "$temp", slot_troop_occupation, 6),
		(troop_slot_eq, "$temp", slot_troop_spouse, -1),
		(store_faction_of_troop, ":faction_of_troop_temp", "$temp"),
		(store_faction_of_party, ":faction_of_party_g_encountered_party", "$g_encountered_party"),
		(eq, ":faction_of_troop_temp", ":faction_of_party_g_encountered_party"),
		(str_store_troop_name, 10, "$temp"),
		(call_script, "script_change_minstrel_maiden_dialog_string", "$temp")
	],
	"{s10}", "minstrel_gossip_maiden_selected",
	[
		(store_repeat_object, "$lady_selected")
	]],

	[anyone|plyr, "minstrel_gossip_select",
	[],
	"Never mind", "minstrel_pretalk",
	[]],

	[anyone, "minstrel_gossip_maiden_selected",
	[
		(try_begin),
			(eq, "$cheat_mode", 1),
			(assign, reg3, "$lady_selected"),
			(display_message, "@{!}DEBUG: Gossip for troop {reg3}"),
			(gt, reg3, -1),
			(display_message, "@{!}DEBUG: {s3}"),
		(try_end),
		(try_begin),
			(gt, "$lady_selected", -1),
			(str_store_troop_name, 9, "$lady_selected"),
			(try_begin),
				(call_script, "script_cf_dplmc_troop_is_female", "$lady_selected"),
				(assign, reg4, 1),
			(else_try),
				(assign, reg4, 0),
			(try_end),
			(str_store_string, 10, "str_error__reputation_type_for_s9_not_within_range"),
			(try_begin),
				(troop_slot_eq, "$lady_selected", slot_lord_reputation_type, 21),
				(str_store_string, 16, "str_they_say_that_s9_is_a_most_conventional_maiden__devoted_to_her_family_of_a_kind_and_gentle_temperament_a_lady_in_all_her_way"),
			(else_try),
				(troop_slot_eq, "$lady_selected", slot_lord_reputation_type, 23),
				(str_store_string, 16, "str_they_say_that_s9_is_a_bit_of_a_romantic_a_dreamer__of_a_gentle_temperament_yet_unpredictable_she_is_likely_to_be_led_by_her_passions_and_will_be_trouble_for_her_family_ill_wager"),
			(else_try),
				(troop_slot_eq, "$lady_selected", slot_lord_reputation_type, 24),
				(str_store_string, 16, "str_they_say_that_s9_is_determined_to_marry_well_and_make_her_mark_in_the_world_she_may_be_a_tremendous_asset_for_her_husband__provided_he_can_satisfy_her_ambition"),
			(else_try),
				(troop_slot_eq, "$lady_selected", slot_lord_reputation_type, 22),
				(str_store_string, 16, "str_they_say_that_s9_loves_to_hunt_and_ride_maybe_she_wishes_she_were_a_man_whoever_she_marries_will_have_a_tough_job_keeping_the_upper_hand_i_would_say"),
			(else_try),
				(troop_slot_eq, "$lady_selected", slot_lord_reputation_type, 25),
				(str_store_string, 16, "str_they_say_that_s9_is_a_lady_of_the_highest_moral_standards_very_admirable_very_admirable__and_very_hard_to_please_ill_warrant"),
			(try_end),
			(call_script, "script_add_rumor_string_to_troop_notes", "$lady_selected", -1, 16),
		(try_end)
	],
	"{s16}", "minstrel_gossip_maiden_selected_2",
	[]],

	[anyone, "minstrel_gossip_maiden_selected_2",
	[
		(is_between, "$lady_selected", "trp_npc1", "trp_heroes_end"),
		(this_or_next|troop_slot_eq, "$lady_selected", slot_troop_spouse, "trp_player"),
		(troop_slot_eq, "trp_player", slot_troop_spouse, "$lady_selected"),
		(call_script, "script_dplmc_store_troop_is_female", "$lady_selected")
	],
	"{reg0?She:He} is married to you, of course! Clearly, no one would dream that {reg0?she:he} would do anything to engender gossip.", "minstrel_postgossip",
	[]],

	[anyone, "minstrel_gossip_maiden_selected_2",
	[
		(gt, "$lady_selected", -1),
		(assign, ":var_1", "$lady_selected"),
		(neg|troop_slot_ge, ":var_1", 30, "trp_npc1"),
		(troop_get_slot, ":var_1_betrothed", ":var_1", slot_troop_betrothed),
		(is_between, ":var_1_betrothed", "trp_npc1", "trp_knight_1_1_wife"),
		(str_store_troop_name, 9, ":var_1"),
		(str_store_troop_name, 11, ":var_1_betrothed"),
		(str_store_string, 12, "str_s9_is_now_betrothed_to_s11_soon_we_believe_there_shall_be_a_wedding"),
		(try_begin),
			(troop_slot_eq, ":var_1", slot_troop_met, 2),
			(assign, "$romantic_rival", ":var_1_betrothed"),
		(try_end)
	],
	"{s12}.", "minstrel_postgossip",
	[]],

	[anyone, "minstrel_gossip_maiden_selected_2",
	[
		(try_begin),
			(call_script, "script_cf_dplmc_troop_is_female", "$lady_selected"),
			(assign, reg4, 1),
		(else_try),
			(assign, reg4, 0),
		(try_end),
		(try_begin),
			(is_between, "$lady_selected", "trp_knight_1_1_wife", "trp_heroes_end"),
			(str_store_string, 12, "str_i_have_not_heard_any_news_about_her"),
			(str_store_troop_name, 9, "$lady_selected"),
			(try_begin),
				(eq, "$cheat_mode", 1),
				(display_message, "str_searching_for_rumors_for_s9"),
			(try_end),
			(assign, "$romantic_rival", -1),
			(assign, ":value", 0),
			(try_for_range, ":number", 0, "$num_log_entries"),
				(troop_slot_eq, "trp_log_array_actor", ":number", "$lady_selected"),
				(troop_get_slot, ":log_array_troop_object_number", "trp_log_array_troop_object", ":number"),
				(str_clear, 11),
				(try_begin),
					(is_between, ":log_array_troop_object_number", 0, "trp_heroes_end"),
					(str_store_troop_name, 11, ":log_array_troop_object_number"),
				(try_end),
				(troop_get_slot, ":log_array_center_object_number", "trp_log_array_center_object", ":number"),
				(str_clear, 10),
				(try_begin),
					(is_between, ":log_array_center_object_number", 0, "trp_heroes_end"),
					(str_store_troop_name, 10, ":log_array_center_object_number"),
				(try_end),
				(assign, ":var_5", "$lady_selected"),
				(try_begin),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 51),
					(str_store_string, 12, "str_they_say_that_s9_has_shown_favor_to_s11_perhaps_it_will_not_be_long_until_they_are_betrothed__if_her_family_permits"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
					(try_begin),
						(troop_slot_eq, ":var_5", slot_troop_met, 2),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_1, ":var_5"),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_2, ":var_5"),
						(troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_3, ":var_5"),
						(assign, "$romantic_rival", ":log_array_troop_object_number"),
					(try_end),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 53),
					(str_store_string, 12, "str_they_say_that_s9_has_been_forced_by_her_family_into_betrothal_with_s11"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
					(try_begin),
						(troop_slot_eq, ":var_5", slot_troop_met, 2),
						(assign, "$romantic_rival", ":log_array_troop_object_number"),
					(try_end),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 52),
					(str_store_string, 12, "str_they_say_that_s9_has_agreed_to_s11s_suit_and_the_two_are_now_betrothed"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
					(try_begin),
						(troop_slot_eq, ":var_5", slot_troop_met, 2),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_1, ":var_5"),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_2, ":var_5"),
						(troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_3, ":var_5"),
						(assign, "$romantic_rival", ":log_array_troop_object_number"),
					(try_end),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 59),
					(str_store_string, 12, "str_they_say_that_s9_under_pressure_from_her_family_has_agreed_to_betrothal_with_s11"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
					(try_begin),
						(troop_slot_eq, ":var_5", slot_troop_met, 2),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_1, ":var_5"),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_2, ":var_5"),
						(troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_3, ":var_5"),
						(assign, "$romantic_rival", ":log_array_troop_object_number"),
					(try_end),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 54),
					(str_store_string, 12, "str_they_say_that_s9_has_refused_s11s_suit"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 58),
					(str_store_string, 12, "str_they_say_that_s11_has_tired_of_pursuing_s9"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 55),
					(str_store_string, 12, "str_they_say_that_s9s_family_has_forced_her_to_renounce_s11_whom_she_much_loved"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 57),
					(str_store_string, 12, "str_they_say_that_s9_has_run_away_with_s11_causing_her_family_much_grievance"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
				(else_try),
					(troop_slot_eq, "trp_log_array_entry_type", ":number", 56),
					(str_store_string, 12, "str_they_say_that_s9_and_s11_have_wed"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
				(else_try),
					(troop_get_slot, ":log_array_troop_object_number", ":var_5", slot_troop_love_interests_end),
					(is_between, ":log_array_troop_object_number", "trp_npc1", "trp_knight_1_1_wife"),
					(str_store_troop_name, 11, ":log_array_troop_object_number"),
					(str_store_string, 12, "str_they_say_that_s9_was_recently_visited_by_s11_who_knows_where_that_might_lead"),
					(assign, ":value", ":var_5"),
					(assign, ":value_2", ":log_array_troop_object_number"),
					(try_begin),
						(troop_slot_eq, ":var_5", slot_troop_met, 2),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_1, ":var_5"),
						(this_or_next|troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_2, ":var_5"),
						(troop_slot_eq, ":log_array_troop_object_number", slot_troop_love_interest_3, ":var_5"),
						(assign, "$romantic_rival", ":log_array_troop_object_number"),
					(try_end),
				(try_end),
			(try_end),
			(try_begin),
				(neq, ":value_2", "$romantic_rival"),
				(assign, "$romantic_rival", -1),
			(try_end),
			(try_begin),
				(gt, ":value", 0),
				(call_script, "script_add_rumor_string_to_troop_notes", ":value", ":value_2", 12),
			(try_end),
		(else_try),
			(eq, "$lady_selected", -1),
			(str_store_string, 12, "str_there_is_not_much_to_tell_but_it_is_still_early_in_the_season"),
		(else_try),
			(assign, reg4, "$lady_selected"),
			(str_store_troop_name, 9, "$lady_selected"),
			(str_store_string, 12, "str_error_lady_selected_=_s9"),
		(try_end)
	],
	"{s12}.", "minstrel_postgossip",
	[]],

	[anyone|plyr, "minstrel_postgossip",
	[],
	"Very interesting -- but let us speak of something else.", "minstrel_pretalk",
	[]],

	[anyone|plyr, "minstrel_postgossip",
	[],
	"Very interesting -- is there any more news?", "minstrel_gossip",
	[]],

	[anyone|plyr, "minstrel_postgossip",
	[
		(is_between, "$romantic_rival", "trp_npc1", "trp_knight_1_1_wife"),
		(neg|check_quest_active, "qst_duel_courtship_rival"),
		(neg|troop_slot_ge, "trp_player", 30, "trp_knight_1_1_wife"),
		(neg|troop_slot_ge, "trp_player", 30, "trp_npc1")
	],
	"What? I'll make that miscreant face my sword", "minstrel_duel_confirm",
	[]],

	[anyone, "minstrel_duel_confirm",
	[
		(str_store_troop_name, 11, "$romantic_rival")
	],
	"Do you mean that? {s11} will be honor-bound to fight you, but challenging a lord to duel over a woman is seen as a bit hot-headed, even in this warlike age.", "minstrel_duel_confirm_2",
	[]],

	[anyone|plyr, "minstrel_duel_confirm_2",
	[
		(str_store_troop_name, 11, "$romantic_rival"),
		(str_store_troop_name, 12, "$lady_selected")
	],
	"Yes -- I intend to force {s11} to relinquish his suit of {s12}", "minstrel_duel_issued",
	[]],

	[anyone|plyr, "minstrel_duel_confirm_2",
	[],
	"No -- I let my passions run away with me, there", "minstrel_pretalk",
	[]],

	[anyone, "minstrel_duel_issued",
	[],
	"As you wish. I'll spead the word of your intentions, so that {s13} does not try to back out...", "minstrel_pretalk",
	[
		(str_store_troop_name, 11, "$lady_selected"),
		(str_store_troop_name_link, 13, "$romantic_rival"),
		(call_script, "script_dplmc_store_troop_is_female_reg", "$romantic_rival", 4),
		(str_store_string, 2, "str_you_intend_to_challenge_s13_to_force_him_to_relinquish_his_suit_of_s11"),
		(setup_quest_text, "qst_duel_courtship_rival"),
		(call_script, "script_start_quest", "qst_duel_courtship_rival", "$lady_selected"),
		(quest_set_slot, "qst_duel_courtship_rival", slot_quest_giver_troop, "$lady_selected"),
		(quest_set_slot, "qst_duel_courtship_rival", slot_quest_target_troop, "$romantic_rival"),
		(quest_set_slot, "qst_duel_courtship_rival", slot_quest_xp_reward, 400),
		(quest_set_slot, "qst_duel_courtship_rival", slot_quest_expiration_days, 60),
		(quest_set_slot, "qst_duel_courtship_rival", slot_quest_current_state, 0)
	]],

	[anyone|plyr, "minstrel_1",
	[
		(eq, "$minstrels_introduced", 1)
	],
	"Do you know of any ongoing feasts?", "minstrel_courtship_locations",
	[]],

	[anyone, "minstrel_courtship_locations",
	[
		(str_clear, 12),
		(assign, ":value", 0),
		(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(faction_slot_eq, ":faction", slot_faction_state, 0),
			(faction_slot_eq, ":faction", slot_faction_ai_state, 6),
			(assign, ":value", 1),
			(faction_get_slot, ":faction_ai_object", ":faction", slot_faction_ai_object),
			(str_store_party_name, 4, ":faction_ai_object"),
			(str_store_faction_name, 3, ":faction"),
			(store_current_hours, ":current_hours"),
			(faction_get_slot, ":faction_last_feast_concluded", ":faction", slot_faction_last_feast_concluded),
			(store_sub, ":value_2", ":current_hours", ":faction_last_feast_concluded"),
			(try_begin),
				(gt, ":value_2", 48),
				(str_store_string, 12, "str_s12there_is_a_feast_of_the_s3_in_progress_at_s4_but_it_has_been_going_on_for_a_couple_of_days_and_is_about_to_end_"),
			(else_try),
				(gt, ":value_2", 24),
				(str_store_string, 12, "str_s12there_is_a_feast_of_the_s3_in_progress_at_s4_which_should_last_for_at_least_another_day_"),
			(else_try),
				(str_store_string, 12, "str_s12there_is_a_feast_of_the_s3_in_progress_at_s4_which_has_only_just_begun_"),
			(try_end),
		(try_end),
		(try_begin),
			(eq, ":value", 0),
			(str_store_string, 12, "str_not_at_this_time_no"),
		(else_try),
			(str_store_string, 12, "str_s12the_great_lords_bring_their_daughters_and_sisters_to_these_occasions_to_see_and_be_seen_so_they_represent_an_excellent_opportunity_to_make_a_ladys_acquaintance"),
		(try_end)
	],
	"{s12}", "minstrel_pretalk",
	[]],

	[anyone|plyr, "minstrel_1",
	[],
	"Good-bye.", "close_window",
	[]],

	[anyone, "minstrel_courtship_questions",
	[],
	"What do you wish to know?", "minstrel_courtship_questions_2",
	[]],

	[anyone, "minstrel_courtship_prequestions",
	[],
	"Can I answer any other questions for you?", "minstrel_courtship_questions_2",
	[]],

	[anyone|plyr, "minstrel_courtship_questions_2",
	[
		(eq, "$minstrels_discussed_love", 1)
	],
	"Is there a place for me in the game of love?", "minstrel_player_role",
	[
		(assign, "$minstrels_discussed_player_role", 1)
	]],

	[anyone|plyr, "minstrel_courtship_questions_2",
	[
		(eq, "$minstrels_discussed_player_role", 1)
	],
	"How would a suitor meet a lady?", "minstrel_player_advice_meet",
	[
		(assign, "$minstrels_discussed_meetings", 1)
	]],

	[anyone|plyr, "minstrel_courtship_questions_2",
	[
		(eq, "$minstrels_discussed_meetings", 1)
	],
	"Having met a lady, how would the suitor woo her?", "minstrel_player_advice_woo",
	[]],

	[anyone|plyr, "minstrel_courtship_questions_2",
	[],
	"Tell me about marriage and love among the nobility", "minstrel_nobles",
	[
		(assign, "$minstrels_discussed_love", 1)
	]],

	[anyone, "minstrel_nobles",
	[],
	"Nobles are an odd lot. A daughter is a political asset, to be given away to a lord with whom her father wishes to make an alliance. Yet the great families of this land idealize pure love between man and woman, and I have seen many a hardened warrior weep copious tears at the doomed ardour of Jonquil and Florian in the songs -- even as he made plans to break his own daughter's heart.", "minstrel_nobles_2",
	[]],

	[anyone, "minstrel_nobles_2",
	[],
	"Fathers differ, of course. Some nobles will let their daughters choose a husband who pleases them. Others, however, feel that to allow their daughters any choice at all would be to diminish their own authority, and insist on imposing a groom whether she likes it or not.", "minstrel_nobles_3",
	[]],

	[anyone, "minstrel_nobles_3",
	[],
	"But the majority will steer a middle course -- they will want to make the final decision about a groom, but will weigh their daughter's preferences heavily. Among other factors, a happy marriage is more likely to produce heirs. So, there is a place for courtship, and for the use of skill and passion to win a lady's heart.", "minstrel_prequestions",
	[]],

	[anyone|plyr, "minstrel_courtship_questions_2",
	[
		(eq, "$minstrels_discussed_love", 1)
	],
	"What if a lady and her father disagree about a suitor?", "minstrel_daughter_father",
	[]],

	[anyone, "minstrel_daughter_father",
	[],
	"It happens sometimes that a bride elopes. This is a major blow to the father's prestige, leading to lasting enmities. Indeed, it is possible that a war may be fought over a woman. Now, that is a fine topic for a song.", "minstrel_daughter_father_2",
	[]],

	[anyone, "minstrel_daughter_father_2",
	[],
	"In the end, however, most brides will submit to their parents' choice. A noblewoman's family is everything to her, and few are brave enough to risk its disapproval for the sake of man she barely knows. She may pine for her lover, but still accept the groom -- and without tragic love, what would we have to sing about?", "minstrel_prequestions",
	[]],

	[anyone, "minstrel_player_role",
	[
		(troop_get_type, ":type_player", "trp_player"),
		(eq, ":type_player", 0)
	],
	"Of course! Highborn ords make a great deal of lineage, but in the end, lands and money speak louder than one's ancestors. Even though you are a foreigner, if you are coming up in the world, then many parents will consider you a fine catch.", "minstrel_player_role_2",
	[]],

	[anyone, "minstrel_player_role_2",
	[],
	"You will have to compete with many other lords of your realm, however, who will have an advantage -- they have known these ladies from childhood, and will have been sized up as grooms by carefully discerning mothers and aunts. Some ladies may be fascinated by the stranger, yet opt for the familiar.", "minstrel_player_role_3",
	[]],

	[anyone, "minstrel_player_role_3",
	[],
	"So know this -- you may have your heart broken. But to enter the arena of love fearing heartbreak is like entering the battlefield fearing the enemy's arrows. Be brave, and shrug off the sting of rejection, and victory may yet be yours.", "minstrel_prequestions",
	[]],

	[anyone, "minstrel_player_role",
	[],
	"I will speak bluntly. Most of the {ladies/lords} of this land are looking for a demure {lad/maiden}, whose skin as fair as snow -- and your skin is burnt brown by the sun. They want a {boy/maiden} whose voice is soft as bells -- and your voice is hoarse from commanding {soldiers/men} in battle. Also, although the {ladies/lords} of this realm appreciate poems about love, most also want heirs, and few {men/women} can ride and fight while {caring for their children/with child}.", "minstrel_female_player_3",
	[]],

	[anyone, "minstrel_female_player_3",
	[],
	"However, not all {ladies/lords} will be so conventionally minded. We poets sing of shield {boys/maidens} and of {hunters/huntresses}, of {lads/women} who forged their own path without having sacrificed the chance for love. I would not tell you that it would be easy for you to find a devoted {wife/husband} who will accept your ways, but I would not say that it is impossible.", "minstrel_prequestions",
	[]],

	[anyone|plyr, "minstrel_courtship_questions_2",
	[
		(eq, "$minstrels_discussed_love", 1)
	],
	"What advantage is there in seeking a {wife/husband}?", "minstrel_spouse_benefits",
	[]],

	[anyone, "minstrel_spouse_benefits",
	[
		(troop_get_type, ":type_player", "trp_player"),
		(eq, ":type_player", 0)
	],
	"Ah! You are quite the romantic, I see! Well, aside from the obvious benefits of love, companionship and other, em, domestic matters, to marry among the nobility brings great assets. You may forge a strong alliance with the bride's family, and a wife may also assist you in manipulating the politics of the realm to your advantage.", "minstrel_wife_benefits_2",
	[]],

	[anyone, "minstrel_wife_benefits_2",
	[],
	"What's more, most of the great families have at some point intermarried with royalty, which would boost your own claim to rule -- should you ever choose to assert it...", "minstrel_prequestions",
	[]],

	[anyone, "minstrel_spouse_benefits",
	[
		(troop_get_type, ":type_player", "trp_player"),
		(eq, ":type_player", 1)
	],
	"Ah! You are quite the romantic, I see! Well, aside from the obvious benefits of love, companionship and other, em, domestic matters, to marry among the nobility brings great assets. You may have access to the groom's castles and properties, and be able to work with him to advance both of your standings in the realm.", "minstrel_wife_benefits_2",
	[]],

	[anyone, "minstrel_player_advice_meet",
	[],
	"Every so often, a king or great lord will hold a feast. In towns they will often be accompanied by jousting and a melee, and in castles they will be accompanied by hunts. The feasts provide a chance for the lords to repair some of the rivalries that may undermine the strength of the realm. They also provide an opportunity for families to show off their eligible daughters, and ladies will often be allowed to mingle unsupervised with the guests.", "minstrel_player_advice_meet_2",
	[]],

	[anyone, "minstrel_player_advice_meet_2",
	[],
	"If you have the opportunity, you may attempt to pay the lady a compliment. This indicates to her that you are a potential suitor, and she will usually know if she wishes you to continue your suit. Incidentally, if you come to her fresh from having distinguished yourself in the tourney or in the hunt, then you may make a stronger first impression than otherwise.", "minstrel_prequestions",
	[]],

	[anyone, "minstrel_player_advice_woo",
	[],
	"To woo a lady takes a certain amount of time and patience, and several meetings spaced over a period of months. A lady who is interested in you will often find ways of letting you know if she wishes you to come visit her. Alternately, you may simply go and ask her father or brother for permission. If you do not have permission from her guardian, it may be possible to arrange an assignation through other means.", "minstrel_player_advice_woo_2",
	[]],

	[anyone, "minstrel_player_advice_woo_2",
	[],
	"Having arranged an assignment, you may then attempt to charm her and win her favor. Perhaps one of the most difficult aspects of this is finding a topic of conversation. Most noblewomen lead a cloistered life, at least until they are married, and thus will have little to say that will interest you. On other hand, she will soon tire of hearing of your own deeds in the outside world.", "minstrel_player_advice_woo_3",
	[]],

	[anyone, "minstrel_player_advice_woo_3",
	[],
	"One time-tested mode of courtship is simply to recite a popular poem, and discuss it. This way, you are both on an equal footing, and neither will have an advantage in knowledge or experience. Of course, different ladies will have different tastes in poetry.", "minstrel_player_advice_woo_4",
	[]],

	[anyone, "minstrel_player_advice_woo_4",
	[],
	"At some point, you will be able to discuss directly the issue of marriage. She will then let you know if you measure up to what she wants in a husband. Some ladies will coolly assess who is the most prestigious of her suitors, others will be guided by their passions. Some will look to your companions, to see whether you are the kind of husband who will treat her as an equal, while others will follow the lead of their fathers.", "minstrel_player_advice_woo_5",
	[]],

	[anyone, "minstrel_player_advice_woo_5",
	[],
	"At any rate, it is a challenging business -- and do not forget, you may find that your suit prospers with a lady, only to have it falter on a father's political ambitions. So you must ask yourself: are you willing to risk disappointment and heartbreak? Alternately, are you willing to throw away your standing in society, to make enemies of allies, in pursuit of a forbidden love? Because if you are, then perhaps some day we will write poems about you.", "minstrel_prequestions",
	[]],

	[anyone|plyr, "minstrel_courtship_questions_2",
	[],
	"What is it that you poets and musicians do again?", "minstrel_job_description",
	[]],

	[anyone, "minstrel_job_description",
	[],
	"I compose and write songs for the lords of the land, and their ladies. Sometimes I sing about war, sometimes about the virtues of kings, and sometimes, for the more sophisticated audiences, about the virtues of wine. For most audiences, however, I sing of love.", "minstrel_courtship_prequestions",
	[]],

	[anyone|plyr, "minstrel_courtship_questions_2",
	[],
	"No, that is all.", "minstrel_pretalk",
	[]],

	[anyone, "minstrel_prequestions",
	[],
	"Do you have any other questions?", "minstrel_courtship_questions_2",
	[]],

	[anyone, "minstrel_pretalk",
	[],
	"Is there anything else?", "minstrel_1",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 14),
		(eq, "$g_talk_troop", "trp_farmer_from_bandit_village"),
		(neg|check_quest_active, "qst_eliminate_bandits_infesting_village"),
		(neg|check_quest_active, "qst_deal_with_bandits_at_lords_village"),
		(assign, ":value", "p_salt_mine"),
		(try_for_range, ":party", "p_village_1", ":value"),
			(party_slot_eq, ":party", slot_village_bound_center, "$g_encountered_party"),
			(party_slot_ge, ":party", 39, 1),
			(party_template_get_slot, ":party_template_slot_troop_trees_859", "$troop_trees", 859),
			(neg|party_slot_eq, ":party", slot_village_infested_by_bandits, ":party_template_slot_troop_trees_859"),
			(str_store_party_name, 1, ":party"),
			(quest_set_slot, "qst_eliminate_bandits_infesting_village", slot_quest_target_center, ":party"),
			(quest_set_slot, "qst_eliminate_bandits_infesting_village", slot_quest_current_state, 0),
			(party_get_slot, ":party_town_elder", ":party", slot_town_elder),
			(quest_set_slot, "qst_eliminate_bandits_infesting_village", slot_quest_giver_troop, ":party_town_elder"),
			(quest_set_slot, "qst_eliminate_bandits_infesting_village", slot_quest_giver_center, ":party"),
			(assign, ":value", 0),
		(try_end),
		(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$g_encountered_party_faction"),
		(this_or_next|gt, reg0, 10),
		(troop_slot_ge, "trp_player", 7, 600),
		(assign, "$temp", ":party"),
		(assign, "$temp_2", 1),
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$g_encountered_party"),
		(val_sub, reg0, 2),
		(val_max, reg0, 0),
		(str_clear, 0)
	],
	"{reg0?Your highness:My {lord/lady}}, we are in dire need of assistance.  Will you hear my plea?", "farmer_from_bandit_village_1",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 14),
		(eq, "$g_talk_troop", "trp_farmer_from_bandit_village"),
		(neg|check_quest_active, "qst_eliminate_bandits_infesting_village"),
		(neg|check_quest_active, "qst_deal_with_bandits_at_lords_village"),
		(assign, ":value", "p_salt_mine"),
		(try_for_range, ":party", "p_village_1", ":value"),
			(party_slot_eq, ":party", slot_village_bound_center, "$g_encountered_party"),
			(party_slot_ge, ":party", 39, 1),
			(party_template_get_slot, ":party_template_slot_troop_trees_859", "$troop_trees", 859),
			(neg|party_slot_eq, ":party", slot_village_infested_by_bandits, ":party_template_slot_troop_trees_859"),
			(str_store_party_name, 1, ":party"),
			(quest_set_slot, "qst_eliminate_bandits_infesting_village", slot_quest_target_center, ":party"),
			(quest_set_slot, "qst_eliminate_bandits_infesting_village", slot_quest_current_state, 0),
			(party_get_slot, ":party_town_elder", ":party", slot_town_elder),
			(quest_set_slot, "qst_eliminate_bandits_infesting_village", slot_quest_giver_troop, ":party_town_elder"),
			(quest_set_slot, "qst_eliminate_bandits_infesting_village", slot_quest_giver_center, ":party"),
			(assign, ":value", 0),
		(try_end),
		(assign, "$temp", ":party"),
		(assign, "$temp_2", 1)
	],
	"{My lord/Madam}, you look like a {man/lady} of the sword and someone who could help us. Will you hear my plea?", "farmer_from_bandit_village_1",
	[]],

	[anyone|plyr, "farmer_from_bandit_village_1",
	[],
	"What is the matter, my good {reg65?woman:man}?", "farmer_from_bandit_village_2",
	[]],

	[anyone|plyr, "farmer_from_bandit_village_1",
	[],
	"What are you burbling about peasant? Speak out.", "farmer_from_bandit_village_2",
	[]],

	[anyone, "farmer_from_bandit_village_2",
	[
		(assign, ":value", 0),
		(try_begin),
			(party_slot_eq, "$temp", slot_town_lord, "trp_player"),
			(store_faction_of_party, ":faction_of_party_temp", "$temp"),
			(this_or_next|eq, ":faction_of_party_temp", "$players_kingdom"),
			(eq, ":faction_of_party_temp", "fac_player_supporters_faction"),
			(assign, ":value", 1),
		(try_end),
		(neq, ":value", 0),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"A band of brigands have taken refuge in our village. They take everything we have, force us to serve them, and do us much evil. If one of us so much as breathes a word of protest, they kill the poor soul on the spot right away. Our lives have become unbearable. I risked my skin and ran away to find someone who can help us. Please {s0}, you are a {man/lady} of valor and a fearsome warrior, with many friends and soldiers at your service. If there is anyone who can help us, it's you.", "farmer_from_bandit_village_5",
	[
		(assign, "$temp", 0)
	]],

	[anyone, "farmer_from_bandit_village_2",
	[],
	"A band of brigands have taken refuge in our village. They take everything we have, force us to serve them, and do us much evil. If one of us so much as breathes a word of protest, they kill the poor soul on the spot right away. Our lives have become unbearable. I risked my skin and ran away to find someone who can help us.", "farmer_from_bandit_village_3",
	[]],

	[anyone|plyr, "farmer_from_bandit_village_3",
	[
		(assign, reg0, 0),
		(try_begin),
			(gt, "$temp", 1),
			(party_slot_ge, "$temp", 7, 1),
			(party_get_slot, ":temp_town_lord", "$temp", slot_town_lord),
			(troop_slot_ge, ":temp_town_lord", 5, 1),
			(call_script, "script_dplmc_store_troop_is_female", ":temp_town_lord"),
		(try_end)
	],
	"Why don't you go to the {reg0?mistress:lord} of your village? {reg0?She:He} should take care of the vermin.", "farmer_from_bandit_village_4",
	[]],

	[anyone, "farmer_from_bandit_village_4",
	[
		(gt, "$temp", 1),
		(party_slot_ge, "$temp", 7, 1),
		(party_get_slot, ":temp_town_lord", "$temp", slot_town_lord),
		(troop_slot_ge, ":temp_town_lord", 8, 0),
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$g_encountered_party"),
		(call_script, "script_dplmc_store_troop_is_female", ":temp_town_lord"),
		(assign, reg1, "$temp_2")
	],
	"Our {reg0?lady:lord} is imprisoned, so we cannot go to {reg0?her:him} for protection. Please {s0}, you {reg1?are:look like} a {man/lady} of valor, {reg1?with:and you have no doubt} many friends and soldiers at your service.  If there is anyone who can help us, it's you.", "farmer_from_bandit_village_5",
	[
		(assign, "$temp", 0)
	]],

	[anyone, "farmer_from_bandit_village_4",
	[
		(gt, "$temp", 1),
		(neg|party_slot_ge, "$temp", 7, 1),
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$g_encountered_party"),
		(assign, reg1, "$temp_2")
	],
	"We have no lord, so we cannot go to him for protection. Please {s0}, you {reg1?are:look like} a {man/lady} of valor, {reg1?with:and you have no doubt} many friends and soldiers at your service.  If there is anyone who can help us, it's you.", "farmer_from_bandit_village_5",
	[
		(assign, "$temp", 0)
	]],

	[anyone, "farmer_from_bandit_village_4",
	[
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$g_encountered_party"),
		(party_get_slot, ":temp_town_lord", "$temp", slot_town_lord),
		(call_script, "script_dplmc_store_troop_is_female", ":temp_town_lord"),
		(assign, reg1, "$temp_2")
	],
	"I did, {s0}, but our {reg0?lady:lord}'s {reg0?servants:men} did not let me see {reg0?her:him} and said {reg0?she:he} was occupied with more important matters and that we should deal with our own problem ourselves. Please {s0}, you {reg1?are:look like} a {man/lady} of valor and a fearsome warrior, {reg1?with:and you have no doubt} many friends and soldiers at your service.  If there is anyone who can help us, it's you.", "farmer_from_bandit_village_5",
	[
		(assign, "$temp", 0)
	]],

	[anyone|plyr, "farmer_from_bandit_village_5",
	[],
	"Very well, I'll help you. Where is this village?", "farmer_from_bandit_village_accepted",
	[]],

	[anyone|plyr, "farmer_from_bandit_village_5",
	[],
	"I can't be bothered with this right now.", "farmer_from_bandit_village_denied",
	[]],

	[anyone|plyr, "farmer_from_bandit_village_5",
	[
		(eq, "$temp", 0)
	],
	"Why would I fight these bandits? What's in it for me?", "farmer_from_bandit_village_barter",
	[]],

	[anyone, "farmer_from_bandit_village_accepted",
	[
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$g_encountered_party")
	],
	"God bless you, {s0}. Our village is {s7}. It is not too far from here.", "close_window",
	[
		(quest_get_slot, ":eliminate_bandits_infesting_village_target_center", "qst_eliminate_bandits_infesting_village", slot_quest_target_center),
		(str_store_party_name_link, 7, ":eliminate_bandits_infesting_village_target_center"),
		(setup_quest_text, "qst_eliminate_bandits_infesting_village"),
		(str_store_string, 2, "@A villager from {s7} begged you to save their village from the bandits that took refuge there."),
		(call_script, "script_start_quest", "qst_eliminate_bandits_infesting_village", "$g_talk_troop")
	]],

	[anyone, "farmer_from_bandit_village_denied",
	[],
	"As you say {Ser/my lady}. Forgive me for bothering you.", "close_window",
	[]],

	[anyone, "farmer_from_bandit_village_barter",
	[
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$g_encountered_party")
	],
	"We are but poor farmers {s0}, and the bandits have already got most of what we have on this world. but we'll be glad to share with you whatever we have got. And we'll always be in your gratitude if you help us.", "farmer_from_bandit_village_5",
	[
		(assign, "$temp", 1)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 14),
		(eq, "$g_talk_troop", "trp_farmer_from_bandit_village"),
		(check_quest_active, "qst_eliminate_bandits_infesting_village"),
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$g_encountered_party")
	],
	"Thank you for helping us {s0}. Crush those bandits!", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_unsullied_1", "trp_unsullied_20")
	],
	"This one serves.", "close_window",
	[]],

	[trp_daario, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Go away.", "close_window",
	[]],

	[trp_grey_worm, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Henujagon jaelza lua vala mirre henujagon kostas.", "close_window",
	[]],

	[trp_reznak, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "reznak_introduce_1",
	[]],

	[trp_reznak, "reznak_introduce_1",
	[],
	"If you wish to speak to the queen, you must wash yourself. Such a foul smell coming off of you.", "reznak_introduce_2",
	[]],

	[trp_reznak, "reznak_introduce_2",
	[],
	"It really is quite disgusting.", "reznak_master_talk",
	[]],

	[plyr|trp_reznak, "reznak_master_talk",
	[],
	"Who are you?", "reznak_master_customize",
	[]],

	[trp_reznak, "reznak_master_customize",
	[],
	"I am Reznak mo Reznak, seneschal to our beloved queen.", "reznak_master_customize1",
	[]],

	[plyr|trp_reznak, "reznak_master_customize1",
	[],
	"I thought Meereen was ruled by the Great Masters?", "reznak_master_customize2",
	[]],

	[trp_reznak, "reznak_master_customize2",
	[],
	"Yes, yes, but in her greatness, Queen Daenerys has decreed that the Great Masters will no longer have a say in the ruling of the city.", "reznak_master_talk",
	[]],

	[plyr|trp_reznak, "reznak_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_reznak, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Really, take a bath.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_skahaz, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes, what do you want?", "skahaz_introduce_1",
	[]],

	[trp_skahaz, "skahaz_introduce_1",
	[],
	"I assume you're here to pay homage to the queen?", "skahaz_introduce_2",
	[]],

	[trp_skahaz, "skahaz_introduce_2",
	[],
	"Well?", "skahaz_master_talk",
	[]],

	[plyr|trp_skahaz, "skahaz_master_talk",
	[],
	"I am!", "skahaz_master_customize",
	[]],

	[trp_skahaz, "skahaz_master_customize",
	[],
	"Very well then. I've been told that you Westerosi have your own vows you swear to signal fealty.", "skahaz_master_customize1",
	[]],

	[trp_skahaz, "skahaz_master_customize1",
	[],
	"You'll need to swear fealty to her Grace.", "skahaz_master_customize2",
	[]],

	[trp_skahaz, "skahaz_master_customize2",
	[],
	"Approach her, and then say the words.", "skahaz_master_talk",
	[]],

	[plyr|trp_skahaz, "skahaz_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_skahaz, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Meereen will prosper under the rule of Queen Daenerys.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_jhogo, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Zhavvorsa vadakhera ma hrazef ma vaf akkate.", "close_window",
	[]],

	[trp_aggo, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Anha ray char m'ave yeri lajakoon hakeso.", "close_window",
	[]],

	[trp_rakharo, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Kash qoy qoyi thira disse.", "close_window",
	[]],

	[trp_galazza, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Aeksio yne iliritas.", "close_window",
	[]],

	[trp_grazdam, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Skoros otapa?", "close_window",
	[]],

	[trp_hizdahr, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes, what do you want?", "hizdahr_introduce_1",
	[]],

	[plyr|trp_hizdahr, "hizdahr_introduce_1",
	[],
	"Who are you?", "hizdahr_introduce_2",
	[]],

	[trp_hizdahr, "hizdahr_introduce_2",
	[],
	"You have the honor to be adressing Hizdahr zo Loraq, of the ancient and noble House of Loraq", "hizdahr_master_talk",
	[]],

	[plyr|trp_hizdahr, "hizdahr_master_talk",
	[],
	"Can you tell me about the House of Loraq?", "hizdahr_master_customize",
	[]],

	[trp_hizdahr, "hizdahr_master_customize",
	[],
	"Very well. We are an ancient and illustrious house.", "hizdahr_master_customize1",
	[]],

	[trp_hizdahr, "hizdahr_master_customize1",
	[],
	"In our veins flow the blood of Mazdhan zo Loraq, Hazrak zo Loraq, Zharaq zo Loraq and Grazdan the Great, who founded the Ghiscari Empire.", "hizdahr_master_customize2",
	[]],

	[trp_hizdahr, "hizdahr_master_customize2",
	[],
	"Our family was old when Valyria was yet nothing but a cluster of shepherds huts.", "hizdahr_master_talk",
	[]],

	[plyr|trp_hizdahr, "hizdahr_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_hizdahr, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Meereen must move forward.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_alkoz, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yn aderi, mori, aot mazili se henkiri ilvi biarvi manaerili.", "close_window",
	[]],

	[trp_hazrak, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Urnet luo buzdaro tolvio belma pryjatas!", "close_window",
	[]],

	[trp_mazdhan, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Zaldrizes buzdari iksos daor!", "close_window",
	[]],

	[trp_zharak, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Vala mhysa syt robra derebza.", "close_window",
	[]],

	[trp_yunkai_soldier_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I obey!", "close_window",
	[]],

	[trp_yunkai_soldier_2, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Move aside!", "close_window",
	[]],

	[trp_yunkai_soldier_3, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Move along!", "close_window",
	[]],

	[trp_yunkai_soldier_4, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yunkai is great!", "close_window",
	[]],

	[trp_khrazz, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "khrazz_introduce_1",
	[]],

	[plyr|trp_khrazz, "khrazz_introduce_1",
	[],
	"Who are you?", "khrazz_introduce_2",
	[]],

	[trp_khrazz, "khrazz_introduce_2",
	[],
	"I am Khrazz!", "khrazz_master_talk",
	[]],

	[plyr|trp_khrazz, "khrazz_master_talk",
	[],
	"What is this place?", "khrazz_master_customize",
	[]],

	[trp_khrazz, "khrazz_master_customize",
	[],
	"Pits made for fighting!", "khrazz_master_customize1",
	[]],

	[trp_khrazz, "khrazz_master_customize1",
	[],
	"The dragon queen has closed the pits though. Khrazz used to sleep on silk cushions, and eat liver every day. Now he sleeps on straw, and eat stale bread.", "khrazz_master_customize2",
	[]],

	[trp_khrazz, "khrazz_master_customize2",
	[],
	"But Hizdahr zo Loraq has promised to have the pits opened again.", "khrazz_master_talk",
	[]],

	[plyr|trp_khrazz, "khrazz_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_khrazz, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Khrazz must train.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_belaquo, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Gusela!", "close_window",
	[]],

	[trp_morghaz, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Epses! Gadbag!", "close_window",
	[]],

	[trp_female_slave_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"The great Morghaz zo Zherzyn would like you to get out of his way.", "close_window",
	[]],

	[trp_chezdhar, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Ima vi nejo emi hubre, si hin kizir sizi, gimin sko oo jelevre tuzis ji gunjda emi begisto dos!", "close_window",
	[]],

	[trp_female_slave_2, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"The great Chezdhar zo Rhaezn would like to inquire whether you forgot to wash your face.", "close_window",
	[]],

	[trp_faezhar, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Ima vi nejo emi hubre!", "close_window",
	[]],

	[trp_female_slave_3, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"My master, Faezhar zo Faez, would like you to know that your face is less than pleasing to him.", "close_window",
	[]],

	[trp_grazdan, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What does it want?", "grazdan_introduce_1",
	[]],

	[plyr|trp_grazdan, "grazdan_introduce_1",
	[],
	"I am {playername}. Who are you?", "grazdan_introduce_2",
	[]],

	[trp_grazdan, "grazdan_introduce_2",
	[],
	"I am Grazdan mo Eraz, one of the great Wise Masters of Yunkai, and envoy to the Volantenes, whom I will soon visit on my errand to bring them over to our cause. ", "grazdan_master_talk",
	[]],

	[plyr|trp_grazdan, "grazdan_master_talk",
	[],
	"Which cause is that?", "grazdan_master_customize",
	[]],

	[trp_grazdan, "grazdan_master_customize",
	[],
	"The dragon whore has disrupted the slave trade, pillaged Meereen and even now feasts her dragons on the flesh of new born children. She impales anyone who defies her on spikes to die, and she bathes in the blood of virgins to keep her youthfull apperance. It is said that she became accustomed to bedding horses during her time with the Dothraki, and now no man can satisfy her. ", "grazdan_master_customize11",
	[]],

	[trp_grazdan, "grazdan_master_customize11",
	[],
	"Even so, she is said to take a new lover each night, and those who fail to please her is feed to her dragons. She is a vile harlot, and so we Yunkai'i must put a stop to her ways. A great army will be gathered, legions from New Ghis are on their way, the Wise Masters have raised many well-trained soldiers, and if the Gods favour us, the Volantenes will aid our cause.", "grazdan_master_customize12",
	[]],

	[plyr|trp_grazdan, "grazdan_master_customize12",
	[],
	"Your cause is doomed!", "grazdan_master_customize2",
	[
		(call_script, "script_change_troop_renown", "trp_player", 5)
	]],

	[trp_grazdan, "grazdan_master_customize2",
	[],
	"Dyni!", "close_window",
	[]],

	[plyr|trp_grazdan, "grazdan_master_customize12",
	[],
	"Your cause is just!", "grazdan_master_customize3",
	[
		(call_script, "script_change_troop_renown", "trp_player", -5)
	]],

	[trp_grazdan, "grazdan_master_customize3",
	[],
	"Rigle!", "close_window",
	[]],

	[trp_grazdan, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Gusela!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_female_slave_4, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"My master, the great Grazdan mo Eraz, is a very skilled lover, he brings me to the brink of pleasure every night.", "close_window",
	[]],

	[trp_female_slave_5, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"The great Grazdan mo Eraz is a most valiant warrior and a great general. He would surely have adverted the destruction of Astapor, had he been in charge.", "close_window",
	[]],

	[trp_gramnan, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Pst! Over here! A good day to you, my friend. I am Gramnan. I trade in rare and valuable spices, fit for kings!", "european_gunsmith_talk",
	[]],

	[trp_gramnan, "european_gunsmith_talk",
	[],
	"Allow me to show you my fine wares. Rest assured, any spice I offer you is of the utmost quality, I swear it by the gods! May they strike me down right this moment should a lie touch my tongue!", "european_gunsmith_talk_cozur",
	[]],

	[plyr|trp_gramnan, "european_gunsmith_talk_cozur",
	[],
	"I would like to buy some spices.", "european_gunsmith_pistols",
	[]],

	[plyr|trp_gramnan, "european_gunsmith_talk_cozur",
	[],
	"Not today, good merchant, I have other matters to which I must attend.", "close_window",
	[]],

	[trp_gramnan, "european_gunsmith_pistols",
	[],
	"Ah, {playername}, you are a most gentle, noble and handsome person! These spices will prolong your life, and make you irresistible to all the men and women of the land! I sell saffron, cinnamon and nutmeg, and a pound costs only 500 coins!", "european_gunsmith_pistols2",
	[]],

	[plyr|trp_gramnan, "european_gunsmith_pistols2",
	[
		(eq, "$g_fake_saffron", 0)
	],
	"I will take a pound of saffron.", "european_gunsmith_talk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 500),
			(troop_remove_gold, "trp_player", 500),
			(troop_add_item, "trp_player", "itm_mysterious_spices1"),
			(assign, "$g_fake_saffron", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gramnan, "european_gunsmith_pistols2",
	[
		(eq, "$g_fake_cinnamon", 0)
	],
	"I will take a pound of cinnamon.", "european_gunsmith_talk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 500),
			(troop_remove_gold, "trp_player", 500),
			(troop_add_item, "trp_player", "itm_mysterious_spices2"),
			(assign, "$g_fake_cinnamon", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gramnan, "european_gunsmith_pistols2",
	[
		(eq, "$g_fake_nutmeg", 0)
	],
	"I will take a pound of nutmeg.", "european_gunsmith_talk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 500),
			(troop_remove_gold, "trp_player", 500),
			(troop_add_item, "trp_player", "itm_mysterious_spices3"),
			(assign, "$g_fake_nutmeg", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gramnan, "european_gunsmith_pistols2",
	[],
	"Actually, cancel that order.", "european_gunsmith_talk",
	[]],

	[trp_gora, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"A good day to you, my friend. I am Gora, the illustrious adventurer! You look a mighty warrior, I have just the thing for you!", "european_gunsmith_talk",
	[]],

	[trp_gora, "european_gunsmith_talk",
	[],
	"On a journey to the cursed city of Mantarys, I found three Valyrian swords! The inscription shows that they belonged to the great scions of Ghis, Mazdhan the Magnificent, Hazrak the Handsome and Zharaq the Liberator!", "european_gunsmith_talk_cozur",
	[]],

	[plyr|trp_gora, "european_gunsmith_talk_cozur",
	[],
	"I would like to buy one of these swords.", "european_gunsmith_pistols",
	[]],

	[plyr|trp_gora, "european_gunsmith_talk_cozur",
	[],
	"Not today, good merchant, I have other matters to which I must attend.", "close_window",
	[]],

	[trp_gora, "european_gunsmith_pistols",
	[],
	"Ah, {playername}, you are a most gentle, noble and handsome person! These swords will make you unbeatable in any fight! I can be persuaded to sell each sword for as little as 10000 coins! I know, it's a crime, but you have such an honest face!", "european_gunsmith_pistols2",
	[]],

	[plyr|trp_gora, "european_gunsmith_pistols2",
	[
		(eq, "$g_fake_sword_1", 0)
	],
	"I will take the sword that belonged to Mazdhan.", "european_gunsmith_talk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 10000),
			(troop_remove_gold, "trp_player", 10000),
			(troop_add_item, "trp_player", "itm_mysterious_sword1"),
			(assign, "$g_fake_sword_1", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gora, "european_gunsmith_pistols2",
	[
		(eq, "$g_fake_sword_2", 0)
	],
	"I will take the sword that belonged to Hazrak.", "european_gunsmith_talk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 10000),
			(troop_remove_gold, "trp_player", 10000),
			(troop_add_item, "trp_player", "itm_mysterious_sword2"),
			(assign, "$g_fake_sword_2", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gora, "european_gunsmith_pistols2",
	[
		(eq, "$g_fake_sword_3", 0)
	],
	"I will take the sword that belonged to Zharaq.", "european_gunsmith_talk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 10000),
			(troop_remove_gold, "trp_player", 10000),
			(troop_add_item, "trp_player", "itm_mysterious_sword3"),
			(assign, "$g_fake_sword_3", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gora, "european_gunsmith_pistols2",
	[],
	"Actually, cancel that order.", "european_gunsmith_talk",
	[]],

	[trp_kroznok, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Urnet luo buzdaro tolvio belma pryjatas!", "close_window",
	[]],

	[trp_elkoz, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Dorior darion udrirzi mijessis.", "close_window",
	[]],

	[trp_krazneko, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Olvie hen embraro tolmiot nykelot avy ivestragon issa.", "close_window",
	[]],

	[trp_rakoz, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Vala egromy robir ezimza.", "close_window",
	[]],

	[trp_graznek, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"What do you want?", "close_window",
	[]],

	[trp_grazdan_common, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Aeksiot zyhon vaoreznon jepin, se ziksoso udlissis!", "close_window",
	[]],

	[trp_hozrek, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Jomozussis lua vala mirros engoso ydrassigon kostilos daor.", "close_window",
	[]],

	[trp_gessala, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"A good day to you, my friend. I am Gessala. I trade in rare spices, from all over the world. From Asshai to Qarth, Zamettar to Great Moraq, if they grow it, I sell it.", "european_gunsmith_talk",
	[]],

	[trp_gessala, "european_gunsmith_pretalk",
	[],
	"Allow me to show you my fine wares. Rest assured, any spice I offer you is of the utmost quality.", "european_gunsmith_talk",
	[]],

	[plyr|trp_gessala, "european_gunsmith_talk",
	[],
	"I would like to look at the spices from Asshai.", "european_gunsmith_pistols",
	[]],

	[plyr|trp_gessala, "european_gunsmith_talk",
	[],
	"I would like to look at the spices from Qarth", "european_gunsmith_blunderbusses",
	[]],

	[plyr|trp_gessala, "european_gunsmith_talk",
	[],
	"I would like to look at the spices from Zamettar.", "european_gunsmith_muskets",
	[]],

	[plyr|trp_gessala, "european_gunsmith_talk",
	[],
	"I would like to look at the spices from Great Moraq.", "european_gunsmith_rifles",
	[]],

	[plyr|trp_gessala, "european_gunsmith_talk",
	[],
	"Not today, good merchant, I have other matters to which I must attend.", "close_window",
	[]],

	[trp_gessala, "european_gunsmith_pistols",
	[],
	"Ah, but of course, {playername}, you are a discerning indvidual, and with taste. Asshai produces fine spice. I offer three destinct spices from the Shadow Lands. Fine saffron, exquisite myrrh and sweet cinnamon. A pound costs 600 coins.", "european_gunsmith_pistols2",
	[]],

	[plyr|trp_gessala, "european_gunsmith_pistols2",
	[
		(eq, "$g_genuine_asshai_saffron", 0)
	],
	"I will take a pound of saffron.", "european_gunsmith_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 600),
			(troop_remove_gold, "trp_player", 600),
			(troop_add_item, "trp_player", "itm_asshai_saffron"),
			(assign, "$g_genuine_asshai_saffron", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gessala, "european_gunsmith_pistols2",
	[
		(eq, "$g_genuine_asshai_myrrh", 0)
	],
	"I will take a pound of myrrh.", "european_gunsmith_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 600),
			(troop_remove_gold, "trp_player", 600),
			(troop_add_item, "trp_player", "itm_asshai_myrrh"),
			(assign, "$g_genuine_asshai_myrrh", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gessala, "european_gunsmith_pistols2",
	[
		(eq, "$g_genuine_asshai_cinnamon", 0)
	],
	"I will take a pound of cinnamon.", "european_gunsmith_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 600),
			(troop_remove_gold, "trp_player", 600),
			(troop_add_item, "trp_player", "itm_asshai_cinnamon"),
			(assign, "$g_genuine_asshai_cinnamon", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gessala, "european_gunsmith_pistols2",
	[],
	"Actually, cancel that order.", "european_gunsmith_pretalk",
	[]],

	[trp_gessala, "european_gunsmith_blunderbusses",
	[],
	"Ah, but of course, {playername}, you are a person of fine taste, and Qarth produces some of the best spice. I offer three destinct spices from that most ancient of cities. Fine saffron, exquisite pepper and sweet cardamom. A pound costs 400 coins.", "european_gunsmith_blunderbusses2",
	[]],

	[plyr|trp_gessala, "european_gunsmith_blunderbusses2",
	[
		(eq, "$g_genuine_qarth_saffron", 0)
	],
	"I will take a pound of saffron.", "european_gunsmith_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 400),
			(troop_remove_gold, "trp_player", 400),
			(troop_add_item, "trp_player", "itm_qarth_saffron"),
			(assign, "$g_genuine_qarth_saffron", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gessala, "european_gunsmith_blunderbusses2",
	[
		(eq, "$g_genuine_qarth_pepper", 0)
	],
	"I will take a pound of pepper.", "european_gunsmith_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 400),
			(troop_remove_gold, "trp_player", 400),
			(troop_add_item, "trp_player", "itm_qarth_pepper"),
			(assign, "$g_genuine_qarth_pepper", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gessala, "european_gunsmith_blunderbusses2",
	[
		(eq, "$g_genuine_qarth_cardamom", 0)
	],
	"I will take a pound of cardamom.", "european_gunsmith_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 400),
			(troop_remove_gold, "trp_player", 400),
			(troop_add_item, "trp_player", "itm_qarth_cardamom"),
			(assign, "$g_genuine_qarth_cardamom", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gessala, "european_gunsmith_blunderbusses2",
	[],
	"Actually, cancel that order.", "european_gunsmith_pretalk",
	[]],

	[trp_gessala, "european_gunsmith_muskets",
	[],
	"Ah, but of course, {playername}, the spicers from Zamettar are known throughout for their fine products. I offer three destinct spices from that most exotic of ports. Fine nutmeg, exquisite curry and sweet anise. A pound costs 600 coins.", "european_gunsmith_muskets2",
	[]],

	[plyr|trp_gessala, "european_gunsmith_muskets2",
	[
		(eq, "$g_genuine_zamettar_nutmeg", 0)
	],
	"I will take a pound of nutmeg.", "european_gunsmith_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 600),
			(troop_remove_gold, "trp_player", 600),
			(troop_add_item, "trp_player", "itm_zamettar_nutmeg"),
			(assign, "$g_genuine_zamettar_nutmeg", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gessala, "european_gunsmith_muskets2",
	[
		(eq, "$g_genuine_zamettar_curry", 0)
	],
	"I will take a pound of curry.", "european_gunsmith_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 600),
			(troop_remove_gold, "trp_player", 600),
			(troop_add_item, "trp_player", "itm_zamettar_curry"),
			(assign, "$g_genuine_zamettar_curry", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gessala, "european_gunsmith_muskets2",
	[
		(eq, "$g_genuine_zamettar_anise", 0)
	],
	"I will take a pound of anise.", "european_gunsmith_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 600),
			(troop_remove_gold, "trp_player", 600),
			(troop_add_item, "trp_player", "itm_zamettar_anise"),
			(assign, "$g_genuine_zamettar_anise", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gessala, "european_gunsmith_muskets2",
	[],
	"Actually, cancel that order.", "european_gunsmith_pretalk",
	[]],

	[trp_gessala, "european_gunsmith_rifles",
	[],
	"Ah yes, Great Moraq. A fine choice, {playername}, Great Moraq is truly the spice capital of the world. I offer three destinct spices from that most exotic and dangerous island of dangers. Fine cloves, exquisite spiceflower and sweet persimmon seeds. A pound costs 200 coins.", "european_gunsmith_rifles2",
	[]],

	[plyr|trp_gessala, "european_gunsmith_rifles2",
	[
		(eq, "$g_genuine_moraq_cloves", 0)
	],
	"I will take a pound of cloves.", "european_gunsmith_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 200),
			(troop_remove_gold, "trp_player", 200),
			(troop_add_item, "trp_player", "itm_moraq_cloves"),
			(assign, "$g_genuine_moraq_cloves", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gessala, "european_gunsmith_rifles2",
	[
		(eq, "$g_genuine_moraq_spiceflower", 0)
	],
	"I will take a pound of spiceflower.", "european_gunsmith_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 200),
			(troop_remove_gold, "trp_player", 200),
			(troop_add_item, "trp_player", "itm_moraq_spiceflower"),
			(assign, "$g_genuine_moraq_spiceflower", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gessala, "european_gunsmith_rifles2",
	[
		(eq, "$g_genuine_moraq_persimmon_seeds", 0)
	],
	"I will take a pound of persimmon seeds.", "european_gunsmith_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(ge, ":troop_gold_player", 200),
			(troop_remove_gold, "trp_player", 200),
			(troop_add_item, "trp_player", "itm_moraq_persimmon_seeds"),
			(assign, "$g_genuine_moraq_persimmon_seeds", 1),
		(else_try),
			(display_message, "@You don't have enough gold. How embarassing!"),
		(try_end)
	]],

	[plyr|trp_gessala, "european_gunsmith_rifles2",
	[],
	"Actually, cancel that order.", "european_gunsmith_pretalk",
	[]],

	[trp_eleza, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Hash yer ray tih loy alegra, zhey vikeesi?", "close_window",
	[]],

	[trp_hazza, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Eyel varthasoe she ilekaan rikhoya arrekaan vekha vosi yeroon vosma tolorro!", "close_window",
	[]],

	[trp_alyssa_yunkai, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Hmph!", "close_window",
	[]],

	[trp_galazza_common, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Hash tihi vekhi she nhare yeroon?", "close_window",
	[]],

	[trp_slave_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Water... please...", "close_window",
	[]],

	[trp_golden_company_npc_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm busy!", "close_window",
	[]],

	[trp_golden_company_npc_2, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_golden_company_npc_3, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Watch the monkeys!", "close_window",
	[]],

	[trp_golden_company_npc_4, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Gods, I hate these places.", "close_window",
	[]],

	[trp_golden_company_npc_5, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"There's no good whores in Volon Therys!", "close_window",
	[]],

	[trp_slave_2, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Eveth...", "close_window",
	[]],

	[trp_sebban, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Vesterozia?", "sebban_introduce_1",
	[]],

	[plyr|trp_sebban, "sebban_introduce_1",
	[],
	"Yes?", "sebban_introduce_2",
	[]],

	[trp_sebban, "sebban_introduce_2",
	[],
	"Jeva jumuzugon? ", "sebban_master_talk",
	[]],

	[plyr|trp_sebban, "sebban_master_talk",
	[],
	"No?", "sebban_master_customize",
	[]],

	[trp_sebban, "sebban_master_customize",
	[],
	"Meri mozugon?", "close_window",
	[]],

	[plyr|trp_sebban, "sebban_master_talk",
	[],
	"Yes?", "sebban_master_customize2",
	[
		(call_script, "script_change_troop_renown", "trp_player", 5)
	]],

	[trp_sebban, "sebban_master_customize2",
	[],
	"Mazoregon!", "close_window",
	[]],

	[trp_sebban, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Nadinagon nuspes!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_seve, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Qiloni pilos lue vale tolvie ossenatas!", "close_window",
	[]],

	[trp_norlea, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Rine dore odrikatas!", "close_window",
	[]],

	[trp_sammana, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Munar aot teptas lue brozi, ia mirre tolie iderebas.", "close_window",
	[]],

	[trp_dosera, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Aeksiot zyhon vaoreznon jepin, se ziksoso udlissis.", "close_window",
	[]],

	[trp_tamela, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Zaldrizes buzdari iksos daor.", "close_window",
	[]],

	[trp_alarys, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes, what is it?", "alarys_introduce_1",
	[]],

	[plyr|trp_alarys, "alarys_introduce_1",
	[],
	"You speak the common tongue?", "alarys_introduce_2",
	[]],

	[trp_alarys, "alarys_introduce_2",
	[],
	"Yes, of course I do. I was born and raised in Ashford.", "alarys_master_talk",
	[]],

	[plyr|trp_alarys, "alarys_master_talk",
	[],
	"What are you doing here in Slaver's Bay then?", "alarys_master_customize",
	[]],

	[trp_alarys, "alarys_master_customize",
	[],
	"Selling my sword. I'm a sellsword. Was a member of the Long Lances, but my horse died. Gylo Rhegan apparently has no need for horseless horsemen, so here I am, walking across a damned desert, guarding these savages. Should have stayed in Ashford. Nothing here but sand and slaves.", "alarys_master_talk",
	[]],

	[plyr|trp_alarys, "alarys_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_alarys, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"We'll reach Meereen soon.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_maeldan, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Azanty drejikydho dyni!", "close_window",
	[]],

	[trp_ero, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Gundjabo?", "ero_introduce_1",
	[]],

	[plyr|trp_ero, "ero_introduce_1",
	[],
	"I'm sorry?", "ero_introduce_2",
	[]],

	[trp_ero, "ero_introduce_2",
	[],
	"Hilagho? Pindhago skoverdi tala live?", "close_window",
	[]],

	[trp_ero, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Gusela!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_olwan, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "olwan_introduce_1",
	[]],

	[plyr|trp_olwan, "olwan_introduce_1",
	[],
	"What is a dornishman doing here?", "olwan_introduce_2",
	[]],

	[trp_olwan, "olwan_introduce_2",
	[],
	"What's it to you?", "close_window",
	[]],

	[trp_olwan, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm busy!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_mheran, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Vesterozia?", "mheran_introduce_1",
	[]],

	[plyr|trp_mheran, "mheran_introduce_1",
	[],
	"Excuse me?", "mheran_introduce_2",
	[]],

	[trp_mheran, "mheran_introduce_2",
	[],
	"Rysta! Odabagon nejo live lerraska?", "mheran_master_talk",
	[]],

	[plyr|trp_mheran, "mheran_master_talk",
	[],
	"Yes?", "mheran_master_customize",
	[]],

	[trp_mheran, "mheran_master_customize",
	[],
	"Krimvo!", "close_window",
	[]],

	[plyr|trp_mheran, "mheran_master_talk",
	[],
	"No?", "mheran_master_customize2",
	[
		(call_script, "script_change_player_honor", 1)
	]],

	[trp_mheran, "mheran_master_customize2",
	[],
	"Ima vi nejo emi hubre!", "close_window",
	[]],

	[trp_mheran, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Gusela!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_floran, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes, what is it?", "floran_introduce_1",
	[]],

	[plyr|trp_floran, "floran_introduce_1",
	[],
	"When do we reach Volantis?", "floran_introduce_2",
	[]],

	[trp_floran, "floran_introduce_2",
	[],
	"We'll be there soon, {playername}. The wind is strong, and we're making good time.", "floran_master_talk",
	[]],

	[plyr|trp_floran, "floran_master_talk",
	[],
	"Where are you from?", "floran_master_customize",
	[]],

	[trp_floran, "floran_master_customize",
	[],
	"Braavos! Born and raised. Tell you the truth, it makes me sick to deal with these fat slave mongerers living in Slaver's Bay, but perhaps the Dragon Queen will put an end to their vile trade.", "floran_master_talk",
	[]],

	[plyr|trp_floran, "floran_master_talk",
	[],
	"Thank you for your time, captain.", "close_window",
	[]],

	[trp_floran, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"We'll reach Volantis soon.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_yarin1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Hmph!", "close_window",
	[]],

	[trp_yarin2, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"What do you want?!", "close_window",
	[]],

	[trp_yarin3, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes, yes, what is it?", "yarin3_introduce_1",
	[]],

	[plyr|trp_yarin3, "yarin3_introduce_1",
	[],
	"What are you planning on buying in Yunkai?", "yarin3_introduce_2",
	[]],

	[trp_yarin3, "yarin3_introduce_2",
	[],
	"I'm not going to buy anything, but I imagine the captain might be partial to one of them bed slaves. We where supposed to go to Astapor, to sell the ivory, but obviously, that would be a folly.", "yarin3_master_talk",
	[]],

	[plyr|trp_yarin3, "yarin3_master_talk",
	[],
	"What happened to Astapor?", "yarin3_master_customize",
	[]],

	[trp_yarin3, "yarin3_master_customize",
	[],
	"We've been hearing rumors for weeks. A dragon descended on the city! Big and scaly, with perky tits! Damndest thing I've ever heard described, but then again, the person describing it didn't speak anything but dothraki, which I don't understand at all. Had to surmiss the story from his arm movements. Still, I'd like to see this dragon, even if it does have tits...", "yarin3_master_talk",
	[]],

	[plyr|trp_yarin3, "yarin3_master_talk",
	[],
	"Thank you for your time.", "close_window",
	[]],

	[trp_yarin3, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Can't wait to get into town, haven't had a drink for days.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_sanor1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Hmph!", "close_window",
	[]],

	[trp_sanor2, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "sanor2_introduce_1",
	[]],

	[plyr|trp_sanor2, "sanor2_introduce_1",
	[],
	"Have you ever been to Valyria?", "sanor2_introduce_2",
	[]],

	[trp_sanor2, "sanor2_introduce_2",
	[],
	"Hah! No, my friend, no. And I ain't ever going there either!", "sanor2_master_talk",
	[]],

	[plyr|trp_sanor2, "sanor2_master_talk",
	[],
	"Why not?", "sanor2_master_customize",
	[]],

	[trp_sanor2, "sanor2_master_customize",
	[],
	"Those damned islands are filled with demons. Heard it from a whore, who fucked a merchant, who had a brother that'd been there. Big demons they are, and they'll eat your soul.", "sanor2_master_talk",
	[]],

	[plyr|trp_sanor2, "sanor2_master_talk",
	[],
	"Thank you for your time.", "close_window",
	[]],

	[trp_sanor2, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Can't wait to get out of this fog. Makes me shiver.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_sanor3, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"What do you want?!", "close_window",
	[]],

	[trp_jeorador1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm busy!", "close_window",
	[]],

	[trp_jeorador2, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "jeorador2_introduce_1",
	[]],

	[plyr|trp_jeorador2, "jeorador2_introduce_1",
	[],
	"What happens to the slaves in the hold if the ship sinks?", "jeorador2_introduce_2",
	[]],

	[trp_jeorador2, "jeorador2_introduce_2",
	[],
	"They drown, I suppose. Don't really care about them.", "jeorador2_master_talk",
	[]],

	[plyr|trp_jeorador2, "jeorador2_master_talk",
	[],
	"Why not?", "jeorador2_master_customize",
	[]],

	[trp_jeorador2, "jeorador2_master_customize",
	[],
	"Some men where made to be slaves, some to be masters. I'm not a slave, means I must be a master, eh. May not be the captain of the ship, but at least I ain't no slave.", "jeorador2_master_talk",
	[]],

	[plyr|trp_jeorador2, "jeorador2_master_talk",
	[],
	"Thank you for your time.", "close_window",
	[]],

	[trp_jeorador2, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Can't wait to get into port. Been dying to have myself a whore.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_jeorador3, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What?", "jeorador3_introduce_1",
	[]],

	[plyr|trp_jeorador3, "jeorador3_introduce_1",
	[],
	"Have you been doing a lot of whoring?", "jeorador3_introduce_2",
	[]],

	[trp_jeorador3, "jeorador3_introduce_2",
	[],
	"Been whoring my whole life. Nothing I enjoy more than buying a woman, shows them who's in control.", "jeorador3_master_talk",
	[]],

	[plyr|trp_jeorador3, "jeorador3_master_talk",
	[],
	"Yes, they need to learn their place!", "jeorador3_master_customize",
	[]],

	[trp_jeorador3, "jeorador3_master_customize",
	[],
	"I agree!", "close_window",
	[]],

	[plyr|trp_jeorador3, "jeorador3_master_talk",
	[],
	"I reckon those who buy whores are those unable to find a woman who will fuck them without getting paid.", "jeorador3_master_customize2",
	[
		(call_script, "script_change_player_honor", 4)
	]],

	[trp_jeorador3, "jeorador3_master_customize2",
	[],
	"Bah! What do you know!", "close_window",
	[]],

	[trp_jeorador3, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Hmph!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_bayle, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yarr, what do you want?", "bayle_introduce_1",
	[]],

	[plyr|trp_bayle, "bayle_introduce_1",
	[],
	"I'm {playername}. Who are you?", "bayle_introduce_2",
	[]],

	[trp_bayle, "bayle_introduce_2",
	[],
	"Captain Bayle Neres be I, master of the Spicy Maiden, the fastest ship of this here port.", "bayle_master_talk",
	[]],

	[plyr|trp_bayle, "bayle_master_talk",
	[],
	"Where are you headed?", "bayle_master_customize",
	[]],

	[trp_bayle, "bayle_master_customize",
	[],
	"Towards Yunkai, carrying spices, fine wine and ivory! We also have a cabin free, should you wish to join us. The journey is long and hazardous, and we will sail close to Valyria, but there is a great opportunity for profit. The cabin is not cheap though, it'll cost you 2000 coins.", "bayle_master_customize2",
	[]],

	[plyr|trp_bayle, "bayle_master_customize2",
	[],
	"Here's the coin, then.", "bayle_master_customize3",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 1999),
			(troop_remove_gold, "trp_player", 2000),
			(jump_to_menu, "mnu_yunkai_ship_1"),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[plyr|trp_bayle, "bayle_master_customize2",
	[],
	"That is too much!", "close_window",
	[]],

	[trp_bayle, "bayle_master_customize3",
	[],
	"Very well! We'll leave immediatly!", "bayle_finish",
	[]],

	[plyr|trp_bayle, "bayle_finish",
	[],
	"Right!", "close_window",
	[]],

	[plyr|trp_bayle, "bayle_master_talk",
	[],
	"Excuse me.", "close_window",
	[]],

	[trp_bayle, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Ah, {playername}!", "bayle1_introduce_1",
	[]],

	[plyr|trp_bayle, "bayle1_introduce_1",
	[],
	"Greetings, captain. Would you be chance be heading for Yunkai in the future?", "bayle1_introduce_2",
	[]],

	[trp_bayle, "bayle1_introduce_2",
	[],
	"Indeed I am, {playername}.", "bayle1_master_talk",
	[]],

	[plyr|trp_bayle, "bayle1_master_talk",
	[],
	"I don't suppose you have a free cabin?", "bayle1_master_customize",
	[]],

	[trp_bayle, "bayle1_master_customize",
	[],
	"I do, I do! It will cost you 4000, should you wish to travel towards Yunkai.", "bayle1_master_customize2",
	[]],

	[plyr|trp_bayle, "bayle1_master_customize2",
	[],
	"Here's the coin, then.", "bayle1_master_customize3",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 3999),
			(troop_remove_gold, "trp_player", 4000),
			(jump_to_menu, "mnu_yunkai_ship_1"),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[plyr|trp_bayle, "bayle1_master_customize2",
	[],
	"That is too much!", "close_window",
	[]],

	[trp_bayle, "bayle1_master_customize3",
	[],
	"Very well! We'll leave immediatly!", "bayle1_finish",
	[]],

	[plyr|trp_bayle, "bayle1_finish",
	[],
	"Right!", "close_window",
	[]],

	[plyr|trp_bayle, "bayle1_master_talk",
	[],
	"Excuse me.", "close_window",
	[]],

	[trp_bayle1, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes, what is it?", "bayle1_introduce_1",
	[]],

	[plyr|trp_bayle1, "bayle1_introduce_1",
	[],
	"When do we reach Yunkai?", "bayle1_introduce_2",
	[]],

	[trp_bayle1, "bayle1_introduce_2",
	[],
	"It'll be a while, {playername}. We've yet to sail past Valyria.", "bayle1_master_talk",
	[]],

	[plyr|trp_bayle1, "bayle1_master_talk",
	[],
	"I heard sailors talk of the Doom. Can you tell me more?", "bayle1_master_customize",
	[]],

	[trp_bayle1, "bayle1_master_customize",
	[],
	"People say that the Doom still rules Valyria. Whatever that means. All I know is that most people who venture too close to the ruins are never seen again. It is said that demons roam the great empty halls of the dragonlords.", "bayle1_master_talk",
	[]],

	[plyr|trp_bayle1, "bayle1_master_talk",
	[],
	"Thank you for your time, captain.", "close_window",
	[]],

	[trp_bayle1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"The wind should pick up soon, I can feel it in my bones.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_bayle2, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "bayle2_introduce_1",
	[]],

	[plyr|trp_bayle2, "bayle2_introduce_1",
	[],
	"What is this unnatural fog?", "bayle2_introduce_2",
	[]],

	[trp_bayle2, "bayle2_introduce_2",
	[],
	"The curse of Valyria.", "bayle2_master_talk",
	[]],

	[plyr|trp_bayle2, "bayle2_master_talk",
	[],
	"Tell me more.", "bayle2_master_customize",
	[]],

	[trp_bayle2, "bayle2_master_customize",
	[],
	"Valyria was once connected to the mainland of Essos. When the Doom came to the Freehold, the mountains split and spewed forth great amounts of molten rock. Great earthquakes devastated the continent, and the sea came rushing in, turning Valyria into several islands. The Fourteen Fires, the great fire mountains of Valyria, are now submerged, but still the fires burn and cause the sea to evaporate.", "bayle2_master_talk",
	[]],

	[plyr|trp_bayle2, "bayle2_master_talk",
	[],
	"Thank you for your time.", "close_window",
	[]],

	[trp_bayle2, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"This fog is horrible. Monsters and pirates could lurk in it.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_bayle3, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes, {playername}?", "bayle3_introduce_1",
	[]],

	[plyr|trp_bayle3, "bayle3_introduce_1",
	[],
	"When will we reach Yunkai?", "bayle3_introduce_2",
	[]],

	[trp_bayle3, "bayle3_introduce_2",
	[],
	"It won't be long now.", "bayle3_master_talk",
	[]],

	[plyr|trp_bayle3, "bayle3_master_talk",
	[],
	"Can you tell me about Yunkai?", "bayle3_master_customize",
	[]],

	[trp_bayle3, "bayle3_master_customize",
	[],
	"Yunkai is also known as The Yellow City. It lies on the eastern coast of Slaver's Bay, close to the island of Yaros. The Yunkai'i are known for training, and selling, bed slaves. The bedslaves learn the Ways of the Seven Sighs and Sixteen Seats of Pleasure. I'm gonna buy myself one of the fair skinned ones, been too long since I had a woman.", "bayle3_master_talk",
	[]],

	[plyr|trp_bayle3, "bayle3_master_talk",
	[],
	"Thank you for your time, Bayle.", "close_window",
	[]],

	[trp_bayle3, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"We should be able to see the Island of Yaros soon.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_merry, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hello there! Welcome to the Happy Port!", "merry_introduce_1",
	[]],

	[plyr|trp_merry, "merry_introduce_1",
	[],
	"Who are you?", "merry_introduce_2",
	[]],

	[trp_merry, "merry_introduce_2",
	[],
	"I'm Meralyn, but people call me Merry. Got myself the largest pair of tits in all of Braavos, and me and my girls make many a dream come true!", "merry_master_talk",
	[]],

	[plyr|trp_merry, "merry_master_talk",
	[],
	"I'd like to have a look at those tits of yours.", "merry_master_customize",
	[]],

	[trp_merry, "merry_master_customize",
	[],
	"I'm sorry, I've spent all the years on my back that I care to. You can see if Lanna is free though. She's fourteen and freshly flowered. Expensive, but it'll be worth the gold, I promise you!", "merry_master_customize2",
	[]],

	[plyr|trp_merry, "merry_master_customize2",
	[],
	"I'll see if I can find her.", "merry_master_customize3",
	[]],

	[trp_merry, "merry_master_customize3",
	[],
	"See that you're not too rough on her, poor girl still got dreams of romance.", "merry_finish",
	[]],

	[plyr|trp_merry, "merry_finish",
	[],
	"Hmpfh!", "close_window",
	[]],

	[plyr|trp_merry, "merry_master_talk",
	[],
	"Excuse me.", "close_window",
	[]],

	[trp_merry, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm on my way out to buy some oysters.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_sailors_wife, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes, sweetheart?", "sailors_wife_introduce_1",
	[]],

	[plyr|trp_sailors_wife, "sailors_wife_introduce_1",
	[],
	"Who are you?", "sailors_wife_introduce_2",
	[]],

	[trp_sailors_wife, "sailors_wife_introduce_2",
	[],
	"I'm one of Merrys girls. Lanna's my daughter. Oh my, you look like you have a big cock indeed.", "sailors_wife_master_talk",
	[]],

	[plyr|trp_sailors_wife, "sailors_wife_master_talk",
	[],
	"Well, yes, I have!", "sailors_wife_master_customize",
	[]],

	[trp_sailors_wife, "sailors_wife_master_customize",
	[],
	"Would you like to take me for a tumble? It's cheap, only 5 silver. Of course, you'll have to marry me first. I'm no whore! One of the septons upstairs can perform the ceremony, they always do.", "sailors_wife_master_customize2",
	[]],

	[plyr|trp_sailors_wife, "sailors_wife_master_customize2",
	[],
	"Upstairs then, wife.", "sailors_wife_master_customize3",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 4),
			(troop_remove_gold, "trp_player", 5),
			(jump_to_scene, "scn_town_17_center", 4),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[plyr|trp_sailors_wife, "sailors_wife_master_customize2",
	[],
	"I'm sorry, I can't afford you.", "close_window",
	[]],

	[trp_sailors_wife, "sailors_wife_master_customize3",
	[],
	"Oh yes husband, take me to bed, I'm your blushing bride!", "sailors_wife_finish",
	[]],

	[plyr|trp_sailors_wife, "sailors_wife_finish",
	[],
	"Hmpfh!", "close_window",
	[]],

	[plyr|trp_sailors_wife, "sailors_wife_master_talk",
	[],
	"Excuse me.", "close_window",
	[]],

	[trp_sailors_wife, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm much too sore for you, big man.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_lanna, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hi, my name is Lanna, who are you?", "lanna_introduce_1",
	[]],

	[plyr|trp_lanna, "lanna_introduce_1",
	[],
	"I'm {playername}.", "lanna_introduce_2",
	[]],

	[trp_lanna, "lanna_introduce_2",
	[],
	"Hello {playername}! Merry and mother says I have to be courteous and shy to every man who comes in here! But not in the bedroom, hihi.", "lanna_master_talk",
	[]],

	[plyr|trp_lanna, "lanna_master_talk",
	[],
	"I'm intrigued. Let's go upstairs", "lanna_master_customize",
	[]],

	[trp_lanna, "lanna_master_customize",
	[],
	"Oh oh, payments first! Merry says I'm worth three times as much as any of the other girls in here! Pay the price of 840 silver, and you can do anything you want to me!", "lanna_master_customize2",
	[]],

	[plyr|trp_lanna, "lanna_master_customize2",
	[],
	"Here's the money, then.", "lanna_master_customize3",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 839),
			(troop_remove_gold, "trp_player", 840),
			(call_script, "script_change_player_party_morale", 5),
			(jump_to_scene, "scn_town_17_center", 4),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[plyr|trp_lanna, "lanna_master_customize2",
	[],
	"I'm sorry Lanna, I can't afford you.", "close_window",
	[]],

	[trp_lanna, "lanna_master_customize3",
	[],
	"{My lord/My lady}! So generous you are! You can pretend I'm a maiden, hihi!", "lanna_finish",
	[]],

	[plyr|trp_lanna, "lanna_finish",
	[],
	"Right!", "close_window",
	[]],

	[plyr|trp_lanna, "lanna_master_talk",
	[],
	"Excuse me.", "close_window",
	[]],

	[trp_lanna, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm too numb to work right now, sweetheart.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_alayaya, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"I'm Alayaya, welcome to Chataya's.", "alayaya_introduce_1",
	[]],

	[plyr|trp_alayaya, "alayaya_introduce_1",
	[],
	"I'm {playername}.", "alayaya_introduce_2",
	[]],

	[trp_alayaya, "alayaya_introduce_2",
	[],
	"Hello {playername}! The girls here are expensive. Fit for kings if truth be told, of which we've had one who frequented us often and with much vigor.", "alayaya_master_talk",
	[]],

	[plyr|trp_alayaya, "alayaya_master_talk",
	[],
	"I'd like to take you upstairs then.", "alayaya_master_customize",
	[]],

	[trp_alayaya, "alayaya_master_customize",
	[],
	"Oh oh, payments first! You wouldn't believe how many poor drunkards find their way here. You need to show you can afford me! Whip it out, and I mean the coin, not your cock! A night with me costs 2500 silver, but I promise you, {my lord/my lady}, it'll be worth the silver!", "alayaya_master_customize2",
	[]],

	[plyr|trp_alayaya, "alayaya_master_customize2",
	[],
	"Here's the coin, then.", "alayaya_master_customize3",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 2499),
			(troop_remove_gold, "trp_player", 2500),
			(call_script, "script_change_troop_renown", "trp_player", 4),
			(jump_to_scene, "scn_town_16_center", 4),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[plyr|trp_alayaya, "alayaya_master_customize2",
	[],
	"Sweet Alayaya, I cannot afford you!", "close_window",
	[]],

	[trp_alayaya, "alayaya_master_customize3",
	[],
	"I'll just need a minute to freshen up, my brave warrior!", "alayaya_finish",
	[]],

	[plyr|trp_alayaya, "alayaya_finish",
	[],
	"Right!", "close_window",
	[]],

	[plyr|trp_alayaya, "alayaya_master_talk",
	[],
	"Excuse me.", "close_window",
	[]],

	[trp_alayaya, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm on a break right now honey, Dancy and I are going to play cyvasse.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_dancy, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hello there, I'm Dancy. Welcome to Chatayas.", "dancy_introduce_1",
	[]],

	[plyr|trp_dancy, "dancy_introduce_1",
	[],
	"I'm {playername}.", "dancy_introduce_2",
	[]],

	[trp_dancy, "dancy_introduce_2",
	[],
	"Good day to you {playername}! Would you take me for a tumble? I've been so bored lately, and Alayaya is getting the better of the lordlings these days. I wish I had such beautiful skin!", "dancy_master_talk",
	[]],

	[plyr|trp_dancy, "dancy_master_talk",
	[],
	"I'll tumble you good!", "dancy_master_customize",
	[]],

	[trp_dancy, "dancy_master_customize",
	[],
	"How wonderful! I'm not as greedy as Alayaya, you can have me for 1500 silver. I'm much more flexible though!", "dancy_master_customize2",
	[]],

	[plyr|trp_dancy, "dancy_master_customize2",
	[],
	"Here's the coin.", "dancy_master_customize3",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 1499),
			(troop_remove_gold, "trp_player", 1500),
			(call_script, "script_change_troop_renown", "trp_player", 3),
			(jump_to_scene, "scn_town_16_center", 4),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[plyr|trp_dancy, "dancy_master_customize2",
	[],
	"Dancy, my sweet lady, you're worth too much for me!", "close_window",
	[]],

	[trp_dancy, "dancy_master_customize3",
	[],
	"I'll just need a minute to get ready. Wait for me, my gracious {my lord/my lady}!", "dancy_finish",
	[]],

	[plyr|trp_dancy, "dancy_finish",
	[],
	"Right! Hurry up!", "close_window",
	[]],

	[plyr|trp_dancy, "dancy_master_talk",
	[],
	"Excuse me.", "close_window",
	[]],

	[trp_dancy, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm resting right now, {playername}, Alayaya and I are going to play that new game from the east. I'm getting very good!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_marei, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hi there, I'm Marei. Welcome to Chatayas. We got every kind of girl in here!", "marei_introduce_1",
	[]],

	[plyr|trp_marei, "marei_introduce_1",
	[],
	"I'm {playername}.", "marei_introduce_2",
	[]],

	[trp_marei, "marei_introduce_2",
	[],
	"Oh {playername}, won't you take me to bed? I have such an itch, and I suspect you might be just the man to satisfy it!", "marei_master_talk",
	[]],

	[plyr|trp_marei, "marei_master_talk",
	[],
	"I'll itch you right Marei!", "marei_master_customize",
	[]],

	[trp_marei, "marei_master_customize",
	[],
	"How perfect! Chataya says me and Dancy are so alike she might as well charge the same for both of us! 1500 silver is the price, but I'll guarantee that you'll be much to exhausted to itch yourself afterwards!", "marei_master_customize2",
	[]],

	[plyr|trp_marei, "marei_master_customize2",
	[],
	"Here's the coin. That itch'll get scratched!", "marei_master_customize3",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 1499),
			(troop_remove_gold, "trp_player", 1500),
			(call_script, "script_change_troop_renown", "trp_player", 3),
			(jump_to_scene, "scn_town_16_center", 4),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[plyr|trp_marei, "marei_master_customize2",
	[],
	"Marei, my honey covered lady, I cannot afford you!", "close_window",
	[]],

	[trp_marei, "marei_master_customize3",
	[],
	"I'll just need a minute to get ready. I have to go get the itching tools from Chataya! They're made of gold, so they're easier to clean. I often get an itch!", "marei_finish",
	[]],

	[plyr|trp_marei, "marei_finish",
	[],
	"Right! Hurry up Marei!", "close_window",
	[]],

	[plyr|trp_marei, "marei_master_talk",
	[],
	"Excuse me.", "close_window",
	[]],

	[trp_marei, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm really numb right now, {playername}, and I have to get at my reading lessons. Maybe you can come back later?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_daughter_dusk, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "daughter_dusk_introduce_1",
	[]],

	[plyr|trp_daughter_dusk, "daughter_dusk_introduce_1",
	[],
	"I'm {playername} my lady. May I know more about you?", "daughter_dusk_introduce_2",
	[]],

	[trp_daughter_dusk, "daughter_dusk_introduce_2",
	[],
	"Oh {playername}, you are not from these parts are you? The people of Braavos call me the Daughter of the Dusk. I'm a courtesan, which is a fancy way of saying that I'm a whore. The only difference between me and those girls who get raw cunts lying on straw beds, is that I choose my lovers, and that I'm more often than not much more powerful than they are.", "daughter_dusk_master_talk",
	[]],

	[plyr|trp_daughter_dusk, "daughter_dusk_master_talk",
	[],
	"You seem frank for a, ehm, lady of the evening.", "daughter_dusk_master_customize",
	[]],

	[trp_daughter_dusk, "daughter_dusk_master_customize",
	[],
	"What would you have me say, or do? I could flatter my lovers, laugh at their silly jokes and tell them how they make my knees shaky. But those kinds of tricks are for women like Bellegere, or the Mermaid Queen. I tell the men the harsh truths of the world, and they pay me as much for that truth as for what is between my legs. I suspect Bellegere does as well, but it's not commonly known.", "daughter_dusk_master_customize2",
	[]],

	[plyr|trp_daughter_dusk, "daughter_dusk_master_customize2",
	[],
	"My lady, I find your frankness refreshing.", "daughter_dusk_master_customize3",
	[
		(call_script, "script_change_troop_renown", "trp_player", 5)
	]],

	[plyr|trp_daughter_dusk, "daughter_dusk_master_customize2",
	[],
	"A lady ought to be seen, not heard!", "close_window",
	[]],

	[trp_daughter_dusk, "daughter_dusk_master_customize3",
	[],
	"I'm sure you do, {playername}, just as I am sure you would cut off your own hand to get in the wet spot between my legs. Alas, I have a lover whom I quite enjoy at the moment. If not, I should have taken you with me to my quarters right this moment. You have a certain roguish face that I quite enjoy.", "daughter_dusk_finish",
	[]],

	[plyr|trp_daughter_dusk, "daughter_dusk_finish",
	[],
	"I bid you farewell then, my lady.", "close_window",
	[]],

	[plyr|trp_daughter_dusk, "daughter_dusk_master_talk",
	[],
	"Excuse me.", "close_window",
	[]],

	[trp_daughter_dusk, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm afraid I cannot talk right now, I'm trying to deduce some events.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_black_pearl, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Can I help you?", "black_pearl_introduce_1",
	[]],

	[plyr|trp_black_pearl, "black_pearl_introduce_1",
	[],
	"I'm {playername}, my lady. Might I have the honor of knowing more about you?", "black_pearl_introduce_2",
	[]],

	[trp_black_pearl, "black_pearl_introduce_2",
	[],
	"The common people of Braavos call me the Black Pearl, and talk in secret of my wicked ways and illustrious ancestors. My real name is Bellegere Otherys.", "black_pearl_master_talk",
	[]],

	[plyr|trp_black_pearl, "black_pearl_master_talk",
	[],
	"Who are your illustrious ancestors?", "black_pearl_master_customize",
	[]],

	[trp_black_pearl, "black_pearl_master_customize",
	[],
	"Oh, one of the Targaryen kings. Aegon the Unlikely to be frank, which does put a damper on the illustrious part. He sowed his seed with more vigor than most farmers, and had a crop to match. Say, {playername}, are you looking to make a name for yourself? I can help you along, in return for a favor. I am, by far, the most powerful woman in Braavos, adored by the common folk and lusted after by the princes. A kiss from me would put your name on everyones lips, and your name would become common knowledge in the city. All I ask in return is that you keep in mind the favor you owe me, to be repaid at a later date.", "black_pearl_master_customize2",
	[]],

	[plyr|trp_black_pearl, "black_pearl_master_customize2",
	[],
	"I should conquer Valyria for a kiss from you, my lady!", "black_pearl_master_customize3",
	[
		(call_script, "script_change_troop_renown", "trp_player", 20),
		(call_script, "script_change_player_relation_with_center", "$current_town", 10)
	]],

	[plyr|trp_black_pearl, "black_pearl_master_customize2",
	[],
	"My lady, I fear I cannot be in debt to a woman as lovely as you!", "close_window",
	[]],

	[trp_black_pearl, "black_pearl_master_customize3",
	[],
	"Very well then, {playername}, meet me by the balcony. The light will make both of us look lovely, and my dress becomes positively transparent in such light, if you stand close to me.", "black_pearl_finish",
	[]],

	[plyr|trp_black_pearl, "black_pearl_finish",
	[],
	"Right!", "close_window",
	[]],

	[plyr|trp_black_pearl, "black_pearl_master_talk",
	[],
	"Excuse me.", "close_window",
	[]],

	[trp_black_pearl, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm afraid I have an audience with the Iron Bank soon, {playername}, and I have to prepare myself.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_bella, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hi there, welcome to the Peach.", "bella_introduce_1",
	[]],

	[plyr|trp_bella, "bella_introduce_1",
	[],
	"Who are you?", "bella_introduce_2",
	[]],

	[trp_bella, "bella_introduce_2",
	[],
	"I'm one of the girls working here. My mother used to work here too. My name is Bella, I'm named for the battle.", "bella_master_talk",
	[]],

	[plyr|trp_bella, "bella_master_talk",
	[],
	"Which battle was that?", "bella_master_customize",
	[]],

	[trp_bella, "bella_master_customize",
	[],
	"Oh, the Battle of the Bells. When the king hid here, Lord Connington came to root him out. But then the lords Stark, Tully and Arryn descended on the town, and they defeated the army of the Mad King! Leslyn says my mother was the kings favorite, and that he rung her bell more than any of the other girls. Makes me the kings bastard daughter I suppose. Anyhow, you can have me for 3 silver.", "bella_master_customize2",
	[]],

	[plyr|trp_bella, "bella_master_customize2",
	[],
	"I've never slept with a kings bastard before. Let's go upstairs.", "bella_master_customize3",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 2),
			(troop_remove_gold, "trp_player", 3),
			(jump_to_scene, "scn_town_18_center", 4),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[plyr|trp_bella, "bella_master_customize2",
	[],
	"I'm sorry, I'm busy.", "close_window",
	[]],

	[trp_bella, "bella_master_customize3",
	[],
	"Oh my yes! My royal blood is all fiery!", "bella_finish",
	[]],

	[plyr|trp_bella, "bella_finish",
	[],
	"Hmpfh!", "close_window",
	[]],

	[plyr|trp_bella, "bella_master_talk",
	[],
	"Excuse me.", "close_window",
	[]],

	[trp_bella, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I have to go help the Huntsman with his dogs. Visit me later!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_leslyn, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes, sweetheart?", "leslyn_introduce_1",
	[]],

	[plyr|trp_leslyn, "leslyn_introduce_1",
	[],
	"Who are you?", "leslyn_introduce_2",
	[]],

	[trp_leslyn, "leslyn_introduce_2",
	[],
	"I'm Leslyn, one of the girls here at the Peach.", "leslyn_master_talk",
	[]],

	[plyr|trp_leslyn, "leslyn_master_talk",
	[],
	"What do you mean by 'girls'?", "leslyn_master_customize",
	[]],

	[trp_leslyn, "leslyn_master_customize",
	[],
	"Oh, I'm one of the whores here. I make my living on my back or on my knees. Or both. If that's your sort of thing, you can be the one on your knees or on your back. Price is 5 silver.", "leslyn_master_customize2",
	[]],

	[plyr|trp_leslyn, "leslyn_master_customize2",
	[],
	"Ah, I've never played the womans part. Let's go upstairs and do that!", "leslyn_master_customize3",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 4),
			(troop_remove_gold, "trp_player", 5),
			(jump_to_scene, "scn_town_18_center", 4),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[plyr|trp_leslyn, "leslyn_master_customize2",
	[],
	"I'm sorry, I'll have to get going.", "close_window",
	[]],

	[trp_leslyn, "leslyn_master_customize3",
	[],
	"Upstairs you go then, I'll go get the broom handle!", "leslyn_finish",
	[]],

	[plyr|trp_leslyn, "leslyn_finish",
	[],
	"Hmpfh!", "close_window",
	[]],

	[plyr|trp_leslyn, "leslyn_master_talk",
	[],
	"Excuse me.", "close_window",
	[]],

	[trp_leslyn, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Word is there's outlaws in the area, I'll have to help the men repairing the gate.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_chataya, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hello there, welcome to my establishment.", "chataya_introduce_1",
	[]],

	[plyr|trp_chataya, "chataya_introduce_1",
	[],
	"What is a woman from the Summer Islands doing running a brothel in King's Landing?", "chataya_introduce_2",
	[]],

	[trp_chataya, "chataya_introduce_2",
	[],
	"Not so strange, when you think about it. On the Summer Islands, we don't think of lovemaking as something to be ashamed of, opposed to the people of Westeros. Making love should be celebrated, not suppressed.", "close_window",
	[]],

	[trp_chataya, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm very busy! Talk to Dancy or Marei, they're both quite the handful in bed.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_james_parr, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Who are you?", "james_parr_introduce_1",
	[]],

	[plyr|trp_james_parr, "james_parr_introduce_1",
	[],
	"I am {playername}. Who are you?", "james_parr_introduce_2",
	[]],

	[trp_james_parr, "james_parr_introduce_2",
	[],
	"I am Lord Parr, representative of the great bank of Norvos, the Bank of the Stars.", "close_window",
	[]],

	[trp_james_parr, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm very busy {playername}! This septry have deep coffers, and I mean to milk them!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_etienne_lacroix, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Who are you?", "etienne_lacroix_introduce_1",
	[]],

	[plyr|trp_etienne_lacroix, "etienne_lacroix_introduce_1",
	[],
	"I am {playername}. Now, who are you?", "etienne_lacroix_introduce_2",
	[]],

	[trp_etienne_lacroix, "etienne_lacroix_introduce_2",
	[],
	"I am Enneite, son of Enneite, son of Enneite, who was son of Enneite. I've taken a vow of obedience, and serve the Seven.", "close_window",
	[]],

	[trp_etienne_lacroix, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm very busy {playername}! The peacock escaped!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_steff_van_oost, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hello there.", "steff_van_oost_introduce_1",
	[]],

	[plyr|trp_steff_van_oost, "steff_van_oost_introduce_1",
	[],
	"Hello. Who are you?", "steff_van_oost_introduce_2",
	[]],

	[trp_steff_van_oost, "steff_van_oost_introduce_2",
	[],
	"I'm Steffon, from Essos.", "close_window",
	[]],

	[trp_steff_van_oost, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm very busy!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_keith_larson, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What do you want?", "keith_larson_introduce_1",
	[]],

	[plyr|trp_keith_larson, "keith_larson_introduce_1",
	[],
	"Who are you?", "keith_larson_introduce_2",
	[]],

	[trp_keith_larson, "keith_larson_introduce_2",
	[],
	"I am Keth, son of Lar, son of Lar, son of Keth! I'm here to sell the goats we took!", "close_window",
	[]],

	[trp_keith_larson, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Go away, or Keth, son of Lar, will chop off your head!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_wildfire_npc_0, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What do you want?", "wildfire_starter_introduce_1",
	[]],

	[plyr|trp_wildfire_npc_0, "wildfire_starter_introduce_1",
	[],
	"Merely pass the time in a tavern. Do any interesting people ever come here?", "wildfire_starter_introduce_2",
	[]],

	[trp_wildfire_npc_0, "wildfire_starter_introduce_2",
	[],
	"I suppose Septon Germund is a fascinating fella. Hear him tell it, he used to live quite a life of adventure down in the south. He's not here right now, but come back later, I'm sure you'll find him.", "close_window",
	[
		(add_troop_to_site, "trp_wildfire_npc_1", "scn_town_31_tavern", 43)
	]],

	[trp_wildfire_npc_0, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_wildfire_npc_1, "start",
	[
		(eq, "$g_germund_quest", 0)
	],
	"Greetings. I am Germund, the septon of this part of town. I used to live in the castle, but alas, Lord Manderly does not take kindly to those who would filch saffron from his private stores...", "wildfire_talk",
	[]],

	[plyr|trp_wildfire_npc_1, "wildfire_talk",
	[],
	"Do you have any tasks for me?", "wildfire_talk2",
	[]],

	[plyr|trp_wildfire_npc_1, "wildfire_talk",
	[],
	"I have other things to do than to listen to a senile old man. Farewell.", "close_window",
	[]],

	[trp_wildfire_npc_1, "wildfire_talk2",
	[],
	"Yes, {playername}. Lord Manderlys maester had a raven a few days ago, from Eastwatch-by-the-Sea. We've been told to keep a watch out for wildlings, Cotter Pyke writes that they've grown ever bolder.", "wildfire_talk3",
	[]],

	[plyr|trp_wildfire_npc_1, "wildfire_talk3",
	[],
	"All very good, but how does that effect me?", "wildfire_talk4",
	[]],

	[plyr|trp_wildfire_npc_1, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_wildfire_npc_1, "wildfire_talk4",
	[],
	"We haven't seen any wildlings here for years, but we haven't had visitors from Hillhall in quite a while. It's been much too long, now that I think of it. I need you to go and take a look at the village, see if anything is wrong.", "wildfire_talk5",
	[]],

	[plyr|trp_wildfire_npc_1, "wildfire_talk5",
	[],
	"I suppose I can go take a look.", "wildfire_talk6",
	[]],

	[plyr|trp_wildfire_npc_1, "wildfire_talk5",
	[],
	"I have better things to do than to visit some far away village. Farewell.", "close_window",
	[]],

	[trp_wildfire_npc_1, "wildfire_talk6",
	[],
	"Oh splendid! The village lies close to the Bay of Seals, north of Karhold. Should you find anything, travel bach here and speak with Gerold, he's a recruiter for the Night's Watch, and he can take your findings back to the Wall.", "wildfire_talk7",
	[]],

	[plyr|trp_wildfire_npc_1, "wildfire_talk7",
	[],
	"Very well, I'll return once I've scouted the village.", "close_window",
	[
		(assign, "$g_germund_quest", 1),
		(enable_party, "p_hillhall"),
		(remove_troop_from_site, "trp_wildfire_npc_1", "scn_town_31_tavern"),
		(setup_quest_text, "qst_wildfire_quest"),
		(str_store_string, 2, "@Septon Germund has tasked you with scouting the village of Hillhall, fearful that wildlings may have attacked it."),
		(call_script, "script_start_quest", "qst_wildfire_quest", "$g_talk_troop"),
		(display_message, "@Septon Germund has a worried look in his eyes, you better hurry!")
	]],

	[plyr|trp_wildfire_npc_1, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_wildfire_npc_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_wildfire_npc_2, "start",
	[],
	"Who are you?! Stay away from me!", "pj_wildfire_talk",
	[]],

	[plyr|trp_wildfire_npc_2, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_wildfire_quest")
	],
	"What happened here?", "pj_wildfire_talk2",
	[]],

	[trp_wildfire_npc_2, "pj_wildfire_talk2",
	[],
	"Wildlings {my lord/my lady}! They come during the night, put the village to the torch!", "pj_wildfire_talk3",
	[]],

	[plyr|trp_wildfire_npc_2, "pj_wildfire_talk3",
	[],
	"My name is {playername}. Septon Germund sent me to scout out the village. Tell me where the wildlings went.", "pj_wildfire_talk5",
	[]],

	[trp_wildfire_npc_2, "pj_wildfire_talk5",
	[],
	"I don't know {my lord/my lady}, but they can't have gone far! Mayhaps they went for another of the villages, greedy savages that they are. Maybe Goodwife Myra over at Barrowton have heard something, she's the biggest gossip in the realm.", "pj_wildfire_talk6",
	[]],

	[plyr|trp_wildfire_npc_2, "pj_wildfire_talk6",
	[],
	"How is it that you survived the wildling attack?", "pj_wildfire_talk8",
	[]],

	[trp_wildfire_npc_2, "pj_wildfire_talk8",
	[],
	"I hid in the top of that huge pine over there. Saw their savagery though! T'was horrible {my lord/my lady}, horrible. Goodwife Hanna must've been raped by half a hundred men, and her daughters where made to watch, before their turn came!", "close_window",
	[
		(call_script, "script_end_quest", "qst_wildfire_quest"),
		(setup_quest_text, "qst_wildfire_quest1"),
		(str_store_string, 2, "@The old woman was the only survivor of the wildling attack, but she had no idea where they went. Perhaps Goodwife Myra in Barrowton has heard something."),
		(call_script, "script_start_quest", "qst_wildfire_quest1", "$g_talk_troop"),
		(display_message, "@The smell of burned meat is nauseating, and the woman has a desperate look to her...")
	]],

	[plyr|trp_wildfire_npc_2, "pj_wildfire_talk",
	[],
	"Are you mad?", "close_window",
	[]],

	[trp_wildfire_npc_3, "start",
	[],
	"What do you want?", "pj_wildfire_talk",
	[]],

	[plyr|trp_wildfire_npc_3, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_wildfire_quest1")
	],
	"Have you heard of any wildlings being sighted?", "pj_wildfire_talk2",
	[]],

	[trp_wildfire_npc_3, "pj_wildfire_talk2",
	[],
	"Oh gods no! Haven't seen a wildling since I was but a wee child. Big shaggy man he was, put an axe in the blacksmiths skull.", "pj_wildfire_talk3",
	[]],

	[plyr|trp_wildfire_npc_3, "pj_wildfire_talk3",
	[],
	"Do you know of any who might have seen or heard anything?", "pj_wildfire_talk5",
	[]],

	[trp_wildfire_npc_3, "pj_wildfire_talk5",
	[],
	"Talk to my daughter Jess. Foolish girl, she been talking to all kind of travellers passing through. Been laying with a few of them as well, I should think, hah. Spreading her legs for any man who wants her, she'll have a swollen belly before the years out I tell you!", "pj_wildfire_talk6",
	[]],

	[plyr|trp_wildfire_npc_3, "pj_wildfire_talk6",
	[],
	"You've been most helpful.", "close_window",
	[
		(call_script, "script_end_quest", "qst_wildfire_quest1"),
		(setup_quest_text, "qst_wildfire_quest2"),
		(str_store_string, 2, "@Goodwife Myra told you to talk to her daughter Jess, she might have heard if wildlings have been sighted."),
		(call_script, "script_start_quest", "qst_wildfire_quest2", "$g_talk_troop"),
		(display_message, "@You spot Jess by the cauldron.")
	]],

	[plyr|trp_wildfire_npc_3, "pj_wildfire_talk",
	[],
	"Who are you?", "morcant_creditos",
	[]],

	[trp_wildfire_npc_3, "morcant_creditos",
	[],
	"I'm Goodwife Myra, the oldest woman in this here castle! Been living here for decades, I have.", "close_window",
	[]],

	[plyr|trp_wildfire_npc_3, "pj_wildfire_talk",
	[],
	"No matter, I'm leaving.", "close_window",
	[]],

	[trp_wildfire_npc_4, "start",
	[],
	"What do you want, huh?", "pj_wildfire_talk",
	[]],

	[plyr|trp_wildfire_npc_4, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_wildfire_quest2")
	],
	"Careful, girl. Insolence is not a virtue.", "pj_wildfire_talk2",
	[]],

	[trp_wildfire_npc_4, "pj_wildfire_talk2",
	[],
	"Forgive me, {my lord/my lady}. I did not see clearly who spoke to me.", "pj_wildfire_talk3",
	[]],

	[plyr|trp_wildfire_npc_4, "pj_wildfire_talk3",
	[],
	"Your mother seemed to think that you may have heard about some wildlings.", "pj_wildfire_talk4",
	[]],

	[trp_wildfire_npc_4, "pj_wildfire_talk4",
	[],
	"Yes, {my lord/my lady}. They come over the Wall, Willam said, though Halbert said they sail across the Bay. Then again, what do they know. Josmond said he'd heard Ser Helmans steward talk about wildlings in the Lonely Hills, close to that old abandoned holdfast. Now, {my lord/my lady}, I'm sure you can tell me much more about these wildlings than any of those boys. Mayhaps you could tell me about them in the back of the barn?", "pj_wildfire_talk5",
	[]],

	[plyr|trp_wildfire_npc_4, "pj_wildfire_talk5",
	[],
	"No. I don't lie with filthy peasants.", "pj_wildfire_talk6",
	[
		(try_begin),
			(call_script, "script_change_troop_renown", "trp_player", -5),
		(try_end)
	]],

	[plyr|trp_wildfire_npc_4, "pj_wildfire_talk5",
	[],
	"Might be I could.", "pj_wildfire_talk7",
	[
		(try_begin),
			(call_script, "script_change_troop_renown", "trp_player", 5),
		(try_end)
	]],

	[trp_wildfire_npc_4, "pj_wildfire_talk6",
	[],
	"Forgive me, {my lord/my lady}, is just that I saw your fancy clothing, thought you might fancy me!", "close_window",
	[
		(enable_party, "p_abandoned_holdfast"),
		(call_script, "script_end_quest", "qst_wildfire_quest2"),
		(setup_quest_text, "qst_wildfire_quest3"),
		(str_store_string, 2, "@Jess told you that there'd been rumors of wildlings in the Lonely Hills, north of the Dreadfort. Perhaps they have taken refuge in the Abandoned Holdfast. You should bring at least 100 men with you, just to be on the safe side."),
		(call_script, "script_start_quest", "qst_wildfire_quest3", "$g_talk_troop"),
		(display_message, "@Giving Jess one last scornfull look, you decide to leave the tavern.")
	]],

	[trp_wildfire_npc_4, "pj_wildfire_talk7",
	[],
	"Oh my! Come then, take me in the barn, {my lord/my lady}!", "close_window",
	[
		(enable_party, "p_abandoned_holdfast"),
		(call_script, "script_end_quest", "qst_wildfire_quest2"),
		(setup_quest_text, "qst_wildfire_quest3"),
		(str_store_string, 2, "@Jess told you that there'd been rumors of wildlings in the Lonely Hills, north of the Dreadfort. Perhaps they have taken refuge in the Abandoned Holdfast. You should bring at least 100 men with you, just to be on the safe side."),
		(call_script, "script_start_quest", "qst_wildfire_quest3", "$g_talk_troop"),
		(display_message, "@After leaving the barn, you wonder if Jess will soon have a swollen belly.")
	]],

	[plyr|trp_wildfire_npc_4, "pj_wildfire_talk",
	[],
	"Nothing, I'm leaving.", "close_window",
	[]],

	[party_tpl|pt_wildfire_wights, "start",
	[
		(eq, "$talk_context", 2),
		(neq, "$g_talk_troop", "pt_wildfire_wights")
	],
	"When you're dead, you'll join us!", "order2",
	[]],

	[plyr|party_tpl|pt_wildfire_wights, "order2",
	[],
	"You deserve to die...", "order3",
	[]],

	[party_tpl|pt_wildfire_wights, "order3",
	[],
	"I can't die! See, we're already dead! Dead, dead, dead!", "close_window",
	[
		(encounter_attack)
	]],

	[trp_wildfire_npc_5, "start",
	[],
	"What do you want? What do you want? I saw an elk carrying a dead man, in a dream!", "pj_wildfire_talk",
	[]],

	[plyr|trp_wildfire_npc_5, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_wildfire_quest3")
	],
	"I've come searching for wildlings. Have you seen them?", "pj_wildfire_talk2",
	[]],

	[trp_wildfire_npc_5, "pj_wildfire_talk2",
	[],
	"Saw a fist in the snow, the dead was crawling all over it! Saw a dark shape in the north! It speaks to me, whispers! Saw wild men too, but they're my brothers now! Beneath the ground we'll lie, but not yet! When the dawn is ended, I'll have my bride, my cold bride, in the snow and in the dirt!", "pj_wildfire_talk3",
	[]],

	[plyr|trp_wildfire_npc_5, "pj_wildfire_talk3",
	[],
	"Tell me where the wildlings went. Now.", "pj_wildfire_talk5",
	[]],

	[trp_wildfire_npc_5, "pj_wildfire_talk5",
	[],
	"Hah! Heh! No! You can't have them! He gave them to me, they're mine to play with! To love, to hate, to kill! And then they'll kill me! A big happy family we are! Come, come, I'll show you!", "close_window",
	[
		(set_spawn_radius, 1),
		(spawn_around_party, "p_abandoned_holdfast", "pt_wildfire_wights"),
		(party_set_ai_behavior, "pt_wildfire_wights", 0),
		(call_script, "script_end_quest", "qst_wildfire_quest3"),
		(setup_quest_text, "qst_wildfire_quest4"),
		(str_store_string, 2, "@The old man has raised revenants from the ground! Defeat him!"),
		(disable_party, "p_abandoned_holdfast"),
		(call_script, "script_start_quest", "qst_wildfire_quest4", "$g_talk_troop"),
		(display_message, "@As the madman cacles maniacally, you notice how cold is has gotten..."),
		(set_global_cloud_amount, 99999),
		(set_global_haze_amount, 99999)
	]],

	[plyr|trp_wildfire_npc_5, "pj_wildfire_talk",
	[],
	"Who are you?", "nacroxnicke_creditos",
	[]],

	[trp_wildfire_npc_5, "nacroxnicke_creditos",
	[],
	"None of your concern! I'm just an old man!", "close_window",
	[]],

	[plyr|trp_wildfire_npc_5, "pj_wildfire_talk",
	[],
	"Nothing.", "close_window",
	[]],

	[trp_wildfire_npc_6, "start",
	[],
	"What do you want?", "pj_wildfire_talk",
	[]],

	[plyr|trp_wildfire_npc_6, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_wildfire_quest5")
	],
	"Septon Germund sent me.", "pj_wildfire_talk2",
	[]],

	[trp_wildfire_npc_6, "pj_wildfire_talk2",
	[],
	"Is that so? What does the old knave want? More saffron, or is it one of Lord Manderlys nieces he's got his eye on this time? Heh.", "pj_wildfire_talk3",
	[]],

	[plyr|trp_wildfire_npc_6, "pj_wildfire_talk3",
	[],
	"No. He sent me to track down a band of wildlings that had burned the village of Hillhall. My journey ended north of the Dreadfort, in the Lonely Hills, where I found the wildlings. They where cold as ice, yet still they walked. Their eyes where blue, without life. They where wights.", "pj_wildfire_talk4",
	[]],

	[trp_wildfire_npc_6, "pj_wildfire_talk4",
	[],
	"We had a raven from the Lord Commander... Thought for sure that Aemons wits must have been wandering, but if you saw the same in the Hills...", "pj_wildfire_talk5",
	[]],

	[trp_wildfire_npc_6, "pj_wildfire_talk5",
	[],
	"Hear me well, {playername}. I'm a learned man, and I've spent many of my years in the cellars of Castle Black, looking over the old books. Wights are not supposed to be able to pass beneath the Wall. It's not just ice and stone. Powerful magic was used to raise it, and it still holds to this day. These wights must have been reanimated here, not beyond the Wall.", "pj_wildfire_talk6",
	[]],

	[plyr|trp_wildfire_npc_6, "pj_wildfire_talk6",
	[],
	"They where. I slew the man who did it.", "pj_wildfire_talk7",
	[]],

	[trp_wildfire_npc_6, "pj_wildfire_talk7",
	[],
	"Gods be good! Return to Septon Germund at once, {playername}. He must be made to spread the word. The villagers must be armed.", "close_window",
	[
		(add_troop_to_site, "trp_wildfire_npc_7", "scn_town_31_tavern", 43),
		(call_script, "script_end_quest", "qst_wildfire_quest5"),
		(setup_quest_text, "qst_wildfire_quest6"),
		(str_store_string, 2, "@Return to Septon Germund and claim your reward."),
		(call_script, "script_start_quest", "qst_wildfire_quest6", "$g_talk_troop"),
		(display_message, "@A raven caws in the distance.")
	]],

	[plyr|trp_wildfire_npc_6, "pj_wildfire_talk",
	[],
	"I forgot.", "close_window",
	[]],

	[trp_wildfire_npc_7, "start",
	[],
	"Yes?", "pj_germund_talk",
	[]],

	[plyr|trp_wildfire_npc_7, "pj_germund_talk",
	[
		(check_quest_active, "qst_wildfire_quest6")
	],
	"I found the wildlings. An old man had raised them from the dead, as wights.", "wildfire_espada",
	[]],

	[trp_wildfire_npc_7, "wildfire_espada",
	[],
	"This is dire news, {playername}! I thought wights and revenants where just stories from The Seven-Pointed Star! We must arm the villages, and warn the lords! And someone must send a raven to the Wall... Gueren can do that! And make sure our fires burn brigt! Speaking of fire, I have something that might come in handy, should you run into more of these creatures.", "wildfire_espada2",
	[
		(troop_add_item, "trp_player", "itm_player_grenade", "itm_player_grenade", 9),
		(add_xp_as_reward, 1500),
		(succeed_quest, "qst_wildfire_quest5"),
		(call_script, "script_change_player_relation_with_troop", "trp_knight_2_6", 2),
		(call_script, "script_end_quest", "qst_wildfire_quest6"),
		(setup_quest_text, "qst_gueren_quest"),
		(str_store_string, 2, "@Return to the tavern and look for Gueren."),
		(call_script, "script_start_quest", "qst_gueren_quest", "$g_talk_troop"),
		(remove_troop_from_site, "trp_wildfire_npc_7", "scn_town_31_tavern"),
		(add_troop_to_site, "trp_nw_quest_starter", "scn_town_31_tavern", 44),
		(display_message, "@Return to the tavern and look for Gueren.")
	]],

	[plyr|trp_wildfire_npc_7, "wildfire_espada2",
	[],
	"Where did you get these?", "new_one_wildfire",
	[]],

	[trp_wildfire_npc_7, "new_one_wildfire",
	[],
	"Before I became a septon, I studied with the pyromancers of King's Landing. Old fools the lot of them! When I left them, I took these pots with me. Been a real nuisance having to transport them everywhere in barrels of sand, I tell you that! Be careful with them, they can't be refilled! And I certainly can't make any more of the substance!", "close_window",
	[
		(assign, "$wildfire_holy_sword", 2)
	]],

	[plyr|trp_wildfire_npc_7, "pj_germund_talk",
	[],
	"I forgot.", "close_window",
	[]],

	[trp_wildfire_npc_7, "start",
	[
		(eq, "$wildfire_holy_sword", 2)
	],
	"Greetings {playername}.", "bye31",
	[]],

	[plyr|trp_wildfire_npc_7, "bye31",
	[],
	"Greetings to you too.", "close_window",
	[]],

	[trp_clansman_npc_0, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes? What do you want? Be quiet, or the young lord will be startled!", "clansman_starter_introduce_1",
	[]],

	[plyr|trp_clansman_npc_0, "clansman_starter_introduce_1",
	[],
	"Do you know of anyone who would happen to have a task for me?", "clansman_starter_introduce_2",
	[]],

	[trp_clansman_npc_0, "clansman_starter_introduce_2",
	[],
	"The lady Lysa is the ruler of the Vale until young lord Robert comes of age. Seek an audience with her. She is currently sleeping, but come back later and I'm sure she'll find time for you.", "close_window",
	[
		(add_troop_to_site, "trp_clansman_npc_1", "scn_castle_34_interior", 11)
	]],

	[trp_clansman_npc_0, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_clansman_npc_1, "start",
	[
		(eq, "$g_lysa_quest", 0)
	],
	"Yes? What do you want?", "clansman_talk",
	[]],

	[plyr|trp_clansman_npc_1, "clansman_talk",
	[],
	"I am {playername}, my lady, and I've come seeking adventure. Do you have any tasks for me?", "clansman_talk2",
	[]],

	[plyr|trp_clansman_npc_1, "clansman_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_clansman_npc_1, "clansman_talk2",
	[],
	"Yes, {playername}, I do, I do. Those vile mountain clans have been causing all sort of chaos lately! I wonder how they've gotten their hands on such pristine weapons... They need to be dealt with!", "clansman_talk3",
	[]],

	[plyr|trp_clansman_npc_1, "clansman_talk3",
	[],
	"What can I do?", "clansman_talk4",
	[]],

	[trp_clansman_npc_1, "clansman_talk4",
	[],
	"Go out there and kill them, obviously! Talk to Ser Albar, Lord Nestors son. He'll know what to do, I'm sure.", "clansman_talk5",
	[]],

	[plyr|trp_clansman_npc_1, "clansman_talk5",
	[],
	"Where can I find him?", "clansman_talk6",
	[]],

	[trp_clansman_npc_1, "clansman_talk6",
	[],
	"Oh, how should I know? Do I have to do everything myself! Go look for him at the Bloody Gate, he often goes hunting there.", "clansman_talk7",
	[]],

	[plyr|trp_clansman_npc_1, "clansman_talk7",
	[],
	"Very well, I'll return once the clans have been dealt with.", "close_window",
	[
		(assign, "$g_lysa_quest", 1),
		(add_troop_to_site, "trp_clansman_npc_2", "scn_castle_24_interior", 11),
		(remove_troop_from_site, "trp_clansman_npc_1", "scn_castle_34_interior"),
		(setup_quest_text, "qst_clansman_quest"),
		(str_store_string, 2, "@Lysa Tully, acting on behalf of her son, Robert Arryn, has tasked you with exterminating the mountain clans. Seek out Ser Albar Royce, he should be at The Bloody Gate."),
		(call_script, "script_start_quest", "qst_clansman_quest", "$g_talk_troop")
	]],

	[trp_clansman_npc_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_clansman_npc_2, "start",
	[],
	"I'm busy, go away!", "pj_clansman_talk",
	[]],

	[plyr|trp_clansman_npc_2, "pj_clansman_talk",
	[
		(check_quest_active, "qst_clansman_quest")
	],
	"Are you Ser Albar Royce?", "pj_clansman_talk2",
	[]],

	[trp_clansman_npc_2, "pj_clansman_talk2",
	[],
	"Yes, what's it to you?", "pj_clansman_talk3",
	[]],

	[plyr|trp_clansman_npc_2, "pj_clansman_talk3",
	[],
	"My name is {playername}. Lady Lysa sent me here, she believes you can help me dealing with the mountain clans.", "pj_clansman_talk5",
	[]],

	[trp_clansman_npc_2, "pj_clansman_talk5",
	[],
	"Hah! A hundred generations of Arryns have tried to deal with those damn savages, I doubt you'll be able to do anything about them. The lady Lysa is a good and honest woman, but... she is, shall we say, prone to bouts of extreme optimism when dealing with things like these. Still, I guess teaching the clans a lesson wouldn't be the worst we could do.", "pj_clansman_talk6",
	[]],

	[plyr|trp_clansman_npc_2, "pj_clansman_talk6",
	[],
	"So you know where they are?", "pj_clansman_talk8",
	[]],

	[trp_clansman_npc_2, "pj_clansman_talk8",
	[],
	"Gods no! If I knew, I'd have gone after them myself. No one knows where they live, that's why they're never dealt with. The Mountains of the Moon are filled with caves and hidden valleys... Still, try and visit Jharys in Gulltown. He sometimes has dealings with the clans, but we let him get away with it because he helps us track down kidnapped maidens.", "close_window",
	[
		(call_script, "script_end_quest", "qst_clansman_quest"),
		(setup_quest_text, "qst_clansman_quest1"),
		(str_store_string, 2, "@Visit Jharys in Gulltown."),
		(remove_troop_from_site, "trp_clansman_npc_2", "scn_castle_24_interior"),
		(add_troop_to_site, "trp_clansman_npc_3", "scn_town_8_tavern", 41),
		(call_script, "script_start_quest", "qst_clansman_quest1", "$g_talk_troop")
	]],

	[plyr|trp_clansman_npc_2, "pj_clansman_talk",
	[],
	"Hmph!", "close_window",
	[]],

	[trp_clansman_npc_3, "start",
	[],
	"What do you want?", "pj_clansman_talk",
	[]],

	[plyr|trp_clansman_npc_3, "pj_clansman_talk",
	[
		(check_quest_active, "qst_clansman_quest1")
	],
	"Are you Jharys?", "pj_clansman_talk2",
	[]],

	[trp_clansman_npc_3, "pj_clansman_talk2",
	[],
	"Yes, yes, what's it to you?", "pj_clansman_talk3",
	[]],

	[plyr|trp_clansman_npc_3, "pj_clansman_talk3",
	[],
	"Albar Royce seemed to think you might know where I could find the mountain clans.", "pj_clansman_talk5",
	[]],

	[trp_clansman_npc_3, "pj_clansman_talk5",
	[],
	"Hah, which one? There's a dozen! And no, I don't know where they are. Perhaps Ser Myles over at Coldwater Burn has heard something. That man is the biggest gossip, and drunk, in the Vale of Arryn. He knows everything.", "pj_clansman_talk6",
	[]],

	[plyr|trp_clansman_npc_3, "pj_clansman_talk6",
	[],
	"You've been most helpful.", "close_window",
	[
		(call_script, "script_end_quest", "qst_clansman_quest1"),
		(setup_quest_text, "qst_clansman_quest2"),
		(str_store_string, 2, "@Visit Ser Myles at Coldwater Burn."),
		(remove_troop_from_site, "trp_clansman_npc_3", "scn_town_8_tavern"),
		(add_troop_to_site, "trp_clansman_npc_4", "scn_castle_33_interior", 11),
		(call_script, "script_start_quest", "qst_clansman_quest2", "$g_talk_troop")
	]],

	[plyr|trp_clansman_npc_3, "pj_clansman_talk",
	[],
	"No matter, I'm leaving.", "close_window",
	[]],

	[trp_clansman_npc_4, "start",
	[],
	"What do you want, huh?", "pj_clansman_talk",
	[]],

	[plyr|trp_clansman_npc_4, "pj_clansman_talk",
	[
		(check_quest_active, "qst_clansman_quest2")
	],
	"Ser Myles? Jharys sent me, he told me you might know where to find the mountain clans?", "pj_clansman_talk2",
	[]],

	[trp_clansman_npc_4, "pj_clansman_talk2",
	[],
	"Oh no, haven't got a clue about them clans. Heard a juicy rumour about Mychel Redfort and Lyn Corbray recently though, and one about that singer at the lady Lysas court. Seems he's rather fond of young maidens, especially those yet to be spoiled by another man! But no, I have no idea where the mountain clans live.", "pj_clansman_talk3",
	[]],

	[plyr|trp_clansman_npc_4, "pj_clansman_talk3",
	[],
	"Do you know any who might?", "pj_clansman_talk4",
	[]],

	[trp_clansman_npc_4, "pj_clansman_talk4",
	[],
	"Not really, no. Though perhaps... perhaps you could go ask my mother, lady Barbrey. She lives in Wickenden.", "pj_clansman_talk5",
	[]],

	[plyr|trp_clansman_npc_4, "pj_clansman_talk5",
	[],
	"Big help you are!", "pj_clansman_talk6",
	[
		(try_begin),
			(call_script, "script_change_troop_renown", "trp_player", -5),
		(try_end)
	]],

	[plyr|trp_clansman_npc_4, "pj_clansman_talk5",
	[],
	"Thank you Ser Myles.", "pj_clansman_talk7",
	[
		(try_begin),
			(call_script, "script_change_troop_renown", "trp_player", 5),
		(try_end)
	]],

	[trp_clansman_npc_4, "pj_clansman_talk6",
	[],
	"Bah!", "close_window",
	[
		(call_script, "script_end_quest", "qst_clansman_quest2"),
		(setup_quest_text, "qst_clansman_quest3"),
		(str_store_string, 2, "@Visit lady Barbrey in Wickenden."),
		(remove_troop_from_site, "trp_clansman_npc_4", "scn_castle_33_interior"),
		(add_troop_to_site, "trp_clansman_npc_5", "scn_castle_12_interior", 11),
		(call_script, "script_start_quest", "qst_clansman_quest3", "$g_talk_troop")
	]],

	[trp_clansman_npc_4, "pj_clansman_talk7",
	[],
	"Don't mention it.", "close_window",
	[
		(call_script, "script_end_quest", "qst_clansman_quest2"),
		(setup_quest_text, "qst_clansman_quest3"),
		(str_store_string, 2, "@Visit lady Barbrey in Wickenden."),
		(remove_troop_from_site, "trp_clansman_npc_4", "scn_castle_33_interior"),
		(add_troop_to_site, "trp_clansman_npc_5", "scn_castle_12_interior", 11),
		(call_script, "script_start_quest", "qst_clansman_quest3", "$g_talk_troop")
	]],

	[plyr|trp_clansman_npc_4, "pj_clansman_talk",
	[],
	"Nothing, I'm leaving.", "close_window",
	[]],

	[party_tpl|pt_clansman_quest, "start",
	[
		(eq, "$talk_context", 2),
		(neq, "$g_talk_troop", "pt_clansman_quest"),
		(party_set_ai_behavior, "pt_clansman_quest", 0)
	],
	"Grarh!", "order2",
	[]],

	[plyr|party_tpl|pt_clansman_quest, "order2",
	[],
	"What?", "order3",
	[]],

	[party_tpl|pt_clansman_quest, "order3",
	[],
	"Die!", "close_window",
	[
		(encounter_attack)
	]],

	[trp_clansman_npc_5, "start",
	[],
	"What do you want?", "pj_clansman_talk",
	[]],

	[plyr|trp_clansman_npc_5, "pj_clansman_talk",
	[
		(check_quest_active, "qst_clansman_quest3")
	],
	"Lady Barbrey, your son sent me, he thinks you might know where to find the mountain clans?", "pj_clansman_talk2",
	[]],

	[trp_clansman_npc_5, "pj_clansman_talk2",
	[],
	"Bah, did he now! Could have told you himself, couldn't he? His father is the chief of one of those savage clans. Calls themselves the Moon Brothers. Bah! Guess you're done talking to me now, am I right? No one wants to talk to me ever since those savages returned me to my fathers keep, violated and big with child... Last I heard, the Moon Brothers had been seen close to Strongsong...", "pj_clansman_talk3",
	[]],

	[plyr|trp_clansman_npc_5, "pj_clansman_talk3",
	[],
	"I'm sorry?", "pj_clansman_talk5",
	[]],

	[trp_clansman_npc_5, "pj_clansman_talk5",
	[],
	"Nevermind...", "close_window",
	[
		(remove_troop_from_site, "trp_clansman_npc_5", "scn_castle_12_interior"),
		(add_troop_to_site, "trp_clansman_npc_6", "scn_castle_1_interior", 11),
		(call_script, "script_end_quest", "qst_clansman_quest3"),
		(setup_quest_text, "qst_clansman_quest4"),
		(str_store_string, 2, "@The Moon Brothers where last seen close to Strongsong. Perhaps you should visit the castellan of Strongsong and ask if he's seen or heard anything."),
		(call_script, "script_start_quest", "qst_clansman_quest4", "$g_talk_troop"),
		(display_message, "@Lady Barbrey breaks down in tears...")
	]],

	[plyr|trp_clansman_npc_5, "pj_clansman_talk",
	[],
	"May I know more about you, my lady?", "nacroxnicke_creditos",
	[]],

	[trp_clansman_npc_5, "nacroxnicke_creditos",
	[],
	"No! Go away, and tell that drunken bastard son of mine he's as worthless as that pig of a father who begot him!", "close_window",
	[]],

	[plyr|trp_clansman_npc_5, "pj_clansman_talk",
	[],
	"Nothing.", "close_window",
	[]],

	[trp_clansman_npc_6, "start",
	[],
	"What do you want?", "pj_clansman_talk",
	[]],

	[plyr|trp_clansman_npc_6, "pj_clansman_talk",
	[
		(check_quest_active, "qst_clansman_quest4")
	],
	"I've come looking for the Moon Brothers, have you heard anything?", "pj_clansman_talk2",
	[]],

	[trp_clansman_npc_6, "pj_clansman_talk2",
	[],
	"Yes, they where spotted not a mile from here! But we don't have the numbers to deal with them. As of late, the clans have grown wilder, and they bear sharp steel and heavy armor!", "pj_clansman_talk3",
	[]],

	[plyr|trp_clansman_npc_6, "pj_clansman_talk3",
	[],
	"I'll head out right away, and deal with them!", "pj_clansman_talk4",
	[]],

	[trp_clansman_npc_6, "pj_clansman_talk4",
	[],
	"Reckon so, do you?", "pj_clansman_talk5",
	[]],

	[trp_clansman_npc_6, "pj_clansman_talk5",
	[],
	"Well, I guess you might as well give it a go. I don't imagine you'll return, but here's a small parting gift.", "pj_clansman_talk6",
	[
		(troop_add_gold, "trp_player", 300)
	]],

	[plyr|trp_clansman_npc_6, "pj_clansman_talk6",
	[],
	"Thank you.", "pj_clansman_talk7",
	[]],

	[trp_clansman_npc_6, "pj_clansman_talk7",
	[],
	"My pleasure. I do hope you can do something about these savages.", "close_window",
	[
		(remove_troop_from_site, "trp_clansman_npc_6", "scn_castle_1_interior"),
		(set_spawn_radius, 1),
		(spawn_around_party, "p_castle_1", "pt_clansman_quest"),
		(add_troop_to_site, "trp_clansman_npc_7", "scn_castle_34_interior", 11),
		(call_script, "script_end_quest", "qst_clansman_quest4"),
		(setup_quest_text, "qst_clansman_quest5"),
		(str_store_string, 2, "@Defeat the clansmen."),
		(call_script, "script_start_quest", "qst_clansman_quest5", "$g_talk_troop")
	]],

	[plyr|trp_clansman_npc_6, "pj_clansman_talk",
	[],
	"I forgot.", "close_window",
	[]],

	[trp_clansman_npc_7, "start",
	[],
	"Yes, {playername}?", "pj_germund_talk",
	[]],

	[plyr|trp_clansman_npc_7, "pj_germund_talk",
	[
		(check_quest_active, "qst_clansman_quest6")
	],
	"I've slain the Moon Brothers, one less tribe of clansmen to trouble the Vale.", "clansman_espada",
	[]],

	[trp_clansman_npc_7, "clansman_espada",
	[],
	"Trying to steal Ser Albars glory, eh? He came to me not an hour ago and told me how he and his knights had tracked down the savages and taught them who rules the Vale. I'll not have liars at the Eyrie, away with you! Just you wait till Lord Nestor hears of this!", "clansman_espada2",
	[
		(call_script, "script_change_player_relation_with_troop", "trp_kingdom_3_lord", -5),
		(call_script, "script_change_troop_renown", "trp_player", -30),
		(add_xp_as_reward, 100),
		(call_script, "script_end_quest", "qst_clansman_quest6")
	]],

	[plyr|trp_clansman_npc_7, "clansman_espada2",
	[],
	"Erh...", "new_one_clansman",
	[]],

	[trp_clansman_npc_7, "new_one_clansman",
	[],
	"Go away!", "close_window",
	[
		(assign, "$clansman_holy_sword", 2)
	]],

	[trp_clansman_npc_7, "start",
	[
		(eq, "$clansman_holy_sword", 2)
	],
	"Greetings {playername}.", "bye31",
	[]],

	[plyr|trp_clansman_npc_7, "bye31",
	[],
	"Greetings to you too.", "close_window",
	[]],

	[plyr|trp_clansman_npc_7, "pj_germund_talk",
	[],
	"I forgot.", "close_window",
	[]],

	[trp_varys_npc_1, "start",
	[],
	"Ah, {playername}! It's good to see you again!", "clansman_talk",
	[]],

	[plyr|trp_varys_npc_1, "clansman_talk",
	[
		(check_quest_active, "qst_return_to_illyrio2")
	],
	"Haldon mentioned that you might have further need of my skills.", "clansman_talk2",
	[]],

	[plyr|trp_varys_npc_1, "clansman_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_varys_npc_1, "clansman_talk2",
	[],
	"Yes, {playername}, I do, I do. I need someone to take a message to a friend of mine in King's Landing.", "clansman_talk3",
	[]],

	[plyr|trp_varys_npc_1, "clansman_talk3",
	[],
	"Where can I find him?", "clansman_talk4",
	[]],

	[plyr|trp_varys_npc_1, "clansman_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_varys_npc_1, "clansman_talk4",
	[],
	"Oh, he'll find you, don't you worry on that account. Just go to the biggest tavern in the city and wait around, I'm sure you'll get in contact with him.", "clansman_talk5",
	[]],

	[plyr|trp_varys_npc_1, "clansman_talk5",
	[],
	"What is his name? How do I know whether I'm talking to the right person?", "clansman_talk6",
	[]],

	[plyr|trp_varys_npc_1, "clansman_talk5",
	[],
	"On second thought, I think I'll stay out of this.", "close_window",
	[]],

	[trp_varys_npc_1, "clansman_talk6",
	[],
	"My friend goes by the name of Rugen, he works as an undergaoler in the Black Cells of the Red Keep. I suppose he'll be dressed as a gaoler.", "clansman_talk7",
	[]],

	[plyr|trp_varys_npc_1, "clansman_talk7",
	[
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(ge, ":free_inventory_capacity", 1)
	],
	"Very well, I'll bring Rugen your message.", "close_window",
	[
		(troop_add_item, "trp_player", "itm_varys_npc_1_letter", 0),
		(call_script, "script_end_quest", "qst_return_to_illyrio2"),
		(remove_troop_from_site, "trp_varys_npc_1", "scn_town_12_castle"),
		(setup_quest_text, "qst_varys_quest"),
		(str_store_string, 2, "@Magister Illyrio has asked you to deliver a message to his friend Rugen. You can probably find him in the Black Cells of the Red Keep."),
		(assign, "$g_black_cells_1", 1),
		(call_script, "script_start_quest", "qst_varys_quest", "$g_talk_troop")
	]],

	[plyr|trp_varys_npc_1, "clansman_talk7",
	[],
	"I can't carry that right now.", "close_window",
	[]],

	[trp_varys_npc_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_varys_npc_2, "start",
	[],
	"Yes?", "pj_clansman_talk",
	[]],

	[plyr|trp_varys_npc_2, "pj_clansman_talk",
	[
		(player_has_item, "itm_varys_npc_1_letter"),
		(check_quest_active, "qst_varys_quest")
	],
	"Are you Rugen?", "pj_clansman_talk2",
	[]],

	[trp_varys_npc_2, "pj_clansman_talk2",
	[],
	"Yes, what's it to you?", "pj_clansman_talk3",
	[]],

	[plyr|trp_varys_npc_2, "pj_clansman_talk3",
	[],
	"My name is {playername}. I've been sent by Illyrio Mopatis, all the way from Pentos, to bring you a message.", "pj_clansman_talk5",
	[]],

	[trp_varys_npc_2, "pj_clansman_talk5",
	[],
	"Ah, yes, the message. Hmph, well done {playername}. Let's keep this between us, eh? Here's a bit of... ah... incentive.", "pj_clansman_talk6",
	[
		(troop_add_gold, "trp_player", 500)
	]],

	[plyr|trp_varys_npc_2, "pj_clansman_talk6",
	[],
	"Do you need me to bring back a message?", "pj_clansman_talk8",
	[]],

	[trp_varys_npc_2, "pj_clansman_talk8",
	[],
	"Well, ah, if you're headed back to Pentos, you might as well bring him my, ah, reply. You'll need to keep quiet about your doings, obviously.", "pj_clansman_talk9",
	[]],

	[plyr|trp_varys_npc_2, "pj_clansman_talk9",
	[
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(ge, ":free_inventory_capacity", 1)
	],
	"Very well.", "close_window",
	[
		(troop_add_item, "trp_player", "itm_varys_npc_2_letter", 0),
		(troop_remove_items, "trp_player", "itm_varys_npc_1_letter", 1),
		(call_script, "script_end_quest", "qst_varys_quest"),
		(setup_quest_text, "qst_varys_quest1"),
		(str_store_string, 2, "@Return to Magister Illyrio."),
		(remove_troop_from_site, "trp_varys_npc_2", "scn_town_16_tavern"),
		(assign, "$g_black_cells_1", 2),
		(add_troop_to_site, "trp_varys_npc_3", "scn_town_12_castle", 11),
		(call_script, "script_start_quest", "qst_varys_quest1", "$g_talk_troop")
	]],

	[plyr|trp_varys_npc_2, "pj_clansman_talk9",
	[],
	"I can't carry that right now.", "close_window",
	[]],

	[plyr|trp_varys_npc_2, "pj_clansman_talk",
	[],
	"Hmph!", "close_window",
	[]],

	[trp_varys_npc_3, "start",
	[],
	"Yes {playername}?", "pj_clansman_talk",
	[]],

	[plyr|trp_varys_npc_3, "pj_clansman_talk",
	[
		(player_has_item, "itm_varys_npc_2_letter"),
		(check_quest_active, "qst_varys_quest1")
	],
	"Rugen asked me bring you his reply.", "pj_clansman_talk2",
	[]],

	[trp_varys_npc_3, "pj_clansman_talk2",
	[],
	"Ah splendid, {playername}. You've been a great help. Would you be interested in doing me yet another favor?", "pj_clansman_talk3",
	[]],

	[plyr|trp_varys_npc_3, "pj_clansman_talk3",
	[],
	"Yes.", "pj_clansman_talk5",
	[]],

	[trp_varys_npc_3, "pj_clansman_talk5",
	[],
	"I need you to bring a chest of... valuables... to an acquaintance of mine. A knight, by the name of Rolly Duckfield. I've arranged for him to wait in a tavern in Norvos. Bring him the chest, and I'll make sure you're well rewarded.", "pj_clansman_talk6",
	[]],

	[plyr|trp_varys_npc_3, "pj_clansman_talk6",
	[
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(ge, ":free_inventory_capacity", 1)
	],
	"Very well.", "close_window",
	[
		(troop_add_item, "trp_player", "itm_varys_npc_3_chest", 0),
		(troop_remove_items, "trp_player", "itm_varys_npc_2_letter", 1),
		(display_message, "@Illyrios servants carry in a small chest, handing it over to you."),
		(call_script, "script_end_quest", "qst_varys_quest1"),
		(setup_quest_text, "qst_varys_quest2"),
		(str_store_string, 2, "@Bring Illyrios chest of valuables to Ser Rolle Duckfield in Norvos."),
		(remove_troop_from_site, "trp_varys_npc_3", "scn_town_12_castle"),
		(add_troop_to_site, "trp_varys_npc_4", "scn_town_51_tavern", 41),
		(call_script, "script_start_quest", "qst_varys_quest2", "$g_talk_troop")
	]],

	[plyr|trp_varys_npc_3, "pj_clansman_talk6",
	[],
	"I can't carry that right now.", "close_window",
	[]],

	[plyr|trp_varys_npc_3, "pj_clansman_talk",
	[],
	"No matter, I'm leaving.", "close_window",
	[]],

	[trp_varys_npc_4, "start",
	[],
	"What do you want, huh?", "pj_clansman_talk",
	[]],

	[plyr|trp_varys_npc_4, "pj_clansman_talk",
	[
		(player_has_item, "itm_varys_npc_3_chest"),
		(check_quest_active, "qst_varys_quest2")
	],
	"Ser Rolly? Magister Illyrio asked me to bring you this chest.", "pj_clansman_talk2",
	[]],

	[trp_varys_npc_4, "pj_clansman_talk2",
	[],
	"Ah good, good. But Griff says our plans have changed, and I'm afraid I can't carry this with me if we're going to get the boy to Selhorys in time. You'll need to return this to Magister Illyrio, with my apologies.", "pj_clansman_talk3",
	[]],

	[plyr|trp_varys_npc_4, "pj_clansman_talk3",
	[],
	"Who are you talking about? Take it back?", "pj_clansman_talk4",
	[]],

	[trp_varys_npc_4, "pj_clansman_talk4",
	[],
	"Ah shit. Nevermind. Just bring the chest back to Pentos, and talk with the fat man. Tell him we're heading west instead of east.", "pj_clansman_talk5",
	[]],

	[plyr|trp_varys_npc_4, "pj_clansman_talk5",
	[],
	"I'm not a pack mule!", "pj_clansman_talk6",
	[
		(try_begin),
			(call_script, "script_change_troop_renown", "trp_player", -5),
		(try_end)
	]],

	[plyr|trp_varys_npc_4, "pj_clansman_talk5",
	[],
	"Very well.", "pj_clansman_talk7",
	[
		(try_begin),
			(call_script, "script_change_troop_renown", "trp_player", 5),
		(try_end)
	]],

	[trp_varys_npc_4, "pj_clansman_talk6",
	[],
	"Bah!", "close_window",
	[
		(call_script, "script_end_quest", "qst_varys_quest2"),
		(setup_quest_text, "qst_varys_quest3"),
		(str_store_string, 2, "@Bring the chest back to Magister Illyrio."),
		(remove_troop_from_site, "trp_varys_npc_4", "scn_town_51_tavern"),
		(add_troop_to_site, "trp_varys_npc_5", "scn_town_12_castle", 11),
		(call_script, "script_start_quest", "qst_varys_quest3", "$g_talk_troop")
	]],

	[trp_varys_npc_4, "pj_clansman_talk7",
	[],
	"Thanks friend.", "close_window",
	[
		(call_script, "script_end_quest", "qst_varys_quest2"),
		(setup_quest_text, "qst_varys_quest3"),
		(str_store_string, 2, "@Bring the chest back to Magister Illyrio."),
		(remove_troop_from_site, "trp_varys_npc_4", "scn_town_51_tavern"),
		(add_troop_to_site, "trp_varys_npc_5", "scn_town_12_castle", 11),
		(call_script, "script_start_quest", "qst_varys_quest3", "$g_talk_troop")
	]],

	[plyr|trp_varys_npc_4, "pj_clansman_talk",
	[],
	"Nothing, I'm leaving.", "close_window",
	[]],

	[trp_varys_npc_5, "start",
	[],
	"Yes, {playername}? How very good to see you. Did you get the chest to Norvos?", "pj_clansman_talk",
	[]],

	[plyr|trp_varys_npc_5, "pj_clansman_talk",
	[
		(player_has_item, "itm_varys_npc_3_chest"),
		(check_quest_active, "qst_varys_quest3")
	],
	"I did, but your friend had me bring it back here.", "pj_clansman_talk2",
	[]],

	[trp_varys_npc_5, "pj_clansman_talk2",
	[],
	"What? Why? Did he give you a reason. Speak man.", "pj_clansman_talk3",
	[]],

	[plyr|trp_varys_npc_5, "pj_clansman_talk3",
	[],
	"He said something about a boy, Selhorys and going west?", "pj_clansman_talk5",
	[]],

	[trp_varys_npc_5, "pj_clansman_talk5",
	[],
	"Curse that man! Griff is too impatient! We've been keeping him secret for sixteen years, and now we're running out of time?! We'll have to act quickly, {playername}. Go back to King's Landing and tell Rugen what you've learned. No, better yet, bring him this letter.", "pj_clansman_talk6",
	[]],

	[plyr|trp_varys_npc_5, "pj_clansman_talk6",
	[
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(ge, ":free_inventory_capacity", 1)
	],
	"Very well.", "close_window",
	[
		(troop_remove_items, "trp_player", "itm_varys_npc_3_chest", 1),
		(troop_add_item, "trp_player", "itm_varys_npc_5_letter", 0),
		(remove_troop_from_site, "trp_varys_npc_5", "scn_town_50_tavern"),
		(call_script, "script_end_quest", "qst_varys_quest3"),
		(setup_quest_text, "qst_varys_quest4"),
		(str_store_string, 2, "@Return to Rugen in the Black Cells of the Red Keep."),
		(assign, "$g_black_cells_2", 1),
		(display_message, "@Illyrio hands you a sealed letter."),
		(call_script, "script_start_quest", "qst_varys_quest4", "$g_talk_troop")
	]],

	[plyr|trp_varys_npc_5, "pj_clansman_talk6",
	[],
	"I'm afraid I can't carry a letter right now.", "close_window",
	[]],

	[plyr|trp_varys_npc_5, "pj_clansman_talk",
	[],
	"Nothing.", "close_window",
	[]],

	[trp_varys_npc_6, "start",
	[],
	"What do you want?", "pj_clansman_talk",
	[]],

	[plyr|trp_varys_npc_6, "pj_clansman_talk",
	[
		(check_quest_active, "qst_varys_quest4")
	],
	"I'm looking for a man named Rugen.", "pj_clansman_talk2",
	[]],

	[trp_varys_npc_6, "pj_clansman_talk2",
	[],
	"Ah, Rugen! An unsavory fellow. Not like myself. I'm of royal blood myself, you see.", "pj_clansman_talk3",
	[]],

	[plyr|trp_varys_npc_6, "pj_clansman_talk3",
	[],
	"What are you talking about?", "pj_clansman_talk4",
	[]],

	[trp_varys_npc_6, "pj_clansman_talk4",
	[],
	"I'm descended from the natural born son of a Targaryen princess. My mother told me the story. My ancestor was such a strong, brave and handsome warrior, that even a princess could fall in love with him.", "pj_clansman_talk5",
	[]],

	[trp_varys_npc_6, "pj_clansman_talk5",
	[],
	"Their son was born a bastard, but a royal bastard! My fathers father added the 'Long' before 'Waters'. We're a noble family of knights carrying royal blood, you see. Couldn't have a name as lowborn as 'Waters'!", "pj_clansman_talk6",
	[]],

	[plyr|trp_varys_npc_6, "pj_clansman_talk6",
	[],
	"Oh, I don't care! Do you know where Rugen is?", "pj_clansman_talk7",
	[]],

	[trp_varys_npc_6, "pj_clansman_talk7",
	[],
	"He's in the tavern. I swear it on my royal blood!", "close_window",
	[
		(add_troop_to_site, "trp_varys_npc_7", "scn_town_16_tavern", 46),
		(call_script, "script_end_quest", "qst_varys_quest4"),
		(setup_quest_text, "qst_varys_quest5"),
		(str_store_string, 2, "@Find Rugen in the tavern."),
		(assign, "$g_black_cells_2", 2),
		(call_script, "script_start_quest", "qst_varys_quest5", "$g_talk_troop")
	]],

	[plyr|trp_varys_npc_6, "pj_clansman_talk",
	[],
	"I forgot.", "close_window",
	[]],

	[trp_varys_npc_7, "start",
	[],
	"Ah, {playername}.", "pj_germund_talk",
	[]],

	[plyr|trp_varys_npc_7, "pj_germund_talk",
	[
		(player_has_item, "itm_varys_npc_5_letter"),
		(check_quest_active, "qst_varys_quest5")
	],
	"Magister Illyrio asked me to deliver this letter to you.", "clansman_espada",
	[]],

	[trp_varys_npc_7, "clansman_espada",
	[],
	"Well, ah, then. Give it here.", "clansman_espada2",
	[
		(add_xp_as_reward, 1500),
		(display_message, "@Rugen reads the letter."),
		(succeed_quest, "qst_varys_quest5"),
		(call_script, "script_end_quest", "qst_varys_quest5")
	]],

	[plyr|trp_varys_npc_7, "clansman_espada2",
	[],
	"Well?", "new_one_clansman",
	[
		(assign, "$g_global_var_announce_invasion_targaryen", 1)
	]],

	[trp_varys_npc_7, "new_one_clansman",
	[],
	"I am in your debt, {playername}. Here, please accept this gift as a sign of my gratitude.", "new_one_clansman2",
	[
		(troop_add_gold, "trp_player", 500)
	]],

	[plyr|trp_varys_npc_7, "new_one_clansman2",
	[],
	"If you don't mind me asking, who is Griff?", "new_one_clansman3",
	[]],

	[trp_varys_npc_7, "new_one_clansman3",
	[],
	"Ah, {playername}, you'll know in time, in time. Suffice to say, the men of the Sunset Kingdoms are all the same. They sew some beast upon a scrap of silk, and suddenly they are all lions or stags or eagles, but black or red, a dragon is still a dragon. But ah, I need you to do one last thing for me...", "doran_martell_quest",
	[]],

	[trp_varys_npc_7, "doran_martell_quest",
	[],
	"I need you to visit a winesink in Sunspear, called the Thirsty Goat. Look for a man called Septon Allard, and deliver the letter to him.", "doran_martell_quest1",
	[
		(troop_remove_items, "trp_player", "itm_varys_npc_5_letter", 1),
		(troop_add_item, "trp_player", "itm_varys_npc_5_letter", 0),
		(setup_quest_text, "qst_varys_quest6"),
		(str_store_string, 2, "@Travel to the Thirsty Goat in Sunspear."),
		(assign, "$g_thirsty_goat", 1),
		(call_script, "script_start_quest", "qst_varys_quest6", "$g_talk_troop"),
		(display_message, "@Rugen hands you the letter")
	]],

	[plyr|trp_varys_npc_7, "doran_martell_quest1",
	[],
	"Very well.", "close_window",
	[
		(assign, "$illyrio_holy_sword", 2)
	]],

	[trp_varys_npc_7, "start",
	[
		(eq, "$illyrio_holy_sword", 2)
	],
	"Greetings {playername}.", "bye31",
	[]],

	[plyr|trp_varys_npc_7, "bye31",
	[],
	"Greetings to you too.", "close_window",
	[]],

	[plyr|trp_varys_npc_7, "pj_germund_talk",
	[],
	"Nevermind.", "close_window",
	[]],

	[trp_varys_npc_8, "start",
	[],
	"What?", "pj_clansman_talk",
	[]],

	[plyr|trp_varys_npc_8, "pj_clansman_talk",
	[
		(player_has_item, "itm_varys_npc_5_letter"),
		(check_quest_active, "qst_varys_quest6")
	],
	"I bring a sealed letter from Rugen.", "pj_clansman_talk2",
	[]],

	[trp_varys_npc_8, "pj_clansman_talk2",
	[],
	"Do you now... give it to me.", "pj_clansman_talk3",
	[]],

	[plyr|trp_varys_npc_8, "pj_clansman_talk3",
	[],
	"Here you are.", "pj_clansman_talk4",
	[
		(display_message, "@You hand the letter to Septon Allard, who proceeds to read it.")
	]],

	[trp_varys_npc_8, "pj_clansman_talk4",
	[],
	"Hmm...", "pj_clansman_talk5",
	[]],

	[trp_varys_npc_8, "pj_clansman_talk5",
	[],
	"The prince must hear of this. Visit the castle and deliver this letter to Maester Caleotte.", "pj_clansman_talk6",
	[]],

	[plyr|trp_varys_npc_8, "pj_clansman_talk6",
	[
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(ge, ":free_inventory_capacity", 1)
	],
	"Erm, I will...", "pj_clansman_talk7",
	[]],

	[plyr|trp_varys_npc_8, "pj_clansman_talk6",
	[],
	"I can't carry that right now.", "close_window",
	[]],

	[trp_varys_npc_8, "pj_clansman_talk7",
	[],
	"Good.", "close_window",
	[
		(troop_remove_items, "trp_player", "itm_varys_npc_5_letter", 1),
		(troop_add_item, "trp_player", "itm_varys_npc_8_letter", 0),
		(call_script, "script_end_quest", "qst_varys_quest6"),
		(add_troop_to_site, "trp_varys_npc_9_finish", "scn_town_19_castle", 11),
		(setup_quest_text, "qst_varys_quest7"),
		(str_store_string, 2, "@Talk to Maester Caleotte, who should be at court, in Sunspear."),
		(assign, "$g_thirsty_goat", 2),
		(call_script, "script_start_quest", "qst_varys_quest7", "$g_talk_troop")
	]],

	[plyr|trp_varys_npc_8, "pj_clansman_talk",
	[],
	"I forgot.", "close_window",
	[]],

	[trp_varys_npc_9_finish, "start",
	[],
	"Yes?", "pj_clansman_talk",
	[]],

	[plyr|trp_varys_npc_9_finish, "pj_clansman_talk",
	[
		(check_quest_active, "qst_varys_quest7"),
		(player_has_item, "itm_varys_npc_8_letter")
	],
	"I was told to bring you this.", "pj_clansman_talk2",
	[
		(display_message, "@You hand the letter to Maester Caleotte, who proceeds to read it.")
	]],

	[trp_varys_npc_9_finish, "pj_clansman_talk2",
	[],
	"Ah yes... {playername}, Magister Illyrio speaks highly of you in this letter, you've done the prince a great service.", "pj_clansman_talk3",
	[
		(troop_remove_items, "trp_player", "itm_varys_npc_8_letter", 1)
	]],

	[plyr|trp_varys_npc_9_finish, "pj_clansman_talk3",
	[],
	"I'm glad.", "pj_clansman_talk4",
	[]],

	[trp_varys_npc_9_finish, "pj_clansman_talk4",
	[],
	"Hmm...", "pj_clansman_talk5",
	[]],

	[trp_varys_npc_9_finish, "pj_clansman_talk5",
	[],
	"It seems to me that the magister did not offer you a suitable reward for the great risks you've faced... I will make sure you receive a proper reward, on the understanding that not a word of what you've accomplished for us ever leave your mouth... Words are like arrows, once loosened you cannot call them back, and one stray arrow can bring down even a prince.", "pj_clansman_talk6",
	[]],

	[plyr|trp_varys_npc_9_finish, "pj_clansman_talk6",
	[],
	"I won't speak a word of what I've done.", "pj_clansman_talk7",
	[]],

	[trp_varys_npc_9_finish, "pj_clansman_talk7",
	[],
	"Good, good. Accept this as a proper reward for your accomplishments then, {playername}, and remember your vow. The storm is on the horizon.", "close_window",
	[
		(remove_troop_from_site, "trp_varys_npc_9_finish", "scn_town_19_castle"),
		(call_script, "script_end_quest", "qst_varys_quest7"),
		(assign, "$g_global_var_announce_invasion_dorne", 1),
		(troop_add_gold, "trp_player", 3500)
	]],

	[plyr|trp_varys_npc_9_finish, "pj_clansman_talk",
	[],
	"I forgot.", "close_window",
	[]],

	[trp_luwin, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes, can I help you?", "wildfire_starter_introduce_1",
	[]],

	[plyr|trp_luwin, "wildfire_starter_introduce_1",
	[],
	"I'm looking for the castellan, have you seen him?", "wildfire_starter_introduce_2",
	[]],

	[trp_luwin, "wildfire_starter_introduce_2",
	[],
	"Ser Rodrik rode into the woods this morning, but he should be back soon.", "close_window",
	[
		(display_message, "@Return to the castle later, and talk to Ser Rodrik Cassel."),
		(add_troop_to_site, "trp_rodrik_cassel_1", "scn_castle_129_interior", 11)
	]],

	[trp_luwin, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Excuse me, I'm very busy.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_rodrik_cassel_1, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes? Can I help you?", "wildfire_talk",
	[]],

	[plyr|trp_rodrik_cassel_1, "wildfire_talk",
	[],
	"Do you have any tasks for me?", "wildfire_talk2",
	[]],

	[plyr|trp_rodrik_cassel_1, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_rodrik_cassel_1, "wildfire_talk2",
	[],
	"Yes, I do. If you're man enough for it.", "wildfire_talk3",
	[]],

	[plyr|trp_rodrik_cassel_1, "wildfire_talk3",
	[],
	"What would you have me do?", "wildfire_talk4",
	[]],

	[plyr|trp_rodrik_cassel_1, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_rodrik_cassel_1, "wildfire_talk4",
	[],
	"The Bastard of Bolton has been wrecking havock across the Lonely Hills. For his crimes, he has been sentenced to death. I need someone who can bring the kings justice to this monster of a man.", "wildfire_talk5",
	[]],

	[plyr|trp_rodrik_cassel_1, "wildfire_talk5",
	[],
	"Hmm... Is there a reward for this task?", "wildfire_talk6",
	[]],

	[plyr|trp_rodrik_cassel_1, "wildfire_talk5",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_rodrik_cassel_1, "wildfire_talk6",
	[],
	"Indeed there is. Bring about the Bastards demise, and I will grant you a fair reward.", "wildfire_talk7",
	[]],

	[plyr|trp_rodrik_cassel_1, "wildfire_talk7",
	[],
	"Very well, I will bring the kings justice to Ramsay Snow.", "close_window",
	[
		(add_troop_to_site, "trp_ramsay_snow", "scn_castle_32_interior", 11),
		(remove_troop_from_site, "trp_rodrik_cassel_1", "scn_castle_129_interior"),
		(setup_quest_text, "qst_ramsay_quest"),
		(str_store_string, 2, "@Ser Rodrik Cassel has tasked you with bringing the kings justice to Ramsay Snow. Look for him at his fathers castle, the Dreadfort."),
		(call_script, "script_start_quest", "qst_ramsay_quest", "$g_talk_troop")
	]],

	[plyr|trp_rodrik_cassel_1, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_rodrik_cassel_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_ramsay_snow, "start",
	[],
	"What do you want? Leave me be, peasant, I have no time for beggars.", "pj_wildfire_talk",
	[]],

	[plyr|trp_ramsay_snow, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_ramsay_quest")
	],
	"Ramsay Snow, by order of ser Rodrik Cassel, castellan of Winterfell, I sentence you to die.", "pj_wildfire_talk2",
	[]],

	[trp_ramsay_snow, "pj_wildfire_talk2",
	[],
	"What? I'll teach you to call me 'Snow'! Do you truly think you can harm me here, in my lord fathers castle?", "pj_wildfire_talk3",
	[]],

	[plyr|trp_ramsay_snow, "pj_wildfire_talk3",
	[],
	"No, but you will have to leave eventually. When you do, you die.", "pj_wildfire_talk5",
	[]],

	[trp_ramsay_snow, "pj_wildfire_talk5",
	[],
	"Maybe it'll be you choking on your own blood! I will hurt you, I will flay you, and when I am done with you, you'll beg for death!", "close_window",
	[
		(call_script, "script_end_quest", "qst_ramsay_quest"),
		(add_troop_to_site, "trp_rodrik_cassel_2", "scn_castle_129_interior", 11),
		(remove_troop_from_site, "trp_ramsay_snow", "scn_castle_32_interior"),
		(set_spawn_radius, 1),
		(spawn_around_party, "p_castle_32", "pt_new_template"),
		(party_set_ai_behavior, "pt_new_template", 0),
		(setup_quest_text, "qst_ramsay_quest1"),
		(str_store_string, 2, "@Defeat Ramsay Snow."),
		(call_script, "script_start_quest", "qst_ramsay_quest1", "$g_talk_troop"),
		(display_message, "@From below the floor, you can hear faint screams.")
	]],

	[plyr|trp_ramsay_snow, "pj_wildfire_talk",
	[],
	"Hmph!", "close_window",
	[]],

	[party_tpl|pt_new_template, "start",
	[
		(eq, "$talk_context", 2),
		(neq, "$g_talk_troop", "pt_new_template")
	],
	"I'll flay the skin off your wretched body!", "order2",
	[]],

	[plyr|party_tpl|pt_new_template, "order2",
	[],
	"We'll see about that!", "order3",
	[]],

	[party_tpl|pt_new_template, "order3",
	[],
	"I'll make you regret this!", "close_window",
	[
		(encounter_attack)
	]],

	[trp_rodrik_cassel_2, "start",
	[],
	"Yes?", "pj_wildfire_talk",
	[]],

	[plyr|trp_rodrik_cassel_2, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_ramsay_quest2")
	],
	"Ser Rodrik, I've taken care of the Bastard for you. He shouldn't be a threat any longer.", "pj_wildfire_talk2",
	[]],

	[trp_rodrik_cassel_2, "pj_wildfire_talk2",
	[],
	"Truly? Winterfell and the North is in your debt, {playername}. Ramsay Snow was not a man, he was a beast wearing a mans skin. I'll see to it that you'll be rewarded for this deed.", "pj_wildfire_talk3",
	[]],

	[plyr|trp_rodrik_cassel_2, "pj_wildfire_talk3",
	[],
	"My pleasure, Ser Rodrik. If you've any other jobs that need doing, please let me know.", "close_window",
	[
		(call_script, "script_change_player_honor", 5),
		(call_script, "script_change_player_relation_with_troop", "trp_knight_2_3", -100),
		(call_script, "script_change_player_relation_with_troop", "trp_kingdom_2_lord", 10),
		(remove_troop_from_site, "trp_rodrik_cassel_2", "scn_castle_129_interior"),
		(call_script, "script_end_quest", "qst_ramsay_quest2"),
		(troop_add_item, "trp_player", "itm_fi_lowlander_sword", 0),
		(add_xp_as_reward, 1000),
		(display_message, "@Everybody in Winterfell has heard of your valiant deed. As you leave the castle, a huge wolf comes jumping across the yard. It stops before you, and licks your hand, before running off again.")
	]],

	[plyr|trp_rodrik_cassel_2, "pj_wildfire_talk",
	[],
	"May I know more about you?", "morcant_creditos",
	[]],

	[trp_rodrik_cassel_2, "morcant_creditos",
	[],
	"I am Rodrik Cassel, castellan and master-at-arms at Winterfell.", "close_window",
	[]],

	[plyr|trp_rodrik_cassel_2, "pj_wildfire_talk",
	[],
	"Nevermind.", "close_window",
	[]],

	[trp_terror_npc_1, "start",
	[
		(check_quest_active, "qst_starting_quest_1_1")
	],
	"Yes?", "wildfire_starter_introduce_1",
	[]],

	[plyr|trp_terror_npc_1, "wildfire_starter_introduce_1",
	[],
	"Do you have any tasks for me?", "wildfire_starter_introduce_2",
	[]],

	[trp_terror_npc_1, "wildfire_starter_introduce_2",
	[],
	"No, not right now, but I've heard that one of the tenants of Cairnhall has been seeking a knight to get rid of an, erm, wight... anyway, he's been hanging out in the tavern. I also overheard Lord Swanns captain of the guards, Ser Clifford Gower, talk about some letters he needs delivered to some minor lord. Ser Clifford went out hunting this morning, but he should be back in a few hours. Ah, and yes, if you have the time, {playername}, I need a letter delivered to archmaester Harodon at the Citadel in Oldtown.", "wildfire_starter_introduce_3",
	[]],

	[plyr|trp_terror_npc_1, "wildfire_starter_introduce_3",
	[
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(ge, ":free_inventory_capacity", 1)
	],
	"Very well.", "close_window",
	[
		(troop_add_item, "trp_player", "itm_harodon_letter", 0),
		(assign, "$g_citadel_available", 1),
		(call_script, "script_end_quest", "qst_starting_quest_1_1"),
		(setup_quest_text, "qst_terror_quest_starter"),
		(str_store_string, 2, "@Septon Garibald told you of a farmer in need of help. You can find him in the tavern of The Weeping Town."),
		(display_message, "@Septon Garibald hands you the letter he wants you to deliver to archmaester Harodon."),
		(add_xp_as_reward, 200),
		(call_script, "script_start_quest", "qst_terror_quest_starter", "$g_talk_troop"),
		(setup_quest_text, "qst_starting_quest_1_2"),
		(str_store_string, 2, "@Ser Clifford Gower, the captain of the guards, needs someone to deliver a letter. You can find him in the castle hall of The Weeping Town."),
		(call_script, "script_start_quest", "qst_starting_quest_1_2", "$g_talk_troop"),
		(add_troop_to_site, "trp_terror_npc_2", "scn_town_6_tavern", 41),
		(add_troop_to_site, "trp_clifford_gower", "scn_town_6_castle", 1),
		(setup_quest_text, "qst_starting_quest_citadel"),
		(str_store_string, 2, "@Septon Garibald asked you to deliver a letter to archmaester Harodon at the Citadel in Oldtown."),
		(call_script, "script_start_quest", "qst_starting_quest_citadel", "$g_talk_troop")
	]],

	[plyr|trp_terror_npc_1, "wildfire_starter_introduce_3",
	[],
	"I can't carry a letter right now.", "close_window",
	[]],

	[trp_terror_npc_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm busy.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_renly_quest_melisandre, "start",
	[
		(check_quest_active, "qst_renly_quest_1")
	],
	"{playername}.", "wildfire_talk",
	[]],

	[plyr|trp_renly_quest_melisandre, "wildfire_talk",
	[],
	"How do you know my name?", "wildfire_talk2",
	[]],

	[plyr|trp_renly_quest_melisandre, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_renly_quest_melisandre, "wildfire_talk2",
	[],
	"The Lord of Light will grant his servants visions of the future, if he deems them worhty.", "wildfire_talk3",
	[]],

	[trp_renly_quest_melisandre, "wildfire_talk3",
	[],
	"I know why you've come. The Lord of Light has shown me the future. Stannis Baratheon is the saviour of the world, Azor Ahai come again, reborn amidst smoke and salt. He wields Lightbringer, the Red Sword of Heroes. It has been foretold that when the stars bleed and the cold winds rises, a warrior shall draw from the fire a burning sword, and Azor Ahai shall be born once again.", "wildfire_talk5",
	[]],

	[plyr|trp_renly_quest_melisandre, "wildfire_talk5",
	[],
	"But what about Renly?", "wildfire_talk6",
	[]],

	[trp_renly_quest_melisandre, "wildfire_talk6",
	[],
	"Renly Baratheon is of no importance. R'hllor has already shown me his future, and his time is drawing near. The king might not see it himself, but Renly must die to clear the way for Stannis to sit the Iron Throne and wield the power necessary to save the world.", "wildfire_talk7",
	[]],

	[plyr|trp_renly_quest_melisandre, "wildfire_talk7",
	[],
	"But how?", "wildfire_talk8",
	[]],

	[trp_renly_quest_melisandre, "wildfire_talk8",
	[],
	"Storm's End is old and formidable. But not impregnable. Beneath the castle walls is a cavern. I can work spells that will win Stannis the castle and the allegiance of the storm lords, but the castle walls are set with ancient runes. I need to get past them. And you will help me. Seek out Ser Davos, and tell him of my need.", "close_window",
	[
		(disable_party, "p_renly_quest_shore"),
		(call_script, "script_end_quest", "qst_renly_quest_1"),
		(setup_quest_text, "qst_renly_quest_2"),
		(str_store_string, 2, "@Talk to Ser Davos Seaworth."),
		(call_script, "script_start_quest", "qst_renly_quest_2", "$g_talk_troop")
	]],

	[plyr|trp_renly_quest_melisandre, "wildfire_talk7",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_renly_quest_melisandre, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_citadel_harodon, "start",
	[],
	"What is it? I'm busy! All these acolytes, with their stupid questions!", "wildfire_talk",
	[]],

	[plyr|trp_citadel_harodon, "wildfire_talk",
	[
		(player_has_item, "itm_harodon_letter"),
		(check_quest_active, "qst_starting_quest_citadel")
	],
	"Archmaester Harodon? Septon Garibald told me to deliver this letter to you.", "wildfire_talk2",
	[]],

	[plyr|trp_citadel_harodon, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_citadel_harodon, "wildfire_talk2",
	[],
	"Oh who cares. Another septon, preaching to us about how our efforts are futile, that all truth lies with the Father Above. Bah! Bunch of sheep is what they are!", "wildfire_talk3",
	[
		(troop_remove_items, "trp_player", "itm_harodon_letter", 1),
		(add_xp_as_reward, 500),
		(call_script, "script_end_quest", "qst_starting_quest_citadel")
	]],

	[plyr|trp_citadel_harodon, "wildfire_talk3",
	[],
	"What do you mean?", "wildfire_talk4",
	[]],

	[trp_citadel_harodon, "wildfire_talk4",
	[],
	"The Faith has been trying to curb our influence for hundreds of years. Feel like they should be the only ones spreading knowledge. Or their version of it, at least. Sheep is what they are, shackled in their huts of ignorance. Did you know that Baelor the Blessed was considering a request to bring the Citadel under the authority of the High Septon when he died? Good thing his uncle killed him, Viserys was a much better king. Didn't know that, did you? Oh, there's no written evidence, but sure as rain, Viserys murdered Baelor and took the throne.", "wildfire_talk5",
	[]],

	[plyr|trp_citadel_harodon, "wildfire_talk5",
	[],
	"Very well...", "wildfire_talk6",
	[]],

	[trp_citadel_harodon, "wildfire_talk6",
	[],
	"Do you believe in the Seven, {playername}? That the Father Above watches you, the Warrior protects you, the Crone lights the way?", "wildfire_talk7",
	[]],

	[plyr|trp_citadel_harodon, "wildfire_talk7",
	[],
	"I do.", "wildfire_talk8",
	[
		(call_script, "script_change_player_relation_with_troop", "trp_knight_10_4", 5)
	]],

	[plyr|trp_citadel_harodon, "wildfire_talk7",
	[],
	"I do not.", "wildfire_talk9",
	[
		(call_script, "script_change_player_relation_with_troop", "trp_knight_10_4", -5)
	]],

	[trp_citadel_harodon, "wildfire_talk8",
	[],
	"Then to you I say 'bahhh'. Go rut around in the mud with the other sheep, and leave us enlightened men to continue our work.", "close_window",
	[]],

	[trp_citadel_harodon, "wildfire_talk9",
	[],
	"Ah, a learned men is what you are then. Well done I say. Too many superstitious fools rut around in the mud, always looking for answers they'll never find. Marwyn could tell you all about what it's like to rut around down there.", "close_window",
	[]],

	[trp_citadel_harodon, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_citadel_castos, "start",
	[
		(eq, "$g_citadel_quest_worm", 0)
	],
	"Yes? How can I help you?", "wildfire_talk",
	[]],

	[plyr|trp_citadel_castos, "wildfire_talk",
	[],
	"Who are you?", "wildfire_talk2",
	[]],

	[plyr|trp_citadel_castos, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_citadel_castos, "wildfire_talk2",
	[],
	"An Archmaester of the Citadel! Though there's plenty of us around, these days the conclave will give any man who's read a book the title. Just look at Harodon. Bigger fool you'd have to search for far and wide. The Faith can be niggardly, stubborn, backwards and cruel, but the septons still hold more power than we'll ever do, advisers of lords and ladies though we are. It's unwise to antagonize those with more power than yourself.", "wildfire_talk3",
	[]],

	[trp_citadel_castos, "wildfire_talk3",
	[],
	"You won't hear me defend the septons though. They've burned more books than I care to think about. Imagine what we would know of the past, if it wasn't for Baelor Targaryen. All those books, gone, and for what? Some silly king, half a boy, who fancied himself more than a man, more than a king. Baelor saw himself as the embodiement of the Seven, a god made flesh.", "wildfire_talk5",
	[]],

	[plyr|trp_citadel_castos, "wildfire_talk5",
	[],
	"Very well...", "wildfire_talk6",
	[]],

	[trp_citadel_castos, "wildfire_talk6",
	[],
	"It's all here in the books. The evidence. You just have to look for it. Plenty of people don't. They'll read some asinine book meant for bored lords and ladies, and think they understand the way the world works. But without proper training, how will they ever be able to see the world for what is really is. Bah, nothing worse than some uneducated know-it-all. But ah, enough of the rabble. More important things are afoot in the world. Did you know that the Citadel is always looking for lost works? Books, scrolls, ledgers. Would you be interested in procuring such items for us, {playername}?", "wildfire_talk7",
	[]],

	[plyr|trp_citadel_castos, "wildfire_talk7",
	[],
	"I am interested.", "wildfire_talk8",
	[]],

	[trp_citadel_castos, "wildfire_talk8",
	[],
	"Ah, good. Books are precious, you know. A single copy of Barths 'Unnatural History' would be worth more than a sword of valyrian steel. Imagine that, {playername}! Alas, Baelor was thorough in destroying all of Barths writings. But enough about that. If you want to help us conserve the knowledge of the past, travel to King's Landing. The Citadel employs a procurer in the city, who always scours the bookshops for unknown writings, but he often needs men who can travel further from the city and pick up books from other places. His name is Malko, you can find him on Coppersmith's Wynd. He runs a shop called, can you believe it, 'Malkos Bookstore'", "close_window",
	[
		(assign, "$g_citadel_quest_worm", 1),
		(setup_quest_text, "qst_citadel_quest_1"),
		(str_store_string, 2, "@Archmaester Castos told you to visit Coppersmith's Wynd in King's Landing and talk to Malko."),
		(call_script, "script_start_quest", "qst_citadel_quest_1", "$g_talk_troop")
	]],

	[plyr|trp_citadel_castos, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_citadel_castos, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_citadel_malko, "start",
	[
		(check_quest_active, "qst_citadel_quest_1")
	],
	"Ah, a customer! How can I help you, my good man?", "wildfire_talk",
	[]],

	[plyr|trp_citadel_malko, "wildfire_talk",
	[],
	"I've been sent by Archmaester Harodon.", "wildfire_talk2",
	[
		(call_script, "script_end_quest", "qst_citadel_quest_1")
	]],

	[plyr|trp_citadel_malko, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_citadel_malko, "wildfire_talk2",
	[],
	"Joyous news! My last procurer had a nasty accident a couple of months back. Cut himself on a fine piece of vellum, and would you believe it, it turned gangrenous! Lost his whole hand. Sad story, so sad. At least it wasn't his right hand, he'll still be able to work as a scribe... ", "wildfire_talk3",
	[
		(call_script, "script_end_quest", "qst_starting_quest_citadel")
	]],

	[plyr|trp_citadel_malko, "wildfire_talk3",
	[],
	"What does a procurer do?", "wildfire_talk4",
	[]],

	[trp_citadel_malko, "wildfire_talk4",
	[],
	"They procure books. I have many contacts throughout the Seven Kingdoms, and you wouldn't believe the kind of lost knowledge the lords and knights of the realm have hidden away in their cellars. Once, I found a piece of Septon Barth's 'Dragons, Wyrms and Wyverns: Their Unnatural History' being used as a tablecloth in the room of an old blind knight. Sold it to Tyrion Lannister for a king's ransom. Even the Citadel itself cannot outbid a Lannister. But they are my most persistent customers, the maesters.", "wildfire_talk5",
	[]],

	[plyr|trp_citadel_malko, "wildfire_talk5",
	[],
	"But what do you need me for?", "wildfire_talk6",
	[]],

	[trp_citadel_malko, "wildfire_talk6",
	[],
	"I can't leave my shop to go gallivanting around the world looking for books, but I can't send a soft scribe in my place either. Even at the best of times, the roads can be hazardous. But you look like a tough sort, and I have work for someone tough. I've heard rumours of a book, hidden away in the Vale. It might be multiple books to tell you the truth. It's referenced in various texts, most notably in one of Barth's fragments. It goes by different names. The Dreams of Azathoth. Dead Names. But it's most often called The Mysteries of the Worm. Who knows which one is real. I think it's a myth, but imagine if not! We could sell the book to the maesters for unimaginable riches!", "wildfire_talk7",
	[]],

	[plyr|trp_citadel_malko, "wildfire_talk7",
	[],
	"It's very valuable?", "wildfire_talk8",
	[]],

	[trp_citadel_malko, "wildfire_talk8",
	[],
	"Ah, not really. Marwyn writes that the people of Asshai tell tales of the book. It's supposed to be an introduction to all kinds of magic. Silly superstitions. But the maesters have labored long and hard to eradicate supposed 'magical' textbooks, and a find such as this could render many of their efforts futile. So they'd pay well to have it destroyed. According to my sources, a septon has been making mentions of a magical book in the north-western parts of the Vale. Go there and talk to him, {playername}, find out if there's any truth to the whole thing. I'll reward you handsomely, and here's a bit of an advance.", "close_window",
	[
		(troop_add_gold, "trp_player", 500),
		(setup_quest_text, "qst_citadel_quest_2"),
		(str_store_string, 2, "@Visit the Septry in the north-western part of the Vale."),
		(enable_party, "p_citadel_septry"),
		(call_script, "script_start_quest", "qst_citadel_quest_2", "$g_talk_troop")
	]],

	[trp_citadel_malko, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_citadel_septon, "start",
	[
		(check_quest_active, "qst_citadel_quest_2")
	],
	"A blessing, my good man? The Father Above is all the protection you need. Lay down your weapons and rejoice in his holy light.", "wildfire_talk",
	[]],

	[plyr|trp_citadel_septon, "wildfire_talk",
	[],
	"I'm looking for a book.", "wildfire_talk2",
	[
		(call_script, "script_end_quest", "qst_citadel_quest_2")
	]],

	[plyr|trp_citadel_septon, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_citadel_septon, "wildfire_talk2",
	[],
	"What book?...", "wildfire_talk3",
	[
		(call_script, "script_end_quest", "qst_starting_quest_citadel")
	]],

	[plyr|trp_citadel_septon, "wildfire_talk3",
	[],
	"The Mysteries of the Worm?", "wildfire_talk4",
	[]],

	[trp_citadel_septon, "wildfire_talk4",
	[],
	"Never heard of it. Only book a godly man need is The Seven-Pointed Star. Everything else is just worldly knowledge, soon to be forgotten. Why waste your time with books about plants when you could show your devotion to the Seven instead?", "wildfire_talk5",
	[]],

	[plyr|trp_citadel_septon, "wildfire_talk5",
	[],
	"So you haven't heard anything about a book? It's supposed to be rare.", "wildfire_talk6",
	[]],

	[trp_citadel_septon, "wildfire_talk6",
	[],
	"Haven't heard anything about much lately. This is a remote corner of the world, my little place of worship. The smallfolk around here are simple, with simple needs and simple dreams.", "wildfire_talk7",
	[]],

	[plyr|trp_citadel_septon, "wildfire_talk7",
	[],
	"Do you know anyone who might have knowledge of books in the area?", "wildfire_talk8",
	[]],

	[trp_citadel_septon, "wildfire_talk8",
	[],
	"Can't say I do. Though perhaps Ser Elston have heard something. His holdings are to the east of here, close to the foot of the mountains. We're very isolated here, but if anyone have heard anything about books, it's either Ser Elston or his maester.", "close_window",
	[
		(setup_quest_text, "qst_citadel_quest_3"),
		(str_store_string, 2, "@Visit the holdings of Ser Elston, to the east of the septry."),
		(disable_party, "p_citadel_septry"),
		(enable_party, "p_citadel_holdings"),
		(call_script, "script_start_quest", "qst_citadel_quest_3", "$g_talk_troop")
	]],

	[trp_citadel_septon, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_citadel_knight, "start",
	[
		(check_quest_active, "qst_citadel_quest_3")
	],
	"Terrible weather, isn't it? It feels... sour. Somethings wrong with it.", "wildfire_talk",
	[]],

	[plyr|trp_citadel_knight, "wildfire_talk",
	[],
	"What do you mean?", "wildfire_talk2",
	[
		(call_script, "script_end_quest", "qst_citadel_quest_3")
	]],

	[plyr|trp_citadel_knight, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_citadel_knight, "wildfire_talk2",
	[],
	"This whole place is... wrong. Should have stayed on the road. Never wanted this. I'm Ser Elston Boone, the last of House Boone. Inherited these holdings from a distant cousin last year. Used to be a tourney knight. What a life, riding from town to town, not a care in the world. Now I'm shackled to this place.", "wildfire_talk3",
	[
		(call_script, "script_end_quest", "qst_starting_quest_citadel")
	]],

	[plyr|trp_citadel_knight, "wildfire_talk3",
	[],
	"I'm looking for a rare book, and was wondering if I might consult with your maester?", "wildfire_talk4",
	[]],

	[trp_citadel_knight, "wildfire_talk4",
	[],
	"The Mysteries of the Worm? I can see from your reaction that's the one. Cadwyn has not been talking about anything else for weeks. Found it mentioned in some old papers left behind by one of my ancestors. Mentioned something about Witch Isle and the Upcliffs. Cadwyn was sure he could figure out where the book went... Did you hear that?! There's something in the walls. Perhaps it's just rats... but they'd have to be a monstrous size...", "wildfire_talk5",
	[]],

	[plyr|trp_citadel_knight, "wildfire_talk5",
	[],
	"Can I talk to maester Cadwyn?", "wildfire_talk6",
	[]],

	[trp_citadel_knight, "wildfire_talk6",
	[],
	"Afraid not, {playername}.", "wildfire_talk7",
	[]],

	[plyr|trp_citadel_knight, "wildfire_talk7",
	[],
	"Why not?", "wildfire_talk8",
	[]],

	[trp_citadel_knight, "wildfire_talk8",
	[],
	"He killed himself. Two days ago. Cut his own throat. Bad way to go. It's this sour air. It turns everyone mad. He rambled for days you know. Shouting about the Long Night. About great white spiders and wights walking up and down a wall... his trip to the barrow changed him... should never visit barrows, {playername}, the dead sleep better when not disturbed...", "close_window",
	[
		(setup_quest_text, "qst_citadel_quest_4"),
		(str_store_string, 2, "@Ser Elston told you maester Cadwyn changed after visiting the nearby barrow. Perhaps you can find the book there."),
		(disable_party, "p_citadel_holdings"),
		(enable_party, "p_citadel_barrow"),
		(call_script, "script_start_quest", "qst_citadel_quest_4", "$g_talk_troop")
	]],

	[trp_citadel_knight, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_citadel_malko_2, "start",
	[
		(check_quest_active, "qst_citadel_quest_5")
	],
	"Ah, {playername}! Tell me, did you find the book?", "wildfire_talk",
	[]],

	[plyr|trp_citadel_malko_2, "wildfire_talk",
	[],
	"I did not.", "wildfire_talk2",
	[]],

	[plyr|trp_citadel_malko_2, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_citadel_malko_2, "wildfire_talk2",
	[],
	"Oh, what a shame. Just a rumor then, nothing to it? I hear all kinds of stories, most of them untrue. You wouldn't believe the nonsense tales that originate in remote hamlets.", "wildfire_talk3",
	[]],

	[plyr|trp_citadel_malko_2, "wildfire_talk3",
	[],
	"I did hear of a fragment of the book.", "wildfire_talk4",
	[]],

	[trp_citadel_malko_2, "wildfire_talk4",
	[],
	"You did? Tell me more!", "wildfire_talk5",
	[]],

	[plyr|trp_citadel_malko_2, "wildfire_talk5",
	[],
	"A maester found a clue or a sliver of notes partaining to it. I tried to find where it was, but all I found was a crazed man who had sacrificed to an old tree. He'd written the name 'YGG' on a stone, with the blood of one of his victims.", "wildfire_talk6",
	[]],

	[trp_citadel_malko_2, "wildfire_talk6",
	[],
	"'Ygg', you say? How quaint. The ironborn tell tales of how their legendary ruler, The Grey King, carved the first longship from a tree called Ygg. Supposively, a demon lived in the tree, a demon with the power of foresight. Anyone who had their future told by Ygg would inevitable meet with tragedy. Ygg always chose to tell the future in a way that would cause the most pain to the world.", "wildfire_talk7",
	[]],

	[plyr|trp_citadel_malko_2, "wildfire_talk7",
	[],
	"Is the story true?", "wildfire_talk8",
	[]],

	[trp_citadel_malko_2, "wildfire_talk8",
	[],
	"Ah, not really. How could it be. A demon living in a tree? Sounds like the maester you mentioned got caught up in some fancy tale of his own. But forget about that, {playername}. At least you tried to find the book. That's worth a reward.", "close_window",
	[
		(add_xp_as_reward, 1500),
		(troop_add_gold, "trp_player", 500),
		(call_script, "script_end_quest", "qst_citadel_quest_5")
	]],

	[trp_citadel_malko_2, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_clifford_gower, "start",
	[
		(eq, "$g_clifford_gift", 0),
		(check_quest_active, "qst_starting_quest_1_2")
	],
	"Yes? Can I help you?", "wildfire_talk",
	[]],

	[plyr|trp_clifford_gower, "wildfire_talk",
	[],
	"Ser Clifford? Septon Garibald told me you had need of someone to deliver a letter?", "wildfire_talk2",
	[]],

	[plyr|trp_clifford_gower, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_clifford_gower, "wildfire_talk2",
	[],
	"Ah yes, I do. The maiden daughter of Symond Templeton, the Knight of Ninestars, is turning thirteen this next moon, and Ser Symonds uncles have decided to hold a tourney in her honor. My late wife was a Templeton by birth, making the young girl my niece by marriage. I've been invited to attend the melee, but my duties keep me here. However, I was always fond of my lady wife, and for her sake, I wish to send a name day present to the young girl.", "wildfire_talk3",
	[]],

	[plyr|trp_clifford_gower, "wildfire_talk3",
	[],
	"What can I do?", "wildfire_talk4",
	[]],

	[plyr|trp_clifford_gower, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_clifford_gower, "wildfire_talk4",
	[],
	"Take this letter, and this ruby ring which belonged to my lady wife, and deliver them to the castellan of Ninestars, he'll make sure the young maid receives them. Be mindful, however, that you do not upset her uncles - they're a querulous bunch. I'll make sure you're compensated for your trouble, {playername}, obviously.", "wildfire_talk5",
	[]],

	[plyr|trp_clifford_gower, "wildfire_talk5",
	[
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(ge, ":free_inventory_capacity", 2)
	],
	"Very well, I'll do it.", "wildfire_talk6",
	[
		(assign, "$g_clifford_gift", 1),
		(troop_add_item, "trp_player", "itm_clifford_ring", 0),
		(troop_add_item, "trp_player", "itm_clifford_letter", 0),
		(troop_add_gold, "trp_player", 150)
	]],

	[plyr|trp_clifford_gower, "wildfire_talk5",
	[],
	"I'm afraid I can't carry all that now.", "close_window",
	[]],

	[trp_clifford_gower, "wildfire_talk6",
	[],
	"Splendid! With all the chaos engulfing the realm, I imagine this will be the last great tourney in quite a while. While you're in the Vale, you should take the time to enjoy yourself. This summer has lasted a long time already, there's no knowing how much time we have left before winter arrives and we all have to huddle around our fires.", "wildfire_talk7",
	[]],

	[plyr|trp_clifford_gower, "wildfire_talk7",
	[],
	"Very well, I'll take a look at the tourney while I'm there.", "close_window",
	[
		(call_script, "script_end_quest", "qst_starting_quest_1_2"),
		(enable_party, "p_ninestars_1"),
		(remove_troop_from_site, "trp_clifford_gower", "scn_town_6_castle"),
		(setup_quest_text, "qst_starting_quest_1_3"),
		(str_store_string, 2, "@Ser Clifford Gower asked you to deliver a letter, and a gift, to the castellan of Ninestars, where a tourney celebrating the name day of Rowena Templeton is about to take place. Ninestars lies close to Snakewood, in the Vale."),
		(call_script, "script_start_quest", "qst_starting_quest_1_3", "$g_talk_troop")
	]],

	[trp_clifford_gower, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_ninestars_castellan, "start",
	[
		(check_quest_active, "qst_starting_quest_1_3"),
		(player_has_item, "itm_clifford_ring"),
		(player_has_item, "itm_clifford_letter")
	],
	"Yes? Can I help you?", "wildfire_talk",
	[]],

	[plyr|trp_ninestars_castellan, "wildfire_talk",
	[],
	"My lord? I'm looking for the castellan. I've brought a gift and letter from Ser Clifford Gower.", "wildfire_talk2",
	[]],

	[trp_ninestars_castellan, "wildfire_talk2",
	[],
	"Oh well, I'm the castellan of Ninestars, so you've found your man. Ser Clifford you say? By the Seven, we haven't heard from him in years. How is the old rogue doing? Oh, nevermind, how would you know. You said something about a gift? And a letter? I doubt Rowena can even remember Ser Clifford, not with all those great-uncles of hers taking up all her time and attention. Ser Symonds father had seven brothers, can you believe that?! Boisterous and arrogant the lot of them.", "wildfire_talk3",
	[]],

	[plyr|trp_ninestars_castellan, "wildfire_talk3",
	[],
	"Here's the letter and the gift.", "wildfire_talk4",
	[
		(troop_remove_items, "trp_player", "itm_clifford_ring", 1),
		(troop_remove_items, "trp_player", "itm_clifford_letter", 1)
	]],

	[trp_ninestars_castellan, "wildfire_talk4",
	[],
	"Ah, thank you {playername}, I do appreciate it. The young lady will surely enjoy this gift, the ring is an old family heirloom. I'll make sure she receives them right away. Say, while you're here, you should take a stroll around the grounds. A great many merchants and mummers have camped outside the walls, and they're sure to provide a great spectacle and much merriment.", "wildfire_talk5",
	[]],

	[plyr|trp_ninestars_castellan, "wildfire_talk5",
	[],
	"I'll do that.", "wildfire_talk6",
	[]],

	[trp_ninestars_castellan, "wildfire_talk6",
	[],
	"Good, good. Do stay around for the tourney, will you? We haven't had as many visitors as we hoped. The mountain clans have grown wild, and many knights and lords have decided to stay in their keeps and holdfasts, rather than risking the roads. It was different when Jon Arryn ruled the Vale, then those vile savages wouldn't have dared show their face unless they had ten times the numbers we do!", "wildfire_talk7",
	[]],

	[plyr|trp_ninestars_castellan, "wildfire_talk7",
	[],
	"Very well, I'll take a look at the tourney while I'm there.", "close_window",
	[
		(jump_to_menu, "mnu_ninestars_2"),
		(call_script, "script_end_quest", "qst_starting_quest_1_3"),
		(disable_party, "p_ninestars_1"),
		(enable_party, "p_ninestars_1"),
		(setup_quest_text, "qst_starting_quest_1_4"),
		(str_store_string, 2, "@Ser Alyn Tollett asked you to stay around for the tourney celebrating the name day of Rowena Templeton. Visit the tourney grounds and the merchants camps."),
		(call_script, "script_start_quest", "qst_starting_quest_1_4", "$g_talk_troop")
	]],

	[trp_ninestars_castellan, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_ninestars_castellan_prison, "start",
	[
		(check_quest_active, "qst_starting_quest_1_4"),
		(eq, "$g_talk_troop_met", 0)
	],
	"{playername}. What where you thinking? The knight you attacked is Ser Raymun Templeton, Ser Symonds youngest uncle. Let me ask you this, {playername}, how good of a fighter are you?", "wildfire_talk",
	[]],

	[plyr|trp_ninestars_castellan_prison, "wildfire_talk",
	[],
	"I can hold my own.", "wildfire_talk2",
	[]],

	[trp_ninestars_castellan_prison, "wildfire_talk2",
	[],
	"Doesn't say much, does it? What a vague answer. You're a guest here, {playername}, and an unknown one at that. You struck a relative of the Knight of Ninestars, outside his own castle. Ser Symond would be in his right to cut off the offending hand. But Ser Raymun was never his favorite uncle, nor is he a friend of mine, so it's been agreed that you will be judged by someone other than Ser Symond. As it happens, I will be one of the three judges at your trial.", "wildfire_talk3",
	[]],

	[plyr|trp_ninestars_castellan_prison, "wildfire_talk3",
	[],
	"Then why are you here?", "wildfire_talk4",
	[]],

	[trp_ninestars_castellan_prison, "wildfire_talk4",
	[],
	"Why indeed. Ser Raymun and I have never been fast friends. To tell you the truth, I despise the man. However, the other two judges are his brothers. I'm the castellan of Ninestars, and a knight of House Tollett, my word carries weight in these parts, and I will urge the judges to be merciful. However, you struck the youngest brother of the two other judges, so there's a risk you'll wake up tommorow without a hand. There is another option, though.", "wildfire_talk5",
	[]],

	[plyr|trp_ninestars_castellan_prison, "wildfire_talk5",
	[],
	"Tell me.", "wildfire_talk6",
	[]],

	[trp_ninestars_castellan_prison, "wildfire_talk6",
	[],
	"You stand accused of assaulting a relative of the Knight of Ninestars. The judges will be unlikely to look upon your case with favorable eyes. But if you demand a trial by combat, you might be able to prevail. So I ask you again, {playername}, how good of a warrior are you?", "wildfire_talk7",
	[]],

	[plyr|trp_ninestars_castellan_prison, "wildfire_talk7",
	[],
	"I see.", "close_window",
	[
		(jump_to_menu, "mnu_ninestars_5"),
		(call_script, "script_end_quest", "qst_starting_quest_1_4"),
		(setup_quest_text, "qst_starting_quest_1_5"),
		(str_store_string, 2, "@You attacked Ser Raymun Templeton, and stand accused. Ser Alyn Tollett has advised you to demand a trial by combat."),
		(call_script, "script_start_quest", "qst_starting_quest_1_5", "$g_talk_troop")
	]],

	[trp_ninestars_castellan_prison, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Sleep on it, {playername}, the trial starts tommorow.", "close_window",
	[]],

	[trp_ninestars_castellan_chambers, "start",
	[
		(check_quest_active, "qst_starting_quest_1_5"),
		(eq, "$g_talk_troop_met", 0)
	],
	"{playername}! Hah! Did you see the look on Raymuns face? That bastard got a surprise there, no denying it. But can you defeat him? I admit, I know nothing about you, except for your ability to hit knights right on the nose. Are you a knight yourself?", "wildfire_talk",
	[]],

	[plyr|trp_ninestars_castellan_chambers, "wildfire_talk",
	[],
	"Yes.", "wildfire_talk2",
	[]],

	[plyr|trp_ninestars_castellan_chambers, "wildfire_talk",
	[],
	"No.", "wildfire_talk2_no",
	[]],

	[trp_ninestars_castellan_chambers, "wildfire_talk2",
	[],
	"Oh well, that makes everything so much easier. A knight! Really? Splendid. Do you have own armor? Sword, helmet, horse? Ah well, either way, I would be honored if you'd let me provide all you need. {playername}, during the trial, did you notice how some of the knights and ladies seemed to approve of your request? Ser Raymun is not well loved, and there's been stories... peasant girls have complained before... either way, I think that not only the smallfolk but a great part of the nobles will be on your side during this fight. Why, you ask? Well, a knight is sworn to protect the weak. You remembered those vows.", "wildfire_talk3",
	[]],

	[trp_ninestars_castellan_chambers, "wildfire_talk2_no",
	[],
	"Oh well, I guess it doesn't matter. Do you have own armor? Sword, helmet, horse? Ah well, either way, I would be honored if you'd let me provide all you need. {playername}, during the trial, did you notice how some of the knights and ladies seemed to approve of your request? Ser Raymun is not well loved, and there's been stories... peasant girls have complained before... either way, I think that not only the smallfolk but a great part of the nobles will be on your side during this fight.", "wildfire_talk3",
	[]],

	[plyr|trp_ninestars_castellan_chambers, "wildfire_talk3",
	[],
	"I suppose so.", "wildfire_talk4",
	[]],

	[trp_ninestars_castellan_chambers, "wildfire_talk4",
	[],
	"Do you know the rules of trial by combat, {playername}? The fight ends when either party yields or is killed, or when the accuser takes back his accusation, or when the accused declares himself guilty. You'll need to either kill Ser Raymun, or force him to yield and withdraw his accusations.", "wildfire_talk5",
	[]],

	[plyr|trp_ninestars_castellan_chambers, "wildfire_talk5",
	[],
	"Very well.", "wildfire_talk6",
	[]],

	[trp_ninestars_castellan_chambers, "wildfire_talk6",
	[],
	"I don't imagine there's much more to say. The trial is tommorow, I suggest you get some sleep. Ser Raymun was never a great warrior, but he's not unskilled either.", "wildfire_talk7",
	[]],

	[plyr|trp_ninestars_castellan_chambers, "wildfire_talk7",
	[],
	"I see.", "close_window",
	[
		(jump_to_menu, "mnu_ninestars_13"),
		(call_script, "script_end_quest", "qst_starting_quest_1_5"),
		(setup_quest_text, "qst_starting_quest_1_6"),
		(str_store_string, 2, "@The trial by combat is about to start. Defeat Ser Raymun Templeton."),
		(call_script, "script_start_quest", "qst_starting_quest_1_6", "$g_talk_troop")
	]],

	[trp_ninestars_castellan_chambers, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Sleep on it, {playername}, the trial starts tommorow.", "close_window",
	[]],

	[trp_terror_npc_2, "start",
	[
		(check_quest_active, "qst_terror_quest_starter"),
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes? Can I help you?", "wildfire_talk",
	[]],

	[plyr|trp_terror_npc_2, "wildfire_talk",
	[],
	"Are you from Cairnhall?", "wildfire_talk2",
	[]],

	[plyr|trp_terror_npc_2, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_terror_npc_2, "wildfire_talk2",
	[],
	"Ah yes, yes, I am Tom, the elder sent me here to find a knight, true and honorable!", "wildfire_talk3",
	[]],

	[plyr|trp_terror_npc_2, "wildfire_talk3",
	[],
	"Erm, yes... Septon Garibald said you'd been having problems with an, erm... wight?", "wildfire_talk4",
	[]],

	[plyr|trp_terror_npc_2, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_terror_npc_2, "wildfire_talk4",
	[],
	"Yes, yes, a revenant, a wight, a ghost! Saw it myself, only three weeks ago! Pale and with red eyes, it was flying through the night! Made me shiver, make no mistake! The men of the village agreed with me, we need an faithful man to slay the beast, a knight, like Aemon the Dragonknight, from the stories!", "wildfire_talk5",
	[]],

	[plyr|trp_terror_npc_2, "wildfire_talk5",
	[],
	"Hmm... perhaps I could take a look at this wight myself.", "wildfire_talk6",
	[]],

	[plyr|trp_terror_npc_2, "wildfire_talk5",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_terror_npc_2, "wildfire_talk6",
	[],
	"Are you a knight? Oh, I'm sorry, of course you are! My father always told me the city was full of knights! Go to my village and slay the revenant, brave Ser! It haunts the old cairn, sure as day!", "wildfire_talk7",
	[]],

	[plyr|trp_terror_npc_2, "wildfire_talk7",
	[],
	"Very well, I'll go have a look.", "close_window",
	[
		(enable_party, "p_cairn_hall"),
		(remove_troop_from_site, "trp_terror_npc_2", "scn_town_6_tavern"),
		(setup_quest_text, "qst_terror_quest"),
		(str_store_string, 2, "@Goodman Tom asked you to deal with the wight in Cairnhall."),
		(call_script, "script_end_quest", "qst_terror_quest_starter"),
		(call_script, "script_start_quest", "qst_terror_quest", "$g_talk_troop")
	]],

	[plyr|trp_terror_npc_2, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_terror_npc_2, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_terror_npc_3, "start",
	[],
	"Yes?", "pj_wildfire_talk",
	[]],

	[plyr|trp_terror_npc_3, "pj_wildfire_talk",
	[],
	"Hmph!", "close_window",
	[]],

	[plyr|trp_terror_npc_3, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_terror_quest")
	],
	"Erh, have you seen a wight about here?", "pj_wildfire_talk2",
	[]],

	[trp_terror_npc_3, "pj_wildfire_talk2",
	[],
	"By the gods, another one? Look, I'm not a wight, as I tried to tell that screaming girl when she came up here. I've been sent here by the Citadel to do some excavating, and I'll be gone in a day or two.", "pj_wildfire_talk3",
	[]],

	[plyr|trp_terror_npc_3, "pj_wildfire_talk3",
	[],
	"You seem to have caused quite a stir in the village. Why didn't you just explain to them what you where doing here.", "pj_wildfire_talk5",
	[]],

	[trp_terror_npc_3, "pj_wildfire_talk5",
	[],
	"Ah, but then I'd have to explain to them what 'excavating' means, and before you know it, they're coming to me to bless their cows, heal their wounds and wed their daughters. Keep ignorant peasants away from me, and I can die a happy man.", "close_window",
	[
		(call_script, "script_end_quest", "qst_terror_quest"),
		(add_troop_to_site, "trp_terror_npc_4", "scn_town_6_tavern", 41),
		(setup_quest_text, "qst_terror_quest1"),
		(str_store_string, 2, "@Return to Goodman Tom and explain the situation."),
		(disable_party, "p_cairn_hall"),
		(call_script, "script_start_quest", "qst_terror_quest1", "$g_talk_troop")
	]],

	[trp_terror_npc_4, "start",
	[],
	"Yes, {playername}?", "pj_wildfire_talk",
	[]],

	[plyr|trp_terror_npc_4, "pj_wildfire_talk",
	[],
	"Nevermind.", "close_window",
	[]],

	[plyr|trp_terror_npc_4, "pj_wildfire_talk",
	[],
	"Can you tell me more about Cairnahll?", "morcant_creditos",
	[]],

	[trp_terror_npc_4, "morcant_creditos",
	[],
	"Well... we grow a lot of beets...", "close_window",
	[]],

	[plyr|trp_terror_npc_4, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_terror_quest1")
	],
	"Tom, I've, erh, taken care of the... wight.", "pj_wildfire_talk2",
	[]],

	[trp_terror_npc_4, "pj_wildfire_talk2",
	[],
	"Truly? Well done, Ser! I knew a true knight would have no trouble dealing with such a demon! Any man who is shrouded in his faith can withstand such a beast! Here, please take this, as a thank you!", "pj_wildfire_talk3",
	[]],

	[plyr|trp_terror_npc_4, "pj_wildfire_talk3",
	[],
	"Thank you, Tom.", "close_window",
	[
		(troop_add_gold, "trp_player", 80),
		(remove_troop_from_site, "trp_terror_npc_4", "scn_town_6_tavern"),
		(call_script, "script_end_quest", "qst_terror_quest1"),
		(add_xp_as_reward, 400)
	]],

	[trp_nw_quest_starter, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Well met, {playername}.", "wildfire_starter_introduce_1",
	[]],

	[plyr|trp_nw_quest_starter, "wildfire_starter_introduce_1",
	[],
	"How do you know my name?", "wildfire_starter_introduce_2",
	[]],

	[trp_nw_quest_starter, "wildfire_starter_introduce_2",
	[],
	"I am Gueren, a brother of the Night's Watch. Gerold told me about you, {playername}, and how you handled that mad bastard up in the old holdfast. The latest raven from Aemon told of troubles at the Wall, perhaps you could head up there and see what's going on.", "close_window",
	[
		(call_script, "script_end_quest", "qst_gueren_quest"),
		(setup_quest_text, "qst_gueren_quest1"),
		(str_store_string, 2, "@Travel to Castle Black."),
		(call_script, "script_start_quest", "qst_gueren_quest1", "$g_talk_troop"),
		(enable_party, "p_castle_black")
	]],

	[trp_nw_quest_starter, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"The Wall must not fall, {playername}.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_nw_main_quest_first_1, "start",
	[],
	"Yes? Who is it? Can I help you?", "wildfire_talk",
	[]],

	[plyr|trp_nw_main_quest_first_1, "wildfire_talk",
	[
		(check_quest_active, "qst_gueren_quest1")
	],
	"Maester Aemon? Gueren said you'd been having some sort of trouble lately?", "wildfire_talk2",
	[]],

	[plyr|trp_nw_main_quest_first_1, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_nw_main_quest_first_1, "wildfire_talk2",
	[],
	"Ah, Gueren. Troubles he says. We're in dire need of help, {playername}. Lord Commander Mormont went north with near a third of our strength. Only a few have returned. The Watch is sorely weakened, {playername}, and the realm is disunited and in chaos. We can expect no help from the kings.", "wildfire_talk3",
	[]],

	[plyr|trp_nw_main_quest_first_1, "wildfire_talk3",
	[],
	"How can I help?", "wildfire_talk4",
	[]],

	[plyr|trp_nw_main_quest_first_1, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_nw_main_quest_first_1, "wildfire_talk4",
	[],
	"One of our brothers, Jon, recently returned to us. He had been pretending to join the wildlings, and he has brought us valuable information of their whereabouts and intentions. Jon left the wildlings just south of Mole Town, and I have every reason to believe they might still be somewhere in the area.", "wildfire_talk5",
	[]],

	[plyr|trp_nw_main_quest_first_1, "wildfire_talk5",
	[],
	"Hmm... what do you want me to do?", "wildfire_talk6",
	[]],

	[plyr|trp_nw_main_quest_first_1, "wildfire_talk5",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_nw_main_quest_first_1, "wildfire_talk6",
	[],
	"We have assembled a force of men to intercept the Magnar and defeat his band of raiders, but Bowen Marsh has gone west to defend the Shadow Tower with the remaining part of the garrison, and we need someone to led them. Jon is still too weak to leave his bed, and Donal Noye must stay here to led the defenses. The rest of our brothers are eager, but they do not have the experience. Gerold mentioned your deeds in the Lonely Hills, and I trust his judgement. You must led the brothers of the Night's Watch against the Magnar, {playername}.", "wildfire_talk7",
	[]],

	[plyr|trp_nw_main_quest_first_1, "wildfire_talk7",
	[],
	"Very well, I will defeat the Magnar!", "close_window",
	[
		(call_script, "script_end_quest", "qst_gueren_quest1"),
		(disable_party, "p_castle_black"),
		(enable_party, "p_mole_town"),
		(setup_quest_text, "qst_nw_main_quest_first_quest"),
		(str_store_string, 2, "@Go to Mole Town and defeat the Magnar of Thenn."),
		(call_script, "script_start_quest", "qst_nw_main_quest_first_quest", "$g_talk_troop")
	]],

	[plyr|trp_nw_main_quest_first_1, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_nw_main_quest_first_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes, {playername}?", "close_window",
	[]],

	[trp_nw_main_quest_first_2, "start",
	[],
	"Yes, {playername}? Is the Magnar dead? ", "pj_wildfire_talk",
	[]],

	[plyr|trp_nw_main_quest_first_2, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_nw_main_quest_first_quest1")
	],
	"Maester Aemon, the Magnar is dead!", "pj_wildfire_talk2",
	[]],

	[trp_nw_main_quest_first_2, "pj_wildfire_talk2",
	[],
	"Truly? This is joyous news, {playername}. You have bought us valuable time to arm ourselves main attack. While we prepare for the inevitable, I need someone to visit Eastwatch-by-the-Sea and tell Cotter Pyke of the events here. Will you do this?", "pj_wildfire_talk3",
	[]],

	[plyr|trp_nw_main_quest_first_2, "pj_wildfire_talk3",
	[],
	"I will, Maester Aemon.", "close_window",
	[
		(disable_party, "p_castle_black2"),
		(call_script, "script_end_quest", "qst_nw_main_quest_first_quest1"),
		(setup_quest_text, "qst_nw_main_quest_second_quest"),
		(str_store_string, 2, "@Tell Cotter Pyke, at Eastwatch-by-the-Sea, of the events in Mole Town."),
		(call_script, "script_start_quest", "qst_nw_main_quest_second_quest", "$g_talk_troop"),
		(enable_party, "p_eastwatch"),
		(add_xp_as_reward, 500)
	]],

	[plyr|trp_nw_main_quest_first_2, "pj_wildfire_talk",
	[],
	"May I know more about you?", "morcant_creditos",
	[]],

	[trp_nw_main_quest_first_2, "morcant_creditos",
	[],
	"Ah, {playername}, there is much and more to know, but none left to tell my story. Egg is long gone...", "close_window",
	[]],

	[plyr|trp_nw_main_quest_first_2, "pj_wildfire_talk",
	[],
	"Nevermind.", "close_window",
	[]],

	[trp_nw_main_quest_second_1, "start",
	[],
	"Yes? Who are you?", "wildfire_talk",
	[]],

	[plyr|trp_nw_main_quest_second_1, "wildfire_talk",
	[
		(check_quest_active, "qst_nw_main_quest_second_quest")
	],
	"Maester Aemon sent me, with news from Castle Black.", "wildfire_talk2",
	[]],

	[trp_nw_main_quest_second_1, "wildfire_talk2",
	[],
	"Well, out with it then. I'm not some pampered knight, I feel no need to waste time with idle yammering.", "wildfire_talk3",
	[]],

	[plyr|trp_nw_main_quest_second_1, "wildfire_talk3",
	[],
	"The wildlings are approaching the wall. We stopped them in Mole Town.", "wildfire_talk4",
	[]],

	[plyr|trp_nw_main_quest_second_1, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_nw_main_quest_second_1, "wildfire_talk4",
	[],
	"Well then, I guess we're saved for another day, eh? I don't see why Aemon couldn't send a raven with these news. Why are you here? Ah, I see. He wants me to send my men to Castle Black, to defend it against the attack? Just because that fool, Bowen Marsh, had to gallavant off to defend against an obvious diversion! Fine! Tell Aemon I'll send as many men as I can spare, I'll even send Emmett with them. The lads worth three experienced rangers.", "wildfire_talk5",
	[]],

	[plyr|trp_nw_main_quest_second_1, "wildfire_talk5",
	[],
	"Very well, I'll return to Aemon with this news.", "wildfire_talk6",
	[]],

	[plyr|trp_nw_main_quest_second_1, "wildfire_talk5",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_nw_main_quest_second_1, "wildfire_talk6",
	[],
	"Good! And tell Bowen he's a fool while you're at it!", "wildfire_talk7",
	[]],

	[plyr|trp_nw_main_quest_second_1, "wildfire_talk7",
	[],
	"Erh, yes...", "close_window",
	[
		(disable_party, "p_eastwatch"),
		(enable_party, "p_castle_black3"),
		(call_script, "script_end_quest", "qst_nw_main_quest_second_quest"),
		(setup_quest_text, "qst_nw_main_quest_second_quest1"),
		(str_store_string, 2, "@Return to Maester Aemon."),
		(call_script, "script_start_quest", "qst_nw_main_quest_second_quest1", "$g_talk_troop")
	]],

	[plyr|trp_nw_main_quest_second_1, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_nw_main_quest_second_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes, {playername}?", "close_window",
	[]],

	[plyr|trp_nw_main_quest_second_1, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_nw_main_quest_second_2, "start",
	[],
	"Yes, {playername}? What did Cotter Pyke say? ", "pj_wildfire_talk",
	[]],

	[plyr|trp_nw_main_quest_second_2, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_nw_main_quest_second_quest1")
	],
	"He's sending as many men as he can spare to aid us in the defense.", "pj_wildfire_talk2",
	[]],

	[trp_nw_main_quest_second_2, "pj_wildfire_talk2",
	[],
	"Good, good. It probably helps that Bowen is absent, he can't stand the man... {playername}, I need you to travel to the Shadow Tower, and visit Ser Denys, and see what has happened to Bowen Marsh and his men.", "pj_wildfire_talk3",
	[]],

	[plyr|trp_nw_main_quest_second_2, "pj_wildfire_talk3",
	[],
	"I will, Maester Aemon.", "close_window",
	[
		(call_script, "script_end_quest", "qst_nw_main_quest_second_quest1"),
		(enable_party, "p_shadow_tower"),
		(disable_party, "p_castle_black3"),
		(add_xp_as_reward, 500),
		(setup_quest_text, "qst_nw_main_quest_third_quest"),
		(str_store_string, 2, "@Go to the Shadow Tower and investigate the whereabouts of Bowen Marsh and his men."),
		(call_script, "script_start_quest", "qst_nw_main_quest_third_quest", "$g_talk_troop")
	]],

	[plyr|trp_nw_main_quest_second_2, "pj_wildfire_talk",
	[],
	"Can you tell me about Castle Black?", "morcant_creditos",
	[]],

	[trp_nw_main_quest_second_2, "morcant_creditos",
	[],
	"Ah, {playername}, I'm afraid you'll have to excuse me. Perhaps you could ask Clydas...", "close_window",
	[]],

	[plyr|trp_nw_main_quest_second_2, "pj_wildfire_talk",
	[],
	"Nevermind.", "close_window",
	[]],

	[trp_nw_main_quest_third_1, "start",
	[],
	"Yes? Who are you?", "wildfire_talk",
	[]],

	[plyr|trp_nw_main_quest_third_1, "wildfire_talk",
	[
		(check_quest_active, "qst_nw_main_quest_third_quest")
	],
	"Maester Aemon sent me, for news of Bowen Marsh.", "wildfire_talk2",
	[]],

	[trp_nw_main_quest_third_1, "wildfire_talk2",
	[],
	"Ah, very well. But you're not my brother, are you? Ah, no matter, no matter, we need all the help we can get. Lord Marsh was well the last time I saw him, {playername}. He took most of my men to the Gorge, to guard the Bridge of Skulls.", "wildfire_talk3",
	[]],

	[plyr|trp_nw_main_quest_third_1, "wildfire_talk3",
	[],
	"The Bridge of Skulls?", "wildfire_talk4",
	[]],

	[plyr|trp_nw_main_quest_third_1, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_nw_main_quest_third_1, "wildfire_talk4",
	[],
	"Ah, you haven't heard of it. The Bridge is the only way across the Gorge, a large, well, gorge, very deep. The wildlings often descend the Gorge, to bypass the Wall. We'd had news that a large force of wildlings where in the area, so Lord Marsh took the greater part of our strength to defend the Bridge.", "wildfire_talk5",
	[]],

	[plyr|trp_nw_main_quest_third_1, "wildfire_talk5",
	[],
	"Cotter Pyke said Bowen Marsh was a fool for falling for the diversion?...", "wildfire_talk6",
	[]],

	[plyr|trp_nw_main_quest_third_1, "wildfire_talk5",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_nw_main_quest_third_1, "wildfire_talk6",
	[],
	"Cotter Pyke! Bah! The bastard son of a tavern wench, the most vile man in the entire Watch! Still, I myself might not have been so quick to take the greater part of our strength with me to guard the Gorge... Ah, nothing to do about it now. In fact, {playername}, I'd greatly appreciate it if you where to head to the Gorge yourself. Should the wildlings attack, Lord Marsh could use all the help he can get!", "wildfire_talk7",
	[]],

	[plyr|trp_nw_main_quest_third_1, "wildfire_talk7",
	[],
	"I'll have a look at this Gorge!", "close_window",
	[
		(disable_party, "p_shadow_tower"),
		(enable_party, "p_bridge_of_skulls"),
		(call_script, "script_end_quest", "qst_nw_main_quest_third_quest"),
		(setup_quest_text, "qst_nw_main_quest_third_quest1"),
		(str_store_string, 2, "@Go to the Gorge and help Bowen Marsh defeat the wildlings."),
		(call_script, "script_start_quest", "qst_nw_main_quest_third_quest1", "$g_talk_troop")
	]],

	[plyr|trp_nw_main_quest_third_1, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_nw_main_quest_third_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes, {playername}?", "close_window",
	[]],

	[plyr|trp_nw_main_quest_third_1, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_nw_main_quest_third_2, "start",
	[],
	"Yes, {playername}? How fares Lord Marsh? ", "pj_wildfire_talk",
	[]],

	[plyr|trp_nw_main_quest_third_2, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_nw_main_quest_third_quest2")
	],
	"The Weeper tried to force his away across, but we beat him back.", "pj_wildfire_talk2",
	[]],

	[trp_nw_main_quest_third_2, "pj_wildfire_talk2",
	[],
	"Good, good, {playername}. But the wildlings are sure to descend on Castle Black at any moment now, you must hurry back and lend whatever aid you can!", "pj_wildfire_talk3",
	[]],

	[plyr|trp_nw_main_quest_third_2, "pj_wildfire_talk3",
	[],
	"I will, Ser Denys.", "close_window",
	[
		(call_script, "script_end_quest", "qst_nw_main_quest_third_quest2"),
		(enable_party, "p_castle_black4"),
		(disable_party, "p_shadow_tower2"),
		(add_xp_as_reward, 500),
		(setup_quest_text, "qst_nw_main_quest_fourth_quest"),
		(str_store_string, 2, "@Return to Maester Aemon."),
		(call_script, "script_start_quest", "qst_nw_main_quest_fourth_quest", "$g_talk_troop")
	]],

	[plyr|trp_nw_main_quest_third_2, "pj_wildfire_talk",
	[],
	"Can you tell me about the Shadow Tower?", "morcant_creditos",
	[]],

	[trp_nw_main_quest_third_2, "morcant_creditos",
	[],
	"Ah, {playername}, I'm afraid you'll have to excuse me, Maester Mullin is the scholar here.", "close_window",
	[]],

	[plyr|trp_nw_main_quest_third_2, "pj_wildfire_talk",
	[],
	"Nevermind.", "close_window",
	[]],

	[trp_nw_main_quest_fourth_1, "start",
	[],
	"{playername}. Is Bowen still alive?", "wildfire_talk",
	[]],

	[plyr|trp_nw_main_quest_fourth_1, "wildfire_talk",
	[
		(check_quest_active, "qst_nw_main_quest_fourth_quest")
	],
	"Barely, Maester Aemon. What happened here?", "wildfire_talk2",
	[]],

	[trp_nw_main_quest_fourth_1, "wildfire_talk2",
	[],
	"Another party of wildlings attacked us, but we beat them back. Alas, the true battle has only just begun, {playername}. The wildlings have been digging throuhg the Wall, and they've managed to make a breach into one of the storerooms.", "wildfire_talk3",
	[]],

	[plyr|trp_nw_main_quest_fourth_1, "wildfire_talk3",
	[],
	"What can I do?", "wildfire_talk4",
	[]],

	[plyr|trp_nw_main_quest_fourth_1, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_nw_main_quest_fourth_1, "wildfire_talk4",
	[],
	"Join the fight, {playername}. The stewards are holding the wall, raining down arrows on the wildlings. Jon has taken the remaining rangers and are holding off the wildlings in the tunnels beneath the Wall. Join him and defend the realm, {playername}.", "wildfire_talk5",
	[]],

	[plyr|trp_nw_main_quest_fourth_1, "wildfire_talk5",
	[],
	"Where is the breach?", "wildfire_talk6",
	[]],

	[plyr|trp_nw_main_quest_fourth_1, "wildfire_talk5",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_nw_main_quest_fourth_1, "wildfire_talk6",
	[],
	"Just west of here. Make haste!", "wildfire_talk7",
	[]],

	[plyr|trp_nw_main_quest_fourth_1, "wildfire_talk7",
	[],
	"For the realm!", "close_window",
	[
		(disable_party, "p_castle_black4"),
		(enable_party, "p_wall_tunnel"),
		(call_script, "script_end_quest", "qst_nw_main_quest_fourth_quest"),
		(setup_quest_text, "qst_nw_main_quest_fifth_quest"),
		(str_store_string, 2, "@Go the tunnel beneath the Wall and join Jon Snow in the defense of Castle Black."),
		(call_script, "script_start_quest", "qst_nw_main_quest_fifth_quest", "$g_talk_troop"),
		(set_global_cloud_amount, 99999),
		(set_global_haze_amount, 99999)
	]],

	[plyr|trp_nw_main_quest_fourth_1, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_nw_main_quest_fourth_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes, {playername}?", "close_window",
	[]],

	[plyr|trp_nw_main_quest_fourth_1, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_nw_main_quest_fifth_1, "start",
	[],
	"Yes? Ah, {playername}. What news do you bring?", "wildfire_talk",
	[]],

	[plyr|trp_nw_main_quest_fifth_1, "wildfire_talk",
	[
		(check_quest_active, "qst_nw_main_quest_fifth_quest1")
	],
	"We beat back the wildlings.", "wildfire_talk2",
	[]],

	[trp_nw_main_quest_fifth_1, "wildfire_talk2",
	[],
	"Ah, very well. But I fear our position is untenable. It would have been different if the Watch had been at full strength, but our forces have dwindled over the years... we face a position unlike any in the long history of the Night's Watch.", "wildfire_talk3",
	[]],

	[plyr|trp_nw_main_quest_fifth_1, "wildfire_talk3",
	[],
	"What do you mean?", "wildfire_talk4",
	[]],

	[plyr|trp_nw_main_quest_fifth_1, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_nw_main_quest_fifth_1, "wildfire_talk4",
	[],
	"Time and time again, the wildlings have thrown themselves against the Wall. Raymund Redbeard, Bael the Bard, Joramun... but this time, it is different. We are a shadow of our former selves, and the Stark in Winterfell has gone south. There is no one to defeat the wildlings when they make their final attack on the Wall.", "wildfire_talk5",
	[]],

	[plyr|trp_nw_main_quest_fifth_1, "wildfire_talk5",
	[],
	"But we beat them back in the tunnels!", "wildfire_talk6",
	[]],

	[plyr|trp_nw_main_quest_fifth_1, "wildfire_talk5",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_nw_main_quest_fifth_1, "wildfire_talk6",
	[],
	"A test, {playername}. Mance Rayder has men to spare, and we have none. We cannot hold them off, but we can continue the fight! You must go to Jon and tell him to evacuate Castle Black. A Lord Commander could never do so, but Lord Mormont is gone, and we've yet to chose a successor. I can order the brothers to go south, and join the northern lords in their holdfasts and castles. We have no commanding officers, and I am the oldest brother of the Night's Watch still alive. The high lords cannot accuse me of cowardice, no sane man would wish to live to my age.", "wildfire_talk7",
	[]],

	[trp_nw_main_quest_fifth_1, "wildfire_talk7",
	[],
	"But ah, before you go... a gift. When I joined the Order of Maesters, I forswore my old family name, but I have not forgotten it. When Bloodraven left for his last ranging, he entrusted me with the sword his father bestowed upon him. The sword that Aegon's sister Visenya wielded when she rode upon Meraxes, one of the three great dragons. The ancestral Valyrian sword of House Targaryen, my family! It is called Dark Sister, and its history is illustrious and proud. You must wield it now, {playername}, and defend the realm.", "wildfire_talk8",
	[]],

	[plyr|trp_nw_main_quest_fifth_1, "wildfire_talk8",
	[],
	"I am honored, my lord.", "close_window",
	[
		(troop_add_item, "trp_player", "itm_sword_repent", 0),
		(call_script, "script_end_quest", "qst_nw_main_quest_fifth_quest1"),
		(setup_quest_text, "qst_nw_main_quest_fifth_quest2"),
		(str_store_string, 2, "@Talk to Jon Snow."),
		(call_script, "script_start_quest", "qst_nw_main_quest_fifth_quest2", "$g_talk_troop")
	]],

	[plyr|trp_nw_main_quest_fifth_1, "wildfire_talk8",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_nw_main_quest_fifth_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes, {playername}?", "close_window",
	[]],

	[plyr|trp_nw_main_quest_fifth_1, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_nw_main_quest_fifth_2, "start",
	[],
	"Yes?", "pj_wildfire_talk",
	[]],

	[plyr|trp_nw_main_quest_fifth_2, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_nw_main_quest_fifth_quest2")
	],
	"Aemon has ordered you to abandon the Wall.", "pj_wildfire_talk2",
	[]],

	[trp_nw_main_quest_fifth_2, "pj_wildfire_talk2",
	[],
	"We're sworn to guard the realm! There�s no shame in fear, my father told me, what matters is how we face it... Arh, Maester Aemon has the right of it! We could throw away our lives here, and it would barely slow down Mance and his army! We'll retreat to Winterfell, and join the lords when they march on the wildlings.", "pj_wildfire_talk3",
	[]],

	[plyr|trp_nw_main_quest_fifth_2, "pj_wildfire_talk3",
	[],
	"For the realm!", "close_window",
	[
		(assign, "$g_global_var_announce_invasion_wildling", 1),
		(call_script, "script_end_quest", "qst_nw_main_quest_fifth_quest2"),
		(disable_party, "p_castle_black5"),
		(add_xp_as_reward, 2000)
	]],

	[plyr|trp_nw_main_quest_fifth_2, "pj_wildfire_talk",
	[],
	"Can we hold the Wall?", "morcant_creditos",
	[]],

	[trp_nw_main_quest_fifth_2, "morcant_creditos",
	[],
	"We're sworn to hold the Wall.", "close_window",
	[]],

	[plyr|trp_nw_main_quest_fifth_2, "pj_wildfire_talk",
	[],
	"Nevermind.", "close_window",
	[]],

	[trp_bronn, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What do you want?", "wildfire_starter_introduce_1",
	[]],

	[plyr|trp_bronn, "wildfire_starter_introduce_1",
	[],
	"Do you have any tasks for me?", "wildfire_starter_introduce_2",
	[]],

	[trp_bronn, "wildfire_starter_introduce_2",
	[],
	"Hah, yes, go bugger yourself. Or go see Lord Tyrion, you look the right sort for the work he offers. He's at Chataya's.", "close_window",
	[
		(display_message, "@Search the tavern for Tyrion Lannister."),
		(add_troop_to_site, "trp_tyrion_lannister_1", "scn_town_16_tavern", 45)
	]],

	[trp_bronn, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Fuck off.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_tyrion_lannister_1, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes? Can I help you?", "wildfire_talk",
	[]],

	[plyr|trp_tyrion_lannister_1, "wildfire_talk",
	[
		(eq, "$g_conquest_kings_landing_dragonstone", 0)
	],
	"Do you have any tasks for me?", "wildfire_talk2",
	[]],

	[plyr|trp_tyrion_lannister_1, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_tyrion_lannister_1, "wildfire_talk2",
	[],
	"Ah yes, I do.", "wildfire_talk3",
	[]],

	[plyr|trp_tyrion_lannister_1, "wildfire_talk3",
	[],
	"What would you have me do?", "wildfire_talk4",
	[]],

	[plyr|trp_tyrion_lannister_1, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_tyrion_lannister_1, "wildfire_talk4",
	[],
	"Most of the lords of the Crownlands have sworn their allegiance to the king, but those close to the sea have been... unreliable in their support. Ser Jeffory Darke has not seen fit to appear at court, and has been riding around the countryside, spreading rumors of Joffreys parentage.", "wildfire_talk5",
	[]],

	[plyr|trp_tyrion_lannister_1, "wildfire_talk5",
	[],
	"Hmm... what do you want me to do?", "wildfire_talk6",
	[]],

	[plyr|trp_tyrion_lannister_1, "wildfire_talk5",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_tyrion_lannister_1, "wildfire_talk6",
	[],
	"The lords need to know that we won't tolerate such behavior. Ser Jefforys uncle was the one who alerted us to his nephews behavior. The king has seen fit to sentence Ser Jeffory to death, and grant his estates to this uncle. We need someone to carry out the sentence, but I don't want a long, drawn out, siege. Sneak into Ser Jefforys keep and put an end to him and his scheming.", "wildfire_talk7",
	[]],

	[plyr|trp_tyrion_lannister_1, "wildfire_talk7",
	[],
	"Very well, I will execute Ser Jeffory on behalf of King Joffrey.", "close_window",
	[
		(enable_party, "p_brookwater_keep"),
		(remove_troop_from_site, "trp_tyrion_lannister_1", "scn_town_16_tavern"),
		(setup_quest_text, "qst_tyrion_quest"),
		(str_store_string, 2, "@Tyrion Lannister, Hand of the King, has tasked you with assasinating Ser Jeffory Darke, and any men-at-arms in your way. The seat of House Darke is Brookwater Keep."),
		(call_script, "script_start_quest", "qst_tyrion_quest", "$g_talk_troop")
	]],

	[plyr|trp_tyrion_lannister_1, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_tyrion_lannister_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_ser_rike, "start",
	[],
	"Yes?", "pj_wildfire_talk",
	[]],

	[plyr|trp_ser_rike, "pj_wildfire_talk",
	[],
	"Hmph!", "close_window",
	[]],

	[plyr|trp_ser_rike, "pj_wildfire_talk",
	[],
	"The uncle, I assume?", "pj_wildfire_talk2",
	[]],

	[trp_ser_rike, "pj_wildfire_talk2",
	[],
	"I am Ser Rike Darke, yes, the uncle of Ser Jeffory.", "pj_wildfire_talk3",
	[]],

	[plyr|trp_ser_rike, "pj_wildfire_talk3",
	[],
	"The king appreciates your help in putting an end to your nephews plotting, Ser Rike, and congratulates you on your ascension to master of Brookwater Keep. What a fortuitous circumstance, that you might serve your king, and gain a proper reward. Ser Jefforys father and grandfather might be proud.", "pj_wildfire_talk5",
	[]],

	[trp_ser_rike, "pj_wildfire_talk5",
	[],
	"Yes, well...", "close_window",
	[]],

	[trp_tyrion_lannister_2, "start",
	[],
	"Yes, {playername}?", "pj_wildfire_talk",
	[]],

	[plyr|trp_tyrion_lannister_2, "pj_wildfire_talk",
	[],
	"Nevermind.", "close_window",
	[]],

	[plyr|trp_tyrion_lannister_2, "pj_wildfire_talk",
	[],
	"May I know more about you, my lord?", "morcant_creditos",
	[]],

	[trp_tyrion_lannister_2, "morcant_creditos",
	[],
	"I am Tyrion Lannister, Hand of the King.", "close_window",
	[]],

	[plyr|trp_tyrion_lannister_2, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_tyrion_quest1")
	],
	"Lord Tyrion, I've taken care of Ser Jeffory.", "pj_wildfire_talk2",
	[]],

	[trp_tyrion_lannister_2, "pj_wildfire_talk2",
	[],
	"Truly? Well done, {playername}. I'll make sure Bronn spreads the proper rumors about his demise. Should keep the rest of the lords in line. How did the uncle take it? Slimy worm, isn't he? Here, have this. One of my men found it in the castle cellar, supposively it belonged to Aemond the One-Eyed. It's old and worn, as you might expect of something that had a Valyrian sword through it, and was then submerged in water for ten years, but it does have quite a story surrounding it!", "pj_wildfire_talk3",
	[]],

	[plyr|trp_tyrion_lannister_2, "pj_wildfire_talk3",
	[],
	"Thank you, my lord.", "close_window",
	[
		(call_script, "script_change_player_honor", -3),
		(troop_add_gold, "trp_player", 500),
		(troop_add_item, "trp_player", "itm_aemonds_helmet", 0),
		(troop_add_item, "trp_player", "itm_aemonds_boots", 0),
		(troop_add_item, "trp_player", "itm_aemonds_armor", 0),
		(call_script, "script_change_player_relation_with_troop", "trp_kingdom_9_lord", 5),
		(remove_troop_from_site, "trp_tyrion_lannister_2", "scn_town_16_tavern"),
		(call_script, "script_end_quest", "qst_tyrion_quest1"),
		(add_xp_as_reward, 1000)
	]],

	[trp_sharako, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Praise the Lord! The one that comes with shadows and fire!", "wildfire_starter_introduce_1",
	[]],

	[plyr|trp_sharako, "wildfire_starter_introduce_1",
	[],
	"Excuse me?", "wildfire_starter_introduce_2",
	[]],

	[trp_sharako, "wildfire_starter_introduce_2",
	[],
	"Hah, yes, excuses! Go see the laquered lady! She's back soon, she's always back!", "close_window",
	[
		(add_troop_to_site, "trp_quaithe", "scn_town_47_castle", 11)
	]],

	[trp_sharako, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Red lady, red lady, red lady, shadow lady!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_quaithe, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"{playername}.", "wildfire_talk",
	[]],

	[plyr|trp_quaithe, "wildfire_talk",
	[],
	"How do you know my name?", "wildfire_talk2",
	[]],

	[plyr|trp_quaithe, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_quaithe, "wildfire_talk2",
	[],
	"I saw it in the fires.", "wildfire_talk3",
	[]],

	[plyr|trp_quaithe, "wildfire_talk3",
	[],
	"What would you have me do?", "wildfire_talk4",
	[]],

	[plyr|trp_quaithe, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_quaithe, "wildfire_talk4",
	[],
	"Find the answers.", "wildfire_talk5",
	[]],

	[plyr|trp_quaithe, "wildfire_talk5",
	[],
	"Erh...", "wildfire_talk6",
	[]],

	[plyr|trp_quaithe, "wildfire_talk5",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_quaithe, "wildfire_talk6",
	[],
	"Go north. Visit the fort of shadows. The Nightfort.", "wildfire_talk7",
	[]],

	[plyr|trp_quaithe, "wildfire_talk7",
	[],
	"Very well...", "close_window",
	[
		(enable_party, "p_nightfort"),
		(remove_troop_from_site, "trp_quaithe", "scn_town_47_castle"),
		(setup_quest_text, "qst_quaithe_quest"),
		(str_store_string, 2, "@Go north, and visit the Nightfort."),
		(call_script, "script_start_quest", "qst_quaithe_quest", "$g_talk_troop")
	]],

	[plyr|trp_quaithe, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_quaithe, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_bloodraven, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"{playername}.", "wildfire_talk",
	[]],

	[plyr|trp_bloodraven, "wildfire_talk",
	[],
	"How do you know my name? Who are you?", "wildfire_talk2",
	[]],

	[plyr|trp_bloodraven, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_bloodraven, "wildfire_talk2",
	[],
	"I saw your birth, and heard the name your mother bestowed upon you while you lay at her breast. I'm watching everything, and everyone, with a thousand eyes and one.", "wildfire_talk3",
	[]],

	[plyr|trp_bloodraven, "wildfire_talk3",
	[],
	"How?", "wildfire_talk4",
	[]],

	[plyr|trp_bloodraven, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_bloodraven, "wildfire_talk4",
	[],
	"The trees see all, and time is of no importance to them. The weirwoods hold many memories. My presence here is their memory.", "wildfire_talk5",
	[]],

	[plyr|trp_bloodraven, "wildfire_talk5",
	[],
	"But how? I don't understand.", "wildfire_talk6",
	[]],

	[plyr|trp_bloodraven, "wildfire_talk5",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_bloodraven, "wildfire_talk6",
	[],
	"The weirwoods will show you. Eat this paste, and you'll see.", "wildfire_talk7",
	[]],

	[plyr|trp_bloodraven, "wildfire_talk7",
	[],
	"Very well...", "close_window",
	[
		(disable_party, "p_nightfort"),
		(display_message, "@The stranger hands you a bowl of weirwood paste. The paste is white, but with red streaks, that look oddly blood like. The first spoonful tastes horrible, but the last bite is delicious."),
		(jump_to_menu, "mnu_nightfort_rat_cook"),
		(call_script, "script_end_quest", "qst_quaithe_quest1"),
		(setup_quest_text, "qst_quaithe_quest1"),
		(str_store_string, 2, "@Experience the visions, then return to the stranger."),
		(call_script, "script_start_quest", "qst_quaithe_quest1", "$g_talk_troop")
	]],

	[plyr|trp_bloodraven, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_bloodraven, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_rat_cook, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Taste this pie! It's filled with gravy, onions, bacon and prince!", "wildfire_talk",
	[]],

	[plyr|trp_rat_cook, "wildfire_talk",
	[],
	"It's filled with prince?", "wildfire_talk2",
	[]],

	[trp_rat_cook, "wildfire_talk2",
	[],
	"Tasty prince! The king wronged me, and now he'll pay! HE WILL PAY! The voices told me! They told me that the king was jesting about my knives! The voices... they have cold, blue, eyes...", "close_window",
	[
		(display_message, "@This kitchen is horrible. Rats are everywhere."),
		(call_script, "script_end_quest", "qst_quaithe_quest1"),
		(setup_quest_text, "qst_quaithe_quest2"),
		(str_store_string, 2, "@Experience the visions, then return to the stranger."),
		(call_script, "script_start_quest", "qst_quaithe_quest2", "$g_talk_troop")
	]],

	[trp_rat_cook, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Tasty prince, tasty bacon, crazy king! Where's my children?!", "close_window",
	[]],

	[trp_nights_king, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Arh! The cold hurts! He's bound us!", "wildfire_talk",
	[]],

	[plyr|trp_nights_king, "wildfire_talk",
	[],
	"Who has bound you? What are you talking about?", "wildfire_talk2",
	[]],

	[trp_nights_king, "wildfire_talk2",
	[],
	"HE bound us. With cold and blood, he's bound us to his will!", "close_window",
	[
		(display_message, "@You can hear screams, seemingly coming from everywhere and nowhere at the same time..."),
		(call_script, "script_end_quest", "qst_quaithe_quest3"),
		(setup_quest_text, "qst_quaithe_quest4"),
		(str_store_string, 2, "@Experience the visions, then return to the stranger."),
		(call_script, "script_start_quest", "qst_quaithe_quest4", "$g_talk_troop")
	]],

	[trp_bloodraven, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Kill me! Please kill me!", "close_window",
	[]],

	[trp_bryen_farring, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "wildfire_starter_introduce_1",
	[]],

	[plyr|trp_bryen_farring, "wildfire_starter_introduce_1",
	[],
	"Do you know of anyone who might have any tasks for me?", "wildfire_starter_introduce_2",
	[]],

	[trp_bryen_farring, "wildfire_starter_introduce_2",
	[],
	"My uncle, Ser Gilbert, is looking for someone to do some... un-knightly work. I think he's at the tavern.", "close_window",
	[
		(display_message, "@Search the tavern for Ser Gilbert Farring."),
		(add_troop_to_site, "trp_gilbert_farring_1", "scn_town_23_tavern", 41)
	]],

	[trp_bryen_farring, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Praise the Lord of Light.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_gilbert_farring_1, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes? Can I help you?", "wildfire_talk",
	[]],

	[plyr|trp_gilbert_farring_1, "wildfire_talk",
	[],
	"Do you have any tasks for me?", "wildfire_talk2",
	[]],

	[plyr|trp_gilbert_farring_1, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_gilbert_farring_1, "wildfire_talk2",
	[],
	"Ah yes, I do, I do. But you have to keep silent about this.", "wildfire_talk3",
	[]],

	[plyr|trp_gilbert_farring_1, "wildfire_talk3",
	[],
	"What would you have me do?", "wildfire_talk4",
	[]],

	[plyr|trp_gilbert_farring_1, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_gilbert_farring_1, "wildfire_talk4",
	[],
	"Before the Old King abolished the lords right to the first night, the Targaryens where known to visit the smallfolk of Dragonstone to take their due, and they continued to do so even after the right was abolished. The resulting offspring was known as 'dragonseeds'. The dragonseeds used to be plenty on Dragonstone, but their numbers have dwindled over the years. However, recently a young man has been claiming to be the bastard son of Prince Rhaegar.", "wildfire_talk5",
	[]],

	[plyr|trp_gilbert_farring_1, "wildfire_talk5",
	[],
	"Hmm... go on.", "wildfire_talk6",
	[]],

	[plyr|trp_gilbert_farring_1, "wildfire_talk5",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_gilbert_farring_1, "wildfire_talk6",
	[],
	"This young man, going by the name of Lacerys, has been meeting with some of the knights from Hull, known to be descended from the Velaryons, and thus being akin to the dragonseeds. According to one of my informers, a man named Burlow, they've been talking of sneaking into the castle and overwhelming the guard, take the king hostage, and proclaim this Lacerys the true king of the Seven Kingdoms. This cannot be allowed to happen. I need you, {playername}, to break up the conspirators and execute the lot of them. They meet mostly at night, or when the fog rolls in from Dragonmont, obscuring the streets. We don't want to cause a scene, so just kill them and leave the bodies to be found.", "wildfire_talk7",
	[]],

	[plyr|trp_gilbert_farring_1, "wildfire_talk7",
	[],
	"Very well, I will execute these conspirators.", "close_window",
	[
		(enable_party, "p_dragonstone_village"),
		(remove_troop_from_site, "trp_gilbert_farring_1", "scn_town_23_tavern"),
		(setup_quest_text, "qst_dragonseed_quest"),
		(str_store_string, 2, "@Ser Gilbert Farring has tasked you with executing the suppossed dragonseed, Lacerys Waters."),
		(call_script, "script_start_quest", "qst_dragonseed_quest", "$g_talk_troop")
	]],

	[plyr|trp_gilbert_farring_1, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_gilbert_farring_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_burlow, "start",
	[],
	"Yes?", "pj_wildfire_talk",
	[]],

	[plyr|trp_burlow, "pj_wildfire_talk",
	[],
	"Hmph!", "close_window",
	[]],

	[plyr|trp_burlow, "pj_wildfire_talk",
	[],
	"Burlow, I assume?", "pj_wildfire_talk2",
	[]],

	[trp_burlow, "pj_wildfire_talk2",
	[],
	"Indeed I am, {playername}. Ser Gilbert told me you'd be coming.", "pj_wildfire_talk3",
	[]],

	[plyr|trp_burlow, "pj_wildfire_talk3",
	[],
	"What do you think, Burlow? Was Lacerys the son of Rhaegar?", "pj_wildfire_talk5",
	[]],

	[trp_burlow, "pj_wildfire_talk5",
	[],
	"Hah, that prancing fool? Not a chance. Plenty of silver-haired young men here on Dragonstone, the Targaryens had years to plant plenty of seeds. You'd be hard pressed to find someone without a bit of dragonblood on this island.", "close_window",
	[]],

	[trp_gilbert_farring_2, "start",
	[],
	"Yes, {playername}?", "pj_wildfire_talk",
	[]],

	[plyr|trp_gilbert_farring_2, "pj_wildfire_talk",
	[],
	"Nevermind.", "close_window",
	[]],

	[plyr|trp_gilbert_farring_2, "pj_wildfire_talk",
	[],
	"Can you tell me more about the dragonseeds?", "morcant_creditos",
	[]],

	[trp_gilbert_farring_2, "morcant_creditos",
	[],
	"I don't know much more than the next man. Perhaps you could go talk to Archmaester Perestan in Oldtown, he's devoted much of his life to the history of Westeros.", "close_window",
	[]],

	[plyr|trp_gilbert_farring_2, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_dragonseed_quest1")
	],
	"Ser Gilbert, I've taken care of the conspirators.", "pj_wildfire_talk2",
	[]],

	[trp_gilbert_farring_2, "pj_wildfire_talk2",
	[],
	"Truly? Well done, {playername}! His Grace, the king, has given me permission to choose a suitable reward from the armory in The Stone Drum. One of the weapons was rather fascinating. Taken from a Braavosi smuggler some years ago, it appears to be one of their slender blades, but forged for two hands rather than one. I imagine it would prove a rather poor cutting weapon, but it might prove to be exceptionally lethal as a stabbing tool. And of course, a monetary reward is due!", "pj_wildfire_talk3",
	[]],

	[plyr|trp_gilbert_farring_2, "pj_wildfire_talk3",
	[],
	"Thank you, Ser Gilbert.", "close_window",
	[
		(call_script, "script_change_player_relation_with_troop", "trp_kingdom_8_lord", 1),
		(troop_add_gold, "trp_player", 500),
		(troop_add_item, "trp_player", "itm_fi_estoc", 0),
		(remove_troop_from_site, "trp_gilbert_farring_2", "scn_town_23_tavern"),
		(call_script, "script_end_quest", "qst_dragonseed_quest1"),
		(add_xp_as_reward, 500)
	]],

	[trp_barrow_quest_starter, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "wildfire_starter_introduce_1",
	[]],

	[plyr|trp_barrow_quest_starter, "wildfire_starter_introduce_1",
	[],
	"Do you know of anyone who might have any tasks for me?", "wildfire_starter_introduce_2",
	[]],

	[trp_barrow_quest_starter, "wildfire_starter_introduce_2",
	[],
	"I did hear a rumor a few days ago... Phario Forel, the playwright, is looking for someone to search some old tomb... he'll probably be here in a couple of hours, for some reason he's infatuated with Merry...", "close_window",
	[
		(display_message, "@Return to the tavern and search for Phario Forel."),
		(add_troop_to_site, "trp_barrow_quest_npc_1", "scn_town_17_tavern", 45)
	]],

	[trp_barrow_quest_starter, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_barrow_quest_npc_1, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes? Can I help you?", "wildfire_talk",
	[]],

	[plyr|trp_barrow_quest_npc_1, "wildfire_talk",
	[],
	"Do you have any tasks for me?", "wildfire_talk2",
	[]],

	[plyr|trp_barrow_quest_npc_1, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_barrow_quest_npc_1, "wildfire_talk2",
	[],
	"'The Father reached his hand into the heavens and pulled down seven stars and one by one he set them on the brow of Hugor of the Hill to make a glowing crown'...", "wildfire_talk3",
	[]],

	[plyr|trp_barrow_quest_npc_1, "wildfire_talk3",
	[],
	"Erh?", "wildfire_talk4",
	[]],

	[plyr|trp_barrow_quest_npc_1, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_barrow_quest_npc_1, "wildfire_talk4",
	[],
	"It's from the Seven-Pointed Star you ignorant savage! Bunch of Westerosi nonsense, but they did get the crown part right. Of course, it's not made by a god...", "wildfire_talk5",
	[]],

	[plyr|trp_barrow_quest_npc_1, "wildfire_talk5",
	[],
	"Hmm... go on.", "wildfire_talk6",
	[]],

	[plyr|trp_barrow_quest_npc_1, "wildfire_talk5",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_barrow_quest_npc_1, "wildfire_talk6",
	[],
	"The Andals wrought many fine treasures out of gold and copper. I have every reason to believe one of them might be buried in an old barrow, close to the Ruins of Iksa Calo. I need Andals treasures for my next play! The barrow is supposed to be haunted by wights and the ghosts of the Andal kings, but it's obviously just the wild rumours of madmen.", "wildfire_talk7",
	[]],

	[plyr|trp_barrow_quest_npc_1, "wildfire_talk7",
	[],
	"Very well, I will search for your Andal treasues.", "close_window",
	[
		(enable_party, "p_horror_cave"),
		(remove_troop_from_site, "trp_barrow_quest_npc_1", "scn_town_17_tavern"),
		(setup_quest_text, "qst_barrow_quest"),
		(str_store_string, 2, "@Phario Forel asked you to search for golden treasure in the Old Barrow, close to the Ruins of Iksa Calo."),
		(call_script, "script_start_quest", "qst_barrow_quest", "$g_talk_troop")
	]],

	[plyr|trp_barrow_quest_npc_1, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_barrow_quest_npc_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_barrow_quest_npc_2, "start",
	[],
	"Yes, {playername}?", "pj_wildfire_talk",
	[]],

	[plyr|trp_barrow_quest_npc_2, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_barrow_quest1")
	],
	"I didn't find any Andal treasures.", "pj_wildfire_talk2",
	[]],

	[trp_barrow_quest_npc_2, "pj_wildfire_talk2",
	[],
	"Truly? Oh the curse of the sea upon that old fool! The Third Sword swore that I'd find what I seek in that barrow!", "pj_wildfire_talk3",
	[]],

	[plyr|trp_barrow_quest_npc_2, "pj_wildfire_talk3",
	[],
	"Well...", "close_window",
	[
		(remove_troop_from_site, "trp_barrow_quest_npc_2", "scn_town_17_tavern"),
		(call_script, "script_end_quest", "qst_barrow_quest1"),
		(add_xp_as_reward, 500)
	]],

	[plyr|trp_barrow_quest_npc_2, "pj_wildfire_talk",
	[],
	"Can you tell me more about the Seven-Pointed Star?", "morcant_creditos",
	[]],

	[trp_barrow_quest_npc_2, "morcant_creditos",
	[],
	"Read it yourself!", "close_window",
	[]],

	[plyr|trp_barrow_quest_npc_2, "pj_wildfire_talk",
	[],
	"Nevermind.", "close_window",
	[]],

	[trp_odin_cave_quest_starter, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Erh, yes?", "wildfire_starter_introduce_1",
	[]],

	[plyr|trp_odin_cave_quest_starter, "wildfire_starter_introduce_1",
	[],
	"My lady, may I know more about you?", "wildfire_starter_introduce_2",
	[]],

	[trp_odin_cave_quest_starter, "wildfire_starter_introduce_2",
	[],
	"No... but perhaps you can acquire my favor by helping out a dear friend. Find Moredo Tendyris and talk to him. He's probably in the tavern, he has a weakness for music.", "close_window",
	[
		(display_message, "@Search the tavern for Moredo Tendyris."),
		(add_troop_to_site, "trp_odin_cave_quest_npc_1", "scn_town_51_tavern", 45)
	]],

	[trp_odin_cave_quest_starter, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Go away.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_odin_cave_quest_npc_1, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "wildfire_talk",
	[]],

	[plyr|trp_odin_cave_quest_npc_1, "wildfire_talk",
	[],
	"Lady Mellario said you where looking for help?", "wildfire_talk2",
	[]],

	[trp_odin_cave_quest_npc_1, "wildfire_talk2",
	[],
	"Ah yes! Caravans have been disapperaing in the Pass of Hugor Hill. I suspect a band of outlaws might be using one of the caves as a hideout.", "wildfire_talk3",
	[]],

	[plyr|trp_odin_cave_quest_npc_1, "wildfire_talk3",
	[],
	"What do you want me to do?", "wildfire_talk4",
	[]],

	[plyr|trp_odin_cave_quest_npc_1, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_odin_cave_quest_npc_1, "wildfire_talk4",
	[],
	"Go and search for the cave, and kill any outlaws you find", "wildfire_talk5",
	[]],

	[plyr|trp_odin_cave_quest_npc_1, "wildfire_talk5",
	[],
	"Hmm... go on.", "wildfire_talk6",
	[]],

	[plyr|trp_odin_cave_quest_npc_1, "wildfire_talk5",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_odin_cave_quest_npc_1, "wildfire_talk6",
	[],
	"You'll need to deal with the outlaws yourself, you'll never be able to surprise them by lumbering around with half an army.", "wildfire_talk7",
	[]],

	[plyr|trp_odin_cave_quest_npc_1, "wildfire_talk7",
	[],
	"Very well, I will take care of the outlaws.", "close_window",
	[
		(enable_party, "p_odin_cave"),
		(remove_troop_from_site, "trp_odin_cave_quest_npc_1", "scn_town_51_tavern"),
		(setup_quest_text, "qst_odin_cave_quest"),
		(str_store_string, 2, "@Go to the Pass of Hugor Hill, close to Wildelight, and deal with any outlaws you find."),
		(call_script, "script_start_quest", "qst_odin_cave_quest", "$g_talk_troop")
	]],

	[plyr|trp_odin_cave_quest_npc_1, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[plyr|trp_odin_cave_quest_npc_1, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_odin_cave_quest_npc_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_odin_cave_quest_npc_2, "start",
	[],
	"Yes, {playername}?", "pj_wildfire_talk",
	[]],

	[plyr|trp_odin_cave_quest_npc_2, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_odin_cave_quest1")
	],
	"I took care of the outlaws.", "pj_wildfire_talk2",
	[]],

	[trp_odin_cave_quest_npc_2, "pj_wildfire_talk2",
	[],
	"Well done {playername}! A reward is in order!", "pj_wildfire_talk3",
	[]],

	[plyr|trp_odin_cave_quest_npc_2, "pj_wildfire_talk3",
	[],
	"My thanks.", "close_window",
	[
		(remove_troop_from_site, "trp_odin_cave_quest_npc_2", "scn_town_51_tavern"),
		(call_script, "script_end_quest", "qst_odin_cave_quest1"),
		(troop_add_gold, "trp_player", 2000),
		(add_xp_as_reward, 500)
	]],

	[plyr|trp_odin_cave_quest_npc_2, "pj_wildfire_talk",
	[],
	"Can you tell me more about the Pass of Hugor Hill?", "morcant_creditos",
	[]],

	[trp_odin_cave_quest_npc_2, "morcant_creditos",
	[],
	"Nothing to tell, really. The pass got its name from Hugor Hill, obviously. Everything in the highlands is named after some Andal religious figure.", "close_window",
	[]],

	[plyr|trp_odin_cave_quest_npc_2, "pj_wildfire_talk",
	[],
	"Nevermind.", "close_window",
	[]],

	[trp_illyrio_mopatis_1, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes, {playername}?", "wildfire_talk",
	[]],

	[plyr|trp_illyrio_mopatis_1, "wildfire_talk",
	[],
	"Do you have any more tasks for me?", "wildfire_talk2",
	[
		(check_quest_active, "qst_return_to_illyrio")
	]],

	[plyr|trp_illyrio_mopatis_1, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_illyrio_mopatis_1, "wildfire_talk2",
	[],
	"Ah yes, I do. A close friend of mine has gone missing. He was visiting some ruined baths, north of Myr, but neither I, nor my associates, have heard from him since he set out weeks ago. He was supposed to be back by now.", "wildfire_talk3",
	[]],

	[plyr|trp_illyrio_mopatis_1, "wildfire_talk3",
	[],
	"What would you have me do?", "wildfire_talk4",
	[]],

	[plyr|trp_illyrio_mopatis_1, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_illyrio_mopatis_1, "wildfire_talk4",
	[],
	"Go look for him. If he has met with an unfortunate end, I need you to return any books or scrolls he might carry, but I pray that is not the case. But find out what happened to him, {playername}!", "wildfire_talk5",
	[]],

	[plyr|trp_illyrio_mopatis_1, "wildfire_talk5",
	[],
	"Hmm...", "wildfire_talk6",
	[]],

	[plyr|trp_illyrio_mopatis_1, "wildfire_talk5",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_illyrio_mopatis_1, "wildfire_talk6",
	[],
	"I'll make sure you're well rewarded!", "wildfire_talk7",
	[]],

	[plyr|trp_illyrio_mopatis_1, "wildfire_talk7",
	[],
	"Very well, I will find this friend of yours.", "close_window",
	[
		(call_script, "script_end_quest", "qst_return_to_illyrio"),
		(enable_party, "p_haldon_bath"),
		(remove_troop_from_site, "trp_illyrio_mopatis_1", "scn_town_12_castle"),
		(setup_quest_text, "qst_aegon_targaryen_quest"),
		(str_store_string, 2, "@Illyrio Mopatis has asked you to find out what happened to his friend. Search the ruined baths, north of Myr."),
		(call_script, "script_start_quest", "qst_aegon_targaryen_quest", "$g_talk_troop")
	]],

	[plyr|trp_illyrio_mopatis_1, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_illyrio_mopatis_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_haldon_halfmaester, "start",
	[],
	"Yes?", "pj_wildfire_talk",
	[]],

	[plyr|trp_haldon_halfmaester, "pj_wildfire_talk",
	[],
	"Hmph!", "close_window",
	[]],

	[plyr|trp_haldon_halfmaester, "pj_wildfire_talk",
	[],
	"Are you Illyrios acquaintance?", "pj_wildfire_talk2",
	[]],

	[trp_haldon_halfmaester, "pj_wildfire_talk2",
	[],
	"Indeed I am, {playername}. My name is Haldon, and I appreciate the help. I've been looking for... nevermind. Anyhow, I ran into these bandits and they had me at their mercy when you came to my rescue.", "pj_wildfire_talk3",
	[]],

	[plyr|trp_haldon_halfmaester, "pj_wildfire_talk3",
	[],
	"Glad I could be of help.", "pj_wildfire_talk5",
	[]],

	[trp_haldon_halfmaester, "pj_wildfire_talk5",
	[],
	"I'm sure the magister will reward you handsomely for your work, {playername}. You seem an able fellow, and he might have... work for you, so visit him regularly.", "close_window",
	[]],

	[trp_illyrio_mopatis_2, "start",
	[],
	"Yes, {playername}?", "pj_wildfire_talk",
	[]],

	[plyr|trp_illyrio_mopatis_2, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_aegon_targaryen_quest1")
	],
	"I found Haldon and rescued him from a band of bandits.", "pj_wildfire_talk2",
	[]],

	[trp_illyrio_mopatis_2, "pj_wildfire_talk2",
	[],
	"Well done, {playername}! I think a reward is in order!", "pj_wildfire_talk3",
	[]],

	[plyr|trp_illyrio_mopatis_2, "pj_wildfire_talk3",
	[],
	"Thank you.", "close_window",
	[
		(setup_quest_text, "qst_return_to_illyrio2"),
		(str_store_string, 2, "@Return to Illyrio Mopatis."),
		(call_script, "script_start_quest", "qst_return_to_illyrio2", "$g_talk_troop"),
		(add_troop_to_site, "trp_varys_npc_1", "scn_town_12_castle", 11),
		(troop_add_gold, "trp_player", 2500),
		(remove_troop_from_site, "trp_illyrio_mopatis_2", "scn_town_12_castle"),
		(call_script, "script_end_quest", "qst_aegon_targaryen_quest1"),
		(add_xp_as_reward, 500)
	]],

	[plyr|trp_illyrio_mopatis_2, "pj_wildfire_talk",
	[],
	"Who is Haldon?", "morcant_creditos",
	[]],

	[trp_illyrio_mopatis_2, "morcant_creditos",
	[],
	"Oh, just an old friend of mine. We call him 'Halfmaester' on account of him being almost a maester, but not quite.", "close_window",
	[]],

	[plyr|trp_illyrio_mopatis_2, "pj_wildfire_talk",
	[],
	"Nevermind.", "close_window",
	[]],

	[trp_stepstone_npc_0, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What are you doing here? This is the private estate of Magister Mopatis!", "wildfire_starter_introduce_1",
	[]],

	[plyr|trp_stepstone_npc_0, "wildfire_starter_introduce_1",
	[],
	"Who is this magister?", "wildfire_starter_introduce_2",
	[]],

	[trp_stepstone_npc_0, "wildfire_starter_introduce_2",
	[],
	"He's one of the magisters of Pentos, you dolt! He should be back soon, and when he's back, he'll make you regret this trespassing! But if you have urgent business with him, you can find him at the court in Pentos.", "close_window",
	[
		(display_message, "@Visit Illyrio Mopatis in Pentos."),
		(add_troop_to_site, "trp_stepstone_npc_1", "scn_town_12_castle", 11)
	]],

	[trp_stepstone_npc_0, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Get out of here!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_stepstone_npc_1, "start",
	[
		(eq, "$g_illyrio_quest_1", 0)
	],
	"Welcome, my friend. I see you just barged in, without an invitation, but welcome nonetheless. What are you doing here, if you don't mind me asking?", "wildfire_talk",
	[]],

	[plyr|trp_stepstone_npc_1, "wildfire_talk",
	[],
	"I am {playername}, and I've come seeking adventure. Do you have any tasks for me?", "wildfire_talk2",
	[]],

	[plyr|trp_stepstone_npc_1, "wildfire_talk",
	[],
	"Farewell.", "close_window",
	[]],

	[trp_stepstone_npc_1, "wildfire_talk2",
	[],
	"Yes, {playername}, I do, I do. I need someone to brave the Smoking Sea, and set sail for far away Meereen. An... acquaintance of mine has taken up residence in the city, and I would dearly like to keep in contact with her, and thus I need someone to deliver this letter. So what do you say, {playername}, are you man enough for such a journey?", "wildfire_talk3",
	[]],

	[plyr|trp_stepstone_npc_1, "wildfire_talk3",
	[
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(ge, ":free_inventory_capacity", 1)
	],
	"I will brave this Smoking Sea and sail to Meereen!", "wildfire_talk4",
	[
		(assign, "$g_illyrio_quest_1", 1),
		(troop_add_item, "trp_player", "itm_illyrios_letter", 0)
	]],

	[plyr|trp_stepstone_npc_1, "wildfire_talk3",
	[],
	"I'm afraid I can't carry that right now.", "close_window",
	[]],

	[trp_stepstone_npc_1, "wildfire_talk4",
	[],
	"Splendid! You'll be well rewarded, I can assure you that. Once you reach Meereen, seek out Belandra Kheranes, she'll help you on your way. And just between us, if you where to bring some of your own coin with you on the journey, you might be able to make an excellent profit bringing back some spice. Now, sadly, my own ships are all away at sea, so you'll need to find your own way to Meereen.", "wildfire_talk5",
	[]],

	[plyr|trp_stepstone_npc_1, "wildfire_talk5",
	[],
	"Where can I find a ship?", "wildfire_talk6",
	[]],

	[plyr|trp_stepstone_npc_1, "wildfire_talk5",
	[],
	"On second thought, I think I'll stay on land.", "close_window",
	[]],

	[trp_stepstone_npc_1, "wildfire_talk6",
	[],
	"Travel to Volantis, and you may be able to hire a ship there. Visit the tavern and see if you can't find Bayle Neres. He's an old rogue, not averse to travelling past Valyria. For the right price.", "wildfire_talk7",
	[]],

	[plyr|trp_stepstone_npc_1, "wildfire_talk7",
	[],
	"Very well, I'll return once I've seen Meereen.", "close_window",
	[
		(display_message, "@Illyrio hands you a sealed letter."),
		(add_troop_to_site, "trp_bayle", "scn_town_47_tavern", 41),
		(remove_troop_from_site, "trp_stepstone_npc_1", "scn_town_12_castle"),
		(setup_quest_text, "qst_stepstone_quest"),
		(str_store_string, 2, "@Magister Illyrio tasked you with seeking out his acquintance in Meereen. Seek out Bayle Neres in Volantis to board a ship heading towards Slaver's Bay, then talk to Belandra Kheranes in Meereen."),
		(call_script, "script_start_quest", "qst_stepstone_quest", "$g_talk_troop")
	]],

	[plyr|trp_stepstone_npc_1, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_stepstone_npc_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_stepstone_npc_2, "start",
	[],
	"I'm busy, go away!", "pj_wildfire_talk",
	[]],

	[plyr|trp_stepstone_npc_2, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_stepstone_quest")
	],
	"Are you Belandra Kheranes?", "pj_wildfire_talk2",
	[]],

	[trp_stepstone_npc_2, "pj_wildfire_talk2",
	[],
	"Yes, what's it to you?", "pj_wildfire_talk3",
	[]],

	[plyr|trp_stepstone_npc_2, "pj_wildfire_talk3",
	[],
	"My name is {playername}. Illyrio Mopatis sent me to seek out a friend of his and deliver this letter. I was told you could help me get in contact with this person?", "pj_wildfire_talk5",
	[]],

	[trp_stepstone_npc_2, "pj_wildfire_talk5",
	[],
	"Ah yes, {playername}, I can. The one you're looking for is named Barristan Selmy. If you head to the throne room, I'll make sure he'll meet you there.", "pj_wildfire_talk6",
	[]],

	[plyr|trp_stepstone_npc_2, "pj_wildfire_talk6",
	[],
	"What if I he's not there?", "pj_wildfire_talk8",
	[]],

	[trp_stepstone_npc_2, "pj_wildfire_talk8",
	[],
	"What if, what if. Don't worry, {playername}, he will be.", "close_window",
	[
		(call_script, "script_end_quest", "qst_stepstone_quest"),
		(setup_quest_text, "qst_stepstone_quest1"),
		(str_store_string, 2, "@Visit the throne room."),
		(call_script, "script_start_quest", "qst_stepstone_quest1", "$g_talk_troop"),
		(display_message, "@When you turn to walk towards the gate, leading into the pyramid, you hear a loud shriek. Above the city, you can just make out a large winged shape, soaring higher and higher.")
	]],

	[plyr|trp_stepstone_npc_2, "pj_wildfire_talk",
	[],
	"Hmph!", "close_window",
	[]],

	[trp_stepstone_npc_3, "start",
	[],
	"Yes?", "pj_wildfire_talk",
	[]],

	[plyr|trp_stepstone_npc_3, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_stepstone_quest1"),
		(player_has_item, "itm_illyrios_letter")
	],
	"Barristan Selmy? I've been sent with a letter.", "pj_wildfire_talk2",
	[]],

	[trp_stepstone_npc_3, "pj_wildfire_talk2",
	[],
	"Magister Illyrio has been a steadfast friend of the queens cause. I thank you for bringing me this, {playername}. Did you bring any additional messages from him?", "pj_wildfire_talk3",
	[
		(troop_remove_items, "trp_player", "itm_illyrios_letter", 1)
	]],

	[plyr|trp_stepstone_npc_3, "pj_wildfire_talk3",
	[],
	"No, he simply tasked me with making sure you received this letter, but he also asks that you keep him informed of your intentions.", "pj_wildfire_talk5",
	[]],

	[trp_stepstone_npc_3, "pj_wildfire_talk5",
	[],
	"Very well, {playername}. I'll have Missandei see to it that Magister Illyrio is kept aware of our intentions. Perhaps you should speak to Skahaz mo Kandaq, if you want to continue serving our cause, he may well have tasks for you.", "pj_wildfire_talk6",
	[]],

	[plyr|trp_stepstone_npc_3, "pj_wildfire_talk6",
	[],
	"Thank you.", "close_window",
	[
		(call_script, "script_end_quest", "qst_stepstone_quest1"),
		(setup_quest_text, "qst_stepstone_quest2"),
		(str_store_string, 2, "@Talk to Skahaz mo Kandaq."),
		(call_script, "script_start_quest", "qst_stepstone_quest2", "$g_talk_troop")
	]],

	[plyr|trp_stepstone_npc_3, "pj_wildfire_talk",
	[],
	"Nevermind.", "close_window",
	[]],

	[trp_stepstone_npc_4, "start",
	[],
	"Yes?", "pj_wildfire_talk",
	[]],

	[plyr|trp_stepstone_npc_4, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_stepstone_quest2")
	],
	"Skahaz mo Kandaq? Ser Barristan told me you might have tasks for me?", "pj_wildfire_talk2",
	[]],

	[trp_stepstone_npc_4, "pj_wildfire_talk2",
	[],
	"Looking for work then, eh? I believe I have a task for you, if you're man enough to handle it.", "pj_wildfire_talk3",
	[]],

	[plyr|trp_stepstone_npc_4, "pj_wildfire_talk3",
	[],
	"I am.", "pj_wildfire_talk4",
	[]],

	[trp_stepstone_npc_4, "pj_wildfire_talk4",
	[],
	"My family has many dealings with the Free Cities. Her grace has, in her wisdom, outlawed slavery, and it's imperative that we find new ways to keep our markets full. To that effect, I've decided to send one of my own merchant vessels toward Tyrosh, that we might establish some small link with the trade of the Narrow Sea. But first the ship has to traverse the Stepstones, a notorious haunt of pirates. The lyseni cleared the islands a year ago, so the pirates have not yet been able to recover their strenght, but on the island of Bloodstone, there's an inkling of a new stronghold. I need you to go there and dispatch the pirates making it their home.", "pj_wildfire_talk5",
	[]],

	[plyr|trp_stepstone_npc_4, "pj_wildfire_talk5",
	[],
	"I'll clear out these pirates.", "pj_wildfire_talk6",
	[
		(try_begin),
			(call_script, "script_change_troop_renown", "trp_player", 5),
		(try_end)
	]],

	[trp_stepstone_npc_4, "pj_wildfire_talk6",
	[],
	"Very well. It has been a pleasure, {playername}.", "close_window",
	[
		(enable_party, "p_bloodstone"),
		(call_script, "script_end_quest", "qst_stepstone_quest2"),
		(setup_quest_text, "qst_stepstone_quest3"),
		(str_store_string, 2, "@Skahaz mo Kandaq tasked you with clearing the haunt of pirates on Bloodstone."),
		(call_script, "script_start_quest", "qst_stepstone_quest3", "$g_talk_troop"),
		(display_message, "@Turning to leave the throne room, you once again hear a loud shriek, followed by an even louder roar. Suddenly, one of the alcoves is lit up by fire.")
	]],

	[plyr|trp_stepstone_npc_4, "pj_wildfire_talk",
	[],
	"Nothing, I'm leaving.", "close_window",
	[]],

	[trp_stepstone_npc_5, "start",
	[],
	"What do you want?", "pj_wildfire_talk",
	[]],

	[plyr|trp_stepstone_npc_5, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_stepstone_quest3")
	],
	"I'm looking for the pirates who have recently made Bloodstone their home.", "pj_wildfire_talk2",
	[]],

	[trp_stepstone_npc_5, "pj_wildfire_talk2",
	[],
	"They ain't here right now, they all went to the south of the island. Was going to prey on some myrish galley they said. Can't be a big galley, there's only eight of them, hah. What's it to you anyhow?", "pj_wildfire_talk3",
	[]],

	[plyr|trp_stepstone_npc_5, "pj_wildfire_talk3",
	[],
	"None of your concern!", "pj_wildfire_talk5",
	[]],

	[trp_stepstone_npc_5, "pj_wildfire_talk5",
	[],
	"Alright, alright, no harm done.", "close_window",
	[
		(disable_party, "p_bloodstone"),
		(enable_party, "p_bloodstone_haunt"),
		(call_script, "script_end_quest", "qst_stepstone_quest3"),
		(setup_quest_text, "qst_stepstone_quest4"),
		(str_store_string, 2, "@Find and defeat the pirates."),
		(call_script, "script_start_quest", "qst_stepstone_quest4", "$g_talk_troop")
	]],

	[plyr|trp_stepstone_npc_5, "pj_wildfire_talk",
	[],
	"Who are you?", "nacroxnicke_creditos",
	[]],

	[trp_stepstone_npc_5, "nacroxnicke_creditos",
	[],
	"None of your concern! I'm just guarding this here gate!", "close_window",
	[]],

	[plyr|trp_stepstone_npc_5, "pj_wildfire_talk",
	[],
	"Nothing.", "close_window",
	[]],

	[trp_stepstone_npc_6, "start",
	[],
	"What do you want?", "pj_wildfire_talk",
	[]],

	[plyr|trp_stepstone_npc_6, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_stepstone_quest5")
	],
	"I've cleared out the pirates on Bloodstone.", "pj_wildfire_talk2",
	[]],

	[trp_stepstone_npc_6, "pj_wildfire_talk2",
	[],
	"Well, I'm glad the men have been taken care of. Those islands are usually teeming with outlaws, but it haven't been too bad lately.", "pj_wildfire_talk3",
	[]],

	[plyr|trp_stepstone_npc_6, "pj_wildfire_talk3",
	[],
	"I imagine their death should be worth a reward.", "pj_wildfire_talk4",
	[]],

	[trp_stepstone_npc_6, "pj_wildfire_talk4",
	[],
	"Reckon so, do you?", "pj_wildfire_talk5",
	[]],

	[trp_stepstone_npc_6, "pj_wildfire_talk5",
	[],
	"I suppose the people of Tyrosh could find some way to thank you for your services. Here, take this.", "pj_wildfire_talk6",
	[
		(troop_add_gold, "trp_player", 1000)
	]],

	[plyr|trp_stepstone_npc_6, "pj_wildfire_talk6",
	[],
	"Thank you.", "pj_wildfire_talk7",
	[]],

	[trp_stepstone_npc_6, "pj_wildfire_talk7",
	[],
	"My pleasure. Less pirates means more trade.", "close_window",
	[
		(add_troop_to_site, "trp_stepstone_npc_7", "scn_town_12_castle", 11),
		(call_script, "script_end_quest", "qst_stepstone_quest5"),
		(setup_quest_text, "qst_stepstone_quest6"),
		(str_store_string, 2, "@Return to Magister Illyrio and claim your reward."),
		(call_script, "script_start_quest", "qst_stepstone_quest6", "$g_talk_troop")
	]],

	[plyr|trp_stepstone_npc_6, "pj_wildfire_talk",
	[],
	"I forgot.", "close_window",
	[]],

	[trp_stepstone_npc_7, "start",
	[],
	"Yes, {playername}", "pj_germund_talk",
	[]],

	[plyr|trp_stepstone_npc_7, "pj_germund_talk",
	[
		(check_quest_active, "qst_stepstone_quest6")
	],
	"I've returned from the east.", "wildfire_espada",
	[]],

	[trp_stepstone_npc_7, "wildfire_espada",
	[],
	"Wonderful, {playername}! Did you find Ser Barristan? Is he well? Here, take these gifts as my way of thanking you! Perhaps you'll be wanting to make use of them once the queen claims her rightful throne, eh?", "wildfire_espada2",
	[
		(troop_add_item, "trp_player", "itm_medium_tier_saber_1", 0),
		(troop_add_item, "trp_player", "itm_high_tier_sword_1", 0),
		(troop_add_item, "trp_player", "itm_medium_tier_sword_2", 0),
		(add_xp_as_reward, 1500),
		(add_troop_to_site, "trp_illyrio_mopatis_1", "scn_town_12_castle", 11),
		(succeed_quest, "qst_stepstone_quest5"),
		(call_script, "script_end_quest", "qst_stepstone_quest6")
	]],

	[plyr|trp_stepstone_npc_7, "wildfire_espada2",
	[],
	"Thank you, magister.", "new_one_wildfire",
	[]],

	[trp_stepstone_npc_7, "new_one_wildfire",
	[],
	"It's nothing, nothing! Say, should you wish to earn riches beyond your wildest dreams, then return to me in a couple of hours, I might have more work for you...", "close_window",
	[
		(assign, "$stepstone_holy_sword", 2),
		(setup_quest_text, "qst_return_to_illyrio"),
		(str_store_string, 2, "@Return to Magister Illyrio."),
		(call_script, "script_start_quest", "qst_return_to_illyrio", "$g_talk_troop")
	]],

	[trp_stepstone_npc_7, "start",
	[
		(eq, "$stepstone_holy_sword", 2)
	],
	"Greetings {playername}.", "bye31",
	[]],

	[plyr|trp_stepstone_npc_7, "bye31",
	[],
	"Greetings to you too.", "close_window",
	[]],

	[plyr|trp_stepstone_npc_7, "pj_germund_talk",
	[],
	"I forgot.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 14),
		(neg|troop_is_hero, "$g_talk_troop"),
		(neg|is_between, "$g_talk_troop", "trp_swadian_merchant", "trp_startup_merchants_end"),
		(assign, ":value", -1),
		(try_begin),
			(party_get_slot, ":g_encountered_party_center_npc_volunteer_troop_type", "$g_encountered_party", slot_center_npc_volunteer_troop_type),
			(eq, "$g_talk_troop", ":g_encountered_party_center_npc_volunteer_troop_type"),
			(party_get_slot, ":value", "$g_encountered_party", slot_center_npc_volunteer_troop_amount),
		(else_try),
			(party_get_slot, ":g_encountered_party_center_npc_volunteer_troop_type", "$g_encountered_party", 104),
			(eq, "$g_talk_troop", ":g_encountered_party_center_npc_volunteer_troop_type"),
			(party_get_slot, ":value", "$g_encountered_party", 105),
		(try_end),
		(gt, ":value", 0),
		(store_sub, reg3, ":value", 1),
		(store_sub, reg4, reg3, 1),
		(call_script, "script_game_get_join_cost", ":g_encountered_party_center_npc_volunteer_troop_type"),
		(assign, ":var_3", reg0),
		(store_mul, reg5, ":value", reg0),
		(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
		(val_min, ":value", ":free_companions_capacity_main_party"),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":var_3", 0),
			(val_div, ":troop_gold_player", ":var_3"),
			(val_min, ":value", ":troop_gold_player"),
		(try_end),
		(assign, "$temp", ":value")
	],
	"Do you have a need for sellswords? {reg3?Me and {reg4?{reg3} of my mates:one of my mates} are:I am} looking for a master. We'll join you for {reg5} silver coins.", "mercenary_tavern_talk",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 14)
	],
	"Any orders?", "mercenary_after_recruited",
	[]],

	[anyone|plyr, "mercenary_after_recruited",
	[],
	"Make your preparations. We'll be moving at dawn.", "mercenary_after_recruited_2",
	[]],

	[anyone|plyr, "mercenary_after_recruited",
	[],
	"Take your time. We'll be staying in this town for a while.", "mercenary_after_recruited_2",
	[]],

	[anyone, "mercenary_after_recruited_2",
	[],
	"Yes {Ser/my lady}. We'll be ready when you tell us to leave.", "close_window",
	[]],

	[anyone|plyr, "mercenary_tavern_talk",
	[
		(try_begin),
			(party_get_slot, ":g_encountered_party_center_npc_volunteer_troop_type", "$g_encountered_party", slot_center_npc_volunteer_troop_type),
			(eq, "$g_talk_troop", ":g_encountered_party_center_npc_volunteer_troop_type"),
			(party_get_slot, ":g_encountered_party_center_npc_volunteer_troop_amount", "$g_encountered_party", slot_center_npc_volunteer_troop_amount),
		(else_try),
			(party_get_slot, ":g_encountered_party_center_npc_volunteer_troop_type", "$g_encountered_party", 104),
			(party_get_slot, ":g_encountered_party_center_npc_volunteer_troop_amount", "$g_encountered_party", 105),
		(try_end),
		(eq, ":g_encountered_party_center_npc_volunteer_troop_amount", "$temp"),
		(call_script, "script_game_get_join_cost", ":g_encountered_party_center_npc_volunteer_troop_type"),
		(store_mul, reg5, "$temp", reg0)
	],
	"All right. I will hire all of you. Here is {reg5} silver coins.", "mercenary_tavern_talk_hire",
	[]],

	[anyone|plyr, "mercenary_tavern_talk",
	[
		(try_begin),
			(party_get_slot, ":g_encountered_party_center_npc_volunteer_troop_type", "$g_encountered_party", slot_center_npc_volunteer_troop_type),
			(eq, "$g_talk_troop", ":g_encountered_party_center_npc_volunteer_troop_type"),
			(party_get_slot, ":g_encountered_party_center_npc_volunteer_troop_amount", "$g_encountered_party", slot_center_npc_volunteer_troop_amount),
		(else_try),
			(party_get_slot, ":g_encountered_party_center_npc_volunteer_troop_type", "$g_encountered_party", 104),
			(party_get_slot, ":g_encountered_party_center_npc_volunteer_troop_amount", "$g_encountered_party", 105),
		(try_end),
		(lt, "$temp", ":g_encountered_party_center_npc_volunteer_troop_amount"),
		(gt, "$temp", 0),
		(assign, reg6, "$temp"),
		(call_script, "script_game_get_join_cost", ":g_encountered_party_center_npc_volunteer_troop_type"),
		(store_mul, reg5, "$temp", reg0)
	],
	"All right. But I can only hire {reg6} of you. Here is {reg5} silver coins.", "mercenary_tavern_talk_hire",
	[]],

	[anyone, "mercenary_tavern_talk_hire",
	[
		(store_random_in_range, ":random_in_range_0_4", 0, 4),
		(try_begin),
			(eq, ":random_in_range_0_4", 0),
			(gt, "$temp", 1),
			(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0"),
			(str_store_string, 17, "@You chose well, {s0}. My {reg65?companions:lads} know how to keep their word and earn their pay."),
		(else_try),
			(eq, ":random_in_range_0_4", 1),
			(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0"),
			(str_store_string, 17, "@Well done, {s0}. Keep the money and wine coming our way, and there's no foe in the world you need fear."),
		(else_try),
			(eq, ":random_in_range_0_4", 2),
			(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0"),
			(str_store_string, 17, "@We are at your service, {s0}. Point us in the direction of those who need hurting, and we'll do the rest."),
		(else_try),
			(str_store_string, 17, "str_you_will_not_be_disappointed_sirmadam_you_will_not_find_better_warriors_in_all_calradia"),
		(try_end)
	],
	"{s17}", "close_window",
	[
		(try_begin),
			(party_get_slot, ":g_encountered_party_center_npc_volunteer_troop_type", "$g_encountered_party", slot_center_npc_volunteer_troop_type),
			(eq, "$g_talk_troop", ":g_encountered_party_center_npc_volunteer_troop_type"),
			(assign, ":value", 91),
		(else_try),
			(party_get_slot, ":g_encountered_party_center_npc_volunteer_troop_type", "$g_encountered_party", 104),
			(assign, ":value", 105),
		(try_end),
		(call_script, "script_game_get_join_cost", ":g_encountered_party_center_npc_volunteer_troop_type"),
		(store_mul, ":value_2", "$temp", reg0),
		(troop_remove_gold, "trp_player", ":value_2"),
		(party_add_members, "p_main_party", ":g_encountered_party_center_npc_volunteer_troop_type", "$temp"),
		(party_set_slot, "$g_encountered_party", ":value", 0)
	]],

	[anyone|plyr, "mercenary_tavern_talk",
	[
		(eq, "$temp", 0),
		(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
		(ge, ":free_companions_capacity_main_party", 1)
	],
	"That sounds good. But I can't afford to hire any more {reg65?soldiers:men} right now.", "tavern_mercenary_cant_lead",
	[]],

	[anyone, "tavern_mercenary_cant_lead",
	[],
	"That's a pity. Well, {reg3?we will:I will} be lingering around here for a while, if you need to hire anyone.", "close_window",
	[]],

	[anyone|plyr, "mercenary_tavern_talk",
	[
		(eq, "$temp", 0),
		(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
		(eq, ":free_companions_capacity_main_party", 0)
	],
	"That sounds good. But I can't lead any more {reg65?soldiers:men} right now.", "tavern_mercenary_cant_lead",
	[]],

	[anyone|plyr, "mercenary_tavern_talk",
	[],
	"Sorry. I don't need any other men right now.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_trainer_1", "trp_ransom_broker_1"),
		(eq, "$g_talk_troop_met", 0)
	],
	"Good day to you {lad/lass}. You look like another adventurer who has come to try {his/her} chance in these lands. Well, trust my word, you won't be able to survive long here unless you know how to fight yourself out of a tight spot.", "trainer_intro_1",
	[]],

	[anyone|plyr, "trainer_intro_1",
	[],
	"Thank you for your advice. This place looks like a training field. Maybe I can learn about fighting here?", "trainer_intro_2",
	[]],

	[anyone, "trainer_intro_2",
	[],
	"Indeed you can. I am a veteran soldier... fought a good deal in the wars in my time. But these days, I train young novices in this area. I can find you some opponents to practice with if you like. Or if you have any questions about the theory of combat, feel free to ask.", "trainer_intro_3",
	[]],

	[anyone|plyr, "trainer_intro_3",
	[],
	"Yes, I do have a few questions.", "trainer_intro_4a",
	[]],

	[anyone|plyr, "trainer_intro_3",
	[],
	"Actually, I can move on to practice.", "trainer_intro_4b",
	[]],

	[anyone, "trainer_intro_4a",
	[],
	"Well, ask anything you like.", "trainer_talk_combat",
	[]],

	[anyone, "trainer_intro_4b",
	[],
	"Good. It's good to find someone eager for practice. Let's see what you will do.", "trainer_practice_1",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_trainer_1", "trp_ransom_broker_1"),
		(neq, "$waiting_for_training_fight_result", 0),
		(neq, "$training_fight_won", 0)
	],
	"That was a good fight. ", "trainer_practice_1",
	[
		(val_sub, "$num_opponents_to_beat_in_a_row", 1),
		(assign, "$waiting_for_training_fight_result", 0)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_trainer_1", "trp_ransom_broker_1"),
		(neq, "$waiting_for_training_fight_result", 0)
	],
	"Ha! Looks like you've developed a bit of a limp there. Don't worry, even losses have their value, provided you learn from them. Shake the stars out of your eyes and get back in there. There's no other way to win.", "trainer_practice_1",
	[
		(assign, "$num_opponents_to_beat_in_a_row", 3),
		(assign, "$waiting_for_training_fight_result", 0)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_trainer_1", "trp_ransom_broker_1")
	],
	"Good day. Ready for some training today?", "trainer_talk",
	[]],

	[anyone, "trainer_pretalk",
	[],
	"Ah, are you ready for some training?", "trainer_talk",
	[]],

	[anyone|plyr, "trainer_talk",
	[],
	"I am ready for some practice.", "trainer_practice_1",
	[]],

	[anyone|plyr, "trainer_talk",
	[],
	"First, tell me something about combat...", "trainer_combat_begin",
	[]],

	[anyone|plyr, "trainer_talk",
	[],
	"I need to leave now. Farewell.", "close_window",
	[]],

	[anyone, "trainer_combat_begin",
	[],
	"What do you want to know?", "trainer_talk_combat",
	[]],

	[anyone, "trainer_combat_pretalk",
	[],
	"What else do you want to know?", "trainer_talk_combat",
	[]],

	[anyone|plyr, "trainer_talk_combat",
	[],
	"Tell me about defending myself.", "trainer_explain_defense",
	[]],

	[anyone|plyr, "trainer_talk_combat",
	[],
	"Tell me about attacking with weapons.", "trainer_explain_attack",
	[]],

	[anyone|plyr, "trainer_talk_combat",
	[],
	"Tell me about fighting on horseback.", "trainer_explain_horseback",
	[]],

	[anyone|plyr, "trainer_talk_combat",
	[],
	"I guess I know all the theory I need. Let's talk about something else.", "trainer_pretalk",
	[]],

	[anyone, "trainer_explain_defense",
	[],
	"Good question. The first thing you should know as a fighter is how to defend yourself. Keeping yourself out of harm's way is the first rule of combat, and it is much more important than giving harm to others. Everybody can swing a sword around and hope to cut some flesh, but only those fighters that are experts at defense live to tell of it.", "trainer_explain_defense_2",
	[]],

	[anyone, "trainer_explain_defense_2",
	[],
	"Now. Defending yourself is easiest if you are equipped with a shield. Just block with your shield. [Hold down the right mouse button to defend yourself with the shield.] In this state, you will be able to deflect all attacks that come from your front. However, you will still be open to strikes from your sides or your back.", "trainer_explain_defense_3",
	[]],

	[anyone|plyr, "trainer_explain_defense_3",
	[],
	"What if I don't have a shield?", "trainer_explain_defense_4",
	[]],

	[anyone, "trainer_explain_defense_4",
	[],
	"Then you will have to use your weapon to block your opponent. This is a bit more difficult than defending with a shield. Defending with a weapon, you can block against only ONE attack direction. That is, you block against either overhead swings, side swings or thrusts. Therefore you must watch your opponent carefully and start to block AFTER he starts his attack. In this way you will be able to block against the direction of his current attack. If you start to block BEFORE he makes his move, he may just attack in another direction than the one you are blocking against and score a hit.", "trainer_combat_pretalk",
	[]],

	[anyone, "trainer_explain_attack",
	[],
	"Good question. Attacking is the best defence, they say. A tactic many fighters find useful is taking an offensive stance and readying your weapon for attack, waiting for the right moment for swinging it. [You can ready your weapon for attack by pressing and holding down the left mouse button.]", "trainer_explain_attack_2",
	[]],

	[anyone|plyr, "trainer_explain_attack_2",
	[],
	"That sounds useful.", "trainer_explain_attack_3",
	[]],

	[anyone, "trainer_explain_attack_3",
	[],
	"It is a good tactic, but remember that, your opponent may see that and take a defensive stance against the direction you are swinging your weapon. If that happens, you must break your attack and quickly attack from another direction [You may cancel your current attack by quickly tapping the right mouse button].", "trainer_explain_attack_4",
	[]],

	[anyone|plyr, "trainer_explain_attack_4",
	[],
	"If my opponent is defending against the direction I am attacking from, I will break and use another direction.", "trainer_explain_attack_5",
	[]],

	[anyone, "trainer_explain_attack_5",
	[],
	"Yes, selecting the direction you swing your weapon is a crucial skill. There are four main directions you may use: right swing, left swing, overhead swing and thrust. You must use each one wisely. [to control your swing direction with default controls, move your mouse in the direction you want to swing from as you press the left mouse button].", "trainer_combat_pretalk",
	[]],

	[anyone, "trainer_explain_horseback",
	[],
	"Very good question. A horse may be a warrior's most powerful weapon in combat. It gives you speed, height, power and initiative. A lot of deadly weapons will become even deadlier on horseback. However you must pay particular attention to horse-mounted enemies couching their lances, as they may take down any opponent in one hit. [To use the couched lance yourself, wield a lance or similar weapon, and speed up your horse without pressing attack or defense buttons. after you reach a speed, you'll lower your lance. Then try to target your enemies by maneuvering your horse.]", "trainer_combat_pretalk",
	[]],

	[anyone, "trainer_practice_1",
	[
		(eq, "$training_system_explained", 0)
	],
	"I train novices in four stages, each tougher than the one before. To finish a stage and advance to the next one, you have to win three fights in a row.", "trainer_practice_1",
	[
		(assign, "$num_opponents_to_beat_in_a_row", 3),
		(assign, "$novicemaster_opponent_troop", "trp_novice_fighter"),
		(assign, "$training_system_explained", 1)
	]],

	[anyone, "trainer_practice_1",
	[
		(ge, "$novice_training_difficulty", 4)
	],
	"You have passed all stages of training. But if you want you can still practice. Are you ready?", "novicemaster_are_you_ready",
	[
		(assign, "$num_opponents_to_beat_in_a_row", 99999)
	]],

	[anyone, "trainer_practice_1",
	[
		(eq, "$num_opponents_to_beat_in_a_row", 0),
		(eq, "$novice_training_difficulty", 0)
	],
	"Way to go {lad/lass}. With this victory, you have advanced to the next training level. From now on your opponents will be regular fighters, not the riff-raff off the street, so be on your toes.", "trainer_practice_1",
	[
		(assign, "$num_opponents_to_beat_in_a_row", 3),
		(val_add, "$novice_training_difficulty", 1),
		(add_xp_to_troop, 100),
		(assign, "$novicemaster_opponent_troop", "trp_regular_fighter")
	]],

	[anyone, "trainer_practice_1",
	[
		(eq, "$num_opponents_to_beat_in_a_row", 0),
		(eq, "$novice_training_difficulty", 1)
	],
	"Way to go {lad/lass}. Welcome to the third training level. From now on your opponents will be veteran fighters; soldiers and arena regulars and the like. These guys know some dirty tricks, so keep your defense up.", "trainer_practice_1",
	[
		(assign, "$num_opponents_to_beat_in_a_row", 3),
		(val_add, "$novice_training_difficulty", 1),
		(add_xp_to_troop, 100),
		(assign, "$novicemaster_opponent_troop", "trp_veteran_fighter")
	]],

	[anyone, "trainer_practice_1",
	[
		(eq, "$num_opponents_to_beat_in_a_row", 0),
		(eq, "$novice_training_difficulty", 2)
	],
	"You've got the heart of a champion, {lad/lass}, and the sword arm to match. From now on your opponents will be champion fighters. These are the cream of the crop, the finest warriors I have trained. If you can best three of them in a row, you will join their ranks.", "trainer_practice_1",
	[
		(assign, "$num_opponents_to_beat_in_a_row", 3),
		(val_add, "$novice_training_difficulty", 1),
		(add_xp_to_troop, 100),
		(assign, "$novicemaster_opponent_troop", "trp_champion_fighter")
	]],

	[anyone, "trainer_practice_1",
	[
		(eq, "$num_opponents_to_beat_in_a_row", 0),
		(eq, "$novice_training_difficulty", 3)
	],
	"It does my heart good to see such a promising talent. You have passed all tiers of training. You can now tell everyone that you have been trained by the master of the training field.", "novicemaster_finish_training",
	[
		(assign, "$num_opponents_to_beat_in_a_row", 3),
		(val_add, "$novice_training_difficulty", 1),
		(add_xp_to_troop, 300)
	]],

	[anyone|plyr, "novicemaster_finish_training",
	[],
	"Thank you master.", "novicemaster_finish_training_2",
	[]],

	[anyone, "novicemaster_finish_training_2",
	[],
	"I wish you good luck in the tourneys. And, don't forget,  if you want to practice your swordwork anytime, just come and say the word.", "close_window",
	[]],

	[anyone, "trainer_practice_1",
	[
		(assign, reg8, "$num_opponents_to_beat_in_a_row"),
		(str_store_troop_name, 9, "$novicemaster_opponent_troop")
	],
	"Your next opponent will be a {s9}. You need to win {reg8} more fights in a row to advance to the next stage. Are you ready?", "novicemaster_are_you_ready",
	[]],

	[anyone|plyr, "novicemaster_are_you_ready",
	[],
	"Yes I am.", "novicemaster_ready_to_fight",
	[]],

	[anyone, "novicemaster_ready_to_fight",
	[],
	"Here you go then. Good luck.", "close_window",
	[
		(assign, "$training_fight_won", 0),
		(assign, "$waiting_for_training_fight_result", 1),
		(modify_visitors_at_site, "$g_training_ground_melee_training_scene"),
		(reset_visitors),
		(assign, reg0, 0),
		(assign, reg1, 1),
		(assign, reg2, 2),
		(assign, reg3, 3),
		(shuffle_range, 0, 4),
		(set_visitor, reg0, "trp_player"),
		(set_visitor, reg1, "$novicemaster_opponent_troop"),
		(set_visitor, 4, "$g_talk_troop"),
		(set_jump_mission, "mt_training_ground_trainer_training"),
		(jump_to_scene, "$g_training_ground_melee_training_scene")
	]],

	[anyone|plyr, "novicemaster_are_you_ready",
	[],
	"Just a minute. I am not ready yet.", "novicemaster_not_ready",
	[]],

	[anyone, "novicemaster_not_ready",
	[],
	"Hey, You will never make it if you don't practice.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_septon_1", "trp_high_septon")
	],
	"Peace of the Father to you. I am a septon, a servant of the Seven.", "septon_talk",
	[]],

	[anyone, "septon_pretalk",
	[],
	"The Warrior guard you, {playername}. What can his humble servant do for you?", "septon_talk",
	[]],

	[anyone|plyr, "septon_talk",
	[
		(neg|main_party_has_troop, "$g_talk_troop")
	],
	"The gods are nothing to me. How can you call them good, when they let us toil in this miserable world?", "septon_angry",
	[]],

	[anyone, "septon_angry",
	[],
	"You... You... You're a demon, {playername}. Every righteous man in the Seven Kingdoms will stand against you.", "close_window",
	[]],

	[anyone|plyr, "septon_talk",
	[],
	"I am but a sinner, septon, and I need your help.", "septon_ayuda",
	[]],

	[anyone|plyr, "septon_talk",
	[],
	"I do not follow the Seven, but I would dearly like to learn more about the Faith.", "septon_ayuda",
	[]],

	[anyone|plyr, "septon_talk",
	[],
	"I have other matters to attend to.", "close_window",
	[]],

	[anyone, "septon_ayuda",
	[],
	"Oh, well. I pray for you {playername}, for the Father to forgive your sins.If it is your wish, I can pray for you and any men sworn to you, and have my congregation join me, that the Warrior may better hear us. But the Warrior will surely hear you better where you to make a small donation to the Faith.Or if you wish to improve your reputation in this town, to be known as a pious and just man, you might make a large donation to the local sept. The populace of {s60} will surely praise your name.", "septon_ayuda2",
	[]],

	[anyone|plyr, "septon_ayuda2",
	[],
	"Thank you. I have sinned and the Father must forgive me - I will donate 300 coins.", "septon_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 299),
			(troop_remove_gold, "trp_player", 300),
			(call_script, "script_change_player_party_morale", 2),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[anyone|plyr, "septon_ayuda2",
	[],
	"Thank you, septon. I want the population of {s60} to love me. I will donate 2000 coins.", "septon_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 1999),
			(troop_remove_gold, "trp_player", 2000),
			(call_script, "script_change_player_relation_with_center", "$current_town", 1),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[anyone|plyr, "septon_ayuda2",
	[],
	"Are you selling forgiveness?", "septon_angry",
	[]],

	[anyone|plyr, "septon_ayuda2",
	[],
	"Actually, never mind.", "septon_pretalk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_high_septon", "trp_drowned_god_1")
	],
	"Peace of the Father to you. I am the High Septon, and I speak for the Seven themselves.", "high_septon_talk",
	[]],

	[anyone, "high_septon_pretalk",
	[],
	"The Mother bless you, {playername}. What can I do for you?", "high_septon_talk",
	[]],

	[anyone|plyr, "high_septon_talk",
	[
		(neg|main_party_has_troop, "$g_talk_troop")
	],
	"Your gods are cruel. The gods responsible for all this misery will never have my worship.", "high_septon_angry",
	[]],

	[anyone, "high_septon_angry",
	[],
	"You speak out of ignorance, {playername}. If you do not turn from your path of wickedness, your soul will be forever condemned.", "close_window",
	[]],

	[anyone|plyr, "high_septon_talk",
	[],
	"I am but a sinner, Your Holiness, and I need your forgiveness.", "high_septon_ayuda",
	[]],

	[anyone|plyr, "high_septon_talk",
	[],
	"I do not follow the Faith, but I would like to learn of its mysteries.", "high_septon_ayuda",
	[]],

	[anyone|plyr, "high_septon_talk",
	[],
	"I have other matters to attend to.", "close_window",
	[]],

	[anyone, "high_septon_ayuda",
	[],
	"I will pray for you {playername}, so the Father might forgive your sins and the Mother grant you peace. If it is your wish, I can order the septs in King's Landing to pray for you and any men sworn to you, and even have the court join me, that the Father may better hear us. But he will surely hear you better where you to make a small donation to the Faith.Or if you wish to improve your reputation in this land, to be known as a pious and just man, you might make a large donation to the Great Sept of Baelor. The populace of {s60} will surely praise your name, and word of your great generosity will spread to the countryside.", "high_septon_ayuda2",
	[]],

	[anyone|plyr, "high_septon_ayuda2",
	[],
	"Thank you. I have sinned and the Father must forgive me - I will donate 5000 coins.", "high_septon_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 4999),
			(troop_remove_gold, "trp_player", 5000),
			(call_script, "script_change_player_party_morale", 5),
			(call_script, "script_change_player_honor", 1),
			(call_script, "script_change_troop_renown", "trp_player", 5),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[anyone|plyr, "high_septon_ayuda2",
	[],
	"Thank you, high septon. I want the population of {s60} to love me. I will donate 10000 coins.", "high_septon_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 9999),
			(troop_remove_gold, "trp_player", 10000),
			(call_script, "script_change_player_relation_with_center", "$current_town", 5),
			(call_script, "script_change_player_relation_with_faction_ex", "$g_talk_troop_faction", 5),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[anyone|plyr, "high_septon_ayuda2",
	[],
	"Are you selling forgiveness?", "high_septon_angry",
	[]],

	[anyone|plyr, "high_septon_ayuda2",
	[],
	"Actually, never mind.", "high_septon_pretalk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_drowned_god_1", "trp_aeron_greyjoy")
	],
	"I am a servant of the Drowned God.", "drowned_god_talk",
	[]],

	[anyone, "drowned_god_pretalk",
	[],
	"What is dead may never die, but rises again, harder and stronger.", "drowned_god_talk",
	[]],

	[anyone|plyr, "drowned_god_talk",
	[
		(neg|main_party_has_troop, "$g_talk_troop")
	],
	"The gods are nothing to me. How can you call them good, when they let us toil in this miserable world?", "drowned_god_angry",
	[]],

	[anyone, "drowned_god_angry",
	[],
	"The Drowned God cares not for your doubts, and neither do I.", "close_window",
	[]],

	[anyone|plyr, "drowned_god_talk",
	[],
	"What is dead may never die, but rises again, harder and stronger.", "drowned_god_ayuda",
	[]],

	[anyone|plyr, "drowned_god_talk",
	[],
	"I have not been drowned in the waters of He Who Dwells Beneath the Waves, but perhaps you can teach me of his ways.", "drowned_god_ayuda",
	[]],

	[anyone|plyr, "drowned_god_talk",
	[],
	"I have other matters to attend to.", "close_window",
	[]],

	[anyone, "drowned_god_ayuda",
	[],
	"The Drowned God may hear your prayers if the Drowned Men chant your name close to the sea. If it is your wish, I can make it so. But be warned, the Drowned God is not one of those soft green gods from across the water. If you wish to improve your reputation with the ironborn, to be known as a devout and righteous man, let me drown you in the waters.", "drowned_god_ayuda2",
	[]],

	[anyone|plyr, "drowned_god_ayuda2",
	[],
	"Thank you. Let the name of {playername} be heard echoing in the watery halls beneath the waves.", "drowned_god_pretalk",
	[
		(call_script, "script_change_player_party_morale", 4),
		(call_script, "script_change_player_relation_with_center", "p_town_16", -1),
		(call_script, "script_change_player_relation_with_center", "p_town_32", -1)
	]],

	[anyone|plyr, "drowned_god_ayuda2",
	[],
	"Yes. Let me be drowned in the waves, that I might rise, harder and stronger..", "drowned_god_pretalk",
	[
		(call_script, "script_change_player_relation_with_faction_ex", "fac_kingdom_11", 1),
		(call_script, "script_change_player_relation_with_center", "p_town_16", -1),
		(call_script, "script_change_player_relation_with_center", "p_town_32", -1)
	]],

	[anyone|plyr, "drowned_god_ayuda2",
	[],
	"Actually, never mind.", "drowned_god_pretalk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_aeron_greyjoy", "trp_red_priest_1")
	],
	"I am Aeron Greyjoy, a servant of the Drowned God.", "aeron_greyjoy_talk",
	[]],

	[anyone, "aeron_greyjoy_pretalk",
	[],
	"The Drowned God is the only god. The gods of the green lands are nothing but myths and foolish stories.", "aeron_greyjoy_talk",
	[]],

	[anyone|plyr, "aeron_greyjoy_talk",
	[
		(neg|main_party_has_troop, "$g_talk_troop")
	],
	"The gods are nothing to me. How can you call them good, when they let us toil in this miserable world?", "aeron_greyjoy_angry",
	[]],

	[anyone, "aeron_greyjoy_angry",
	[],
	"You're a godless man. Your doubt will be punished when the Drowned God sees fit to throw you down.", "close_window",
	[]],

	[anyone|plyr, "aeron_greyjoy_talk",
	[],
	"What is dead may never die, but rises, harder and stronger.", "aeron_greyjoy_ayuda",
	[]],

	[anyone|plyr, "aeron_greyjoy_talk",
	[],
	"I have not been drowned in the waters of He Who Dwells Beneath the Waves, but perhaps you can teach me of his ways.", "aeron_greyjoy_ayuda",
	[]],

	[anyone|plyr, "aeron_greyjoy_talk",
	[],
	"I have other matters to attend to.", "close_window",
	[]],

	[anyone, "aeron_greyjoy_ayuda",
	[],
	"Unlike the septons of the green lands, I do not have time for petty disputes or foolish questions. If it is your wish, I will annoint you in the waters of the Drowned Gods domain. Or if you wish to improve your reputation with the ironborn, that you may be known as godly man, I will drown you in the waters of Pyke.", "aeron_greyjoy_ayuda2",
	[]],

	[anyone|plyr, "aeron_greyjoy_ayuda2",
	[],
	"Thank you. Let the Drowned God see my devotion.", "aeron_greyjoy_pretalk",
	[
		(call_script, "script_change_player_party_morale", 4),
		(call_script, "script_change_player_relation_with_center", "p_town_16", -1),
		(call_script, "script_change_player_relation_with_center", "p_town_32", -1)
	]],

	[anyone|plyr, "aeron_greyjoy_ayuda2",
	[],
	"What is dead may never die.", "aeron_greyjoy_pretalk",
	[
		(call_script, "script_change_troop_renown", "trp_player", 5),
		(call_script, "script_change_player_relation_with_center", "p_town_16", -1),
		(call_script, "script_change_player_relation_with_center", "p_town_32", -1)
	]],

	[anyone|plyr, "aeron_greyjoy_ayuda2",
	[],
	"Actually, never mind.", "aeron_greyjoy_pretalk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_red_priest_1", "trp_benerro")
	],
	"The night is dark and full of terrors.", "red_priest_talk",
	[]],

	[anyone, "red_priest_pretalk",
	[],
	"There are no gods but R'hllor and the Other, whose name may not be said.", "red_priest_talk",
	[]],

	[anyone|plyr, "red_priest_talk",
	[
		(neg|main_party_has_troop, "$g_talk_troop")
	],
	"The gods are nothing to me. How can you call them good, when they let us toil in this miserable world?", "red_priest_angry",
	[]],

	[anyone, "red_priest_angry",
	[],
	"We all must choose. Man or woman, young or old, lord or slave, our choices are the same. We choose light or we choose darkness.", "close_window",
	[]],

	[anyone|plyr, "red_priest_talk",
	[],
	"We must pray for the light, that it might defeat the darkness.", "red_priest_ayuda",
	[]],

	[anyone|plyr, "red_priest_talk",
	[],
	"I do not follow R'hllor, but I would like to learn more.", "red_priest_ayuda",
	[]],

	[anyone|plyr, "red_priest_talk",
	[],
	"I have other matters to attend to.", "close_window",
	[]],

	[anyone, "red_priest_ayuda",
	[],
	"Oh, well. I pray for you {playername}, for in the coming fight against the Other, we will surely need every able soul. If it is your wish, I can pray for you and any men sworn to you, and have my followers join me, that the Lord of Light may better hear us. Or if you wish to improve your reputation in this town, to be known as a servant of the light, you might make a large donation to the local temple. The populace of {s60} will surely praise your name.", "red_priest_ayuda2",
	[]],

	[anyone|plyr, "red_priest_ayuda2",
	[],
	"Thank you. Let the Lord of Light deliver us from darkness.", "red_priest_pretalk",
	[
		(call_script, "script_change_player_party_morale", 5),
		(call_script, "script_change_player_relation_with_center", "p_town_16", -1),
		(call_script, "script_change_player_relation_with_center", "p_town_32", -1)
	]],

	[anyone|plyr, "red_priest_ayuda2",
	[],
	"I want the population of {s60} to love me. I will donate 2000 coins.", "red_priest_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 1999),
			(troop_remove_gold, "trp_player", 2000),
			(call_script, "script_change_player_relation_with_center", "$current_town", 1),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[anyone|plyr, "red_priest_ayuda2",
	[],
	"Actually, never mind.", "red_priest_pretalk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_benerro", "trp_sandor")
	],
	"Let the Lord of Light be praised. I am Benerro, the high priest of R'hllor.", "benerro_talk",
	[]],

	[anyone, "benerro_pretalk",
	[],
	"R'hllor guard you, {playername}. What can his humble servant do for you?", "benerro_talk",
	[]],

	[anyone|plyr, "benerro_talk",
	[
		(neg|main_party_has_troop, "$g_talk_troop")
	],
	"The gods are nothing to me. How can you call them good, when they let us toil in this miserable world?", "benerro_angry",
	[]],

	[anyone, "benerro_angry",
	[],
	"We all must choose. Man or woman, young or old, lord or slave, our choices are the same. We choose light or we choose darkness.", "close_window",
	[]],

	[anyone|plyr, "benerro_talk",
	[],
	"We must pray for the light, that it might defeat the darkness.", "benerro_ayuda",
	[]],

	[anyone|plyr, "benerro_talk",
	[],
	"I do not follow R'hllor, but I would like to learn more.", "benerro_ayuda",
	[]],

	[anyone|plyr, "benerro_talk",
	[],
	"I have other matters to attend to.", "close_window",
	[]],

	[anyone, "benerro_ayuda",
	[],
	"The final battle against the darkness draws closer. In the east, Azor Ahai has been reborn, and the minions of the Other come together against her. The day will come when she needs our help, and if you want to help, make a donation to the temple here in Volantis. Or if you wish to improve your reputation in this town, to be known as a servant of the light and a follower of Azor Ahai, you might make a large donation to the temple. The populace of {s60} will surely praise your name.", "benerro_ayuda2",
	[]],

	[anyone|plyr, "benerro_ayuda2",
	[],
	"The night is dark and full of terrors.", "benerro_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 2999),
			(troop_remove_gold, "trp_player", 3000),
			(call_script, "script_change_player_party_morale", 1),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(call_script, "script_change_player_relation_with_center", "p_town_16", -1),
			(call_script, "script_change_player_relation_with_center", "p_town_32", -1),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[anyone|plyr, "benerro_ayuda2",
	[],
	"Thank you, Benerro. I want the population of {s60} to love me. I will donate 10000 coins.", "benerro_pretalk",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 9999),
			(troop_remove_gold, "trp_player", 10000),
			(call_script, "script_change_player_party_morale", 10),
			(call_script, "script_change_troop_renown", "trp_player", 5),
			(call_script, "script_change_player_relation_with_center", "$current_town", 5),
			(call_script, "script_change_player_relation_with_center", "p_town_16", -1),
			(call_script, "script_change_player_relation_with_center", "p_town_32", -1),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[anyone|plyr, "benerro_ayuda2",
	[],
	"Are you selling forgiveness?", "benerro_angry",
	[]],

	[anyone|plyr, "benerro_ayuda2",
	[],
	"Actually, never mind.", "benerro_pretalk",
	[]],

	[trp_sandor, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Mind your manners within the castle, and I won't have to kill you.", "sandor_master_talk",
	[]],

	[plyr|trp_sandor, "sandor_master_talk",
	[],
	"Can you tell me the history of house Clegane?", "sandor_master_customize",
	[]],

	[trp_sandor, "sandor_master_customize",
	[],
	"There's not much to tell. My grandfather saved Lord Tywins father from a lioness, was granted a keep and his son, my father, was taken as a squire. Gregor is the head of the house now.", "sandor_master_talk",
	[]],

	[plyr|trp_sandor, "sandor_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_sandor, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have nothing more to say.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_varys, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hello, my friend. I am Varys, the Master of Whispers.", "varys_introduce_1",
	[]],

	[plyr|trp_varys, "varys_introduce_1",
	[],
	"Greetings.", "varys_introduce_2",
	[]],

	[trp_varys, "varys_introduce_2",
	[],
	"Perhaps you will be able to convince Lord Littlefinger here, that the only sensible thing to do in times of storms is to keep up the illusion of safety and stability, even while your ship is sinking.", "varys_master_talk",
	[]],

	[plyr|trp_varys, "varys_master_talk",
	[],
	"What does the Master of Whispers do?", "varys_master_customize",
	[]],

	[trp_varys, "varys_master_customize",
	[],
	"Oh, nothing much. I mainly keep the king and the small council informed of events in the Free Cities, and procure various... bits of information... related to events in the realm.", "varys_master_talk",
	[]],

	[plyr|trp_varys, "varys_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_varys, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"The king is busy at the moment, and so the small council deals with the minor matters of the realm.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_littlefinger, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Is this not a splendid day at court?", "littlefinger_introduce_1",
	[]],

	[plyr|trp_littlefinger, "littlefinger_introduce_1",
	[],
	"I suppose...", "littlefinger_introduce_2",
	[]],

	[trp_littlefinger, "littlefinger_introduce_2",
	[],
	"Such interesting persons here, and on top of that, lady Stokeworth is sure to invite me to yet another dinner. I see lamprey pies and succulent pigs in my near future.", "littlefinger_introduce_3",
	[]],

	[plyr|trp_littlefinger, "littlefinger_introduce_3",
	[],
	"Yes, it's certainly a day of much promise.", "littlefinger_master_talk",
	[]],

	[plyr|trp_littlefinger, "littlefinger_master_talk",
	[],
	"Can you tell me the history of your house?", "littlefinger_master_customize",
	[]],

	[trp_littlefinger, "littlefinger_master_customize",
	[],
	"Ah! The proud heritage of house Baelish. No, I'd rather not.", "littlefinger_master_talk",
	[]],

	[plyr|trp_littlefinger, "littlefinger_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_littlefinger, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"Chaos is a ladder, wouldn't you say? Many who try to climb it fail, and never get to try again. The fall breaks them. And some, given a chance to climb, they refuse. They cling to the realm, or the gods, or love. Illusions. Only the ladder is real. The climb is all there is. Or so some might say...", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_pycelle, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hail and well met. I am Grand Maester Pycelle.", "pycelle_introduce_1",
	[]],

	[plyr|trp_pycelle, "pycelle_introduce_1",
	[],
	"Greetings. What does the Grand Maester do?", "pycelle_introduce_2",
	[]],

	[trp_pycelle, "pycelle_introduce_2",
	[],
	"I advice the king and the small council in matters of which I am well-versed, and I am also responsible for the health of the royal family.", "pycelle_master_talk",
	[]],

	[plyr|trp_pycelle, "pycelle_master_talk",
	[],
	"Is it true that you've served the Targaryen kings?", "pycelle_master_customize",
	[]],

	[trp_pycelle, "pycelle_master_customize",
	[],
	"What of it?!", "close_window",
	[]],

	[plyr|trp_pycelle, "pycelle_master_talk",
	[],
	"I heard you convinced King Aerys to let in Lord Tywins host? Not very trustworthy, are you?", "pycelle_master_customize2",
	[
		(call_script, "script_change_troop_renown", "trp_player", 5),
		(call_script, "script_change_player_relation_with_center", "p_town_16", 1),
		(call_script, "script_change_player_honor", 1)
	]],

	[trp_pycelle, "pycelle_master_customize2",
	[],
	"Bah! You do not understand the reason! King Robert was the true heir to the Iron Throne!", "close_window",
	[]],

	[trp_pycelle, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I'm a busy man, I do not have time for you.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_lancel, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "lancel_introduce_1",
	[]],

	[plyr|trp_lancel, "lancel_introduce_1",
	[],
	"Greetings. Who are you?", "lancel_introduce_2",
	[]],

	[trp_lancel, "lancel_introduce_2",
	[],
	"I am Ser Lancel Lannister, an annointed knight and I don't have time for you!", "lancel_master_talk",
	[]],

	[plyr|trp_lancel, "lancel_master_talk",
	[],
	"Can you tell me the history of house Lannister?", "lancel_master_customize",
	[]],

	[trp_lancel, "lancel_master_customize",
	[],
	"Eh, I guess. We're descended from Lann the Clever, the legendary warrior from the Age of Legends. He won Casterly Rock from the Casterlys, and us Lannisters have called the Rock our home ever since. Before the conquest, we ruled as Kings of the Rock and since Aegons time, the heads of house Lannister have ruled as Lord Paramounts of the Westerlands, and Wardens of the West.", "lancel_master_talk",
	[]],

	[plyr|trp_lancel, "lancel_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_lancel, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have important matters that require my attention.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_jalabhar, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"I am Jalabhar Xho, rightful Prince of the Red Flower Vale.", "jalabhar_introduce_1",
	[]],

	[plyr|trp_jalabhar, "jalabhar_introduce_1",
	[],
	"Greetings. Where is the Red Flower Vale?", "jalabhar_introduce_2",
	[]],

	[trp_jalabhar, "jalabhar_introduce_2",
	[],
	"Ah, it lies in the Summer Islands. The name is derived from the large red flowers that cover the land.", "jalabhar_introduce_3",
	[]],

	[plyr|trp_jalabhar, "jalabhar_introduce_3",
	[],
	"I see. What are you doing here in Westeros?", "jalabhar_introduce_4",
	[]],

	[trp_jalabhar, "jalabhar_introduce_4",
	[],
	"My treacherous cousin, Xhondo Xho, incited the peasants against me and I had to flee with nothing but my priced galley and treasury! I'm quite convinced he used some vile, dark, sorcery.", "jalabhar_introduce_5",
	[]],

	[plyr|trp_jalabhar, "jalabhar_introduce_5",
	[],
	"Dark sorcery... Yes, I'm sure...", "jalabhar_master_talk",
	[]],

	[plyr|trp_jalabhar, "jalabhar_master_talk",
	[],
	"Can you tell me the history of the Summer Isles?", "jalabhar_master_customize",
	[]],

	[trp_jalabhar, "jalabhar_master_customize",
	[],
	"I'm afraid not. During the Doom, a massive tidal wave hit the islands, and nothing of our history before that is known, except for small bits of legends and some silly stories.", "jalabhar_master_talk",
	[]],

	[plyr|trp_jalabhar, "jalabhar_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_jalabhar, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I'm afraid I have to get going.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_aron_santagar, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hello. I am Ser Aron Santagar.", "aron_santagar_introduce_1",
	[]],

	[plyr|trp_aron_santagar, "aron_santagar_introduce_1",
	[],
	"Greetings. What are you doing at court?", "aron_santagar_introduce_2",
	[]],

	[trp_aron_santagar, "aron_santagar_introduce_2",
	[],
	"I am the Master-of-Arms here in the Red Keep.", "aron_santagar_introduce_3",
	[]],

	[plyr|trp_aron_santagar, "aron_santagar_introduce_3",
	[],
	"I see. So you're in charge of King Joffreys martial training?", "aron_santagar_introduce_4",
	[]],

	[trp_aron_santagar, "aron_santagar_introduce_4",
	[],
	"I guess I am, though the king has not been to see me since he ascended the throne. I'm sure his time is taken up with important matters of state...", "aron_santagar_master_talk",
	[]],

	[plyr|trp_aron_santagar, "aron_santagar_master_talk",
	[],
	"Can you tell me the history of the Red Keep?", "aron_santagar_master_customize",
	[]],

	[trp_aron_santagar, "aron_santagar_master_customize",
	[],
	"When Aegon the Conquerer landed on the shores of Westeros, he built a basic fortress of wood and earth on the hill that now bears his name. After the Conquest, when King's Landing was made the new capital, he laid the foundations for the Red Keep, the seat of House Targaryen, but it was during the reign of his son, Maegor the Cruel, that the castle was finally finished. Maegor had all the stonemasons and builders, who had worked on the keep, executed after the work was done, so that only the Targaryen kings might know all the secrets of the castle.", "aron_santagar_master_talk",
	[]],

	[plyr|trp_aron_santagar, "aron_santagar_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_aron_santagar, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have to go oversee the training of some of our new squires, excuse me.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_tommen, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hello!", "tommen_introduce_2",
	[]],

	[trp_tommen, "tommen_introduce_2",
	[],
	"If I where the king, I'd outlaw beets!", "close_window",
	[]],

	[trp_tommen, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have to go! That black cat is skulking around here somewhere!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_myrcella, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Mother says a princess has to be courteous, but also aware that she is above everyone else", "close_window",
	[]],

	[trp_myrcella, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have to go and find Tommen. He's talking about that black cat again, I have to make sure he does not hurt himself trying to catch it.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_sansa, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "sansa_introduce_1",
	[]],

	[plyr|trp_sansa, "sansa_introduce_1",
	[],
	"My lady, may I know more about you?", "sansa_introduce_2",
	[]],

	[trp_sansa, "sansa_introduce_2",
	[],
	"I am Sansa Stark, Lord Eddards daughter.", "close_window",
	[]],

	[trp_sansa, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"Excuse me.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_jor_the_keeper, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "jor_the_keeper_introduce_1",
	[]],

	[plyr|trp_jor_the_keeper, "jor_the_keeper_introduce_1",
	[],
	"What is this place?", "jor_the_keeper_introduce_2",
	[]],

	[trp_jor_the_keeper, "jor_the_keeper_introduce_2",
	[],
	"This is Nagga's Hill, the site of the Grey King's Hall.", "jor_the_keeper_master_talk",
	[]],

	[plyr|trp_jor_the_keeper, "jor_the_keeper_master_talk",
	[],
	"Can you tell me more about Nagga's Hill?", "jor_the_keeper_master_customize",
	[]],

	[trp_jor_the_keeper, "jor_the_keeper_master_customize",
	[],
	"According to ironborn legend, Nagga was the first sea dragon, able to feed on krakens and leviathans and drown islands when angry. The Grey King, helped by the Drowned God, managed to slay her on the shores of the island of Old Wyk and built his hall out of her bones. Her jaws became his throne and her teeth made his crown. He warmed his hall with her living fire. However, when the Grey King died, the Storm God drowned out her fire and the sea took the throne. Only her bones that made the pillars and beams remain", "jor_the_keeper_master_talk",
	[]],

	[plyr|trp_jor_the_keeper, "jor_the_keeper_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_jor_the_keeper, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Excuse me, {playername}, I have to drown a man.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_maege_mormont, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "maege_mormont_introduce_1",
	[]],

	[plyr|trp_maege_mormont, "maege_mormont_introduce_1",
	[],
	"My lady, can you tell me about Bear Island?", "maege_mormont_introduce_2",
	[]],

	[trp_maege_mormont, "maege_mormont_introduce_2",
	[],
	"Our lands are mostly inhabited by crofters. We have plenty of pines and the seas are full of fish and seals. And the forests are full of big, black, bears, heh.", "maege_mormont_master_talk",
	[
		(remove_troop_from_site, "trp_npc23", "scn_bear_island")
	]],

	[plyr|trp_maege_mormont, "maege_mormont_master_talk",
	[],
	"Can you tell me about House Mormont?", "maege_mormont_master_customize",
	[]],

	[trp_maege_mormont, "maege_mormont_master_customize",
	[],
	"Bear Island was ruled by House Woodfoot prior to its conquest by the ironborn. House Hoare, which ruled the Iron Islands at the time, added a green tree in the second quarter of their sigil as a reference to their possession of Bear Island. The island returned to the North during the reign of Rodrik Stark, supposedly as a result of a wrestling match. Rodrik then gave the island to House Mormont. In days past, the ironmen, or wildlings from the Frozen Shore, would raid Bear Island and the men would be fishing out to sea. The women would defend the island while the men were away. As a result, us women have always learned to handle both axe and babe.", "maege_mormont_master_talk",
	[]],

	[plyr|trp_maege_mormont, "maege_mormont_master_talk",
	[],
	"Goodbye, my lady.", "close_window",
	[]],

	[trp_maege_mormont, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Excuse me, {playername}.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_lyra_mormont, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "lyra_mormont_introduce_1",
	[]],

	[plyr|trp_lyra_mormont, "lyra_mormont_introduce_1",
	[],
	"My lady, may I know more about you?", "lyra_mormont_introduce_2",
	[]],

	[trp_lyra_mormont, "lyra_mormont_introduce_2",
	[],
	"I am Lyra Mormont. Have you heard about the giants? Lyanna has been telling me about them!", "close_window",
	[]],

	[trp_lyra_mormont, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I have to go, and practice with my bow!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_jorelle_mormont, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "jorelle_mormont_introduce_1",
	[]],

	[plyr|trp_jorelle_mormont, "jorelle_mormont_introduce_1",
	[],
	"My lady, may I know more about you?", "jorelle_mormont_introduce_2",
	[]],

	[trp_jorelle_mormont, "jorelle_mormont_introduce_2",
	[],
	"I'm Jorelle! Lyanna has been telling us about the giants, and singing about them!", "close_window",
	[]],

	[trp_jorelle_mormont, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I have to go! The guards said they saw a bear skulking along outside the battlements!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_lyanna_mormont, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "lyanna_mormont_introduce_1",
	[]],

	[plyr|trp_lyanna_mormont, "lyanna_mormont_introduce_1",
	[],
	"Greetings, my lady. May I know more about you?", "lyanna_mormont_introduce_2",
	[]],

	[trp_lyanna_mormont, "lyanna_mormont_introduce_2",
	[],
	"I am Lyanna Stark. Have you ever been to Winterfell? Mother says she might take us there one day.", "lyanna_mormont_master_talk",
	[]],

	[plyr|trp_lyanna_mormont, "lyanna_mormont_master_talk",
	[],
	"Can you tell me about the giants?", "lyanna_mormont_master_customize",
	[]],

	[trp_lyanna_mormont, "lyanna_mormont_master_customize",
	[],
	"I dreamt about them. A voice was singing from a tree, and then a I heard a whisper in the winds. It said 'The giants are almost gone as well, they who were our bane and our brothers'. Mother says it was just a dream, but I often dream of the trees, and in my dreams, every one of them has a raven on top of it.", "lyanna_mormont_master_talk",
	[]],

	[plyr|trp_lyanna_mormont, "lyanna_mormont_master_talk",
	[],
	"Thank you for your time, my lady.", "close_window",
	[]],

	[trp_lyanna_mormont, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I'm afraid I have to get going. Jorelle and I are going to see the bear.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_edgar_the_seal, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "edgar_the_seal_introduce_1",
	[]],

	[plyr|trp_edgar_the_seal, "edgar_the_seal_introduce_1",
	[],
	"What are you doing?", "edgar_the_seal_introduce_2",
	[]],

	[trp_edgar_the_seal, "edgar_the_seal_introduce_2",
	[],
	"I'm on guard duty, what does it look like?", "close_window",
	[]],

	[trp_edgar_the_seal, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"We're not allowed to talk while on guard.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_benfred_the_guard, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "benfred_the_guard_introduce_1",
	[]],

	[plyr|trp_benfred_the_guard, "benfred_the_guard_introduce_1",
	[],
	"What are you doing?", "benfred_the_guard_introduce_2",
	[]],

	[trp_benfred_the_guard, "benfred_the_guard_introduce_2",
	[],
	"I'm on guard duty. It's usually boring, but we did see a huge black bear a couple of days ago. Jorelle has taken to calling it Jeor.", "close_window",
	[]],

	[trp_benfred_the_guard, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"We're not allowed to talk while on guard.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_rognok_the_guard, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "rognok_the_guard_introduce_1",
	[]],

	[plyr|trp_rognok_the_guard, "rognok_the_guard_introduce_1",
	[],
	"What are you doing?", "rognok_the_guard_introduce_2",
	[]],

	[trp_rognok_the_guard, "rognok_the_guard_introduce_2",
	[],
	"I'm on guard duty. Getting off soon, I hope.", "close_window",
	[]],

	[trp_rognok_the_guard, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"We're not allowed to talk while on guard.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_shireen, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Maester Pylos says I have to learn my letters, because I'll sit on the Iron Throne one day.", "close_window",
	[]],

	[trp_shireen, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"Patches and I are going to look for amber on the beach!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_lommy, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"We must be close to the Wall now, we've been travelling for days!", "close_window",
	[]],

	[trp_lommy, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I heard Yoren talk about the Wall, it must be because we're close.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_hot_pie, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"When we get to the Wall, I'll talk to the knights.", "close_window",
	[]],

	[trp_hot_pie, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Do you know where the Wall is?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_gendry, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What do you want?", "close_window",
	[]],

	[trp_gendry, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Stop bothering me.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_arya, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What do you want?", "close_window",
	[]],

	[trp_arya, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Go away, or I'll hit you!", "close_window",
	[
		(remove_troop_from_site, "trp_lommy", "scn_harrentown"),
		(remove_troop_from_site, "trp_hot_pie", "scn_harrentown"),
		(remove_troop_from_site, "trp_gendry", "scn_harrentown"),
		(remove_troop_from_site, "trp_arya", "scn_harrentown"),
		(remove_troop_from_site, "trp_koss", "scn_harrentown"),
		(remove_troop_from_site, "trp_kurz", "scn_harrentown"),
		(remove_troop_from_site, "trp_cutjack", "scn_harrentown"),
		(remove_troop_from_site, "trp_rorge", "scn_harrentown"),
		(remove_troop_from_site, "trp_biter", "scn_harrentown"),
		(remove_troop_from_site, "trp_jaqen", "scn_harrentown"),
		(remove_troop_from_site, "trp_yoren", "scn_harrentown"),
		(remove_troop_from_site, "trp_reysen", "scn_harrentown"),
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_cutjack, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What do you want?", "close_window",
	[]],

	[trp_cutjack, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Go away.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_koss, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Heard it's cold up north.", "close_window",
	[]],

	[trp_koss, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Gonna be pissing ice water when we reach the Wall.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_kurz, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Plenty of game in these woods, if you know where to look.", "close_window",
	[]],

	[trp_kurz, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Never been north before.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_reysen, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What?", "close_window",
	[]],

	[trp_reysen, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Bugger off.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_jaqen, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"A man sees a stranger.", "jaqen_introduce_1",
	[]],

	[plyr|trp_jaqen, "jaqen_introduce_1",
	[],
	"Who are you?", "jaqen_introduce_2",
	[]],

	[trp_jaqen, "jaqen_introduce_2",
	[],
	"A man is Jaqen H'ghar. And that is all a man will say.", "close_window",
	[]],

	[trp_jaqen, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"...", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_rorge, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Fuck off, or I'll knock your teeth out!", "close_window",
	[]],

	[trp_rorge, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Piss off!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_biter, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hiss!", "close_window",
	[]],

	[trp_biter, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Hiss!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_yoren, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What?", "yoren_introduce_1",
	[]],

	[plyr|trp_yoren, "yoren_introduce_1",
	[],
	"I am {playername}.", "yoren_introduce_2",
	[]],

	[trp_yoren, "yoren_introduce_2",
	[],
	"Good for you.", "yoren_introduce_3",
	[]],

	[plyr|trp_yoren, "yoren_introduce_3",
	[],
	"Hmm, yes... What are you people doing here?", "yoren_introduce_4",
	[]],

	[trp_yoren, "yoren_introduce_4",
	[],
	"On our way to the Wall, to join the Night's Watch.", "yoren_master_talk",
	[]],

	[plyr|trp_yoren, "yoren_master_talk",
	[],
	"Can you tell me about the Night's Watch?", "yoren_master_customize",
	[]],

	[trp_yoren, "yoren_master_customize",
	[],
	"Our order is the oldest in all of Westeros. We guard the Wall against the dangers that lurk beyond.", "yoren_master_talk",
	[]],

	[plyr|trp_yoren, "yoren_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_yoren, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"We're packing up camp. Too many soldiers in these parts.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_mandon_moore, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"You're in the presence of the her Grace, the Queen Regent. Do not make trouble.", "mandon_moore_introduce_1",
	[]],

	[plyr|trp_mandon_moore, "mandon_moore_introduce_1",
	[],
	"I won't.", "mandon_moore_introduce_2",
	[]],

	[trp_mandon_moore, "mandon_moore_introduce_2",
	[],
	"Good.", "close_window",
	[]],

	[trp_mandon_moore, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"The Queen Regent is busy. Do not disturb her.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_joy_hill, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "joy_hill_introduce_1",
	[]],

	[plyr|trp_joy_hill, "joy_hill_introduce_1",
	[],
	"Hello my lady, might I have the pleasure of knowing whom you are?", "joy_hill_introduce_2",
	[]],

	[trp_joy_hill, "joy_hill_introduce_2",
	[],
	"I'm Joy Hill, the natural born daughter of Gerion Lannister. Uncle Tywin allows me to live here in Casterly Rock.", "joy_hill_master_talk",
	[]],

	[plyr|trp_joy_hill, "joy_hill_master_talk",
	[],
	"Can you tell me more about Tywin Lannister?", "joy_hill_master_customize",
	[]],

	[trp_joy_hill, "joy_hill_master_customize",
	[],
	"He's the Lord Paramount of the Westerlands and the Hand of the King. In his youth, he destroyed the rebellious houses of Reyne and Tarbeck. I'm sure you've heard the song that singer made, The Rains of Castamere.", "joy_hill_master_customize1",
	[]],

	[trp_joy_hill, "joy_hill_master_customize1",
	[],
	"Aunt Genna says she saw him smile that day. I would have liked to see that. Most people are afraid of uncle Tywin, but he's always been kind to me, especially after father disappeared. He once brought me an emerald that belonged to Princess Rhaenyra, the Targaryen princess who was the mother of Aegon Dragonbane.", "joy_hill_master_customize2",
	[]],

	[trp_joy_hill, "joy_hill_master_customize2",
	[],
	"Aunt Genna has told me that he's looking for a trueborn heir for me to marry... I'd be content just living here for the rest of my life, I miss cousin Jaime and cousin Tyrion, they where always nice to me.", "joy_hill_master_talk",
	[]],

	[plyr|trp_joy_hill, "joy_hill_master_talk",
	[],
	"I'm sure you'll marry a very nice man, my lady.", "close_window",
	[]],

	[trp_joy_hill, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"Don't let me bother you. Aunt Genna says I have to be less conspicuous.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_creylen, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "creylen_introduce_1",
	[]],

	[plyr|trp_creylen, "creylen_introduce_1",
	[],
	"Greetings. May I know who you are?", "creylen_introduce_2",
	[]],

	[trp_creylen, "creylen_introduce_2",
	[],
	"I am Maester Creylen, a servant of house Lannister.", "creylen_master_talk",
	[]],

	[plyr|trp_creylen, "creylen_master_talk",
	[],
	"Can you tell me about Casterly Rock?", "creylen_master_customize",
	[]],

	[trp_creylen, "creylen_master_customize",
	[],
	"According to legend, Casterly Rock was built by the Casterlys. During the Age of Heroes, Lann the Clever tricked them out of their castle, and claimed it for his own. It was the seat of the Kings of the Rock until the conquest, and remained the seat of the Wardens of the West. During the Blackfyre Rebellion, lord Leo Lefford was slain by Quentyn Ball outside the gates of Lannisport, who then proceeded to besiege the Rock. When the Grey Lion came out to challenge him, he was forced back inside, but Quentyn Ball was unable to take the castle.", "creylen_master_talk",
	[]],

	[plyr|trp_creylen, "creylen_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_creylen, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"Excuse me, {playername}, I have to attend to the ravens.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_benedict_broom, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "benedict_broom_introduce_1",
	[]],

	[plyr|trp_benedict_broom, "benedict_broom_introduce_1",
	[],
	"Greetings. Who are you?", "benedict_broom_introduce_2",
	[]],

	[trp_benedict_broom, "benedict_broom_introduce_2",
	[],
	"I am Ser Benedict Broom, the master-at-arms of Casterly Rock.", "benedict_broom_master_talk",
	[]],

	[plyr|trp_benedict_broom, "benedict_broom_master_talk",
	[],
	"Can you tell me about the Westerlands?", "benedict_broom_master_customize",
	[]],

	[trp_benedict_broom, "benedict_broom_master_customize",
	[],
	"I guess. The Westerlands is one of the regions of the Seven Kingdoms, ruled by house Lannister. It borders the Reach, the Riverlands and the Crownlands. While a fairly small region, compared to the North and the Reach, it is home of the richest gold and silver mines in Westeros, making the Westerlands the undisputedly richest region of the Seven Kingdoms.", "benedict_broom_master_talk",
	[]],

	[plyr|trp_benedict_broom, "benedict_broom_master_talk",
	[],
	"Thank you for your time.", "close_window",
	[]],

	[trp_benedict_broom, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I'm afraid I have to get going. I have to drill the squires.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_whitesmile_wat, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "whitesmile_wat_introduce_1",
	[]],

	[plyr|trp_whitesmile_wat, "whitesmile_wat_introduce_1",
	[],
	"Hello. Are you the court singer?", "whitesmile_wat_introduce_2",
	[]],

	[trp_whitesmile_wat, "whitesmile_wat_introduce_2",
	[],
	"I guess I am! I'm the only singer at court, at least!", "whitesmile_wat_master_talk",
	[]],

	[plyr|trp_whitesmile_wat, "whitesmile_wat_master_talk",
	[],
	"Can you sing me a song?", "whitesmile_wat_master_customize",
	[]],

	[trp_whitesmile_wat, "whitesmile_wat_master_customize",
	[],
	"Of course! Let me get my harp!", "whitesmile_wat_master_customize1",
	[]],

	[trp_whitesmile_wat, "whitesmile_wat_master_customize1",
	[],
	"Gentle Mother, font of mercy, save our sons from war, we pray. Stay the swords and stay the arrows, let them know a better day.", "whitesmile_wat_master_customize2",
	[]],

	[trp_whitesmile_wat, "whitesmile_wat_master_customize2",
	[],
	"Gentle Mother, strength of women, help our daughters through this fray. Soothe the wrath and tame the fury, teach us all a kinder way.!", "whitesmile_wat_master_customize3",
	[]],

	[trp_whitesmile_wat, "whitesmile_wat_master_customize3",
	[],
	"Gentle Mother, font of mercy, save our sons from war, we pray. Stay the swords and stay the arrows, let them know a better day.", "whitesmile_wat_master_talk1",
	[]],

	[plyr|trp_whitesmile_wat, "whitesmile_wat_master_talk1",
	[],
	"That was excellent. Here, have some coin for your trouble.", "close_window",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":troop_gold_player", 49),
			(troop_remove_gold, "trp_player", 50),
			(call_script, "script_change_player_honor", 1),
		(else_try),
			(display_message, "str_money"),
		(try_end)
	]],

	[plyr|trp_whitesmile_wat, "whitesmile_wat_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_whitesmile_wat, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I'm afraid I have to attend to the lady Genna now. She is not one to be kept waiting.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_rolph_spicer, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"I'm busy, state your business.", "rolph_spicer_introduce_1",
	[]],

	[plyr|trp_rolph_spicer, "rolph_spicer_introduce_1",
	[],
	"Greetings. Are you the castellan?", "rolph_spicer_introduce_2",
	[]],

	[trp_rolph_spicer, "rolph_spicer_introduce_2",
	[],
	"Indeed I am. Ser Rolph Spicer, and don't you forget it.", "rolph_spicer_master_talk",
	[]],

	[plyr|trp_rolph_spicer, "rolph_spicer_master_talk",
	[],
	"Can you tell me the history of house Westerling?", "rolph_spicer_master_customize",
	[]],

	[trp_rolph_spicer, "rolph_spicer_master_customize",
	[],
	"I suppose. The Westerlings are an ancient house, they can trace their ancestry to the Age of Heroes, and Maegor Targaryen, the one they named 'the Cruel', married a Westerling. However, truth be told, the Westerlings are not as prominent as they once where.", "rolph_spicer_master_talk",
	[]],

	[plyr|trp_rolph_spicer, "rolph_spicer_master_talk",
	[],
	"Thank you for your time.", "close_window",
	[]],

	[trp_rolph_spicer, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have important matters that require my attention.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_rufus_leek, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "rufus_leek_introduce_1",
	[]],

	[plyr|trp_rufus_leek, "rufus_leek_introduce_1",
	[],
	"Greetings. Who are you?", "rufus_leek_introduce_2",
	[]],

	[trp_rufus_leek, "rufus_leek_introduce_2",
	[],
	"I am Ser Rufus Leek, the castellan of the Dun Fort, the keep overlooking Duskendale.", "rufus_leek_master_talk",
	[]],

	[plyr|trp_rufus_leek, "rufus_leek_master_talk",
	[],
	"Can you tell me about Duskendale?", "rufus_leek_master_customize",
	[]],

	[trp_rufus_leek, "rufus_leek_master_customize",
	[],
	"It used to be ruled by house Darklyn, an ancient house that traced its lineage to the Age of Heroes, during which they had been petty kings. Under the Targaryen kings, the town served as one of the trading stops for ships going to the Vale and Braavos. The reign of the Darklyns ended with the Defiance though...", "rufus_leek_master_customize1",
	[]],

	[trp_rufus_leek, "rufus_leek_master_customize1",
	[],
	"Lord Denys had married a seductress from the Free Cities. It is said that she filled her husbands ear with the poison that eventually led to his rebellion against the Targaryens, over something as foolish as a new town charter. When the Mad King came to handle the affair himself, Lord Denys imprisoned him in the Dun Fort.", "rufus_leek_master_customize2",
	[]],

	[trp_rufus_leek, "rufus_leek_master_customize2",
	[],
	"Lord Tywin, then Hand of the King to Aerys, descended upon the town with a mighty host, but lord Denys threatened to hang the king if lord Tywin tried to storm the walls. In the end, Barristan the Bold managed to sneak into the town and bring out the king, killing Ser Symon Hollard in the process.", "rufus_leek_master_customize3",
	[]],

	[trp_rufus_leek, "rufus_leek_master_customize3",
	[],
	"With his hostage gone, lord Denys opened his gates and begged for forgiveness. It did him no good. He, and his entire family, was executed. The lady Serala, who was said to have been the cause of the misery, was burned alive, but not before she had her tongue and female parts torn out with hot pincers, the very parts which with she was said to have enslaved her husband.", "rufus_leek_master_customize4",
	[]],

	[plyr|trp_rufus_leek, "rufus_leek_master_customize4",
	[],
	"What a horrifying tale!", "rufus_leek_master_talk",
	[]],

	[plyr|trp_rufus_leek, "rufus_leek_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_rufus_leek, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I'm afraid I have no time to talk, with all the commotion going on in the city.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_genna_lannister, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "genna_lannister_introduce_1",
	[]],

	[plyr|trp_genna_lannister, "genna_lannister_introduce_1",
	[],
	"Greetings, my lady. May I have the honor of knowing whom I am adressing?", "genna_lannister_introduce_2",
	[]],

	[trp_genna_lannister, "genna_lannister_introduce_2",
	[],
	"I'm the lady Genna Lannister, and this thin stick of a man is my husband, Emmon.", "genna_lannister_master_talk",
	[]],

	[plyr|trp_genna_lannister, "genna_lannister_master_talk",
	[],
	"My lady, it is an honor. Your beauty is known throughout the land!", "genna_lannister_master_customize",
	[]],

	[trp_genna_lannister, "genna_lannister_master_customize",
	[],
	"Hmph! A flatterer, are you? Well, nevermind, I suppose flattery serves it purpose, if you're too cowardly to tell the truth.", "genna_lannister_master_customize1",
	[]],

	[plyr|trp_genna_lannister, "genna_lannister_master_customize1",
	[],
	"But surely always telling the truth is the mark of a fool, when the person one is adressing is the younger sister of Tywin Lannister.", "genna_lannister_master_customize2",
	[]],

	[trp_genna_lannister, "genna_lannister_master_customize2",
	[],
	"Hah! Oh very well, {playername} I thank you for you compliment.", "close_window",
	[]],

	[plyr|trp_genna_lannister, "genna_lannister_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_genna_lannister, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I'm afraid I have no time to talk, I have to make sure Joy does not annoy Septon Umfred.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_emmon_frey, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What is it?", "emmon_frey_introduce_1",
	[]],

	[plyr|trp_emmon_frey, "emmon_frey_introduce_1",
	[],
	"Greetings, I am {playername}. Are you Ser Emmon?", "emmon_frey_introduce_2",
	[]],

	[trp_emmon_frey, "emmon_frey_introduce_2",
	[],
	"I am. Ser Emmon Frey, second trueborn son of Walder Frey, Lord of the Crossing.", "emmon_frey_master_talk",
	[]],

	[plyr|trp_emmon_frey, "emmon_frey_master_talk",
	[],
	"What are you doing here at Casterly Rock? I thought the Freys had sworn their allegiance to Robb Stark?", "emmon_frey_master_customize",
	[]],

	[trp_emmon_frey, "emmon_frey_master_customize",
	[],
	"Hmph! Vile lies, all of them. My father would never join with a traitor. It's all just rumors. Any day now, word will reach us that my fathers men have joined Tywins host.", "emmon_frey_master_customize1",
	[]],

	[plyr|trp_emmon_frey, "emmon_frey_master_customize1",
	[],
	"Yes, I'm sure... a man such as Walder Frey would never join the winning side, or wait out the result in order to ingratiate himself with the victors...", "emmon_frey_master_customize2",
	[
		(call_script, "script_change_player_honor", 2)
	]],

	[trp_emmon_frey, "emmon_frey_master_customize2",
	[],
	"Yes! You're quite right! My father is an honorable man!", "close_window",
	[]],

	[plyr|trp_emmon_frey, "emmon_frey_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_emmon_frey, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have no time to talk, my wife is requiring my attention.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_polliver, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "polliver_introduce_1",
	[]],

	[plyr|trp_polliver, "polliver_introduce_1",
	[],
	"Who are you?", "polliver_introduce_2",
	[]],

	[trp_polliver, "polliver_introduce_2",
	[],
	"I'm Polliver, one of Ser Gregors men.", "close_window",
	[]],

	[trp_polliver, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_addam_grafton, "start",
	[],
	"Yes?", "chiswyck_introduce_1",
	[]],

	[plyr|trp_addam_grafton, "chiswyck_introduce_1",
	[],
	"Who are you?", "chiswyck_introduce_2",
	[]],

	[trp_addam_grafton, "chiswyck_introduce_2",
	[],
	"Addam Grafton, at your service.", "close_window",
	[]],

	[trp_addam_grafton, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_ninestars_guardsman_1, "start",
	[],
	"We're not supposed to talk while on guard.", "close_window",
	[]],

	[trp_ninestars_guardsman_1, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_ninestars_guardsman_2, "start",
	[],
	"We're not supposed to talk while on guard.", "close_window",
	[]],

	[trp_ninestars_guardsman_2, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_jeffory_gaunt, "start",
	[],
	"Yes?", "chiswyck_introduce_1",
	[]],

	[plyr|trp_jeffory_gaunt, "chiswyck_introduce_1",
	[],
	"Who are you?", "chiswyck_introduce_2",
	[]],

	[trp_jeffory_gaunt, "chiswyck_introduce_2",
	[],
	"SER Gwayne Gaunt, of House Gaunt! We're a proud house, with a long and illustrious history! Why, my cousin, thrice-removed, was the nephew of Ser Gwayne Gaunt, of the kingsguard!", "close_window",
	[]],

	[trp_jeffory_gaunt, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_josmyn_gaunt, "start",
	[],
	"Yes?", "chiswyck_introduce_1",
	[]],

	[plyr|trp_josmyn_gaunt, "chiswyck_introduce_1",
	[],
	"Who are you?", "chiswyck_introduce_2",
	[]],

	[trp_josmyn_gaunt, "chiswyck_introduce_2",
	[],
	"Name's Josmyn. Don't mind Jeffory, he's too proud to mingle with the likes of us. Brothers, bah!", "close_window",
	[]],

	[trp_josmyn_gaunt, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_manfred_rollingford, "start",
	[],
	"Yes?", "chiswyck_introduce_1",
	[]],

	[plyr|trp_manfred_rollingford, "chiswyck_introduce_1",
	[],
	"Who are you?", "chiswyck_introduce_2",
	[]],

	[trp_manfred_rollingford, "chiswyck_introduce_2",
	[],
	"Never you mind.", "close_window",
	[]],

	[trp_manfred_rollingford, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_omer_chyttering, "start",
	[],
	"Yes?", "chiswyck_introduce_1",
	[]],

	[plyr|trp_omer_chyttering, "chiswyck_introduce_1",
	[],
	"Who are you?", "chiswyck_introduce_2",
	[]],

	[trp_omer_chyttering, "chiswyck_introduce_2",
	[],
	"I am Ser Omer Chyttering. Ser Arreck knighted me last night, this is my first real tourney! So exciting, isn't it?", "close_window",
	[]],

	[trp_omer_chyttering, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_chiswyck, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "chiswyck_introduce_1",
	[]],

	[plyr|trp_chiswyck, "chiswyck_introduce_1",
	[],
	"Who are you?", "chiswyck_introduce_2",
	[]],

	[trp_chiswyck, "chiswyck_introduce_2",
	[],
	"I'm Chiswyck, one of the Mountains men. Have you ever heard what he did to the innkeepers daughter? We where on our way home from the Tourney of the Hand, when we stopped at an alehouse. Ser took a liking to the innkeepers daughter, and had her right there on the table! Hah! She cried the whole time, but her father was too frightened to do anything about it. We all had her, she was raw and bloody in the end, hah! Paid her a pretty copper for her service as well, heh.", "close_window",
	[]],

	[trp_chiswyck, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_rafford, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "rafford_introduce_1",
	[]],

	[plyr|trp_rafford, "rafford_introduce_1",
	[],
	"Who are you?", "rafford_introduce_2",
	[]],

	[trp_rafford, "rafford_introduce_2",
	[],
	"I'm Rafford.", "close_window",
	[]],

	[trp_rafford, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_dunsen, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "dunsen_introduce_1",
	[]],

	[plyr|trp_dunsen, "dunsen_introduce_1",
	[],
	"Who are you?", "dunsen_introduce_2",
	[]],

	[trp_dunsen, "dunsen_introduce_2",
	[],
	"I'm Dunsen.", "close_window",
	[]],

	[trp_dunsen, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_tickler, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "tickler_introduce_1",
	[]],

	[plyr|trp_tickler, "tickler_introduce_1",
	[],
	"Who are you?", "tickler_introduce_2",
	[]],

	[trp_tickler, "tickler_introduce_2",
	[],
	"I'm the Tickler. I tickle people until they tell me what I want to know. Have you seen Dondarrions band by the way?", "close_window",
	[]],

	[trp_tickler, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_aurane, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "aurane_introduce_1",
	[]],

	[plyr|trp_aurane, "aurane_introduce_1",
	[],
	"Who are you?", "aurane_introduce_2",
	[]],

	[trp_aurane, "aurane_introduce_2",
	[],
	"I'm Aurane Waters, natural born son of Lord Monford Velaryon.", "close_window",
	[]],

	[trp_aurane, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_jurne, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes, my friend?", "jurne_introduce_1",
	[]],

	[plyr|trp_jurne, "jurne_introduce_1",
	[],
	"Greetings. Who are you?", "jurne_introduce_2",
	[]],

	[trp_jurne, "jurne_introduce_2",
	[],
	"I'm Maester Jurne, sworn to Storm's End and his Grace, King Renly.", "jurne_master_talk",
	[]],

	[plyr|trp_jurne, "jurne_master_talk",
	[],
	"Can you tell me about Storm's End?", "jurne_master_customize",
	[]],

	[trp_jurne, "jurne_master_customize",
	[],
	"Legend claims that it was built by Durran, the first Storm King during the Dawn Age, who declared a war against the gods after they killed his family and guests, ruining his wedding to their daughter Elenei.", "jurne_master_customize1",
	[]],

	[trp_jurne, "jurne_master_customize1",
	[],
	" It was said that he raised six each larger and more formidable until he raised Storm's End. Some believe this was because the children of the forest took a hand in its construction, using their magics in the raising the castle walls allowing it to resist the storms.", "jurne_master_customize2",
	[]],

	[trp_jurne, "jurne_master_customize2",
	[],
	"Others believe that a young boy who grew up to be Bran the Builder advised Durran on its construction. The truth of the matter is unknown.", "jurne_master_talk",
	[]],

	[plyr|trp_jurne, "jurne_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_jurne, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I'm afraid I have to go take care of the ravens.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_colen, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "colen_introduce_1",
	[]],

	[plyr|trp_colen, "colen_introduce_1",
	[],
	"Who are you?", "colen_introduce_2",
	[]],

	[trp_colen, "colen_introduce_2",
	[],
	"I'm Ser Colen of Greenpools, sworn to King Renly.", "close_window",
	[]],

	[trp_colen, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_jommy, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "jommy_introduce_1",
	[]],

	[plyr|trp_jommy, "jommy_introduce_1",
	[],
	"Who are you?", "jommy_introduce_2",
	[]],

	[trp_jommy, "jommy_introduce_2",
	[],
	"I'm Jommy. I'm not supposed to talk while on guard.", "close_window",
	[]],

	[trp_jommy, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_nysterica, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "nysterica_introduce_1",
	[]],

	[plyr|trp_nysterica, "nysterica_introduce_1",
	[],
	"Who are you?", "nysterica_introduce_2",
	[]],

	[trp_nysterica, "nysterica_introduce_2",
	[],
	"I'm septa Nysterica", "close_window",
	[]],

	[trp_nysterica, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"Pray, excuse me.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_lomys, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "lomys_introduce_1",
	[]],

	[plyr|trp_lomys, "lomys_introduce_1",
	[],
	"Who are you?", "lomys_introduce_2",
	[]],

	[trp_lomys, "lomys_introduce_2",
	[],
	"I'm Maester Lomys, sworn to Highgarden and house Tyrell.", "close_window",
	[]],

	[trp_lomys, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"Excuse me.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_olenna, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What is it?", "olenna_introduce_1",
	[]],

	[plyr|trp_olenna, "olenna_introduce_1",
	[],
	"Greetings, my lady. Might I have the honor of knowing more about you?", "olenna_introduce_2",
	[]],

	[trp_olenna, "olenna_introduce_2",
	[],
	"I'm the lady Olenna Tyrell, mother to Lord Puff Fish, the Oaf of Highgarden.", "olenna_master_talk",
	[]],

	[plyr|trp_olenna, "olenna_master_talk",
	[],
	"My lady, excuse me. I must have missheard you?", "olenna_master_customize",
	[]],

	[trp_olenna, "olenna_master_customize",
	[],
	"Bah! You heard me well, {playername}, but your courtesies make you act like a fool in motley.", "olenna_master_customize1",
	[]],

	[trp_olenna, "olenna_master_customize1",
	[],
	"This whole business of king-making is foolishness to the core. My oaf of a son ought to remember what happened to Criston Cole, the one they called 'Kingmaker'. What a nickname! May aswell call a murderer 'the Manslayer'. ", "olenna_master_customize2",
	[]],

	[trp_olenna, "olenna_master_customize2",
	[],
	"Anyhow, the egg has been laid, and there's no way to put it back in the hen. I suppose you could force it back up there, but what sort of analogy would that be.", "olenna_master_talk",
	[]],

	[plyr|trp_olenna, "olenna_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_olenna, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I'm afraid I'm much too frail to continue our talks.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_galyeon, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "galyeon_introduce_1",
	[]],

	[plyr|trp_galyeon, "galyeon_introduce_1",
	[],
	"Who are you?", "galyeon_introduce_2",
	[]],

	[trp_galyeon, "galyeon_introduce_2",
	[],
	"I'm Galyeon of Cuy, the famous singer!", "close_window",
	[]],

	[trp_galyeon, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_ballabar, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "ballabar_introduce_1",
	[]],

	[plyr|trp_ballabar, "ballabar_introduce_1",
	[],
	"Who are you?", "ballabar_introduce_2",
	[]],

	[trp_ballabar, "ballabar_introduce_2",
	[],
	"I'm Maester Ballabar, sworn to the Arbor and house Redwyne.", "close_window",
	[]],

	[trp_ballabar, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_moryn, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "moryn_introduce_1",
	[]],

	[plyr|trp_moryn, "moryn_introduce_1",
	[],
	"Who are you?", "moryn_introduce_2",
	[]],

	[trp_moryn, "moryn_introduce_2",
	[],
	"I'm Ser Moryn Tyrell, Lord Commander of the City Watch.", "close_window",
	[]],

	[trp_moryn, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_norren, "start",
	[],
	"What is it?", "norren_introduce_1",
	[]],

	[plyr|trp_norren, "norren_introduce_1",
	[],
	"Greetings, who are you?", "norren_introduce_2",
	[]],

	[trp_norren, "norren_introduce_2",
	[],
	"I am Archmaester Norren.", "norren_master_talk",
	[]],

	[plyr|trp_norren, "norren_master_talk",
	[],
	"Can you tell me about Oldtown?", "norren_master_customize",
	[]],

	[trp_norren, "norren_master_customize",
	[],
	"Hmph! I suppose. Oldtown is the oldest city in Westeros, pre-dating the invasion of the Andals. Maester Jellicoe suggests that the first settlement here was a trading post of the Valyrian Freehold where they traded with the elder races. Hogwash, I say!", "norren_master_customize1",
	[]],

	[trp_norren, "norren_master_customize1",
	[],
	"It's quite clear that the first settlement here was the Ravenry, which we, the maesters, now control. There's the small matter of the foundations of the High Tower, but we're sure to solve that riddle sometime... ", "norren_master_customize2",
	[]],

	[trp_norren, "norren_master_customize2",
	[],
	"As the location of the Citadel, Oldtown is the foremost center of learning known to man, and as the former seat of the Faith of the Seven, the city is considered by many to be sacred.", "norren_master_talk",
	[]],

	[plyr|trp_norren, "norren_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_norren, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I'm afraid I'm much too busy to continue our talks.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_walgrave, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Huh? What? Where am I?", "walgrave_introduce_1",
	[]],

	[plyr|trp_walgrave, "walgrave_introduce_1",
	[],
	"Are you well?", "walgrave_introduce_2",
	[]],

	[trp_walgrave, "walgrave_introduce_2",
	[],
	"Oh my, we must tend the ravens. Where is Cressen, someone fetch him...", "close_window",
	[]],

	[trp_walgrave, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What? Who are you? I can't find my cheese!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_theobald, "start",
	[],
	"Yes?", "theobald_introduce_1",
	[]],

	[plyr|trp_theobald, "theobald_introduce_1",
	[],
	"Greetings, who are you?", "theobald_introduce_2",
	[]],

	[trp_theobald, "theobald_introduce_2",
	[],
	"I'm Archmaester Theobald, the Seneschal, tasked with the governance of the Citadel.", "theobald_master_talk",
	[]],

	[plyr|trp_theobald, "theobald_master_talk",
	[],
	"Can you tell me about the Citadel?", "theobald_master_customize",
	[]],

	[trp_theobald, "theobald_master_customize",
	[],
	"Gladly. The Citadel is considered the home of all maesters. This is where they undergo all the training taking them from novice to maester.", "theobald_master_customize1",
	[]],

	[trp_theobald, "theobald_master_customize1",
	[],
	"It was founded with the help of the Hightowers, who continue to be strong patrons of learning, and often come here to receive a few years of training themselves. The Citadel is also home of the Archmaesters, the governing body of the Order of Maesters, and it is where we hold the conclave that decides who will be Grand Maester.", "theobald_master_customize2",
	[]],

	[trp_theobald, "theobald_master_customize2",
	[],
	"As maesters, we are sworn to forsake our old allegiance and name, taking only our first name once be receive the chain. The chain we wear symbolizes our vow to serve the realm. Just as the realm is made up of many different people, so is our chain made of many different links.", "theobald_master_talk",
	[]],

	[plyr|trp_theobald, "theobald_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_theobald, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I'm afraid I'm much too busy to continue our talks.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_marwyn, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What is it?", "marwyn_introduce_1",
	[]],

	[plyr|trp_marwyn, "marwyn_introduce_1",
	[],
	"Greetings. Who are you?", "marwyn_introduce_2",
	[]],

	[trp_marwyn, "marwyn_introduce_2",
	[],
	"My name is Marwyn. Some call me 'the Mage'. I specialize in the mysteries of the world, what most people would call magic.", "marwyn_master_talk",
	[]],

	[plyr|trp_marwyn, "marwyn_master_talk",
	[],
	"Can you tell me about magic?", "marwyn_master_customize",
	[]],

	[trp_marwyn, "marwyn_master_customize",
	[],
	"Of course I can. But remember, the term magic is broad, and it has a different meaning to many people. Ignorant peasants may call a lords ability to handle sword and lance magic, and many is the town whore who has sworn she saw a dragon crossing the sky, when all she saw was a falling star.", "marwyn_master_customize1",
	[]],

	[trp_marwyn, "marwyn_master_customize1",
	[],
	"However, magic is a real force in this world, though it grows weaker... Or should I say, it grew weaker. I'm no longer so sure. Something stirs in the east. There has been signs, portents...", "marwyn_master_customize2",
	[]],

	[trp_marwyn, "marwyn_master_customize2",
	[],
	"But you wanted to know about magic. I'd advice you to read Archmaester Pellandons book 'Magic and Mysteries'. It offers an introduction to most of the common held beliefs about magic. Come back to me later, may be I'll be able to aquire it for you.", "marwyn_master_talk",
	[]],

	[plyr|trp_marwyn, "marwyn_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_marwyn, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have to get going. The candles are burning again.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_citadel_credits, "start",
	[],
	"What is it?", "marwyn_introduce_1",
	[]],

	[plyr|trp_citadel_credits, "marwyn_introduce_1",
	[],
	"Greetings. Who are you?", "marwyn_introduce_2",
	[]],

	[trp_citadel_credits, "marwyn_introduce_2",
	[],
	"My name is Orwyle, the current... oh what does it matter, no reason to put on airs. I make sure the acolytes don't bring food and wine into the Archives. An exceedingly difficult job", "marwyn_master_talk",
	[]],

	[plyr|trp_citadel_credits, "marwyn_master_talk",
	[
		(eq, "$g_citadel_credits_book", 0)
	],
	"Can you tell me about the Archives?", "marwyn_master_customize",
	[]],

	[trp_citadel_credits, "marwyn_master_customize",
	[],
	"Of course I can. They contain books.", "marwyn_master_customize1",
	[]],

	[trp_citadel_credits, "marwyn_master_customize1",
	[],
	"A lot of books. And acolytes.", "marwyn_master_customize2",
	[]],

	[trp_citadel_credits, "marwyn_master_customize2",
	[],
	"Too many books, to tell the truth. Here, take this.", "marwyn_master_talk",
	[
		(assign, "$g_citadel_credits_book", 1),
		(troop_add_item, "trp_player", "itm_credits_book", 0)
	]],

	[plyr|trp_citadel_credits, "marwyn_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_citadel_credits, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have to get going. The acolytes are probably having... relations in the cabinets again.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_leyton, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "leyton_introduce_1",
	[]],

	[plyr|trp_leyton, "leyton_introduce_1",
	[],
	"My lord, may I have the honor of knowing more about you?", "leyton_introduce_2",
	[]],

	[trp_leyton, "leyton_introduce_2",
	[],
	"I am Leyton Hightower, the lord of Oldtown, the one they call the Old Man of Oldtown. Heh, let the smallfolk have their names, it does no harm.", "close_window",
	[]],

	[trp_leyton, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I'm afraid I have no more time to talk.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_garin, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "garin_introduce_1",
	[]],

	[plyr|trp_garin, "garin_introduce_1",
	[],
	"Who are you?", "garin_introduce_2",
	[]],

	[trp_garin, "garin_introduce_2",
	[],
	"I'm Garin, of the Greenblood.", "close_window",
	[]],

	[trp_garin, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_myles, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What is it?", "myles_introduce_1",
	[]],

	[plyr|trp_myles, "myles_introduce_1",
	[],
	"Greetings. Who are you?", "myles_introduce_2",
	[]],

	[trp_myles, "myles_introduce_2",
	[],
	"My name is Maester Myles. I am sworn to Sunspear, and house Martell.", "myles_master_talk",
	[]],

	[plyr|trp_myles, "myles_master_talk",
	[],
	"Can you tell me about Dorne?", "myles_master_customize",
	[]],

	[trp_myles, "myles_master_customize",
	[],
	"I guess. Dorne is comprised of many different people. When the Rhoynar invaded, they mixed with the Andals already living here.", "myles_master_customize1",
	[]],

	[trp_myles, "myles_master_customize1",
	[],
	"Dorne is bordered by the Sea of Dorne to the north, the islands known as the Stepstones to the east, and the Summer Sea to the south. Stretched between them is the mountain range known as the Red Mountains, which separates Dorne from the remainder of the Seven Kingdoms by land.", "myles_master_customize2",
	[]],

	[trp_myles, "myles_master_customize2",
	[],
	"Dorne is the hottest region in Westeros. The region is rocky, mountainous, arid and dry, and features the only desert on the continent. Its rivers provide some fertile lands and even during a long summer there is enough rain and other supplies of water to keep Dorne habitable. Inland water is almost as valuable as gold, and wells are jealously guarded. ", "myles_master_talk",
	[]],

	[plyr|trp_myles, "myles_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_myles, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have to get going, the ravens need tending.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_ricasso, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "ricasso_introduce_1",
	[]],

	[plyr|trp_ricasso, "ricasso_introduce_1",
	[],
	"Who are you?", "ricasso_introduce_2",
	[]],

	[trp_ricasso, "ricasso_introduce_2",
	[],
	"I am Ricasso, Seneschal of Sunspear.", "close_window",
	[]],

	[trp_ricasso, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_manfrey, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "manfrey_introduce_1",
	[]],

	[plyr|trp_manfrey, "manfrey_introduce_1",
	[],
	"Who are you?", "manfrey_introduce_2",
	[]],

	[trp_manfrey, "manfrey_introduce_2",
	[],
	"I am Ser Manfrey Martell, the castellan of Sunspear.", "close_window",
	[]],

	[trp_manfrey, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_kedry, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "kedry_introduce_1",
	[]],

	[plyr|trp_kedry, "kedry_introduce_1",
	[],
	"Who are you?", "kedry_introduce_2",
	[]],

	[trp_kedry, "kedry_introduce_2",
	[],
	"I'm Maester Kedry, sworn to Yronwood and house Yronwood.", "close_window",
	[]],

	[trp_kedry, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_vyman, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What is it?", "vyman_introduce_1",
	[]],

	[plyr|trp_vyman, "vyman_introduce_1",
	[],
	"Greetings. Who are you?", "vyman_introduce_2",
	[]],

	[trp_vyman, "vyman_introduce_2",
	[],
	"My name is Maester Vyman. I am sworn to Riverrun, and house Tully.", "vyman_master_talk",
	[]],

	[plyr|trp_vyman, "vyman_master_talk",
	[],
	"Can you tell me about the Riverlands?", "vyman_master_customize",
	[]],

	[trp_vyman, "vyman_master_customize",
	[],
	"I guess. The land is named for the many rivers that flow across the plains. The largest of them, the Trident, is rivaled only by the Mander and the Rhoyne.", "vyman_master_customize1",
	[]],

	[trp_vyman, "vyman_master_customize1",
	[],
	"The Riverlands is not considered one of the traditional Seven Kingdoms, as they where ruled by the ironborn before the Conquest. When Aegon invaded, house Tully was one of the first to swear fealty to him, and as a result, Aegon named Lord Tully the ruler of the Riverlands.", "vyman_master_customize2",
	[]],

	[trp_vyman, "vyman_master_customize2",
	[],
	"During Robert's Rebellion, the final battle was fought on the banks of the Trident. King Robert met Prince Rhaegar in the waters, and there he caved in the chest of the prince, winning the throne. ", "vyman_master_talk",
	[]],

	[plyr|trp_vyman, "vyman_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_vyman, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have to get going, the ravens need tending.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_desmond, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "desmond_introduce_1",
	[]],

	[plyr|trp_desmond, "desmond_introduce_1",
	[],
	"Who are you?", "desmond_introduce_2",
	[]],

	[trp_desmond, "desmond_introduce_2",
	[],
	"I'm Ser Desmond Grell, the master-at-arms.", "close_window",
	[]],

	[trp_desmond, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_utherydes, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "utherydes_introduce_1",
	[]],

	[plyr|trp_utherydes, "utherydes_introduce_1",
	[],
	"Who are you?", "utherydes_introduce_2",
	[]],

	[trp_utherydes, "utherydes_introduce_2",
	[],
	"I am named Utherydes Wayn. I am the Steward of Riverrun.", "close_window",
	[]],

	[trp_utherydes, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_catelyn, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "catelyn_introduce_1",
	[]],

	[plyr|trp_catelyn, "catelyn_introduce_1",
	[],
	"My lady, may I have the honor of knowing more about you?", "catelyn_introduce_2",
	[]],

	[trp_catelyn, "catelyn_introduce_2",
	[],
	"I am Catelyn Tully, daughter of Lord Hoster and mother of the King in the North.", "close_window",
	[]],

	[trp_catelyn, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"Excuse me.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_lysa, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "lysa_introduce_1",
	[]],

	[plyr|trp_lysa, "lysa_introduce_1",
	[],
	"My lady, may I have the great pleasure of knowing more about you?", "lysa_introduce_2",
	[]],

	[trp_lysa, "lysa_introduce_2",
	[],
	"I am the lady Lysa Tully, protector of the Vale. Who are you? Have you met my son? Such a strong and smart boy, isn't he?", "close_window",
	[]],

	[trp_lysa, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_marillion, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What is it?", "marillion_introduce_1",
	[]],

	[plyr|trp_marillion, "marillion_introduce_1",
	[],
	"Who are you?", "marillion_introduce_2",
	[]],

	[trp_marillion, "marillion_introduce_2",
	[],
	"My name is Marillion, I'm the lady Lysas favorite singer.", "close_window",
	[]],

	[trp_marillion, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_colemon, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "colemon_introduce_1",
	[]],

	[plyr|trp_colemon, "colemon_introduce_1",
	[],
	"Greetings. Who are you?", "colemon_introduce_2",
	[]],

	[trp_colemon, "colemon_introduce_2",
	[],
	"My name is Maester Colemon. I am sworn to The Eyrie, and house Arryn.", "colemon_master_talk",
	[]],

	[plyr|trp_colemon, "colemon_master_talk",
	[],
	"Can you tell me about the Vale?", "colemon_master_customize",
	[]],

	[trp_colemon, "colemon_master_customize",
	[],
	"I suppose. The Vale is where the Andals initially landed. As such the Arryns are one of the oldest lines of Andal nobility in the Seven Kingdoms and ruled as Kings of Mountain and Vale for centuries until they bent the knee to Aegon the Conqueror when the young king wanted to ride a dragon.", "colemon_master_customize1",
	[]],

	[trp_colemon, "colemon_master_customize1",
	[],
	"When the Mad King demanded that Jon Arryn give up his wards, Eddard Stark and Robert Baratheon, he instead raised his banners in revolt. During the battle of the Trident, the knights of the Vale proved indispensable in defeating the Targaryen host.", "colemon_master_customize2",
	[]],

	[trp_colemon, "colemon_master_customize2",
	[],
	"After Lord Arryns death, the lady Lysa returned here, to rule the Vale until her son comes of age. Between you and me, though, it seems to me that Lord Nestor still rules in all but name, as he did when Lord Arryn went to King's Landing to serve as Hand.", "colemon_master_talk",
	[]],

	[plyr|trp_colemon, "colemon_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_colemon, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have to get going, the ravens need tending.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_myranda, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "myranda_introduce_1",
	[]],

	[plyr|trp_myranda, "myranda_introduce_1",
	[],
	"My lady, may I know more about you?", "myranda_introduce_2",
	[]],

	[trp_myranda, "myranda_introduce_2",
	[],
	"I am Myranda Royce, daughter of Lord Nestor.", "close_window",
	[]],

	[trp_myranda, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_mya_stone, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "mya_stone_introduce_1",
	[]],

	[plyr|trp_mya_stone, "mya_stone_introduce_1",
	[],
	"Who are you?", "mya_stone_introduce_2",
	[]],

	[trp_mya_stone, "mya_stone_introduce_2",
	[],
	"I'm Mya Stone. I tend the mules.", "close_window",
	[]],

	[trp_mya_stone, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"Excuse me.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_harry_the_heir, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "harry_the_heir_introduce_1",
	[]],

	[plyr|trp_harry_the_heir, "harry_the_heir_introduce_1",
	[],
	"Who are you?", "harry_the_heir_introduce_2",
	[]],

	[trp_harry_the_heir, "harry_the_heir_introduce_2",
	[],
	"My name is Harrold Hardyng.", "close_window",
	[]],

	[trp_harry_the_heir, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_helliweg, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "helliweg_introduce_1",
	[]],

	[plyr|trp_helliweg, "helliweg_introduce_1",
	[],
	"Who are you?", "helliweg_introduce_2",
	[]],

	[trp_helliweg, "helliweg_introduce_2",
	[],
	"I'm Maester Helliweg, sworn to Runestone and house Royce", "close_window",
	[]],

	[trp_helliweg, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"Excuse me, I have to write a letter.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_wendamyr, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "wendamyr_introduce_1",
	[]],

	[plyr|trp_wendamyr, "wendamyr_introduce_1",
	[],
	"Greetings. Who are you?", "wendamyr_introduce_2",
	[]],

	[trp_wendamyr, "wendamyr_introduce_2",
	[],
	"My name is Maester Wendamyr. I serve house Greyjoy.", "wendamyr_master_talk",
	[]],

	[plyr|trp_wendamyr, "wendamyr_master_talk",
	[],
	"Can you tell me about the Iron Islands?", "wendamyr_master_customize",
	[]],

	[trp_wendamyr, "wendamyr_master_customize",
	[],
	"I suppose. The Iron Islands consists of seven major islands, Pyke, Great Wyk, Old Wyk, Harlaw, Saltcliffe, Blacktyde and Orkmont. Before the Conquest, the ironborn held sway wherever the sound of waves where heard, and ruled the Riverlands. When Balerion the Black Dread burned Harren and all his sons in the tower of Kingspyre, King Aegon offered the ironborn to choose amongst themselves who would hold supremacy over them. They choose Vickon Greyjoy and his line.", "wendamyr_master_customize1",
	[]],

	[trp_wendamyr, "wendamyr_master_customize1",
	[],
	"The men of the Iron Islands have ever felt the strain of being unable to return to the Old Ways, and various Greyjoys have rebelled over the years. Before Balons rebellion, the last rebellion was led by Dagon Greyjoy, who prevailed against the lords Stark and Lannister, but was unable to defeat the Targaryens..", "wendamyr_master_customize2",
	[]],

	[trp_wendamyr, "wendamyr_master_customize2",
	[],
	"Opposed to the rest of Westeros, the Andals did not convert the First Men of the Isles to the Faith of the Seven, but rather saw themselves converted. The ironborn worship the Drowned God, who wages eternal war agains the Storm God. It is said the Drowned God made the ironborn to reave and rape, to carve out kingdoms for themselves and to make their names known in fire, blood and song.", "wendamyr_master_talk",
	[]],

	[plyr|trp_wendamyr, "wendamyr_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_wendamyr, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have to get going, the ravens need tending.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_helya, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Huh? What? Where am I?", "helya_introduce_1",
	[]],

	[plyr|trp_helya, "helya_introduce_1",
	[],
	"Who are you?", "helya_introduce_2",
	[]],

	[trp_helya, "helya_introduce_2",
	[],
	"I'm Helya, I run the household.", "close_window",
	[]],

	[trp_helya, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What? Who are you?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_hotho_harlaw, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Huh? I am Hotho Harlaw, who are you?", "hotho_harlaw_introduce_1",
	[]],

	[plyr|trp_hotho_harlaw, "hotho_harlaw_introduce_1",
	[],
	"I am {playername}.", "hotho_harlaw_introduce_2",
	[]],

	[trp_hotho_harlaw, "hotho_harlaw_introduce_2",
	[],
	"Ah, yes, {playername}. Have we met before? Have you heard about my daughter? Most beautiful women in all the world!", "close_window",
	[]],

	[trp_hotho_harlaw, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"You ought to sup with me and my daughter.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_gwynesse, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Huh?", "gwynesse_introduce_1",
	[]],

	[plyr|trp_gwynesse, "gwynesse_introduce_1",
	[],
	"My lady, may I know who you are?", "gwynesse_introduce_2",
	[]],

	[trp_gwynesse, "gwynesse_introduce_2",
	[],
	"I am Gwynesse Harlaw, sister to Rodrik, and rightful heir to Harlaw! It ought to be mine, I'm the oldest!", "close_window",
	[]],

	[trp_gwynesse, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_alannys, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Huh? What? Have you seen Rodrik?", "alannys_introduce_1",
	[]],

	[plyr|trp_alannys, "alannys_introduce_1",
	[],
	"Are you well?", "alannys_introduce_2",
	[]],

	[trp_alannys, "alannys_introduce_2",
	[],
	"My dear sons, where are they? Sweet Theon, when will he be home?", "close_window",
	[]],

	[trp_alannys, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What? Who are you? Where are my dear sons?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_old_nan, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Huh? Yes?", "old_nan_introduce_1",
	[]],

	[plyr|trp_old_nan, "old_nan_introduce_1",
	[],
	"Who are you?", "old_nan_introduce_2",
	[]],

	[trp_old_nan, "old_nan_introduce_2",
	[],
	"I'm Old Nan. I tell stories. Would you hear one?", "old_nan_master_talk",
	[]],

	[plyr|trp_old_nan, "old_nan_master_talk",
	[],
	"Can you tell me about the Night's King?", "old_nan_master_customize",
	[]],

	[trp_old_nan, "old_nan_master_customize",
	[],
	"In the Age of Heroes, the Night's Watch choose their thirteenth Lord Commander. He was a fearless warrior, bold and brave. Once, when walking the Wall, he saw a beautiful woman on the other side. Her skin was pale as snow, and her eyes burned with a blue glow. Lesser men would have felt fear, but he was without such, and he met her at the edge of the woods, and there they made love, though her skin was cold as ice. When he gave his seed to her, he also gave her his soul.", "old_nan_master_customize1",
	[]],

	[trp_old_nan, "old_nan_master_customize1",
	[],
	"After their union, he brought her back to the Nightfort, and there he declared himself king, and her his queen, and he ruled the Nightfort as his own castle for thirteen years. Using vile sorcery, he bound the men of the Night's Watch to his will, and made them do his bidding. During those dark years, horrible atrocities where commited. In the end, the King in the North and Joramun, the King-Beyond-the-Wall, joined their forces and brought down the Night's King, freeing the men of the Night's Watch from his hold on them. ", "old_nan_master_customize2",
	[]],

	[trp_old_nan, "old_nan_master_customize2",
	[],
	"When the two kings searched the Nightfort, they found that the Night's King had been sacrificing to the Others. The kings never spoke of what they saw, but it was decreed that the name of the Night's King may never be spoken again by living man. There are many tales about who the Night's King was. Some say a Bolton, other mentions the Umbers. Don't you believe them. The man who became the Night's King was born here in Winterfell, the younger brother of the same King in the North who killed him.", "old_nan_master_talk",
	[]],

	[plyr|trp_old_nan, "old_nan_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_old_nan, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I'm afraid I'm much too frail to continue talking.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_theomore, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Huh? What do you want?", "theomore_introduce_1",
	[]],

	[plyr|trp_theomore, "theomore_introduce_1",
	[],
	"Who are you?", "theomore_introduce_2",
	[]],

	[trp_theomore, "theomore_introduce_2",
	[],
	"I am Maester Theomore, sworn to White Harbor", "close_window",
	[]],

	[trp_theomore, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_bartimus, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hmm? Yes?", "bartimus_introduce_1",
	[]],

	[plyr|trp_bartimus, "bartimus_introduce_1",
	[],
	"Who are you?", "bartimus_introduce_2",
	[]],

	[trp_bartimus, "bartimus_introduce_2",
	[],
	"I'm Ser Bartimus, castellan of the Wolf's Den.", "bartimus_master_talk",
	[]],

	[plyr|trp_bartimus, "bartimus_master_talk",
	[],
	"Can you tell me about the Wolf's Den?", "bartimus_master_customize",
	[]],

	[trp_bartimus, "bartimus_master_customize",
	[],
	"Yes, gladly! King Jon Stark raised the Wolf's Den to defend the mouth of the White Knife from raiders from the sea. It was the seat of younger sons, brothers, uncles and cousins to the King in the North. Some passed the castle to their sons and grandsons, and cadet branches of House Stark have ruled the Wolf's Den. The Greystarks lasted for five hundred years, until they rose in rebellion against Winterfell.", "bartimus_master_customize1",
	[]],

	[trp_bartimus, "bartimus_master_customize1",
	[],
	"After the Greystarks, the castle switched many hands. House Flint held it for century, and House Locke for almost two. Slates, Longs, Holts and Ashwoods held the Wolf's Den, charged by Winterfell to keep the river safe. Reavers from the Three Sisters took the castle once, and made it their toehold in the north. During the wars between the North and the Vale, it was besieged by Osgood Arryn, the Old Falcon, and burned by his son, the one they called 'the Talon'. The Wolf's Den was captured by slavers from the Stepstones when Edrick Stark had grown too feeble to defend his realm. Then a long, cruel winter came that froze the White Knife. When the slavers were huddled around their fires, Edrick's great-grandson, the king they called 'Ice Eyes', took back the Wolf's Den. He stripped the slavers naked and gave them to the slaves chained up in the dungeon. They, amongst them my own ancestors, hung the slavers' entrails in the branches of the heart tree as an offering to the Old Gods.", "bartimus_master_customize2",
	[]],

	[trp_bartimus, "bartimus_master_customize2",
	[],
	"A thousand years before the conquest, the Manderlys took oaths before the old gods and the new to be the Starks of Winterfell's men forever in return for protection from their enemies and the land around the Wolf's Den that became White Harbor.", "bartimus_master_talk",
	[]],

	[plyr|trp_bartimus, "bartimus_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_bartimus, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have to get going.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_nw_clydas, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hmm? Yes?", "bartimus_introduce_1",
	[]],

	[plyr|trp_nw_clydas, "bartimus_introduce_1",
	[],
	"Who are you?", "bartimus_introduce_2",
	[]],

	[trp_nw_clydas, "bartimus_introduce_2",
	[],
	"I'm Clydas.", "bartimus_master_talk",
	[]],

	[plyr|trp_nw_clydas, "bartimus_master_talk",
	[],
	"Can you tell me about Castle Black?", "bartimus_master_customize",
	[]],

	[trp_nw_clydas, "bartimus_master_customize",
	[],
	"Yes, gladly! Castle Black is the main stronghold of the Night's Watch.", "bartimus_master_customize1",
	[]],

	[trp_nw_clydas, "bartimus_master_customize1",
	[],
	"The Night's Watch originally raised nineteen castles along the Wall, but only three are in use now. The original main castle was the Nightfort, but for obvious... reasons, it was abandoned after the reign of the Night's King.", "bartimus_master_customize2",
	[]],

	[trp_nw_clydas, "bartimus_master_customize2",
	[],
	"Other than the castle, a series of tunnels run through the Wall here, used for storing food and equipment. We've got enough space to store food for years.", "bartimus_master_talk",
	[]],

	[plyr|trp_nw_clydas, "bartimus_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_nw_clydas, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"I have to get going.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_nw_black_jack, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What do you want?", "walton_introduce_1",
	[]],

	[plyr|trp_nw_black_jack, "walton_introduce_1",
	[],
	"Who are you?", "walton_introduce_2",
	[]],

	[trp_nw_black_jack, "walton_introduce_2",
	[],
	"I'm Jack Bulwer, a ranger of the Night's Watch. What's it to you?", "close_window",
	[]],

	[trp_nw_black_jack, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_nw_deaf_dick, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"WHAT? WHO ARE YOU?", "walton_introduce_1",
	[]],

	[plyr|trp_nw_deaf_dick, "walton_introduce_1",
	[],
	"ARE YOU DEAF?", "walton_introduce_2",
	[]],

	[trp_nw_deaf_dick, "walton_introduce_2",
	[],
	"SORRY, I'M DEAF!.", "close_window",
	[]],

	[trp_nw_deaf_dick, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"WHAT?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_nw_cellador, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes? Arh, what do you want?", "walton_introduce_1",
	[]],

	[plyr|trp_nw_cellador, "walton_introduce_1",
	[],
	"Who are you?", "walton_introduce_2",
	[]],

	[trp_nw_cellador, "walton_introduce_2",
	[],
	"I'm septon Cellador, an, arh, erh, humble servant of the, hmph, Seven.", "close_window",
	[]],

	[trp_nw_cellador, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"What? Arhm.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_nw_hobb, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "walton_introduce_1",
	[]],

	[plyr|trp_nw_hobb, "walton_introduce_1",
	[],
	"Who are you?", "walton_introduce_2",
	[]],

	[trp_nw_hobb, "walton_introduce_2",
	[],
	"I'm Hobb, the brothers call me Three-Finger. I cook the food around here, so keep on my good side, unless you want a plate full of gristle!", "close_window",
	[]],

	[trp_nw_hobb, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_nw_harmune, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "walton_introduce_1",
	[]],

	[plyr|trp_nw_harmune, "walton_introduce_1",
	[],
	"Who are you?", "walton_introduce_2",
	[]],

	[trp_nw_harmune, "walton_introduce_2",
	[],
	"The maester of the Shadow Tower! Now off you go, I'm busy!", "close_window",
	[]],

	[trp_nw_harmune, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Get out of my way!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_nw_glendon, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "walton_introduce_1",
	[]],

	[plyr|trp_nw_glendon, "walton_introduce_1",
	[],
	"Who are you?", "walton_introduce_2",
	[]],

	[trp_nw_glendon, "walton_introduce_2",
	[],
	"SER Glendon Hewett!", "close_window",
	[]],

	[trp_nw_glendon, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Get out of my way!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_nw_daeron, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "walton_introduce_1",
	[]],

	[plyr|trp_nw_daeron, "walton_introduce_1",
	[],
	"Who are you?", "walton_introduce_2",
	[]],

	[trp_nw_daeron, "walton_introduce_2",
	[],
	"Daeron. By the gods, it keeps getting colder!", "close_window",
	[]],

	[trp_nw_daeron, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"How cold can it get?!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_nw_janos_slynt, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes? Who are you? You look like a peasant!", "walton_introduce_1",
	[]],

	[plyr|trp_nw_janos_slynt, "walton_introduce_1",
	[],
	"Who are you?", "walton_introduce_2",
	[]],

	[trp_nw_janos_slynt, "walton_introduce_2",
	[],
	"I am Janos Slynt, Lord of Harrenhal!", "close_window",
	[]],

	[trp_nw_janos_slynt, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Out of my way, peasant!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_nw_mullin, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes? Who are you?", "walton_introduce_1",
	[]],

	[plyr|trp_nw_mullin, "walton_introduce_1",
	[],
	"I'm {playername}.", "walton_introduce_2",
	[]],

	[trp_nw_mullin, "walton_introduce_2",
	[],
	"I'm Maester Mullin, I tend the ravens and such here at the Shadow Tower. Truth be told, I do more fighting than reading these days.", "close_window",
	[]],

	[trp_nw_mullin, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_nw_tom_barleycorn, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes? Who are you?", "walton_introduce_1",
	[]],

	[plyr|trp_nw_tom_barleycorn, "walton_introduce_1",
	[],
	"I'm {playername}. Who are you?", "walton_introduce_2",
	[]],

	[trp_nw_tom_barleycorn, "walton_introduce_2",
	[],
	"Tom Barleycorn.", "close_window",
	[]],

	[trp_nw_tom_barleycorn, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_nw_luke, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes? Who are you?", "walton_introduce_1",
	[]],

	[plyr|trp_nw_luke, "walton_introduce_1",
	[],
	"I might ask the same?", "walton_introduce_2",
	[]],

	[trp_nw_luke, "walton_introduce_2",
	[],
	"I'm Luke, of Longtown. Been on this here Wall since I was a wee boy.", "close_window",
	[]],

	[trp_nw_luke, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_marlon, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "marlon_introduce_1",
	[]],

	[plyr|trp_marlon, "marlon_introduce_1",
	[],
	"Who are you?", "marlon_introduce_2",
	[]],

	[trp_marlon, "marlon_introduce_2",
	[],
	"I am Ser Marlon Manderly, commander of the garrison.", "close_window",
	[]],

	[trp_marlon, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_walton, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What do you want?", "walton_introduce_1",
	[]],

	[plyr|trp_walton, "walton_introduce_1",
	[],
	"Who are you?", "walton_introduce_2",
	[]],

	[trp_walton, "walton_introduce_2",
	[],
	"I'm Walton. I server Lord Bolton.", "close_window",
	[]],

	[trp_walton, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_tybald, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hmm? Yes?", "tybald_introduce_1",
	[]],

	[plyr|trp_tybald, "tybald_introduce_1",
	[],
	"Who are you?", "tybald_introduce_2",
	[]],

	[trp_tybald, "tybald_introduce_2",
	[],
	"I'm Maester Tybald, sworn to house Bolton.", "tybald_master_talk",
	[]],

	[plyr|trp_tybald, "tybald_master_talk",
	[],
	"Can you tell me about house Bolton?", "tybald_master_customize",
	[]],

	[trp_tybald, "tybald_master_customize",
	[],
	"Yes, I suppose. The Boltons are an ancient and powerful house of the North who for many centuries were bitter rivals of the Kings in the North, the Starks of Winterfell.", "tybald_master_customize1",
	[]],

	[trp_tybald, "tybald_master_customize1",
	[],
	"The Boltons achieved some successes against the Starks, flaying the skins of several Stark lords and hanging them in their stronghold, the Dreadfort. According to rumor, some Bolton lords even wore the flayed skins of their enemies - including the Starks - as cloaks.", "tybald_master_customize2",
	[]],

	[trp_tybald, "tybald_master_customize2",
	[],
	"Approximately a thousand years ago, the Boltons finally swore fealty to the Kings in the North and agreed to abandon their practice of flaying their enemies. However, three hundred years later the Boltons rose in rebellion against the Starks. The Stark armies besieged the Dreadfort for four years before the Boltons finally capitulated and dipped their banners once more. For many centuries the Boltons remained loyal to the Starks, although rumors persisted that they continued to flay their prisoners in secret, and maintain a hidden chamber in the Dreadfort to display the skins of their enemies.", "tybald_master_talk",
	[]],

	[plyr|trp_tybald, "tybald_master_talk",
	[],
	"Goodbye.", "close_window",
	[]],

	[trp_tybald, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context", 1)
	],
	"I have to get going.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_saltpans_brother_1, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"...", "saltpans_brother_1_introduce_1",
	[]],

	[plyr|trp_saltpans_brother_1, "saltpans_brother_1_introduce_1",
	[],
	"You don't talk?", "saltpans_brother_1_introduce_2",
	[]],

	[trp_saltpans_brother_1, "saltpans_brother_1_introduce_2",
	[],
	"...", "close_window",
	[]],

	[trp_saltpans_brother_1, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"...", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_saltpans_brother_2, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"...", "saltpans_brother_2_introduce_1",
	[]],

	[plyr|trp_saltpans_brother_2, "saltpans_brother_2_introduce_1",
	[],
	"Have you all taken a vow of silence?", "saltpans_brother_2_introduce_2",
	[]],

	[trp_saltpans_brother_2, "saltpans_brother_2_introduce_2",
	[],
	"...", "close_window",
	[]],

	[trp_saltpans_brother_2, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"...", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_saltpans_elder_brother, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hmm? Yes?", "saltpans_elder_brother_introduce_1",
	[]],

	[plyr|trp_saltpans_elder_brother, "saltpans_elder_brother_introduce_1",
	[],
	"What is this place?", "saltpans_elder_brother_introduce_2",
	[]],

	[trp_saltpans_elder_brother, "saltpans_elder_brother_introduce_2",
	[],
	"This is the septry of the Quiet Isle.", "saltpans_elder_brother_master_talk",
	[]],

	[plyr|trp_saltpans_elder_brother, "saltpans_elder_brother_master_talk",
	[],
	"Can you tell me about this place?", "saltpans_elder_brother_master_customize",
	[]],

	[trp_saltpans_elder_brother, "saltpans_elder_brother_master_customize",
	[],
	"Yes, I would be glad to. Those who dwell here are penitents. We seek to atone for our sins through quiet contemplation, penitence and prayer. Many come to escape the horrors of war and thus I keep the worst of the news from my brothers. Our island is protected by the mud and tides, and the Mother shelters us from the ravages of the mainland.", "saltpans_elder_brother_master_customize1",
	[]],

	[plyr|trp_saltpans_elder_brother, "saltpans_elder_brother_master_customize1",
	[],
	"Forgive me, Elder Brother, but you do not look like a typical member of the faith How did you come to this place?", "saltpans_elder_brother_master_customize2",
	[]],

	[trp_saltpans_elder_brother, "saltpans_elder_brother_master_customize2",
	[],
	"You're right my friend, I have not always lived on this island. Once, I was a knight. At the Battle of the Trident, I fought for the Targaryens, and was knocked out by a blow to the head. I was left for dead, robbed of my armor, and floated into the Bay of Crabs. When I woke up, I was lying face down in the mud, and that is where my brothers found me. I was a vain man before the tides brought me here, and the Gods have seen fit to give me a second chance.", "saltpans_elder_brother_master_talk2",
	[]],

	[trp_saltpans_elder_brother, "saltpans_elder_brother_master_talk2",
	[],
	"Often though, I am reminded of the battle. We've have had six of Rhaegars rubies wash ashore, and we're all waiting for the seventh.", "close_window",
	[]],

	[trp_saltpans_elder_brother, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"I have to get going.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_green_man_1, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Hmm?", "green_man_1_introduce_1",
	[]],

	[plyr|trp_green_man_1, "green_man_1_introduce_1",
	[],
	"What is this place?", "green_man_1_introduce_2",
	[]],

	[trp_green_man_1, "green_man_1_introduce_2",
	[],
	"This is the Isle of Faces.", "green_man_1_master_talk",
	[]],

	[plyr|trp_green_man_1, "green_man_1_master_talk",
	[],
	"Can you tell me about this place? It feels strange.", "green_man_1_master_customize",
	[]],

	[trp_green_man_1, "green_man_1_master_customize",
	[],
	"At the end of the Dawn Age, following many centuries of fighting between them, this island is where the First Men and the children of the forest signed the Pact ending their wars against each other. In celebration, every weirwood on the island was given a face, so that the gods would witness the pact.", "green_man_1_master_customize1",
	[]],

	[trp_green_man_1, "green_man_1_master_customize1",
	[],
	"With the signing of the Pact, the order Green Men was formed, to tend the last remaining weirwoods in the south", "green_man_1_master_customize2",
	[]],

	[plyr|trp_green_man_1, "green_man_1_master_customize2",
	[],
	"Do the Old Gods truly observe the world through the faces in the weirwoods?", "green_man_1_master_talk2",
	[]],

	[trp_green_man_1, "green_man_1_master_talk2",
	[],
	"That is not for me to say. Lately though, I have felt like someone was watching me. And many of my brothers have had strange dreams, of a wolf with ravens wings, flying high above the world...", "close_window",
	[]],

	[trp_green_man_1, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"I have to get going.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_guardsman_alyn, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Careful with this one, he's stark raving mad.", "guardsman_alyn_introduce_1",
	[]],

	[plyr|trp_guardsman_alyn, "guardsman_alyn_introduce_1",
	[],
	"Who is he?", "guardsman_alyn_introduce_2",
	[]],

	[trp_guardsman_alyn, "guardsman_alyn_introduce_2",
	[],
	"Fuck if I know. Came stumbling out of the woods, raving about flesh and blood.", "close_window",
	[]],

	[trp_guardsman_alyn, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"Watch your face, he likes to bite.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_guardsman_holger, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What?", "guardsman_holger_introduce_1",
	[]],

	[plyr|trp_guardsman_holger, "guardsman_holger_introduce_1",
	[],
	"What is this place?", "guardsman_holger_introduce_2",
	[]],

	[trp_guardsman_holger, "guardsman_holger_introduce_2",
	[],
	"It's a goldmine, what's it look like?", "close_window",
	[]],

	[trp_guardsman_holger, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"I'm busy", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_tom, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What?", "tom_introduce_1",
	[]],

	[plyr|trp_tom, "tom_introduce_1",
	[],
	"Who are you", "tom_introduce_2",
	[]],

	[trp_tom, "tom_introduce_2",
	[],
	"I'm Tom, and I'm not mad! Tell that guardsman I was just stung by a bee!", "close_window",
	[]],

	[trp_tom, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"I'm busy", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_kyle, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What?", "kyle_introduce_1",
	[]],

	[plyr|trp_kyle, "kyle_introduce_1",
	[],
	"What are you doing?", "kyle_introduce_2",
	[]],

	[trp_kyle, "kyle_introduce_2",
	[],
	"Bugger off.", "close_window",
	[]],

	[trp_kyle, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"Go away.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_stoneman, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Greetings, my friend.", "stoneman_introduce_1",
	[]],

	[plyr|trp_stoneman, "stoneman_introduce_1",
	[],
	"What is this place?", "stoneman_introduce_2",
	[]],

	[trp_stoneman, "stoneman_introduce_2",
	[],
	"This is the Sorrows.", "stoneman_master_talk",
	[]],

	[plyr|trp_stoneman, "stoneman_master_talk",
	[],
	"Can you tell me about this place? It seems strange.", "stoneman_master_customize",
	[]],

	[trp_stoneman, "stoneman_master_customize",
	[],
	"Chroyane, nicknamed the festival city, was once the richest and most splendid of the cities along the Rhoyne. Its streets were said to be made of water and its houses of gold.", "stoneman_master_customize1",
	[]],

	[trp_stoneman, "stoneman_master_customize1",
	[],
	"According to legend, the men of Volantis and Valyria hung Prince Garin in a golden cage after defeating the Rhoynar. Garin allegedly called upon Mother Rhoyne to destroy the invaders with a curse; that night the river's waters rose to destroy the Volantenes and Valyrians. The spirits of the drowned lords of fire are said to remain beneath the water, however, and their cold breath rises to become fog.", "stoneman_master_customize2",
	[]],

	[trp_stoneman, "stoneman_master_customize2",
	[],
	"Chroyane is now known as the Sorrows. Mists rule the area and people infected with greyscale roam the ruins.", "stoneman_master_talk",
	[]],

	[plyr|trp_stoneman, "stoneman_master_talk",
	[],
	"What are you doing here, then?", "close_window",
	[]],

	[trp_stoneman, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"I would keep my distance if I where you.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_sajius, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Greetings, my friend.", "sajius_introduce_1",
	[]],

	[plyr|trp_sajius, "sajius_introduce_1",
	[],
	"What is this place?", "sajius_introduce_2",
	[]],

	[trp_sajius, "sajius_introduce_2",
	[],
	"This is one of the many ruins left over from the Valyrian Freehold.", "sajius_master_talk",
	[]],

	[plyr|trp_sajius, "sajius_master_talk",
	[],
	"What happened here?", "sajius_master_customize",
	[]],

	[trp_sajius, "sajius_master_customize",
	[],
	"When the Doom came to Valyria, great rents opened in the earth, swallowing palaces, temples, entire towns. Lakes boiled or turned to acid, mountains burst, fiery mountains spewed forth molten rock a thousand feet into the air.", "sajius_master_customize1",
	[]],

	[trp_sajius, "sajius_master_customize1",
	[],
	"Red clouds rained down dragonglass and the black blood of demons, and to the north the ground splintered and collapsed and fell in on itself and an angry sea came rushing in.", "sajius_master_customize2",
	[]],

	[trp_sajius, "sajius_master_customize2",
	[],
	"The proudest city in all the world was gone in an instant, its fabled empire vanished in a day, the Lands of the Long Summer scorched and drowned and blighted. If you want to know more, go talk to my wife Comaelle.", "sajius_master_talk3",
	[]],

	[plyr|trp_sajius, "sajius_master_talk3",
	[],
	"Goodbye", "close_window",
	[]],

	[trp_sajius, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"Do not drink the water from these pools.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_comaelle, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Greetings.", "comaelle_introduce_1",
	[]],

	[plyr|trp_comaelle, "comaelle_introduce_1",
	[],
	"Are you Commaelle?", "comaelle_introduce_2",
	[]],

	[trp_comaelle, "comaelle_introduce_2",
	[],
	"Yes, I am. Would you like to hear a story?", "comaelle_master_talk",
	[]],

	[plyr|trp_comaelle, "comaelle_master_talk",
	[],
	"I would.", "comaelle_master_customize",
	[]],

	[trp_comaelle, "comaelle_master_customize",
	[],
	"Once there was a young boy, born with a golden navel. His mother didn't know how he came to have such a navel. No one in his village knew either.", "comaelle_master_customize1",
	[]],

	[trp_comaelle, "comaelle_master_customize1",
	[],
	"The boy grew up, and left the village. He travelled the world, seeking an answer for his golden navel. He sought out shadowbinders in Asshai, warlocks in Qarth, and sorcerers in Valyria. But none knew the reason for his golden navel.", "comaelle_master_customize2",
	[]],

	[trp_comaelle, "comaelle_master_customize2",
	[],
	"Finally, he came upon a hermit, living in a tree. The hermit turned the boys navel around, ten times. Then he turned it another ten.", "comaelle_master_talk3",
	[]],

	[trp_comaelle, "comaelle_master_talk3",
	[],
	"Then the boys ass fell off.", "close_window",
	[]],

	[trp_comaelle, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"Go away, huahaha!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_old_crone, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Leave me be!", "old_crone_introduce_1",
	[]],

	[plyr|trp_old_crone, "old_crone_introduce_1",
	[],
	"What are you doing here, old woman?", "old_crone_introduce_2",
	[]],

	[trp_old_crone, "old_crone_introduce_2",
	[],
	"I've come here to die...", "old_crone_master_talk",
	[]],

	[plyr|trp_old_crone, "old_crone_master_talk",
	[],
	"Can you tell me about this place?", "old_crone_master_customize",
	[]],

	[trp_old_crone, "old_crone_master_customize",
	[],
	"No! Leave me be!", "old_crone_master_customize1",
	[]],

	[trp_old_crone, "old_crone_master_customize1",
	[],
	"I can still feel the fires, and see them scream! All the lords and ladies, the king and his heir! Ohh, they scream!", "old_crone_master_customize2",
	[]],

	[trp_old_crone, "old_crone_master_customize2",
	[],
	"Leave me!", "old_crone_master_talk",
	[]],

	[plyr|trp_old_crone, "old_crone_master_talk",
	[],
	"You're mad, old woman.", "close_window",
	[]],

	[trp_old_crone, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"Get away from me!", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_peddler_maester, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes?", "peddler_maester_introduce_1",
	[]],

	[plyr|trp_peddler_maester, "peddler_maester_introduce_1",
	[],
	"What are you doing here?", "peddler_maester_introduce_2",
	[]],

	[trp_peddler_maester, "peddler_maester_introduce_2",
	[],
	"Our wagon broke down amidst the ruins, and our guardsmen seem unable to put on a new wheel.", "peddler_maester_master_talk",
	[]],

	[plyr|trp_peddler_maester, "peddler_maester_master_talk",
	[],
	"Can you tell me about this place?", "peddler_maester_master_customize",
	[]],

	[trp_peddler_maester, "peddler_maester_master_customize",
	[],
	"Certainly. The original name of Oldstones has been lost in the mists of time, and the current name was given to the ruins by the smallfolk. Before the Andals invaded, when the Riverlands where ruled by House Mudd, this place was their seat.", "peddler_maester_master_customize1",
	[]],

	[trp_peddler_maester, "peddler_maester_master_customize1",
	[],
	"Tristifer Mudd, the one they called the Hammer of Justice, ruled from here, and his grave is over there, by the sepulchre.", "peddler_maester_master_customize2",
	[]],

	[plyr|trp_peddler_maester, "peddler_maester_master_customize2",
	[],
	"Fascinating.", "close_window",
	[]],

	[trp_peddler_maester, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"I have to get going.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_peddler_elbert, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What?", "peddler_elbert_introduce_1",
	[]],

	[plyr|trp_peddler_elbert, "peddler_elbert_introduce_1",
	[],
	"What are you doing?", "peddler_elbert_introduce_2",
	[]],

	[trp_peddler_elbert, "peddler_elbert_introduce_2",
	[],
	"Bugger off.", "close_window",
	[]],

	[trp_peddler_elbert, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"Go away.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_peddler_randolf, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What?", "peddler_randolf_introduce_1",
	[]],

	[plyr|trp_peddler_randolf, "peddler_randolf_introduce_1",
	[],
	"What are you doing?", "peddler_randolf_introduce_2",
	[]],

	[trp_peddler_randolf, "peddler_randolf_introduce_2",
	[],
	"Replacing a wheel.", "close_window",
	[]],

	[trp_peddler_randolf, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"Leave me be.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_peddler_polk, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What?", "peddler_polk_introduce_1",
	[]],

	[plyr|trp_peddler_polk, "peddler_polk_introduce_1",
	[],
	"What are you doing?", "peddler_polk_introduce_2",
	[]],

	[trp_peddler_polk, "peddler_polk_introduce_2",
	[],
	"Trying to get this damned wagon moving.", "close_window",
	[]],

	[trp_peddler_polk, "start",
	[
		(troop_is_hero, "$g_talk_troop"),
		(eq, "$talk_context")
	],
	"Go away.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_beowulf_npc_0, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"What do you want?", "beowulf_starter_introduce_1",
	[]],

	[plyr|trp_beowulf_npc_0, "beowulf_starter_introduce_1",
	[],
	"I'm just visiting. Who are you?", "beowulf_starter_introduce_2",
	[]],

	[trp_beowulf_npc_0, "beowulf_starter_introduce_2",
	[],
	"I am Maester Criston, I've been sent by the Citadel to look for valuable books. You look like one who does not care about higher learning, however. If you come back later, I'm sure that singer who arrived a few weeks ago can entertain you.", "close_window",
	[
		(display_message, "@Return later and talk to the singer."),
		(add_troop_to_site, "trp_beowulf_npc_1", "scn_town_36_castle", 1)
	]],

	[trp_beowulf_npc_0, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"What?", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_beowulf_npc_1, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Greetings, {my lord/my lady}. I am Samol, the wandering singer. I have played at the court of Sunspear, and in the Ragman's Harbor, at the Temple of Memory and in the brothels of Flea Bottom", "beowulf_talk",
	[]],

	[plyr|trp_beowulf_npc_1, "beowulf_talk",
	[],
	"Continue, please.", "beowulf_talk2",
	[]],

	[plyr|trp_beowulf_npc_1, "beowulf_talk",
	[],
	"I have other things to do than to listen to a singer. Farewell.", "close_window",
	[]],

	[trp_beowulf_npc_1, "beowulf_talk2",
	[],
	"Oh, there is little more to tell. Every singer wanders far, and boasts of the places he has seen, the people he's met. Say, would you be interested in going on a quest?", "beowulf_talk3",
	[]],

	[plyr|trp_beowulf_npc_1, "beowulf_talk3",
	[],
	"What quest?", "beowulf_talk4",
	[]],

	[plyr|trp_beowulf_npc_1, "beowulf_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_beowulf_npc_1, "beowulf_talk4",
	[],
	"I have a treasure with me, a war mace. It was given to me for services rendered, but I do not have any use for it. It's called Coldbringer. I will give Coldbringer to you, but I want you to get something for me in exchange. A book and a horn.", "beowulf_talk5",
	[]],

	[plyr|trp_beowulf_npc_1, "beowulf_talk5",
	[],
	"A war mace? Hmph, sure. Will any horn and book do or do you need something special?", "beowulf_talk6",
	[]],

	[plyr|trp_beowulf_npc_1, "beowulf_talk5",
	[],
	"I have better things to do than to chase after some horn and glittery jewelry. Farewell.", "close_window",
	[]],

	[trp_beowulf_npc_1, "beowulf_talk6",
	[],
	"Oh, it has to be a very special horn and book. Not just a book, a grimoire. I am old, but you can make the journey I cannot. You must meet an old hermit, Rodgar. I believe he has made his home in the Wolfswood, to the north of Winterfell. He knows where the horn is. Be wary though, I've heard that he's gone quite mad.", "beowulf_talk7",
	[]],

	[plyr|trp_beowulf_npc_1, "beowulf_talk7",
	[],
	"Very well, I'll seek out this Rodgar.", "close_window",
	[
		(remove_troop_from_site, "trp_beowulf_npc_1", "scn_town_36_castle"),
		(enable_party, "p_rodgars_hut"),
		(setup_quest_text, "qst_beowulf_quest"),
		(str_store_string, 2, "@Samol has tasked you with finding his horn and book. Visit Rodgar in the North."),
		(call_script, "script_start_quest", "qst_beowulf_quest", "$g_talk_troop"),
		(display_message, "@Turning around to leave, you notice something odd about Samol. It's almost as if he emits cold...")
	]],

	[plyr|trp_beowulf_npc_1, "beowulf_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_beowulf_npc_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_beowulf_npc_2, "start",
	[],
	"I see the shadows coming! In the north, a blind raven with a thousand eyes, and one! Ohhh, how he torments me! I see him through my trees! He knows me, and I fear him! But he cannot reach me here, the runes protect me! They're strong, strong, strong in the north.", "pj_beowulf_talk",
	[]],

	[plyr|trp_beowulf_npc_2, "pj_beowulf_talk",
	[],
	"Are you mad?", "close_window",
	[]],

	[plyr|trp_beowulf_npc_2, "pj_beowulf_talk",
	[
		(check_quest_active, "qst_beowulf_quest")
	],
	"Are you Rodgar?", "pj_beowulf_talk2",
	[]],

	[trp_beowulf_npc_2, "pj_beowulf_talk2",
	[],
	"I am Rodgar, Rodgar, Rodgar! Maybe I'm a tree, or a raven! Sometimes, I'm an elk! Heh heh! Who are you? Do you serve the mistress of light? I feel her flames! I feel them through the trees! Those cruel flames! Ohhh, I want my cold brothers! Don't fret now, they're coming! Coming soon! They'll quench all the flames, hah! He's as dark as night, the thirteenth night!", "pj_beowulf_talk3",
	[]],

	[plyr|trp_beowulf_npc_2, "pj_beowulf_talk3",
	[],
	"My name is {playername}. Samol sent me. He told me you have a special horn, and he wants it for himself.", "pj_beowulf_talk5",
	[]],

	[trp_beowulf_npc_2, "pj_beowulf_talk5",
	[],
	"Hah! Yes, take the horn. No wait! It's mine! Away with you!", "pj_beowulf_talk6",
	[]],

	[plyr|trp_beowulf_npc_2, "pj_beowulf_talk6",
	[],
	"Give me the horn!", "pj_beowulf_talk8",
	[]],

	[trp_beowulf_npc_2, "pj_beowulf_talk8",
	[],
	"I don't have it! It was taken from me! By the son of the bloody lady! She bathes in blood, even in her death! I see her through the tree. Beneath it, she cuts the maidens throat, and she drinks the blood. Oh, the blood is so pure! Her bats are great, great bats they are! She sits in the castle of the king, the burned castle. It's so massive! Massive castle, massive castle, huge castle! She laughs at me when she sees me! Her eyes! They're terrible! They're so cold!", "close_window",
	[
		(call_script, "script_end_quest", "qst_beowulf_quest"),
		(setup_quest_text, "qst_beowulf_quest1"),
		(str_store_string, 2, "@Rodgar was clearly mad, but it was clear he no longer had the items. He raved about some huge castle, burned and filled with bats. Maybe such a castle lies to the south."),
		(call_script, "script_start_quest", "qst_beowulf_quest1", "$g_talk_troop"),
		(display_message, "@Something rumbles in the bushes. You decide to leave, right away.")
	]],

	[trp_beowulf_npc_3, "start",
	[],
	"What do you want?", "pj_beowulf_talk",
	[]],

	[plyr|trp_beowulf_npc_3, "pj_beowulf_talk",
	[
		(check_quest_active, "qst_beowulf_quest1")
	],
	"What happened to the Lothstons?", "pj_beowulf_talk2",
	[]],

	[trp_beowulf_npc_3, "pj_beowulf_talk2",
	[],
	"Oh, their House went extinct years ago. Rose in rebellion against Aegon the Unlikely. Fools, the lot of them, and cruel fools at that. Or mad, one might say.", "pj_beowulf_talk3",
	[]],

	[plyr|trp_beowulf_npc_3, "pj_beowulf_talk3",
	[],
	"When they where buried, did the servants put anything in the graves?", "pj_beowulf_talk5",
	[]],

	[trp_beowulf_npc_3, "pj_beowulf_talk5",
	[],
	"I don't know. They might have. Come to think of it, I did see a lordling digging around the graveyard a couple days ago. Might be he found something. If you ask me, the dead should be left alone, but it's not my place to question nobles. I don't remember his name, but he had twin towers on his surcoat. What's the name of that house now? House Crey? Something like that.", "pj_beowulf_talk6",
	[]],

	[plyr|trp_beowulf_npc_3, "pj_beowulf_talk6",
	[],
	"I know this sigil well. The Freys of the Crossing. You have been most helpful.", "close_window",
	[
		(call_script, "script_end_quest", "qst_beowulf_quest1"),
		(setup_quest_text, "qst_beowulf_quest2"),
		(str_store_string, 2, "@Ben Blackthumbs told you a Frey lordling had been skulking around the graves of the Lothstons. Perhaps he found the horn."),
		(call_script, "script_start_quest", "qst_beowulf_quest2", "$g_talk_troop"),
		(display_message, "@As you head for the door, you notice the huge bats sleeping in the rafters.")
	]],

	[plyr|trp_beowulf_npc_3, "pj_beowulf_talk",
	[],
	"Who are you?", "morcant_creditos",
	[]],

	[trp_beowulf_npc_3, "morcant_creditos",
	[],
	"I'm Ben, the blacksmith. People call me Ben Blackthumb. Been here since the Lothstons I have. I dare say, even the Brave Companions are not as bad as Mad Danelle. I know that she's mostly used for frightening children, but I tell you, some of the things we saw in those days...", "close_window",
	[]],

	[plyr|trp_beowulf_npc_3, "pj_beowulf_talk",
	[],
	"No matter, I'm leaving.", "close_window",
	[]],

	[trp_beowulf_npc_4, "start",
	[],
	"What do you want, huh?", "pj_beowulf_talk",
	[]],

	[plyr|trp_beowulf_npc_4, "pj_beowulf_talk",
	[
		(eq, "$g_samol_book", 0),
		(check_quest_active, "qst_beowulf_quest2")
	],
	"Have you ever been to Harrenhal?", "pj_beowulf_talk2",
	[]],

	[trp_beowulf_npc_4, "pj_beowulf_talk2",
	[],
	"Yes... what is it to you? You want the book? Take it! I've been plagued by nightmares ever since I dug it out the ground! I thought it was valuable, and it might be! But the pictures in it... and the nightmares... shadows moving across a forest... attacking a hill... there's a huge bear, long dead, eyes blue and cold...", "pj_beowulf_talk3",
	[]],

	[plyr|trp_beowulf_npc_4, "pj_beowulf_talk3",
	[
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(ge, ":free_inventory_capacity", 1)
	],
	"Give me the book AND the horn.", "pj_beowulf_talk4",
	[
		(assign, "$g_samol_book", 1),
		(troop_add_item, "trp_player", "itm_samol_book", 0)
	]],

	[plyr|trp_beowulf_npc_4, "pj_beowulf_talk3",
	[],
	"I can't carry that right now..", "close_window",
	[]],

	[trp_beowulf_npc_4, "pj_beowulf_talk4",
	[],
	"I don't have the horn anymore! It never even left Harrenhal! That goat took it from me! Him and his bloody mummers, pah! They didn't have the right! I was there under a banner of peace, to ransom my cousin!", "pj_beowulf_talk5",
	[]],

	[plyr|trp_beowulf_npc_4, "pj_beowulf_talk5",
	[],
	"Yes, it's all very sad. Where can I find this... goat?", "pj_beowulf_talk6",
	[
		(try_begin),
			(call_script, "script_change_troop_renown", "trp_player", -5),
		(try_end)
	]],

	[plyr|trp_beowulf_npc_4, "pj_beowulf_talk5",
	[],
	"Tell me where the horn is. Now!", "pj_beowulf_talk7",
	[
		(try_begin),
			(call_script, "script_change_troop_renown", "trp_player", 5),
		(try_end)
	]],

	[trp_beowulf_npc_4, "pj_beowulf_talk6",
	[],
	"I imagine he's still at Harrenhal. He's' not actually a goat, you know. Just some sellsword from Qohor. His name is Vargo Hoat.", "close_window",
	[
		(call_script, "script_end_quest", "qst_beowulf_quest2"),
		(setup_quest_text, "qst_beowulf_quest3"),
		(str_store_string, 2, "@Ser Arwood Frey claimed Vargo Hoat stole the horn. Last you heard, he was serving the Lannisters, and should be back at Harrenhal. But if the Starks have taken the castle, it seems unlikely that he's still there. You should bring at least 50 men with you, Vargo Hoat is known to be unpredictable."),
		(call_script, "script_start_quest", "qst_beowulf_quest3", "$g_talk_troop"),
		(display_message, "@Ser Arwood seems half-deranged.")
	]],

	[trp_beowulf_npc_4, "pj_beowulf_talk7",
	[],
	"I yield! I yield! It must still be with Vargo Hoat at Harrenhal! Unless the castles been taken by someone else! I don't think he'd survive long as a captive of the Starks!", "close_window",
	[
		(call_script, "script_end_quest", "qst_beowulf_quest2"),
		(setup_quest_text, "qst_beowulf_quest3"),
		(str_store_string, 2, "@Harwood Frey claimed Vargo Hoat stole the horn. Last you heard, he was serving the Lannisters, and should be back at Harrenhal. But if the Starks have taken the castle, it seems unlikely that he's still there. You should bring at least 150 men with you, Vargo Hoat is known to be unpredictable."),
		(call_script, "script_start_quest", "qst_beowulf_quest3", "$g_talk_troop"),
		(display_message, "@Ser Arwood seems half-deranged.")
	]],

	[plyr|trp_beowulf_npc_4, "pj_beowulf_talk",
	[],
	"Nothing, I'm leaving.", "close_window",
	[]],

	[party_tpl|pt_beowulf_warband, "start",
	[
		(eq, "$talk_context", 2),
		(neq, "$g_talk_troop", "pt_beowulf_warband")
	],
	"Ghive me your gold!!", "order2",
	[]],

	[plyr|party_tpl|pt_beowulf_warband, "order2",
	[],
	"I refuse!", "order3",
	[]],

	[party_tpl|pt_beowulf_warband, "order3",
	[],
	"Whe'll thake it anyphay!", "close_window",
	[
		(encounter_attack)
	]],

	[trp_beowulf_npc_5, "start",
	[],
	"Wfhat do you whant?", "pj_beowulf_talk",
	[]],

	[plyr|trp_beowulf_npc_5, "pj_beowulf_talk",
	[
		(check_quest_active, "qst_beowulf_quest3")
	],
	"Vargo Hoat, I come looking for the horn you stole! Give it to me.", "pj_beowulf_talk2",
	[]],

	[trp_beowulf_npc_5, "pj_beowulf_talk2",
	[],
	"Hah! Pwhy should I do tphat? The horns no longer mine! Ghave it to a man from Dhuskendale. Fhret not, I'll tell you his nhame!", "pj_beowulf_talk3",
	[]],

	[plyr|trp_beowulf_npc_5, "pj_beowulf_talk3",
	[],
	"Fine, just tell me already.", "pj_beowulf_talk5",
	[]],

	[trp_beowulf_npc_5, "pj_beowulf_talk5",
	[],
	"Haph! I lied! I whont tell you his nhame! Go afay!", "close_window",
	[
		(set_spawn_radius, 1),
		(spawn_around_party, "p_castle_29", "pt_beowulf_warband"),
		(party_set_ai_behavior, "pt_beowulf_warband", 0),
		(call_script, "script_end_quest", "qst_beowulf_quest3"),
		(setup_quest_text, "qst_beowulf_quest4"),
		(str_store_string, 2, "@Vargo Hoat claimed to have given the horn to a man heading for Duskendale, perhaps you can find it there. But first you should defeat the Brave Companions."),
		(call_script, "script_start_quest", "qst_beowulf_quest4", "$g_talk_troop"),
		(display_message, "@As you turn to leave, you notice Hoat gesturing towards his men. Perhaps he means to ambush you.")
	]],

	[plyr|trp_beowulf_npc_5, "pj_beowulf_talk",
	[],
	"Who are you?", "nacroxnicke_creditos",
	[]],

	[trp_beowulf_npc_5, "nacroxnicke_creditos",
	[],
	"Vhargo Hoat, chaptain of the Brave Companions!", "close_window",
	[]],

	[plyr|trp_beowulf_npc_5, "pj_beowulf_talk",
	[],
	"Nothing.", "close_window",
	[]],

	[trp_beowulf_npc_6, "start",
	[],
	"What do you want?", "pj_beowulf_talk",
	[]],

	[plyr|trp_beowulf_npc_6, "pj_beowulf_talk",
	[
		(eq, "$g_samol_horn", 0),
		(check_quest_active, "qst_beowulf_quest5")
	],
	"Do you have the horn?", "pj_beowulf_talk2",
	[]],

	[trp_beowulf_npc_6, "pj_beowulf_talk2",
	[],
	"Yes, I do. I've been waiting for you, {playername}. You want the horn? Sure you do. But you can't have it. The horn is evil. Very evil. There's a darkness to it, a terrible darkness. Let me keep it, and I'll pray for you. The Lord of Light will surely grant you great favors!", "pj_beowulf_talk3",
	[]],

	[plyr|trp_beowulf_npc_6, "pj_beowulf_talk3",
	[
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(ge, ":free_inventory_capacity", 1)
	],
	"No... I already gave my word, and I want the horn. Now.", "pj_beowulf_talk4",
	[]],

	[plyr|trp_beowulf_npc_6, "pj_beowulf_talk3",
	[],
	"I can't carry it right now.", "close_window",
	[]],

	[trp_beowulf_npc_6, "pj_beowulf_talk4",
	[],
	"Well, I am no warrior to fight you for it. But I have my tricks, and I'm handy with a dagger. Very handy. If you truly want the horn, all you have to do is solve a small riddle. The Lord of Light will favor me, and blind your mind to the true answer. If you fail, the horn shall never belong to you. I've coated the inside with wildfire, and a single shake will make the horn catch fire.", "pj_beowulf_talk5",
	[]],

	[trp_beowulf_npc_6, "pj_beowulf_talk5",
	[],
	"Hear my riddle! When my first is a task to a young lady of spirit, and my second confines her to finish the piece, how hard is her fate! But how great is her merit, if by taking me whole she effects her release!", "pj_beowulf_talk6",
	[]],

	[plyr|trp_beowulf_npc_6, "pj_beowulf_talk6",
	[],
	"Childbirth.", "pj_beowulf_talk7",
	[]],

	[plyr|trp_beowulf_npc_6, "pj_beowulf_talk6",
	[],
	"Life.", "pj_beowulf_talk8",
	[]],

	[plyr|trp_beowulf_npc_6, "pj_beowulf_talk6",
	[],
	"Marriage.", "pj_beowulf_talk8",
	[]],

	[plyr|trp_beowulf_npc_6, "pj_beowulf_talk6",
	[],
	"Farming.", "pj_beowulf_talk8",
	[]],

	[trp_beowulf_npc_6, "pj_beowulf_talk7",
	[],
	"No! You don't know who made this horn! The Great Other had a hand in it! I can feel it! Don't take it!", "close_window",
	[
		(assign, "$g_samol_horn", 1),
		(troop_add_item, "trp_player", "itm_samol_horn", 0),
		(add_troop_to_site, "trp_beowulf_npc_7", "scn_town_36_castle", 1),
		(call_script, "script_end_quest", "qst_beowulf_quest5"),
		(setup_quest_text, "qst_beowulf_quest6"),
		(str_store_string, 2, "@You've found the horn and the book. Return to Samol and claim your reward."),
		(call_script, "script_start_quest", "qst_beowulf_quest6", "$g_talk_troop"),
		(display_message, "@As you take the horn, you notice something scribbled on it. You can only make out the words 'YGG... GREY KING... TREE'.")
	]],

	[trp_beowulf_npc_6, "pj_beowulf_talk8",
	[],
	"Oh, that is wrong, the Lord of Light truly favors his servants. Your quest ends here.", "close_window",
	[
		(call_script, "script_end_quest", "qst_beowulf_quest4")
	]],

	[plyr|trp_beowulf_npc_6, "pj_beowulf_talk",
	[],
	"I forgot.", "close_window",
	[]],

	[trp_beowulf_npc_7, "start",
	[],
	"Yes, {playername}?", "pj_samol_talk",
	[]],

	[plyr|trp_beowulf_npc_7, "pj_samol_talk",
	[
		(player_has_item, "itm_samol_horn"),
		(player_has_item, "itm_samol_book"),
		(check_quest_active, "qst_beowulf_quest6")
	],
	"I have the horn and the book.", "beowulf_espada",
	[]],

	[trp_beowulf_npc_7, "beowulf_espada",
	[],
	"Yes! I finally have them! Hah hah! The shadows, oh how they'll dance, we'll all dance! And I'll be free! Free to see the world once more! He'll free me! Oh the cold winds! Here, take this!", "beowulf_espada2",
	[
		(troop_remove_items, "trp_player", "itm_samol_book", 1),
		(troop_remove_items, "trp_player", "itm_samol_horn", 1),
		(troop_add_item, "trp_player", "itm_coldbringer"),
		(add_xp_as_reward, 1500),
		(succeed_quest, "qst_beowulf_quest5"),
		(remove_troop_from_site, "trp_beowulf_npc_7", "scn_town_36_castle"),
		(call_script, "script_end_quest", "qst_beowulf_quest6")
	]],

	[plyr|trp_beowulf_npc_7, "beowulf_espada2",
	[],
	"Who are you really?", "new_one_beowulf",
	[]],

	[trp_beowulf_npc_7, "new_one_beowulf",
	[],
	"Lomas... Lomas Longstrider... years and years ago... before I went to see the far end of the world... Be quiet! Don't draw his attention! Always his attention is on his servants! The thirteenth is the king!", "close_window",
	[
		(assign, "$beowulf_holy_sword", 2)
	]],

	[trp_beowulf_npc_7, "start",
	[
		(eq, "$beowulf_holy_sword", 2)
	],
	"Greetings {playername}.", "bye31",
	[]],

	[plyr|trp_beowulf_npc_7, "bye31",
	[],
	"Greetings to you too, bard.", "close_window",
	[]],

	[plyr|trp_beowulf_npc_7, "pj_samol_talk",
	[],
	"I forgot.", "close_window",
	[]],

	[trp_relic_npc_0, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"Yes, can I help you?", "wildfire_starter_introduce_1",
	[]],

	[plyr|trp_relic_npc_0, "wildfire_starter_introduce_1",
	[],
	"Who's in charge here?", "wildfire_starter_introduce_2",
	[]],

	[trp_relic_npc_0, "wildfire_starter_introduce_2",
	[],
	"That would be Elder Brother, but I'm afraid he's not here right now. He went to Fairmarket to enlist the help of valiant men to right the wrongs done to us.", "close_window",
	[
		(display_message, "@Go to Fairmarket and talk to the Elder Brother."),
		(add_troop_to_site, "trp_relic_npc_1", "scn_town_9_castle", 11)
	]],

	[trp_relic_npc_0, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Excuse me, I'm very busy.", "close_window",
	[
		(agent_play_sound, "$g_talk_agent", "snd_quest_completed")
	]],

	[trp_relic_npc_1, "start",
	[
		(eq, "$g_talk_troop_met", 0)
	],
	"The Father watch over you, {brother/sister}. Have you come to help us in our time of need?", "wildfire_talk",
	[]],

	[plyr|trp_relic_npc_1, "wildfire_talk",
	[],
	"I have. What can I help with?", "wildfire_talk2",
	[]],

	[plyr|trp_relic_npc_1, "wildfire_talk",
	[],
	"I'm sorry, no.", "close_window",
	[]],

	[trp_relic_npc_1, "wildfire_talk2",
	[],
	"A company of our brothers recently returned from a journey to the Starry Sept at Oldtown. Amongst the things they brought north was a relic of Baelor the Blessed himself! A ring, said to have been worn by the king when he went to Dorne, to rescue the Dragonknight from the pit of snakes! But on the road, not far from Raventree Hall, they where attacked by Aegon Bloodborn, the outlaw son of Ser Aenys Frey. I thought he'd died years ago, but brother Toman swore it was him. He stole all of the brothers supplies and goods, and the ring besides! Find him, {playername}, and bring him to justice! There's been reports of outlaws close to The High Fall, might be you'd find him there.", "wildfire_talk3",
	[]],

	[plyr|trp_relic_npc_1, "wildfire_talk3",
	[],
	"I'll bring you his head!", "wildfire_talk4",
	[]],

	[plyr|trp_relic_npc_1, "wildfire_talk3",
	[],
	"Excuse me, I have important matters that require my attention.", "close_window",
	[]],

	[trp_relic_npc_1, "wildfire_talk4",
	[],
	"He might also have sought refuge with his sire at The Crossing. With war spreading across the land, one outlaw hiding at his grandfathers castle could easily go unnoticed.", "close_window",
	[
		(add_troop_to_site, "trp_aegon_bloodborn", "scn_castle_37_interior", 11),
		(remove_troop_from_site, "trp_relic_npc_1", "scn_town_9_castle"),
		(setup_quest_text, "qst_relic_quest"),
		(str_store_string, 2, "@The Elder Brother has tasked you with finding Aegon Bloodborn, and bring him to justice. He might be close to The High Fall, or he might be hiding at his grandfathers castle, The Crossing."),
		(call_script, "script_start_quest", "qst_relic_quest", "$g_talk_troop")
	]],

	[plyr|trp_relic_npc_1, "wildfire_talk7",
	[],
	"I am not interested.", "close_window",
	[]],

	[trp_relic_npc_1, "start",
	[
		(troop_is_hero, "$g_talk_troop")
	],
	"Yes?", "close_window",
	[]],

	[trp_aegon_bloodborn, "start",
	[],
	"Dog! What are you here for?", "pj_wildfire_talk",
	[]],

	[plyr|trp_aegon_bloodborn, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_relic_quest")
	],
	"I've come for the relic! Hand it over!", "pj_wildfire_talk2",
	[]],

	[trp_aegon_bloodborn, "pj_wildfire_talk2",
	[],
	"Hah! When I'm done with you, not even the prayers of the High Septon will save you! But do you truly believe you can harm me here, in my lord grandfathers casle?", "pj_wildfire_talk3",
	[]],

	[plyr|trp_aegon_bloodborn, "pj_wildfire_talk3",
	[],
	"No, but you will have to leave eventually. When you do, you die.", "pj_wildfire_talk5",
	[]],

	[trp_aegon_bloodborn, "pj_wildfire_talk5",
	[],
	"Maybe it'll be you choking on your own blood!", "close_window",
	[
		(call_script, "script_end_quest", "qst_relic_quest"),
		(add_troop_to_site, "trp_relic_npc_2", "scn_town_9_castle", 11),
		(remove_troop_from_site, "trp_aegon_bloodborn", "scn_castle_37_interior"),
		(set_spawn_radius, 1),
		(spawn_around_party, "p_castle_37", "pt_arrians"),
		(party_set_ai_behavior, "pt_arrians", 0),
		(setup_quest_text, "qst_relic_quest1"),
		(str_store_string, 2, "@Defeat Aegon Bloodborn, then return to the Elder Brother."),
		(add_xp_as_reward, 400),
		(call_script, "script_start_quest", "qst_relic_quest1", "$g_talk_troop")
	]],

	[plyr|trp_aegon_bloodborn, "pj_wildfire_talk",
	[],
	"Hmph!", "close_window",
	[]],

	[party_tpl|pt_arrians, "start",
	[
		(eq, "$talk_context", 2),
		(neq, "$g_talk_troop", "pt_arrians")
	],
	"I'll hang you from a tree!", "order2",
	[]],

	[plyr|party_tpl|pt_arrians, "order2",
	[],
	"We'll see about that!", "order3",
	[]],

	[party_tpl|pt_arrians, "order3",
	[],
	"I'll make you regret this!", "close_window",
	[
		(encounter_attack)
	]],

	[trp_relic_npc_2, "start",
	[],
	"Did you bring Aegon Bloodborn to justice?", "pj_wildfire_talk",
	[]],

	[plyr|trp_relic_npc_2, "pj_wildfire_talk",
	[
		(check_quest_active, "qst_relic_quest1")
	],
	"Yes! It was quite difficult.", "pj_wildfire_talk2",
	[]],

	[trp_relic_npc_2, "pj_wildfire_talk2",
	[],
	"Really? Well done {playername}! I have a gift for you, a book. The Seven-Pointed Star, the holy book of our faith. Treasure it, to show your devotion to the Seven!", "pj_wildfire_talk3",
	[
		(troop_add_item, "trp_player", "itm_book_bible", 0)
	]],

	[plyr|trp_relic_npc_2, "pj_wildfire_talk3",
	[],
	"Excellent!", "close_window",
	[
		(call_script, "script_change_player_honor", 5),
		(call_script, "script_change_player_relation_with_troop", "trp_knight_5_1", -10),
		(call_script, "script_change_player_relation_with_troop", "trp_knight_5_2", -10),
		(call_script, "script_change_player_relation_with_troop", "trp_knight_5_3", -10),
		(call_script, "script_change_player_relation_with_troop", "trp_knight_5_13", -10),
		(remove_troop_from_site, "trp_relic_npc_2", "scn_town_9_castle"),
		(call_script, "script_end_quest", "qst_relic_quest1"),
		(add_xp_as_reward, 1000)
	]],

	[plyr|trp_relic_npc_2, "pj_wildfire_talk",
	[],
	"May I know more about you?", "morcant_creditos",
	[]],

	[trp_relic_npc_2, "morcant_creditos",
	[],
	"I am but a humble servant of the Seven.", "close_window",
	[]],

	[plyr|trp_relic_npc_2, "pj_wildfire_talk",
	[],
	"Nevermind.", "close_window",
	[]],

	[anyone|auto_proceed, "start",
	[
		(is_between, "$g_talk_troop", "trp_town_1_master_craftsman", "trp_zendar_chest"),
		(party_get_slot, ":g_encountered_party_center_player_enterprise_consumption_order", "$g_encountered_party", slot_center_player_enterprise_consumption_order),
		(ge, ":g_encountered_party_center_player_enterprise_consumption_order", 2),
		(assign, reg4, ":g_encountered_party_center_player_enterprise_consumption_order")
	],
	"{!}.", "start_craftsman_soon",
	[]],

	[anyone, "start_craftsman_soon",
	[],
	"Good day, my {lord/lady}. We hope to begin production in about {reg4} days", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_town_1_master_craftsman", "trp_zendar_chest")
	],
	"Good day, my {lord/lady}. We are honored that you have chosen to visit us. What do you require?", "master_craftsman_talk",
	[]],

	[anyone, "master_craftsman_pretalk",
	[],
	"Very good, my {lord/lady}. Do you require anything else?", "master_craftsman_talk",
	[]],

	[anyone|plyr, "master_craftsman_talk",
	[],
	"Let's go over the accounts.", "master_craftsman_accounts",
	[]],

	[anyone|plyr, "master_craftsman_talk",
	[],
	"Let's check the inventories.", "master_craftsman_pretalk",
	[
		(change_screen_loot, "$g_talk_troop")
	]],

	[anyone|plyr, "master_craftsman_talk",
	[
		(party_slot_eq, "$g_encountered_party", slot_center_player_enterprise_production_order, 1)
	],
	"I'd like you to sell goods as they are produced.", "master_craftsman_pretalk",
	[
		(party_set_slot, "$g_encountered_party", slot_center_player_enterprise_production_order, 0)
	]],

	[anyone|plyr, "master_craftsman_talk",
	[
		(party_slot_eq, "$g_encountered_party", slot_center_player_enterprise_production_order, 0)
	],
	"I'd like you to keep all goods in the warehouse until I arrive.", "master_craftsman_pretalk",
	[
		(party_set_slot, "$g_encountered_party", slot_center_player_enterprise_production_order, 1)
	]],

	[anyone, "master_craftsman_accounts",
	[],
	"We currently produce {s3} worth {reg1} coins each week, while the quantity of {s4} needed to manufacture it costs {reg2}, and labor and upkeep are {reg3}.{s9} This means that we theoretically make a {s12} of {reg0} coins a week, assuming that we have no raw materials in the inventories, and that we sell directly to the market.", "master_craftsman_pretalk",
	[
		(party_get_slot, ":g_encountered_party_center_player_enterprise", "$g_encountered_party", slot_center_player_enterprise),
		(call_script, "script_process_player_enterprise", ":g_encountered_party_center_player_enterprise", "$g_encountered_party"),
		(try_begin),
			(ge, reg0, 0),
			(str_store_string, 12, "str_profit"),
		(else_try),
			(str_store_string, 12, "str_loss"),
		(try_end),
		(str_store_item_name, 3, ":g_encountered_party_center_player_enterprise"),
		(item_get_slot, ":g_encountered_party_center_player_enterprise_primary_raw_material", ":g_encountered_party_center_player_enterprise", slot_item_primary_raw_material),
		(str_store_item_name, 4, ":g_encountered_party_center_player_enterprise_primary_raw_material"),
		(item_get_slot, ":g_encountered_party_center_player_enterprise_secondary_raw_material", ":g_encountered_party_center_player_enterprise", slot_item_secondary_raw_material),
		(str_clear, 9),
		(try_begin),
			(gt, ":g_encountered_party_center_player_enterprise_secondary_raw_material", 0),
			(str_store_item_name, 11, ":g_encountered_party_center_player_enterprise_secondary_raw_material"),
			(str_store_string, 9, "str_describe_secondary_input"),
		(try_end)
	]],

	[anyone|plyr, "master_craftsman_talk",
	[],
	"Could you explain my options related to production?", "master_craftsman_production_options",
	[]],

	[anyone, "master_craftsman_production_options",
	[
		(str_store_party_name, 5, "$g_encountered_party")
	],
	"Certainly, my {lord/lady}. Most of the time, the most profitable thing for you to do would be to let us buy raw materials and sell the finished goods directly to the market. Because of our longstanding relations with the local merchants, we can usually get a very good price.", "master_craftsman_production_options_2",
	[]],

	[anyone, "master_craftsman_production_options_2",
	[
		(str_store_party_name, 5, "$g_encountered_party")
	],
	"However, if you find that you can acquire raw materials cheaper outside {s5}, you may place them in the inventories, and we will use them instead of buying from the market. Likewise, if you feel that you can get a better price for the finished goods elsewhere, then you may ask us to deposit what we produce in our warehouses for you to take.", "master_craftsman_pretalk",
	[]],

	[anyone|plyr, "master_craftsman_talk",
	[],
	"It will no longer be possible for me to continue operating this enterprise.", "master_craftsman_auction_price",
	[]],

	[anyone, "master_craftsman_auction_price",
	[
		(party_get_slot, ":g_encountered_party_center_player_enterprise", "$g_encountered_party", slot_center_player_enterprise),
		(item_get_slot, ":g_encountered_party_center_player_enterprise_base_price", ":g_encountered_party_center_player_enterprise", slot_item_base_price),
		(item_get_slot, ":g_encountered_party_center_player_enterprise_output_per_run", ":g_encountered_party_center_player_enterprise", slot_item_output_per_run),
		(store_mul, "$liquidation_price", ":g_encountered_party_center_player_enterprise_base_price", ":g_encountered_party_center_player_enterprise_output_per_run"),
		(val_mul, "$liquidation_price", 4),
		(troop_get_inventory_capacity, ":inventory_capacity_l_g_talk_troop", "$g_talk_troop"),
		(try_for_range, ":number", 0, ":inventory_capacity_l_g_talk_troop"),
			(troop_get_inventory_slot, ":inventory_slot_g_talk_troop_number", "$g_talk_troop", ":number"),
			(gt, ":inventory_slot_g_talk_troop_number", 0),
			(item_get_slot, ":inventory_slot_g_talk_troop_number_base_price", ":inventory_slot_g_talk_troop_number", slot_item_base_price),
			(store_sub, ":value", ":inventory_slot_g_talk_troop_number", "itm_trade_spice"),
			(val_add, ":value", 267),
			(party_get_slot, ":g_encountered_party_value", "$g_encountered_party", ":value"),
			(val_mul, ":inventory_slot_g_talk_troop_number_base_price", ":g_encountered_party_value"),
			(val_div, ":inventory_slot_g_talk_troop_number_base_price", 1200),
			(val_add, "$liquidation_price", ":inventory_slot_g_talk_troop_number_base_price"),
		(try_end),
		(assign, reg4, "$liquidation_price")
	],
	"A pity, my {lord/lady}. If we sell the land and the equipment, and liquidate the inventories, I estimate that we can get {reg4} coins.", "master_craftsman_auction_decide",
	[]],

	[anyone|plyr, "master_craftsman_auction_decide",
	[],
	"That sounds reasonable. Please proceed with the sale.", "master_craftsman_liquidation",
	[
		(troop_add_gold, "trp_player", "$liquidation_price"),
		(troop_clear_inventory, "$g_talk_troop"),
		(party_set_slot, "$g_encountered_party", slot_center_player_enterprise, 0),
		(party_set_slot, "$g_encountered_party", slot_center_player_enterprise_production_order, 0)
	]],

	[anyone|plyr, "master_craftsman_auction_decide",
	[],
	"Hmm. Let's hold off on that.", "master_craftsman_pretalk",
	[]],

	[anyone, "master_craftsman_liquidation",
	[],
	"As you wish. It was an honor to have been in your employ.", "close_window",
	[
		(finish_mission)
	]],

	[anyone|plyr, "master_craftsman_talk",
	[
		(eq, 1, 0)
	],
	"{!}As you wish, {my lord/my lady}. It was an honor to work in your employ.", "close_window",
	[]],

	[anyone|plyr, "master_craftsman_talk",
	[],
	"That is all for now.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_town_1_mayor", "trp_village_1_elder"),
		(eq, "$g_talk_troop_met", 0),
		(this_or_next|eq, "$players_kingdom", "$g_encountered_party_faction"),
		(eq, "$g_encountered_party_faction", "fac_player_supporters_faction"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Good day, {s0}.", "mayor_begin",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_town_1_mayor", "trp_village_1_elder"),
		(eq, "$g_talk_troop_met", 0),
		(str_store_party_name, 9, "$current_town")
	],
	"Hello stranger, you seem to be new to {s9}. I am the guild master of the town.", "mayor_talk",
	[
		(add_xp_as_reward, 300)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_town_1_mayor", "trp_village_1_elder")
	],
	"Good day, {playername}.", "mayor_begin",
	[
		(try_begin),
			(eq, "$merchant_offered_quest", "qst_persuade_lords_to_make_peace"),
			(party_get_slot, ":persuade_lords_to_make_peace_ignore_player_until", "qst_persuade_lords_to_make_peace", slot_party_ignore_player_until),
			(party_get_slot, ":persuade_lords_to_make_peace_15", "qst_persuade_lords_to_make_peace", 15),
			(store_relation, ":relation_persuade_lords_to_make_peace_ignore_player_until_persuade_lords_to_make_peace_15", ":persuade_lords_to_make_peace_ignore_player_until", ":persuade_lords_to_make_peace_15"),
			(ge, ":relation_persuade_lords_to_make_peace_ignore_player_until_persuade_lords_to_make_peace_15", 0),
			(assign, "$merchant_quest_last_offerer", -1),
			(assign, "$merchant_offered_quest", -1),
		(try_end)
	]],

	[anyone, "mayor_begin",
	[
		(check_quest_active, "qst_persuade_lords_to_make_peace"),
		(quest_slot_eq, "qst_persuade_lords_to_make_peace", slot_quest_giver_troop, "$g_talk_troop"),
		(check_quest_succeeded, "qst_persuade_lords_to_make_peace"),
		(quest_get_slot, ":persuade_lords_to_make_peace_target_troop", "qst_persuade_lords_to_make_peace", slot_quest_target_troop),
		(quest_get_slot, ":persuade_lords_to_make_peace_object_troop", "qst_persuade_lords_to_make_peace", slot_quest_object_troop),
		(val_mul, ":persuade_lords_to_make_peace_target_troop", -1),
		(val_mul, ":persuade_lords_to_make_peace_object_troop", -1),
		(quest_get_slot, ":persuade_lords_to_make_peace_target_faction", "qst_persuade_lords_to_make_peace", slot_quest_target_faction),
		(quest_get_slot, ":persuade_lords_to_make_peace_object_faction", "qst_persuade_lords_to_make_peace", slot_quest_object_faction),
		(str_store_troop_name, 12, ":persuade_lords_to_make_peace_target_troop"),
		(str_store_troop_name, 13, ":persuade_lords_to_make_peace_object_troop"),
		(str_store_faction_name, 14, ":persuade_lords_to_make_peace_target_faction"),
		(str_store_faction_name, 15, ":persuade_lords_to_make_peace_object_faction"),
		(str_store_party_name, 19, "$current_town")
	],
	"{playername}, it was an incredible feat to get {s14} and {s15} make peace, and you made it happen. Your involvement has not only saved our town from disaster, but it has also saved thousands of lives, and put an end to all the grief this bitter war has caused. As the townspeople of {s19}, know that we'll be good on our word, and we are ready to pay the {reg12} coins we promised.", "lord_persuade_lords_to_make_peace_completed",
	[
		(quest_get_slot, ":persuade_lords_to_make_peace_target_faction", "qst_persuade_lords_to_make_peace", slot_quest_target_faction),
		(quest_get_slot, ":persuade_lords_to_make_peace_object_faction", "qst_persuade_lords_to_make_peace", slot_quest_object_faction),
		(assign, "$g_force_peace_faction_1", ":persuade_lords_to_make_peace_target_faction"),
		(assign, "$g_force_peace_faction_2", ":persuade_lords_to_make_peace_object_faction"),
		(quest_get_slot, ":persuade_lords_to_make_peace_gold_reward", "qst_persuade_lords_to_make_peace", slot_quest_gold_reward),
		(assign, reg12, ":persuade_lords_to_make_peace_gold_reward"),
		(add_xp_as_reward, 4000)
	]],

	[anyone|plyr, "lord_persuade_lords_to_make_peace_completed",
	[],
	"Thank you. Let me have the money.", "lord_persuade_lords_to_make_peace_pay",
	[]],

	[anyone|plyr, "lord_persuade_lords_to_make_peace_completed",
	[],
	"No need for a payment. I only did what was right.", "lord_persuade_lords_to_make_peace_no_pay",
	[]],

	[anyone, "lord_persuade_lords_to_make_peace_pay",
	[],
	"Oh, yes, of course. We had already got the money for you. Here, please accept these {reg12} coins together with our most sincere thanks. Me and the people of our town will not forget your help.", "close_window",
	[
		(quest_get_slot, ":persuade_lords_to_make_peace_gold_reward", "qst_persuade_lords_to_make_peace", slot_quest_gold_reward),
		(call_script, "script_troop_add_gold", "trp_player", ":persuade_lords_to_make_peace_gold_reward"),
		(call_script, "script_change_player_relation_with_center", "$current_town", 5),
		(call_script, "script_end_quest", "qst_persuade_lords_to_make_peace"),
		(quest_get_slot, ":persuade_lords_to_make_peace_gold_reward", "qst_persuade_lords_to_make_peace", slot_quest_gold_reward),
		(assign, reg12, ":persuade_lords_to_make_peace_gold_reward")
	]],

	[anyone, "lord_persuade_lords_to_make_peace_no_pay",
	[],
	"You are indeed an extraordenary person, and it is an honour for me to have known you. You not only did what was impossible and put an end to this terrible war, but you won't even accept a reward for it. Very well, I will not insist on the matter, but please know that you will have our eternal respect and gratitude.", "close_window",
	[
		(call_script, "script_change_player_honor", 3),
		(call_script, "script_change_player_relation_with_center", "$current_town", 8),
		(call_script, "script_end_quest", "qst_persuade_lords_to_make_peace")
	]],

	[anyone, "mayor_begin",
	[
		(check_quest_active, "qst_deal_with_night_bandits"),
		(quest_slot_eq, "qst_deal_with_night_bandits", slot_quest_giver_troop, "$g_talk_troop"),
		(check_quest_succeeded, "qst_deal_with_night_bandits")
	],
	"Very nice work, {playername}, you made short work of those lawless curs. Thank you kindly for all your help, and please accept this bounty of 150 coins.", "lord_deal_with_night_bandits_completed",
	[
		(add_xp_as_reward, 200),
		(call_script, "script_troop_add_gold", "trp_player", 150),
		(call_script, "script_change_player_relation_with_center", "$current_town", 1),
		(call_script, "script_end_quest", "qst_deal_with_night_bandits")
	]],

	[anyone|plyr, "lord_deal_with_night_bandits_completed",
	[],
	"It was my pleasure, {s65}.", "close_window",
	[]],

	[anyone, "mayor_begin",
	[
		(check_quest_active, "qst_deal_with_looters"),
		(quest_slot_eq, "qst_deal_with_looters", slot_quest_giver_troop, "$g_talk_troop")
	],
	"Ah, {playername}. Have you any progress to report?", "mayor_looters_quest_response",
	[]],

	[anyone|plyr, "mayor_looters_quest_response",
	[
		(try_begin),
			(eq, "$troop_trees", "trp_troop_tree_0"),
			(store_num_parties_destroyed_by_player, ":num_parties_destroyed_by_player_looters", "pt_looters"),
			(party_template_get_slot, ":party_template_slot_looters_party_template_num_killed", "pt_looters", slot_party_template_num_killed),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_1"),
			(store_num_parties_destroyed_by_player, ":num_parties_destroyed_by_player_looters", "pt_looters_r"),
			(party_template_get_slot, ":party_template_slot_looters_party_template_num_killed", "pt_looters_r", slot_party_template_num_killed),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_2"),
			(store_num_parties_destroyed_by_player, ":num_parties_destroyed_by_player_looters", "pt_looters_e"),
			(party_template_get_slot, ":party_template_slot_looters_party_template_num_killed", "pt_looters_e", slot_party_template_num_killed),
		(try_end),
		(val_sub, ":num_parties_destroyed_by_player_looters", ":party_template_slot_looters_party_template_num_killed"),
		(quest_get_slot, ":deal_with_looters_current_state", "qst_deal_with_looters", slot_quest_current_state),
		(lt, ":deal_with_looters_current_state", ":num_parties_destroyed_by_player_looters")
	],
	"I've killed some looters.", "mayor_looters_quest_destroyed",
	[]],

	[anyone|plyr, "mayor_looters_quest_response",
	[
		(eq, 1, 0)
	],
	"I've brought you some goods.", "mayor_looters_quest_goods",
	[]],

	[anyone|plyr, "mayor_looters_quest_response",
	[],
	"Not yet, sir. Farewell.", "close_window",
	[]],

	[anyone, "mayor_looters_quest_destroyed",
	[],
	"Aye, my scouts saw the whole thing. That should make anyone else think twice before turning outlaw! The bounty is 70 coins for every band, so that makes {reg1} in total. Here is your money, as promised.", "mayor_looters_quest_destroyed_2",
	[
		(try_begin),
			(eq, "$troop_trees", "trp_troop_tree_0"),
			(store_num_parties_destroyed_by_player, ":num_parties_destroyed_by_player_looters", "pt_looters"),
			(party_template_get_slot, ":party_template_slot_looters_party_template_num_killed", "pt_looters", slot_party_template_num_killed),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_1"),
			(store_num_parties_destroyed_by_player, ":num_parties_destroyed_by_player_looters", "pt_looters_r"),
			(party_template_get_slot, ":party_template_slot_looters_party_template_num_killed", "pt_looters_r", slot_party_template_num_killed),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_2"),
			(store_num_parties_destroyed_by_player, ":num_parties_destroyed_by_player_looters", "pt_looters_e"),
			(party_template_get_slot, ":party_template_slot_looters_party_template_num_killed", "pt_looters_e", slot_party_template_num_killed),
		(try_end),
		(val_sub, ":num_parties_destroyed_by_player_looters", ":party_template_slot_looters_party_template_num_killed"),
		(quest_get_slot, ":deal_with_looters_current_state", "qst_deal_with_looters", slot_quest_current_state),
		(store_sub, ":value", ":num_parties_destroyed_by_player_looters", ":deal_with_looters_current_state"),
		(val_mul, ":value", 70),
		(assign, reg1, ":value"),
		(call_script, "script_troop_add_gold", "trp_player", ":value"),
		(assign, ":deal_with_looters_current_state", ":num_parties_destroyed_by_player_looters"),
		(quest_set_slot, "qst_deal_with_looters", slot_quest_current_state, ":deal_with_looters_current_state")
	]],

	[anyone, "mayor_looters_quest_destroyed_2",
	[
		(quest_get_slot, ":deal_with_looters_target_amount", "qst_deal_with_looters", slot_quest_target_amount),
		(quest_slot_ge, "qst_deal_with_looters", 11, ":deal_with_looters_target_amount"),
		(quest_get_slot, ":deal_with_looters_xp_reward", "qst_deal_with_looters", slot_quest_xp_reward),
		(quest_get_slot, ":deal_with_looters_gold_reward", "qst_deal_with_looters", slot_quest_gold_reward),
		(add_xp_as_reward, ":deal_with_looters_xp_reward"),
		(call_script, "script_troop_add_gold", "trp_player", ":deal_with_looters_gold_reward"),
		(call_script, "script_change_troop_renown", "trp_player", 5),
		(call_script, "script_change_player_relation_with_center", "$current_town", 5),
		(call_script, "script_end_quest", "qst_deal_with_looters"),
		(try_for_parties, ":var_4"),
			(party_get_template_id, ":template_id_var_4", ":var_4"),
			(this_or_next|eq, ":template_id_var_4", "pt_looters"),
			(this_or_next|eq, ":template_id_var_4", "pt_looters_r"),
			(eq, ":template_id_var_4", "pt_looters_e"),
			(party_set_flags, ":var_4", 262144, 0),
		(try_end)
	],
	"And that's not the only good news! Thanks to you, the looters have ceased to be a threat. We've not had a single attack reported for some time now. If there are any of them left, they've either run off or gone deep into hiding. That's good for business, and what's good for business is good for the town! I think that concludes our arrangement, {playername}. Please accept this silver as a token of my gratitude. Thank you, and farewell.", "close_window",
	[]],

	[anyone, "mayor_looters_quest_destroyed_2",
	[],
	"Anything else you need?", "mayor_looters_quest_response",
	[]],

	[anyone, "mayor_looters_quest_goods",
	[
		(quest_get_slot, reg1, "qst_deal_with_looters", slot_quest_target_item)
	],
	"Hah, I knew I could count on you! Just tell me which item to take from your baggage, and I'll send some men to collect it. I still need {reg1} coins worth of goods.", "mayor_looters_quest_goods_response",
	[]],

	[anyone|repeat_for_100|plyr, "mayor_looters_quest_goods_response",
	[
		(store_repeat_object, ":repeat_object"),
		(val_add, ":repeat_object", "itm_trade_spice"),
		(is_between, ":repeat_object", "itm_trade_spice", "itm_trade_dummy01"),
		(player_has_item, ":repeat_object"),
		(str_store_item_name, 5, ":repeat_object")
	],
	"{s5}.", "mayor_looters_quest_goods_2",
	[
		(store_repeat_object, ":repeat_object"),
		(val_add, ":repeat_object", "itm_trade_spice"),
		(troop_remove_items, "trp_player", ":repeat_object", 1),
		(assign, ":var_2", reg0),
		(call_script, "script_troop_add_gold", "trp_player", ":var_2"),
		(quest_get_slot, ":deal_with_looters_target_item", "qst_deal_with_looters", slot_quest_target_item),
		(val_sub, ":deal_with_looters_target_item", ":var_2"),
		(quest_set_slot, "qst_deal_with_looters", slot_quest_target_item, ":deal_with_looters_target_item"),
		(str_store_item_name, 6, ":repeat_object")
	]],

	[anyone|plyr, "mayor_looters_quest_goods_response",
	[],
	"Nothing at the moment, sir.", "mayor_looters_quest_goods_3",
	[]],

	[anyone, "mayor_looters_quest_goods_3",
	[],
	"Anything else you need?", "mayor_looters_quest_response",
	[]],

	[anyone, "mayor_looters_quest_goods_2",
	[
		(quest_slot_ge, "qst_deal_with_looters", 14, 1),
		(quest_get_slot, reg1, "qst_deal_with_looters", slot_quest_target_item)
	],
	"Excellent, here is the money for your {s6}. Do you have any more goods to give me? I still need {reg1} coins worth of goods.", "mayor_looters_quest_goods_response",
	[]],

	[anyone, "mayor_looters_quest_goods_2",
	[
		(neg|quest_slot_ge, "qst_deal_with_looters", 14, 1),
		(quest_get_slot, ":deal_with_looters_xp_reward", "qst_deal_with_looters", slot_quest_xp_reward),
		(quest_get_slot, ":deal_with_looters_gold_reward", "qst_deal_with_looters", slot_quest_gold_reward),
		(add_xp_as_reward, ":deal_with_looters_xp_reward"),
		(call_script, "script_troop_add_gold", "trp_player", ":deal_with_looters_gold_reward"),
		(call_script, "script_change_player_relation_with_center", "$current_town", 3),
		(call_script, "script_end_quest", "qst_deal_with_looters"),
		(try_for_parties, ":var_3"),
			(party_get_template_id, ":template_id_var_3", ":var_3"),
			(this_or_next|eq, ":template_id_var_3", "pt_looters"),
			(this_or_next|eq, ":template_id_var_3", "pt_looters_r"),
			(eq, ":template_id_var_3", "pt_looters_e"),
			(party_set_flags, ":var_3", 262144, 0),
		(try_end)
	],
	"Well done, {playername}, that's the last of the goods I need. Here is the money for your {s6}, and a small bonus for helping me out. I'm afraid I won't be paying for any more goods, nor bounties on looters, but you're welcome to keep hunting the bastards if any remain. Thank you for your help, I won't forget it.", "close_window",
	[]],

	[anyone, "mayor_begin",
	[
		(check_quest_active, "qst_move_cattle_herd"),
		(quest_slot_eq, "qst_move_cattle_herd", slot_quest_giver_troop, "$g_talk_troop"),
		(check_quest_succeeded, "qst_move_cattle_herd")
	],
	"Good to see you again {playername}. I have heard that you have delivered the cattle successfully. I will tell the merchants how reliable you are. And here is your pay, {reg8} coins.", "close_window",
	[
		(quest_get_slot, ":move_cattle_herd_gold_reward", "qst_move_cattle_herd", slot_quest_gold_reward),
		(call_script, "script_troop_add_gold", "trp_player", ":move_cattle_herd_gold_reward"),
		(store_div, ":value", ":move_cattle_herd_gold_reward", 6),
		(add_xp_as_reward, ":value"),
		(call_script, "script_change_troop_renown", "trp_player", 5),
		(call_script, "script_change_player_relation_with_center", "$current_town", 3),
		(call_script, "script_end_quest", "qst_move_cattle_herd"),
		(assign, reg8, ":move_cattle_herd_gold_reward")
	]],

	[anyone, "mayor_begin",
	[
		(check_quest_active, "qst_move_cattle_herd"),
		(quest_slot_eq, "qst_move_cattle_herd", slot_quest_giver_troop, "$g_talk_troop"),
		(check_quest_failed, "qst_move_cattle_herd")
	],
	"I heard that you have lost the cattle herd on your way to {s9}. I had a very difficult time explaining your failure to the owner of that herd, {Ser/my lady}. Do you have anything to say?", "move_cattle_herd_failed",
	[]],

	[anyone|plyr, "move_cattle_herd_failed",
	[],
	"I am sorry. But I was attacked on the way.", "move_cattle_herd_failed_2",
	[]],

	[anyone|plyr, "move_cattle_herd_failed",
	[],
	"I am sorry. The stupid animals wandered off during the night.", "move_cattle_herd_failed_2",
	[]],

	[anyone, "move_cattle_herd_failed_2",
	[],
	"Well, it was your responsibility to deliver that herd safely, no matter what. You should know that the owner of the herd demanded to be compensated for his loss, and I had to pay him 1000 coins. So you now owe me that money.", "merchant_ask_for_debts",
	[
		(assign, "$debt_to_merchants_guild", 1000),
		(call_script, "script_end_quest", "qst_move_cattle_herd")
	]],

	[anyone, "mayor_begin",
	[
		(check_quest_active, "qst_kidnapped_girl"),
		(quest_slot_eq, "qst_kidnapped_girl", slot_quest_current_state, 4),
		(quest_slot_eq, "qst_kidnapped_girl", slot_quest_giver_troop, "$g_talk_troop")
	],
	"{playername} -- I am in your debt for bringing back my friend's daughter.  Please take these {reg8} coins that I promised you.  My friend wished he could give more but paying that ransom brought him to his knees.", "close_window",
	[
		(quest_get_slot, ":kidnapped_girl_gold_reward", "qst_kidnapped_girl", slot_quest_gold_reward),
		(call_script, "script_troop_add_gold", "trp_player", ":kidnapped_girl_gold_reward"),
		(assign, reg8, ":kidnapped_girl_gold_reward"),
		(assign, ":var_2", ":kidnapped_girl_gold_reward"),
		(val_mul, ":var_2", 2),
		(val_add, ":var_2", 100),
		(add_xp_as_reward, ":var_2"),
		(call_script, "script_change_troop_renown", "trp_player", 3),
		(call_script, "script_change_player_relation_with_center", "$current_town", 3),
		(call_script, "script_end_quest", "qst_kidnapped_girl")
	]],

	[anyone, "mayor_begin",
	[
		(check_quest_active, "qst_cheese_rustlers"),
		(check_quest_succeeded, "qst_cheese_rustlers"),
		(quest_slot_eq, "qst_cheese_rustlers", slot_quest_giver_troop, "$g_talk_troop")
	],
	"I have heard about your deeds. You have given those thieves the punishment they deserved. Here is your reward, {reg5} coins. I would like to give more but wine and food doesn't come cheap these days. Hard luck, eh? ", "mayor_friendly_pretalk",
	[
		(quest_get_slot, ":cheese_rustlers_gold_reward", "qst_cheese_rustlers", slot_quest_gold_reward),
		(call_script, "script_troop_add_gold", "trp_player", ":cheese_rustlers_gold_reward"),
		(assign, ":var_2", ":cheese_rustlers_gold_reward"),
		(val_mul, ":var_2", 7),
		(add_xp_as_reward, ":var_2"),
		(call_script, "script_change_player_relation_with_center", "$current_town", 2),
		(call_script, "script_change_troop_renown", "trp_player", 3),
		(call_script, "script_end_quest", "qst_cheese_rustlers"),
		(assign, reg5, ":cheese_rustlers_gold_reward")
	]],

	[anyone, "mayor_begin",
	[
		(check_quest_active, "qst_cheese_paladins"),
		(check_quest_succeeded, "qst_cheese_paladins"),
		(quest_slot_eq, "qst_cheese_paladins", slot_quest_giver_troop, "$g_talk_troop")
	],
	"I have heard about your deeds. You have given those nasty sellswords the punishment they deserved.  I hope they weren't too much trouble, petty outlaws and criminals are nothing to you, I'd imagine. Here is your reward, {reg5} coins. I would like to give more but alas, with all this turmoil and strife... Well, you know...", "mayor_friendly_pretalk",
	[
		(quest_get_slot, ":cheese_paladins_gold_reward", "qst_cheese_paladins", slot_quest_gold_reward),
		(call_script, "script_troop_add_gold", "trp_player", ":cheese_paladins_gold_reward"),
		(assign, ":var_2", ":cheese_paladins_gold_reward"),
		(val_mul, ":var_2", 7),
		(add_xp_as_reward, ":var_2"),
		(call_script, "script_change_player_relation_with_center", "$current_town", 2),
		(call_script, "script_change_troop_renown", "trp_player", 3),
		(call_script, "script_end_quest", "qst_cheese_paladins"),
		(assign, reg5, ":cheese_paladins_gold_reward")
	]],

	[anyone, "mayor_begin",
	[
		(check_quest_active, "qst_bar_brawl"),
		(check_quest_succeeded, "qst_bar_brawl"),
		(quest_slot_eq, "qst_bar_brawl", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_slot_eq, "qst_bar_brawl", slot_quest_current_state, 1)
	],
	"I heard you dealt with our little problem, {playername}. I can see you're not afraid to get your hands dirty, eh? You might consider taking it up full time. Well, here's your reward.", "close_window",
	[
		(call_script, "script_troop_add_gold", "trp_player", 400),
		(call_script, "script_change_player_relation_with_center", "$current_town", 8),
		(add_xp_as_reward, 300),
		(call_script, "script_end_quest", "qst_bar_brawl"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "mayor_begin",
	[
		(check_quest_active, "qst_bar_brawl"),
		(quest_slot_eq, "qst_bar_brawl", slot_quest_giver_troop, "$g_talk_troop"),
		(check_quest_failed, "qst_bar_brawl")
	],
	"Oh, it's you. Enlighten me, how exactly does one lose a simple fight to some poxy, lowborn barflies? Truly, if I ever want to take a lesson in how to lay down and die, I'll be sure to come to you. Get out of my sight, {playername}, I have things to do.", "close_window",
	[
		(call_script, "script_end_quest", "qst_bar_brawl"),
		(call_script, "script_change_player_relation_with_center", "$current_town", -4),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "mayor_begin",
	[
		(check_quest_active, "qst_track_down_bandits"),
		(check_quest_succeeded, "qst_track_down_bandits"),
		(quest_slot_eq, "qst_track_down_bandits", slot_quest_giver_troop, "$g_talk_troop")
	],
	"Well -- it sounds like you were able to track down the bandits, and show them what happens to those who would disrupt the flow of commerce. Here is your reward: {reg5} coins. It is well earned, and we are most grateful.", "mayor_friendly_pretalk",
	[
		(quest_get_slot, ":track_down_bandits_gold_reward", "qst_track_down_bandits", slot_quest_gold_reward),
		(call_script, "script_troop_add_gold", "trp_player", ":track_down_bandits_gold_reward"),
		(assign, ":var_2", ":track_down_bandits_gold_reward"),
		(val_mul, ":var_2", 2),
		(add_xp_as_reward, ":var_2"),
		(call_script, "script_change_player_relation_with_center", "$current_town", 2),
		(call_script, "script_change_troop_renown", "trp_player", 3),
		(call_script, "script_end_quest", "qst_track_down_bandits"),
		(assign, reg5, ":track_down_bandits_gold_reward")
	]],

	[anyone, "mayor_begin",
	[
		(check_quest_active, "qst_troublesome_bandits"),
		(check_quest_succeeded, "qst_troublesome_bandits"),
		(quest_slot_eq, "qst_troublesome_bandits", slot_quest_giver_troop, "$g_talk_troop")
	],
	"I have heard about your deeds. You have given those bandits the punishment they deserved. You are really as good as they say. Here is your reward: {reg5} coins. I would like to give more but those bandits almost brought me to bankruptcy.", "mayor_friendly_pretalk",
	[
		(quest_get_slot, ":troublesome_bandits_gold_reward", "qst_troublesome_bandits", slot_quest_gold_reward),
		(call_script, "script_troop_add_gold", "trp_player", ":troublesome_bandits_gold_reward"),
		(assign, ":var_2", ":troublesome_bandits_gold_reward"),
		(val_mul, ":var_2", 2),
		(add_xp_as_reward, ":var_2"),
		(call_script, "script_change_player_relation_with_center", "$current_town", 2),
		(call_script, "script_change_troop_renown", "trp_player", 3),
		(call_script, "script_end_quest", "qst_troublesome_bandits"),
		(assign, reg5, ":troublesome_bandits_gold_reward")
	]],

	[anyone, "mayor_begin",
	[
		(ge, "$debt_to_merchants_guild", 50)
	],
	"According to my accounts, you owe the merchants guild {reg1} coins. I'd better collect that now.", "merchant_ask_for_debts",
	[
		(assign, reg1, "$debt_to_merchants_guild")
	]],

	[anyone|plyr, "merchant_ask_for_debts",
	[
		(store_troop_gold, reg5, "trp_player"),
		(ge, reg5, "$debt_to_merchants_guild")
	],
	"Alright. I'll pay my debt to you.", "merchant_debts_paid",
	[
		(troop_remove_gold, "trp_player", "$debt_to_merchants_guild"),
		(assign, "$debt_to_merchants_guild", 0)
	]],

	[anyone, "merchant_debts_paid",
	[],
	"Excellent. I'll let my fellow merchants know that you are clear of any debts.", "mayor_pretalk",
	[]],

	[anyone|plyr, "merchant_ask_for_debts",
	[],
	"I'm afraid I can't pay that sum now.", "merchant_debts_not_paid",
	[]],

	[anyone, "merchant_debts_not_paid",
	[
		(assign, reg1, "$debt_to_merchants_guild")
	],
	"In that case, I am afraid, I can't deal with you. Guild rules... Come back when you can pay the {reg1} coins. And know that we'll be charging an interest to your debt. So the sooner you pay it, the better.", "close_window",
	[]],

	[anyone, "mayor_begin",
	[],
	"What can I do for you?", "mayor_talk",
	[]],

	[anyone, "mayor_friendly_pretalk",
	[],
	"Now... What else may I do for you?", "mayor_talk",
	[]],

	[anyone, "mayor_pretalk",
	[],
	"Yes?", "mayor_talk",
	[]],

	[anyone|plyr, "mayor_talk",
	[],
	"Can you tell me about what you do?", "mayor_info_begin",
	[]],

	[anyone|plyr, "mayor_talk",
	[
		(store_partner_quest, ":partner_quest"),
		(lt, ":partner_quest", 0),
		(neq, "$merchant_quest_last_offerer", "$g_talk_troop")
	],
	"Do you happen to have a job for me?", "merchant_quest_requested",
	[
		(assign, "$merchant_quest_last_offerer", "$g_talk_troop"),
		(call_script, "script_get_quest", "$g_talk_troop"),
		(assign, "$random_merchant_quest_no", reg0),
		(assign, "$merchant_offered_quest", "$random_merchant_quest_no")
	]],

	[anyone|plyr, "mayor_talk",
	[
		(store_partner_quest, ":partner_quest"),
		(lt, ":partner_quest", 0),
		(eq, "$merchant_quest_last_offerer", "$g_talk_troop"),
		(gt, "$merchant_offered_quest", 0)
	],
	"About that job you offered me...", "merchant_quest_last_offered_job",
	[]],

	[anyone|plyr, "mayor_talk",
	[
		(store_partner_quest, reg2),
		(ge, reg2, 0)
	],
	"About the job you gave me...", "merchant_quest_about_job",
	[]],

	[anyone|plyr, "mayor_talk",
	[],
	"I have some questions of a political nature.", "mayor_political_talk",
	[]],

	[anyone|plyr, "mayor_talk",
	[],
	"How is trade around here?", "mayor_economy_report_1",
	[
		(call_script, "script_merchant_road_info_to_s42", "$g_encountered_party")
	]],

	[anyone|plyr, "mayor_talk",
	[],
	"How does the wealth of this region compare with the rest of the world?", "mayor_wealth_comparison_1",
	[]],

	[anyone|plyr, "mayor_talk",
	[
		(item_slot_ge, "itm_trade_velvet", 57, "itm_trade_raw_dyes")
	],
	"I wish to buy land in this town for a productive enterprise", "mayor_investment_possible",
	[]],

	[anyone, "mayor_investment_possible",
	[
		(party_slot_ge, "$g_encountered_party", 137, 1),
		(party_get_slot, ":g_encountered_party_center_player_enterprise", "$g_encountered_party", slot_center_player_enterprise),
		(call_script, "script_get_enterprise_name", ":g_encountered_party_center_player_enterprise"),
		(str_store_string, 4, reg0)
	],
	"You already operate a {s4} here. There probably aren't enough skilled tradesmen to start a second enterprise.", "mayor_pretalk",
	[]],

	[anyone, "mayor_investment_possible",
	[
		(ge, "$cheat_mode", 3)
	],
	"{!}CHEAT: Yes, we're playtesting this feature, and you're in cheat mode. Go right ahead.", "mayor_investment_advice",
	[]],

	[anyone, "mayor_investment_possible",
	[
		(lt, "$g_encountered_party_relation", 0),
		(str_store_string, 9, "str_enterprise_enemy_realm")
	],
	"{s9}", "mayor_pretalk",
	[]],

	[anyone, "mayor_investment_possible",
	[
		(party_slot_eq, "$g_encountered_party", slot_town_lord, "trp_player"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Of course, {s0}. You are the lord of this town, and no one is going to stop you.", "mayor_investment_advice",
	[]],

	[anyone, "mayor_investment_possible",
	[
		(party_get_slot, ":g_encountered_party_town_lord", "$g_encountered_party", slot_town_lord),
		(is_between, ":g_encountered_party_town_lord", "trp_npc1", "trp_heroes_end"),
		(call_script, "script_troop_get_relation_with_troop", "trp_player", ":g_encountered_party_town_lord"),
		(assign, ":var_2", reg0),
		(lt, ":var_2", 0),
		(str_store_troop_name, 4, ":g_encountered_party_town_lord")
	],
	"Well... Given your relationship with our liege, {s4}, I think that you will not find many here who are brave enough to sell you any land.", "mayor_investment",
	[]],

	[anyone|auto_proceed, "mayor_investment",
	[],
	"{!}.", "mayor_pretalk",
	[]],

	[anyone, "mayor_investment_possible",
	[
		(assign, ":var_1", 0),
		(try_begin),
			(ge, "$g_dplmc_gold_changes", 1),
			(neq, "$g_encountered_party", "$g_starting_town"),
			(val_add, ":var_1", 1),
		(try_end),
		(neg|party_slot_ge, "$current_town", 26, ":var_1")
	],
	"Well... To be honest, I think that we in the guild would like to know you a little better. We can be very particular about outsiders coming in here and buying land.", "mayor_pretalk",
	[]],

	[anyone, "mayor_investment_possible",
	[
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$g_encountered_party")
	],
	"Very good, {s0}. We in the guild know and trust you, and I think I could find someone to sell you the land you need.", "mayor_investment_advice",
	[]],

	[anyone, "mayor_investment_advice",
	[],
	"A couple of things to keep in mind -- skilled laborers are always at a premium, so I doubt that you will be able to open up more than one enterprise here. In order to make a profit for yourself, you should choose a commodity which is in relatively short supply, but for which the raw materials are cheap. What sort of enterprise would you like to start?", "investment_choose_enterprise",
	[]],

	[anyone|plyr, "investment_choose_enterprise",
	[],
	"A mill and bakery, to make bread from grain", "investment_summary",
	[
		(assign, "$enterprise_production", "itm_trade_bread")
	]],

	[anyone|plyr, "investment_choose_enterprise",
	[],
	"A brewery, to make ale from grain", "investment_summary",
	[
		(assign, "$enterprise_production", "itm_trade_ale")
	]],

	[anyone|plyr, "investment_choose_enterprise",
	[],
	"A tannery, to make leather from hides", "investment_summary",
	[
		(assign, "$enterprise_production", "itm_trade_leatherwork")
	]],

	[anyone|plyr, "investment_choose_enterprise",
	[],
	"A wine press, to make wine from grapes", "investment_summary",
	[
		(assign, "$enterprise_production", "itm_trade_wine")
	]],

	[anyone|plyr, "investment_choose_enterprise",
	[],
	"An oil press, to make oil from olives", "investment_summary",
	[
		(assign, "$enterprise_production", "itm_trade_oil")
	]],

	[anyone|plyr, "investment_choose_enterprise",
	[],
	"An ironworks, to make tools from iron", "investment_summary",
	[
		(assign, "$enterprise_production", "itm_trade_tools")
	]],

	[anyone|plyr, "investment_choose_enterprise",
	[],
	"A weavery and dyeworks, to make velvet from silk and dye", "investment_summary",
	[
		(assign, "$enterprise_production", "itm_trade_velvet")
	]],

	[anyone|plyr, "investment_choose_enterprise",
	[],
	"A weavery, to make wool cloth from wool", "investment_summary",
	[
		(assign, "$enterprise_production", "itm_trade_wool_cloth")
	]],

	[anyone|plyr, "investment_choose_enterprise",
	[],
	"A weavery, to make linen from flax", "investment_summary",
	[
		(assign, "$enterprise_production", "itm_trade_linen")
	]],

	[anyone|plyr, "investment_choose_enterprise",
	[],
	"Never mind", "mayor_pretalk",
	[]],

	[anyone, "investment_summary",
	[],
	"Very good, sir. The land and the materials on which you may build your {s3} will cost you {reg7} coins. Right now, your {s3} will produce {s4} worth {reg1} coins each week, while the {s6} needed to manufacture that batch will be {reg2} and labor and upkeep will be {reg3}.{s9} I should guess that your profit would be {reg0} coins a week. This assumes of course that prices remain constant -- which, I can virtually guarantee you, they will not. Do you wish to proceed?", "mayor_investment_confirm",
	[
		(item_get_slot, "$enterprise_cost", "$enterprise_production", slot_item_enterprise_building_cost),
		(assign, reg7, "$enterprise_cost"),
		(str_store_item_name, 4, "$enterprise_production"),
		(call_script, "script_get_enterprise_name", "$enterprise_production"),
		(str_store_string, 3, reg0),
		(call_script, "script_process_player_enterprise", "$enterprise_production", "$g_encountered_party"),
		(item_get_slot, ":enterprise_production_primary_raw_material", "$enterprise_production", slot_item_primary_raw_material),
		(str_store_item_name, 6, ":enterprise_production_primary_raw_material"),
		(assign, ":var_2", reg0),
		(assign, ":var_3", reg1),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(ge, "$g_dplmc_gold_changes", 1),
			(try_begin),
				(call_script, "script_dplmc_good_produced_at_center_or_its_villages", ":enterprise_production_primary_raw_material", "$g_encountered_party"),
				(ge, reg0, 1),
				(display_message, "@{!}There is a local supply of {s6}."),
			(else_try),
				(store_sub, ":value", ":enterprise_production_primary_raw_material", "itm_trade_spice"),
				(val_add, ":value", 267),
				(item_get_slot, reg0, ":enterprise_production_primary_raw_material", slot_item_base_price),
				(party_get_slot, reg1, "$g_encountered_party", ":value"),
				(val_mul, reg0, reg1),
				(val_div, reg0, 1000),
				(assign, ":value_2", reg0),
				(call_script, "script_dplmc_assess_ability_to_purchase_good_from_center", ":enterprise_production_primary_raw_material", "$g_encountered_party"),
				(item_get_slot, reg1, ":enterprise_production_primary_raw_material", slot_item_base_price),
				(val_mul, reg1, reg0),
				(val_div, reg1, 1000),
				(assign, reg0, ":value_2"),
				(display_message, "@{!}{s6} must be imported, modifying the price from {reg0} to {reg1}."),
			(try_end),
		(try_end),
		(str_clear, 9),
		(assign, ":var_6", reg10),
		(try_begin),
			(gt, ":var_6", 0),
			(item_get_slot, ":enterprise_production_secondary_raw_material", "$enterprise_production", slot_item_secondary_raw_material),
			(str_store_item_name, 11, ":enterprise_production_secondary_raw_material"),
			(str_store_string, 9, "str_describe_secondary_input"),
		(try_end),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(ge, "$g_dplmc_gold_changes", 1),
			(gt, ":var_6", 0),
			(try_begin),
				(call_script, "script_dplmc_good_produced_at_center_or_its_villages", ":enterprise_production_secondary_raw_material", "$g_encountered_party"),
				(ge, reg0, 1),
				(display_message, "@{!}There is a local supply of {s11}."),
			(else_try),
				(store_sub, ":value", ":enterprise_production_secondary_raw_material", "itm_trade_spice"),
				(val_add, ":value", 267),
				(item_get_slot, reg0, ":enterprise_production_secondary_raw_material", slot_item_base_price),
				(party_get_slot, reg1, "$g_encountered_party", ":value"),
				(val_mul, reg0, reg1),
				(val_div, reg0, 1000),
				(assign, ":value_2", reg0),
				(call_script, "script_dplmc_assess_ability_to_purchase_good_from_center", ":enterprise_production_secondary_raw_material", "$g_encountered_party"),
				(item_get_slot, reg1, ":enterprise_production_secondary_raw_material", slot_item_base_price),
				(val_mul, reg1, reg0),
				(val_div, reg1, 1000),
				(assign, reg0, ":value_2"),
				(display_message, "@{!}{s9} must be imported, modifying the price from {reg0} to {reg1}."),
			(try_end),
		(try_end),
		(assign, reg0, ":var_2"),
		(assign, reg1, ":var_3")
	]],

	[anyone|plyr, "mayor_investment_confirm",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", "$enterprise_cost")
	],
	"Yes. Here is money for the land.", "mayor_investment_purchase",
	[
		(party_set_slot, "$g_encountered_party", slot_center_player_enterprise, "$enterprise_production"),
		(party_set_slot, "$g_encountered_party", slot_center_player_enterprise_consumption_order, 7),
		(troop_remove_gold, "trp_player", "$enterprise_cost"),
		(store_sub, ":value", "$current_town", "p_town_1"),
		(store_add, ":value_2", ":value", "trp_town_1_master_craftsman"),
		(try_begin),
			(eq, "$enterprise_production", "itm_trade_bread"),
			(troop_set_name, ":value_2", "str_master_miller"),
		(else_try),
			(eq, "$enterprise_production", "itm_trade_ale"),
			(troop_set_name, ":value_2", "str_master_brewer"),
		(else_try),
			(eq, "$enterprise_production", "itm_trade_oil"),
			(troop_set_name, ":value_2", "str_master_presser"),
		(else_try),
			(eq, "$enterprise_production", "itm_trade_tools"),
			(troop_set_name, ":value_2", "str_master_smith"),
		(else_try),
			(eq, "$enterprise_production", "itm_trade_wool_cloth"),
			(troop_set_name, ":value_2", "str_master_weaver"),
		(else_try),
			(eq, "$enterprise_production", "itm_trade_linen"),
			(troop_set_name, ":value_2", "str_master_weaver"),
		(else_try),
			(eq, "$enterprise_production", "itm_trade_leatherwork"),
			(troop_set_name, ":value_2", "str_master_tanner"),
		(else_try),
			(eq, "$enterprise_production", "itm_trade_velvet"),
			(troop_set_name, ":value_2", "str_master_dyer"),
		(else_try),
			(eq, "$enterprise_production", "itm_trade_wine"),
			(troop_set_name, ":value_2", "str_master_vinter"),
		(try_end)
	]],

	[anyone|plyr, "mayor_investment_confirm",
	[],
	"No -- that's not economical for me at the moment.", "mayor_investment_advice",
	[]],

	[anyone, "mayor_investment_purchase",
	[],
	"Very good. Your enterprise should be up and running in about a week. When next you come, and thereafter, you should speak to your {s4} about its operations.", "mayor_pretalk",
	[
		(store_sub, ":value", "$current_town", "p_town_1"),
		(store_add, ":value_2", ":value", "trp_town_1_master_craftsman"),
		(str_store_troop_name, 4, ":value_2")
	]],

	[anyone|plyr, "mayor_talk",
	[],
	"[Leave]", "close_window",
	[]],

	[anyone, "mayor_info_begin",
	[
		(str_store_party_name, 9, "$current_town")
	],
	"I am the guildmaster of {s9}. You can say I am the leader of the good people of {s9}. I can help you find a job if you are looking for some honest work.", "mayor_info_talk",
	[
		(assign, "$mayor_info_lord_told", 0)
	]],

	[anyone|plyr, "mayor_info_talk",
	[
		(eq, "$mayor_info_lord_told", 0)
	],
	"Who rules this town?", "mayor_info_lord",
	[]],

	[anyone, "mayor_info_lord",
	[
		(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
		(str_store_troop_name, 10, ":current_town_town_lord"),
		(call_script, "script_dplmc_store_troop_is_female", ":current_town_town_lord")
	],
	"Our town's lord and protector is {s10}. {reg0?She:He} owns the castle and sometimes resides there, and collects taxes from the town. However we regulate ourselves in most of the matters that concern ourselves. As the town's guildmaster I have the authority to decide those things.", "mayor_info_talk",
	[
		(assign, "$mayor_info_lord_told", 1)
	]],

	[anyone|plyr, "mayor_info_talk",
	[],
	"That's all I need to know. Thanks.", "mayor_pretalk",
	[]],

	[anyone, "mayor_political_talk",
	[
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(str_store_troop_name, 10, ":g_encountered_party_faction_leader"),
		(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
		(try_begin),
			(eq, ":current_town_town_lord", "trp_player"),
			(str_store_string, 10, "str_your_excellency"),
		(else_try),
			(is_between, ":current_town_town_lord", "trp_npc1", "trp_knight_1_1_wife"),
			(neq, ":current_town_town_lord", ":g_encountered_party_faction_leader"),
			(str_store_troop_name, 11, ":current_town_town_lord"),
			(neq, ":current_town_town_lord", ":g_encountered_party_faction_leader"),
			(str_store_string, 10, "str_s10_and_s11"),
		(try_end)
	],
	"Politics? Good heaven, the guild has nothing to do with politics. We are loyal servants of {s10}. We merely govern our own affairs, and pass on the townspeople's concerns to our lords and masters, and maybe warn them from time to time against evil advice. Anyway, what did you wish to ask?", "mayor_political_questions",
	[]],

	[anyone, "mayor_prepolitics",
	[
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(try_begin),
			(eq, ":g_encountered_party_faction_leader", "trp_player"),
			(str_store_string, 9, "str_your_loyal_subjects"),
		(else_try),
			(str_store_troop_name, 10, ":g_encountered_party_faction_leader"),
			(str_store_string, 9, "str_loyal_subjects_of_s10"),
		(try_end)
	],
	"Did I mention that we here are all {s9}? Because I can't stress that enough... Anyway... Is there anything else?", "mayor_political_questions",
	[]],

	[anyone|plyr, "mayor_political_questions",
	[],
	"What is the cause of all these wars?", "mayor_war_description_1",
	[]],

	[anyone, "mayor_war_description_1",
	[
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(str_store_troop_name, 10, ":g_encountered_party_faction_leader"),
		(str_store_string, 22, "str_the"),
		(try_begin),
			(eq, "$g_encountered_party_faction", "fac_kingdom_5"),
			(str_store_string, 22, "str_we"),
		(try_end),
		(val_max, "$g_mayor_given_political_dialog", 1)
	],
	"Well, to answer your question generally, each of the western monarchs claims to be the rightful ruler of the Seven Kingdoms, with the exception of the Stark boy who just wants to rule the North and the Trident.. Some of these claims are based on forgotten dynastic marriages and others are based on obscure promises, while Myr, Volantis, Lys and Tyrosh have been fighting over the Disputed Lands since the doom of Valyria, and Braavos has a long standing enmity towards the former Valyrian cities. So in theory, any one realm has the right to declare war on any other realm at any time.", "mayor_war_description_2",
	[]],

	[anyone, "mayor_war_description_2",
	[
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(str_store_troop_name, 10, ":g_encountered_party_faction_leader"),
		(troop_get_type, reg4, ":g_encountered_party_faction_leader")
	],
	"In practice, to make war is exhausting work. It is easy enough to lay waste to the enemy's farmland, but crops will grow back, and it is a far different matter to capture an enemy stronghold and to hold it. So the monarchs and archons will fight a little, sign a truce, fight a little more, and so on and so forth. Often, a monarch will go to war when another realm provokes them. At such times, some bad influences who look to enrich themselves with ransoms and pillage will clamor for retribution, and thus the damage caused by war to a monarch's treasury is less than the damage caused by doing nothing would be to his authority... I'm of course not talking about {s10}, as no one would ever question {reg4?her:his} authority", "mayor_war_description_3",
	[]],

	[anyone, "mayor_war_description_3",
	[
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(troop_get_type, reg4, ":g_encountered_party_faction_leader")
	],
	"I would stress again that we in the guild have nothing to do with politics. But if {s10} were to ask for my advice on these matters, as a loyal subject, I would tell {reg4?her:him} that while {reg4?her:his} claim is truly just, even the most legitimate claim must be backed by armed men, and armed men want money, and money comes from trade, and war ruins trade, so sometimes the best way to push a claim is not to push it, if you know what I mean...", "mayor_war_description_4",
	[]],

	[anyone, "mayor_war_description_4",
	[
		(str_store_party_name, 4, "$g_encountered_party"),
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(troop_get_type, reg4, ":g_encountered_party_faction_leader")
	],
	"You may tell {s10} this if you see {reg4?her:him}. Don't mention my name specifically -- just say 'the people of {s4}' told you this. Our personal opinion, of course, as to what would be in {s10}'s best interests. None of us would ever dream of questioning a monarch's sovereign right to push {reg4?her:his} legitimate claims.", "mayor_prepolitics",
	[]],

	[anyone|plyr, "mayor_political_questions",
	[
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(str_store_troop_name, 10, ":g_encountered_party_faction_leader"),
		(ge, "$g_mayor_given_political_dialog", 1),
		(assign, ":value", 0),
		(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
			(faction_slot_eq, ":faction", slot_faction_state, 0),
			(neq, ":faction", "$g_encountered_party_faction"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1)
	],
	"What is {s10}'s policy in regards to the other realms of this world?", "mayor_politics_assess",
	[]],

	[anyone, "mayor_politics_assess",
	[],
	"Which realm did you have in mind?", "mayor_politics_assess_realm",
	[]],

	[anyone|repeat_for_factions|plyr, "mayor_politics_assess_realm",
	[
		(store_repeat_object, ":repeat_object"),
		(is_between, ":repeat_object", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(faction_slot_eq, ":repeat_object", slot_faction_state, 0),
		(neq, ":repeat_object", "$g_encountered_party_faction"),
		(str_store_faction_name, 11, ":repeat_object")
	],
	"{s11}", "mayor_politics_give_realm_assessment",
	[
		(store_repeat_object, "$faction_selected")
	]],

	[anyone, "mayor_politics_give_realm_assessment",
	[],
	"{s14}", "mayor_prepolitics",
	[
		(call_script, "script_npc_decision_checklist_peace_or_war", "$g_encountered_party_faction", "$faction_selected", -1)
	]],

	[anyone|plyr, "mayor_political_questions",
	[],
	"What can you say about the internal politics of the realms?", "mayor_internal_politics",
	[]],

	[anyone, "mayor_internal_politics",
	[
		(str_store_faction_name, 4, "$g_encountered_party_faction"),
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(str_store_troop_name, 5, ":g_encountered_party_faction_leader"),
		(troop_get_type, reg4, ":g_encountered_party_faction_leader")
	],
	"Well, here in the {s4} we are all united by our love for {s5} and support for {reg4?her:his} legitimate claim. But I have heard some talk of internal bickering in other realms...", "mayor_internal_politics_2",
	[]],

	[anyone, "mayor_internal_politics_2",
	[],
	"The lords of a realm often have very different ideas about honor, strategy, and the way a nobleman should behave. In addition, they compete with each other for the ruler's favor, and are constantly weighing up their position -- how they stand, how their friends and family stand, and how their enemies stand.", "mayor_internal_politics_3",
	[]],

	[anyone, "mayor_internal_politics_3",
	[],
	"Underlying all the tensions is the possibility that a lord may abandon his liege, and pledge vassalhood to another. In theory, each lord has sworn an oath of vassalage, but in practice, a vassal can always find an excuse to absolve himself. The vassal may claim that the liege has failed to hold up his end of the bargain, to protect the vassal and treat him justly. Or, the vassal may claim that his liege is in fact a usurper, and another has a better claim to the kingship.", "mayor_internal_politics_4",
	[]],

	[anyone, "mayor_internal_politics_4",
	[],
	"Lieges and vassals still watch each other carefully. If a king believes that his vassal is going to change sides or rebel, he may indict the vassal for treason and seize his properties. Likewise, if a vassal fears that he will be indicted, he may rebel. Usually, whoever makes the first move will be able to control the vassal's fortresses.", "mayor_internal_politics_5",
	[]],

	[anyone, "mayor_internal_politics_5",
	[],
	"Now, men do not trust a vassal who turns coat easily, nor do they trust a king who lightly throws around charges of treason. Those two factors can keep a realm together. But if relations between a vassal and a liege deteriorate far enough, things can become very tense indeed... In other lands, of course. These things could never happen here in the {s4}.", "mayor_prepolitics",
	[]],

	[anyone|plyr, "mayor_political_questions",
	[],
	"That is all. Thank you.", "mayor_pretalk",
	[]],

	[anyone, "merchant_quest_about_job",
	[],
	"What about it?", "merchant_quest_about_job_2",
	[]],

	[anyone|plyr, "merchant_quest_about_job_2",
	[],
	"What if I can't finish it?", "merchant_quest_what_if_fail",
	[]],

	[anyone|plyr, "merchant_quest_about_job_2",
	[],
	"Well, I'm still working on it.", "merchant_quest_about_job_working",
	[]],

	[anyone, "merchant_quest_about_job_working",
	[],
	"Good. I'm sure you will handle it.", "mayor_pretalk",
	[]],

	[anyone, "merchant_quest_last_offered_job",
	[],
	"Eh, you want to reconsider that. Good...", "merchant_quest_brief",
	[
		(assign, "$random_merchant_quest_no", "$merchant_offered_quest")
	]],

	[anyone, "merchant_quest_what_if_fail",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_deliver_wine")
	],
	"I hope you don't fail. In that case, I'll have to ask for the price of the cargo you were carrying.", "mayor_pretalk",
	[]],

	[anyone, "merchant_quest_what_if_fail",
	[],
	"Well, just do your best to finish it.", "mayor_pretalk",
	[]],

	[anyone, "merchant_quest_taken",
	[],
	"Excellent. I am counting on you then. Good luck.", "mayor_pretalk",
	[]],

	[anyone, "merchant_quest_stall",
	[],
	"Well, the job will be available for a few more days I guess. Tell me if you decide to take it.", "mayor_pretalk",
	[]],

	[anyone, "mayor_economy_report_1",
	[],
	"{s32}", "mayor_economy_report_2",
	[]],

	[anyone, "mayor_economy_report_2",
	[],
	"{s42}", "mayor_economy_report_3",
	[]],

	[anyone, "mayor_economy_report_3",
	[],
	"{s47}", "mayor_pretalk",
	[]],

	[anyone, "merchant_quest_requested",
	[
		(eq, "$random_merchant_quest_no", "qst_deal_with_looters")
	],
	"Well, you look able enough. I think I might have something you could do.", "merchant_quest_brief",
	[]],

	[anyone, "merchant_quest_brief",
	[
		(eq, "$random_merchant_quest_no", "qst_deal_with_looters"),
		(try_begin),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
			(str_store_string, 5, "@town"),
		(else_try),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 4),
			(str_store_string, 5, "@village"),
		(try_end)
	],
	"We've had some fighting near the {s5} lately, with all the chaos that comes with it, and that's led some of our less upstanding locals to try and make their fortune out of looting the shops and farms during the confusion. A lot of valuable goods were taken. I need somebody to teach those bastards a lesson. Sound like your kind of work?", "merchant_quest_looters_choice",
	[]],

	[anyone|plyr, "merchant_quest_looters_choice",
	[],
	"Aye, I'll do it.", "merchant_quest_looters_brief",
	[]],

	[anyone|plyr, "merchant_quest_looters_choice",
	[],
	"I'm afraid I can't take the job at the moment.", "merchant_quest_stall",
	[]],

	[anyone, "merchant_quest_looters_brief",
	[
		(try_begin),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
			(str_store_string, 5, "@town"),
		(else_try),
			(party_slot_eq, "$g_encountered_party", slot_party_type, 4),
			(str_store_string, 5, "@village"),
		(try_end),
		(store_random_in_range, ":random_in_range_1_2", 1, 2),
		(quest_set_slot, "qst_deal_with_looters", slot_quest_target_amount, ":random_in_range_1_2"),
		(try_for_range, ":unused", 0, ":random_in_range_1_2"),
			(store_random_in_range, ":random_in_range_4_9", 4, 9),
			(set_spawn_radius, ":random_in_range_4_9"),
			(try_begin),
				(eq, "$troop_trees", "trp_troop_tree_0"),
				(spawn_around_party, "$g_encountered_party", "pt_looters"),
			(else_try),
				(eq, "$troop_trees", "trp_troop_tree_1"),
				(spawn_around_party, "$g_encountered_party", "pt_looters_r"),
			(else_try),
				(eq, "$troop_trees", "trp_troop_tree_2"),
				(spawn_around_party, "$g_encountered_party", "pt_looters_e"),
			(try_end),
			(party_set_flags, reg0, 262144, 1),
			(party_set_ai_behavior, reg0, 2),
			(party_set_ai_patrol_radius, reg0, 2),
			(party_get_position, 0, reg0),
			(party_set_ai_target_position, reg0, 0),
		(try_end),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_party_name_link, 13, "$g_encountered_party"),
		(str_store_party_name, 4, "$g_encountered_party"),
		(setup_quest_text, "qst_deal_with_looters"),
		(str_store_string, 2, "@The Guildmaster of {s13} has asked you to deal with looters in the surrounding countryside."),
		(call_script, "script_start_quest", "qst_deal_with_looters", "$g_talk_troop"),
		(assign, "$g_leave_encounter", 1)
	],
	"Excellent! You'll find the looters roaming around the countryside, probably trying to rob more good people. Kill or capture the bastards, I don't care what you do with them. I'll pay you a bounty of 40 coins on every band of looters you destroy, until all the looters are dealt with.", "close_window",
	[]],

	[anyone, "merchant_quest_requested",
	[
		(eq, "$random_merchant_quest_no", "qst_retaliate_for_border_incident"),
		(quest_get_slot, ":retaliate_for_border_incident_target_faction", "qst_retaliate_for_border_incident", slot_quest_target_faction),
		(call_script, "script_faction_get_adjective_to_s10", ":retaliate_for_border_incident_target_faction"),
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(str_store_troop_name, 5, ":g_encountered_party_faction_leader"),
		(call_script, "script_dplmc_store_troop_is_female", ":g_encountered_party_faction_leader")
	],
	"Well, there is a very great favor which you could do us... As you may have heard, some {s10}s have come across the border to attack our people. {s5} is under great pressure from some of the more bellicose of {reg0?her:his} vassals to respond with a declaration of war. Unfortunately, while the great lords of this land grow rich from bloodshed, we of the commons will be caught in the middle, and will suffer.", "merchant_quest_explain_2",
	[]],

	[anyone, "merchant_quest_explain_2",
	[
		(eq, "$random_merchant_quest_no", "qst_retaliate_for_border_incident"),
		(quest_get_slot, ":retaliate_for_border_incident_target_troop", "qst_retaliate_for_border_incident", slot_quest_target_troop),
		(str_store_troop_name, 7, ":retaliate_for_border_incident_target_troop"),
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(call_script, "script_dplmc_store_troop_is_female", ":g_encountered_party_faction_leader")
	],
	"We are not saying that {s5} should overlook this aggression -- far from it! But if {reg0?she:he} charges one of {reg0?her:his} own lords to respond, then the cycle of provocation will necessarily lead to a full-fledged confrontation. Now, if an outsider were to step in and defeat a {s10} lord in battle, then honor would be done, and it would defuse the clamor for war. If the defeated lord were a known troublemaker -- {s7} -- then the {s10}s might be able to overlook it.", "merchant_quest_brief",
	[]],

	[anyone, "merchant_quest_brief",
	[
		(eq, "$random_merchant_quest_no", "qst_retaliate_for_border_incident"),
		(quest_get_slot, ":retaliate_for_border_incident_target_troop", "qst_retaliate_for_border_incident", slot_quest_target_troop),
		(str_store_troop_name, 7, ":retaliate_for_border_incident_target_troop")
	],
	"We need you to attack and defeat {s7}. This will not be an easy task, and that outsider would damage {his/her} relationship with the {s10}s, but we would be very grateful. We could not acknowledge a connection with that outsider, but we could be sure that {he/she} would be handsomely rewarded... Could you do this?", "merchant_quest_retaliate_confirm",
	[]],

	[anyone|plyr, "merchant_quest_retaliate_confirm",
	[],
	"Aye, I can do it.", "merchant_quest_track_bandits_brief",
	[
		(str_store_faction_name, 11, "$g_encountered_party_faction"),
		(setup_quest_text, "qst_retaliate_for_border_incident"),
		(str_store_string, 2, "str_track_down_s7_and_defeat_him_defusing_calls_for_war_within_the_s11"),
		(call_script, "script_start_quest", "qst_retaliate_for_border_incident", "$g_talk_troop")
	]],

	[anyone|plyr, "merchant_quest_retaliate_confirm",
	[],
	"I would prefer not to get mixed up in such things", "merchant_pretalk",
	[
		(quest_set_slot, "qst_retaliate_for_border_incident", slot_quest_dont_give_again_remaining_days, 5)
	]],

	[anyone, "destroy_lair_quest_brief",
	[
		(eq, "$random_quest_no", "qst_destroy_bandit_lair"),
		(quest_get_slot, ":destroy_bandit_lair_target_party", "qst_destroy_bandit_lair", slot_quest_target_party),
		(party_get_template_id, ":template_id_destroy_bandit_lair_target_party", ":destroy_bandit_lair_target_party"),
		(this_or_next|eq, ":template_id_destroy_bandit_lair_target_party", "pt_sea_raider_lair"),
		(this_or_next|eq, ":template_id_destroy_bandit_lair_target_party", "pt_sea_raider_lair_r"),
		(eq, ":template_id_destroy_bandit_lair_target_party", "pt_sea_raider_lair_e")
	],
	"The raiders are likely to have laid up their ships in a well-concealed cove, somewhere along the coastline, preferably next to a small stream where they have some water. The best way to discover its location would be to find a group of sea raiders who appear to be heading back to their base to resupply, and follow them.", "merchant_quest_track_bandit_lair_choice",
	[]],

	[anyone, "destroy_lair_quest_brief",
	[
		(eq, "$random_quest_no", "qst_destroy_bandit_lair"),
		(quest_get_slot, ":destroy_bandit_lair_target_party", "qst_destroy_bandit_lair", slot_quest_target_party),
		(party_get_template_id, ":template_id_destroy_bandit_lair_target_party", ":destroy_bandit_lair_target_party"),
		(this_or_next|eq, ":template_id_destroy_bandit_lair_target_party", "pt_desert_bandit_lair"),
		(this_or_next|eq, ":template_id_destroy_bandit_lair_target_party", "pt_desert_bandit_lair_r"),
		(eq, ":template_id_destroy_bandit_lair_target_party", "pt_desert_bandit_lair_e")
	],
	"Bandits such as these usually establish their hideouts in the foothills on the edge of the desert, often in a canyon near a spring. This gives them both water and concealment. The best way to discover its location would be to find a group of desert bandits who appear to be heading back to their base to resupply, and follow them.", "merchant_quest_track_bandit_lair_choice",
	[]],

	[anyone, "destroy_lair_quest_brief",
	[
		(eq, "$random_quest_no", "qst_destroy_bandit_lair"),
		(quest_get_slot, ":destroy_bandit_lair_target_party", "qst_destroy_bandit_lair", slot_quest_target_party),
		(party_get_template_id, ":template_id_destroy_bandit_lair_target_party", ":destroy_bandit_lair_target_party"),
		(this_or_next|eq, ":template_id_destroy_bandit_lair_target_party", "pt_mountain_bandit_lair"),
		(this_or_next|eq, ":template_id_destroy_bandit_lair_target_party", "pt_mountain_bandit_lair_r"),
		(eq, ":template_id_destroy_bandit_lair_target_party", "pt_mountain_bandit_lair_e")
	],
	"Bandits such as these will usually establish a base in the highlands, often on an steep ledge where they have a view of the surrounding countryside. This makes them difficult to surprise. The best way to discover its location would be to find a group of mountain bandits who appear to be heading back to their base to resupply, and follow them.", "merchant_quest_track_bandit_lair_choice",
	[]],

	[anyone, "destroy_lair_quest_brief",
	[
		(eq, "$random_quest_no", "qst_destroy_bandit_lair"),
		(quest_get_slot, ":destroy_bandit_lair_target_party", "qst_destroy_bandit_lair", slot_quest_target_party),
		(party_get_template_id, ":template_id_destroy_bandit_lair_target_party", ":destroy_bandit_lair_target_party"),
		(this_or_next|eq, ":template_id_destroy_bandit_lair_target_party", "pt_forest_bandit_lair"),
		(this_or_next|eq, ":template_id_destroy_bandit_lair_target_party", "pt_forest_bandit_lair_r"),
		(eq, ":template_id_destroy_bandit_lair_target_party", "pt_forest_bandit_lair_e")
	],
	"Bandits such as these will usually set up their encampments deep in the woods, sometimes in the middle of a swamp. The best way to discover its location would be to find a group of forest bandits who appear to be heading back to their base to resupply, and follow them.", "merchant_quest_track_bandit_lair_choice",
	[]],

	[anyone, "destroy_lair_quest_brief",
	[
		(eq, "$random_quest_no", "qst_destroy_bandit_lair"),
		(quest_get_slot, ":destroy_bandit_lair_target_party", "qst_destroy_bandit_lair", slot_quest_target_party),
		(party_get_template_id, ":template_id_destroy_bandit_lair_target_party", ":destroy_bandit_lair_target_party"),
		(this_or_next|eq, ":template_id_destroy_bandit_lair_target_party", "pt_steppe_bandit_lair"),
		(this_or_next|eq, ":template_id_destroy_bandit_lair_target_party", "pt_steppe_bandit_lair_r"),
		(eq, ":template_id_destroy_bandit_lair_target_party", "pt_steppe_bandit_lair_e")
	],
	"Bandits such as these will usually set up their encampments in the woodland on the steppe, where they have some concealment. The best way to discover its location would be to find a group of steppe bandits who appear to be heading back to their base to resupply, and follow them.", "merchant_quest_track_bandit_lair_choice",
	[]],

	[anyone, "destroy_lair_quest_brief",
	[
		(eq, "$random_quest_no", "qst_destroy_bandit_lair"),
		(quest_get_slot, ":destroy_bandit_lair_target_party", "qst_destroy_bandit_lair", slot_quest_target_party),
		(party_get_template_id, ":template_id_destroy_bandit_lair_target_party", ":destroy_bandit_lair_target_party"),
		(this_or_next|eq, ":template_id_destroy_bandit_lair_target_party", "pt_taiga_bandit_lair"),
		(this_or_next|eq, ":template_id_destroy_bandit_lair_target_party", "pt_taiga_bandit_lair_r"),
		(eq, ":template_id_destroy_bandit_lair_target_party", "pt_taiga_bandit_lair_e")
	],
	"Bandits such as these will usually set up their encampments deep in the woods. The best way to discover its location would be to find a group of tundra bandits who appear to be heading back to their base to resupply, and follow them.", "merchant_quest_track_bandit_lair_choice",
	[]],

	[anyone|plyr, "merchant_quest_track_bandit_lair_choice",
	[],
	"Aye, I'll do it.", "merchant_quest_destroy_lair_brief",
	[
		(quest_get_slot, ":destroy_bandit_lair_target_party", "qst_destroy_bandit_lair", slot_quest_target_party),
		(party_set_flags, ":destroy_bandit_lair_target_party", 262144, 1),
		(quest_set_slot, "qst_destroy_bandit_lair", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_set_slot, "qst_destroy_bandit_lair", slot_quest_giver_center, "$g_encountered_party"),
		(str_store_troop_name_link, 11, "$g_talk_troop"),
		(str_store_party_name, 9, ":destroy_bandit_lair_target_party"),
		(setup_quest_text, "qst_destroy_bandit_lair"),
		(str_store_string, 2, "str_bandit_lair_quest_description"),
		(call_script, "script_start_quest", "qst_destroy_bandit_lair", "$g_talk_troop")
	]],

	[anyone|plyr, "merchant_quest_track_bandit_lair_choice",
	[],
	"I'm afraid I can't take the job at the moment.", "lord_pretalk",
	[
		(quest_set_slot, "qst_destroy_bandit_lair", slot_quest_dont_give_again_remaining_days, 1)
	]],

	[anyone, "merchant_quest_destroy_lair_brief",
	[],
	"Very good. We will await word of your success.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "merchant_quest_requested",
	[
		(eq, "$random_merchant_quest_no", "qst_track_down_bandits")
	],
	"We have heard that {s4}, some travellers on the road {reg4?to:from} {s5} were attacked by {s7}.", "merchant_quest_brief",
	[
		(call_script, "script_merchant_road_info_to_s42", "$g_encountered_party"),
		(assign, "$g_bandit_party_for_bounty", reg0),
		(assign, ":var_1", reg1),
		(assign, ":var_2", reg2),
		(assign, ":var_3", reg3),
		(try_begin),
			(lt, ":var_3", 24),
			(str_store_string, 4, "str_a_short_while_ago"),
		(else_try),
			(lt, ":var_3", 48),
			(str_store_string, 4, "str_one_day_ago"),
		(else_try),
			(lt, ":var_3", 72),
			(str_store_string, 4, "str_two_days_day_ago"),
		(else_try),
			(lt, ":var_3", 144),
			(str_store_string, 4, "str_earlier_this_week"),
		(else_try),
			(str_store_string, 4, "str_about_a_week_ago"),
		(try_end),
		(try_begin),
			(eq, ":var_1", "$g_encountered_party"),
			(str_store_party_name, 5, ":var_2"),
			(assign, reg4, 0),
		(else_try),
			(eq, ":var_2", "$g_encountered_party"),
			(str_store_party_name, 5, ":var_1"),
			(assign, reg4, 1),
		(try_end),
		(str_store_party_name, 7, "$g_bandit_party_for_bounty"),
		(quest_set_slot, "qst_track_down_bandits", slot_quest_target_party, "$g_bandit_party_for_bounty")
	]],

	[anyone, "merchant_quest_brief",
	[
		(eq, "$random_merchant_quest_no", "qst_track_down_bandits"),
		(quest_get_slot, ":track_down_bandits_target_party", "qst_track_down_bandits", slot_quest_target_party),
		(str_store_party_name, 4, ":track_down_bandits_target_party")
	],
	"We would like you to track these {s4} down. The merchants of the town were able to get a description of their leader, and have put together a bounty. If you can hunt them down and destroy them, we'll make it worth your while...", "merchant_quest_track_bandits_choice",
	[]],

	[anyone|plyr, "merchant_quest_track_bandits_choice",
	[],
	"Aye, I'll do it.", "merchant_quest_track_bandits_brief",
	[
		(assign, "$merchant_offered_quest", 0),
		(assign, "$merchant_quest_last_offerer", "$g_talk_troop"),
		(quest_get_slot, ":track_down_bandits_target_party", "qst_track_down_bandits", slot_quest_target_party),
		(party_set_flags, ":track_down_bandits_target_party", 262144, 1),
		(quest_set_slot, "qst_track_down_bandits", slot_quest_giver_troop, "$g_talk_troop"),
		(quest_set_slot, "qst_track_down_bandits", slot_quest_giver_center, "$g_encountered_party"),
		(str_store_party_name_link, 8, "$g_encountered_party"),
		(str_store_party_name, 9, ":track_down_bandits_target_party"),
		(setup_quest_text, "qst_track_down_bandits"),
		(str_store_string, 2, "str_track_down_the_s9_who_attacked_travellers_near_s8_then_report_back_to_the_town"),
		(call_script, "script_start_quest", "qst_track_down_bandits", "$g_talk_troop")
	]],

	[anyone, "merchant_quest_track_bandits_brief",
	[],
	"Very good. The band may not have lingered long in the area, but chances are that they will be spotted by other travellers on the road.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "merchant_quest_track_bandits_choice",
	[],
	"I'm afraid I can't take the job at the moment.", "merchant_quest_stall",
	[
		(quest_set_slot, "qst_track_down_bandits", slot_quest_dont_give_again_remaining_days, 1)
	]],

	[anyone, "merchant_quest_requested",
	[
		(eq, "$random_merchant_quest_no", "qst_deliver_wine")
	],
	"You're looking for a job? Actually I was looking for someone to deliver some {s4}. Perhaps you can do that...", "merchant_quest_brief",
	[
		(quest_get_slot, ":deliver_wine_target_item", "qst_deliver_wine", slot_quest_target_item),
		(str_store_item_name, 4, ":deliver_wine_target_item")
	]],

	[anyone, "merchant_quest_brief",
	[
		(eq, "$random_merchant_quest_no", "qst_deliver_wine")
	],
	"I have a cargo of {s6} that needs to be delivered to the tavern in {s4}. If you can take {reg5} units of {s6} to {s4} in 7 days, you may earn {reg8} coins. What do you say?", "merchant_quest_brief_deliver_wine",
	[
		(quest_get_slot, reg5, "qst_deliver_wine", slot_quest_target_amount),
		(quest_get_slot, reg8, "qst_deliver_wine", slot_quest_gold_reward),
		(quest_get_slot, ":deliver_wine_target_item", "qst_deliver_wine", slot_quest_target_item),
		(quest_get_slot, ":deliver_wine_target_center", "qst_deliver_wine", slot_quest_target_center),
		(str_store_troop_name, 9, "$g_talk_troop"),
		(str_store_party_name_link, 3, "$g_encountered_party"),
		(str_store_party_name_link, 4, ":deliver_wine_target_center"),
		(str_store_item_name, 6, ":deliver_wine_target_item"),
		(setup_quest_text, "qst_deliver_wine"),
		(str_store_string, 2, "@{s9} of {s3} asked you to deliver {reg5} units of {s6} to the tavern in {s4} in 7 days.")
	]],

	[anyone|plyr, "merchant_quest_brief_deliver_wine",
	[
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(quest_get_slot, ":deliver_wine_target_amount", "qst_deliver_wine", slot_quest_target_amount),
		(ge, ":free_inventory_capacity", ":deliver_wine_target_amount")
	],
	"Alright. I will make the delivery.", "merchant_quest_taken",
	[
		(quest_get_slot, ":deliver_wine_target_amount", "qst_deliver_wine", slot_quest_target_amount),
		(quest_get_slot, ":deliver_wine_target_item", "qst_deliver_wine", slot_quest_target_item),
		(troop_add_items, "trp_player", ":deliver_wine_target_item", ":deliver_wine_target_amount"),
		(call_script, "script_start_quest", "qst_deliver_wine", "$g_talk_troop")
	]],

	[anyone|plyr, "merchant_quest_brief_deliver_wine",
	[],
	"I am afraid I can't carry all that cargo now.", "merchant_quest_stall",
	[]],

	[anyone, "merchant_quest_requested",
	[
		(eq, "$random_merchant_quest_no", "qst_escort_merchant_caravan")
	],
	"You're looking for a job? Actually I was looking for someone to escort a caravan. Perhaps you can do that...", "merchant_quest_brief",
	[]],

	[anyone, "merchant_quest_brief",
	[
		(eq, "$random_merchant_quest_no", "qst_escort_merchant_caravan")
	],
	"I am going to send a caravan of goods to {s8}. However with all those bandits and deserters on the roads, I don't want to send them out without an escort. If you can lead that caravan to {s8} in 15 days, you will earn {reg8} coins. Of course your party needs to be at least {reg4} strong to offer them any protection.", "escort_merchant_caravan_quest_brief",
	[
		(quest_get_slot, reg8, "qst_escort_merchant_caravan", slot_quest_gold_reward),
		(quest_get_slot, reg4, "qst_escort_merchant_caravan", slot_quest_target_amount),
		(quest_get_slot, ":escort_merchant_caravan_target_center", "qst_escort_merchant_caravan", slot_quest_target_center),
		(str_store_party_name, 8, ":escort_merchant_caravan_target_center")
	]],

	[anyone|plyr, "escort_merchant_caravan_quest_brief",
	[
		(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party", "p_main_party"),
		(quest_get_slot, ":escort_merchant_caravan_target_amount", "qst_escort_merchant_caravan", slot_quest_target_amount),
		(ge, ":party_size_wo_prisoners_main_party", ":escort_merchant_caravan_target_amount")
	],
	"Alright. I will escort the caravan.", "merchant_quest_taken",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_center", "qst_escort_merchant_caravan", slot_quest_target_center),
		(set_spawn_radius, 1),
		(try_begin),
			(eq, "$troop_trees", "trp_troop_tree_0"),
			(spawn_around_party, "$g_encountered_party", "pt_merchant_caravan"),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_1"),
			(spawn_around_party, "$g_encountered_party", "pt_merchant_caravan_r"),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_2"),
			(spawn_around_party, "$g_encountered_party", "pt_merchant_caravan_e"),
		(try_end),
		(assign, ":var_2", reg0),
		(party_set_ai_behavior, ":var_2", 4),
		(party_set_ai_object, ":var_2", "p_main_party"),
		(party_set_flags, ":var_2", 65536, 0),
		(quest_set_slot, "qst_escort_merchant_caravan", slot_quest_target_party, ":var_2"),
		(quest_set_slot, "qst_escort_merchant_caravan", slot_quest_current_state, 0),
		(str_store_party_name_link, 8, ":escort_merchant_caravan_target_center"),
		(setup_quest_text, "qst_escort_merchant_caravan"),
		(str_store_string, 2, "@Escort the merchant caravan to the town of {s8}."),
		(call_script, "script_start_quest", "qst_escort_merchant_caravan", "$g_talk_troop")
	]],

	[anyone|plyr, "escort_merchant_caravan_quest_brief",
	[
		(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party", "p_main_party"),
		(quest_get_slot, ":escort_merchant_caravan_target_amount", "qst_escort_merchant_caravan", slot_quest_target_amount),
		(lt, ":party_size_wo_prisoners_main_party", ":escort_merchant_caravan_target_amount")
	],
	"I am afraid I don't have that many soldiers with me.", "merchant_quest_stall",
	[]],

	[anyone|plyr, "escort_merchant_caravan_quest_brief",
	[
		(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party", "p_main_party"),
		(quest_get_slot, ":escort_merchant_caravan_target_amount", "qst_escort_merchant_caravan", slot_quest_target_amount),
		(ge, ":party_size_wo_prisoners_main_party", ":escort_merchant_caravan_target_amount")
	],
	"Sorry. I can't do that right now", "merchant_quest_stall",
	[]],

	[party_tpl|pt_merchant_caravan, "start",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_merchant_caravan_target_party"),
		(quest_slot_eq, "qst_escort_merchant_caravan", slot_quest_current_state, 2)
	],
	"We can cover the rest of the way ourselves. Thanks.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_merchant_caravan, "start",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_merchant_caravan_target_party"),
		(quest_get_slot, ":escort_merchant_caravan_target_center", "qst_escort_merchant_caravan", slot_quest_target_center),
		(store_distance_to_party_from_party, ":distance_to_party_from_party_escort_merchant_caravan_target_center_escort_merchant_caravan_target_party", ":escort_merchant_caravan_target_center", ":escort_merchant_caravan_target_party"),
		(lt, ":distance_to_party_from_party_escort_merchant_caravan_target_center_escort_merchant_caravan_target_party", 4),
		(quest_slot_eq, "qst_escort_merchant_caravan", slot_quest_current_state, 1)
	],
	"Well, we have almost reached {s21}. We can cover the rest of the way ourselves. Here's your pay... {reg14} coins. Thanks for escorting us. Good luck.", "close_window",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(quest_get_slot, ":escort_merchant_caravan_target_center", "qst_escort_merchant_caravan", slot_quest_target_center),
		(quest_get_slot, ":escort_merchant_caravan_giver_center", "qst_escort_merchant_caravan", slot_quest_giver_center),
		(quest_get_slot, ":escort_merchant_caravan_gold_reward", "qst_escort_merchant_caravan", slot_quest_gold_reward),
		(party_set_ai_behavior, ":escort_merchant_caravan_target_party", 1),
		(party_set_ai_object, ":escort_merchant_caravan_target_party", ":escort_merchant_caravan_target_center"),
		(party_set_flags, ":escort_merchant_caravan_target_party", 65536, 0),
		(str_store_party_name, 21, ":escort_merchant_caravan_target_center"),
		(call_script, "script_change_player_relation_with_center", ":escort_merchant_caravan_giver_center", 1),
		(call_script, "script_end_quest", "qst_escort_merchant_caravan"),
		(quest_set_slot, "qst_escort_merchant_caravan", slot_quest_current_state, 2),
		(call_script, "script_troop_add_gold", "trp_player", ":escort_merchant_caravan_gold_reward"),
		(assign, ":var_5", ":escort_merchant_caravan_gold_reward"),
		(val_mul, ":var_5", 5),
		(val_add, ":var_5", 200),
		(add_xp_as_reward, ":var_5"),
		(call_script, "script_change_troop_renown", "trp_player", 2),
		(assign, reg14, ":escort_merchant_caravan_gold_reward"),
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_merchant_caravan, "start",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_merchant_caravan_target_party"),
		(quest_slot_eq, "qst_escort_merchant_caravan", slot_quest_current_state, 0)
	],
	"Greetings. You must be our escort, right?", "merchant_caravan_intro_1",
	[
		(quest_set_slot, "qst_escort_merchant_caravan", slot_quest_current_state, 1)
	]],

	[party_tpl|pt_merchant_caravan_r, "start",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_merchant_caravan_target_party"),
		(quest_slot_eq, "qst_escort_merchant_caravan", slot_quest_current_state, 2)
	],
	"We can cover the rest of the way ourselves. Thanks.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_merchant_caravan_r, "start",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_merchant_caravan_target_party"),
		(quest_get_slot, ":escort_merchant_caravan_target_center", "qst_escort_merchant_caravan", slot_quest_target_center),
		(store_distance_to_party_from_party, ":distance_to_party_from_party_escort_merchant_caravan_target_center_escort_merchant_caravan_target_party", ":escort_merchant_caravan_target_center", ":escort_merchant_caravan_target_party"),
		(lt, ":distance_to_party_from_party_escort_merchant_caravan_target_center_escort_merchant_caravan_target_party", 4),
		(quest_slot_eq, "qst_escort_merchant_caravan", slot_quest_current_state, 1)
	],
	"Well, we have almost reached {s21}. We can cover the rest of the way ourselves. Here's your pay... {reg14} coins. Thanks for escorting us. Good luck.", "close_window",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(quest_get_slot, ":escort_merchant_caravan_target_center", "qst_escort_merchant_caravan", slot_quest_target_center),
		(quest_get_slot, ":escort_merchant_caravan_giver_center", "qst_escort_merchant_caravan", slot_quest_giver_center),
		(quest_get_slot, ":escort_merchant_caravan_gold_reward", "qst_escort_merchant_caravan", slot_quest_gold_reward),
		(party_set_ai_behavior, ":escort_merchant_caravan_target_party", 1),
		(party_set_ai_object, ":escort_merchant_caravan_target_party", ":escort_merchant_caravan_target_center"),
		(party_set_flags, ":escort_merchant_caravan_target_party", 65536, 0),
		(str_store_party_name, 21, ":escort_merchant_caravan_target_center"),
		(call_script, "script_change_player_relation_with_center", ":escort_merchant_caravan_giver_center", 1),
		(call_script, "script_end_quest", "qst_escort_merchant_caravan"),
		(quest_set_slot, "qst_escort_merchant_caravan", slot_quest_current_state, 2),
		(call_script, "script_troop_add_gold", "trp_player", ":escort_merchant_caravan_gold_reward"),
		(assign, ":var_5", ":escort_merchant_caravan_gold_reward"),
		(val_mul, ":var_5", 5),
		(val_add, ":var_5", 200),
		(add_xp_as_reward, ":var_5"),
		(call_script, "script_change_troop_renown", "trp_player", 2),
		(assign, reg14, ":escort_merchant_caravan_gold_reward"),
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_merchant_caravan_r, "start",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_merchant_caravan_target_party"),
		(quest_slot_eq, "qst_escort_merchant_caravan", slot_quest_current_state, 0)
	],
	"Greetings. You must be our escort, right?", "merchant_caravan_intro_1",
	[
		(quest_set_slot, "qst_escort_merchant_caravan", slot_quest_current_state, 1)
	]],

	[party_tpl|pt_merchant_caravan_r, "start",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_merchant_caravan_target_party")
	],
	"Eh. We've made it this far... What do you want us to do?", "escort_merchant_caravan_talk",
	[]],

	[party_tpl|pt_merchant_caravan_e, "start",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_merchant_caravan_target_party"),
		(quest_slot_eq, "qst_escort_merchant_caravan", slot_quest_current_state, 2)
	],
	"We can cover the rest of the way ourselves. Thanks.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_merchant_caravan_e, "start",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_merchant_caravan_target_party"),
		(quest_get_slot, ":escort_merchant_caravan_target_center", "qst_escort_merchant_caravan", slot_quest_target_center),
		(store_distance_to_party_from_party, ":distance_to_party_from_party_escort_merchant_caravan_target_center_escort_merchant_caravan_target_party", ":escort_merchant_caravan_target_center", ":escort_merchant_caravan_target_party"),
		(lt, ":distance_to_party_from_party_escort_merchant_caravan_target_center_escort_merchant_caravan_target_party", 4),
		(quest_slot_eq, "qst_escort_merchant_caravan", slot_quest_current_state, 1)
	],
	"Well, we have almost reached {s21}. We can cover the rest of the way ourselves. Here's your pay... {reg14} coins. Thanks for escorting us. Good luck.", "close_window",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(quest_get_slot, ":escort_merchant_caravan_target_center", "qst_escort_merchant_caravan", slot_quest_target_center),
		(quest_get_slot, ":escort_merchant_caravan_giver_center", "qst_escort_merchant_caravan", slot_quest_giver_center),
		(quest_get_slot, ":escort_merchant_caravan_gold_reward", "qst_escort_merchant_caravan", slot_quest_gold_reward),
		(party_set_ai_behavior, ":escort_merchant_caravan_target_party", 1),
		(party_set_ai_object, ":escort_merchant_caravan_target_party", ":escort_merchant_caravan_target_center"),
		(party_set_flags, ":escort_merchant_caravan_target_party", 65536, 0),
		(str_store_party_name, 21, ":escort_merchant_caravan_target_center"),
		(call_script, "script_change_player_relation_with_center", ":escort_merchant_caravan_giver_center", 1),
		(call_script, "script_end_quest", "qst_escort_merchant_caravan"),
		(quest_set_slot, "qst_escort_merchant_caravan", slot_quest_current_state, 2),
		(call_script, "script_troop_add_gold", "trp_player", ":escort_merchant_caravan_gold_reward"),
		(assign, ":var_5", ":escort_merchant_caravan_gold_reward"),
		(val_mul, ":var_5", 5),
		(val_add, ":var_5", 200),
		(add_xp_as_reward, ":var_5"),
		(call_script, "script_change_troop_renown", "trp_player", 2),
		(assign, reg14, ":escort_merchant_caravan_gold_reward"),
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_merchant_caravan_e, "start",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_merchant_caravan_target_party"),
		(quest_slot_eq, "qst_escort_merchant_caravan", slot_quest_current_state, 0)
	],
	"Greetings. You must be our escort, right?", "merchant_caravan_intro_1",
	[
		(quest_set_slot, "qst_escort_merchant_caravan", slot_quest_current_state, 1)
	]],

	[party_tpl|pt_merchant_caravan_e, "start",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_merchant_caravan_target_party")
	],
	"Eh. We've made it this far... What do you want us to do?", "escort_merchant_caravan_talk",
	[]],

	[anyone|plyr, "merchant_caravan_intro_1",
	[],
	"Yes. My name is {playername}. I will lead you to {s1}.", "merchant_caravan_intro_2",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_center", "qst_escort_merchant_caravan", slot_quest_target_center),
		(str_store_party_name, 1, ":escort_merchant_caravan_target_center")
	]],

	[anyone, "merchant_caravan_intro_2",
	[],
	"Well, It is good to know we won't travel alone. What do you want us to do now?", "escort_merchant_caravan_talk",
	[]],

	[party_tpl|pt_merchant_caravan, "start",
	[
		(quest_get_slot, ":escort_merchant_caravan_target_party", "qst_escort_merchant_caravan", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_merchant_caravan_target_party")
	],
	"Eh. We've made it this far... What do you want us to do?", "escort_merchant_caravan_talk",
	[]],

	[anyone|plyr, "escort_merchant_caravan_talk",
	[],
	"You follow my lead. I'll take you through a safe route.", "merchant_caravan_follow_lead",
	[]],

	[anyone, "merchant_caravan_follow_lead",
	[],
	"Alright. We'll be right behind you.", "close_window",
	[
		(assign, "$escort_merchant_caravan_mode", 0),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "escort_merchant_caravan_talk",
	[],
	"You stay here for a while. I'll go ahead and check the road.", "merchant_caravan_stay_here",
	[]],

	[anyone, "merchant_caravan_stay_here",
	[],
	"Alright. We'll be waiting here for you.", "close_window",
	[
		(assign, "$escort_merchant_caravan_mode", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "merchant_quest_requested",
	[
		(eq, "$random_merchant_quest_no", "qst_troublesome_bandits")
	],
	"Actually, I was looking for an able adventurer like you. There's this group of particularly troublesome bandits. They have infested the vicinity of our town and are preying on my caravans. They have avoided all the soldiers and the militias up to now. If someone doesn't stop them soon, I am going to be ruined...", "merchant_quest_brief",
	[]],

	[anyone, "merchant_quest_brief",
	[
		(eq, "$random_merchant_quest_no", "qst_troublesome_bandits")
	],
	"I will pay you {reg8} coins if you hunt down those troublesome bandits. It's dangerous work. But I believe that you are the {man/one} for it. What do you say?", "troublesome_bandits_quest_brief",
	[
		(quest_get_slot, reg8, "qst_troublesome_bandits", slot_quest_gold_reward)
	]],

	[anyone|plyr, "troublesome_bandits_quest_brief",
	[],
	"Very well. I will hunt down those bandits.", "merchant_quest_taken_bandits",
	[
		(set_spawn_radius, 7),
		(quest_get_slot, ":troublesome_bandits_giver_center", "qst_troublesome_bandits", slot_quest_giver_center),
		(try_begin),
			(eq, "$troop_trees", "trp_troop_tree_0"),
			(spawn_around_party, ":troublesome_bandits_giver_center", "pt_troublesome_bandits"),
			(quest_set_slot, "qst_troublesome_bandits", slot_quest_target_party, reg0),
			(store_num_parties_destroyed, "$qst_troublesome_bandits_eliminated", "pt_troublesome_bandits"),
			(store_num_parties_destroyed_by_player, "$qst_troublesome_bandits_eliminated_by_player", "pt_troublesome_bandits"),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_1"),
			(spawn_around_party, ":troublesome_bandits_giver_center", "pt_troublesome_bandits_r"),
			(quest_set_slot, "qst_troublesome_bandits", slot_quest_target_party, reg0),
			(store_num_parties_destroyed, "$qst_troublesome_bandits_eliminated", "pt_troublesome_bandits_r"),
			(store_num_parties_destroyed_by_player, "$qst_troublesome_bandits_eliminated_by_player", "pt_troublesome_bandits_r"),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_2"),
			(spawn_around_party, ":troublesome_bandits_giver_center", "pt_troublesome_bandits_e"),
			(quest_set_slot, "qst_troublesome_bandits", slot_quest_target_party, reg0),
			(store_num_parties_destroyed, "$qst_troublesome_bandits_eliminated", "pt_troublesome_bandits_e"),
			(store_num_parties_destroyed_by_player, "$qst_troublesome_bandits_eliminated_by_player", "pt_troublesome_bandits_e"),
		(try_end),
		(str_store_troop_name, 9, "$g_talk_troop"),
		(str_store_party_name_link, 4, "$g_encountered_party"),
		(setup_quest_text, "qst_troublesome_bandits"),
		(str_store_string, 2, "@The merchant {s9} of {s4} asked you to hunt down the troublesome bandits in the vicinity of the town."),
		(call_script, "script_start_quest", "qst_troublesome_bandits", "$g_talk_troop")
	]],

	[anyone, "merchant_quest_taken_bandits",
	[],
	"You will? Splendid. Good luck to you.", "close_window",
	[]],

	[anyone|plyr, "troublesome_bandits_quest_brief",
	[],
	"Sorry. I don't have time for this right now.", "merchant_quest_stall",
	[]],

	[anyone, "merchant_quest_requested",
	[
		(eq, "$random_merchant_quest_no", "qst_cheese_rustlers")
	],
	"Actually, I was looking for an able adventurer like you. There's been a disturbing rise in the level of grain related crime recently. Every night, thieves have been sneaking into our town, under cover of darkness, stealing our grain and carrying it right out the gate! The town watch seems powerless to stop them, and if someone doesn't stop them soon, our reputation as merchants will be ruined...", "merchant_quest_brief",
	[]],

	[anyone, "merchant_quest_brief",
	[
		(eq, "$random_merchant_quest_no", "qst_cheese_rustlers")
	],
	"I will pay you {reg8} coins if you hunt down these outlaws. It's dangerous work. But I believe that you are the {man/woman} for it. What do you say?", "cheese_rustlers_quest_brief",
	[
		(quest_get_slot, reg8, "qst_cheese_rustlers", slot_quest_gold_reward)
	]],

	[anyone|plyr, "cheese_rustlers_quest_brief",
	[],
	"Alright. I will hunt down these petty thieves.", "merchant_quest_taken_cheese_rustlers",
	[
		(set_spawn_radius, 7),
		(quest_get_slot, ":cheese_rustlers_giver_center", "qst_cheese_rustlers", slot_quest_giver_center),
		(spawn_around_party, ":cheese_rustlers_giver_center", "pt_cheese_rustlers"),
		(quest_set_slot, "qst_cheese_rustlers", slot_quest_target_party, reg0),
		(store_num_parties_destroyed, "$qst_cheese_rustlers_eliminated", "pt_cheese_rustlers"),
		(store_num_parties_destroyed_by_player, "$qst_cheese_rustlers_eliminated_by_player", "pt_cheese_rustlers"),
		(str_store_troop_name, 9, "$g_talk_troop"),
		(str_store_party_name_link, 4, "$g_encountered_party"),
		(setup_quest_text, "qst_cheese_rustlers"),
		(str_store_string, 2, "@Merchant {s9} of {s4} asked you to hunt down the grain thieves in the vicinity of the town."),
		(call_script, "script_start_quest", "qst_cheese_rustlers", "$g_talk_troop")
	]],

	[anyone, "merchant_quest_taken_cheese_rustlers",
	[],
	"You will? I am so happy to hear that. Good luck to you.", "close_window",
	[]],

	[anyone|plyr, "cheese_rustlers_quest_brief",
	[],
	"Sorry. I don't have time for this right now.", "merchant_quest_stall",
	[]],

	[anyone, "merchant_quest_requested",
	[
		(eq, "$random_merchant_quest_no", "qst_cheese_paladins")
	],
	"Actually, I was looking for an able adventurer like you. There's been a disturbing rise in the level of wine related crime recently. Every night, thieves have been sneaking into our town, under cover of darkness, stealing barrels of wine and rolling them right out the gate! The town watch seems powerless to stop them, and if someone doesn't do something about it soon, our reputation as merchants will be ruined...", "merchant_quest_brief",
	[]],

	[anyone, "merchant_quest_brief",
	[
		(eq, "$random_merchant_quest_no", "qst_cheese_paladins")
	],
	"I will pay you {reg8} coins if you hunt down these thieves. It's dangerous work. But it should be a pushover for one such as you. What do you say?", "cheese_paladins_quest_brief",
	[
		(quest_get_slot, reg8, "qst_cheese_paladins", slot_quest_gold_reward)
	]],

	[anyone|plyr, "cheese_paladins_quest_brief",
	[],
	"Alright. I will hunt down these outlaws.", "merchant_quest_taken_cheese_paladins",
	[
		(set_spawn_radius, 7),
		(quest_get_slot, ":cheese_paladins_giver_center", "qst_cheese_paladins", slot_quest_giver_center),
		(spawn_around_party, ":cheese_paladins_giver_center", "pt_cheese_paladins"),
		(quest_set_slot, "qst_cheese_paladins", slot_quest_target_party, reg0),
		(store_num_parties_destroyed, "$qst_cheese_paladins_eliminated", "pt_cheese_paladins"),
		(store_num_parties_destroyed_by_player, "$qst_cheese_paladins_eliminated_by_player", "pt_cheese_paladins"),
		(str_store_troop_name, 9, "$g_talk_troop"),
		(str_store_party_name_link, 4, "$g_encountered_party"),
		(setup_quest_text, "qst_cheese_paladins"),
		(str_store_string, 2, "@Merchant {s9} of {s4} asked you to hunt down the cheese rustlers in the vicinity of the town."),
		(call_script, "script_start_quest", "qst_cheese_paladins", "$g_talk_troop")
	]],

	[anyone, "merchant_quest_taken_cheese_paladins",
	[],
	"You will? I am so happy to hear that. Good luck to you, {playername}.", "close_window",
	[]],

	[anyone|plyr, "cheese_paladins_quest_brief",
	[],
	"Sorry. I don't have time for this right now.", "merchant_quest_stall",
	[]],

	[anyone, "merchant_quest_requested",
	[
		(eq, "$random_merchant_quest_no", "qst_bar_brawl"),
		(str_store_party_name, 3, "$current_town")
	],
	"You may be able to help me. The local toughs are getting out of control here in town. They hang around the tavern all day, upsetting the customers and picking fights with any stranger who happens through. One of them is the cousin of an officer in the Town Watch, so my hands are tied. I don't suppose you'd be interested in teaching them a lesson?", "merchant_quest_brief",
	[
		(quest_get_slot, reg8, "qst_bar_brawl", slot_quest_gold_reward),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_party_name_link, 3, "$current_town"),
		(setup_quest_text, "qst_bar_brawl"),
		(str_store_string, 2, "@{s9} asked you to deal with the barflies at {s3}.")
	]],

	[anyone, "merchant_quest_brief",
	[
		(eq, "$random_merchant_quest_no", "qst_bar_brawl")
	],
	"I will pay you well if you cause a bit of tumult outside the tavern,  and in the process, administer a good beating to those drunks. What do you say?", "bar_brawl_quest_brief",
	[]],

	[anyone|plyr, "bar_brawl_quest_brief",
	[],
	"I'll deal with it.", "merchant_quest_taken_bar_brawl",
	[]],

	[anyone|plyr, "bar_brawl_quest_brief",
	[],
	"I'm no brawler. Find someone else for your job.", "merchant_quest_stall",
	[]],

	[anyone, "merchant_quest_taken_bar_brawl",
	[
		(try_begin),
			(store_character_level, ":character_level_player", "trp_player"),
			(is_between, ":character_level_player", 0, 14),
		(else_try),
			(store_character_level, ":character_level_player", "trp_player"),
			(ge, ":character_level_player", 15),
			(str_store_string, 17, "@Oh, and these fellows fight dirty. Take this."),
		(try_end)
	],
	"Very good. I am glad you've accepted, {playername}. Here, get out of that armour and into these clothes, they'll never fall for our ruse if you look like a warrior. And give me your weapons. I'll head up to the tavern and tell the lads there's someone out on the street insulting their mothers. Wait here.", "close_window",
	[
		(call_script, "script_start_quest", "$random_merchant_quest_no", "$g_talk_troop"),
		(assign, "$g_leave_town", 1),
		(assign, "$qst_bar_brawl_center", "$current_town"),
		(rest_for_hours, 10, 4, 0),
		(finish_mission)
	]],

	[anyone, "merchant_quest_requested",
	[
		(eq, "$random_merchant_quest_no", "qst_kidnapped_girl")
	],
	"Actually, I was looking for a reliable {man/helper} that can undertake an important mission. A group of bandits have kidnapped the daughter of a friend of mine and are holding her for ransom. My friend is ready to pay them, but we still need someone to take the money to those rascals and bring the girl back to safety.", "merchant_quest_brief",
	[]],

	[anyone, "merchant_quest_brief",
	[
		(eq, "$random_merchant_quest_no", "qst_kidnapped_girl")
	],
	"The amount the bandits ask as ransom is {reg12} coins. I will give you that money once you accept to take the quest. You have 15 days to take the money to the bandits who will be waiting near the village of {s4}. Those bastards said that they are going to kill the poor girl if they don't get the money by that time. You will get your pay of {reg8} coins when you bring the girl safely back here.", "kidnapped_girl_quest_brief",
	[
		(quest_get_slot, ":kidnapped_girl_target_center", "qst_kidnapped_girl", slot_quest_target_center),
		(str_store_party_name, 4, ":kidnapped_girl_target_center"),
		(quest_get_slot, reg8, "qst_kidnapped_girl", slot_quest_gold_reward),
		(quest_get_slot, reg12, "qst_kidnapped_girl", slot_quest_target_amount)
	]],

	[anyone|plyr, "kidnapped_girl_quest_brief",
	[],
	"All right. I will take the ransom money to the bandits and bring back the girl.", "kidnapped_girl_quest_taken",
	[
		(set_spawn_radius, 4),
		(quest_get_slot, ":kidnapped_girl_target_center", "qst_kidnapped_girl", slot_quest_target_center),
		(quest_get_slot, ":kidnapped_girl_target_amount", "qst_kidnapped_girl", slot_quest_target_amount),
		(try_begin),
			(eq, "$troop_trees", "trp_troop_tree_0"),
			(spawn_around_party, ":kidnapped_girl_target_center", "pt_bandits_awaiting_ransom"),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_1"),
			(spawn_around_party, ":kidnapped_girl_target_center", "pt_bandits_awaiting_ransom_r"),
		(else_try),
			(eq, "$troop_trees", "trp_troop_tree_2"),
			(spawn_around_party, ":kidnapped_girl_target_center", "pt_bandits_awaiting_ransom_e"),
		(try_end),
		(assign, ":var_3", reg0),
		(quest_set_slot, "qst_kidnapped_girl", slot_quest_target_party, ":var_3"),
		(party_set_ai_behavior, ":var_3", 0),
		(party_set_ai_object, ":var_3", "p_main_party"),
		(party_set_flags, ":var_3", 65536, 0),
		(call_script, "script_troop_add_gold", "trp_player", ":kidnapped_girl_target_amount"),
		(assign, reg12, ":kidnapped_girl_target_amount"),
		(str_store_troop_name, 1, "$g_talk_troop"),
		(str_store_party_name_link, 4, "$g_encountered_party"),
		(str_store_party_name_link, 3, ":kidnapped_girl_target_center"),
		(setup_quest_text, "qst_kidnapped_girl"),
		(str_store_string, 2, "@Guildmaster of {s4} gave you {reg12} coins to pay the ransom of a girl kidnapped by bandits. You are to meet the bandits near {s3} and pay them the ransom fee. After that you are to bring the girl back to {s4}."),
		(call_script, "script_start_quest", "qst_kidnapped_girl", "$g_talk_troop")
	]],

	[anyone, "kidnapped_girl_quest_taken",
	[],
	"Good. I knew we could trust you at this. Here is the ransom money, {reg12} coins. Count it before taking it. And please, don't attempt to do anything rash. Keep in mind that the girl's well being is more important than anything else...", "close_window",
	[]],

	[anyone|plyr, "kidnapped_girl_quest_brief",
	[],
	"Sorry. I don't have time for this right now.", "merchant_quest_stall",
	[]],

	[trp_kidnapped_girl, "start",
	[
		(eq, "$talk_context", 10)
	],
	"Thank you so much for bringing me back!  I can't wait to see my family. Good-bye.", "close_window",
	[
		(remove_member_from_party, "trp_kidnapped_girl"),
		(quest_set_slot, "qst_kidnapped_girl", slot_quest_current_state, 4)
	]],

	[plyr|trp_kidnapped_girl, "kidnapped_girl_liberated_map",
	[],
	"Yes. Come with me. We are going home.", "kidnapped_girl_liberated_map_2a",
	[]],

	[trp_kidnapped_girl, "kidnapped_girl_liberated_map_2a",
	[
		(neg|party_can_join)
	],
	"Unfortunately you do not seem to have room for me.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[trp_kidnapped_girl, "kidnapped_girl_liberated_map_2a",
	[],
	"Oh really? Thank you so much!", "close_window",
	[
		(party_join),
		(quest_set_slot, "qst_kidnapped_girl", slot_quest_current_state, 3),
		(assign, "$g_leave_encounter", 1)
	]],

	[plyr|trp_kidnapped_girl, "kidnapped_girl_liberated_map",
	[],
	"Wait here a while longer. I'll come back for you.", "kidnapped_girl_liberated_map_2b",
	[]],

	[trp_kidnapped_girl, "kidnapped_girl_liberated_map_2b",
	[],
	"Oh, please {Ser/my lady}, do not leave me here all alone!", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[trp_kidnapped_girl, "start",
	[],
	"Oh {Ser/my lady}. Thank you so much for rescuing me. Will you take me to my family now?", "kidnapped_girl_liberated_map",
	[]],

	[plyr|trp_kidnapped_girl, "kidnapped_girl_liberated_battle",
	[],
	"Yes. Come with me. We are going home.", "kidnapped_girl_liberated_battle_2a",
	[]],

	[trp_kidnapped_girl, "kidnapped_girl_liberated_battle_2a",
	[
		(neg|hero_can_join, "p_main_party")
	],
	"Unfortunately you do not seem to have room for me.", "kidnapped_girl_liberated_battle_2b",
	[]],

	[trp_kidnapped_girl, "kidnapped_girl_liberated_battle_2a",
	[],
	"Oh really? Thank you so much!", "close_window",
	[
		(party_add_members, "p_main_party", "trp_kidnapped_girl", 1),
		(quest_set_slot, "qst_kidnapped_girl", slot_quest_current_state, 3)
	]],

	[plyr|trp_kidnapped_girl, "kidnapped_girl_liberated_battle",
	[],
	"Wait here a while longer. I'll come back for you.", "kidnapped_girl_liberated_battle_2b",
	[]],

	[trp_kidnapped_girl, "kidnapped_girl_liberated_battle_2b",
	[],
	"Oh, please {Ser/my lady}, do not leave me here all alone!", "close_window",
	[
		(add_companion_party, "trp_kidnapped_girl"),
		(assign, "$g_leave_encounter", 1)
	]],

	[trp_kidnapped_girl, "start",
	[],
	"Can I come with you now?", "kidnapped_girl_liberated_map",
	[]],

	[party_tpl|pt_bandits_awaiting_ransom, "start",
	[
		(quest_slot_eq, "qst_kidnapped_girl", slot_quest_current_state, 0)
	],
	"Are you the one that brought the ransom? Quick, give us the money now.", "bandits_awaiting_ransom_intro_1",
	[
		(quest_set_slot, "qst_kidnapped_girl", slot_quest_current_state, 1)
	]],

	[party_tpl|pt_bandits_awaiting_ransom, "start",
	[
		(quest_slot_eq, "qst_kidnapped_girl", slot_quest_current_state, 1)
	],
	"You came back? Quick, give us the money now.", "bandits_awaiting_ransom_intro_1",
	[]],

	[party_tpl|pt_bandits_awaiting_ransom_r, "start",
	[
		(quest_slot_eq, "qst_kidnapped_girl", slot_quest_current_state, 0)
	],
	"Are you the one that brought the ransom? Quick, give us the money now.", "bandits_awaiting_ransom_intro_1",
	[
		(quest_set_slot, "qst_kidnapped_girl", slot_quest_current_state, 1)
	]],

	[party_tpl|pt_bandits_awaiting_ransom_r, "start",
	[
		(quest_slot_eq, "qst_kidnapped_girl", slot_quest_current_state, 1)
	],
	"You came back? Quick, give us the money now.", "bandits_awaiting_ransom_intro_1",
	[]],

	[party_tpl|pt_bandits_awaiting_ransom_e, "start",
	[
		(quest_slot_eq, "qst_kidnapped_girl", slot_quest_current_state, 0)
	],
	"Are you the one that brought the ransom? Quick, give us the money now.", "bandits_awaiting_ransom_intro_1",
	[
		(quest_set_slot, "qst_kidnapped_girl", slot_quest_current_state, 1)
	]],

	[party_tpl|pt_bandits_awaiting_ransom_e, "start",
	[
		(quest_slot_eq, "qst_kidnapped_girl", slot_quest_current_state, 1)
	],
	"You came back? Quick, give us the money now.", "bandits_awaiting_ransom_intro_1",
	[]],

	[anyone|plyr, "bandits_awaiting_ransom_intro_1",
	[
		(store_troop_gold, ":troop_gold"),
		(quest_get_slot, ":kidnapped_girl_target_amount", "qst_kidnapped_girl", slot_quest_target_amount),
		(ge, ":troop_gold", ":kidnapped_girl_target_amount")
	],
	"Here, take the money. Just set the girl free.", "bandits_awaiting_ransom_pay",
	[]],

	[anyone, "bandits_awaiting_ransom_pay",
	[],
	"Heh. You've brought the money all right. You can take the girl now. It was a pleasure doing business with you...", "close_window",
	[
		(quest_get_slot, ":kidnapped_girl_target_amount", "qst_kidnapped_girl", slot_quest_target_amount),
		(quest_get_slot, ":kidnapped_girl_target_party", "qst_kidnapped_girl", slot_quest_target_party),
		(quest_get_slot, ":kidnapped_girl_target_center", "qst_kidnapped_girl", slot_quest_target_center),
		(troop_remove_gold, "trp_player", ":kidnapped_girl_target_amount"),
		(remove_member_from_party, "trp_kidnapped_girl", ":kidnapped_girl_target_party"),
		(set_spawn_radius, 1),
		(spawn_around_party, ":kidnapped_girl_target_party", "pt_kidnapped_girl"),
		(assign, ":var_4", reg0),
		(party_set_ai_behavior, ":var_4", 0),
		(party_set_flags, ":var_4", 65536, 0),
		(quest_set_slot, "qst_kidnapped_girl", slot_quest_current_state, 2),
		(party_set_ai_behavior, ":kidnapped_girl_target_party", 1),
		(party_set_ai_object, ":kidnapped_girl_target_party", ":kidnapped_girl_target_center"),
		(party_set_flags, ":kidnapped_girl_target_party", 65536, 0),
		(add_gold_to_party, ":kidnapped_girl_target_amount", ":kidnapped_girl_target_party"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "bandits_awaiting_ransom_intro_1",
	[],
	"No way! You release the girl first.", "bandits_awaiting_ransom_b",
	[]],

	[anyone, "bandits_awaiting_ransom_b",
	[],
	"You fool! Stop playing games and give us the money! ", "bandits_awaiting_ransom_b2",
	[]],

	[anyone|plyr, "bandits_awaiting_ransom_b2",
	[
		(store_troop_gold, ":troop_gold"),
		(quest_get_slot, ":kidnapped_girl_target_amount", "qst_kidnapped_girl", slot_quest_target_amount),
		(ge, ":troop_gold", ":kidnapped_girl_target_amount")
	],
	"All right. Here's your money. Let the girl go now.", "bandits_awaiting_ransom_pay",
	[]],

	[anyone|plyr, "bandits_awaiting_ransom_b2",
	[],
	"I had left the money in a safe place. Let me go fetch it.", "bandits_awaiting_ransom_no_money",
	[]],

	[anyone, "bandits_awaiting_ransom_no_money",
	[],
	"Are you testing our patience or something?  Go and bring that money here quickly.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "bandits_awaiting_ransom_b2",
	[],
	"I have no intention to pay you anything. I demand that you release the girl now!", "bandits_awaiting_ransom_fight",
	[]],

	[anyone, "bandits_awaiting_ransom_fight",
	[],
	"You won't be demanding anything when you're dead.", "close_window",
	[
		(encounter_attack)
	]],

	[party_tpl|pt_bandits_awaiting_ransom, "start",
	[
		(quest_slot_ge, "qst_kidnapped_girl", 11, 2)
	],
	"What's it? You have given us the money. We have no more business.", "bandits_awaiting_remeet",
	[]],

	[party_tpl|pt_bandits_awaiting_ransom_r, "start",
	[
		(quest_slot_ge, "qst_kidnapped_girl", 11, 2)
	],
	"What's it? You have given us the money. We have no more business.", "bandits_awaiting_remeet",
	[]],

	[party_tpl|pt_bandits_awaiting_ransom_e, "start",
	[
		(quest_slot_ge, "qst_kidnapped_girl", 11, 2)
	],
	"What's it? You have given us the money. We have no more business.", "bandits_awaiting_remeet",
	[]],

	[anyone|plyr, "bandits_awaiting_remeet",
	[],
	"Sorry to bother you. I'll be on my way now.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "bandits_awaiting_remeet",
	[],
	"We have one more business. You'll give the money back to me.", "bandits_awaiting_remeet_2",
	[]],

	[anyone, "bandits_awaiting_remeet_2",
	[],
	"Oh, that business! Of course. Let us get down to it.", "close_window",
	[
		(encounter_attack)
	]],

	[party_tpl|pt_kidnapped_girl, "start",
	[],
	"Oh {Ser/my lady}. Thank you so much for rescuing me. Will you take me to my family now?", "kidnapped_girl_encounter_1",
	[]],

	[anyone|plyr, "kidnapped_girl_encounter_1",
	[],
	"Yes. Come with me. I'll take you home.", "kidnapped_girl_join",
	[]],

	[anyone, "kidnapped_girl_join",
	[
		(neg|party_can_join)
	],
	"Unfortunately you do not seem to have room for me.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "kidnapped_girl_join",
	[],
	"Oh, thank you so much!", "close_window",
	[
		(party_join),
		(quest_set_slot, "qst_kidnapped_girl", slot_quest_current_state, 3),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "kidnapped_girl_encounter_1",
	[],
	"Wait here a while longer. I'll come back for you.", "kidnapped_girl_wait",
	[]],

	[anyone, "kidnapped_girl_wait",
	[],
	"Oh, please {Ser/my lady}, do not leave me here all alone!", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "merchant_quest_about_job_2",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_kidnapped_girl"),
		(quest_slot_eq, "qst_kidnapped_girl", slot_quest_current_state, 3),
		(neg|main_party_has_troop, "trp_kidnapped_girl")
	],
	"Unfortunately I lost the girl on the way here...", "lost_kidnapped_girl",
	[]],

	[anyone, "lost_kidnapped_girl",
	[],
	"Oh no! How am I going to tell this to my friend?", "lost_kidnapped_girl_2",
	[]],

	[anyone|plyr, "lost_kidnapped_girl_2",
	[],
	"I'm sorry. I could do nothing about it.", "lost_kidnapped_girl_3",
	[]],

	[anyone, "lost_kidnapped_girl_3",
	[],
	"You let me down {playername}. I had trusted you. I will let people know of your incompetence at this task. Also, I want back that {reg8} coins I gave you as the ransom fee.", "lost_kidnapped_girl_4",
	[
		(quest_get_slot, reg8, "qst_kidnapped_girl", slot_quest_target_amount),
		(try_for_parties, ":var_1"),
			(party_count_members_of_type, ":var_2", ":var_1", "trp_kidnapped_girl"),
			(gt, ":var_2", 0),
			(party_remove_members, ":var_1", "trp_kidnapped_girl", 1),
			(party_remove_prisoners, ":var_1", "trp_kidnapped_girl", 1),
		(try_end),
		(call_script, "script_end_quest", "qst_kidnapped_girl"),
		(call_script, "script_change_troop_renown", "trp_player", -5)
	]],

	[anyone|plyr, "lost_kidnapped_girl_4",
	[
		(store_troop_gold, ":troop_gold"),
		(quest_get_slot, ":kidnapped_girl_target_amount", "qst_kidnapped_girl", slot_quest_target_amount),
		(ge, ":troop_gold", ":kidnapped_girl_target_amount")
	],
	"Of course. Here you are...", "merchant_quest_about_job_5a",
	[
		(quest_get_slot, ":kidnapped_girl_target_amount", "qst_kidnapped_girl", slot_quest_target_amount),
		(troop_remove_gold, "trp_player", ":kidnapped_girl_target_amount")
	]],

	[anyone, "merchant_quest_about_job_5a",
	[],
	"At least you have the decency to return the money.", "close_window",
	[]],

	[anyone|plyr, "lost_kidnapped_girl_4",
	[],
	"Sorry. I don't have that amount with me.", "merchant_quest_about_job_5b",
	[]],

	[anyone, "merchant_quest_about_job_5b",
	[],
	"Do you expect me to believe that? You are going to pay that ransom fee back! Go and bring the money now!", "close_window",
	[
		(quest_get_slot, ":kidnapped_girl_target_amount", "qst_kidnapped_girl", slot_quest_target_amount),
		(val_add, "$debt_to_merchants_guild", ":kidnapped_girl_target_amount")
	]],

	[anyone, "merchant_quest_requested",
	[
		(eq, "$random_merchant_quest_no", "qst_persuade_lords_to_make_peace"),
		(quest_get_slot, ":persuade_lords_to_make_peace_target_faction", "qst_persuade_lords_to_make_peace", slot_quest_target_faction),
		(quest_get_slot, ":persuade_lords_to_make_peace_object_troop", "qst_persuade_lords_to_make_peace", slot_quest_object_troop),
		(quest_get_slot, ":persuade_lords_to_make_peace_target_troop", "qst_persuade_lords_to_make_peace", slot_quest_target_troop),
		(str_store_troop_name_link, 12, ":persuade_lords_to_make_peace_object_troop"),
		(str_store_troop_name_link, 13, ":persuade_lords_to_make_peace_target_troop"),
		(str_store_faction_name_link, 14, ":persuade_lords_to_make_peace_target_faction"),
		(str_store_faction_name_link, 15, "$g_encountered_party_faction")
	],
	"This war between {s15} and {s14} has brought our town to the verge of ruin. Our caravans get raided before they can reach their destination. Our merchants are afraid to leave the safety of the town walls. And as if those aren't enough, the taxes to maintain the war take away the last bits of our savings. If peace does not come soon, we can not hold on for much longer.", "merchant_quest_persuade_peace_1",
	[]],

	[anyone|plyr, "merchant_quest_persuade_peace_1",
	[],
	"You are right. But who can stop this madness called war?", "merchant_quest_brief",
	[]],

	[anyone|plyr, "merchant_quest_persuade_peace_1",
	[],
	"It is your duty to help the nobles in their war effort. You shouldn't complain about it.", "merchant_quest_persuade_peace_reject",
	[]],

	[anyone, "merchant_quest_persuade_peace_reject",
	[],
	"Hah. The nobles fight their wars for their greed and their dreams of glory. And it is poor honest folk like us who have to bear the real burden. But you obviously don't want to hear about that.", "close_window",
	[]],

	[anyone, "merchant_quest_brief",
	[
		(eq, "$random_merchant_quest_no", "qst_persuade_lords_to_make_peace"),
		(quest_get_slot, ":persuade_lords_to_make_peace_object_troop", "qst_persuade_lords_to_make_peace", slot_quest_object_troop),
		(call_script, "script_dplmc_store_troop_is_female", ":persuade_lords_to_make_peace_object_troop"),
		(try_begin),
			(eq, reg0, 0),
			(quest_get_slot, ":persuade_lords_to_make_peace_target_troop", "qst_persuade_lords_to_make_peace", slot_quest_target_troop),
			(call_script, "script_dplmc_store_troop_is_female", ":persuade_lords_to_make_peace_target_troop"),
		(try_end)
	],
	"There have been attempts to reconcile the two sides and reach a settlement. However, there are powerful lords on both sides whose interests lie in continuing the war. {reg0?They:These men} urge all others not to heed to the word of sensible men, but to keep fighting. While these leaders remain influential, no peace settlement can be reached.", "merchant_quest_persuade_peace_3",
	[]],

	[anyone|plyr, "merchant_quest_persuade_peace_3",
	[],
	"Who are these warmongers who block the way of peace?", "merchant_quest_persuade_peace_4",
	[]],

	[anyone|plyr, "merchant_quest_persuade_peace_3",
	[],
	"Who are these lords you speak of?", "merchant_quest_persuade_peace_4",
	[]],

	[anyone, "merchant_quest_persuade_peace_4",
	[],
	"They are {s12} from {s15} and {s13} from {s14}. Until they change their mind or lose their influence, there will be no chance of having peace between the two sides.", "merchant_quest_persuade_peace_5",
	[
		(quest_get_slot, ":persuade_lords_to_make_peace_target_faction", "qst_persuade_lords_to_make_peace", slot_quest_target_faction),
		(quest_get_slot, ":persuade_lords_to_make_peace_object_troop", "qst_persuade_lords_to_make_peace", slot_quest_object_troop),
		(quest_get_slot, ":persuade_lords_to_make_peace_target_troop", "qst_persuade_lords_to_make_peace", slot_quest_target_troop),
		(str_store_troop_name_link, 12, ":persuade_lords_to_make_peace_object_troop"),
		(str_store_troop_name_link, 13, ":persuade_lords_to_make_peace_target_troop"),
		(str_store_faction_name_link, 14, ":persuade_lords_to_make_peace_target_faction"),
		(str_store_faction_name_link, 15, "$g_encountered_party_faction")
	]],

	[anyone|plyr, "merchant_quest_persuade_peace_5",
	[],
	"What can be done about this?", "merchant_quest_persuade_peace_6",
	[]],

	[anyone|plyr, "merchant_quest_persuade_peace_5",
	[],
	"Alas, it seems nothing can be done about it.", "merchant_quest_persuade_peace_6",
	[]],

	[anyone, "merchant_quest_persuade_peace_6",
	[],
	"There is a way to resolve the issue. A particularly determined person can perhaps persuade one or both of these lords to accept making peace. And even if that fails, it can be possible to see that these lords are defeated by force and taken prisoner. If they are captive, they will lose their influence and they can no longer oppose a settlement... What do you think? Can you do it?", "merchant_quest_persuade_peace_7",
	[]],

	[anyone|plyr, "merchant_quest_persuade_peace_7",
	[],
	"It seems difficult. But I will try.", "merchant_quest_persuade_peace_8",
	[]],

	[anyone|plyr, "merchant_quest_persuade_peace_7",
	[],
	"If the price is right, I may.", "merchant_quest_persuade_peace_8",
	[]],

	[anyone|plyr, "merchant_quest_persuade_peace_7",
	[],
	"Forget it. This is not my problem.", "merchant_quest_persuade_peace_8",
	[]],

	[anyone, "merchant_quest_persuade_peace_8",
	[],
	"Most of the merchants in the town will gladly open up their purses to support such a plan. I think we can collect {reg12} coins between ourselves. We will be happy to reward you with that sum, if you can work this out. Convince {s12} and {s13} to accept a peace settlement, and if either of them proves too stubborn, make sure he falls captive and can not be ransomed until a peace deal is settled.", "merchant_quest_persuade_peace_9",
	[
		(quest_get_slot, ":persuade_lords_to_make_peace_object_troop", "qst_persuade_lords_to_make_peace", slot_quest_object_troop),
		(quest_get_slot, ":persuade_lords_to_make_peace_target_troop", "qst_persuade_lords_to_make_peace", slot_quest_target_troop),
		(str_store_troop_name_link, 12, ":persuade_lords_to_make_peace_object_troop"),
		(str_store_troop_name_link, 13, ":persuade_lords_to_make_peace_target_troop"),
		(quest_get_slot, ":persuade_lords_to_make_peace_gold_reward", "qst_persuade_lords_to_make_peace", slot_quest_gold_reward),
		(assign, reg12, ":persuade_lords_to_make_peace_gold_reward")
	]],

	[anyone|plyr, "merchant_quest_persuade_peace_9",
	[],
	"All right. I will do my best.", "merchant_quest_persuade_peace_10",
	[]],

	[anyone|plyr, "merchant_quest_persuade_peace_9",
	[],
	"Sorry. I can not do this.", "merchant_quest_persuade_peace_no",
	[]],

	[anyone, "merchant_quest_persuade_peace_10",
	[],
	"Excellent. You will have our blessings. I hope you can deal with those two old goats. We will be waiting and hoping for the good news.", "close_window",
	[
		(str_store_party_name_link, 4, "$g_encountered_party"),
		(quest_get_slot, ":persuade_lords_to_make_peace_target_faction", "qst_persuade_lords_to_make_peace", slot_quest_target_faction),
		(quest_get_slot, ":persuade_lords_to_make_peace_object_troop", "qst_persuade_lords_to_make_peace", slot_quest_object_troop),
		(quest_get_slot, ":persuade_lords_to_make_peace_target_troop", "qst_persuade_lords_to_make_peace", slot_quest_target_troop),
		(quest_get_slot, ":persuade_lords_to_make_peace_gold_reward", "qst_persuade_lords_to_make_peace", slot_quest_gold_reward),
		(assign, reg12, ":persuade_lords_to_make_peace_gold_reward"),
		(str_store_troop_name_link, 12, ":persuade_lords_to_make_peace_object_troop"),
		(str_store_troop_name_link, 13, ":persuade_lords_to_make_peace_target_troop"),
		(str_store_faction_name_link, 14, ":persuade_lords_to_make_peace_target_faction"),
		(str_store_faction_name_link, 15, "$g_encountered_party_faction"),
		(setup_quest_text, "qst_persuade_lords_to_make_peace"),
		(str_store_string, 2, "@Guildmaster of {s4} promised you {reg12} coins if you can make sure that {s12} and {s13} no longer pose a threat to a peace settlement between {s15} and {s14}. In order to do that, you must either convince them or make sure they fall captive and remain so until a peace agreement is made."),
		(call_script, "script_start_quest", "qst_persuade_lords_to_make_peace", "$g_talk_troop"),
		(quest_get_slot, ":persuade_lords_to_make_peace_object_troop", "qst_persuade_lords_to_make_peace", slot_quest_object_troop),
		(quest_get_slot, ":persuade_lords_to_make_peace_target_troop", "qst_persuade_lords_to_make_peace", slot_quest_target_troop),
		(call_script, "script_report_quest_troop_positions", "qst_persuade_lords_to_make_peace", ":persuade_lords_to_make_peace_object_troop", 3),
		(call_script, "script_report_quest_troop_positions", "qst_persuade_lords_to_make_peace", ":persuade_lords_to_make_peace_target_troop", 4)
	]],

	[anyone, "merchant_quest_persuade_peace_no",
	[],
	"Don't say no right away. Think about this for some time. If there is a {man/lady} who can manage to do this, it is you.", "close_window",
	[]],

	[anyone, "merchant_quest_requested",
	[
		(eq, "$random_merchant_quest_no", "qst_deal_with_night_bandits")
	],
	"Do I indeed! There's a group of bandits infesting the town, and I'm at the end of my rope as to how to deal with them. They've been ambushing and robbing townspeople under the cover of night, and then fading away quick as lightning when the guards finally show up. We've not been able to catch a one of them. They only attack lone people, never daring to show themselves when there's a group about. I need someone who can take on these bandits alone and win. That seems to be the only way of bringing them to justice. Are you up to the task?", "merchant_quest_deal_with_night_bandits",
	[]],

	[anyone, "merchant_quest_brief",
	[
		(eq, "$random_merchant_quest_no", "qst_deal_with_night_bandits")
	],
	"There's a group of bandits infesting the town, and I'm at the end of my rope as to how to deal with them. They've been ambushing and robbing townspeople under the cover of night, and then fading away quick as lightning when the guards finally show up. We've not been able to catch a one of them. They only attack lone people, never daring to show themselves when there's a group about. I need someone who can take on these bandits alone and win. That seems to be the only way of bringing them to justice. Are you up to the task?", "merchant_quest_deal_with_night_bandits",
	[]],

	[anyone|plyr, "merchant_quest_deal_with_night_bandits",
	[],
	"Killing bandits? Why, certainly!", "deal_with_night_bandits_quest_taken",
	[
		(str_store_party_name_link, 14, "$g_encountered_party"),
		(setup_quest_text, "qst_deal_with_night_bandits"),
		(str_store_string, 2, "@The Guildmaster of {s14} has asked you to deal with a group of bandits terrorising the streets of {s14}. They only come out at night, and only attack lone travellers on the streets."),
		(call_script, "script_start_quest", "qst_deal_with_night_bandits", "$g_talk_troop")
	]],

	[anyone|plyr, "merchant_quest_deal_with_night_bandits",
	[],
	"My apologies, I'm not interested.", "merchant_quest_stall",
	[]],

	[anyone, "deal_with_night_bandits_quest_taken",
	[],
	"That takes a weight off my shoulders, {playername}. You can expect a fine reward if you come back successful. Just don't get yourself killed, eh?", "mayor_pretalk",
	[]],

	[anyone, "merchant_quest_requested",
	[
		(eq, "$random_merchant_quest_no", "qst_move_cattle_herd"),
		(quest_get_slot, ":move_cattle_herd_target_center", "qst_move_cattle_herd", slot_quest_target_center),
		(str_store_party_name, 13, ":move_cattle_herd_target_center")
	],
	"One of the merchants here is looking for herdsmen to take his cattle to the market at {s13}.", "merchant_quest_brief",
	[]],

	[anyone, "merchant_quest_brief",
	[
		(eq, "$random_merchant_quest_no", "qst_move_cattle_herd"),
		(quest_get_slot, reg8, "qst_move_cattle_herd", slot_quest_gold_reward),
		(quest_get_slot, ":move_cattle_herd_target_center", "qst_move_cattle_herd", slot_quest_target_center),
		(str_store_party_name, 13, ":move_cattle_herd_target_center")
	],
	"The cattle herd must be at {s13} within 30 days. Sooner is better, much better, but it must be absolutely no later than 30 days. If you can do that, I'd be willing to pay you {reg8} coins for your trouble. Interested?", "move_cattle_herd_quest_brief",
	[]],

	[anyone|plyr, "move_cattle_herd_quest_brief",
	[],
	"Aye, I can take the herd to {s13}.", "move_cattle_herd_quest_taken",
	[
		(call_script, "script_create_cattle_herd", "$g_encountered_party", 0),
		(quest_set_slot, "qst_move_cattle_herd", slot_quest_target_party, reg0),
		(str_store_party_name_link, 10, "$g_encountered_party"),
		(quest_get_slot, ":move_cattle_herd_target_center", "qst_move_cattle_herd", slot_quest_target_center),
		(str_store_party_name_link, 13, ":move_cattle_herd_target_center"),
		(quest_get_slot, reg8, "qst_move_cattle_herd", slot_quest_gold_reward),
		(setup_quest_text, "qst_move_cattle_herd"),
		(str_store_string, 2, "@Guildmaster of {s10} asked you to move a cattle herd to {s13}. You will earn {reg8} coins in return."),
		(call_script, "script_start_quest", "qst_move_cattle_herd", "$g_talk_troop")
	]],

	[anyone|plyr, "move_cattle_herd_quest_brief",
	[],
	"I am sorry, but no.", "merchant_quest_stall",
	[]],

	[anyone, "move_cattle_herd_quest_taken",
	[],
	"Splendid. You can find the herd right outside the town. After you take the animals to {s13}, return back to me and I will give you your pay.", "mayor_pretalk",
	[]],

	[anyone, "merchant_quest_requested",
	[],
	"I am afraid I can't offer you a job right now.", "mayor_pretalk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_village_1_elder", "trp_merchants_end"),
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_deliver_cattle"),
		(check_quest_succeeded, ":partner_quest"),
		(quest_get_slot, reg5, "qst_deliver_cattle", slot_quest_target_amount)
	],
	"My good {Ser/my lady}. Our village is grateful for your help. Thanks to the {reg5} heads of cattle you have brought, we can now raise our own herd.", "village_elder_deliver_cattle_thank",
	[
		(add_xp_as_reward, 400),
		(call_script, "script_change_center_prosperity", "$current_town", 4),
		(call_script, "script_change_player_relation_with_center", "$current_town", 5),
		(call_script, "script_end_quest", "qst_deliver_cattle"),
		(call_script, "script_add_log_entry", 4, "trp_player", "$current_town", -1, -1)
	]],

	[anyone, "village_elder_deliver_cattle_thank",
	[],
	"My good {lord/lady}, please, is there anything I can do for you?", "village_elder_talk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_village_1_elder", "trp_merchants_end"),
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_hunt_down_smugglers"),
		(check_quest_succeeded, ":partner_quest")
	],
	"Damn me, but you've done it, {playername}! You've wiped out all the smugglers. This village can prosper now. You certainly earned your reward. Here, take it, with my compliments.", "close_window",
	[
		(call_script, "script_change_center_prosperity", "$current_town", 4),
		(call_script, "script_change_player_relation_with_center", "$current_town", 5),
		(call_script, "script_troop_add_gold", "trp_player", 300),
		(add_xp_as_reward, 300),
		(call_script, "script_end_quest", "qst_hunt_down_smugglers"),
		(assign, "$qst_hunt_down_smugglers_num_parties_returned", 0),
		(assign, "$qst_hunt_down_smugglers_num_parties_fleed", 0),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_village_1_elder", "trp_merchants_end"),
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_hunt_down_smugglers"),
		(check_quest_failed, ":partner_quest")
	],
	"{playername}. We have been waiting for word of a great battle between you and the smugglers, but we have heard nothing. Don't tell me you let them go?", "elder_hunt_down_smugglers_failed",
	[]],

	[anyone|plyr, "elder_hunt_down_smugglers_failed",
	[],
	"Forgive me, elder, those smugglers were slippery as eels.", "elder_hunt_down_smugglers_failed_1a",
	[]],

	[anyone, "elder_hunt_down_smugglers_failed_1a",
	[],
	"Hmph, that is hardly an excuse for failure, {playername}. Now if you will excuse me, I need to work on the village defences, for they will be back, sure as winter.", "close_window",
	[
		(call_script, "script_change_center_prosperity", "$current_town", -8),
		(call_script, "script_change_player_relation_with_center", "$current_town", -8),
		(call_script, "script_end_quest", "qst_hunt_down_smugglers"),
		(assign, "$qst_hunt_down_smugglers_num_parties_returned", 0),
		(assign, "$qst_hunt_down_smugglers_num_parties_fleed", 0),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_village_1_elder", "trp_merchants_end"),
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_hunt_down_smugglers"),
		(check_quest_concluded, ":partner_quest"),
		(assign, reg17, "$qst_hunt_down_smugglers_num_parties_returned")
	],
	"You disappoint me, {playername}. There were three groups of smugglers that I asked you to hunt down. Three! I suppose I should be grateful that they will not all return, their hearts black with vengeance for the poor villagers who sold them out. But some will return, and that will be a bloody business. Here. Take your reward, and let this business be done.", "close_window",
	[
		(store_mul, ":value", "$qst_hunt_down_smugglers_num_parties_returned", 100),
		(val_div, ":value", 2),
		(call_script, "script_change_center_prosperity", "$current_town", -4),
		(call_script, "script_change_player_relation_with_center", "$current_town", -4),
		(call_script, "script_troop_add_gold", "trp_player", ":value"),
		(add_xp_as_reward, ":value"),
		(call_script, "script_end_quest", "qst_hunt_down_smugglers"),
		(assign, "$qst_hunt_down_smugglers_num_parties_returned", 0),
		(assign, "$qst_hunt_down_smugglers_num_parties_fleed", 0),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_village_1_elder", "trp_merchants_end"),
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_hunt_down_girl"),
		(check_quest_succeeded, ":partner_quest"),
		(quest_get_slot, reg5, "qst_hunt_down_girl", slot_quest_target_amount)
	],
	"Thank you so much for finding the girl and sending her back. Hopefully this will be a lesson to all the foolish girls around here. We're struggling as it is, we can't afford any more of our young ones leaving and raising a brood in a rival village. How does that benefit anyone here? You have our thanks.", "village_elder_hunt_down_girl_thank",
	[
		(add_xp_as_reward, 400),
		(call_script, "script_change_player_relation_with_center", "$current_town", 8),
		(call_script, "script_end_quest", "qst_hunt_down_girl"),
		(call_script, "script_add_log_entry", 4, "trp_player", "$current_town", -1, -1)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_village_1_elder", "trp_merchants_end"),
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_hunt_down_girl"),
		(check_quest_failed, ":partner_quest"),
		(quest_get_slot, reg5, "qst_hunt_down_girl", slot_quest_target_amount)
	],
	"Well, I see there wasn't much point in sending you after the girl. Do you realise that this village is on the verge of extinction? Every year, we have fewer and fewer children, and see our youth leave us for the town, or for other villages. You have helped that process along. Bah!", "village_elder_hunt_down_girl_thank",
	[
		(add_xp_as_reward, 400),
		(call_script, "script_change_player_relation_with_center", "$current_town", -4),
		(call_script, "script_end_quest", "qst_hunt_down_girl")
	]],

	[anyone, "village_elder_hunt_down_girl_thank",
	[],
	"Is there anything I can do for you?", "village_elder_talk",
	[]],

	[anyone, "start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_kidnapped_wife"),
		(quest_slot_eq, "qst_kidnapped_wife", slot_quest_current_state, 4),
		(quest_slot_eq, "qst_kidnapped_wife", slot_quest_giver_troop, "$g_talk_troop")
	],
	"Hello, {playername}. We are in your debt for bringing back the farmers wife.  You are truly a friend to our village. ", "close_window",
	[
		(call_script, "script_change_troop_renown", "trp_player", 6),
		(call_script, "script_change_player_relation_with_center", "$current_town", 4),
		(call_script, "script_end_quest", "qst_kidnapped_wife")
	]],

	[anyone, "start",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_kidnapped_wife"),
		(quest_slot_eq, "qst_kidnapped_wife", slot_quest_current_state, 3),
		(quest_slot_eq, "qst_kidnapped_wife", slot_quest_giver_troop, "$g_talk_troop"),
		(neg|main_party_has_troop, "trp_kidnapped_wife")
	],
	"Unfortunately I lost the woman on the way here...", "lost_kidnapped_wife",
	[]],

	[anyone, "lost_kidnapped_wife",
	[],
	"Oh no! How am I going to tell this to the husband?", "lost_kidnapped_wife_2",
	[]],

	[anyone|plyr, "lost_kidnapped_wife_2",
	[],
	"I'm sorry. I could do nothing about it.", "lost_kidnapped_wife_3",
	[]],

	[anyone, "lost_kidnapped_wife_3",
	[],
	"You disappoint me, {playername}. I trusted you. I will let people know of your incompetence.", "village_elder_talk",
	[
		(quest_get_slot, reg8, "qst_kidnapped_wife", slot_quest_target_amount),
		(try_for_parties, ":var_1"),
			(party_count_members_of_type, ":var_2", ":var_1", "trp_kidnapped_wife"),
			(gt, ":var_2", 0),
			(party_remove_members, ":var_1", "trp_kidnapped_wife", 1),
			(party_remove_prisoners, ":var_1", "trp_kidnapped_wife", 1),
		(try_end),
		(call_script, "script_end_quest", "qst_kidnapped_wife"),
		(call_script, "script_change_troop_renown", "trp_player", -5)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_village_1_elder", "trp_merchants_end"),
		(eq, "$g_talk_troop_met", 0),
		(str_store_party_name, 9, "$current_town"),
		(party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0"),
		(try_begin),
			(lt, reg0, 2),
			(str_store_string, 0, "str_dplmc_my_lordlady"),
		(try_end)
	],
	"Welcome to {s9}, {s0}. We were rejoiced by the news that you are the new {lord/lady} of our humble village. I am the village elder and I will be honoured to serve you in any way I can.", "village_elder_talk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_village_1_elder", "trp_merchants_end"),
		(eq, "$g_talk_troop_met", 0),
		(str_store_party_name, 9, "$current_town"),
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$current_town")
	],
	"Good day, {s0}, and welcome to {s9}. I am the elder of this village.", "village_elder_talk",
	[
		(add_xp_as_reward, 150)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_village_1_elder", "trp_merchants_end"),
		(party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0"),
		(ge, reg0, 3)
	],
	"Your highness, you honour our humble village with your presence.", "village_elder_talk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_village_1_elder", "trp_merchants_end"),
		(party_slot_eq, "$current_town", slot_town_lord, "trp_player")
	],
	"{My lord/My lady}, you honour our humble village with your presence.", "village_elder_talk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_village_1_elder", "trp_merchants_end"),
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$current_town")
	],
	"Good day, {s0}.", "village_elder_talk",
	[]],

	[anyone, "village_elder_pretalk",
	[],
	"Is there anything else I can do for you?", "village_elder_talk",
	[]],

	[anyone|plyr, "village_elder_talk",
	[
		(check_quest_active, "qst_hunt_down_fugitive"),
		(neg|check_quest_concluded, "qst_hunt_down_fugitive"),
		(quest_slot_eq, "qst_hunt_down_fugitive", slot_quest_target_center, "$current_town"),
		(quest_get_slot, ":hunt_down_fugitive_target_dna", "qst_hunt_down_fugitive", slot_quest_target_dna),
		(call_script, "script_get_name_from_dna_to_s50", ":hunt_down_fugitive_target_dna"),
		(str_store_string, 4, 50)
	],
	"I am looking for a man by the name of {s4}. I was told he may be hiding here.", "village_elder_ask_fugitive",
	[]],

	[anyone, "village_elder_ask_fugitive",
	[
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$current_town"),
		(is_currently_night)
	],
	"Strangers come and go to our village, {s0}. But I doubt you'll run into him at this hour of the night. You would have better luck during the day.", "village_elder_pretalk",
	[]],

	[anyone, "village_elder_ask_fugitive",
	[],
	"Strangers come and go to our village, {s0}. If he is hiding here, you will surely find him if you look around.", "close_window",
	[]],

	[anyone|plyr, "village_elder_talk",
	[
		(store_partner_quest, ":partner_quest"),
		(ge, ":partner_quest", 0)
	],
	"About the task you asked of me...", "village_elder_active_mission_1",
	[]],

	[anyone|plyr, "village_elder_talk",
	[
		(ge, "$g_talk_troop_faction_relation", 0),
		(store_partner_quest, ":partner_quest"),
		(lt, ":partner_quest", 0)
	],
	"Do you have any tasks I can help you with?", "village_elder_request_mission_ask",
	[]],

	[anyone|plyr, "village_elder_talk",
	[
		(party_slot_eq, "$current_town", slot_village_state, 0),
		(neg|party_slot_ge, "$current_town", 39, 1),
		(neg|party_slot_ge, "$current_town", 40, 1)
	],
	"I want to buy some supplies. I will pay with gold.", "village_elder_trade_begin",
	[]],

	[anyone, "village_elder_trade_begin",
	[],
	"Of course, {Ser/my lady}. Do you want to buy goods or cattle?", "village_elder_trade_talk",
	[]],

	[anyone|plyr, "village_elder_trade_talk",
	[],
	"I want to buy food and supplies.", "village_elder_trade",
	[]],

	[anyone, "village_elder_trade",
	[],
	"We have some food and other supplies in our storehouse. Come have a look.", "village_elder_pretalk",
	[
		(change_screen_trade, "$g_talk_troop")
	]],

	[anyone|plyr, "village_elder_trade_talk",
	[
		(party_slot_eq, "$current_town", slot_village_state, 0),
		(neg|party_slot_ge, "$current_town", 39, 1),
		(assign, ":value", 0),
		(try_begin),
			(check_quest_active, "qst_deliver_cattle"),
			(quest_slot_eq, "qst_deliver_cattle", slot_quest_target_center, "$current_town"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 0)
	],
	"I want to buy some cattle.", "village_elder_buy_cattle",
	[]],

	[anyone|plyr, "village_elder_trade_talk",
	[],
	"I changed my mind. I don't need to buy anything.", "village_elder_pretalk",
	[]],

	[anyone|plyr, "village_elder_talk",
	[],
	"Have you seen any enemies around here recently?", "village_elder_ask_enemies",
	[]],

	[anyone, "village_elder_ask_enemies",
	[
		(assign, ":value", 0),
		(party_get_slot, ":g_encountered_party_center_original_faction", "$g_encountered_party", slot_center_original_faction),
		(store_relation, ":relation_g_encountered_party_center_original_faction_player_supporters_faction", ":g_encountered_party_center_original_faction", "fac_player_supporters_faction"),
		(try_begin),
			(gt, ":relation_g_encountered_party_center_original_faction_player_supporters_faction", 0),
			(party_slot_ge, "$g_encountered_party", 26, 0),
			(assign, ":value", 1),
		(else_try),
			(party_slot_ge, "$g_encountered_party", 26, 30),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 0),
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$current_town")
	],
	"I am sorry, {s0}. We have neither seen nor heard of any war parties in this area.", "village_elder_pretalk",
	[]],

	[anyone, "village_elder_ask_enemies",
	[],
	"Hmm. Let me think about it...", "village_elder_tell_enemies",
	[
		(assign, "$temp", 0)
	]],

	[anyone, "village_elder_tell_enemies",
	[
		(assign, ":var_1", "$temp"),
		(assign, ":value", "trp_knight_1_1_wife"),
		(try_for_range, ":troop", "trp_npc1", ":value"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(troop_get_slot, ":troop_leaded_party", ":troop", slot_troop_leaded_party),
			(gt, ":troop_leaded_party", 0),
			(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
			(store_relation, ":relation_faction_of_troop_troop_player_supporters_faction", ":faction_of_troop_troop", "fac_player_supporters_faction"),
			(lt, ":relation_faction_of_troop_troop_player_supporters_faction", 0),
			(store_distance_to_party_from_party, ":distance_to_party_from_party_g_encountered_party_troop_leaded_party", "$g_encountered_party", ":troop_leaded_party"),
			(lt, ":distance_to_party_from_party_g_encountered_party_troop_leaded_party", 10),
			(call_script, "script_get_information_about_troops_position", ":troop", 0),
			(eq, reg0, 1),
			(val_sub, ":var_1", 1),
			(lt, ":var_1", 0),
			(assign, ":value", 0),
			(str_store_string, 2, "@He is not commanding any men at the moment."),
			(assign, ":var_8", 0),
			(assign, ":var_9", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_troop_leaded_party", ":troop_leaded_party"),
			(try_for_range_backwards, ":var_11", 0, ":num_companion_stacks_troop_leaded_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_troop_leaded_party_var_11", ":troop_leaded_party", ":var_11"),
				(neg|troop_is_hero, ":party_stack_troop_id_troop_leaded_party_var_11"),
				(party_stack_get_size, ":party_stack_size_troop_leaded_party_var_11", ":troop_leaded_party", ":var_11"),
				(party_stack_get_num_wounded, ":party_stack_num_wounded_troop_leaded_party_var_11", ":troop_leaded_party", ":var_11"),
				(val_add, ":var_8", ":party_stack_size_troop_leaded_party_var_11"),
				(val_add, ":var_9", ":party_stack_num_wounded_troop_leaded_party_var_11"),
			(try_end),
			(gt, ":var_8", 0),
			(call_script, "script_round_value", ":var_9"),
			(assign, reg1, reg0),
			(call_script, "script_round_value", ":var_8"),
			(str_store_string, 2, "@He currently commands {reg0} men{reg1?, of which around {reg1} are wounded:}."),
		(try_end),
		(eq, ":value", 0)
	],
	"{s1} {s2}", "village_elder_tell_enemies",
	[
		(val_add, "$temp", 1)
	]],

	[anyone, "village_elder_tell_enemies",
	[
		(eq, "$temp", 0),
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$current_town")
	],
	"No, {s0}. We haven't seen any war parties in this area for some time.", "village_elder_pretalk",
	[]],

	[anyone, "village_elder_tell_enemies",
	[],
	"Well, I guess that was all.", "village_elder_pretalk",
	[]],

	[anyone|plyr, "village_elder_talk",
	[
		(party_get_slot, ":current_town_village_bound_center", "$current_town", slot_village_bound_center),
		(assign, ":var_2", 0),
		(assign, ":var_3", 0),
		(party_get_num_prisoner_stacks, ":num_prisoner_stacks_current_town_village_bound_center", ":current_town_village_bound_center"),
		(try_for_range, ":number", 0, ":num_prisoner_stacks_current_town_village_bound_center"),
			(party_prisoner_stack_get_troop_id, ":party_prisoner_stack_troop_id_current_town_village_bound_center_number", ":current_town_village_bound_center", ":number"),
			(troop_is_hero, ":party_prisoner_stack_troop_id_current_town_village_bound_center_number"),
			(try_begin),
				(call_script, "script_cf_prisoner_offered_parole", ":party_prisoner_stack_troop_id_current_town_village_bound_center_number"),
				(party_add_members, "p_temp_party_2", ":party_prisoner_stack_troop_id_current_town_village_bound_center_number", 1),
				(val_add, ":var_3", 1),
			(else_try),
				(party_add_members, "p_temp_party", ":party_prisoner_stack_troop_id_current_town_village_bound_center_number", 1),
				(val_add, ":var_2", 1),
			(try_end),
		(try_end),
		(ge, ":var_2", 1)
	],
	"I need you to set a large fire on the outskirts of this village.", "village_elder_ask_set_fire",
	[]],

	[anyone, "village_elder_ask_set_fire",
	[
		(call_script, "script_dplmc_print_commoner_at_arg1_says_sir_madame_to_s0", "$current_town"),
		(eq, "$g_village_elder_did_not_liked_money_offered", 0),
		(party_get_slot, ":current_town_village_bound_center", "$current_town", slot_village_bound_center),
		(party_get_slot, ":current_town_village_bound_center_260", ":current_town_village_bound_center", 260),
		(store_current_hours, ":current_hours"),
		(ge, ":current_town_village_bound_center_260", ":current_hours")
	],
	"We have already agreed upon this, {s0}. I will do my best. You can trust me.", "close_window",
	[]],

	[anyone, "village_elder_ask_set_fire",
	[
		(eq, "$g_village_elder_did_not_liked_money_offered", 0)
	],
	"A fire, {s0}! Fires are dangerous! Why would you want such a thing?", "village_elder_ask_set_fire_1",
	[]],

	[anyone, "village_elder_ask_set_fire",
	[
		(eq, "$g_village_elder_did_not_liked_money_offered", 1)
	],
	"I believe that we have already discussed this issue, {s0}.", "village_elder_ask_set_fire_5",
	[]],

	[anyone, "village_elder_ask_set_fire",
	[
		(eq, "$g_village_elder_did_not_liked_money_offered", 2)
	],
	"We talked about this before {s0} and your previous offers were low compared to risk you want me to take.", "village_elder_ask_set_fire_5",
	[]],

	[anyone|plyr, "village_elder_ask_set_fire_1",
	[],
	"I have my reasons, and you will have yours -- a purse of silver. Will you do it, or not?", "village_elder_ask_set_fire_2",
	[]],

	[anyone|plyr, "village_elder_ask_set_fire_1",
	[],
	"Given the risk you are taking, you are entitled to know my plan.", "village_elder_ask_set_fire_explain_plan",
	[]],

	[anyone|plyr, "village_elder_ask_set_fire_explain_plan",
	[
		(party_get_slot, ":g_encountered_party_village_bound_center", "$g_encountered_party", slot_village_bound_center),
		(str_store_party_name, 4, ":g_encountered_party_village_bound_center")
	],
	"I wish to rescue a prisoner from {s4}. When you light the fire, the guards in {s4} will see the smoke, and some of them will rush outside to see what is going on. ", "village_elder_ask_set_fire_2",
	[]],

	[anyone, "village_elder_ask_set_fire_2",
	[
		(gt, "$g_talk_troop_effective_relation", 9)
	],
	"As you wish, {s0}. You have been a good friend to this village, and, even though there is a risk, we should be glad to return the favor. When do you want this fire to start?", "village_elder_ask_set_fire_9",
	[]],

	[anyone, "village_elder_ask_set_fire_2",
	[
		(lt, "$g_talk_troop_relation", 0)
	],
	"I'm sorry, {s0}. You will forgive me for saying this, but we don't exactly have good reason to trust you. This is too dangerous.", "close_window",
	[]],

	[anyone, "village_elder_ask_set_fire_2",
	[],
	"As you say, {s0}. But in doing this, we are taking a very great risk. What's in it for us?", "village_elder_ask_set_fire_3",
	[]],

	[anyone|plyr, "village_elder_ask_set_fire_3",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 100)
	],
	"I can give you 100 coins.", "village_elder_ask_set_fire_4",
	[
		(assign, "$g_last_money_offer_to_elder", 100)
	]],

	[anyone|plyr, "village_elder_ask_set_fire_3",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 200)
	],
	"I can give you 200 coins.", "village_elder_ask_set_fire_6",
	[
		(assign, "$g_last_money_offer_to_elder", 200)
	]],

	[anyone|plyr, "village_elder_ask_set_fire_3",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 300)
	],
	"I can give you 300 coins.", "village_elder_ask_set_fire_6",
	[
		(assign, "$g_last_money_offer_to_elder", 300)
	]],

	[anyone|plyr, "village_elder_ask_set_fire_3",
	[],
	"Never mind.", "close_window",
	[]],

	[anyone, "village_elder_ask_set_fire_4",
	[
		(eq, "$g_village_elder_did_not_liked_money_offered", 0)
	],
	"This is madness. I cannot take such a risk.", "village_elder_talk",
	[
		(assign, "$g_village_elder_did_not_liked_money_offered", 1)
	]],

	[anyone|plyr, "village_elder_ask_set_fire_5",
	[
		(eq, "$g_village_elder_did_not_liked_money_offered", 1),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 200)
	],
	"Then let's increase your reward to 200 coins.", "village_elder_ask_set_fire_7",
	[
		(assign, "$g_last_money_offer_to_elder", 200)
	]],

	[anyone|plyr, "village_elder_ask_set_fire_5",
	[
		(eq, "$g_village_elder_did_not_liked_money_offered", 1),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 300)
	],
	"Then let's increase your reward to 300 coins.", "village_elder_ask_set_fire_6",
	[
		(assign, "$g_last_money_offer_to_elder", 300)
	]],

	[anyone|plyr, "village_elder_ask_set_fire_5",
	[
		(eq, "$g_village_elder_did_not_liked_money_offered", 2),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 300)
	],
	"Then let's increase your reward to 300 coins. This is my last offer.", "village_elder_ask_set_fire_6",
	[
		(assign, "$g_last_money_offer_to_elder", 300)
	]],

	[anyone|plyr, "village_elder_ask_set_fire_5",
	[],
	"Never mind.", "close_window",
	[]],

	[anyone, "village_elder_ask_set_fire_6",
	[],
	"Very well. You are asking me to take a very great risk, but I will do it. When do you want this fire to start?", "village_elder_ask_set_fire_9",
	[
		(troop_remove_gold, "trp_player", "$g_last_money_offer_to_elder")
	]],

	[anyone, "village_elder_ask_set_fire_7",
	[],
	"I cannot do such a dangerous thing for 200 coins.", "village_elder_talk",
	[
		(assign, "$g_village_elder_did_not_liked_money_offered", 2)
	]],

	[anyone|plyr, "village_elder_ask_set_fire_9",
	[],
	"Continue with your preparations. One hour from now, I need that fire.", "village_elder_ask_set_fire_10",
	[
		(party_get_slot, ":current_town_village_bound_center", "$current_town", slot_village_bound_center),
		(store_current_hours, ":current_hours"),
		(val_add, ":current_hours", 1),
		(assign, ":value", ":current_hours"),
		(party_set_slot, ":current_town_village_bound_center", 260, ":value"),
		(try_begin),
			(is_between, "$next_center_will_be_fired", "p_village_1", "p_salt_mine"),
			(party_get_slot, ":next_center_will_be_fired_village_smoke_added", "$next_center_will_be_fired", slot_village_smoke_added),
			(eq, ":next_center_will_be_fired_village_smoke_added", 0),
			(party_get_slot, ":value", "$next_center_will_be_fired", 260),
			(store_current_hours, ":current_hours_2"),
			(store_sub, ":value_2", ":current_hours_2", 4),
			(val_sub, ":value_2", 1),
			(ge, ":value", ":value_2"),
			(party_clear_particle_systems, "$next_center_will_be_fired"),
		(try_end),
		(assign, "$next_center_will_be_fired", "$current_town"),
		(assign, "$g_village_elder_did_not_liked_money_offered", 0)
	]],

	[anyone|plyr, "village_elder_ask_set_fire_9",
	[
		(store_time_of_day, ":time_of_day"),
		(ge, ":time_of_day", 6),
		(lt, ":time_of_day", 23)
	],
	"Do this in at the stroke of midnight. I will wait exactly one hour.", "village_elder_ask_set_fire_11",
	[
		(party_get_slot, ":current_town_village_bound_center", "$current_town", slot_village_bound_center),
		(store_time_of_day, ":time_of_day"),
		(store_current_hours, ":current_hours"),
		(store_sub, ":value", 24, ":time_of_day"),
		(store_add, ":value_2", ":current_hours", ":value"),
		(party_set_slot, ":current_town_village_bound_center", 260, ":value_2"),
		(try_begin),
			(is_between, "$next_center_will_be_fired", "p_village_1", "p_salt_mine"),
			(party_get_slot, ":next_center_will_be_fired_village_smoke_added", "$next_center_will_be_fired", slot_village_smoke_added),
			(eq, ":next_center_will_be_fired_village_smoke_added", 0),
			(party_get_slot, ":value_2", "$next_center_will_be_fired", 260),
			(store_current_hours, ":current_hours_2"),
			(store_sub, ":value_3", ":current_hours_2", 4),
			(val_sub, ":value_3", 1),
			(ge, ":value_2", ":value_3"),
			(party_clear_particle_systems, "$next_center_will_be_fired"),
		(try_end),
		(assign, "$next_center_will_be_fired", "$current_town"),
		(assign, "$g_village_elder_did_not_liked_money_offered", 0)
	]],

	[anyone, "village_elder_ask_set_fire_10",
	[],
	"Very well, {my lord/my lady}. We will make our preparations. Now you make yours.", "close_window",
	[
		(assign, ":value", -1),
		(try_for_agents, ":var_2"),
			(agent_get_troop_id, ":troop_id_var_2", ":var_2"),
			(is_between, ":troop_id_var_2", "trp_village_1_elder", "trp_merchants_end"),
			(agent_get_position, 0, ":var_2"),
			(try_for_range, ":number", 0, 64),
				(entry_point_get_position, 1, ":number"),
				(get_distance_between_positions, ":distance_between_positions_0_1", 0, 1),
				(gt, ":distance_between_positions_0_1", ":value"),
				(assign, ":value", ":distance_between_positions_0_1"),
				(copy_position, 2, 1),
				(assign, ":var_6", ":var_2"),
			(try_end),
			(try_begin),
				(gt, ":value", -1),
				(agent_set_scripted_destination, ":var_6", 2),
			(try_end),
		(try_end)
	]],

	[anyone, "village_elder_ask_set_fire_11",
	[],
	"As you wish, {my lord/my lady}. May the heavens protect you.", "close_window",
	[]],

	[anyone|plyr, "village_elder_talk",
	[],
	"[Leave]", "close_window",
	[]],

	[anyone, "village_elder_buy_cattle",
	[
		(party_get_slot, reg5, "$g_encountered_party", slot_village_number_of_cattle),
		(gt, reg5, 0),
		(store_item_value, ":item_value_trade_cattle_meat", "itm_trade_cattle_meat"),
		(call_script, "script_game_get_item_buy_price_factor", "itm_trade_cattle_meat"),
		(val_mul, ":item_value_trade_cattle_meat", reg0),
		(val_div, ":item_value_trade_cattle_meat", 50),
		(assign, "$temp", ":item_value_trade_cattle_meat"),
		(assign, reg6, ":item_value_trade_cattle_meat")
	],
	"We have {reg5} heads of cattle, each for {reg6} coins. How many do you want to buy?", "village_elder_buy_cattle_2",
	[]],

	[anyone, "village_elder_buy_cattle",
	[],
	"I am afraid we have no cattle left in the village {Ser/my lady}.", "village_elder_buy_cattle_2",
	[]],

	[anyone|plyr, "village_elder_buy_cattle_2",
	[
		(party_get_slot, ":g_encountered_party_village_number_of_cattle", "$g_encountered_party", slot_village_number_of_cattle),
		(ge, ":g_encountered_party_village_number_of_cattle", 1),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", "$temp")
	],
	"One.", "village_elder_buy_cattle_complete",
	[
		(call_script, "script_buy_cattle_from_village", "$g_encountered_party", 1, "$temp")
	]],

	[anyone|plyr, "village_elder_buy_cattle_2",
	[
		(party_get_slot, ":g_encountered_party_village_number_of_cattle", "$g_encountered_party", slot_village_number_of_cattle),
		(ge, ":g_encountered_party_village_number_of_cattle", 2),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(store_mul, ":value", "$temp", 2),
		(ge, ":troop_gold_player", ":value")
	],
	"Two.", "village_elder_buy_cattle_complete",
	[
		(call_script, "script_buy_cattle_from_village", "$g_encountered_party", 2, "$temp")
	]],

	[anyone|plyr, "village_elder_buy_cattle_2",
	[
		(party_get_slot, ":g_encountered_party_village_number_of_cattle", "$g_encountered_party", slot_village_number_of_cattle),
		(ge, ":g_encountered_party_village_number_of_cattle", 3),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(store_mul, ":value", "$temp", 3),
		(ge, ":troop_gold_player", ":value")
	],
	"Three.", "village_elder_buy_cattle_complete",
	[
		(call_script, "script_buy_cattle_from_village", "$g_encountered_party", 3, "$temp")
	]],

	[anyone|plyr, "village_elder_buy_cattle_2",
	[
		(party_get_slot, ":g_encountered_party_village_number_of_cattle", "$g_encountered_party", slot_village_number_of_cattle),
		(ge, ":g_encountered_party_village_number_of_cattle", 4),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(store_mul, ":value", "$temp", 4),
		(ge, ":troop_gold_player", ":value")
	],
	"Four.", "village_elder_buy_cattle_complete",
	[
		(call_script, "script_buy_cattle_from_village", "$g_encountered_party", 4, "$temp")
	]],

	[anyone|plyr, "village_elder_buy_cattle_2",
	[
		(party_get_slot, ":g_encountered_party_village_number_of_cattle", "$g_encountered_party", slot_village_number_of_cattle),
		(ge, ":g_encountered_party_village_number_of_cattle", 5),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(store_mul, ":value", "$temp", 5),
		(ge, ":troop_gold_player", ":value")
	],
	"Five.", "village_elder_buy_cattle_complete",
	[
		(call_script, "script_buy_cattle_from_village", "$g_encountered_party", 5, "$temp")
	]],

	[anyone|plyr, "village_elder_buy_cattle_2",
	[],
	"Forget it.", "village_elder_pretalk",
	[]],

	[anyone, "village_elder_buy_cattle_complete",
	[],
	"I will tell the herders to round up the animals and bring them to you, {Ser/my lady}. I am sure you will be satisfied with your purchase.", "village_elder_pretalk",
	[]],

	[anyone, "village_elder_active_mission_1",
	[],
	"Yes , have you made any progress on it?", "village_elder_active_mission_2",
	[]],

	[anyone|plyr, "village_elder_active_mission_2",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_deliver_grain"),
		(quest_get_slot, ":deliver_grain_target_amount", "qst_deliver_grain", slot_quest_target_amount),
		(call_script, "script_get_troop_item_amount", "trp_player", "itm_trade_grain"),
		(assign, ":var_3", reg0),
		(ge, ":var_3", ":deliver_grain_target_amount"),
		(assign, reg5, ":deliver_grain_target_amount")
	],
	"Indeed. I brought you {reg5} packs of grain.", "village_elder_deliver_grain_thank",
	[]],

	[anyone, "village_elder_deliver_grain_thank",
	[
		(str_store_party_name, 13, "$current_town")
	],
	"My good {lord/lady}. You have saved us from hunger and desperation. We cannot thank you enough, but you'll always be in our prayers. The village of {s13} will not forget what you have done for us.", "village_elder_deliver_grain_thank_2",
	[
		(quest_get_slot, ":deliver_grain_target_amount", "qst_deliver_grain", slot_quest_target_amount),
		(troop_remove_items, "trp_player", "itm_trade_grain", ":deliver_grain_target_amount"),
		(add_xp_as_reward, 400),
		(call_script, "script_change_center_prosperity", "$current_town", 4),
		(call_script, "script_change_player_relation_with_center", "$current_town", 5),
		(call_script, "script_end_quest", "qst_deliver_grain"),
		(call_script, "script_add_log_entry", 4, "trp_player", "$current_town", -1, -1)
	]],

	[anyone, "village_elder_deliver_grain_thank_2",
	[],
	"My good {lord/lady}, please, is there anything I can do for you?", "village_elder_talk",
	[]],

	[anyone|plyr, "village_elder_active_mission_2",
	[
		(store_partner_quest, ":partner_quest"),
		(eq, ":partner_quest", "qst_deliver_lumber"),
		(quest_get_slot, ":deliver_lumber_target_amount", "qst_deliver_lumber", slot_quest_target_amount),
		(call_script, "script_get_troop_item_amount", "trp_player", "itm_lumber"),
		(assign, ":var_3", reg0),
		(ge, ":var_3", ":deliver_lumber_target_amount"),
		(assign, reg5, ":deliver_lumber_target_amount")
	],
	"Indeed. I brought you {reg5} bales of lumber.", "village_elder_deliver_lumber_thank",
	[]],

	[anyone, "village_elder_deliver_lumber_thank",
	[
		(str_store_party_name, 13, "$current_town")
	],
	"My good {lord/lady}. You have returned in the nick of time. We will start construction right away. If it's alright with you, we shall name a barn after you!", "village_elder_deliver_lumber_thank_2",
	[
		(quest_get_slot, ":deliver_lumber_target_amount", "qst_deliver_lumber", slot_quest_target_amount),
		(troop_remove_items, "trp_player", "itm_lumber", ":deliver_lumber_target_amount"),
		(add_xp_as_reward, 400),
		(call_script, "script_change_center_prosperity", "$current_town", 4),
		(call_script, "script_change_player_relation_with_center", "$current_town", 5),
		(call_script, "script_end_quest", "qst_deliver_lumber"),
		(call_script, "script_add_log_entry", 4, "trp_player", "$current_town", -1, -1)
	]],

	[anyone, "village_elder_deliver_lumber_thank_2",
	[],
	"My good {lord/lady}, please, is there anything I can do for you?", "village_elder_talk",
	[]],

	[anyone|plyr, "village_elder_active_mission_2",
	[],
	"I am still working on it.", "village_elder_active_mission_3",
	[]],

	[anyone|plyr, "village_elder_active_mission_2",
	[],
	"I am afraid I won't be able to finish it.", "village_elder_mission_failed",
	[]],

	[anyone, "village_elder_active_mission_3",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Thank you, {s0}. We are praying for your success everyday.", "village_elder_pretalk",
	[]],

	[anyone, "village_elder_mission_failed",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Ah, I am sorry to hear that {s0}. I'll try to think of something else.", "village_elder_pretalk",
	[
		(store_partner_quest, ":partner_quest"),
		(call_script, "script_abort_quest", ":partner_quest", 1)
	]],

	[anyone, "village_elder_request_mission_ask",
	[
		(store_partner_quest, ":partner_quest"),
		(ge, ":partner_quest", 0),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Well {s0} you are already engaged with a task helping us. We cannot ask more from you.", "village_elder_pretalk",
	[]],

	[anyone, "village_elder_request_mission_ask",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_does_not_give_quest, 1),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"No {s0}, We don't have any other tasks for you.", "village_elder_pretalk",
	[]],

	[anyone|auto_proceed, "village_elder_request_mission_ask",
	[],
	"A task?", "village_elder_tell_mission",
	[
		(call_script, "script_get_quest", "$g_talk_troop"),
		(assign, "$random_quest_no", reg0)
	]],

	[anyone, "village_elder_tell_mission",
	[
		(eq, "$random_quest_no", "qst_deliver_grain")
	],
	"{My good sir/My good lady}, our village has been going through such hardships lately. The harvest has been bad, and recently some merciless bandits took away our seed grain that we had reserved for the planting season. If we cannot find some grain soon, we will not be able to plant our fields and then we will have nothing to eat for the coming year. If you can help us, we would be indebted to you forever.", "village_elder_tell_deliver_grain_mission",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(str_store_party_name_link, 3, ":random_quest_no_target_center"),
		(quest_get_slot, reg5, "$random_quest_no", slot_quest_target_amount),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@The elder of the village of {s3} asked you to bring them {reg5} packs of grain.")
	]],

	[anyone|plyr, "village_elder_tell_deliver_grain_mission",
	[],
	"Hmmm. How much grain do you need?", "village_elder_tell_deliver_grain_mission_2",
	[]],

	[anyone|plyr, "village_elder_tell_deliver_grain_mission",
	[],
	"I can't be bothered with this. Ask help from someone else.", "village_elder_deliver_grain_mission_reject",
	[]],

	[anyone, "village_elder_tell_deliver_grain_mission_2",
	[
		(quest_get_slot, reg5, "$random_quest_no", slot_quest_target_amount)
	],
	"I think {reg5} packs of grain will let us start the planting. Hopefully, we can find charitable people to help us with the rest.", "village_elder_tell_deliver_grain_mission_3",
	[]],

	[anyone|plyr, "village_elder_tell_deliver_grain_mission_3",
	[],
	"Then I will go and find you the grain you need.", "village_elder_deliver_grain_mission_accept",
	[]],

	[anyone|plyr, "village_elder_tell_deliver_grain_mission_3",
	[],
	"I am afraid I don't have time for this. You'll need to find help elsewhere.", "village_elder_deliver_grain_mission_reject",
	[]],

	[anyone, "village_elder_deliver_grain_mission_accept",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Thank you, {s0}. We'll be praying for you night and day.", "close_window",
	[
		(assign, "$g_leave_encounter", 1),
		(call_script, "script_change_player_relation_with_center", "$current_town", 5),
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop")
	]],

	[anyone, "village_elder_deliver_grain_mission_reject",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Yes {s0}, of course. I am sorry if I have bothered you with our troubles.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "village_elder_tell_mission",
	[
		(eq, "$random_quest_no", "qst_hunt_down_smugglers")
	],
	"There is something you may be able to help us with, {playername}. To add to all our other troubles, recently the village has become home to a nest of smugglers, who are normally based out of {s3}. They drink and carouse, not to mention being engaged in the nefarious practice of smuggling. I am afraid a passing lord will happen upon them, and exact terrible retribution on our poor village. Can you help us with this problem?", "elder_hunt_smugglers",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(str_store_party_name_link, 3, ":random_quest_no_target_center")
	]],

	[anyone|plyr, "elder_hunt_smugglers",
	[],
	"I will deal with them. Where are they?", "elder_hunt_smugglers_accepted",
	[]],

	[anyone|plyr, "elder_hunt_smugglers",
	[],
	"I fear I cannot accept such a mission at the moment.", "elder_hunt_smugglers_rejected",
	[]],

	[anyone, "elder_hunt_smugglers_accepted",
	[
		(eq, "$random_quest_no", "qst_hunt_down_smugglers")
	],
	"Oh, that is good news, {playername}.  I'll send a boy to tell them that a raiding party has been seen on the horizon, and it appears to be making for {s4}. That should flush them out, and no doubt they will head directly for {s3}. It will then be up to you to hunt them down. Good luck.", "close_window",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(quest_get_slot, ":random_quest_no_object_center", "$random_quest_no", slot_quest_object_center),
		(str_store_troop_name_link, 9, "$g_talk_troop"),
		(str_store_party_name_link, 3, ":random_quest_no_target_center"),
		(str_store_party_name_link, 4, ":random_quest_no_object_center"),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@The Village Elder of {s4} asked you to hunt down the smugglers fleeing his village. He said that all three groups are heading towards {s3}."),
		(quest_get_slot, ":random_quest_no_giver_center", "$random_quest_no", slot_quest_giver_center),
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(quest_get_slot, ":random_quest_no_target_party_template", "$random_quest_no", slot_quest_target_party_template),
		(set_spawn_radius, 3),
		(spawn_around_party, ":random_quest_no_giver_center", ":random_quest_no_target_party_template"),
		(assign, "$qst_hunt_down_smugglers_party_1", reg0),
		(party_set_ai_behavior, "$qst_hunt_down_smugglers_party_1", 1),
		(party_set_ai_object, "$qst_hunt_down_smugglers_party_1", ":random_quest_no_target_center"),
		(party_set_flags, "$qst_hunt_down_smugglers_party_1", 65536, 0),
		(spawn_around_party, ":random_quest_no_giver_center", ":random_quest_no_target_party_template"),
		(assign, "$qst_hunt_down_smugglers_party_2", reg0),
		(party_set_ai_behavior, "$qst_hunt_down_smugglers_party_2", 1),
		(party_set_ai_object, "$qst_hunt_down_smugglers_party_2", ":random_quest_no_target_center"),
		(party_set_flags, "$qst_hunt_down_smugglers_party_2", 65536, 0),
		(spawn_around_party, ":random_quest_no_giver_center", ":random_quest_no_target_party_template"),
		(assign, "$qst_hunt_down_smugglers_party_3", reg0),
		(party_set_ai_behavior, "$qst_hunt_down_smugglers_party_3", 1),
		(party_set_ai_object, "$qst_hunt_down_smugglers_party_3", ":random_quest_no_target_center"),
		(party_set_flags, "$qst_hunt_down_smugglers_party_3", 65536, 0),
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "elder_hunt_smugglers_rejected",
	[],
	"It looks like we must labour under this curse for a while longer then. Good day, {playername}.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "village_elder_tell_mission",
	[
		(eq, "$random_quest_no", "qst_escort_scholars")
	],
	"My {lord/lady}! You must help! They're eating all our food! Wait, arh, let me explain. Several days ago, a party of noblemen arrived in the village. They were on their way to {s8}, when they were attacked by bandits. Their escort fled, and the noblemen themselves barely made it here.", "elder_quest_scholar",
	[
		(quest_get_slot, ":escort_scholars_target_center", "qst_escort_scholars", slot_quest_target_center),
		(str_store_party_name, 8, ":escort_scholars_target_center")
	]],

	[anyone, "elder_quest_scholar",
	[
		(eq, "$random_quest_no", "qst_escort_scholars")
	],
	"And now we can't get rid of them! They refuse to leave without an escort and they're chubby fellows, my {lord/lady}. They eat, and eat, and eat. If we don't get rid of them soon, we'll all be in grave danger come winter. If you can take them to {s8}, we will be eternally grateful. But please, don't lose them along the way, for sure as a pig is a pig, they'll be back here like a shot.", "escort_scholars_quest_brief",
	[
		(quest_get_slot, reg8, "qst_escort_scholars", slot_quest_gold_reward),
		(quest_get_slot, reg4, "qst_escort_scholars", slot_quest_target_amount),
		(quest_get_slot, ":escort_scholars_target_center", "qst_escort_scholars", slot_quest_target_center),
		(str_store_party_name, 8, ":escort_scholars_target_center")
	]],

	[anyone|plyr, "escort_scholars_quest_brief",
	[],
	"I will escort the nobles.", "scholar_quest_taken",
	[
		(quest_get_slot, ":escort_scholars_target_center", "qst_escort_scholars", slot_quest_target_center),
		(set_spawn_radius, 1),
		(spawn_around_party, "$g_encountered_party", "pt_scholars"),
		(assign, ":var_2", reg0),
		(party_set_ai_behavior, ":var_2", 4),
		(party_set_ai_object, ":var_2", "p_main_party"),
		(party_set_flags, ":var_2", 65536, 0),
		(quest_set_slot, "qst_escort_scholars", slot_quest_target_party, ":var_2"),
		(quest_set_slot, "qst_escort_scholars", slot_quest_current_state, 0),
		(str_store_party_name_link, 8, ":escort_scholars_target_center"),
		(setup_quest_text, "qst_escort_scholars"),
		(str_store_string, 2, "@Escort the nobles to the town of {s8}."),
		(call_script, "script_start_quest", "qst_escort_scholars", "$g_talk_troop")
	]],

	[anyone|plyr, "escort_scholars_quest_brief",
	[],
	"Sorry. I can't do that right now", "escort_scholars_reject",
	[]],

	[anyone, "scholar_quest_taken",
	[],
	"Thank you, my friend. We'll wish you the speed of a fox.", "close_window",
	[
		(assign, "$g_leave_encounter", 1),
		(call_script, "script_change_player_relation_with_center", "$current_town", 3)
	]],

	[anyone, "escort_scholars_reject",
	[],
	"Yes, yes, of course. I am sorry if I have bothered you with our troubles.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[party_tpl|pt_scholars, "start",
	[
		(quest_get_slot, ":escort_scholars_target_party", "qst_escort_scholars", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_scholars_target_party"),
		(quest_slot_eq, "qst_escort_scholars", slot_quest_current_state, 2)
	],
	"We can cover the rest of the way ourselves. Our thanks.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_scholars, "start",
	[
		(quest_get_slot, ":escort_scholars_target_party", "qst_escort_scholars", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_scholars_target_party"),
		(quest_get_slot, ":escort_scholars_target_center", "qst_escort_scholars", slot_quest_target_center),
		(store_distance_to_party_from_party, ":distance_to_party_from_party_escort_scholars_target_center_escort_scholars_target_party", ":escort_scholars_target_center", ":escort_scholars_target_party"),
		(lt, ":distance_to_party_from_party_escort_scholars_target_center_escort_scholars_target_party", 4),
		(quest_slot_eq, "qst_escort_scholars", slot_quest_current_state, 1),
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(ge, ":free_inventory_capacity", 1)
	],
	"Well, we have almost reached {s21}. We can cover the rest of the way ourselves. Here's your pay... {reg14} coins. Thanks for escorting us. Oh, and we realise you have had to put up with a lot on this journey, which was one such as should be commemorated in verse! Please accept this book - careful, careful, it belonged to a famous maester, as an extra reward. Now, I believe the inn is open. Farewell and may the Father Above bless you!.", "close_window",
	[
		(quest_get_slot, ":escort_scholars_target_party", "qst_escort_scholars", slot_quest_target_party),
		(quest_get_slot, ":escort_scholars_target_center", "qst_escort_scholars", slot_quest_target_center),
		(quest_get_slot, ":escort_scholars_giver_center", "qst_escort_scholars", slot_quest_giver_center),
		(quest_get_slot, ":escort_scholars_gold_reward", "qst_escort_scholars", slot_quest_gold_reward),
		(party_set_ai_behavior, ":escort_scholars_target_party", 1),
		(party_set_ai_object, ":escort_scholars_target_party", ":escort_scholars_target_center"),
		(party_set_flags, ":escort_scholars_target_party", 65536, 0),
		(str_store_party_name, 21, ":escort_scholars_target_center"),
		(call_script, "script_change_player_relation_with_center", ":escort_scholars_giver_center", 8),
		(call_script, "script_end_quest", "qst_escort_scholars"),
		(quest_set_slot, "qst_escort_scholars", slot_quest_current_state, 2),
		(call_script, "script_troop_add_gold", "trp_player", ":escort_scholars_gold_reward"),
		(assign, ":var_5", ":escort_scholars_gold_reward"),
		(val_mul, ":var_5", 5),
		(val_add, ":var_5", 100),
		(add_xp_as_reward, ":var_5"),
		(call_script, "script_change_troop_renown", "trp_player", 2),
		(assign, reg14, ":escort_scholars_gold_reward"),
		(store_random_in_range, ":random_in_range_book_tactics_trade_spice", "itm_book_tactics", "itm_trade_spice"),
		(troop_add_item, "trp_player", ":random_in_range_book_tactics_trade_spice", 0),
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_scholars, "start",
	[
		(quest_get_slot, ":escort_scholars_target_party", "qst_escort_scholars", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_scholars_target_party"),
		(quest_get_slot, ":escort_scholars_target_center", "qst_escort_scholars", slot_quest_target_center),
		(store_distance_to_party_from_party, ":distance_to_party_from_party_escort_scholars_target_center_escort_scholars_target_party", ":escort_scholars_target_center", ":escort_scholars_target_party"),
		(lt, ":distance_to_party_from_party_escort_scholars_target_center_escort_scholars_target_party", 4),
		(quest_slot_eq, "qst_escort_scholars", slot_quest_current_state, 1),
		(store_free_inventory_capacity, ":free_inventory_capacity"),
		(eq, ":free_inventory_capacity", 0)
	],
	"Well, we have almost reached {s21}. We can cover the rest of the way ourselves. Here's your pay... {reg14} coins. We also had a present for you, a token of our esteem, but you seem unable to carry any more. Never mind that then! Thanks for escorting us. Good luck and may the Warrior give your arm strength!", "close_window",
	[
		(quest_get_slot, ":escort_scholars_target_party", "qst_escort_scholars", slot_quest_target_party),
		(quest_get_slot, ":escort_scholars_target_center", "qst_escort_scholars", slot_quest_target_center),
		(quest_get_slot, ":escort_scholars_giver_center", "qst_escort_scholars", slot_quest_giver_center),
		(quest_get_slot, ":escort_scholars_gold_reward", "qst_escort_scholars", slot_quest_gold_reward),
		(party_set_ai_behavior, ":escort_scholars_target_party", 1),
		(party_set_ai_object, ":escort_scholars_target_party", ":escort_scholars_target_center"),
		(party_set_flags, ":escort_scholars_target_party", 65536, 0),
		(str_store_party_name, 21, ":escort_scholars_target_center"),
		(call_script, "script_change_player_relation_with_center", ":escort_scholars_giver_center", 8),
		(call_script, "script_end_quest", "qst_escort_scholars"),
		(quest_set_slot, "qst_escort_scholars", slot_quest_current_state, 2),
		(call_script, "script_troop_add_gold", "trp_player", ":escort_scholars_gold_reward"),
		(assign, ":var_5", ":escort_scholars_gold_reward"),
		(val_mul, ":var_5", 5),
		(val_add, ":var_5", 100),
		(add_xp_as_reward, ":var_5"),
		(call_script, "script_change_troop_renown", "trp_player", 2),
		(assign, reg14, ":escort_scholars_gold_reward"),
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_scholars, "start",
	[
		(quest_get_slot, ":escort_scholars_target_party", "qst_escort_scholars", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_scholars_target_party"),
		(quest_slot_eq, "qst_escort_scholars", slot_quest_current_state, 0)
	],
	"Greetings. You must be our escort, right?", "scholars_intro_1",
	[
		(quest_set_slot, "qst_escort_scholars", slot_quest_current_state, 1)
	]],

	[anyone|plyr, "scholars_intro_1",
	[],
	"Yes. My name is {playername}. I will lead you to {s1}.", "scholars_intro_2",
	[
		(quest_get_slot, ":escort_scholars_target_center", "qst_escort_scholars", slot_quest_target_center),
		(str_store_party_name, 1, ":escort_scholars_target_center")
	]],

	[anyone, "scholars_intro_2",
	[],
	"Well, It is good to know we won't travel alone. What do you want us to do now?", "escort_scholars_talk",
	[]],

	[anyone|plyr, "escort_scholars_talk",
	[],
	"You follow my lead. I'll take you through a safe route.", "scholars_follow_lead",
	[]],

	[anyone, "scholars_follow_lead",
	[],
	"Alright. We'll be right behind you.", "close_window",
	[
		(assign, "$escort_scholars_mode", 0),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "escort_scholars_talk",
	[],
	"You stay here for a while. I'll go ahead and check the road.", "scholars_stay_here",
	[]],

	[anyone, "scholars_stay_here",
	[],
	"Alright. We'll be waiting here for you.", "close_window",
	[
		(assign, "$escort_scholars_mode", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_scholars, "start",
	[
		(quest_get_slot, ":escort_scholars_target_party", "qst_escort_scholars", slot_quest_target_party),
		(eq, "$g_encountered_party", ":escort_scholars_target_party")
	],
	"Young {man/lady}! I really do think we should, ah, get a move on. We really can't tarry in this area. We must reach a sept soon, or we shall, erm, expire. Although I don't expect one such as yourself to understand... eh?", "escort_scholars_talk2",
	[]],

	[anyone|plyr, "escort_scholars_talk2",
	[],
	"You follow my lead. I'll take you through a safe route.", "scholars_follow_lead2",
	[]],

	[anyone, "scholars_follow_lead2",
	[],
	"Alright. We'll be right behind you.", "close_window",
	[
		(assign, "$escort_scholars_mode", 0),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "escort_scholars_talk2",
	[],
	"You stay here for a while. I'll go ahead and check the road.", "scholars_stay_here2",
	[]],

	[anyone, "scholars_stay_here2",
	[],
	"Alright. We'll be waiting here for you.", "close_window",
	[
		(assign, "$escort_scholars_mode", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "escort_scholars_talk2",
	[],
	"Give me your valuables!", "scholars_defiant",
	[]],

	[anyone, "scholars_defiant",
	[],
	"This is an outrage! Don't think you can threaten us, you heathen oaf. Now hurry on and make sure the way is safe.", "escort_scholars_talk3",
	[]],

	[anyone|plyr, "escort_scholars_talk3",
	[],
	"You follow my lead. I'll take you through a safe route.", "scholars_follow_lead3",
	[]],

	[anyone, "scholars_follow_lead3",
	[],
	"Alright. We'll be right behind you.", "close_window",
	[
		(assign, "$escort_scholars_mode", 0),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "escort_scholars_talk3",
	[],
	"You stay here for a while. I'll go ahead and check the road.", "scholars_stay_here3",
	[]],

	[anyone, "scholars_stay_here3",
	[],
	"Alright. We'll be waiting here for you.", "close_window",
	[
		(assign, "$escort_scholars_mode", 1),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "escort_scholars_talk3",
	[],
	"I've had it with your incessant whining. Let's see if the pen is mightier than the sword!", "scholars_follow_lead4",
	[]],

	[anyone, "scholars_follow_lead4",
	[
		(assign, "$encountered_party_hostile", 1),
		(assign, "$encountered_party_friendly", 0)
	],
	"To arms, brothers!", "close_window",
	[
		(encounter_attack)
	]],

	[anyone, "village_elder_tell_mission",
	[
		(eq, "$random_quest_no", "qst_kidnapped_wife")
	],
	"Actually, I was looking for a reliable {man/helper} that can undertake an important mission. The wife of one of our farmers was taken by bandits a couple of days ago. The man is distraught. We canot pay you, my {lord/lady}, but you would always be welcome in our village if you could bring her back.", "kidnapped_wife_brief",
	[]],

	[anyone, "kidnapped_wife_brief",
	[
		(eq, "$random_quest_no", "qst_kidnapped_wife")
	],
	"The amount the bandits ask as ransom is {reg12} coins.  You have 15 days to take the money to the bandits who will be waiting near the village of {s4}. Those bastards said that they are going to rape the woman if they don't get the money by that time.", "kidnapped_wife_quest_brief",
	[
		(quest_get_slot, ":kidnapped_wife_target_center", "qst_kidnapped_wife", slot_quest_target_center),
		(str_store_party_name, 4, ":kidnapped_wife_target_center"),
		(quest_get_slot, reg12, "qst_kidnapped_wife", slot_quest_target_amount)
	]],

	[anyone|plyr, "kidnapped_wife_quest_brief",
	[],
	"Alright. I will take the ransom money to the bandits and bring back the wife.", "kidnapped_wife_quest_taken",
	[
		(set_spawn_radius, 4),
		(quest_get_slot, ":kidnapped_wife_target_center", "qst_kidnapped_wife", slot_quest_target_center),
		(quest_get_slot, ":kidnapped_wife_target_amount", "qst_kidnapped_wife", slot_quest_target_amount),
		(spawn_around_party, ":kidnapped_wife_target_center", "pt_bandits_awaiting_ransom2"),
		(assign, ":var_3", reg0),
		(quest_set_slot, "qst_kidnapped_wife", slot_quest_target_party, ":var_3"),
		(party_set_ai_behavior, ":var_3", 0),
		(party_set_ai_object, ":var_3", "p_main_party"),
		(party_set_flags, ":var_3", 65536, 0),
		(assign, reg12, ":kidnapped_wife_target_amount"),
		(str_store_troop_name, 1, "$g_talk_troop"),
		(str_store_party_name_link, 4, "$g_encountered_party"),
		(str_store_party_name_link, 3, ":kidnapped_wife_target_center"),
		(setup_quest_text, "qst_kidnapped_wife"),
		(str_store_string, 2, "@The Village Elder of {s4} asked you to pay the ransom of a villager kidnapped by bandits. You are to meet the bandits near {s3} and pay them the ransom fee. After that you are to bring the woman back to {s4}."),
		(call_script, "script_start_quest", "qst_kidnapped_wife", "$g_talk_troop")
	]],

	[anyone, "kidnapped_wife_quest_taken",
	[],
	"Good. I knew we could trust you at this. And please, don't attempt to do anything rash. Keep in mind that the womans virtue is more important than anything else...", "close_window",
	[]],

	[anyone|plyr, "kidnapped_wife_quest_brief",
	[],
	"Sorry. I don't have time for this right now.", "kidnapped_wife_reject",
	[]],

	[anyone, "kidnapped_wife_reject",
	[],
	"Yes, yes, of course. I am sorry if I have bothered you with our troubles.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[trp_kidnapped_wife, "start",
	[
		(eq, "$talk_context", 10)
	],
	"Thank you so much for bringing me back!  I can't wait to see my family, my sisters and mother, even my husband!", "close_window",
	[
		(remove_member_from_party, "trp_kidnapped_wife"),
		(quest_set_slot, "qst_kidnapped_wife", slot_quest_current_state, 4)
	]],

	[plyr|trp_kidnapped_wife, "kidnapped_wife_liberated_map",
	[],
	"Yes. Come with me. We are going home.", "kidnapped_wife_liberated_map_2a",
	[]],

	[trp_kidnapped_wife, "kidnapped_wife_liberated_map_2a",
	[
		(neg|party_can_join)
	],
	"Unfortunately, you do not have room in your party for me.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[trp_kidnapped_wife, "kidnapped_wife_liberated_map_2a",
	[],
	"Oh really? Thank you so much!", "close_window",
	[
		(party_join),
		(quest_set_slot, "qst_kidnapped_wife", slot_quest_current_state, 3),
		(assign, "$g_leave_encounter", 1)
	]],

	[plyr|trp_kidnapped_wife, "kidnapped_wife_liberated_map",
	[],
	"Wait here a while longer. I'll come back for you.", "kidnapped_wife_liberated_map_2b",
	[]],

	[trp_kidnapped_wife, "kidnapped_wife_liberated_map_2b",
	[],
	"Oh, please {my lord/my lady}, do not leave me here all alone!", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[trp_kidnapped_wife, "start",
	[],
	"Oh {my lord/my lady}. Thank you so much for rescuing me. Will you take me to my family now?", "kidnapped_wife_liberated_map",
	[]],

	[plyr|trp_kidnapped_wife, "kidnapped_wife_liberated_battle",
	[],
	"Yes. Come with me. We are going home.", "kidnapped_wife_liberated_battle_2a",
	[]],

	[trp_kidnapped_wife, "kidnapped_wife_liberated_battle_2a",
	[
		(neg|hero_can_join, "p_main_party")
	],
	"Unfortunately, you do not have room in your party for me.", "kidnapped_wife_liberated_battle_2b",
	[]],

	[trp_kidnapped_wife, "kidnapped_wife_liberated_battle_2a",
	[],
	"Oh really? Thank you so much!", "close_window",
	[
		(party_add_members, "p_main_party", "trp_kidnapped_wife", 1),
		(quest_set_slot, "qst_kidnapped_wife", slot_quest_current_state, 3)
	]],

	[plyr|trp_kidnapped_wife, "kidnapped_wife_liberated_battle",
	[],
	"Wait here a while longer. I'll come back for you.", "kidnapped_wife_liberated_battle_2b",
	[]],

	[trp_kidnapped_wife, "kidnapped_wife_liberated_battle_2b",
	[],
	"Oh, please {my lord/my lady}, do not leave me here all alone!", "close_window",
	[
		(add_companion_party, "trp_kidnapped_wife"),
		(assign, "$g_leave_encounter", 1)
	]],

	[trp_kidnapped_wife, "start",
	[],
	"Can I come with you now?", "kidnapped_wife_liberated_map",
	[]],

	[anyone, "village_elder_tell_mission",
	[
		(eq, "$random_quest_no", "qst_hunt_down_girl")
	],
	"I have a delicate matter and I'm in need of help, there's a young maiden called {s4} who has run off with a lad from a neighbouring village. Run off! Can you believe it? We're living in changing times. When I were a boy, something like this would be unthinkable. Anyway, her father is on my back, night and day, saying that as Elder, I should get her back. That puts me in an uncomfortable position, so I'm thinking you might head over to {s3} and convince the girl to come back. What do you say?", "village_elder_mission_hunt_down_girl_told",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(quest_get_slot, ":random_quest_no_target_dna", "$random_quest_no", slot_quest_target_dna),
		(str_store_party_name_link, 9, "$current_town"),
		(str_store_party_name_link, 3, ":random_quest_no_target_center"),
		(call_script, "script_get_girl_name_from_dna_to_s50", ":random_quest_no_target_dna"),
		(str_store_string, 4, 50),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@The Village Elder of {s9} asked you to find a girl named {s4}. She is currently believed to be at {s3}.")
	]],

	[anyone|plyr, "village_elder_mission_hunt_down_girl_told",
	[],
	"I will go there and find the girl.", "village_elder_mission_hunt_down_girl_accepted",
	[]],

	[anyone|plyr, "village_elder_mission_hunt_down_girl_told",
	[],
	"I am too busy to go after her at the moment.", "village_elder_mission_hunt_down_girl_rejected",
	[]],

	[anyone, "village_elder_mission_hunt_down_girl_accepted",
	[],
	"That's excellent, {playername}. I will be grateful to you and so will the family of the girl. Tsk, the youth of today. Well, good luck finding her. Oh, one more thing - you'd better make haste. In my experience, these things are usually settled within a couple of days.", "close_window",
	[
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop"),
		(call_script, "script_update_villages_infested_by_wedding"),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "village_elder_mission_hunt_down_girl_rejected",
	[],
	"As you wish, {playername}. I suppose I'll have to go there myself, and deal with their elder... He's a miserable old so-and-so.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "village_elder_tell_mission",
	[
		(eq, "$random_quest_no", "qst_deliver_lumber")
	],
	"{My good lord/My good lady}, our village has been going through such hardships lately. We recently suffered a bandit attack - alas, it is all too common these days. The wretches, not content with ransacking the village, also burned down several buildings. As it stands, we have nowhere to store the harvest. We could use some lumber to help rebuild our village. If you can help us, we would be indebted to you forever.", "village_elder_tell_deliver_lumber_mission",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(str_store_party_name_link, 3, ":random_quest_no_target_center"),
		(quest_get_slot, reg5, "$random_quest_no", slot_quest_target_amount),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@The elder of the village of {s3} asked you to bring them {reg5} bales of lumber.")
	]],

	[anyone|plyr, "village_elder_tell_deliver_lumber_mission",
	[],
	"Hmmm. How much lumber do you need?", "village_elder_tell_deliver_lumber_mission_2",
	[]],

	[anyone|plyr, "village_elder_tell_deliver_lumber_mission",
	[],
	"I can't be bothered with this. Gather your own wood, peasant.", "village_elder_deliver_lumber_mission_reject",
	[]],

	[anyone, "village_elder_tell_deliver_lumber_mission_2",
	[
		(quest_get_slot, reg5, "$random_quest_no", slot_quest_target_amount)
	],
	"I think {reg5} bales of lumber will let us start building. We have plenty of keen villagers to help us with that.", "village_elder_tell_deliver_lumber_mission_3",
	[]],

	[anyone|plyr, "village_elder_tell_deliver_lumber_mission_3",
	[],
	"Then I will go and find you the lumber you need.", "village_elder_deliver_lumber_mission_accept",
	[]],

	[anyone|plyr, "village_elder_tell_deliver_lumber_mission_3",
	[],
	"I am afraid I don't have time for this. You'll need to find help elsewhere.", "village_elder_deliver_lumber_mission_reject",
	[]],

	[anyone, "village_elder_deliver_lumber_mission_accept",
	[],
	"Thank you, {my lord/my lady}. We'll be praying for you night and day!", "close_window",
	[
		(assign, "$g_leave_encounter", 1),
		(call_script, "script_change_player_relation_with_center", "$current_town", 1),
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop")
	]],

	[anyone, "village_elder_deliver_lumber_mission_reject",
	[],
	"Yes, yes, of course. I am sorry if I have bothered you with our troubles.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "village_elder_tell_mission",
	[
		(eq, "$random_quest_no", "qst_train_peasants_against_bandits")
	],
	"We are suffering greatly at the hands of a group of bandits. They take our food and livestock, and kill anyone who doesn't obey them immediately. Our men are angry that we cannot defend ourselves, but we are only simple farmers... However, with some help, I think that some of the people here could be more than that. We just need an experienced warrior to teach us how to fight.", "village_elder_tell_train_peasants_against_bandits_mission",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(str_store_party_name_link, 13, ":random_quest_no_target_center"),
		(quest_get_slot, reg5, "$random_quest_no", slot_quest_target_amount),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@The elder of the village of {s13} asked you to train {reg5} peasants to fight against local bandits.")
	]],

	[anyone|plyr, "village_elder_tell_train_peasants_against_bandits_mission",
	[],
	"I can teach you how to defend yourself.", "village_elder_train_peasants_against_bandits_mission_accept",
	[]],

	[anyone|plyr, "village_elder_tell_train_peasants_against_bandits_mission",
	[],
	"You peasants have no business taking up arms. Just pay the bandits and be off with it.", "village_elder_train_peasants_against_bandits_mission_reject",
	[]],

	[anyone, "village_elder_train_peasants_against_bandits_mission_accept",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"You will? Oh, splendid! We would be deeply indebted to you, {s0}. I'll instruct the village folk to assemble here and receive your training. If you can teach us how to defend ourselves, I promise you'll receive everything we can give you in return for your efforts.", "close_window",
	[
		(assign, "$g_leave_encounter", 1),
		(call_script, "script_change_player_relation_with_center", "$current_town", 3),
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop")
	]],

	[anyone, "village_elder_train_peasants_against_bandits_mission_reject",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Yes, of course {s0}.  Thank you for your counsel.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "village_elder_tell_mission",
	[
		(eq, "$random_quest_no", "qst_deliver_cattle")
	],
	"Bandits have driven away our cattle. Our pastures are empty. If we had just a few heads of cattle we could start to raise a herd again.", "village_elder_tell_deliver_cattle_mission",
	[
		(quest_get_slot, ":random_quest_no_target_center", "$random_quest_no", slot_quest_target_center),
		(str_store_party_name_link, 3, ":random_quest_no_target_center"),
		(quest_get_slot, reg5, "$random_quest_no", slot_quest_target_amount),
		(setup_quest_text, "$random_quest_no"),
		(str_store_string, 2, "@The elder of the village of {s3} asked you to bring them {reg5} heads of cattle.")
	]],

	[anyone|plyr, "village_elder_tell_deliver_cattle_mission",
	[],
	"How many animals do you need?", "village_elder_tell_deliver_cattle_mission_2",
	[]],

	[anyone|plyr, "village_elder_tell_deliver_cattle_mission",
	[],
	"I don't have time for this. Ask help from someone else.", "village_elder_deliver_cattle_mission_reject",
	[]],

	[anyone, "village_elder_tell_deliver_cattle_mission_2",
	[
		(quest_get_slot, reg5, "$random_quest_no", slot_quest_target_amount)
	],
	"I think {reg5} heads will suffice for a small herd.", "village_elder_tell_deliver_cattle_mission_3",
	[]],

	[anyone|plyr, "village_elder_tell_deliver_cattle_mission_3",
	[],
	"Then I will bring you the cattle you need.", "village_elder_deliver_cattle_mission_accept",
	[]],

	[anyone|plyr, "village_elder_tell_deliver_cattle_mission_3",
	[],
	"I am afraid I don't have time for this. You'll need to find help elsewhere.", "village_elder_deliver_cattle_mission_reject",
	[]],

	[anyone, "village_elder_deliver_cattle_mission_accept",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Thank you, {s0}. We'll be praying for you night and day.", "close_window",
	[
		(assign, "$g_leave_encounter", 1),
		(call_script, "script_change_player_relation_with_center", "$current_town", 3),
		(call_script, "script_start_quest", "$random_quest_no", "$g_talk_troop")
	]],

	[anyone, "village_elder_deliver_cattle_mission_reject",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Yes {s0}, of course. I am sorry if I have bothered you with our troubles.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", slot_troop_does_not_give_quest, 1)
	]],

	[anyone, "village_elder_tell_mission",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Thank you, {s0}, but we do not really need anything right now.", "village_elder_pretalk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_town_1_merchant", "trp_town_1_horse_merchant"),
		(party_slot_eq, "$current_town", slot_town_lord, "trp_player")
	],
	"{My lord/my lady}, you honour my humble shop with your presence.", "goods_merchant_talk",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_town_1_merchant", "trp_town_1_horse_merchant"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Welcome {s0}. What can I do for you?", "goods_merchant_talk",
	[]],

	[anyone, "goods_merchant_pretalk",
	[],
	"Anything else?", "goods_merchant_talk",
	[]],

	[anyone|plyr, "goods_merchant_talk",
	[],
	"I want to buy a few items... and perhaps sell some.", "goods_trade_requested",
	[]],

	[anyone, "goods_trade_requested",
	[],
	"Sure, sure... Here, have a look at my stock...", "goods_trade_completed",
	[
		(change_screen_trade)
	]],

	[anyone, "goods_trade_completed",
	[],
	"Anything else?", "goods_merchant_talk",
	[]],

	[anyone|plyr, "goods_merchant_talk",
	[],
	"What goods should I buy here to trade with other towns?", "trade_info_request",
	[]],

	[anyone|plyr, "goods_merchant_talk",
	[],
	"Nothing. Thanks.", "close_window",
	[]],

	[anyone, "trade_info_request",
	[],
	"That information can be best obtained from caravan masters and travelling merchants. If you want I can send you to the district where foreign merchants stay at when they come to the town. If you spend some time there and listen to the talk, you can learn a lot about what to buy and where to sell it.", "trade_info_request_2",
	[]],

	[anyone|plyr, "trade_info_request_2",
	[],
	"Then I'll go and spend some time with these merchants.", "close_window",
	[
		(jump_to_menu, "mnu_town_trade_assessment_begin"),
		(finish_mission)
	]],

	[anyone|plyr, "trade_info_request_2",
	[],
	"I have no time for this right now.", "goods_merchant_pretalk",
	[]],

	[anyone, "start",
	[
		(store_conversation_troop, reg1),
		(is_between, reg1, "trp_town_1_arena_master", "trp_town_1_armorer"),
		(assign, "$arena_reward_asked", 0),
		(assign, "$arena_tournaments_asked", 0),
		(eq, 1, 0)
	],
	"{!}.", "arena_intro_1",
	[]],

	[anyone, "start",
	[
		(store_conversation_troop, reg1),
		(is_between, reg1, "trp_town_1_arena_master", "trp_town_1_armorer"),
		(eq, "$arena_master_first_talk", 0)
	],
	"Good day friend. If you came to watch the tourneys you came in vain. There won't be a tourney here anytime soon.", "arena_intro_1",
	[
		(assign, "$arena_master_first_talk", 1)
	]],

	[anyone|plyr, "arena_intro_1",
	[],
	"Tourney? So they hold the tourneys here...", "arena_intro_2",
	[]],

	[anyone, "arena_intro_2",
	[],
	"Yes. You should see this place during one of the melee fights. Everyone from the town and nearby villages comes here. The crowd becomes mad with excitement. Anyway, as I said, there won't be an event here soon, so there isn't much to see. Except, there is an official duel every now and then, and  of course we have melee fights almost every day.", "arena_intro_3",
	[]],

	[anyone|plyr, "arena_intro_3",
	[],
	"Tell me about the melee fights.", "arena_training_melee_intro",
	[]],

	[anyone, "arena_training_melee_intro",
	[],
	"The fighters and knights get bored waiting for the next melee, so they have invented the training melee. It is a simple idea really. Fighters jump into the arena with a weapon. There are no rules, no teams. Everyone beats at each other until there is only one fighter left standing. Sounds like fun, eh?", "arena_training_melee_intro_2",
	[]],

	[anyone|plyr, "arena_training_melee_intro_2",
	[
		(eq, "$arena_reward_asked", 0)
	],
	"Is there a reward?", "arena_training_melee_intro_reward",
	[
		(assign, "$arena_reward_asked", 1)
	]],

	[anyone, "arena_training_melee_intro_reward",
	[
		(assign, reg1, 3),
		(assign, reg11, 5),
		(assign, reg2, 6),
		(assign, reg12, 10),
		(assign, reg3, 10),
		(assign, reg13, 25),
		(assign, reg4, 20),
		(assign, reg14, 60),
		(assign, reg15, 250)
	],
	"There is, actually. Some of the wealthy townsmen offer prizes for those fighters who show great skill in the fights. If you can beat {reg1} opponents before going down, you'll earn {reg11} coins. You'll get {reg12} coins for striking down at least {reg2} opponents, {reg13} coins if you can defeat {reg3} opponents, and {reg14} coins if you can survive long enough to beat {reg4} opponents. If you can manage to be the last {man/fighter} standing, you'll earn the great prize of the fights, {reg15} coins. Sounds good, eh?", "arena_training_melee_intro_2",
	[
		(assign, "$arena_tournaments_asked", 1)
	]],

	[anyone, "arena_training_melee_explain_reward",
	[
		(assign, reg1, 3),
		(assign, reg11, 5),
		(assign, reg2, 6),
		(assign, reg12, 10),
		(assign, reg3, 10),
		(assign, reg13, 25),
		(assign, reg4, 20),
		(assign, reg14, 60),
		(assign, reg15, 250)
	],
	"Some of the wealthy townsmen offer prizes for those fighters who show great skill in the fights. If you can beat {reg1} opponents before going down, you'll earn {reg11} coins. You'll get {reg12} coins for striking down at least {reg2} opponents, {reg13} coins if you can defeat {reg3} opponents, and {reg14} coins if you can survive long enough to beat {reg4} opponents. If you can manage to be the last {man/fighter} standing, you'll earn the great prize of the fights, {reg15} coins. Sounds good, eh?", "arena_master_melee_pretalk",
	[]],

	[anyone|plyr, "arena_training_melee_intro_2",
	[],
	"Can I join too?", "arena_training_melee_intro_3",
	[]],

	[anyone, "arena_training_melee_intro_3",
	[],
	"Ha ha. You would have to be out of your mind not to. Of course. The melee fights are open to all. Actually there is going to be a fight soon. You can go and hop in if you want to.", "arena_master_melee_talk",
	[]],

	[anyone, "start",
	[
		(store_conversation_troop, reg1),
		(is_between, reg1, "trp_town_1_arena_master", "trp_town_1_armorer"),
		(eq, "$g_talk_troop_met", 0)
	],
	"Hello. You seem to be new here. Care to share your name?", "arena_master_intro_1",
	[]],

	[anyone|plyr, "arena_master_intro_1",
	[],
	"I am {playername}.", "arena_master_intro_2",
	[]],

	[anyone, "arena_master_intro_2",
	[
		(store_encountered_party, reg2),
		(str_store_party_name, 1, reg2)
	],
	"Well met {playername}. I am the herald of the tourneys here at {s1}. Talk to me if you want to join the fights.", "arena_master_pre_talk",
	[]],

	[anyone|auto_proceed, "start",
	[
		(store_conversation_troop, reg1),
		(is_between, reg1, "trp_town_1_arena_master", "trp_town_1_armorer"),
		(eq, "$last_training_fight_town", "$current_town"),
		(store_current_hours, ":current_hours"),
		(val_add, ":current_hours", -4),
		(lt, ":current_hours", "$training_fight_time")
	],
	".", "arena_master_fight_result",
	[
		(assign, "$arena_reward_asked", 0)
	]],

	[anyone, "arena_master_fight_result",
	[
		(eq, "$g_arena_training_won", 0),
		(eq, "$g_arena_training_kills", 0)
	],
	"Ha-ha, that's quite the bruise you're sporting. But don't worry; everybody gets trounced once in awhile. The important thing is to pick yourself up, dust yourself off and keep fighting. That's what champions do.", "arena_master_pre_talk",
	[
		(assign, "$last_training_fight_town", -1)
	]],

	[anyone, "arena_master_fight_result",
	[
		(eq, "$g_arena_training_won", 0),
		(lt, "$g_arena_training_kills", 3),
		(assign, reg8, "$g_arena_training_kills")
	],
	"Hey, you managed to take down {reg8} opponents. Not bad. But that won't bring you any prize money. Now, if I were you, I would go back there and show everyone what I can do...", "arena_master_pre_talk",
	[
		(assign, "$last_training_fight_town", -1)
	]],

	[anyone, "arena_master_fight_result",
	[
		(eq, "$g_arena_training_won", 0),
		(lt, "$g_arena_training_kills", 6),
		(assign, reg8, "$g_arena_training_kills"),
		(assign, reg10, 5)
	],
	"You put up quite a good fight there. Good moves. You definitely show promise. And you earned a prize of {reg10} coins for knocking down {reg8} opponents.", "arena_master_pre_talk",
	[
		(call_script, "script_troop_add_gold", "trp_player", 5),
		(add_xp_to_troop, 5, "trp_player"),
		(assign, "$last_training_fight_town", -1)
	]],

	[anyone, "arena_master_fight_result",
	[
		(eq, "$g_arena_training_won", 0),
		(lt, "$g_arena_training_kills", 10),
		(assign, reg8, "$g_arena_training_kills"),
		(assign, reg10, 10),
		(assign, reg12, 6)
	],
	"That was a good fight you put up there. You managed to take down no less than {reg8} opponents. And of course, you earned a prize money of {reg10} coins.", "arena_master_pre_talk",
	[
		(call_script, "script_troop_add_gold", "trp_player", 10),
		(add_xp_to_troop, 10, "trp_player"),
		(assign, "$last_training_fight_town", -1)
	]],

	[anyone, "arena_master_fight_result",
	[
		(eq, "$g_arena_training_won", 0),
		(lt, "$g_arena_training_kills", 20),
		(assign, reg8, "$g_arena_training_kills"),
		(assign, reg10, 25)
	],
	"Your performance was amazing! You are without doubt a very skilled fighter. Not everyone can knock down {reg8} people in the fights. Of course you deserve a prize with that performance: {reg10} coins. Nice, eh?", "arena_master_pre_talk",
	[
		(call_script, "script_troop_add_gold", "trp_player", 25),
		(add_xp_to_troop, 10, "trp_player"),
		(assign, "$last_training_fight_town", -1)
	]],

	[anyone, "arena_master_fight_result",
	[
		(eq, "$g_arena_training_won", 0),
		(assign, reg8, "$g_arena_training_kills"),
		(assign, reg10, 60)
	],
	"That was damned good fighting, {playername}. You have very good moves, excellent tactics. And you earned a prize of {reg10} coins for knocking down {reg8} opponents.", "arena_master_pre_talk",
	[
		(call_script, "script_troop_add_gold", "trp_player", 60),
		(add_xp_to_troop, 10, "trp_player"),
		(assign, "$last_training_fight_town", -1)
	]],

	[anyone, "arena_master_fight_result",
	[
		(assign, reg10, 250)
	],
	"Congratulations champion! Your fight there was something to remember! You managed to be the last fighter standing beating down everyone else. And of course you won the grand prize of the fights: {reg10} coins.", "arena_master_pre_talk",
	[
		(call_script, "script_troop_add_gold", "trp_player", 250),
		(add_xp_to_troop, 200, "trp_player"),
		(assign, "$last_training_fight_town", -1)
	]],

	[anyone, "start",
	[
		(store_conversation_troop, reg1),
		(is_between, reg1, "trp_town_1_arena_master", "trp_town_1_armorer")
	],
	"Hello {playername}. Good to see you again.", "arena_master_pre_talk",
	[
		(assign, "$arena_reward_asked", 0)
	]],

	[anyone, "arena_master_pre_talk",
	[],
	"What would you like to do?", "arena_master_talk",
	[]],

	[anyone|plyr, "arena_master_talk",
	[],
	"About the melee fights...", "arena_master_melee_pretalk",
	[]],

	[anyone|plyr, "arena_master_talk",
	[
		(party_get_num_companions, ":num_companions_main_party", "p_main_party"),
		(gt, ":num_companions_main_party", 1)
	],
	"I would like to spar with some of my men.", "arena_master_spar_teams",
	[]],

	[anyone|plyr, "arena_master_talk",
	[
		(eq, "$arena_tournaments_asked", 0)
	],
	"Will there be a tourney in nearby towns soon?", "arena_master_ask_tournaments",
	[
		(assign, "$arena_tournaments_asked", 1)
	]],

	[anyone|plyr, "arena_master_talk",
	[],
	"I need to leave now. Good bye.", "close_window",
	[]],

	[anyone, "arena_master_spar_teams",
	[],
	"Certainly. The arena is currently available. Of course, you will have to supply your own gear, which means there will be no team uniforms.  But that aside, how many teams would you like?", "arena_master_spar_teams_choose",
	[
		(try_for_range, ":number", 1, 33),
			(troop_set_slot, "trp_temp_array_a", ":number", -1),
		(try_end),
		(troop_set_slot, "trp_temp_array_a", 1, "trp_player"),
		(assign, "$temp", 1)
	]],

	[anyone|plyr, "arena_master_spar_teams_choose",
	[],
	"Two.", "arena_master_spar_team_one",
	[
		(assign, "$g_tournament_next_num_teams", 2)
	]],

	[anyone|plyr, "arena_master_spar_teams_choose",
	[
		(party_get_num_companions, ":num_companions_main_party", "p_main_party"),
		(gt, ":num_companions_main_party", 2)
	],
	"Three.", "arena_master_spar_team_one",
	[
		(assign, "$g_tournament_next_num_teams", 3)
	]],

	[anyone|plyr, "arena_master_spar_teams_choose",
	[
		(party_get_num_companions, ":num_companions_main_party", "p_main_party"),
		(gt, ":num_companions_main_party", 3)
	],
	"Four.", "arena_master_spar_team_one",
	[
		(assign, "$g_tournament_next_num_teams", 4)
	]],

	[anyone|plyr, "arena_master_spar_teams_choose",
	[],
	"Never mind. I've changed my mind.", "arena_master_pre_talk",
	[]],

	[anyone, "arena_master_spar_team_one",
	[
		(eq, "$temp", 8)
	],
	"Team One is full. Team Two is next.", "arena_master_spar_team_two",
	[
		(assign, "$temp", 0)
	]],

	[anyone, "arena_master_spar_team_one",
	[
		(assign, reg0, "$temp"),
		(store_sub, reg1, reg0, 1)
	],
	"There {reg1?are:is} currently {reg0} {reg1?troops:troop} on Team One.  Which troop would you like to add?", "arena_master_spar_team_one_choose",
	[]],

	[anyone|repeat_for_troops|plyr, "arena_master_spar_team_one_choose",
	[
		(store_repeat_object, ":repeat_object"),
		(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
		(assign, ":value", 0),
		(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
			(eq, ":value", 0),
			(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
			(ge, ":party_stack_troop_id_main_party_number", 0),
			(eq, ":party_stack_troop_id_main_party_number", ":repeat_object"),
			(assign, ":var_6", 0),
			(try_for_range, ":number_2", 1, 33),
				(troop_get_slot, ":temp_array_a_number_2", "trp_temp_array_a", ":number_2"),
				(eq, ":temp_array_a_number_2", ":repeat_object"),
				(val_add, ":var_6", 1),
			(try_end),
			(party_stack_get_size, ":party_stack_size_main_party_number", "p_main_party", ":number"),
			(gt, ":party_stack_size_main_party_number", ":var_6"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1),
		(store_sub, reg0, ":party_stack_size_main_party_number", ":var_6"),
		(str_store_troop_name, 11, ":repeat_object")
	],
	"{s11}. ({reg0} left.)", "arena_master_spar_team_one_add",
	[
		(store_repeat_object, "$temp_2"),
		(val_add, "$temp", 1),
		(store_add, ":value", "$temp", 0),
		(troop_set_slot, "trp_temp_array_a", ":value", "$temp_2"),
		(str_store_troop_name, 11, "$temp_2")
	]],

	[anyone, "arena_master_spar_team_one_add",
	[],
	"{s11} has been added to Team One.", "arena_master_spar_team_one",
	[]],

	[anyone|plyr, "arena_master_spar_team_one_choose",
	[],
	"I am finished with Team One.  Let's move on to Team Two.", "arena_master_spar_team_two",
	[
		(assign, "$temp", 0)
	]],

	[anyone|plyr, "arena_master_spar_team_one_choose",
	[],
	"Never mind. I'm calling the whole thing off.", "arena_master_pre_talk",
	[]],

	[anyone, "arena_master_spar_team_two",
	[
		(gt, "$g_tournament_next_num_teams", 2),
		(eq, "$temp", 8)
	],
	"Team Two is full. Team Three is next.", "arena_master_spar_team_three",
	[
		(assign, "$temp", 0)
	]],

	[anyone, "arena_master_spar_team_two",
	[
		(eq, "$g_tournament_next_num_teams", 2),
		(eq, "$temp", 8)
	],
	"Team Two is full. Let the match begin!", "arena_master_spar_start_it_up",
	[]],

	[anyone, "arena_master_spar_team_two",
	[
		(assign, reg0, "$temp"),
		(store_sub, reg1, reg0, 1)
	],
	"There {reg1?are:is} currently {reg0} {reg1?troops:troop} on Team Two.  Which troop would you like to add?", "arena_master_spar_team_two_choose",
	[]],

	[anyone|repeat_for_troops|plyr, "arena_master_spar_team_two_choose",
	[
		(store_repeat_object, ":repeat_object"),
		(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
		(assign, ":value", 0),
		(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
			(eq, ":value", 0),
			(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
			(ge, ":party_stack_troop_id_main_party_number", 0),
			(eq, ":party_stack_troop_id_main_party_number", ":repeat_object"),
			(assign, ":var_6", 0),
			(try_for_range, ":number_2", 1, 33),
				(troop_get_slot, ":temp_array_a_number_2", "trp_temp_array_a", ":number_2"),
				(eq, ":temp_array_a_number_2", ":repeat_object"),
				(val_add, ":var_6", 1),
			(try_end),
			(party_stack_get_size, ":party_stack_size_main_party_number", "p_main_party", ":number"),
			(gt, ":party_stack_size_main_party_number", ":var_6"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1),
		(store_sub, reg0, ":party_stack_size_main_party_number", ":var_6"),
		(str_store_troop_name, 11, ":repeat_object")
	],
	"{s11}. ({reg0} left.)", "arena_master_spar_team_two_add",
	[
		(store_repeat_object, "$temp_2"),
		(val_add, "$temp", 1),
		(store_add, ":value", "$temp", 8),
		(troop_set_slot, "trp_temp_array_a", ":value", "$temp_2"),
		(str_store_troop_name, 11, "$temp_2")
	]],

	[anyone, "arena_master_spar_team_two_add",
	[],
	"{s11} has been added to Team Two.", "arena_master_spar_team_two",
	[]],

	[anyone|plyr, "arena_master_spar_team_two_choose",
	[
		(gt, "$g_tournament_next_num_teams", 2)
	],
	"I am finished with Team Two.  Let's move on to Team Three.", "arena_master_spar_team_three",
	[
		(assign, "$temp", 0)
	]],

	[anyone|plyr, "arena_master_spar_team_two_choose",
	[
		(eq, "$g_tournament_next_num_teams", 2)
	],
	"I am finished with Team Two.  Let's begin the match.", "arena_master_spar_start_it_up",
	[]],

	[anyone|plyr, "arena_master_spar_team_two_choose",
	[],
	"Never mind. I'm calling the whole thing off.", "arena_master_pre_talk",
	[]],

	[anyone, "arena_master_spar_team_three",
	[
		(gt, "$g_tournament_next_num_teams", 3),
		(eq, "$temp", 8)
	],
	"Team Three is full. Team Four is next.", "arena_master_spar_team_four",
	[
		(assign, "$temp", 0)
	]],

	[anyone, "arena_master_spar_team_three",
	[
		(eq, "$g_tournament_next_num_teams", 3),
		(eq, "$temp", 8)
	],
	"Team Three is full. Let the match begin!", "arena_master_spar_start_it_up",
	[]],

	[anyone, "arena_master_spar_team_three",
	[
		(assign, reg0, "$temp"),
		(store_sub, reg1, reg0, 1)
	],
	"There {reg1?are:is} currently {reg0} {reg1?troops:troop} on Team Three.  Which troop would you like to add?", "arena_master_spar_team_three_choose",
	[]],

	[anyone|repeat_for_troops|plyr, "arena_master_spar_team_three_choose",
	[
		(store_repeat_object, ":repeat_object"),
		(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
		(assign, ":value", 0),
		(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
			(eq, ":value", 0),
			(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
			(ge, ":party_stack_troop_id_main_party_number", 0),
			(eq, ":party_stack_troop_id_main_party_number", ":repeat_object"),
			(assign, ":var_6", 0),
			(try_for_range, ":number_2", 1, 33),
				(troop_get_slot, ":temp_array_a_number_2", "trp_temp_array_a", ":number_2"),
				(eq, ":temp_array_a_number_2", ":repeat_object"),
				(val_add, ":var_6", 1),
			(try_end),
			(party_stack_get_size, ":party_stack_size_main_party_number", "p_main_party", ":number"),
			(gt, ":party_stack_size_main_party_number", ":var_6"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1),
		(store_sub, reg0, ":party_stack_size_main_party_number", ":var_6"),
		(str_store_troop_name, 11, ":repeat_object")
	],
	"{s11}. ({reg0} left.)", "arena_master_spar_team_three_add",
	[
		(store_repeat_object, "$temp_2"),
		(val_add, "$temp", 1),
		(store_add, ":value", "$temp", 16),
		(troop_set_slot, "trp_temp_array_a", ":value", "$temp_2"),
		(str_store_troop_name, 11, "$temp_2")
	]],

	[anyone, "arena_master_spar_team_three_add",
	[],
	"{s11} has been added to Team Three.", "arena_master_spar_team_three",
	[]],

	[anyone|plyr, "arena_master_spar_team_three_choose",
	[
		(gt, "$g_tournament_next_num_teams", 3)
	],
	"I am finished with Team Three.  Let's move on to Team Four.", "arena_master_spar_team_four",
	[
		(assign, "$temp", 0)
	]],

	[anyone|plyr, "arena_master_spar_team_three_choose",
	[
		(eq, "$g_tournament_next_num_teams", 3)
	],
	"I am finished with Team Three.  Let's begin the match.", "arena_master_spar_start_it_up",
	[]],

	[anyone|plyr, "arena_master_spar_team_three_choose",
	[],
	"Never mind. I'm calling the whole thing off.", "arena_master_pre_talk",
	[]],

	[anyone, "arena_master_spar_team_four",
	[
		(eq, "$temp", 8)
	],
	"Team Four is full. Let the match begin!", "arena_master_spar_start_it_up",
	[]],

	[anyone, "arena_master_spar_team_four",
	[
		(assign, reg0, "$temp"),
		(store_sub, reg1, reg0, 1)
	],
	"There {reg1?are:is} currently {reg0} {reg1?troops:troop} on Team Four.  Which troop would you like to add?", "arena_master_spar_team_four_choose",
	[]],

	[anyone|repeat_for_troops|plyr, "arena_master_spar_team_four_choose",
	[
		(store_repeat_object, ":repeat_object"),
		(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
		(assign, ":value", 0),
		(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
			(eq, ":value", 0),
			(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
			(ge, ":party_stack_troop_id_main_party_number", 0),
			(eq, ":party_stack_troop_id_main_party_number", ":repeat_object"),
			(assign, ":var_6", 0),
			(try_for_range, ":number_2", 1, 33),
				(troop_get_slot, ":temp_array_a_number_2", "trp_temp_array_a", ":number_2"),
				(eq, ":temp_array_a_number_2", ":repeat_object"),
				(val_add, ":var_6", 1),
			(try_end),
			(party_stack_get_size, ":party_stack_size_main_party_number", "p_main_party", ":number"),
			(gt, ":party_stack_size_main_party_number", ":var_6"),
			(assign, ":value", 1),
		(try_end),
		(eq, ":value", 1),
		(store_sub, reg0, ":party_stack_size_main_party_number", ":var_6"),
		(str_store_troop_name, 11, ":repeat_object")
	],
	"{s11}. ({reg0} left.)", "arena_master_spar_team_four_add",
	[
		(store_repeat_object, "$temp_2"),
		(val_add, "$temp", 1),
		(store_add, ":value", "$temp", 24),
		(troop_set_slot, "trp_temp_array_a", ":value", "$temp_2"),
		(str_store_troop_name, 11, "$temp_2")
	]],

	[anyone, "arena_master_spar_team_four_add",
	[],
	"{s11} has been added to Team Four.", "arena_master_spar_team_four",
	[]],

	[anyone|plyr, "arena_master_spar_team_four_choose",
	[],
	"I am finished with Team Four.  Let's begin the match.", "arena_master_spar_start_it_up",
	[]],

	[anyone|plyr, "arena_master_spar_team_four_choose",
	[],
	"Never mind. I'm calling the whole thing off.", "arena_master_pre_talk",
	[]],

	[anyone, "arena_master_spar_start_it_up",
	[],
	"Here you go then. Good luck.", "close_window",
	[
		(party_get_slot, ":current_town_town_arena", "$current_town", slot_town_arena),
		(modify_visitors_at_site, ":current_town_town_arena"),
		(reset_visitors),
		(try_for_range, ":number", 1, 33),
			(troop_get_slot, ":temp_array_a_number", "trp_temp_array_a", ":number"),
			(ge, ":temp_array_a_number", 0),
			(store_sub, ":value", ":number", 1),
			(set_visitor, ":value", ":temp_array_a_number"),
		(try_end),
		(set_jump_mission, "mt_arena_spar_fight"),
		(jump_to_scene, ":current_town_town_arena"),
		(change_screen_mission)
	]],

	[anyone, "arena_master_ask_tournaments",
	[],
	"{reg2?There won't be any tournaments any time soon.:{reg1?Tournaments are:A tournament is} going to be held at {s15}.}", "arena_master_talk",
	[
		(assign, ":var_1", 0),
		(try_for_range_backwards, ":var_2", "p_town_1", "p_castle_1"),
			(party_slot_ge, ":var_2", 156, 1),
			(val_add, ":var_1", 1),
			(try_begin),
				(eq, ":var_1", 1),
				(str_store_party_name, 15, ":var_2"),
			(else_try),
				(str_store_party_name, 16, ":var_2"),
				(eq, ":var_1", 2),
				(str_store_string, 15, "@{s16} and {s15}"),
			(else_try),
				(str_store_string, 15, "@{!}{s16}, {s15}"),
			(try_end),
		(try_end),
		(try_begin),
			(eq, ":var_1", 0),
			(assign, reg2, 1),
		(else_try),
			(assign, reg2, 0),
			(store_sub, reg1, ":var_1", 1),
		(try_end)
	]],

	[anyone, "arena_master_melee_pretalk",
	[],
	"There will be a fight here soon. You can go and jump in if you like.", "arena_master_melee_talk",
	[]],

	[anyone|plyr, "arena_master_melee_talk",
	[],
	"Good. That's what I am going to do.", "arena_master_melee_weapon_select",
	[]],

	[anyone, "arena_master_melee_weapon_select",
	[],
	"Well, please choose a weapon which you like.", "arena_player_melee_weapon_select",
	[]],

	[anyone|plyr, "arena_player_melee_weapon_select",
	[],
	"I'll use my own weapons!", "close_window",
	[
		(store_random_in_range, ":random_in_range_0_60", 0, 60),
		(try_begin),
			(le, ":random_in_range_0_60", 30),
			(assign, "$g_player_entry_point", 32),
		(else_try),
			(assign, "$g_player_entry_point", 38),
		(try_end),
		(assign, "$last_training_fight_town", "$current_town"),
		(store_current_hours, "$training_fight_time"),
		(assign, "$g_mt_mode", 1),
		(party_get_slot, ":current_town_town_arena", "$current_town", slot_town_arena),
		(modify_visitors_at_site, ":current_town_town_arena"),
		(reset_visitors),
		(set_visitor, "$g_player_entry_point", "trp_player"),
		(set_jump_mission, "mt_arena_melee_fight"),
		(jump_to_scene, ":current_town_town_arena")
	]],

	[anyone|plyr, "arena_master_melee_talk",
	[],
	"Thanks. But I will give my bruises some time to heal.", "arena_master_melee_reject",
	[]],

	[anyone, "arena_master_melee_reject",
	[],
	"Good {man/girl}. That's clever of you.", "arena_master_pre_talk",
	[]],

	[anyone|plyr, "arena_master_melee_talk",
	[
		(eq, "$arena_reward_asked", 0)
	],
	"Actually, can you tell me about the rewards again?", "arena_training_melee_explain_reward",
	[
		(assign, "$arena_reward_asked", 1)
	]],

	[trp_galeas, "start",
	[],
	"Hello {boy/girl}. If you have any prisoners, I will be happy to buy them from you.", "galeas_talk",
	[]],

	[plyr|trp_galeas, "galeas_talk",
	[
		(store_num_regular_prisoners, reg0),
		(ge, reg0, 1)
	],
	"Then you'd better bring your purse. I have got prisoners to sell.", "galeas_sell_prisoners",
	[]],

	[plyr|trp_galeas, "galeas_talk",
	[],
	"Not this time. Good-bye.", "close_window",
	[]],

	[trp_galeas, "galeas_sell_prisoners",
	[],
	"Let me see what you have...", "galeas_sell_prisoners_2",
	[
		(change_screen_trade_prisoners)
	]],

	[trp_galeas, "galeas_sell_prisoners_2",
	[],
	"You take more prisoners, bring them to me. I will pay well.", "close_window",
	[]],

	[party_tpl|auto_proceed|pt_mountain_bandits, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[party_tpl|auto_proceed|pt_forest_bandits, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[party_tpl|auto_proceed|pt_taiga_bandits, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[party_tpl|auto_proceed|pt_steppe_bandits, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[party_tpl|auto_proceed|pt_desert_bandits, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[party_tpl|auto_proceed|pt_mountain_bandits_r, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[party_tpl|auto_proceed|pt_forest_bandits_r, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[party_tpl|auto_proceed|pt_taiga_bandits_r, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[party_tpl|auto_proceed|pt_steppe_bandits_r, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[party_tpl|auto_proceed|pt_desert_bandits_r, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[party_tpl|auto_proceed|pt_mountain_bandits_e, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[party_tpl|auto_proceed|pt_forest_bandits_e, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[party_tpl|auto_proceed|pt_taiga_bandits_e, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[party_tpl|auto_proceed|pt_steppe_bandits_e, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[party_tpl|auto_proceed|pt_desert_bandits_e, "start",
	[
		(eq, "$talk_context", 2),
		(encountered_party_is_attacker)
	],
	"{!}Warning: This line should never display.", "bandit_introduce",
	[]],

	[anyone, "bandit_introduce",
	[
		(store_random_in_range, ":random_in_range_11_15", 11, 15),
		(str_store_string, 11, "@I can smell a fat purse a mile away. Methinks yours could do with some lightening, eh?"),
		(str_store_string, 12, "@Why, it be another traveller, chance met upon the road! I should warn you, country here's a mite dangerous for a good {fellow/woman} like you. But for a small donation my boys and I'll make sure you get rightways to your destination, eh?"),
		(str_store_string, 13, "@Well well, look at this! You'd best start coughing up some silver, friend, or me and my boys'll have to break you."),
		(str_store_string, 14, "@There's a toll for passin' through this land, payable to us, so if you don't mind we'll just be collectin' our due from your purse..."),
		(str_store_string_reg, 5, ":random_in_range_11_15")
	],
	"{s5}", "bandit_talk",
	[
		(play_sound, "snd_encounter_bandits")
	]],

	[anyone|plyr, "bandit_talk",
	[],
	"I'll give you nothing but cold steel, you scum!", "close_window",
	[
		(encounter_attack)
	]],

	[anyone|plyr, "bandit_talk",
	[],
	"There's no need to fight. I can pay for free passage.", "bandit_barter",
	[]],

	[anyone, "bandit_barter",
	[
		(store_relation, ":relation_player_faction_g_encountered_party_faction", "fac_player_faction", "$g_encountered_party_faction"),
		(ge, ":relation_player_faction_g_encountered_party_faction", -50),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(troop_get_inventory_capacity, ":inventory_capacity_player", "trp_player"),
		(try_for_range, ":number", 0, ":inventory_capacity_player"),
			(troop_get_inventory_slot, ":inventory_slot_player_number", "trp_player", ":number"),
			(ge, ":inventory_slot_player_number", 0),
			(try_begin),
				(is_between, ":inventory_slot_player_number", "itm_trade_spice", "itm_trade_dummy01"),
				(store_item_value, ":item_value_inventory_slot_player_number", ":inventory_slot_player_number"),
				(val_add, ":troop_gold_player", ":item_value_inventory_slot_player_number"),
			(try_end),
		(try_end),
		(store_div, "$bandit_tribute", ":troop_gold_player", 10),
		(val_max, "$bandit_tribute", 10),
		(assign, reg5, "$bandit_tribute")
	],
	"Silver without blood, that's our favourite kind! Hmm, having a look at you, I reckon you could easily come up with {reg5} coins. Pay it, and we'll let you be on your way.", "bandit_barter_2",
	[]],

	[anyone|plyr, "bandit_barter_2",
	[
		(store_troop_gold, reg2),
		(ge, reg2, "$bandit_tribute"),
		(assign, reg5, "$bandit_tribute")
	],
	"Very well, take it.", "bandit_barter_3a",
	[
		(troop_remove_gold, "trp_player", "$bandit_tribute")
	]],

	[anyone|plyr, "bandit_barter_2",
	[],
	"I don't have that much money with me", "bandit_barter_3b",
	[]],

	[anyone, "bandit_barter_3b",
	[],
	"That's too bad. I guess we'll just have to sell you into slavery. Take {him/her}, lads!", "close_window",
	[
		(encounter_attack)
	]],

	[anyone, "bandit_barter",
	[],
	"Hey, I've heard of you! You slaughter us freebooters like dogs, and now you expect us to let you go for a few stinking coins? Forget it. You gave us no quarter, and you'll get none from us.", "close_window",
	[]],

	[anyone, "bandit_barter_3a",
	[],
	"Heh, that wasn't so hard, was it? All right, we'll let you go now. Be off.", "close_window",
	[
		(store_current_hours, ":current_hours"),
		(val_add, ":current_hours", 72),
		(party_set_slot, "$g_encountered_party", slot_party_ignore_player_until, ":current_hours"),
		(party_ignore_player, "$g_encountered_party", 72),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "start",
	[
		(this_or_next|eq, "$g_encountered_party_template", "pt_mountain_bandits"),
		(this_or_next|eq, "$g_encountered_party_template", "pt_forest_bandits"),
		(this_or_next|eq, "$g_encountered_party_template", "pt_mountain_bandits_r"),
		(this_or_next|eq, "$g_encountered_party_template", "pt_forest_bandits_r"),
		(this_or_next|eq, "$g_encountered_party_template", "pt_mountain_bandits_e"),
		(eq, "$g_encountered_party_template", "pt_forest_bandits_e")
	],
	"Eh? What is it?", "bandit_meet",
	[]],

	[anyone|plyr, "bandit_meet",
	[],
	"Your luck has run out, wretch. Prepare to die!", "bandit_attack",
	[
		(store_relation, ":relation_player_faction_g_encountered_party_faction", "fac_player_faction", "$g_encountered_party_faction"),
		(val_sub, ":relation_player_faction_g_encountered_party_faction", 3),
		(val_max, ":relation_player_faction_g_encountered_party_faction", -100),
		(set_relation, "fac_player_faction", "$g_encountered_party_faction", ":relation_player_faction_g_encountered_party_faction"),
		(party_ignore_player, "$g_encountered_party", 0),
		(party_set_slot, "$g_encountered_party", slot_party_ignore_player_until, 0)
	]],

	[anyone, "bandit_attack",
	[
		(store_random_in_range, ":random_in_range_11_15", 11, 15),
		(str_store_string, 11, "@Another fool come to throw {him/her}self on my weapon, eh? Fine, let's fight!"),
		(str_store_string, 12, "@We're not afraid of you. Time to bust some heads!"),
		(str_store_string, 13, "@That was a mistake. Now I'm going to have to make your death long and painful."),
		(str_store_string, 14, "@Brave words. Let's see you back them up with deeds, cur!"),
		(str_store_string_reg, 5, ":random_in_range_11_15")
	],
	"{s5}", "close_window",
	[]],

	[anyone|plyr, "bandit_meet",
	[],
	"Never mind, I have no business with you.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_rescued_prisoners, "start",
	[
		(eq, "$talk_context", 2)
	],
	"Do you want us to follow you?", "disbanded_troop_ask",
	[]],

	[anyone|plyr, "disbanded_troop_ask",
	[],
	"Yes. Let us ride together.", "disbanded_troop_join",
	[]],

	[anyone|plyr, "disbanded_troop_ask",
	[],
	"No. Not at this time.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "disbanded_troop_join",
	[
		(neg|party_can_join)
	],
	"It does not appear that you have room for us, {m'lord/m'lady}.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "disbanded_troop_join",
	[],
	"We are at your command.", "close_window",
	[
		(party_join),
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_enemy, "start",
	[
		(eq, "$talk_context", 2)
	],
	"You will not capture me again. Not this time.", "enemy_talk_1",
	[]],

	[plyr|party_tpl|pt_enemy, "enemy_talk_1",
	[],
	"You don't have a chance against me. Give up.", "enemy_talk_2",
	[]],

	[party_tpl|pt_enemy, "enemy_talk_2",
	[],
	"I will give up when you are dead!", "close_window",
	[
		(encounter_attack)
	]],

	[party_tpl|pt_routed_warriors, "start",
	[
		(eq, "$talk_context", 2)
	],
	"I beg you, please leave us alone.", "party_encounter_routed_agents_are_caught",
	[]],

	[plyr|party_tpl|pt_routed_warriors, "party_encounter_routed_agents_are_caught",
	[],
	"Do you think you can run away from me? You will be my prisoner or die!", "party_encounter_routed_agents_are_caught2",
	[]],

	[plyr|party_tpl|pt_routed_warriors, "party_encounter_routed_agents_are_caught",
	[],
	"Ok. We'll leave you in peace for this time, do not face with us again.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[party_tpl|pt_routed_warriors, "party_encounter_routed_agents_are_caught2",
	[
		(assign, ":var_1", 0),
		(party_get_num_companion_stacks, ":num_companion_stacks_l_g_encountered_party", "$g_encountered_party"),
		(try_for_range, ":number", 0, ":num_companion_stacks_l_g_encountered_party"),
			(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_number", "$g_encountered_party", ":number"),
			(store_character_level, ":character_level_party_stack_troop_id_g_encountered_party_number", ":party_stack_troop_id_g_encountered_party_number"),
			(try_begin),
				(troop_is_mounted, ":party_stack_troop_id_g_encountered_party_number"),
				(val_add, ":character_level_party_stack_troop_id_g_encountered_party_number", 5),
			(try_end),
			(party_stack_get_size, ":party_stack_size_g_encountered_party_number", "$g_encountered_party", ":number"),
			(val_mul, ":character_level_party_stack_troop_id_g_encountered_party_number", ":party_stack_size_g_encountered_party_number"),
			(val_add, ":var_1", ":character_level_party_stack_troop_id_g_encountered_party_number"),
		(try_end),
		(assign, ":var_7", 0),
		(party_get_num_companion_stacks, ":num_companion_stacks_l_g_encountered_party", "p_main_party"),
		(try_for_range, ":number", 0, ":num_companion_stacks_l_g_encountered_party"),
			(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_number", "p_main_party", ":number"),
			(store_character_level, ":character_level_party_stack_troop_id_g_encountered_party_number", ":party_stack_troop_id_g_encountered_party_number"),
			(try_begin),
				(troop_is_mounted, ":party_stack_troop_id_g_encountered_party_number"),
				(val_add, ":character_level_party_stack_troop_id_g_encountered_party_number", 5),
			(try_end),
			(party_stack_get_size, ":party_stack_size_g_encountered_party_number", "p_main_party", ":number"),
			(val_mul, ":character_level_party_stack_troop_id_g_encountered_party_number", ":party_stack_size_g_encountered_party_number"),
			(val_add, ":var_7", ":character_level_party_stack_troop_id_g_encountered_party_number"),
		(try_end),
		(store_div, ":value", ":var_7", 5),
		(party_get_num_attached_parties, ":num_attached_parties_l_g_encountered_party", "$g_encountered_party"),
		(this_or_next|gt, ":num_attached_parties_l_g_encountered_party", 0),
		(ge, ":var_1", ":value")
	],
	"Haven't you got any mercy? Ok, we will fight you to the last man!", "close_window",
	[]],

	[party_tpl|pt_routed_warriors, "party_encounter_routed_agents_are_caught2",
	[
		(assign, ":var_1", 0),
		(assign, ":var_2", 0),
		(party_get_num_companion_stacks, ":num_companion_stacks_l_g_encountered_party", "$g_encountered_party"),
		(try_for_range, ":number", 0, ":num_companion_stacks_l_g_encountered_party"),
			(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_number", "$g_encountered_party", ":number"),
			(store_character_level, ":character_level_party_stack_troop_id_g_encountered_party_number", ":party_stack_troop_id_g_encountered_party_number"),
			(try_begin),
				(troop_is_mounted, ":party_stack_troop_id_g_encountered_party_number"),
				(val_add, ":character_level_party_stack_troop_id_g_encountered_party_number", 5),
			(try_end),
			(party_stack_get_size, ":party_stack_size_g_encountered_party_number", "$g_encountered_party", ":number"),
			(val_mul, ":character_level_party_stack_troop_id_g_encountered_party_number", ":party_stack_size_g_encountered_party_number"),
			(val_add, ":var_2", ":character_level_party_stack_troop_id_g_encountered_party_number"),
			(val_add, ":var_1", ":party_stack_size_g_encountered_party_number"),
		(try_end),
		(assign, ":var_8", 0),
		(party_get_num_companion_stacks, ":num_companion_stacks_l_g_encountered_party", "p_main_party"),
		(try_for_range, ":number", 0, ":num_companion_stacks_l_g_encountered_party"),
			(party_stack_get_troop_id, ":party_stack_troop_id_g_encountered_party_number", "p_main_party", ":number"),
			(store_character_level, ":character_level_party_stack_troop_id_g_encountered_party_number", ":party_stack_troop_id_g_encountered_party_number"),
			(try_begin),
				(troop_is_mounted, ":party_stack_troop_id_g_encountered_party_number"),
				(val_add, ":character_level_party_stack_troop_id_g_encountered_party_number", 5),
			(try_end),
			(party_stack_get_size, ":party_stack_size_g_encountered_party_number", "p_main_party", ":number"),
			(val_mul, ":character_level_party_stack_troop_id_g_encountered_party_number", ":party_stack_size_g_encountered_party_number"),
			(val_add, ":var_8", ":character_level_party_stack_troop_id_g_encountered_party_number"),
		(try_end),
		(store_div, ":value", ":var_8", 5),
		(lt, ":var_2", ":value"),
		(store_party_size_wo_prisoners, ":party_size_wo_prisoners_g_encountered_party", "$g_encountered_party"),
		(assign, reg3, ":party_size_wo_prisoners_g_encountered_party"),
		(try_begin),
			(gt, ":var_1", 1),
			(str_store_string, 1, "str_we_resign"),
		(else_try),
			(str_store_string, 1, "str_i_resign"),
		(try_end)
	],
	"{s1}", "close_window",
	[
		(assign, "$g_enemy_surrenders", 1),
		(call_script, "script_party_wound_all_members", "$g_encountered_party"),
		(call_script, "script_party_copy", "p_total_enemy_casualties", "$g_encountered_party")
	]],

	[anyone, "sell_prisoner_outlaws",
	[
		(store_troop_kind_count, 0, "trp_bandit_e_looter"),
		(ge, reg0, 1),
		(assign, reg1, reg0),
		(val_mul, reg1, 10),
		(val_mul, reg2, reg0),
		(val_mul, reg2, 10)
	],
	"Hmmm. 10 coins for each looter makes {reg1} coins for all {reg0} of them.", "sell_prisoner_outlaws",
	[
		(call_script, "script_troop_add_gold", "trp_player", reg1),
		(add_xp_to_troop, reg2),
		(remove_member_from_party, "trp_bandit_e_looter")
	]],

	[anyone, "sell_prisoner_outlaws",
	[
		(store_troop_kind_count, 0, "trp_bandit_e_bandit"),
		(ge, reg0, 1),
		(assign, reg1, reg0),
		(val_mul, reg1, 20),
		(assign, reg2, reg0),
		(val_mul, reg2, 20)
	],
	"Let me see. You've brought {reg0} bandits, so 20 coins for each comes up to {reg1} coins.", "sell_prisoner_outlaws",
	[
		(call_script, "script_troop_add_gold", "trp_player", reg1),
		(add_xp_to_troop, reg2),
		(remove_member_from_party, "trp_bandit_e_bandit")
	]],

	[anyone, "sell_prisoner_outlaws",
	[
		(store_troop_kind_count, 0, "trp_bandit_e_brigand"),
		(ge, reg0, 1),
		(assign, reg1, reg0),
		(val_mul, reg1, 30),
		(assign, reg2, reg0),
		(val_mul, reg2, 30)
	],
	"Well well, you've captured {reg0} brigands. Each one is worth 30 coins, so I'll give you {reg1} for them in total.", "sell_prisoner_outlaws",
	[
		(call_script, "script_troop_add_gold", "trp_player", reg1),
		(add_xp_to_troop, reg2),
		(remove_member_from_party, "trp_bandit_e_brigand")
	]],

	[anyone, "sell_prisoner_outlaws",
	[],
	"I suppose that'll be all, then.", "close_window",
	[]],

	[anyone|plyr, "prisoner_chat",
	[
		(store_conversation_troop, "$g_talk_troop"),
		(store_faction_of_troop, "$g_talk_troop_faction", "$g_talk_troop"),
		(store_relation, "$g_talk_troop_faction_relation", "$g_talk_troop_faction", "fac_player_faction"),
		(call_script, "script_troop_get_player_relation", "$g_talk_troop"),
		(assign, "$g_talk_troop_relation", reg0),
		(eq, 1, 0)
	],
	"NO TEXT", "close_window",
	[]],

	[plyr|trp_knight_9_33, "prisoner_chat_noble",
	[
		(eq, "$players_kingdom", "fac_kingdom_2")
	],
	"Your vile actions have shown you to be a false knight!", "prisoner_chat_treason",
	[]],

	[plyr|trp_knight_9_33, "prisoner_chat_treason",
	[
		(str_store_troop_name, 1, "$g_talk_troop"),
		(str_store_faction_name, 2, "$players_kingdom")
	],
	"Gregor Clegane, you have committed terrible crimes against the smallfolk of the Riverlands, for which you will now stand trial. How plead you?", "prisoner_chat_treason_plead",
	[
		(store_random_in_range, reg0, 1, 2),
		(troop_set_slot, "$g_talk_troop", 166, reg0)
	]],

	[trp_knight_9_33, "prisoner_chat_treason_plead",
	[
		(troop_slot_eq, "$g_talk_troop", 166, 1)
	],
	"What do you think a knight is for, {boy/girl}? You think it's all taking favors from ladies and looking fine in gold plate? Hah! Fuck that! I kill because I can. Lords, ladies, princes, peasants, it makes no difference!", "prisoner_chat_treason_choose",
	[]],

	[plyr|trp_knight_9_33, "prisoner_chat_treason_choose",
	[],
	"I am a {man/woman} of honor.  I shall spare your life this day!", "prisoner_chat_treason_not_guilty",
	[
		(troop_set_slot, "$g_talk_troop", 166, 0)
	]],

	[trp_knight_9_33, "prisoner_chat_treason_not_guilty",
	[
		(str_store_troop_name, 1, "trp_player")
	],
	"Hah, of course you will, {boy/girl}. Run back to your mother, like the whore you are.", "close_window",
	[]],

	[plyr|trp_knight_9_33, "prisoner_chat_treason_choose",
	[],
	"You do not deserve leiniency.  You must pay for your crimes with your life.", "prisoner_chat_treason_guilty",
	[]],

	[plyr|trp_knight_9_33, "prisoner_chat_treason_guilty",
	[],
	"In the name of Robb, of the House Stark, the first of his name, king of the North and the Trident, I do sentence you to die.  Have you any final words to say?", "prisoner_chat_treason_final_words",
	[
		(store_random_in_range, reg0, 1, 2),
		(troop_set_slot, "$g_talk_troop", 166, reg0)
	]],

	[trp_knight_9_33, "prisoner_chat_treason_final_words",
	[
		(troop_slot_eq, "$g_talk_troop", 166, 1)
	],
	"I spit on you and yours, {boy/girl}. ", "prisoner_chat_treason_execute",
	[]],

	[plyr|trp_knight_9_33, "prisoner_chat_treason_execute",
	[],
	"(The prisoner struggles against his shackles, desperate to free himself and escape you, but to no avail. You slit his throat and watch, satisfied, as his corpse sags to the floor.)", "close_window",
	[
		(troop_set_note_available, "trp_knight_9_33", 0),
		(troop_set_slot, "$g_talk_troop", 166, 0),
		(troop_set_slot, "$g_talk_troop", slot_troop_occupation, 12),
		(troop_set_slot, "$g_talk_troop", slot_troop_change_to_faction, "fac_no_faction"),
		(troop_set_slot, "$g_talk_troop", slot_troop_original_faction, "fac_no_faction"),
		(assign, ":value", "$g_talk_troop_faction"),
		(try_begin),
			(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
			(assign, ":value_2", -1),
			(assign, ":value_3", -1),
			(try_for_range, ":troop", "trp_kingdom_1_lord", "trp_knight_1_1_wife"),
				(neg|troop_slot_eq, ":troop", slot_troop_occupation, 12),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(eq, ":faction_of_troop_troop", "$g_talk_troop_faction"),
				(troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(troop_get_slot, ":troop_renown", ":troop", slot_troop_renown),
				(gt, ":troop_renown", ":value_3"),
				(assign, ":value_2", ":troop"),
				(assign, ":value_3", ":troop_renown"),
			(try_end),
			(try_begin),
				(neq, ":value_2", -1),
				(faction_set_slot, "$g_talk_troop_faction", slot_faction_leader, ":value_2"),
				(str_store_troop_name, 1, ":value_2"),
				(str_store_faction_name, 2, "$g_talk_troop_faction"),
				(display_message, "@{s1} is the new King of the {s2}!!!", 0xffff2222),
			(else_try),
				(assign, ":value", "fac_no_faction"),
			(try_end),
		(try_end),
		(try_for_range, ":party", "p_town_1", "p_salt_mine"),
			(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
			(eq, ":party_town_lord", "$g_talk_troop"),
			(call_script, "script_give_center_to_faction", ":party", ":value"),
		(try_end),
		(call_script, "script_remove_troop_from_prison", "$g_talk_troop"),
		(remove_troops_from_prisoners, "$g_talk_troop", 1)
	]],

	[anyone|plyr, "prisoner_chat",
	[
		(troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2),
		(str_store_troop_name, 1, "$g_talk_troop")
	],
	"{s1}!", "prisoner_chat_lord",
	[]],

	[anyone, "prisoner_chat_lord",
	[
		(str_store_troop_name, 1, "trp_player")
	],
	"Yes, {s1}?", "prisoner_chat_noble",
	[]],

	[anyone|plyr, "prisoner_chat_noble",
	[],
	"You are free to go.", "prisoner_chat_noble_prerelease",
	[]],

	[anyone|plyr, "prisoner_chat_noble",
	[],
	"You will remain my prisoner.", "prisoner_chat_noble_prekeep",
	[]],

	[anyone|plyr, "prisoner_chat_noble_prerelease",
	[],
	"Despite what you may have heard, I am a {man/woman} of honor.  You are free to go.", "prisoner_chat_noble_release",
	[]],

	[anyone, "prisoner_chat_noble_release",
	[],
	"I will not forget this act of chivalry!", "close_window",
	[
		(call_script, "script_remove_troop_from_prison", "$g_talk_troop"),
		(party_remove_prisoners, "p_main_party", "$g_talk_troop", 1),
		(try_begin),
			(faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "$g_talk_troop"),
			(assign, ":value", 5),
			(assign, ":value_2", 15),
		(else_try),
			(assign, ":value", 2),
			(assign, ":value_2", 5),
		(try_end),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", 10),
		(call_script, "script_change_player_honor", ":value"),
		(call_script, "script_change_player_relation_with_faction", "$g_talk_troop_faction", ":value_2")
	]],

	[anyone|plyr, "prisoner_chat_noble_prekeep",
	[],
	"You will understand if I keep you hostage until your family can afford to compensate me for certain expenses and hardships I must endure to keep you fed and... safe.", "prisoner_chat_noble_keep",
	[]],

	[anyone, "prisoner_chat_noble_keep",
	[
		(ge, "$player_honor", 10),
		(ge, "$g_talk_troop_relation", 0)
	],
	"Truly, this is beneath you! I thought you where a {man/woman} of honor!", "close_window",
	[]],

	[anyone, "prisoner_chat_noble_keep",
	[],
	"And I trust you will be as understanding when I hunt you down like the cur you are!", "close_window",
	[
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", -1)
	]],

	[anyone|plyr, "prisoner_chat",
	[
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_occupation, 2)
	],
	"You there!", "prisoner_chat_commoner",
	[]],

	[anyone, "prisoner_chat_commoner",
	[],
	"Who, me?!", "prisoner_chat_menu",
	[]],

	[anyone|plyr, "prisoner_chat_menu",
	[],
	"You don't look as useless as the rest of the prisoners.", "prisoner_chat_offer",
	[]],

	[anyone|plyr, "prisoner_chat_offer",
	[],
	"Listen, you have one last chance to redeem yourself. Drop all your previous allegiances and swear fealty to me, obey my every order to the letter, and you'll be paid, fed and equipped. If you don't... well, let's just say that accidents happen all the time, and no one will miss a prisoner of war.", "prisoner_chat_reaction",
	[
		(call_script, "script_determine_prisoner_agreed", "$g_talk_troop", "$g_talk_troop_faction_relation")
	]],

	[anyone, "prisoner_chat_reaction",
	[
		(troop_slot_eq, "$g_talk_troop", 166, 1)
	],
	"Thank you for your mercy, my {lord/lady}!. I swear on my mothers grave, I will serve you!", "prisoner_chat_accept1",
	[]],

	[anyone, "prisoner_chat_reaction",
	[],
	"If only I had a sword, I'd show you what I think of your offer! Now get lost, I'm not interested.", "prisoner_chat_refuse",
	[]],

	[anyone|plyr, "prisoner_chat_refuse",
	[],
	"I see...", "prisoner_chat_menu",
	[]],

	[anyone|plyr, "prisoner_chat_accept1",
	[],
	"If you fail to obey a single one of my commands, I will have you severely disciplined!", "prisoner_chat_accept2",
	[]],

	[anyone|plyr, "prisoner_chat_accept1",
	[],
	"In my camp, all the men are treated as equals, but I expect your obedience.", "prisoner_chat_accept2",
	[]],

	[anyone, "prisoner_chat_accept2",
	[],
	"I will obey your wishes, my {lord/lady}.  I swear!", "prisoner_chat_accept3",
	[]],

	[anyone|plyr, "prisoner_chat_accept3",
	[
		(neg|troops_can_join, 1)
	],
	"Oh! Apparently there isn't enough room for you in my party. I will be back when I have made space.", "close_window",
	[]],

	[anyone|plyr, "prisoner_chat_accept3",
	[
		(troops_can_join, 1)
	],
	"Excellent. Now go make ready. There is hard fighting ahead.", "close_window",
	[
		(troop_set_slot, "$g_talk_troop", 166, 0),
		(remove_troops_from_prisoners, "$g_talk_troop", 1),
		(party_add_members, "p_main_party", "$g_talk_troop", 1),
		(call_script, "script_change_player_party_morale", -15)
	]],

	[anyone|plyr, "prisoner_chat_menu",
	[],
	"As wretched as you are, I cannot help but feel sorry for you.", "prisoner_chat_release",
	[]],

	[anyone|plyr, "prisoner_chat_release",
	[],
	"I'm feeling magnanimous today.  Begone, before I change my mind!", "prisoner_chat_release2",
	[]],

	[anyone, "prisoner_chat_release2",
	[],
	"Oh, thank you, my {lord/lady}.  A thousand blessings on you!", "close_window",
	[
		(remove_troops_from_prisoners, "$g_talk_troop", 1)
	]],

	[anyone|plyr, "prisoner_chat_menu",
	[],
	"I have no room for useless mouths in my retinue. You'll have to die.", "prisoner_chat_die1",
	[]],

	[anyone|plyr, "prisoner_chat_die1",
	[],
	"Any last words?", "prisoner_chat_die2",
	[]],

	[anyone, "prisoner_chat_die2",
	[],
	"Please, my {lord/lady}, don't kill me. I am a defenceless prisoner. Surely, you're not that cruel?", "prisoner_chat_die3",
	[]],

	[anyone|plyr, "prisoner_chat_die3",
	[],
	"Yes, I am.", "prisoner_chat_die4",
	[]],

	[anyone|plyr, "prisoner_chat_die3",
	[],
	"No, I will not sink that low.", "close_window",
	[]],

	[anyone|plyr, "prisoner_chat_die4",
	[],
	"(The prisoner struggles against his shackles, desperate to free himself and escape you, but to no avail. You slit their throat with a knife and watch, satisfied, as the corpse sags to the floor, blood spraying across your face.)", "close_window",
	[
		(remove_troops_from_prisoners, "$g_talk_troop", 1),
		(call_script, "script_change_player_honor", -1)
	]],

	[anyone|plyr, "prisoner_chat_menu",
	[],
	"Get back in line!", "close_window",
	[]],

	[anyone|plyr, "prisoner_chat",
	[
		(troop_slot_eq, "$g_talk_troop", 166, 1),
		(troops_can_join, 1)
	],
	"All right, I have made room for you.", "prisoner_chat_accept_confirm",
	[]],

	[anyone, "prisoner_chat_accept_confirm",
	[],
	"I am at your command, my {lord/lady}.", "prisoner_chat_accept3",
	[]],

	[anyone|plyr, "prisoner_chat",
	[
		(troop_slot_eq, "$g_talk_troop", 166, 1),
		(neg|troops_can_join, 1)
	],
	"I am sorry, I still have no room for you. You'll have to wait a while longer.", "close_window",
	[]],

	[anyone, "start",
	[
		(party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
		(this_or_next|is_between, "$g_talk_troop", "trp_town_1_weaponsmith", "trp_town_1_tavernkeeper"),
		(this_or_next|is_between, "$g_talk_troop", "trp_town_1_armorer", "trp_town_1_weaponsmith"),
		(is_between, "$g_talk_troop", "trp_town_1_horse_merchant", "trp_town_1_mayor"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0"),
		(try_begin),
			(le, reg0, 2),
			(str_store_string, 0, "str_dplmc_my_lordlady"),
			(call_script, "script_dplmc_store_troop_is_female", "trp_player"),
			(neq, reg0, 1),
			(str_store_string, 0, "@your lordship"),
		(try_end)
	],
	"Greetings, {s0}. How can I serve you today?", "town_merchant_talk",
	[]],

	[anyone, "start",
	[
		(this_or_next|is_between, "$g_talk_troop", "trp_town_1_weaponsmith", "trp_town_1_tavernkeeper"),
		(this_or_next|is_between, "$g_talk_troop", "trp_town_1_armorer", "trp_town_1_weaponsmith"),
		(is_between, "$g_talk_troop", "trp_town_1_horse_merchant", "trp_town_1_mayor")
	],
	"Good day. What can I do for you?", "town_merchant_talk",
	[]],

	[anyone|plyr, "town_merchant_talk",
	[
		(is_between, "$g_talk_troop", "trp_town_1_weaponsmith", "trp_town_1_tavernkeeper")
	],
	"I want to buy a new weapon. Show me your wares.", "trade_requested_weapons",
	[]],

	[anyone|plyr, "town_merchant_talk",
	[
		(is_between, "$g_talk_troop", "trp_town_1_armorer", "trp_town_1_weaponsmith")
	],
	"I am looking for some equipment. Show me what you have.", "trade_requested_armor",
	[]],

	[anyone|plyr, "town_merchant_talk",
	[
		(is_between, "$g_talk_troop", "trp_town_1_horse_merchant", "trp_town_1_mayor")
	],
	"I am thinking of buying a horse.", "trade_requested_horse",
	[]],

	[anyone, "trade_requested_weapons",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Ah, yes {s0}. These arms are the best you'll find anywhere.", "merchant_trade",
	[
		(change_screen_trade)
	]],

	[anyone, "trade_requested_armor",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Of course, {s0}. You won't find better quality armour than these in all the known world.", "merchant_trade",
	[
		(change_screen_trade)
	]],

	[anyone, "trade_requested_horse",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"You have a fine eye for horses, {s0}. You won't find better beasts than these anywhere else.", "merchant_trade",
	[
		(change_screen_trade)
	]],

	[anyone, "merchant_trade",
	[],
	"Anything else?", "town_merchant_talk",
	[]],

	[anyone|plyr, "town_merchant_talk",
	[],
	"Tell me. What are people talking about these days?", "merchant_gossip",
	[]],

	[anyone, "merchant_gossip",
	[],
	"Well, nothing new lately. Prices, weather, the war, the same old things.", "town_merchant_talk",
	[]],

	[anyone|plyr, "town_merchant_talk",
	[],
	"Good-bye.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 0),
		(is_between, "$g_talk_troop", "trp_swadian_town_walker_m_average", "trp_tournament_master"),
		(party_slot_eq, "$current_town", slot_town_lord, "trp_player")
	],
	"My {lord/lady}?", "town_dweller_talk",
	[
		(assign, "$welfare_inquired", 0),
		(assign, "$rumors_inquired", 0),
		(assign, "$info_inquired", 0)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 0),
		(is_between, "$g_talk_troop", "trp_swadian_town_walker_m_average", "trp_tournament_master"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Good day, {s0}.", "town_dweller_talk",
	[
		(assign, "$welfare_inquired", 0),
		(assign, "$rumors_inquired", 0),
		(assign, "$info_inquired", 0)
	]],

	[anyone|plyr, "town_dweller_talk",
	[
		(check_quest_active, "qst_hunt_down_fugitive"),
		(neg|check_quest_concluded, "qst_hunt_down_fugitive"),
		(quest_slot_eq, "qst_hunt_down_fugitive", slot_quest_target_center, "$current_town"),
		(quest_get_slot, ":hunt_down_fugitive_target_dna", "qst_hunt_down_fugitive", slot_quest_target_dna),
		(call_script, "script_get_name_from_dna_to_s50", ":hunt_down_fugitive_target_dna"),
		(str_store_string, 4, 50)
	],
	"I am looking for a man by the name of {s4}. I was told he may be hiding here.", "town_dweller_ask_fugitive",
	[]],

	[anyone, "town_dweller_ask_fugitive",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Strangers come and go to our village, {s0}. If he is hiding here, you will surely find him if you look around.", "close_window",
	[]],

	[anyone|plyr, "town_dweller_talk",
	[
		(eq, 1, 0),
		(check_quest_active, "qst_meet_spy_in_enemy_town"),
		(neg|check_quest_succeeded, "qst_meet_spy_in_enemy_town"),
		(quest_slot_eq, "qst_meet_spy_in_enemy_town", slot_quest_target_center, "$current_town"),
		(str_store_item_name, 5, "$spy_item_worn")
	],
	"Pardon me, but is that a {s5} you're wearing?", "town_dweller_quest_meet_spy_in_enemy_town_ask_item",
	[]],

	[anyone, "town_dweller_quest_meet_spy_in_enemy_town_ask_item",
	[
		(str_store_item_name, 5, "$spy_item_worn"),
		(try_begin),
			(troop_has_item_equipped, "$g_talk_troop", "$spy_item_worn"),
			(str_store_string, 6, "@A {s5}? Well... Yes, I suppose it is. What a strange thing to ask."),
		(else_try),
			(str_store_string, 6, "@Eh? No, it most certainly is not a {s5}. I'd start questioning my eyesight if I were you."),
		(try_end)
	],
	"{s6}", "town_dweller_talk",
	[]],

	[anyone|repeat_for_100|plyr, "town_dweller_talk",
	[
		(store_repeat_object, ":repeat_object"),
		(lt, ":repeat_object", 4),
		(check_quest_active, "qst_meet_spy_in_enemy_town"),
		(neg|check_quest_succeeded, "qst_meet_spy_in_enemy_town"),
		(quest_slot_eq, "qst_meet_spy_in_enemy_town", slot_quest_target_center, "$current_town"),
		(store_add, ":value", ":repeat_object", "str_secret_sign_1"),
		(str_store_string, 4, ":value")
	],
	"{s4}", "town_dweller_quest_meet_spy_in_enemy_town",
	[
		(store_repeat_object, ":repeat_object"),
		(assign, "$temp", ":repeat_object")
	]],

	[anyone, "town_dweller_quest_meet_spy_in_enemy_town",
	[
		(call_script, "script_agent_get_town_walker_details", "$g_talk_agent"),
		(assign, ":var_1", reg0),
		(eq, ":var_1", 3),
		(quest_get_slot, ":meet_spy_in_enemy_town_target_amount", "qst_meet_spy_in_enemy_town", slot_quest_target_amount),
		(val_sub, ":meet_spy_in_enemy_town_target_amount", "str_secret_sign_1"),
		(eq, ":meet_spy_in_enemy_town_target_amount", "$temp"),
		(store_add, ":value", ":meet_spy_in_enemy_town_target_amount", "str_countersign_1"),
		(str_store_string, 4, ":value")
	],
	"{s4}", "town_dweller_quest_meet_spy_in_enemy_town_know",
	[]],

	[anyone, "town_dweller_quest_meet_spy_in_enemy_town",
	[],
	"Eh? What kind of gibberish is that?", "town_dweller_quest_meet_spy_in_enemy_town_dont_know",
	[]],

	[anyone|plyr, "town_dweller_quest_meet_spy_in_enemy_town_dont_know",
	[],
	"Never mind.", "close_window",
	[]],

	[anyone|plyr, "town_dweller_quest_meet_spy_in_enemy_town_know",
	[
		(quest_get_slot, ":meet_spy_in_enemy_town_giver_troop", "qst_meet_spy_in_enemy_town", slot_quest_giver_troop),
		(str_store_troop_name, 4, ":meet_spy_in_enemy_town_giver_troop")
	],
	"{s4} sent me to collect your reports. Do you have them with you?", "town_dweller_quest_meet_spy_in_enemy_town_chat",
	[]],

	[anyone, "town_dweller_quest_meet_spy_in_enemy_town_chat",
	[
		(quest_get_slot, ":meet_spy_in_enemy_town_giver_troop", "qst_meet_spy_in_enemy_town", slot_quest_giver_troop),
		(str_store_troop_name, 4, ":meet_spy_in_enemy_town_giver_troop")
	],
	"I've been expecting you. Here they are, make sure they reach {s4} intact and without delay.", "town_dweller_quest_meet_spy_in_enemy_town_chat_2",
	[
		(call_script, "script_succeed_quest", "qst_meet_spy_in_enemy_town"),
		(call_script, "script_center_remove_walker_type_from_walkers", "$current_town", 3)
	]],

	[anyone|plyr, "town_dweller_quest_meet_spy_in_enemy_town_chat_2",
	[],
	"Farewell.", "close_window",
	[]],

	[anyone|plyr, "town_dweller_talk",
	[
		(party_slot_eq, "$current_town", slot_party_type, 4),
		(eq, "$info_inquired", 0)
	],
	"What can you tell me about this village?", "town_dweller_ask_info",
	[
		(assign, "$info_inquired", 1)
	]],

	[anyone|plyr, "town_dweller_talk",
	[
		(party_slot_eq, "$current_town", slot_party_type, 3),
		(eq, "$info_inquired", 0)
	],
	"What can you tell me about this town?", "town_dweller_ask_info",
	[
		(assign, "$info_inquired", 1)
	]],

	[anyone, "town_dweller_ask_info",
	[
		(str_store_party_name, 5, "$current_town"),
		(assign, reg4, 0),
		(try_begin),
			(party_slot_eq, "$current_town", slot_party_type, 3),
			(assign, reg4, 1),
		(try_end),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0"),
		(str_store_string, 6, "@This is the {reg4?town:village} of {s5}, {s0}."),
		(str_clear, 10),
		(try_begin),
			(party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
			(str_store_string, 10, "@{s6} Our {reg4?town:village} and the surrounding lands belong to you of course, my {lord/lady}."),
		(else_try),
			(party_get_slot, ":current_town_town_lord", "$current_town", slot_town_lord),
			(ge, ":current_town_town_lord", 0),
			(str_store_troop_name, 7, ":current_town_town_lord"),
			(store_faction_of_troop, ":faction_of_troop_current_town_town_lord", ":current_town_town_lord"),
			(str_store_faction_name, 8, ":faction_of_troop_current_town_town_lord"),
			(str_store_string, 10, "@{s6} Our {reg4?town:village} and the surrounding lands belong to {s7} of the {s8}."),
		(try_end),
		(str_clear, 5),
		(assign, ":var_3", 0),
		(try_for_range, ":item", "itm_trade_spice", "itm_trade_dummy01"),
			(call_script, "script_center_get_production", "$g_encountered_party", ":item"),
			(assign, ":var_5", reg0),
			(ge, ":var_5", 20),
			(str_store_item_name, 3, ":item"),
			(try_begin),
				(eq, ":var_3", 0),
				(str_store_string, 5, 3),
			(else_try),
				(eq, ":var_3", 1),
				(str_store_string, 5, "@{s3} and {s5}"),
			(else_try),
				(str_store_string, 5, "@{!}{s3}, {s5}"),
			(try_end),
			(val_add, ":var_3", 1),
		(try_end),
		(try_begin),
			(gt, ":var_3", 0),
			(assign, reg20, 1),
		(else_try),
			(assign, reg20, 0),
		(try_end),
		(str_store_string, 11, "@{reg20?We mostly produce {s5} here:We don't produce much here these days}. If you would like to learn more, you can speak with our {reg4?guildmaster:village elder}. He is nearby, right over there.")
	],
	"{s10} {s11}", "close_window",
	[]],

	[anyone|plyr, "town_dweller_talk",
	[
		(party_slot_eq, "$current_town", slot_party_type, 4),
		(eq, "$welfare_inquired", 0)
	],
	"How is life here?", "town_dweller_ask_situation",
	[
		(assign, "$welfare_inquired", 1)
	]],

	[anyone|plyr, "town_dweller_talk",
	[
		(party_slot_eq, "$current_town", slot_party_type, 3),
		(eq, "$welfare_inquired", 0)
	],
	"How is life here?", "town_dweller_ask_situation",
	[
		(assign, "$welfare_inquired", 1)
	]],

	[anyone, "town_dweller_ask_situation",
	[
		(call_script, "script_agent_get_town_walker_details", "$g_talk_agent"),
		(assign, ":var_1", reg0),
		(eq, ":var_1", 1),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0"),
		(party_slot_eq, "$current_town", slot_party_type, 4)
	],
	"Disaster has struck my family, {s0}. We have no land of our own, and the others have no money to pay for our labor, or even to help us. My poor children lie at home hungry and sick. I don't know what we'll do.", "town_dweller_poor",
	[]],

	[anyone, "town_dweller_ask_situation",
	[
		(call_script, "script_agent_get_town_walker_details", "$g_talk_agent"),
		(assign, ":var_1", reg0),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0"),
		(eq, ":var_1", 1)
	],
	"My life is miserable, {s0}. I haven't been able to find a job for months, and my poor children go to bed hungry each night. My neighbours are too poor themselves to help me.", "town_dweller_poor",
	[]],

	[anyone|plyr, "town_dweller_poor",
	[
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(ge, ":troop_gold_player", 300)
	],
	"Then take these 300 coins. I hope this will help you and your family.", "town_dweller_poor_paid",
	[
		(troop_remove_gold, "trp_player", 300)
	]],

	[anyone|plyr, "town_dweller_poor",
	[],
	"Then clearly you must travel somewhere else, or learn another trade.", "town_dweller_poor_not_paid",
	[]],

	[anyone, "town_dweller_poor_not_paid",
	[],
	"Yes. I will do as you say.", "close_window",
	[]],

	[anyone, "town_dweller_poor_paid",
	[],
	"{My lord/My good lady}.  You are so good and generous. I will tell everyone how you helped us.", "close_window",
	[
		(call_script, "script_change_player_relation_with_center", "$g_encountered_party", 1),
		(call_script, "script_agent_get_town_walker_details", "$g_talk_agent"),
		(assign, ":var_1", reg2),
		(call_script, "script_center_set_walker_to_type", "$g_encountered_party", ":var_1", 2)
	]],

	[anyone, "town_dweller_ask_situation",
	[
		(call_script, "script_agent_get_town_walker_details", "$g_talk_agent"),
		(assign, ":var_1", reg0),
		(eq, ":var_1", 2),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Thank you for your kindness {s0}. With your help our lives will be better. I will pray for you everyday.", "close_window",
	[]],

	[anyone, "town_dweller_ask_situation",
	[
		(neg|party_slot_ge, "$current_town", 50, 30),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Times are hard, {s0}. We work hard all day and yet we go to sleep hungry most nights.", "town_dweller_talk",
	[]],

	[anyone, "town_dweller_ask_situation",
	[
		(neg|party_slot_ge, "$current_town", 50, 70),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Times are hard, {s0}. But we must count our blessings.", "town_dweller_talk",
	[]],

	[anyone, "town_dweller_ask_situation",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"We are not doing too badly {s0}. We must count our blessings.", "town_dweller_talk",
	[]],

	[anyone|plyr, "town_dweller_talk",
	[],
	"What is your trade?", "town_dweller_ask_trade",
	[]],

	[anyone, "town_dweller_ask_trade",
	[
		(call_script, "script_town_walker_occupation_string_to_s14", "$g_talk_agent")
	],
	"{s14}", "town_dweller_talk",
	[]],

	[anyone|plyr, "town_dweller_talk",
	[
		(eq, "$rumors_inquired", 0)
	],
	"What is the latest rumor around here?", "town_dweller_ask_rumor",
	[
		(assign, "$rumors_inquired", 1)
	]],

	[anyone, "town_dweller_ask_rumor",
	[
		(store_skill_level, reg0, "skl_persuasion", "trp_player"),
		(store_sub, reg0, -5, reg0),
		(neg|party_slot_ge, "$current_town", 26, reg0)
	],
	"I don't know anything that would be of interest to you.", "town_dweller_talk",
	[]],

	[anyone, "town_dweller_ask_rumor",
	[
		(store_mul, ":value", "$current_town", 197),
		(val_add, ":value", "$g_talk_agent"),
		(call_script, "script_get_rumor_to_s61", ":value"),
		(gt, reg0, 0)
	],
	"{s61}", "town_dweller_talk",
	[]],

	[anyone, "town_dweller_ask_rumor",
	[],
	"I haven't heard anything interesting lately.", "town_dweller_talk",
	[]],

	[anyone|plyr, "town_dweller_talk",
	[],
	"[Leave]", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 0),
		(is_between, "$g_talk_troop", "trp_novice_fighter", "trp_tournament_master"),
		(party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Yes {s0}?", "player_castle_guard_talk",
	[]],

	[anyone|plyr, "player_castle_guard_talk",
	[],
	"How goes the watch, soldier?", "player_castle_guard_talk_2",
	[]],

	[anyone, "player_castle_guard_talk_2",
	[],
	"All is quiet {s0}. Nothing to report.", "player_castle_guard_talk_3",
	[]],

	[anyone|plyr, "player_castle_guard_talk_3",
	[],
	"Good. Keep your eyes open.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 0),
		(is_between, "$g_talk_troop", "trp_novice_fighter", "trp_tournament_master"),
		(is_between, "$g_encountered_party_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(eq, "$players_kingdom", "$g_encountered_party_faction"),
		(troop_slot_ge, "trp_player", 7, 100),
		(str_store_party_name, 10, "$current_town"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Good day, {s0}. Always an honor to have you here in {s10}.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 0),
		(is_between, "$g_talk_troop", "trp_novice_fighter", "trp_tournament_master"),
		(is_between, "$g_encountered_party_faction", "fac_player_supporters_faction", "fac_kingdoms_end")
	],
	"Mind your manners within the walls and we'll have no trouble.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 1),
		(is_between, "$g_talk_troop", "trp_novice_fighter", "trp_tournament_master"),
		(is_between, "$g_encountered_party_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(party_slot_eq, "$current_town", slot_town_lord, "trp_player"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Your orders, {s0}?", "hall_guard_talk",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 1),
		(is_between, "$g_talk_troop", "trp_novice_fighter", "trp_tournament_master"),
		(is_between, "$g_encountered_party_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"We are not supposed to talk while on guard, {s0}.", "close_window",
	[]],

	[anyone|plyr, "hall_guard_talk",
	[],
	"Stay on duty and let me know if anyone comes to see me.", "hall_guard_duty",
	[]],

	[anyone, "hall_guard_duty",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Yes, {s0}. As you wish.", "close_window",
	[]],

	[anyone|plyr, "hall_guard_talk",
	[
		(eq, 1, 0)
	],
	"I want you to arrest this man immediately!", "hall_guard_arrest",
	[]],

	[anyone, "hall_guard_arrest",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Who do you want arrested {s0}?", "hall_guard_arrest_2",
	[]],

	[anyone|plyr, "hall_guard_arrest_2",
	[],
	"Ah, never mind my high spirits lads.", "close_window",
	[]],

	[anyone|plyr, "hall_guard_arrest_2",
	[],
	"Forget it. I will find another way to deal with this.", "close_window",
	[]],

	[anyone, "enemy_defeated",
	[],
	"Arggh! I hate this.", "close_window",
	[]],

	[anyone, "party_relieved",
	[],
	"Thank you for helping us against those bastards.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 2),
		(store_encountered_party, reg5),
		(party_get_template_id, reg7, reg5),
		(this_or_next|eq, reg7, "pt_sea_raiders"),
		(this_or_next|eq, reg7, "pt_sea_raiders_r"),
		(eq, reg7, "pt_sea_raiders_e")
	],
	"I will drink from your skull!", "battle_reason_stated",
	[
		(play_sound, "snd_encounter_sea_raiders")
	]],

	[anyone, "member_chat",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Your orders {s0}?", "regular_member_talk",
	[]],

	[anyone|plyr, "regular_member_talk",
	[],
	"Tell me about yourself", "view_regular_char_requested",
	[]],

	[anyone, "view_regular_char_requested",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Aye {s0}. Let me tell you all there is to know about me.", "do_regular_member_view_char",
	[
		(change_screen_view_character)
	]],

	[anyone, "do_regular_member_view_char",
	[],
	"Anything else?", "regular_member_talk",
	[]],

	[anyone|plyr, "regular_member_talk",
	[
		(is_between, "$g_talk_troop", "trp_custom_n_recruit", "trp_custom_end")
	],
	"I'd like to select your equipment.", "customize_troop_equipment_requested",
	[]],

	[anyone, "customize_troop_equipment_requested",
	[],
	"Aye {Ser/my lady}. Here is all the gear we have currently equipped. Your inventory will show the gear that you can assign to us.", "finish_custom_troop",
	[
		(call_script, "script_start_customizing", "$g_talk_troop")
	]],

	[anyone, "finish_custom_troop",
	[],
	"Very good {Ser/my lady}. I will put on the new gear now.", "finish_custom_response",
	[]],

	[anyone|plyr, "finish_custom_response",
	[],
	"Carry on.", "close_window",
	[
		(call_script, "script_finish_customizing", "$g_talk_troop")
	]],

	[anyone|plyr, "regular_member_talk",
	[],
	"Let me see your equipment.", "dplmc_view_regular_inventory",
	[]],

	[anyone, "dplmc_view_regular_inventory",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Very well {s0}, here is what I am using...", "dplmc_do_view_regular_inventory",
	[
		(call_script, "script_dplmc_copy_inventory", "$g_player_troop", "trp_temp_array_a"),
		(call_script, "script_dplmc_copy_inventory", "$g_talk_troop", "trp_temp_array_b"),
		(try_for_range, ":number", 0, 10),
			(troop_get_inventory_slot, ":inventory_slot_temp_array_b_number", "trp_temp_array_b", ":number"),
			(gt, ":inventory_slot_temp_array_b_number", -1),
			(troop_get_inventory_slot_modifier, ":inventory_slot_modifier_temp_array_b_number", "trp_temp_array_b", ":number"),
			(troop_add_item, "trp_temp_array_b", ":inventory_slot_temp_array_b_number", ":inventory_slot_modifier_temp_array_b_number"),
			(troop_set_inventory_slot, "trp_temp_array_b", ":number", -1),
		(try_end),
		(change_screen_loot, "trp_temp_array_b")
	]],

	[anyone, "dplmc_do_view_regular_inventory",
	[
		(call_script, "script_dplmc_print_subordinate_says_sir_madame_to_s0")
	],
	"Is that satisfactory, {s0}?", "dplmc_do_view_regular_inventory_2",
	[]],

	[anyone|plyr, "dplmc_do_view_regular_inventory_2",
	[
		(call_script, "script_dplmc_copy_inventory", "trp_temp_array_a", "$g_player_troop")
	],
	"Indeed.", "do_regular_member_view_char",
	[]],

	[anyone|plyr, "regular_member_talk",
	[],
	"Nothing. Keep moving.", "close_window",
	[]],

	[anyone, "start",
	[
		(eq, "$talk_context", 2),
		(gt, "$encountered_party_hostile", 0),
		(encountered_party_is_attacker)
	],
	"You have no chance against us. Surrender now or we will kill you all...", "party_encounter_hostile_attacker",
	[
		(try_begin),
			(this_or_next|eq, "$g_encountered_party_template", "pt_steppe_bandits"),
			(this_or_next|eq, "$g_encountered_party_template", "pt_steppe_bandits_r"),
			(eq, "$g_encountered_party_template", "pt_steppe_bandits_e"),
			(play_sound, "snd_encounter_steppe_bandits"),
		(try_end)
	]],

	[anyone|plyr, "party_encounter_hostile_attacker",
	[],
	"We will fight you to the end!", "close_window",
	[]],

	[anyone|plyr, "party_encounter_hostile_attacker",
	[],
	"Don't attack! We surrender.", "close_window",
	[
		(assign, "$g_player_surrenders", 1)
	]],

	[anyone, "start",
	[
		(eq, "$talk_context", 2),
		(neg|encountered_party_is_attacker)
	],
	"What do you want?", "party_encounter_hostile_defender",
	[]],

	[anyone|plyr, "party_encounter_hostile_defender",
	[],
	"Surrender or die!", "party_encounter_hostile_ultimatum_surrender",
	[]],

	[anyone, "party_encounter_hostile_ultimatum_surrender",
	[],
	"{s43}", "close_window",
	[
		(call_script, "script_lord_comment_to_s43", "$g_talk_troop", "str_lord_challenged_default"),
		(party_slot_eq, "$g_encountered_party", slot_party_type, 7),
		(store_relation, ":relation_g_encountered_party_faction_player_supporters_faction", "$g_encountered_party_faction", "fac_player_supporters_faction"),
		(try_begin),
			(gt, ":relation_g_encountered_party_faction_player_supporters_faction", 0),
			(val_sub, ":relation_g_encountered_party_faction_player_supporters_faction", 10),
		(try_end),
		(val_sub, ":relation_g_encountered_party_faction_player_supporters_faction", 5),
		(call_script, "script_set_player_relation_with_faction", "$g_encountered_party_faction", ":relation_g_encountered_party_faction_player_supporters_faction"),
		(call_script, "script_diplomacy_party_attacks_neutral", "p_main_party", "$g_encountered_party")
	]],

	[anyone|plyr, "party_encounter_hostile_defender",
	[],
	"Nothing. We'll leave you in peace.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|auto_proceed, "start",
	[
		(is_between, "$g_talk_troop", "trp_swadian_merchant", "trp_startup_merchants_end"),
		(check_quest_active, "qst_collect_men"),
		(eq, "$talk_context", 21)
	],
	"{!}.", "merchant_end",
	[]],

	[anyone, "merchant_end",
	[],
	"Heh! I must really be in a tight spot, to place my hopes in a passing stranger. However, something about you tells me that my trust is not misplaced. Now, go see if you can round up some volunteers.", "close_window",
	[]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_swadian_merchant", "trp_startup_merchants_end"),
		(eq, "$talk_context", 21),
		(check_quest_active, "qst_save_town_from_bandits"),
		(store_div, ":value", "$number_of_civilian_loses", 2),
		(try_begin),
			(eq, "$g_killed_first_bandit", 1),
			(store_add, ":value_2", "$number_of_bandits_killed_by_player", 1),
		(else_try),
			(store_add, ":value_2", "$number_of_bandits_killed_by_player", 0),
		(try_end),
		(val_sub, ":value_2", ":value"),
		(val_max, ":value_2", 0),
		(call_script, "script_change_player_relation_with_center", "$g_starting_town", ":value_2"),
		(try_begin),
			(eq, "$g_killed_first_bandit", 1),
			(gt, "$number_of_bandits_killed_by_player", 2),
			(str_store_string, 3, "str_you_fought_well_at_town_fight_survived"),
			(troop_add_gold, "trp_player", 200),
		(else_try),
			(eq, "$g_killed_first_bandit", 1),
			(gt, "$number_of_bandits_killed_by_player", 0),
			(str_store_string, 3, "str_you_fought_normal_at_town_fight_survived"),
			(troop_add_gold, "trp_player", 200),
		(else_try),
			(eq, "$g_killed_first_bandit", 1),
			(eq, "$number_of_bandits_killed_by_player", 0),
			(str_store_string, 3, "str_you_fought_bad_at_town_fight_survived"),
			(troop_add_gold, "trp_player", 100),
		(else_try),
			(eq, "$g_killed_first_bandit", 0),
			(ge, "$number_of_bandits_killed_by_player", 2),
			(str_store_string, 3, "str_you_fought_well_at_town_fight"),
			(troop_add_gold, "trp_player", 100),
		(else_try),
			(str_store_string, 3, "str_you_wounded_at_town_fight"),
			(troop_add_gold, "trp_player", 100),
		(try_end),
		(try_begin),
			(ge, "$number_of_civilian_loses", 1),
			(assign, reg0, "$number_of_civilian_loses"),
			(str_store_string, 2, "str_unfortunately_reg0_civilians_wounded_during_fight_more"),
		(else_try),
			(eq, "$number_of_civilian_loses", 1),
			(assign, reg0, "$number_of_civilian_loses"),
			(str_store_string, 2, "str_unfortunately_reg0_civilians_wounded_during_fight"),
		(else_try),
			(str_store_string, 2, "str_also_one_another_good_news_is_any_civilians_did_not_wounded_during_fight"),
		(try_end),
		(call_script, "script_succeed_quest", "qst_save_town_from_bandits"),
		(call_script, "script_end_quest", "qst_save_town_from_bandits")
	],
	"{s3}{s2}", "merchant_quest_4e",
	[]],

	[anyone|plyr, "merchant_quest_4e",
	[
		(try_begin),
			(eq, "$g_killed_first_bandit", 1),
			(gt, "$number_of_bandits_killed_by_player", 2),
			(str_store_string, 1, "str_you_fought_well_at_town_fight_survived_answer"),
		(else_try),
			(eq, "$g_killed_first_bandit", 1),
			(gt, "$number_of_bandits_killed_by_player", 0),
			(str_store_string, 1, "str_you_fought_normal_at_town_fight_survived_answer"),
		(else_try),
			(eq, "$g_killed_first_bandit", 1),
			(eq, "$number_of_bandits_killed_by_player", 0),
			(str_store_string, 1, "str_you_fought_bad_at_town_fight_survived_answer"),
		(else_try),
			(eq, "$g_killed_first_bandit", 0),
			(ge, "$number_of_bandits_killed_by_player", 2),
			(str_store_string, 1, "str_you_fought_well_at_town_fight_answer"),
		(else_try),
			(str_store_string, 1, "str_you_wounded_at_town_fight_answer"),
		(try_end)
	],
	"{s1}", "merchant_finale",
	[
		(assign, "$dialog_with_merchant_ended", 1)
	]],

	[anyone|plyr, "merchant_quest_4e",
	[],
	"The Heavens alone grant us victory.", "merchant_finale",
	[
		(assign, "$dialog_with_merchant_ended", 1)
	]],

	[anyone|plyr, "merchant_quest_4e",
	[],
	"I'm glad to see that you're alive, too.", "merchant_finale",
	[
		(assign, "$dialog_with_merchant_ended", 1)
	]],

	[anyone, "merchant_finale",
	[
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(str_store_troop_name, 5, ":g_encountered_party_faction_leader")
	],
	"Yes, yes... Now, a couple of my boys have the watch captain pinned down in a back room, with a knife at his throat. I''ll need to go drag him before {s5} and explain what this breach of the peace is all about. You don't need to be part of that, though. I'll tell you what -- if all goes well, I'll meet you in the tavern again shortly, and let you know how it all came out. If you don't see me in the tavern, but instead see my head on a spike over the city gate, I'll assume you know enough to stay out of town for a while and forget this whole episode ever happened. So -- hopefully we'll meet again!", "close_window",
	[
		(assign, "$g_do_one_more_meeting_with_merchant", 2)
	]],

	[anyone, "start",
	[
		(is_between, "$g_talk_troop", "trp_swadian_merchant", "trp_startup_merchants_end"),
		(eq, "$talk_context", 21),
		(neg|check_quest_finished, "qst_collect_men"),
		(eq, "$current_startup_quest_phase", 1),
		(try_begin),
			(eq, "$g_killed_first_bandit", 1),
			(str_store_string, 1, "str_are_you_all_right"),
		(else_try),
			(str_store_string, 1, "str_you_are_awake"),
		(try_end)
	],
	"{s1}", "merchant_quest_1_prologue_1",
	[]],

	[anyone, "merchant_quest_1_prologue_1",
	[],
	"You seem a little disoriented. I do not know who you are or where you're from, and, to tell you the truth, I do not care. I'm just a simple merchant, and if I've learned anything, it's that the merchants are the first to suffer in hard times. So, I am planning to travel to another country, peaceful and rainless, I hope. I have heard that in the Free Cities gold flows from watery fountains, so maybe I'll go try my fortune in Pentos or Volantis.", "merchant_quest_1_prologue_2",
	[]],

	[anyone, "merchant_quest_1_prologue_2",
	[],
	"Anyways, I advise you, before I leave, to do the same and seek your own fortune in other lands. War is sure to engulf the Seven Kingdoms, now that the Hand has been executed, and the people will be nothing more than war fodder. Poverty feeds on the weak, and the strong men abuse the sword and the lance to impose their power and control over the humble ones. In order to trade we must pay heavy taxes in each city, sort out bandits and pirates, and pray that a local lord, ignorant and lazy, do not decide to get half of our merchandise to fund his next feast or buy a new horse for his son.", "merchant_quest_1_prologue_3",
	[]],

	[anyone, "merchant_quest_1_prologue_3",
	[],
	"But I am getting ahead of myself. Take my advice and go across the Narrow Sea. Until a new king has been crowned and anointed by the High Septon, law and unity will remain a vulture's feasting table. So I say, seek your destiny elsewhere.", "merchant_quest_1a",
	[]],

	[anyone|plyr, "merchant_quest_1a",
	[
		(ge, "$cheat_mode", 1)
	],
	"{!}[CHEAT] I have played this before, and would prefer to skip the tutorial.", "dplmc_devel_merchant_quest_skip",
	[]],

	[anyone, "dplmc_devel_merchant_quest_skip",
	[],
	"{!}Okay.  I'll just give you the reward, and we can assume that all of this already happened.", "close_window",
	[
		(troop_add_gold, "trp_player", 100),
		(str_store_troop_name, 9, "$g_talk_troop"),
		(str_store_party_name, 1, "$g_starting_town"),
		(str_store_string, 2, "str_start_up_quest_message_1"),
		(call_script, "script_start_quest", "qst_collect_men", "$g_talk_troop"),
		(party_get_position, 1, "$current_town"),
		(call_script, "script_succeed_quest", "qst_collect_men"),
		(call_script, "script_end_quest", "qst_collect_men"),
		(str_store_party_name, 9, "$current_town"),
		(str_store_string, 2, "str_start_up_quest_message_2"),
		(call_script, "script_start_quest", "qst_learn_where_merchant_brother_is", "$g_talk_troop"),
		(call_script, "script_succeed_quest", "qst_learn_where_merchant_brother_is"),
		(call_script, "script_end_quest", "qst_learn_where_merchant_brother_is"),
		(str_store_troop_name, 10, "$g_talk_troop"),
		(str_store_string, 2, "str_find_the_lair_near_s9_and_free_the_brother_of_the_prominent_s10_merchant"),
		(call_script, "script_start_quest", "qst_save_relative_of_merchant", "$g_talk_troop"),
		(assign, "$relative_of_merchant_is_found", 1),
		(call_script, "script_succeed_quest", "qst_save_relative_of_merchant"),
		(call_script, "script_finish_quest", "qst_save_relative_of_merchant", 100),
		(troop_add_gold, "trp_player", 200),
		(str_store_party_name_link, 9, "$g_starting_town"),
		(str_store_string, 2, "str_save_town_from_bandits"),
		(call_script, "script_start_quest", "qst_save_town_from_bandits", "$g_talk_troop"),
		(assign, "$current_startup_quest_phase", 4),
		(call_script, "script_change_player_relation_with_center", "$g_starting_town", 1),
		(troop_add_gold, "trp_player", 200),
		(call_script, "script_succeed_quest", "qst_save_town_from_bandits"),
		(call_script, "script_end_quest", "qst_save_town_from_bandits"),
		(assign, "$dialog_with_merchant_ended", 1),
		(assign, "$g_do_one_more_meeting_with_merchant", 1),
		(neg|is_between, "$g_encountered_party_faction", "fac_kingdom_1", "fac_kingdoms_end"),
		(store_faction_of_party, "$g_encountered_party_faction", "$g_starting_town")
	]],

	[anyone|plyr, "merchant_quest_1a",
	[],
	"I think I'll stay. War brings opportunity, and I mean to seize my chance! Make a name for myself!", "merchant_quest_1b",
	[
		(assign, "$g_conquest_kings_landing_dragonstone", 0),
		(party_add_particle_system, "p_volcano_rocks_1", "psys_map_village_fire"),
		(party_add_particle_system, "p_volcano_rocks_1", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_1", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_2", "psys_map_village_fire"),
		(party_add_particle_system, "p_volcano_rocks_2", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_2", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_3", "psys_map_village_fire"),
		(party_add_particle_system, "p_volcano_rocks_3", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_3", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_4", "psys_map_village_fire"),
		(party_add_particle_system, "p_volcano_rocks_4", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_4", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_5", "psys_map_village_fire"),
		(party_add_particle_system, "p_volcano_rocks_5", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_5", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_6", "psys_map_village_fire"),
		(party_add_particle_system, "p_volcano_rocks_6", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_6", "psys_map_village_fire_smoke")
	]],

	[anyone|plyr, "merchant_quest_1a",
	[],
	"Go to Essos, what do I care?", "close_window",
	[
		(assign, "$dialog_with_merchant_ended", 1),
		(assign, "$g_conquest_kings_landing_dragonstone", 0),
		(party_add_particle_system, "p_volcano_rocks_1", "psys_map_village_fire"),
		(party_add_particle_system, "p_volcano_rocks_1", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_1", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_2", "psys_map_village_fire"),
		(party_add_particle_system, "p_volcano_rocks_2", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_2", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_3", "psys_map_village_fire"),
		(party_add_particle_system, "p_volcano_rocks_3", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_3", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_4", "psys_map_village_fire"),
		(party_add_particle_system, "p_volcano_rocks_4", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_4", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_5", "psys_map_village_fire"),
		(party_add_particle_system, "p_volcano_rocks_5", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_5", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_6", "psys_map_village_fire"),
		(party_add_particle_system, "p_volcano_rocks_6", "psys_map_village_fire_smoke"),
		(party_add_particle_system, "p_volcano_rocks_6", "psys_map_village_fire_smoke")
	]],

	[anyone, "merchant_quest_1b",
	[],
	"Oh? Well, I suppose you're right at that - but remember this. War also brings maimed men and raped women, dead children and shattered hopes. Still, you have a certain look of ability to you... Take this silver, and remember me, should you ever make something of yourself.", "merchant_quest_by",
	[
		(call_script, "script_troop_add_gold", "trp_player", 200),
		(setup_quest_text, "qst_starting_quest_1_1"),
		(str_store_string, 2, "@The merchant gave you a heavy bag of silver, enough to start your own career as a sellsword, merchant or outlaw, or begin the long and arduous journey towards lordship. You can strike out on your own, or search the town for people who might have need of your services. Talk to septon Garibald in the castle hall of the Weeping Town to learn more."),
		(call_script, "script_start_quest", "qst_starting_quest_1_1", "$g_talk_troop")
	]],

	[anyone|plyr, "merchant_quest_by",
	[],
	"Thank you, my friend. Fair travels to you!", "close_window",
	[
		(assign, "$dialog_with_merchant_ended", 1)
	]],

	[anyone, "start",
	[
		(this_or_next|is_between, "$g_talk_troop", "trp_skill_monk", "trp_skill_priest"),
		(this_or_next|is_between, "$g_talk_troop", "trp_skill_hunter", "trp_skill_scout"),
		(is_between, "$g_talk_troop", "trp_skill_scout", "trp_skill_monk"),
		(party_get_slot, ":current_town_444", "$current_town", 444),
		(party_get_slot, ":current_town_445", "$current_town", 445),
		(gt, ":current_town_445", 0),
		(store_sub, reg3, ":current_town_445", 1),
		(store_sub, reg4, reg3, 1),
		(call_script, "script_game_get_join_cost", ":current_town_444"),
		(assign, ":var_3", reg0),
		(store_mul, reg5, ":current_town_445", reg0),
		(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
		(val_min, ":current_town_445", ":free_companions_capacity_main_party"),
		(store_troop_gold, ":troop_gold_player", "trp_player"),
		(try_begin),
			(gt, ":var_3", 0),
			(val_div, ":troop_gold_player", ":var_3"),
			(val_min, ":current_town_445", ":troop_gold_player"),
		(try_end),
		(assign, "$temp", ":current_town_445"),
		(try_begin),
			(eq, "$g_talk_troop", "trp_skill_merchant"),
			(str_store_string, 17, "@Do you have a need for merchants? {reg3?Me and {reg4?{reg3} of my mates:one of my mates} are:I am} looking for a master. We'll join you for {reg5} coins."),
		(else_try),
			(eq, "$g_talk_troop", "trp_skill_monk"),
			(str_store_string, 17, "@Do you have a need for holy men? {reg3?Me and {reg4?{reg3} of my mates:one of my mates} are:I am} looking for a master. We'll join you for {reg5} coins."),
		(else_try),
			(str_store_string, 17, "@Do you have a need for troops? {reg3?Me and {reg4?{reg3} of my mates:one of my mates} are:I am} looking for a master. We'll join you for {reg5} coins."),
		(try_end)
	],
	"{s17}", "economy_troops_talk",
	[]],

	[anyone, "start",
	[],
	"Anything else?", "economy_after_recruited",
	[]],

	[anyone|plyr, "economy_after_recruited",
	[],
	"Make your preparations. We'll be moving at dawn.", "economy_after_recruited_2",
	[]],

	[anyone|plyr, "economy_after_recruited",
	[],
	"Take your time. We'll be staying in this town for a while.", "economy_after_recruited_2",
	[]],

	[anyone|plyr, "economy_after_recruited_2",
	[],
	"Of course, master.", "close_window",
	[]],

	[anyone|plyr, "economy_troops_talk",
	[
		(try_begin),
			(party_get_slot, ":current_town_444", "$current_town", 444),
			(eq, "$g_talk_troop", ":current_town_444"),
			(party_get_slot, ":current_town_445", "$current_town", 445),
		(try_end),
		(eq, ":current_town_445", "$temp"),
		(call_script, "script_game_get_join_cost", ":current_town_444"),
		(store_mul, reg5, "$temp", reg0)
	],
	"All right. I will hire you. Here is {reg5} coins.", "economy_talk_hire",
	[]],

	[anyone, "economy_talk_hire",
	[
		(store_random_in_range, ":random_in_range_0_4", 0, 4),
		(try_begin),
			(eq, ":random_in_range_0_4", 0),
			(gt, "$temp", 1),
			(str_store_string, 17, "@You chose well. My lads know how to keep their word and earn their pay."),
		(else_try),
			(eq, ":random_in_range_0_4", 1),
			(eq, "$g_talk_troop", "trp_skill_merchant"),
			(str_store_string, 17, "@Well done. Keep the money and wine coming our way, and there's no deal in the world you cant make."),
		(else_try),
			(eq, ":random_in_range_0_4", 2),
			(eq, "$g_talk_troop", "trp_skill_merchant"),
			(str_store_string, 17, "@We are at your service. Point us in the direction of a market, and we'll do the rest."),
		(else_try),
			(eq, "$g_talk_troop", "trp_skill_merchant"),
			(str_store_string, 17, "@You wont find better merchants in all of the world."),
		(else_try),
			(str_store_string, 17, "@You won't regret this."),
		(try_end)
	],
	"{s17}", "close_window",
	[
		(try_begin),
			(party_get_slot, ":current_town_444", "$current_town", 444),
			(eq, "$g_talk_troop", ":current_town_444"),
			(assign, ":var_2", 445),
		(try_end),
		(call_script, "script_game_get_join_cost", ":current_town_444"),
		(store_mul, ":value", "$temp", reg0),
		(troop_remove_gold, "trp_player", ":value"),
		(party_add_members, "p_main_party", ":current_town_444", "$temp"),
		(party_set_slot, "$current_town", ":var_2", 0)
	]],

	[anyone|plyr, "economy_troops_talk",
	[
		(eq, "$temp", 0),
		(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
		(ge, ":free_companions_capacity_main_party", 1)
	],
	"That sounds good. But I can't afford to hire any more men right now.", "economy_cant_lead",
	[]],

	[anyone, "economy_cant_lead",
	[
		(eq, "$g_talk_troop", "trp_skill_merchant")
	],
	"That's a pity. Well, {reg3?we will:I will} be looking for deals around here for a while, if you reconsider our business proposal.", "close_window",
	[]],

	[anyone, "economy_cant_lead",
	[],
	"Maybe another time then.", "close_window",
	[]],

	[anyone|plyr, "economy_troops_talk",
	[
		(eq, "$temp", 0),
		(party_get_free_companions_capacity, ":free_companions_capacity_main_party", "p_main_party"),
		(eq, ":free_companions_capacity_main_party", 0)
	],
	"That sounds good. But I can't lead any more men right now.", "economy_cant_lead",
	[]],

	[anyone|plyr, "economy_troops_talk",
	[],
	"Sorry. I don't need any other men right now.", "close_window",
	[]],

	[anyone, "start",
	[],
	"Surrender or die. Make your choice", "battle_reason_stated",
	[]],

	[anyone|plyr, "battle_reason_stated",
	[],
	"I am not afraid of you. I will fight.", "close_window",
	[
		(encounter_attack)
	]],

	[anyone, "start",
	[],
	"Hello. What can I do for you?", "free",
	[]],

	[anyone|plyr, "free",
	[
		(neg|in_meta_mission)
	],
	"Tell me about yourself", "view_char_requested",
	[]],

	[anyone, "view_char_requested",
	[],
	"Very well, listen to this...", "view_char",
	[
		(change_screen_view_character)
	]],

	[anyone, "view_char",
	[],
	"Anything else?", "free",
	[]],

	[anyone|plyr, "end",
	[],
	"[Done]", "close_window",
	[]],

	[anyone|plyr, "start",
	[],
	"Drop your weapons and surrender if you want to live", "threaten_1",
	[]],

	[anyone, "threaten_1",
	[],
	"We will fight you first", "end",
	[
		(encounter_attack)
	]],

	[anyone, "member_direct_campaign",
	[],
	"Yes, {my lord/my lady}. Which message do you wish to send to the vassals?", "member_direct_campaign_choice",
	[]],

	[anyone|plyr, "member_direct_campaign_choice",
	[
		(this_or_next|neg|faction_slot_ge, "$players_kingdom", 8, "trp_npc1"),
		(eq, "$players_kingdom", "fac_player_supporters_faction"),
		(this_or_next|faction_slot_eq, "$players_kingdom", slot_faction_ai_state, 0),
		(faction_slot_eq, "$players_kingdom", slot_faction_ai_state, 6)
	],
	"I want to start a new campaign. Let us assemble the army here.", "member_direct_campaign_call_to_arms_verify",
	[
		(faction_get_slot, ":players_kingdom_marshall", "$players_kingdom", slot_faction_marshall),
		(try_begin),
			(ge, ":players_kingdom_marshall", 0),
			(troop_get_slot, ":players_kingdom_marshall_leaded_party", ":players_kingdom_marshall", slot_troop_leaded_party),
			(party_is_active, ":players_kingdom_marshall_leaded_party"),
			(party_set_marshall, ":players_kingdom_marshall_leaded_party", 0),
		(try_end),
		(faction_set_slot, "$players_kingdom", slot_faction_marshall, "trp_player")
	]],

	[anyone|plyr, "member_direct_campaign_choice",
	[
		(faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_ai_state, 0),
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_ai_state, 6)
	],
	"I want to end the campaign and let everyone return home.", "member_give_order_disband_army_verify",
	[]],

	[anyone|plyr, "member_direct_campaign_choice",
	[
		(faction_slot_eq, "$players_kingdom", slot_faction_marshall, "trp_player"),
		(neg|faction_slot_eq, "$players_kingdom", slot_faction_ai_state, 6),
		(check_quest_active, "qst_organize_feast"),
		(quest_get_slot, ":organize_feast_target_center", "qst_organize_feast", slot_quest_target_center),
		(store_faction_of_party, ":faction_of_party_organize_feast_target_center", ":organize_feast_target_center"),
		(eq, ":faction_of_party_organize_feast_target_center", "$players_kingdom"),
		(str_store_party_name, 4, ":organize_feast_target_center")
	],
	"I wish to invite the vassals of the realm to a feast at {s4}.", "member_give_order_invite_feast_verify",
	[]],

	[anyone|plyr, "member_direct_campaign_choice",
	[],
	"Never mind", "member_pretalk",
	[]],

	[anyone, "member_give_order_invite_feast_verify",
	[],
	"You wish to invite the lords of the realm to a feast?", "member_give_order_invite_feast_verify_2",
	[]],

	[anyone|plyr, "member_give_order_invite_feast_verify_2",
	[],
	"Yes. It is time for us to strengthen the bonds that bring us together.", "member_give_order_invite_feast",
	[]],

	[anyone|plyr, "member_give_order_invite_feast_verify_2",
	[],
	"On second thought, this is perhaps not the time.", "member_pretalk",
	[]],

	[anyone, "member_give_order_invite_feast",
	[
		(quest_get_slot, ":organize_feast_target_center", "qst_organize_feast", slot_quest_target_center),
		(str_store_party_name, 4, ":organize_feast_target_center")
	],
	"All right then. I shall dispatch messengers informing the lords of the realm of your feast at {s4}.", "member_pretalk",
	[
		(quest_get_slot, ":organize_feast_target_center", "qst_organize_feast", slot_quest_target_center),
		(assign, "$player_marshal_ai_state", 6),
		(assign, "$player_marshal_ai_object", ":organize_feast_target_center"),
		(call_script, "script_decide_faction_ai", "$players_kingdom"),
		(assign, "$g_recalculate_ais", 1),
		(str_store_party_name, 4, ":organize_feast_target_center")
	]],

	[anyone, "member_direct_campaign_call_to_arms_verify",
	[],
	"You wish to summon all lords for a new campaign?", "member_give_order_call_to_arms_verify_2",
	[]],

	[anyone|plyr, "member_give_order_call_to_arms_verify_2",
	[],
	"Yes. We must gather all our forces before we march on the enemy.", "member_give_order_call_to_arms",
	[]],

	[anyone|plyr, "member_give_order_call_to_arms_verify_2",
	[],
	"On second thought, it won't be necessary to summon everyone.", "member_pretalk",
	[]],

	[anyone, "member_give_order_call_to_arms",
	[],
	"All right then. I will send messengers and tell everyone to come here.", "member_pretalk",
	[
		(assign, "$player_marshal_ai_state", 1),
		(assign, "$player_marshal_ai_object", "p_main_party"),
		(call_script, "script_decide_faction_ai", "$players_kingdom"),
		(assign, "$g_recalculate_ais", 1)
	]],

	[anyone, "member_give_order_disband_army_verify",
	[],
	"You want to end the current campaign and release all lords from duty?", "member_give_order_disband_army_2",
	[]],

	[anyone|plyr, "member_give_order_disband_army_2",
	[],
	"Yes. We no longer need all our forces here.", "member_give_order_disband_army",
	[]],

	[anyone|plyr, "member_give_order_disband_army_2",
	[],
	"On second thought, it will be better to stay together for now.", "member_pretalk",
	[]],

	[anyone, "member_give_order_disband_army",
	[],
	"All right. I will let everyone know that they are released from duty.", "member_pretalk",
	[
		(assign, "$player_marshal_ai_state", 0),
		(assign, "$player_marshal_ai_object", -1),
		(call_script, "script_decide_faction_ai", "$players_kingdom"),
		(assign, "$g_recalculate_ais", 1)
	]],

	[anyone, "mayor_wealth_comparison_1",
	[
		(assign, ":value", "$g_encountered_party"),
		(assign, ":var_2", 0),
		(assign, ":var_3", 0),
		(party_get_slot, ":g_encountered_party_town_prosperity", "$g_encountered_party", slot_town_prosperity),
		(party_get_slot, ":g_encountered_party_town_prosperity_2", "$g_encountered_party", slot_town_prosperity),
		(try_for_range, ":party", "p_town_1", "p_castle_1"),
			(neq, ":party", "$g_encountered_party"),
			(party_get_slot, ":party_town_prosperity", ":party", slot_town_prosperity),
			(try_begin),
				(gt, ":party_town_prosperity", ":g_encountered_party_town_prosperity"),
				(val_add, ":var_3", 1),
				(assign, ":value", ":party"),
				(assign, ":g_encountered_party_town_prosperity", ":party_town_prosperity"),
			(else_try),
				(gt, ":party_town_prosperity", ":g_encountered_party_town_prosperity_2"),
				(val_add, ":var_3", 1),
			(else_try),
				(val_add, ":var_2", 1),
			(try_end),
		(try_end),
		(assign, reg4, ":var_3"),
		(assign, reg5, ":var_2"),
		(str_store_party_name, 5, "$g_encountered_party"),
		(str_store_party_name, 4, ":value")
	],
	"Overall, the wealthiest town in the world is known to be {s4}. Here in {s5}, we are poorer than {reg4} towns, and richer than {reg5}.", "mayor_wealth_comparison_2",
	[]],

	[anyone, "mayor_wealth_comparison_2",
	[
		(assign, ":value", "$g_encountered_party"),
		(assign, ":var_2", 0),
		(assign, ":var_3", 0),
		(assign, ":var_4", 0),
		(try_for_range, ":item", "itm_trade_spice", "itm_trade_dummy01"),
			(call_script, "script_center_get_production", "$g_encountered_party", ":item"),
			(val_add, ":var_4", reg0),
		(try_end),
		(assign, ":value_2", ":var_4"),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(assign, reg4, ":var_4"),
			(str_store_party_name, 4, "$g_encountered_party"),
			(display_message, "@{!}DEBUG -- Total production for {s4}: {reg4}"),
		(try_end),
		(try_for_range, ":party", "p_town_1", "p_castle_1"),
			(neq, ":party", "$g_encountered_party"),
			(assign, ":var_8", 0),
			(try_for_range, ":item", "itm_trade_spice", "itm_trade_dummy01"),
				(call_script, "script_center_get_production", ":party", ":item"),
				(val_add, ":var_8", reg0),
			(try_end),
			(try_begin),
				(ge, "$cheat_mode", 1),
				(assign, reg4, ":var_8"),
				(str_store_party_name, 4, ":party"),
				(display_message, "@{!}DEBUG -- Total production for {s4}: {reg4}"),
			(try_end),
			(try_begin),
				(gt, ":var_8", ":value_2"),
				(val_add, ":var_3", 1),
				(assign, ":value", ":party"),
				(assign, ":value_2", ":var_8"),
			(else_try),
				(gt, ":var_8", ":var_4"),
				(val_add, ":var_3", 1),
			(else_try),
				(val_add, ":var_2", 1),
			(try_end),
		(try_end),
		(assign, reg4, ":var_3"),
		(assign, reg5, ":var_2"),
		(str_store_party_name, 5, "$g_encountered_party"),
		(str_store_party_name, 4, ":value")
	],
	"In terms of local industry, the most productive town in the world is known to be {s4}. Here in {s5}, we produce less than {reg4} towns, and produce more than {reg5}. Production is of course affected by the supply of raw materials, as well as by the overall prosperity of the town.", "mayor_wealth_comparison_3",
	[]],

	[anyone, "mayor_wealth_comparison_3",
	[
		(assign, ":value", "$g_encountered_party"),
		(assign, ":var_2", 0),
		(assign, ":var_3", 0),
		(try_for_range, ":party", "p_town_1", "p_castle_1"),
			(party_set_slot, ":party", 265, 0),
		(try_end),
		(try_for_range, ":party_2", "p_village_1", "p_salt_mine"),
			(assign, ":var_6", 0),
			(try_for_range, ":item", "itm_trade_spice", "itm_trade_dummy01"),
				(call_script, "script_center_get_production", ":party_2", ":item"),
				(val_add, ":var_6", reg0),
			(try_end),
			(party_get_slot, ":party_2_village_market_town", ":party_2", slot_village_market_town),
			(party_get_slot, ":party_2_village_market_town_265", ":party_2_village_market_town", 265),
			(val_add, ":party_2_village_market_town_265", ":var_6"),
			(party_set_slot, ":party_2_village_market_town", 265, ":party_2_village_market_town_265"),
		(try_end),
		(party_get_slot, ":g_encountered_party_265", "$g_encountered_party", 265),
		(assign, ":value_2", ":g_encountered_party_265"),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(assign, reg4, ":g_encountered_party_265"),
			(str_store_party_name, 4, "$g_encountered_party"),
			(display_message, "@{!}DEBUG -- Total rural production for {s4} region: {reg4}"),
		(try_end),
		(try_for_range, ":party_3", "p_town_1", "p_castle_1"),
			(neq, ":party_3", "$g_encountered_party"),
			(party_get_slot, ":party_3_265", ":party_3", 265),
			(try_begin),
				(ge, "$cheat_mode", 1),
				(assign, reg4, ":party_3_265"),
				(str_store_party_name, 4, ":party_3"),
				(display_message, "@{!}DEBUG -- Total rural production for {s4} region: {reg4}"),
			(try_end),
			(try_begin),
				(gt, ":party_3_265", ":value_2"),
				(val_add, ":var_3", 1),
				(assign, ":value", ":party_3"),
				(assign, ":value_2", ":party_3_265"),
			(else_try),
				(gt, ":party_3_265", ":g_encountered_party_265"),
				(val_add, ":var_3", 1),
			(else_try),
				(val_add, ":var_2", 1),
			(try_end),
		(try_end),
		(assign, reg4, ":var_3"),
		(assign, reg5, ":var_2"),
		(str_store_party_name, 5, "$g_encountered_party"),
		(str_store_party_name, 4, ":value")
	],
	"In terms of the output of the surrounding villages, the town of {s4} is the richest in the known world. Here in {s5}, the villages produce less than the hinterland around {reg4} towns, and produce more than {reg5}. The wealth of a town's hinterland, of course, is heavily dependent on the tides of war. Looting and pillage, and shifts in territory, can make a major impact.", "mayor_wealth_comparison_4",
	[]],

	[anyone, "mayor_wealth_comparison_4",
	[
		(assign, ":value", "$g_encountered_party"),
		(assign, ":var_2", 0),
		(assign, ":var_3", 0),
		(try_for_range, ":party", "p_town_1", "p_castle_1"),
			(party_set_slot, ":party", 265, 0),
		(try_end),
		(try_for_range, ":number", 0, "$num_log_entries"),
			(store_sub, ":value_2", "$num_log_entries", ":number"),
			(troop_slot_eq, "trp_log_array_entry_type", ":value_2", 5),
			(troop_get_slot, ":log_array_entry_time_value_2", "trp_log_array_entry_time", ":value_2"),
			(store_current_hours, ":current_hours"),
			(store_sub, ":value_3", ":current_hours", ":log_array_entry_time_value_2"),
			(lt, ":value_3", 1344),
			(troop_get_slot, ":log_array_center_object_value_2", "trp_log_array_center_object", ":value_2"),
			(is_between, ":log_array_center_object_value_2", "p_town_1", "p_castle_1"),
			(troop_get_slot, ":log_array_troop_object_value_2", "trp_log_array_troop_object", ":value_2"),
			(party_get_slot, ":log_array_troop_object_value_2_265", ":log_array_troop_object_value_2", 265),
			(val_add, ":log_array_troop_object_value_2_265", 1),
			(party_set_slot, ":log_array_troop_object_value_2", 265, ":log_array_troop_object_value_2_265"),
		(try_end),
		(party_get_slot, ":g_encountered_party_265", "$g_encountered_party", 265),
		(assign, ":value_4", ":g_encountered_party_265"),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(assign, reg4, ":g_encountered_party_265"),
			(str_store_party_name, 4, "$g_encountered_party"),
			(display_message, "@{!}DEBUG -- Total trade for {s4}: {reg4}"),
		(try_end),
		(try_for_range, ":party_2", "p_town_1", "p_castle_1"),
			(neq, ":party_2", "$g_encountered_party"),
			(party_get_slot, ":party_2_265", ":party_2", 265),
			(try_begin),
				(ge, "$cheat_mode", 1),
				(assign, reg4, ":party_2_265"),
				(str_store_party_name, 4, ":party_2"),
				(display_message, "@{!}DEBUG -- Total trade for {s4}: {reg4}"),
			(try_end),
			(try_begin),
				(gt, ":party_2_265", ":value_4"),
				(val_add, ":var_3", 1),
				(assign, ":value", ":party_2"),
				(assign, ":value_4", ":party_2_265"),
			(else_try),
				(gt, ":party_2_265", ":g_encountered_party_265"),
				(val_add, ":var_3", 1),
			(else_try),
				(val_add, ":var_2", 1),
			(try_end),
		(try_end),
		(assign, reg4, ":var_3"),
		(assign, reg5, ":var_2"),
		(str_store_party_name, 5, "$g_encountered_party"),
		(str_store_party_name, 4, ":value")
	],
	"In terms of trade, the town of {s4} is believed to have received the most visits from caravans over the past few months. Here in {s5}, we are less visited than {reg4} towns, and more visited than {reg5}. ", "mayor_wealth_comparison_5",
	[]],

	[anyone, "mayor_wealth_comparison_5",
	[
		(assign, ":value", "$g_encountered_party"),
		(assign, ":var_2", 0),
		(assign, ":var_3", 0),
		(try_for_range, ":party", "p_town_1", "p_castle_1"),
			(party_set_slot, ":party", 265, 0),
		(try_end),
		(try_for_range, ":number", 0, "$num_log_entries"),
			(store_sub, ":value_2", "$num_log_entries", ":number"),
			(troop_slot_eq, "trp_log_array_entry_type", ":value_2", 3),
			(troop_get_slot, ":log_array_entry_time_value_2", "trp_log_array_entry_time", ":value_2"),
			(store_current_hours, ":current_hours"),
			(store_sub, ":value_3", ":current_hours", ":log_array_entry_time_value_2"),
			(lt, ":value_3", 1344),
			(troop_get_slot, ":log_array_center_object_value_2", "trp_log_array_center_object", ":value_2"),
			(troop_get_slot, ":log_array_troop_object_value_2", "trp_log_array_troop_object", ":value_2"),
			(try_begin),
				(is_between, ":log_array_troop_object_value_2", "p_town_1", "p_castle_1"),
				(party_get_slot, ":log_array_troop_object_value_2_265", ":log_array_troop_object_value_2", 265),
				(val_add, ":log_array_troop_object_value_2_265", 1),
				(party_set_slot, ":log_array_troop_object_value_2", 265, ":log_array_troop_object_value_2_265"),
			(try_end),
			(try_begin),
				(is_between, ":log_array_center_object_value_2", "p_town_1", "p_castle_1"),
				(party_get_slot, ":log_array_troop_object_value_2_265", ":log_array_center_object_value_2", 265),
				(val_add, ":log_array_troop_object_value_2_265", 1),
				(party_set_slot, ":log_array_center_object_value_2", 265, ":log_array_troop_object_value_2_265"),
			(try_end),
		(try_end),
		(party_get_slot, ":g_encountered_party_265", "$g_encountered_party", 265),
		(assign, ":value_4", ":g_encountered_party_265"),
		(try_begin),
			(ge, "$cheat_mode", 1),
			(assign, reg4, ":g_encountered_party_265"),
			(str_store_party_name, 4, "$g_encountered_party"),
			(display_message, "@{!}DEBUG -- Total attacks for {s4}: {reg4}"),
		(try_end),
		(try_for_range, ":party_2", "p_town_1", "p_castle_1"),
			(neq, ":party_2", "$g_encountered_party"),
			(party_get_slot, ":party_2_265", ":party_2", 265),
			(try_begin),
				(ge, "$cheat_mode", 1),
				(assign, reg4, ":party_2_265"),
				(str_store_party_name, 4, ":party_2"),
				(display_message, "@{!}DEBUG -- Total attacks for {s4}: {reg4}"),
			(try_end),
			(try_begin),
				(gt, ":party_2_265", ":value_4"),
				(val_add, ":var_3", 1),
				(assign, ":value", ":party_2"),
				(assign, ":value_4", ":party_2_265"),
			(else_try),
				(gt, ":party_2_265", ":g_encountered_party_265"),
				(val_add, ":var_3", 1),
			(else_try),
				(val_add, ":var_2", 1),
			(try_end),
		(try_end),
		(assign, reg4, ":var_3"),
		(assign, reg5, ":var_2"),
		(str_store_party_name, 5, "$g_encountered_party"),
		(str_store_party_name, 4, ":value")
	],
	"In terms of attacks on travellers, the town of {s4} is believed to be the most dangerous. Here in {s5}, we are less afflicted by bandits and raiders than {reg4} towns, and more afflicted than {reg5}. ", "mayor_pretalk",
	[]],

	[anyone|plyr, "lord_ask_leave_service_verify_again",
	[
		(neg|troop_slot_eq, "trp_player", slot_troop_spouse, "$g_talk_troop"),
		(neg|troop_slot_eq, "$g_talk_troop", slot_troop_spouse, "trp_player"),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_leader, "trp_player"),
		(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$g_talk_troop_faction"),
		(lt, reg0, 50),
		(assign, ":value", "p_village_1"),
		(try_for_range, ":party", "p_town_1", ":value"),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(assign, ":value", ":party"),
		(try_end),
		(is_between, ":value", "p_town_1", "p_village_1")
	],
	"I have no intention of losing my lands, {s65}.", "dplmc_lord_ask_leave_service_rebellion",
	[]],

	[anyone, "dplmc_lord_ask_leave_service_rebellion",
	[
		(ge, "$g_talk_troop_relation", 15)
	],
	"Hrmph. Now do not be hasty with such words, {playername}. I deserve more respect than that, I think. Those lands belong to me and my heirs as you swore. If you continue down this route you will do me great offense, and there is no need for this to come to blows.", "dplmc_lord_ask_leave_service_rebellion_verify",
	[]],

	[anyone, "dplmc_lord_ask_leave_service_rebellion",
	[],
	"You've grown rash, {playername}. Your oath binds you to me and you govern what you do at my will. Think about what it is you are saying, as it is far from wise and will end poorly for you. You'd do well to reconsider.", "dplmc_lord_ask_leave_service_rebellion_verify",
	[]],

	[anyone|plyr, "dplmc_lord_ask_leave_service_rebellion_verify",
	[],
	"You are right, {s65}. The lands are yours, but still I must go.", "lord_ask_leave_service_3",
	[]],

	[anyone|plyr, "dplmc_lord_ask_leave_service_rebellion_verify",
	[],
	"My blood and sweat earned those lands, not yours. They are mine.", "dplmc_lord_ask_leave_rebellion_confirm",
	[
		(assign, ":var_1", 0),
		(try_for_range, ":party", "p_town_1", "p_village_1"),
			(party_slot_eq, ":party", slot_town_lord, "trp_player"),
			(val_add, ":var_1", -10),
		(try_end),
		(store_add, ":value", "$g_talk_troop_relation", 5),
		(val_div, ":value", -10),
		(val_min, ":value", 0),
		(try_begin),
			(assign, ":value_2", 0),
			(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
				(faction_slot_eq, ":faction", slot_faction_state, 0),
				(neq, ":faction", "$g_talk_troop_faction"),
				(store_relation, ":relation_faction_g_talk_troop_faction", ":faction", "$g_talk_troop_faction"),
				(lt, ":relation_faction_g_talk_troop_faction", 0),
				(assign, ":value_2", 1),
			(try_end),
			(gt, ":value_2", 0),
			(val_add, ":value", -5),
		(try_end),
		(val_sub, ":value", 10),
		(call_script, "script_dplmc_center_point_calc", "$g_talk_troop_faction", "trp_player", "$g_talk_troop", 3),
		(assign, ":var_7", reg0),
		(assign, ":var_8", reg1),
		(assign, ":var_9", reg2),
		(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
		(troop_get_slot, ":g_talk_troop_renown", "$g_talk_troop", slot_troop_renown),
		(assign, ":value_3", 0),
		(try_begin),
			(eq, ":var_8", 0),
			(try_begin),
				(store_mul, reg0, ":var_7", 3),
				(val_div, reg0, 4),
				(ge, ":player_renown", reg0),
				(assign, ":value_3", 1),
				(val_add, ":value", 5),
			(try_end),
		(else_try),
			(gt, ":var_8", 0),
			(store_div, ":value_4", ":player_renown", ":var_8"),
			(store_mul, reg0, ":var_7", 5),
			(val_div, reg0, 4),
			(ge, ":value_4", reg0),
			(assign, ":value_3", 1),
			(val_add, ":value", 5),
		(else_try),
			(store_mul, reg0, ":var_7", 3),
			(val_div, reg0, 4),
			(ge, ":value_4", reg0),
			(store_mul, reg0, ":g_talk_troop_renown", 5),
			(val_div, reg0, 4),
			(gt, ":var_9", 0),
			(val_div, reg0, ":var_9"),
			(ge, ":value_4", reg0),
			(assign, ":value_3", 1),
		(try_end),
		(call_script, "script_change_player_relation_with_troop", "$g_talk_troop", ":var_1"),
		(val_min, ":value", -10),
		(call_script, "script_change_player_honor", ":value"),
		(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
			(troop_slot_eq, ":troop", slot_troop_occupation, 2),
			(neq, ":troop", "$g_talk_troop"),
			(neq, ":troop", "trp_kingdom_heroes_including_player_begin"),
			(store_faction_of_troop, ":faction", ":troop"),
			(eq, ":faction", "$g_talk_troop_faction"),
			(assign, ":var_15", 0),
			(call_script, "script_troop_get_player_relation", ":troop"),
			(assign, ":var_16", reg0),
			(call_script, "script_troop_get_relation_with_troop", ":troop", "$g_talk_troop"),
			(assign, ":var_17", reg0),
			(troop_get_slot, ":troop_lord_reputation_type", ":troop", slot_lord_reputation_type),
			(call_script, "script_dplmc_get_troop_morality_value", ":troop", 4),
			(assign, ":var_19", reg0),
			(assign, ":var_20", 0),
			(try_for_range, ":party_2", "p_village_1", "p_salt_mine"),
				(party_slot_eq, ":party_2", slot_town_lord, ":troop"),
				(party_get_slot, ":party_2_village_bound_center", ":party_2", slot_village_bound_center),
				(ge, ":party_2_village_bound_center", 1),
				(party_slot_eq, ":party_2_village_bound_center", slot_town_lord, "trp_player"),
				(val_add, ":var_20", 1),
			(try_end),
			(try_begin),
				(this_or_next|ge, ":var_19", 1),
				(this_or_next|eq, ":troop_lord_reputation_type", 7),
				(eq, ":troop_lord_reputation_type", 25),
				(ge, ":var_17", 5),
				(val_sub, ":var_15", 1),
			(else_try),
				(this_or_next|lt, ":var_19", 0),
				(this_or_next|eq, ":troop_lord_reputation_type", 5),
				(this_or_next|eq, ":troop_lord_reputation_type", 8),
				(eq, ":troop_lord_reputation_type", 24),
				(ge, ":var_17", 25),
				(val_sub, ":var_15", 1),
			(else_try),
				(ge, ":var_17", 15),
				(val_sub, ":var_15", 1),
			(try_end),
			(try_begin),
				(lt, ":var_15", 0),
				(ge, ":var_17", ":var_16"),
				(val_sub, ":var_15", 1),
			(try_end),
			(try_begin),
				(ge, ":value_3", 1),
				(try_begin),
					(ge, ":var_19", 0),
					(neq, ":troop_lord_reputation_type", 5),
					(neq, ":troop_lord_reputation_type", 3),
					(neq, ":troop_lord_reputation_type", 2),
					(neq, ":troop_lord_reputation_type", 4),
					(neq, ":troop_lord_reputation_type", 24),
					(ge, ":var_16", 0),
					(val_add, ":var_15", ":value_3"),
				(else_try),
					(ge, ":var_16", 20),
					(val_add, ":var_15", ":value_3"),
				(try_end),
			(try_end),
			(try_begin),
				(ge, ":var_20", 1),
				(this_or_next|eq, ":troop_lord_reputation_type", 10),
				(this_or_next|eq, ":troop_lord_reputation_type", 24),
				(this_or_next|eq, ":troop_lord_reputation_type", 2),
				(this_or_next|eq, ":troop_lord_reputation_type", 3),
				(this_or_next|eq, ":troop_lord_reputation_type", 4),
				(this_or_next|eq, ":troop_lord_reputation_type", 5),
				(eq, ":troop_lord_reputation_type", 1),
				(val_sub, ":var_15", ":var_20"),
				(val_sub, ":var_15", ":var_20"),
			(else_try),
				(ge, ":var_20", 1),
				(lt, ":troop_lord_reputation_type", 21),
				(neq, ":troop_lord_reputation_type", 6),
				(val_sub, ":var_15", ":var_20"),
			(try_end),
			(lt, ":var_15", 0),
			(call_script, "script_change_player_relation_with_troop", ":troop", ":var_15"),
		(try_end)
	]],

	[anyone, "dplmc_lord_ask_leave_rebellion_confirm",
	[
		(ge, "$g_talk_troop_relation", 25)
	],
	"You disappoint me greatly, {playername}. You may have once had my confidence, but this is beyond reason. Do not doubt that I will defend my house's honor from your insult. This is war between us.", "dplmc_lord_ask_leave_rebellion_confirm_final",
	[
		(call_script, "script_player_leave_faction", 0),
		(call_script, "script_activate_player_faction", "trp_player")
	]],

	[anyone, "dplmc_lord_ask_leave_rebellion_confirm",
	[],
	"I should have seen your treachery coming. I must be growing soft to have been fool enough to miss your schemes. No matter. Your time will yet come, {playername}. Justice is switftest on a field of battle.", "dplmc_lord_ask_leave_rebellion_confirm_final",
	[
		(call_script, "script_player_leave_faction", 0),
		(call_script, "script_activate_player_faction", "trp_player")
	]],

	[anyone|plyr, "dplmc_lord_ask_leave_rebellion_confirm_final",
	[],
	"I hold you in no ill-esteem, {s65}. I do only what is just.", "dplmc_lord_ask_leave_rebellion_end",
	[]],

	[anyone|plyr, "dplmc_lord_ask_leave_rebellion_confirm_final",
	[],
	"We all do what we must. Good bye.", "dplmc_lord_ask_leave_rebellion_end",
	[]],

	[anyone|plyr, "dplmc_lord_ask_leave_rebellion_confirm_final",
	[],
	"Then I await the day we meet in battle.", "dplmc_lord_ask_leave_rebellion_end",
	[]],

	[anyone, "dplmc_lord_ask_leave_rebellion_end",
	[
		(ge, "$g_talk_troop_relation", 25),
		(str_store_faction_name, 1, "$g_talk_troop_faction")
	],
	"This is a dark day, {playername}. It will be marked and rued throughout the {s1}. Your treachery will not be soon forgotten. It would be best if you left quickly.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "dplmc_lord_ask_leave_rebellion_end",
	[],
	"You are not the same {man/woman} I took as my vassal, {playername}. Be gone from my sight before I end this now.", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "free",
	[
		(in_meta_mission)
	],
	" Good-bye.", "close_window",
	[]],

	[anyone|plyr, "free",
	[
		(neg|in_meta_mission)
	],
	" [Leave]", "close_window",
	[]],

	[anyone, "event_triggered",
	[
		(store_conversation_troop, "$g_talk_troop"),
		(eq, "$g_talk_troop", reg20),
		(eq, "$g_upgrade_talk", 1),
		(troop_get_type, reg65, "trp_player"),
		(str_store_string, 65, "@{reg65?my Lady:my Lord}"),
		(str_store_troop_name, 21, reg21)
	],
	"Yes, {s65}?", "upgrade_talk",
	[]],

	[anyone|plyr, "upgrade_talk",
	[],
	"I have seen you fight well in battles, soldier.", "upgrade_talk_1",
	[]],

	[anyone, "upgrade_talk_1",
	[],
	"I only do my duty to {s65}, my lord.", "upgrade_talk_2",
	[]],

	[anyone|plyr, "upgrade_talk_2",
	[],
	"And well, too. The only time I've heard someone with such skills in battle, it has been in sagas. You are a hero!", "upgrade_talk_3a",
	[]],

	[anyone|plyr, "upgrade_talk_2",
	[],
	"I just wanted you to know that I take notice in such skills in battle. Now fall back in line!", "upgrade_talk_3b",
	[]],

	[anyone, "upgrade_talk_3a",
	[],
	"You honour me with your words. I will do my utter best to honour them.", "upgrade_talk_4a",
	[]],

	[anyone|plyr, "upgrade_talk_4a",
	[],
	"From now on you shall be remembered as a {s21}", "upgrade_talk_5",
	[]],

	[anyone, "upgrade_talk_5",
	[
		(call_script, "script_upgrade_troop_to_hero", reg20, reg21)
	],
	"I will defend my new title to my death, and I will not let you down. I promise you this; The blood on my steel will never dry!", "close_window",
	[]],

	[anyone, "upgrade_talk_3b",
	[],
	"Yes, {s65}", "close_window",
	[]],

	[anyone|plyr, "merchant_talk",
	[],
	"I'd like to see your wares.", "merchant_trade_request",
	[]],

	[anyone, "merchant_trade_request",
	[
		(lt, "$g_encountered_party_relation", 0)
	],
	"You must be joking! The crown would not take kindly to us trading with the likes of you.", "merchant_trade_deny",
	[]],

	[anyone, "merchant_trade_request",
	[
		(neq, "$g_encountered_party_faction", "fac_player_supporters_faction"),
		(store_party_size_wo_prisoners, ":party_size_wo_prisoners_main_party", "p_main_party"),
		(this_or_next|lt, ":party_size_wo_prisoners_main_party", 60),
		(neg|troop_slot_ge, "trp_player", 7, 200)
	],
	"My wares? Sorry, I haven't the time to unload the caravan. Deadlines to keep.", "merchant_trade_deny",
	[]],

	[anyone, "merchant_trade_request",
	[],
	"Certainly. Give me and my men a moment to make a proper presentation.", "merchant_trade_completed",
	[
		(call_script, "script_trade_with_travelling_merchant", 1, 1)
	]],

	[anyone, "merchant_trade_completed",
	[],
	"Anything else?", "merchant_trade_completed_2",
	[]],

	[anyone, "merchant_trade_completed_2",
	[],
	"Anything else?", "merchant_talk",
	[
		(call_script, "script_trade_with_travelling_merchant", 0)
	]],

	[anyone|plyr, "merchant_trade_deny",
	[],
	"You refuse me? How dare you, peddler!", "merchant_trade_force",
	[]],

	[anyone|plyr, "merchant_trade_deny",
	[
		(ge, "$g_encountered_party_relation", 0)
	],
	"Most unfortunate. I had planned to part with good coin.", "merchant_trade_rethink",
	[]],

	[anyone|plyr, "merchant_trade_deny",
	[
		(ge, "$g_encountered_party_relation", 0)
	],
	"Understood, but there was another thing.", "merchant_pretalk",
	[]],

	[anyone|plyr, "merchant_trade_deny",
	[
		(ge, "$g_encountered_party_relation", 0)
	],
	"Very well. Good journey. [Leave]", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "merchant_trade_deny",
	[
		(lt, "$g_encountered_party_relation", 0)
	],
	"Best scurry on your way then, lest some bandits appear. [Leave]", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "merchant_trade_rethink",
	[
		(store_skill_level, ":skill_level_persuasion_player", "skl_persuasion", "trp_player"),
		(store_random_in_range, ":random_in_range_0_10", 0, 10),
		(val_add, ":skill_level_persuasion_player", ":random_in_range_0_10"),
		(gt, ":skill_level_persuasion_player", 10)
	],
	"Well, we could be persuaded to stop, but only for a moment", "merchant_trade_completed",
	[
		(call_script, "script_trade_with_travelling_merchant", 1, 2)
	]],

	[anyone, "merchant_trade_rethink",
	[],
	"We really must be getting on our way.", "merchant_talk",
	[]],

	[anyone, "merchant_trade_force",
	[
		(lt, "$g_encountered_party_relation", 10),
		(str_store_faction_name, 1, "$g_encountered_party_faction")
	],
	"Tough words from one unloved by the {s1}. We've no time for this.", "merchant_trade_force_2",
	[]],

	[anyone, "merchant_trade_force",
	[],
	"Settle down, {man/woman}. It's just business.", "merchant_trade_force_2",
	[]],

	[anyone|plyr, "merchant_trade_force_2",
	[],
	"Then I will take what I wish from your corpses.", "merchant_attack",
	[
		(call_script, "script_change_player_relation_with_center", "$g_encountered_party", -10)
	]],

	[anyone|plyr, "merchant_trade_force_2",
	[],
	"Show me your wares or I will show you my steel. Now!", "merchant_trade_rethink_2",
	[
		(call_script, "script_change_player_relation_with_center", "$g_encountered_party", -3)
	]],

	[anyone|plyr, "merchant_trade_force_2",
	[],
	"Get out of my sight, peddler. [Leave]", "close_window",
	[
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone, "merchant_trade_rethink_2",
	[
		(lt, "$g_encountered_party_relation", 0)
	],
	"Be quick about it, knave.", "merchant_trade_completed",
	[
		(call_script, "script_trade_with_travelling_merchant", 1, 5)
	]],

	[anyone, "merchant_trade_rethink_2",
	[],
	"Hrmph. Our apologies mi{lord/lady}. Right away.", "merchant_trade_completed",
	[
		(call_script, "script_trade_with_travelling_merchant", 1, 4)
	]],

	[party_tpl|pt_reinforcements, "start",
	[
		(eq, "$talk_context", 2),
		(party_get_slot, ":g_encountered_party_ai_object", "$g_encountered_party", slot_party_ai_object),
		(str_store_party_name, 21, ":g_encountered_party_ai_object"),
		(str_store_party_name, 20, "$g_encountered_party")
	],
	"Who goes there? We are {s20}.\ We're on our way to {s21}.", "reinforcements_intro",
	[]],

	[anyone|plyr, "reinforcements_intro",
	[],
	"I am {playername}. I'm just passing by.", "close_window",
	[]],

	[anyone|plyr, "reinforcements_intro",
	[],
	"I am {playername}. And I'm here to stop you from reaching your destination!.", "reinforcement_hostile",
	[]],

	[party_tpl|pt_reinforcements, "reinforcement_hostile",
	[
		(faction_get_slot, ":g_encountered_party_faction_leader", "$g_encountered_party_faction", slot_faction_leader),
		(str_store_troop_name, 9, ":g_encountered_party_faction_leader")
	],
	"What!? We are under the protection of {s9}!\ Be certain he will take vengance!", "reinforcements_attack",
	[]],

	[anyone|plyr, "reinforcements_attack",
	[],
	"Fine let him! I will kill him after I've dealt with you!", "close_window",
	[
		(call_script, "script_make_kingdom_hostile_to_player", "$g_encountered_party_faction", -1),
		(encounter_attack, 0)
	]],

	[anyone|plyr, "reinforcements_attack",
	[],
	"Allright, go! But you have not seen the last of me!", "close_window",
	[]],

	[anyone, "lco_conversation_end",
	[
		(troop_is_hero, "$g_lco_target"),
		(assign, "$g_lco_operation", 1)
	],
	"Nice to know you are not forgetting me!", "close_window",
	[
		(change_screen_return)
	]],

	[anyone, "lco_conversation_end",
	[
		(assign, "$g_lco_operation", 1)
	],
	"It's a honor to serve you!", "close_window",
	[
		(change_screen_return)
	]],

	[anyone, "lord_request_enlistment",
	[
		(ge, "$g_talk_troop_relation", 0),
		(try_begin),
			(neg|faction_slot_eq, "$g_talk_troop_faction", 101, 0),
			(faction_get_slot, reg1, "$g_talk_troop_faction", 101),
		(else_try),
			(faction_get_slot, reg1, "$g_talk_troop_faction", slot_faction_quick_battle_tier_1_infantry),
		(try_end),
		(str_store_troop_name, 1, reg1),
		(store_character_level, reg1, reg1),
		(val_mul, reg1, 10),
		(str_store_string, 2, "str_reg1_denars")
	],
	"I've got room in my ranks for a {man/woman} of your disposition, {playername}.  I can take you on as a {s1}, with a weekly pay of {s2}. And food, of course. Plenty of room for promotion and you'll be equipped as befits your rank. You'll have your take of what you can scavange after battle, too. What do you say?", "lord_request_enlistment_confirm",
	[]],

	[anyone|plyr, "lord_request_enlistment_confirm",
	[],
	"Seems a fair lot and steady work. I'm with you, my liege.", "close_window",
	[
		(call_script, "script_freelancer_event_player_enlists"),
		(eq, "$talk_context", 2),
		(assign, "$g_leave_encounter", 1)
	]],

	[anyone|plyr, "lord_request_enlistment_confirm",
	[],
	"Well, on second thought, I might try my luck alone a bit longer. My thanks.", "lord_pretalk",
	[]],

	[anyone, "lord_request_enlistment",
	[
		(lt, "$g_talk_troop_relation", 0)
	],
	"I do not trust you enough to allow you to serve for me.", "lord_pretalk",
	[]],

	[anyone, "lord_request_reassignment",
	[
		(store_current_day, ":current_day"),
		(quest_get_slot, reg0, "qst_freelancer_enlisted", slot_quest_target_state),
		(val_sub, ":current_day", reg0),
		(gt, ":current_day", 14),
		(neg|faction_slot_eq, "$g_talk_troop_faction", slot_faction_quick_battle_tier_1_infantry, "$player_cur_troop")
	],
	"Reassignment, {playername}? Your current post doesn't suit you? Very well then. What were you thinking?", "lord_request_reassignment_select",
	[
		(call_script, "script_freelancer_list_faction_troops", "$g_talk_troop_faction", "trp_temp_array_a", "trp_temp_array_b")
	]],

	[anyone, "lord_request_reassignment",
	[],
	"Sorry, {lad/lass}, but I can't have my men changing their mind every day. Next you'll be asking for leave--or to retire!", "lord_pretalk",
	[]],

	[anyone|plyr, "lord_request_reassignment_select",
	[
		(call_script, "script_cf_freelancer_get_reassign_troop", "trp_temp_array_a", 0),
		(assign, reg1, reg0),
		(str_store_troop_name, 1, reg0)
	],
	"A new role in the infantry: {s1}", "lord_request_reassignment_confirm",
	[
		(assign, "$temp", reg1)
	]],

	[anyone|plyr, "lord_request_reassignment_select",
	[
		(call_script, "script_cf_freelancer_get_reassign_troop", "trp_temp_array_a", 1),
		(assign, reg2, reg0),
		(str_store_troop_name, 2, reg0)
	],
	"A position with your ranged troops: {s2}", "lord_request_reassignment_confirm",
	[
		(assign, "$temp", reg2)
	]],

	[anyone|plyr, "lord_request_reassignment_select",
	[
		(call_script, "script_cf_freelancer_get_reassign_troop", "trp_temp_array_a", 2),
		(assign, reg3, reg0),
		(str_store_troop_name, 3, reg0)
	],
	"A spot amongst your horsemen: {s3}", "lord_request_reassignment_confirm",
	[
		(assign, "$temp", reg3)
	]],

	[anyone|plyr, "lord_request_reassignment_select",
	[],
	"I'd like to start with the recruits again.", "lord_request_reassignment_confirm",
	[
		(faction_get_slot, "$temp", "$g_talk_troop_faction", slot_faction_quick_battle_tier_1_infantry)
	]],

	[anyone|plyr, "lord_request_reassignment_select",
	[
		(str_store_troop_name, 5, "$player_cur_troop")
	],
	"Actually...maybe not, milord. No. I'm fine as a {s5}", "lord_pretalk",
	[]],

	[anyone, "lord_request_reassignment_confirm",
	[
		(str_store_troop_name, 4, "$temp"),
		(str_store_troop_name, 5, "$player_cur_troop")
	],
	"Alright, {playername}, you're sure I should have my Master-of-Arms begin your retraining as a {s4}?", "lord_request_reassignment_finish",
	[]],

	[anyone|plyr, "lord_request_reassignment_finish",
	[],
	"Yes, I'd like to be retrained as a {s4}, sir.", "lord_pretalk",
	[
		(call_script, "script_freelancer_unequip_troop", "$player_cur_troop"),
		(assign, "$player_cur_troop", "$temp"),
		(faction_set_slot, "$g_talk_troop_faction", 101, "$player_cur_troop"),
		(call_script, "script_freelancer_equip_troop", "$player_cur_troop"),
		(str_store_troop_name, 5, "$player_cur_troop"),
		(str_store_troop_name_link, 13, "$enlisted_lord"),
		(str_store_faction_name_link, 14, "$g_talk_troop_faction"),
		(str_store_string, 1, "@Enlisted as a {s5} in the party of {s13} of {s14}."),
		(add_troop_note_from_sreg, "trp_player", 3, 1, 0),
		(str_store_string, 5, "@Current rank: {s5}"),
		(add_quest_note_from_sreg, "qst_freelancer_enlisted", 3, 5, 1),
		(troop_get_xp, reg0, "trp_player"),
		(quest_set_slot, "qst_freelancer_enlisted", slot_quest_object_state, reg0),
		(call_script, "script_freelancer_get_upgrade_xp", "$player_cur_troop"),
		(quest_set_slot, "qst_freelancer_enlisted", slot_quest_target_dna, reg0)
	]],

	[anyone|plyr, "lord_request_reassignment_finish",
	[],
	"Actually...maybe not, milord. No. I'm fine as a {s5}. Milord.", "lord_pretalk",
	[]],

	[anyone, "lord_request_retire",
	[],
	"Very well {playername}. You are relieved of duty.", "lord_pretalk",
	[
		(call_script, "script_freelancer_event_player_discharge")
	]],

	[anyone, "lord_request_vacation",
	[],
	"Very well {playername}. You shall take some time off from military duty. Return in two weeks.", "lord_pretalk",
	[
		(call_script, "script_freelancer_event_player_vacation")
	]],

	[anyone, "ask_return_from_leave",
	[
		(check_quest_active, "qst_freelancer_vacation")
	],
	"Welcome back {playername}. The men has missed you I daresay! Now return to your post.", "lord_pretalk",
	[
		(call_script, "script_freelancer_event_player_returns", 1)
	]],

	[anyone, "ask_return_from_leave",
	[
		(check_quest_active, "qst_freelancer_captured"),
		(quest_get_slot, reg0, "qst_freelancer_captured", slot_quest_object_faction),
		(str_store_faction_name, 1, reg0)
	],
	"It is good to see you, {playername}. Was quite the ordeal we faced against the enemy. Glad to have you back in the company.", "lord_pretalk",
	[
		(call_script, "script_freelancer_event_player_returns", 2)
	]],

]