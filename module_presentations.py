from header_common import *
from header_presentations import *
from header_mission_templates import *
from ID_meshes import *
from header_operations import *
from header_triggers import *
from module_constants import *
import string

####################################################################################################################
#  Each presentation record contains the following fields:
#  1) Presentation id: used for referencing presentations in other files. The prefix prsnt_ is automatically added before each presentation id.
#  2) Presentation flags. See header_presentations.py for a list of available flags
#  3) Presentation background mesh: See module_meshes.py for a list of available background meshes
#  4) Triggers: Simple triggers that are associated with the presentation
####################################################################################################################

presentations = [
	("game_credits", prsntf_read_only, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(assign, "$g_presentation_credits_obj_1", -1),
			(assign, "$g_presentation_credits_obj_2", -1),
			(assign, "$g_presentation_credits_obj_3", -1),
			(assign, "$g_presentation_credits_obj_4", -1),
			(assign, "$g_presentation_credits_obj_5", -1),
			(assign, "$g_presentation_credits_obj_6", -1),
			(assign, "$g_presentation_credits_obj_7", -1),
			(assign, "$g_presentation_credits_obj_8", -1),
			(assign, "$g_presentation_credits_obj_9", -1),
			(assign, "$g_presentation_credits_obj_10", -1),
			(assign, "$g_presentation_credits_obj_11", -1),
			(assign, "$g_presentation_credits_obj_12", -1),
			(assign, "$g_presentation_credits_obj_1_alpha", 0),
			(assign, "$g_presentation_credits_obj_2_alpha", 0),
			(assign, "$g_presentation_credits_obj_3_alpha", 0),
			(assign, "$g_presentation_credits_obj_4_alpha", 0),
			(assign, "$g_presentation_credits_obj_5_alpha", 0),
			(assign, "$g_presentation_credits_obj_6_alpha", 0),
			(assign, "$g_presentation_credits_obj_7_alpha", 0),
			(assign, "$g_presentation_credits_obj_8_alpha", 0),
			(assign, "$g_presentation_credits_obj_9_alpha", 0)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 1000000),
			(try_begin),
				(this_or_next|key_clicked, 57),
				(this_or_next|key_clicked, 28),
				(this_or_next|key_clicked, 1),
				(this_or_next|key_clicked, 14),
				(this_or_next|key_clicked, 224),
				(key_clicked, 225),
				(presentation_set_duration, 0),
			(try_end),
			(try_begin),
				(lt, "$g_presentation_credits_obj_1", 0),
				(str_store_string, 1, "str_credits_1"),
				(create_text_overlay, "$g_presentation_credits_obj_1", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_1", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_1", 0),
				(position_set_x, 1, 1500),
				(position_set_y, 1, 1500),
				(overlay_set_size, "$g_presentation_credits_obj_1", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_1", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_1", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 2000),
				(eq, "$g_presentation_credits_obj_1_alpha", 0),
				(assign, "$g_presentation_credits_obj_1_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_1", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 3500),
				(lt, "$g_presentation_credits_obj_2", 0),
				(str_store_string, 1, "str_credits_2"),
				(create_text_overlay, "$g_presentation_credits_obj_2", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_2", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_2", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_2", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_2", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_2", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 5500),
				(eq, "$g_presentation_credits_obj_2_alpha", 0),
				(assign, "$g_presentation_credits_obj_2_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_2", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 7000),
				(lt, "$g_presentation_credits_obj_3", 0),
				(str_store_string, 1, "str_credits_3"),
				(create_text_overlay, "$g_presentation_credits_obj_3", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_3", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_3", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_3", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_3", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_3", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 9000),
				(eq, "$g_presentation_credits_obj_3_alpha", 0),
				(assign, "$g_presentation_credits_obj_3_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_3", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 10500),
				(lt, "$g_presentation_credits_obj_4", 0),
				(str_store_string, 1, "str_credits_4"),
				(create_text_overlay, "$g_presentation_credits_obj_4", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_4", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_4", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_4", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_4", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_4", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 12500),
				(eq, "$g_presentation_credits_obj_4_alpha", 0),
				(assign, "$g_presentation_credits_obj_4_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_4", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 14000),
				(lt, "$g_presentation_credits_obj_5", 0),
				(str_store_string, 1, "str_credits_5"),
				(create_text_overlay, "$g_presentation_credits_obj_5", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_5", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_5", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_5", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_5", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_5", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 16000),
				(eq, "$g_presentation_credits_obj_5_alpha", 0),
				(assign, "$g_presentation_credits_obj_5_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_5", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 17500),
				(lt, "$g_presentation_credits_obj_6", 0),
				(str_store_string, 1, "str_credits_6"),
				(create_text_overlay, "$g_presentation_credits_obj_6", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_6", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_6", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_6", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_6", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_6", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 19500),
				(eq, "$g_presentation_credits_obj_6_alpha", 0),
				(assign, "$g_presentation_credits_obj_6_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_6", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 21000),
				(lt, "$g_presentation_credits_obj_7", 0),
				(str_store_string, 1, "str_credits_7"),
				(create_text_overlay, "$g_presentation_credits_obj_7", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_7", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_7", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_7", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_7", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_7", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 23000),
				(eq, "$g_presentation_credits_obj_7_alpha", 0),
				(assign, "$g_presentation_credits_obj_7_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_7", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 24500),
				(lt, "$g_presentation_credits_obj_8", 0),
				(str_store_string, 1, "str_credits_8"),
				(create_text_overlay, "$g_presentation_credits_obj_8", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_8", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_8", 0),
				(position_set_x, 1, 1750),
				(position_set_y, 1, 1750),
				(overlay_set_size, "$g_presentation_credits_obj_8", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 375),
				(overlay_set_position, "$g_presentation_credits_obj_8", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_8", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 26500),
				(eq, "$g_presentation_credits_obj_8_alpha", 0),
				(assign, "$g_presentation_credits_obj_8_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_8", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 28000),
				(lt, "$g_presentation_credits_obj_9", 0),
				(str_store_string, 1, "str_credits_10"),
				(create_text_overlay, "$g_presentation_credits_obj_9", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_9", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_9", 0),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, "$g_presentation_credits_obj_9", 1),
				(position_set_x, 1, 250),
				(position_set_y, 1, 485),
				(overlay_set_position, "$g_presentation_credits_obj_9", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_9", 1000, 255),
				(str_store_string, 1, "str_credits_11"),
				(create_text_overlay, "$g_presentation_credits_obj_10", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_10", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_10", 0),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, "$g_presentation_credits_obj_10", 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 470),
				(overlay_set_position, "$g_presentation_credits_obj_10", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_10", 1000, 255),
				(str_store_string, 1, "str_credits_12"),
				(create_text_overlay, "$g_presentation_credits_obj_11", 1, 6160),
				(overlay_set_color, "$g_presentation_credits_obj_11", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_11", 0),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, "$g_presentation_credits_obj_11", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 105),
				(overlay_set_position, "$g_presentation_credits_obj_11", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_11", 1000, 255),
			(else_try),
				(gt, ":trigger_param_1", 34000),
				(eq, "$g_presentation_credits_obj_9_alpha", 0),
				(assign, "$g_presentation_credits_obj_9_alpha", 1),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_9", 1000, 0),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_10", 1000, 0),
				(overlay_animate_to_alpha, "$g_presentation_credits_obj_11", 1000, 0),
			(else_try),
				(gt, ":trigger_param_1", 35500),
				(lt, "$g_presentation_credits_obj_12", 0),
				(str_store_string, 1, "str_credits_9"),
				(create_text_overlay, "$g_presentation_credits_obj_12", 1, 2064),
				(overlay_set_color, "$g_presentation_credits_obj_12", 0),
				(overlay_set_alpha, "$g_presentation_credits_obj_12", 255),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, "$g_presentation_credits_obj_12", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, -4800),
				(overlay_set_position, "$g_presentation_credits_obj_12", 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 760),
				(overlay_animate_to_position, "$g_presentation_credits_obj_12", 70000, 1),
			(else_try),
				(gt, ":trigger_param_1", 105500),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("game_profile_banner_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(str_store_string, 1, "str_profile_banner_selection_text"),
			(create_text_overlay, reg1, 1, 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(overlay_set_text, reg1, 1),
			(create_button_overlay, "$g_presentation_obj_profile_banner_selection_1", "@Next Page", 16),
			(position_set_x, 1, 700),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_profile_banner_selection_1", 1),
			(create_button_overlay, "$g_presentation_obj_profile_banner_selection_2", "str_use_default_banner", 16),
			(position_set_x, 1, 300),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_profile_banner_selection_2", 1),
			(assign, ":value", 150),
			(assign, ":var_2", 575),
			(store_mul, ":value_2", 16, "$g_presentation_page_no"),
			(store_add, ":value_3", ":value_2", 16),
			(store_add, "$g_presentation_banner_start", "$g_presentation_obj_profile_banner_selection_2", 1),
			(assign, ":var_5", 0),
			(try_for_range, ":mesh", "mesh_banner_a01", "mesh_banner_kingdom_n"),
				(assign, ":value_4", 0),
				(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
					(faction_slot_eq, ":faction", slot_faction_banner, ":mesh"),
					(assign, ":value_4", 1),
				(try_end),
				(eq, ":value_4", 0),
				(val_add, ":var_5", 1),
				(gt, ":var_5", ":value_2"),
				(le, ":var_5", ":value_3"),
				(create_image_button_overlay, reg1, ":mesh", ":mesh"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 100),
				(position_set_y, 1, 100),
				(overlay_set_size, reg1, 1),
				(val_add, ":value", 100),
				(ge, ":value", 900),
				(assign, ":value", 150),
				(val_sub, ":var_2", 250),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_profile_banner_selection_1"),
				(val_add, "$g_presentation_page_no", 1),
				(val_mod, "$g_presentation_page_no", 8),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_profile_banner_selection"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_profile_banner_selection_2"),
				(profile_set_banner_id, -1),
				(presentation_set_duration, 0),
			(else_try),
				(store_sub, ":value", ":trigger_param_1", "$g_presentation_banner_start"),
				(store_mul, ":value_2", 16, "$g_presentation_page_no"),
				(val_add, ":value", ":value_2"),
				(assign, ":var_4", 0),
				(assign, ":value_3", "mesh_banner_kingdom_n"),
				(try_for_range, ":mesh", "mesh_banner_a01", ":value_3"),
					(assign, ":value_4", 0),
					(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
						(faction_slot_eq, ":faction", slot_faction_banner, ":mesh"),
						(assign, ":value_4", 1),
					(try_end),
					(eq, ":value_4", 0),
					(try_begin),
						(eq, ":value", ":var_4"),
						(store_sub, ":value_5", ":mesh", "mesh_banner_a01"),
						(profile_set_banner_id, ":value_5"),
						(assign, ":value_3", 0),
					(try_end),
					(val_add, ":var_4", 1),
				(try_end),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("game_custom_battle_designer", prsntf_manual_end_only, mesh_cb_ui_main, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg0, "str_player", 98320),
			(overlay_set_color, reg0, 4294967295),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, 700),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_enemy", 98320),
			(overlay_set_color, reg0, 4294967295),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 820),
			(position_set_y, 1, 700),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_character", 16),
			(position_set_x, 1, 175),
			(position_set_y, 1, 670),
			(overlay_set_position, reg0, 1),
			(create_combo_label_overlay, "$g_presentation_obj_custom_battle_designer_18"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_18", 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, 635),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_18", 1),
			(try_for_range, ":troop", "trp_quick_battle_troop_1", "trp_quick_battle_troops_end"),
				(str_store_troop_name, 0, ":troop"),
				(overlay_add_item, "$g_presentation_obj_custom_battle_designer_18", 0),
			(try_end),
			(store_sub, ":troop", "$g_quick_battle_troop", "trp_quick_battle_troop_1"),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_18", ":troop"),
			(store_mul, ":troop", "$g_quick_battle_troop", 2),
			(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_game_party_window", ":troop"),
			(position_set_x, 1, 25),
			(position_set_y, 1, 370),
			(overlay_set_position, reg0, 1),
			(store_add, ":value", 3, "trp_troop_tree_0"),
			(try_for_range, ":troop_2", "trp_troop_tree_0", ":value"),
				(eq, "$troop_trees", ":troop_2"),
				(assign, ":var_4", ":troop_2"),
			(try_end),
			(try_begin),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_1"),
				(troop_get_slot, ":var_4_645", ":var_4", 645),
				(assign, ":troop", ":var_4_645"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_2"),
				(troop_get_slot, ":var_4_676", ":var_4", 676),
				(assign, ":troop", ":var_4_676"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_3"),
				(troop_get_slot, ":var_4_708", ":var_4", 708),
				(assign, ":troop", ":var_4_708"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_4"),
				(troop_get_slot, ":var_4_740", ":var_4", 740),
				(assign, ":troop", ":var_4_740"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_5"),
				(troop_get_slot, ":var_4_773", ":var_4", 773),
				(assign, ":troop", ":var_4_773"),
			(else_try),
				(eq, "$g_quick_battle_team_2_faction", "fac_kingdom_6"),
				(troop_get_slot, ":var_4_806", ":var_4", 806),
				(assign, ":troop", ":var_4_806"),
			(else_try),
				(troop_get_slot, ":var_4_850", ":var_4", 850),
				(assign, ":troop", ":var_4_850"),
			(try_end),
			(val_mul, ":troop", 2),
			(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_game_party_window", ":troop"),
			(position_set_x, 1, 670),
			(position_set_y, 1, 370),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_biography", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 700),
			(overlay_set_position, reg0, 1),
			(store_sub, ":value_2", "$g_quick_battle_troop", "trp_quick_battle_troop_1"),
			(val_add, ":value_2", "str_quick_battle_troop_1"),
			(create_text_overlay, reg0, ":value_2", 8192),
			(position_set_x, 1, 850),
			(position_set_y, 1, 850),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 320),
			(position_set_y, 1, 560),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 360),
			(position_set_y, 1, 130),
			(overlay_set_area_size, reg0, 1),
			(create_text_overlay, reg0, "str_map_basic", 16),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 450),
			(overlay_set_position, reg0, 1),
			(create_combo_label_overlay, "$g_presentation_obj_custom_battle_designer_1"),
			(position_set_x, 1, 700),
			(position_set_y, 1, 700),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_1", 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 415),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_1", 1),
			(try_begin),
				(eq, "$g_quick_battle_game_type", 0),
				(try_for_range, ":scene", "scn_quick_battle_scene_1", "scn_quick_battle_scene_4"),
					(store_sub, ":value_3", ":scene", "scn_quick_battle_scene_1"),
					(val_add, ":value_3", "str_quick_battle_scene_1"),
					(overlay_add_item, "$g_presentation_obj_custom_battle_designer_1", ":value_3"),
				(try_end),
				(try_begin),
					(is_between, "$g_quick_battle_map", "scn_quick_battle_scene_1", "scn_quick_battle_scene_4"),
					(store_sub, ":value_4", "$g_quick_battle_map", "scn_quick_battle_scene_1"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_1", ":value_4"),
				(else_try),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_1", 0),
					(assign, "$g_quick_battle_map", "scn_quick_battle_scene_1"),
				(try_end),
			(else_try),
				(try_for_range, ":scene", "scn_quick_battle_scene_4", "scn_quick_battle_maps_end"),
					(store_sub, ":value_3", ":scene", "scn_quick_battle_scene_1"),
					(val_add, ":value_3", "str_quick_battle_scene_1"),
					(overlay_add_item, "$g_presentation_obj_custom_battle_designer_1", ":value_3"),
				(try_end),
				(try_begin),
					(is_between, "$g_quick_battle_map", "scn_quick_battle_scene_4", "scn_quick_battle_maps_end"),
					(store_sub, ":value_4", "$g_quick_battle_map", "scn_quick_battle_scene_4"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_1", ":value_4"),
				(else_try),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_1", 0),
					(assign, "$g_quick_battle_map", "scn_quick_battle_scene_4"),
				(try_end),
			(try_end),
			(store_sub, ":value_5", "$g_quick_battle_map", "scn_quick_battle_scene_1"),
			(val_add, ":value_5", "mesh_cb_ui_maps_scene_01"),
			(create_mesh_overlay, reg0, ":value_5"),
			(position_set_x, 1, 700),
			(position_set_y, 1, 700),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 380),
			(position_set_y, 1, 220),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_game_type_basic", 16),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 180),
			(overlay_set_position, reg0, 1),
			(create_combo_label_overlay, "$g_presentation_obj_custom_battle_designer_23"),
			(position_set_x, 1, 700),
			(position_set_y, 1, 700),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_23", 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 150),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_23", 1),
			(overlay_add_item, "$g_presentation_obj_custom_battle_designer_23", "str_battle"),
			(overlay_add_item, "$g_presentation_obj_custom_battle_designer_23", "str_siege_offense"),
			(overlay_add_item, "$g_presentation_obj_custom_battle_designer_23", "str_siege_defense"),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_23", "$g_quick_battle_game_type"),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_24", "str_randomize"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 60),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_24", 1),
			(assign, ":value_6", 330),
			(assign, ":value_6", 350),
			(assign, ":var_18", 40),
			(create_text_overlay, reg0, "str_faction", 16),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_faction", 16),
			(position_set_x, 1, 820),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_6", ":var_18"),
			(create_combo_label_overlay, "$g_presentation_obj_custom_battle_designer_4"),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_4", 1),
			(try_begin),
				(is_trial_version),
				(str_store_faction_name, 0, "fac_kingdom_1"),
				(overlay_add_item, "$g_presentation_obj_custom_battle_designer_4", 0),
				(store_add, ":value_7", "fac_kingdom_1", 1),
				(str_store_faction_name, 0, ":value_7"),
				(overlay_add_item, "$g_presentation_obj_custom_battle_designer_4", 0),
			(else_try),
				(try_for_range, ":value_7", "fac_player_supporters_faction", "fac_kingdoms_end"),
					(str_store_faction_name, 0, ":value_7"),
					(overlay_add_item, "$g_presentation_obj_custom_battle_designer_4", 0),
				(try_end),
				(str_store_faction_name, 0, "fac_outlaws"),
				(overlay_add_item, "$g_presentation_obj_custom_battle_designer_4", 0),
			(try_end),
			(try_begin),
				(eq, "$g_quick_battle_team_1_faction", "fac_outlaws"),
				(store_sub, ":value_8", "fac_kingdoms_end", "fac_player_supporters_faction"),
				(overlay_set_val, "$g_presentation_obj_custom_battle_designer_4", ":value_8"),
			(else_try),
				(store_sub, ":value_9", "$g_quick_battle_team_1_faction", "fac_player_supporters_faction"),
				(overlay_set_val, "$g_presentation_obj_custom_battle_designer_4", ":value_9"),
			(try_end),
			(create_combo_label_overlay, "$g_presentation_obj_custom_battle_designer_5"),
			(position_set_x, 1, 820),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_5", 1),
			(try_begin),
				(is_trial_version),
				(str_store_faction_name, 0, "fac_player_supporters_faction"),
				(overlay_add_item, "$g_presentation_obj_custom_battle_designer_5", 0),
				(store_add, ":value_7", "fac_player_supporters_faction", 1),
				(str_store_faction_name, 0, ":value_7"),
				(overlay_add_item, "$g_presentation_obj_custom_battle_designer_5", 0),
			(else_try),
				(try_for_range, ":value_7", "fac_player_supporters_faction", "fac_kingdoms_end"),
					(str_store_faction_name, 0, ":value_7"),
					(overlay_add_item, "$g_presentation_obj_custom_battle_designer_5", 0),
				(try_end),
				(str_store_faction_name, 0, "fac_outlaws"),
				(overlay_add_item, "$g_presentation_obj_custom_battle_designer_5", 0),
			(try_end),
			(try_begin),
				(eq, "$g_quick_battle_team_2_faction", "fac_outlaws"),
				(store_sub, ":value_8", "fac_kingdoms_end", "fac_player_supporters_faction"),
				(overlay_set_val, "$g_presentation_obj_custom_battle_designer_5", ":value_8"),
			(else_try),
				(store_sub, ":value_10", "$g_quick_battle_team_2_faction", "fac_player_supporters_faction"),
				(overlay_set_val, "$g_presentation_obj_custom_battle_designer_5", ":value_10"),
			(try_end),
			(val_sub, ":value_6", ":var_18"),
			(create_text_overlay, reg0, "str_army_composition", 16),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_army_composition", 16),
			(position_set_x, 1, 820),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_6", ":var_18"),
			(try_begin),
				(eq, "$g_presentation_obj_custom_battle_designer_6_last_value", 0),
				(eq, "$g_presentation_obj_custom_battle_designer_7_last_value", 0),
				(eq, "$g_presentation_obj_custom_battle_designer_8_last_value", 0),
				(eq, "$g_presentation_obj_custom_battle_designer_9_last_value", 0),
				(eq, "$g_presentation_obj_custom_battle_designer_10_last_value", 0),
				(eq, "$g_presentation_obj_custom_battle_designer_11_last_value", 0),
				(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", 34),
				(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", 33),
				(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", 33),
				(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", 34),
				(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", 33),
				(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", 33),
				(assign, "$g_presentation_obj_custom_battle_designer_6_locked", 0),
				(assign, "$g_presentation_obj_custom_battle_designer_7_locked", 0),
				(assign, "$g_presentation_obj_custom_battle_designer_8_locked", 0),
				(assign, "$g_presentation_obj_custom_battle_designer_9_locked", 0),
				(assign, "$g_presentation_obj_custom_battle_designer_10_locked", 0),
				(assign, "$g_presentation_obj_custom_battle_designer_11_locked", 0),
			(try_end),
			(create_mesh_overlay, reg0, "mesh_cb_ui_icon_infantry"),
			(position_set_x, 1, 5),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_cb_ui_icon_infantry"),
			(position_set_x, 1, 650),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_size, reg0, 1),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_6", 0, 100),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_6", "$g_presentation_obj_custom_battle_designer_6_last_value"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_6", 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_6", 1),
			(assign, reg0, "$g_presentation_obj_custom_battle_designer_6_last_value"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_12", "str_reg0_percent", 0),
			(position_set_x, 1, 295),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_12", 1),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_9", 0, 100),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_9", "$g_presentation_obj_custom_battle_designer_9_last_value"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_9", 1),
			(position_set_x, 1, 820),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_9", 1),
			(assign, reg0, "$g_presentation_obj_custom_battle_designer_9_last_value"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_15", "str_reg0_percent", 0),
			(position_set_x, 1, 940),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_15", 1),
			(val_sub, ":value_6", ":var_18"),
			(create_mesh_overlay, reg0, "mesh_cb_ui_icon_archer"),
			(position_set_x, 1, 15),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_cb_ui_icon_archer"),
			(position_set_x, 1, 660),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_size, reg0, 1),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_7", 0, 100),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_7", "$g_presentation_obj_custom_battle_designer_7_last_value"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_7", 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_7", 1),
			(assign, reg0, "$g_presentation_obj_custom_battle_designer_7_last_value"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_13", "str_reg0_percent", 0),
			(position_set_x, 1, 295),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_13", 1),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_10", 0, 100),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_10", "$g_presentation_obj_custom_battle_designer_10_last_value"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_10", 1),
			(position_set_x, 1, 820),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_10", 1),
			(assign, reg0, "$g_presentation_obj_custom_battle_designer_10_last_value"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_16", "str_reg0_percent", 0),
			(position_set_x, 1, 940),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_16", 1),
			(val_sub, ":value_6", ":var_18"),
			(create_mesh_overlay, reg0, "mesh_cb_ui_icon_horseman"),
			(position_set_x, 1, 10),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_cb_ui_icon_horseman"),
			(position_set_x, 1, 655),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_size, reg0, 1),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_8", 0, 100),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_8", "$g_presentation_obj_custom_battle_designer_8_last_value"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_8", 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_8", 1),
			(assign, reg0, "$g_presentation_obj_custom_battle_designer_8_last_value"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_14", "str_reg0_percent", 0),
			(position_set_x, 1, 295),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_14", 1),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_11", 0, 100),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_11", "$g_presentation_obj_custom_battle_designer_11_last_value"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_11", 1),
			(position_set_x, 1, 820),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_11", 1),
			(assign, reg0, "$g_presentation_obj_custom_battle_designer_11_last_value"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_17", "str_reg0_percent", 0),
			(position_set_x, 1, 940),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_17", 1),
			(val_sub, ":value_6", ":var_18"),
			(create_text_overlay, reg0, "str_army_size", 16),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "str_army_size", 16),
			(position_set_x, 1, 820),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_6", ":var_18"),
			(try_begin),
				(is_trial_version),
				(val_min, "$g_quick_battle_army_1_size", 25),
				(val_min, "$g_quick_battle_army_2_size", 25),
			(try_end),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_2", 0, 100),
			(overlay_set_boundaries, "$g_presentation_obj_custom_battle_designer_2", 1000, 75000),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_2", "$g_quick_battle_army_1_size"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_2", 1),
			(position_set_x, 1, 135),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_2", 1),
			(call_script, "script_get_army_size_from_slider_value", "$g_quick_battle_army_1_size"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_21", "str_reg0_men", 0),
			(position_set_x, 1, 255),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_21", 1),
			(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_3", 200),
			(overlay_set_boundaries, "$g_presentation_obj_custom_battle_designer_3", 1000, 75000),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_3", "$g_quick_battle_army_2_size"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_3", 1),
			(position_set_x, 1, 780),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_3", 1),
			(call_script, "script_get_army_size_from_slider_value", "$g_quick_battle_army_2_size"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_22", "str_reg0_men", 0),
			(position_set_x, 1, 900),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_22", 1),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_19", "str_start", 0),
			(position_set_x, 1, 415),
			(position_set_y, 1, 10),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_19", 1),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_20", "str_back", 0),
			(position_set_x, 1, 585),
			(position_set_y, 1, 10),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_20", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_1"),
				(try_begin),
					(eq, "$g_quick_battle_game_type", 0),
					(store_add, "$g_quick_battle_map", ":trigger_param_2", "scn_quick_battle_scene_1"),
				(else_try),
					(store_add, "$g_quick_battle_map", ":trigger_param_2", "scn_quick_battle_scene_4"),
				(try_end),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_custom_battle_designer"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_23"),
				(assign, "$g_quick_battle_game_type", ":trigger_param_2"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_custom_battle_designer"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_24"),
				(store_random_in_range, "$g_quick_battle_game_type", 0, 3),
				(store_random_in_range, "$g_quick_battle_troop", "trp_quick_battle_troop_1", "trp_quick_battle_troops_end"),
				(try_begin),
					(is_trial_version),
					(store_random_in_range, "$g_quick_battle_team_1_faction", 0, 2),
					(try_begin),
						(eq, "$g_quick_battle_team_1_faction", 0),
						(assign, "$g_quick_battle_team_2_faction", 1),
					(else_try),
						(assign, "$g_quick_battle_team_2_faction", 0),
					(try_end),
					(val_add, "$g_quick_battle_team_1_faction", "fac_kingdom_1"),
					(val_add, "$g_quick_battle_team_2_faction", "fac_kingdom_1"),
					(store_random_in_range, "$g_quick_battle_army_1_size", 10, 16),
					(store_random_in_range, ":random_in_range_0_6", 0, 6),
					(val_add, "$g_quick_battle_army_1_size", ":random_in_range_0_6"),
					(store_random_in_range, ":random_in_range_0_6", 0, 6),
					(val_add, "$g_quick_battle_army_1_size", ":random_in_range_0_6"),
				(else_try),
					(store_sub, ":value", "fac_kingdoms_end", "fac_player_supporters_faction"),
					(val_add, ":value", 1),
					(store_random_in_range, "$g_quick_battle_team_1_faction", 0, ":value"),
					(try_begin),
						(eq, "$g_quick_battle_team_1_faction", 0),
						(assign, "$g_quick_battle_team_1_faction", "fac_outlaws"),
					(else_try),
						(val_add, "$g_quick_battle_team_1_faction", "fac_player_supporters_faction"),
						(val_sub, "$g_quick_battle_team_1_faction", 1),
					(try_end),
					(assign, ":value_2", 1000),
					(try_for_range, ":unused", 0, ":value_2"),
						(store_random_in_range, "$g_quick_battle_team_2_faction", 0, ":value"),
						(try_begin),
							(eq, "$g_quick_battle_team_2_faction", 0),
							(assign, "$g_quick_battle_team_2_faction", "fac_outlaws"),
						(else_try),
							(val_add, "$g_quick_battle_team_2_faction", "fac_player_supporters_faction"),
							(val_sub, "$g_quick_battle_team_2_faction", 1),
						(try_end),
						(neq, "$g_quick_battle_team_1_faction", "$g_quick_battle_team_2_faction"),
						(assign, ":value_2", 0),
					(try_end),
					(store_random_in_range, "$g_quick_battle_army_1_size", 10, 21),
					(store_random_in_range, ":random_in_range_0_6", 0, 11),
					(val_add, "$g_quick_battle_army_1_size", ":random_in_range_0_6"),
					(store_random_in_range, ":random_in_range_0_6", 0, 11),
					(val_add, "$g_quick_battle_army_1_size", ":random_in_range_0_6"),
				(try_end),
				(assign, "$g_quick_battle_army_2_size", "$g_quick_battle_army_1_size"),
				(try_begin),
					(eq, "$g_quick_battle_game_type", 0),
					(store_random_in_range, "$g_quick_battle_map", "scn_quick_battle_scene_1", "scn_quick_battle_scene_4"),
					(store_random_in_range, ":random_in_range_0_3", 0, 3),
					(store_random_in_range, ":random_in_range_0_2", 0, 2),
					(store_random_in_range, ":random_in_range_0_100", 0, 100),
					(store_sub, ":value_3", 100, ":random_in_range_0_100"),
					(store_random_in_range, ":random_in_range_0_value_3", 0, ":value_3"),
					(store_sub, ":value_4", ":value_3", ":random_in_range_0_value_3"),
					(try_begin),
						(eq, ":random_in_range_0_3", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", ":random_in_range_0_100"),
						(try_begin),
							(eq, ":random_in_range_0_2", 0),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_4"),
						(else_try),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_4"),
						(try_end),
					(else_try),
						(eq, ":random_in_range_0_3", 1),
						(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", ":random_in_range_0_100"),
						(try_begin),
							(eq, ":random_in_range_0_2", 0),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_4"),
						(else_try),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_4"),
						(try_end),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", ":random_in_range_0_100"),
						(try_begin),
							(eq, ":random_in_range_0_2", 0),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_4"),
						(else_try),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_4"),
						(try_end),
					(try_end),
					(store_random_in_range, ":random_in_range_0_3", 0, 3),
					(store_random_in_range, ":random_in_range_0_2", 0, 2),
					(store_random_in_range, ":random_in_range_0_100", 0, 100),
					(store_sub, ":value_3", 100, ":random_in_range_0_100"),
					(store_random_in_range, ":random_in_range_0_value_3", 0, ":value_3"),
					(store_sub, ":value_4", ":value_3", ":random_in_range_0_value_3"),
					(try_begin),
						(eq, ":random_in_range_0_3", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", ":random_in_range_0_100"),
						(try_begin),
							(eq, ":random_in_range_0_2", 0),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_4"),
						(else_try),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_4"),
						(try_end),
					(else_try),
						(eq, ":random_in_range_0_3", 1),
						(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", ":random_in_range_0_100"),
						(try_begin),
							(eq, ":random_in_range_0_2", 0),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_4"),
						(else_try),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_4"),
						(try_end),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", ":random_in_range_0_100"),
						(try_begin),
							(eq, ":random_in_range_0_2", 0),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_4"),
						(else_try),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", ":random_in_range_0_value_3"),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_4"),
						(try_end),
					(try_end),
				(else_try),
					(eq, "$g_quick_battle_game_type", 1),
					(store_random_in_range, "$g_quick_battle_map", "scn_quick_battle_scene_4", "scn_quick_battle_maps_end"),
					(store_random_in_range, "$g_presentation_obj_custom_battle_designer_10_last_value", 30, 100),
					(store_sub, "$g_presentation_obj_custom_battle_designer_9_last_value", 100, "$g_presentation_obj_custom_battle_designer_10_last_value"),
					(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", 0),
					(store_random_in_range, "$g_presentation_obj_custom_battle_designer_6_last_value", 20, 100),
					(store_sub, "$g_presentation_obj_custom_battle_designer_7_last_value", 100, "$g_presentation_obj_custom_battle_designer_6_last_value"),
					(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", 0),
				(else_try),
					(store_random_in_range, "$g_quick_battle_map", "scn_quick_battle_scene_4", "scn_quick_battle_maps_end"),
					(store_random_in_range, "$g_presentation_obj_custom_battle_designer_7_last_value", 30, 100),
					(store_sub, "$g_presentation_obj_custom_battle_designer_6_last_value", 100, "$g_presentation_obj_custom_battle_designer_7_last_value"),
					(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", 0),
					(store_random_in_range, "$g_presentation_obj_custom_battle_designer_9_last_value", 20, 100),
					(store_sub, "$g_presentation_obj_custom_battle_designer_10_last_value", 100, "$g_presentation_obj_custom_battle_designer_9_last_value"),
					(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", 0),
				(try_end),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_custom_battle_designer"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_2"),
				(assign, "$g_quick_battle_army_1_size", ":trigger_param_2"),
				(try_begin),
					(is_trial_version),
					(gt, "$g_quick_battle_army_1_size", 25),
					(assign, "$g_quick_battle_army_1_size", 25),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_2", 25),
				(try_end),
				(call_script, "script_get_army_size_from_slider_value", "$g_quick_battle_army_1_size"),
				(overlay_set_text, "$g_presentation_obj_custom_battle_designer_21", "str_reg0_men"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_3"),
				(assign, "$g_quick_battle_army_2_size", ":trigger_param_2"),
				(try_begin),
					(is_trial_version),
					(gt, "$g_quick_battle_army_2_size", 25),
					(assign, "$g_quick_battle_army_2_size", 25),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_3", 25),
				(try_end),
				(call_script, "script_get_army_size_from_slider_value", "$g_quick_battle_army_2_size"),
				(overlay_set_text, "$g_presentation_obj_custom_battle_designer_22", "str_reg0_men"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_4"),
				(try_begin),
					(store_sub, ":value_5", "fac_kingdoms_end", "fac_player_supporters_faction"),
					(eq, ":trigger_param_2", ":value_5"),
					(assign, "$g_quick_battle_team_1_faction", "fac_outlaws"),
				(else_try),
					(store_add, "$g_quick_battle_team_1_faction", ":trigger_param_2", "fac_player_supporters_faction"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_5"),
				(try_begin),
					(store_sub, ":value_5", "fac_kingdoms_end", "fac_player_supporters_faction"),
					(eq, ":trigger_param_2", ":value_5"),
					(assign, "$g_quick_battle_team_2_faction", "fac_outlaws"),
				(else_try),
					(store_add, "$g_quick_battle_team_2_faction", ":trigger_param_2", "fac_player_supporters_faction"),
				(try_end),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_custom_battle_designer"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_18"),
				(store_add, "$g_quick_battle_troop", ":trigger_param_2", "trp_quick_battle_troop_1"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_custom_battle_designer"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_6"),
				(try_begin),
					(eq, "$g_presentation_obj_custom_battle_designer_6_locked", 1),
					(neq, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_6_last_value"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_6", "$g_presentation_obj_custom_battle_designer_6_last_value"),
				(else_try),
					(try_begin),
						(lt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_6_last_value"),
						(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_6_last_value", ":trigger_param_2"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_7_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_8_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", ":trigger_param_2"),
						(val_add, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_7"),
						(val_add, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_8"),
						(try_begin),
							(gt, "$g_presentation_obj_custom_battle_designer_7_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_7_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", 100),
						(else_try),
							(gt, "$g_presentation_obj_custom_battle_designer_8_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_8_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", 100),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_7", "$g_presentation_obj_custom_battle_designer_7_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_8", "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(else_try),
						(gt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_6_last_value"),
						(store_sub, ":value_6", ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_6_last_value"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_7_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_8_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", ":trigger_param_2"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_7"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_8"),
						(try_begin),
							(lt, "$g_presentation_obj_custom_battle_designer_7_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_8_last_value", "$g_presentation_obj_custom_battle_designer_7_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", 0),
						(else_try),
							(lt, "$g_presentation_obj_custom_battle_designer_8_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_7_last_value", "$g_presentation_obj_custom_battle_designer_8_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", 0),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_7", "$g_presentation_obj_custom_battle_designer_7_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_8", "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(try_end),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_6_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_12", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_7_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_13", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_14", "str_reg0_percent"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_7"),
				(try_begin),
					(eq, "$g_presentation_obj_custom_battle_designer_7_locked", 1),
					(neq, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_7_last_value"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_7", "$g_presentation_obj_custom_battle_designer_7_last_value"),
				(else_try),
					(try_begin),
						(lt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_7_last_value"),
						(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_7_last_value", ":trigger_param_2"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_6_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_8_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", ":trigger_param_2"),
						(val_add, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_7"),
						(val_add, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_8"),
						(try_begin),
							(gt, "$g_presentation_obj_custom_battle_designer_6_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_6_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", 100),
						(else_try),
							(gt, "$g_presentation_obj_custom_battle_designer_8_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_8_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", 100),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_6", "$g_presentation_obj_custom_battle_designer_6_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_8", "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(else_try),
						(gt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_7_last_value"),
						(store_sub, ":value_6", ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_7_last_value"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_6_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_8_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", ":trigger_param_2"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_7"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_8_last_value", ":value_8"),
						(try_begin),
							(lt, "$g_presentation_obj_custom_battle_designer_6_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_8_last_value", "$g_presentation_obj_custom_battle_designer_6_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", 0),
						(else_try),
							(lt, "$g_presentation_obj_custom_battle_designer_8_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_6_last_value", "$g_presentation_obj_custom_battle_designer_8_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", 0),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_6", "$g_presentation_obj_custom_battle_designer_6_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_8", "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(try_end),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_6_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_12", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_7_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_13", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_14", "str_reg0_percent"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_8"),
				(try_begin),
					(eq, "$g_presentation_obj_custom_battle_designer_8_locked", 1),
					(neq, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_8", "$g_presentation_obj_custom_battle_designer_8_last_value"),
				(else_try),
					(try_begin),
						(lt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_8_last_value"),
						(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_8_last_value", ":trigger_param_2"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_7_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_6_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", ":trigger_param_2"),
						(val_add, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_7"),
						(val_add, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_8"),
						(try_begin),
							(gt, "$g_presentation_obj_custom_battle_designer_7_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_7_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", 100),
						(else_try),
							(gt, "$g_presentation_obj_custom_battle_designer_6_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_6_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", 100),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_7", "$g_presentation_obj_custom_battle_designer_7_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_6", "$g_presentation_obj_custom_battle_designer_6_last_value"),
					(else_try),
						(gt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_8_last_value"),
						(store_sub, ":value_6", ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_8_last_value"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_7_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_6_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_8_last_value", ":trigger_param_2"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_7_last_value", ":value_7"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_6_last_value", ":value_8"),
						(try_begin),
							(lt, "$g_presentation_obj_custom_battle_designer_7_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_6_last_value", "$g_presentation_obj_custom_battle_designer_7_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_7_last_value", 0),
						(else_try),
							(lt, "$g_presentation_obj_custom_battle_designer_6_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_7_last_value", "$g_presentation_obj_custom_battle_designer_6_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_6_last_value", 0),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_7", "$g_presentation_obj_custom_battle_designer_7_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_6", "$g_presentation_obj_custom_battle_designer_6_last_value"),
					(try_end),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_6_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_12", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_7_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_13", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_8_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_14", "str_reg0_percent"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_9"),
				(try_begin),
					(eq, "$g_presentation_obj_custom_battle_designer_9_locked", 1),
					(neq, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_9_last_value"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_9", "$g_presentation_obj_custom_battle_designer_9_last_value"),
				(else_try),
					(try_begin),
						(lt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_9_last_value"),
						(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_9_last_value", ":trigger_param_2"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_10_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_11_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", ":trigger_param_2"),
						(val_add, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_7"),
						(val_add, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_8"),
						(try_begin),
							(gt, "$g_presentation_obj_custom_battle_designer_10_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_10_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", 100),
						(else_try),
							(gt, "$g_presentation_obj_custom_battle_designer_11_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_11_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", 100),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_10", "$g_presentation_obj_custom_battle_designer_10_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_11", "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(else_try),
						(gt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_9_last_value"),
						(store_sub, ":value_6", ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_9_last_value"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_10_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_11_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", ":trigger_param_2"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_7"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_8"),
						(try_begin),
							(lt, "$g_presentation_obj_custom_battle_designer_10_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_11_last_value", "$g_presentation_obj_custom_battle_designer_10_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", 0),
						(else_try),
							(lt, "$g_presentation_obj_custom_battle_designer_11_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_10_last_value", "$g_presentation_obj_custom_battle_designer_11_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", 0),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_10", "$g_presentation_obj_custom_battle_designer_10_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_11", "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(try_end),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_9_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_15", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_10_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_16", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_17", "str_reg0_percent"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_10"),
				(try_begin),
					(eq, "$g_presentation_obj_custom_battle_designer_10_locked", 1),
					(neq, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_10_last_value"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_10", "$g_presentation_obj_custom_battle_designer_10_last_value"),
				(else_try),
					(try_begin),
						(lt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_10_last_value"),
						(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_10_last_value", ":trigger_param_2"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_9_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_11_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", ":trigger_param_2"),
						(val_add, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_7"),
						(val_add, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_8"),
						(try_begin),
							(gt, "$g_presentation_obj_custom_battle_designer_9_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_9_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", 100),
						(else_try),
							(gt, "$g_presentation_obj_custom_battle_designer_11_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_11_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", 100),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_9", "$g_presentation_obj_custom_battle_designer_9_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_11", "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(else_try),
						(gt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_10_last_value"),
						(store_sub, ":value_6", ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_10_last_value"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_9_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_11_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", ":trigger_param_2"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_7"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_11_last_value", ":value_8"),
						(try_begin),
							(lt, "$g_presentation_obj_custom_battle_designer_9_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_11_last_value", "$g_presentation_obj_custom_battle_designer_9_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", 0),
						(else_try),
							(lt, "$g_presentation_obj_custom_battle_designer_11_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_9_last_value", "$g_presentation_obj_custom_battle_designer_11_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", 0),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_9", "$g_presentation_obj_custom_battle_designer_9_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_11", "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(try_end),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_9_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_15", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_10_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_16", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_17", "str_reg0_percent"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_11"),
				(try_begin),
					(eq, "$g_presentation_obj_custom_battle_designer_11_locked", 1),
					(neq, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(overlay_set_val, "$g_presentation_obj_custom_battle_designer_11", "$g_presentation_obj_custom_battle_designer_11_last_value"),
				(else_try),
					(try_begin),
						(lt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_11_last_value"),
						(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_11_last_value", ":trigger_param_2"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_10_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_9_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", ":trigger_param_2"),
						(val_add, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_7"),
						(val_add, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_8"),
						(try_begin),
							(gt, "$g_presentation_obj_custom_battle_designer_10_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_10_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", 100),
						(else_try),
							(gt, "$g_presentation_obj_custom_battle_designer_9_last_value", 100),
							(store_sub, ":value_6", "$g_presentation_obj_custom_battle_designer_9_last_value", 100),
							(val_add, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_6"),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", 100),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_10", "$g_presentation_obj_custom_battle_designer_10_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_9", "$g_presentation_obj_custom_battle_designer_9_last_value"),
					(else_try),
						(gt, ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_11_last_value"),
						(store_sub, ":value_6", ":trigger_param_2", "$g_presentation_obj_custom_battle_designer_11_last_value"),
						(try_begin),
							(eq, "$g_presentation_obj_custom_battle_designer_10_locked", 1),
							(assign, ":value_7", 0),
							(assign, ":value_8", ":value_6"),
						(else_try),
							(eq, "$g_presentation_obj_custom_battle_designer_9_locked", 1),
							(assign, ":value_7", ":value_6"),
							(assign, ":value_8", 0),
						(else_try),
							(store_div, ":value_7", ":value_6", 2),
							(store_sub, ":value_8", ":value_6", ":value_7"),
							(try_begin),
								(neq, ":value_7", ":value_8"),
								(store_random_in_range, ":random_in_range_0_2_2", 0, 2),
								(eq, ":random_in_range_0_2_2", 0),
								(val_sub, ":value_8", 1),
								(val_add, ":value_7", 1),
							(try_end),
						(try_end),
						(assign, "$g_presentation_obj_custom_battle_designer_11_last_value", ":trigger_param_2"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_10_last_value", ":value_7"),
						(val_sub, "$g_presentation_obj_custom_battle_designer_9_last_value", ":value_8"),
						(try_begin),
							(lt, "$g_presentation_obj_custom_battle_designer_10_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_9_last_value", "$g_presentation_obj_custom_battle_designer_10_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_10_last_value", 0),
						(else_try),
							(lt, "$g_presentation_obj_custom_battle_designer_9_last_value", 0),
							(val_add, "$g_presentation_obj_custom_battle_designer_10_last_value", "$g_presentation_obj_custom_battle_designer_9_last_value"),
							(assign, "$g_presentation_obj_custom_battle_designer_9_last_value", 0),
						(try_end),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_10", "$g_presentation_obj_custom_battle_designer_10_last_value"),
						(overlay_set_val, "$g_presentation_obj_custom_battle_designer_9", "$g_presentation_obj_custom_battle_designer_9_last_value"),
					(try_end),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_9_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_15", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_10_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_16", "str_reg0_percent"),
					(assign, reg0, "$g_presentation_obj_custom_battle_designer_11_last_value"),
					(overlay_set_text, "$g_presentation_obj_custom_battle_designer_17", "str_reg0_percent"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_19"),
				(assign, "$g_is_quick_battle", 1),
				(assign, ":var_18", "$g_quick_battle_map"),
				(try_begin),
					(eq, "$g_quick_battle_game_type", 0),
					(assign, ":value_9", "mt_quick_battle_battle"),
					(modify_visitors_at_site, ":var_18"),
					(call_script, "script_spawn_quick_battle_army", 0, "$g_quick_battle_team_1_faction", "$g_presentation_obj_custom_battle_designer_6_last_value", "$g_presentation_obj_custom_battle_designer_7_last_value", "$g_presentation_obj_custom_battle_designer_8_last_value", 0, 1),
					(call_script, "script_spawn_quick_battle_army", 16, "$g_quick_battle_team_2_faction", "$g_presentation_obj_custom_battle_designer_9_last_value", "$g_presentation_obj_custom_battle_designer_10_last_value", "$g_presentation_obj_custom_battle_designer_11_last_value", 0, 0),
				(else_try),
					(eq, "$g_quick_battle_game_type", 1),
					(assign, ":value_9", "mt_quick_battle_siege"),
					(modify_visitors_at_site, ":var_18"),
					(call_script, "script_spawn_quick_battle_army", 16, "$g_quick_battle_team_1_faction", "$g_presentation_obj_custom_battle_designer_6_last_value", "$g_presentation_obj_custom_battle_designer_7_last_value", "$g_presentation_obj_custom_battle_designer_8_last_value", 0, 1),
					(call_script, "script_spawn_quick_battle_army", 0, "$g_quick_battle_team_2_faction", "$g_presentation_obj_custom_battle_designer_9_last_value", "$g_presentation_obj_custom_battle_designer_10_last_value", "$g_presentation_obj_custom_battle_designer_11_last_value", 1, 0),
				(else_try),
					(assign, ":value_9", "mt_quick_battle_siege"),
					(modify_visitors_at_site, ":var_18"),
					(call_script, "script_spawn_quick_battle_army", 0, "$g_quick_battle_team_1_faction", "$g_presentation_obj_custom_battle_designer_6_last_value", "$g_presentation_obj_custom_battle_designer_7_last_value", "$g_presentation_obj_custom_battle_designer_8_last_value", 1, 1),
					(call_script, "script_spawn_quick_battle_army", 16, "$g_quick_battle_team_2_faction", "$g_presentation_obj_custom_battle_designer_9_last_value", "$g_presentation_obj_custom_battle_designer_10_last_value", "$g_presentation_obj_custom_battle_designer_11_last_value", 0, 0),
				(try_end),
				(set_jump_mission, ":value_9"),
				(jump_to_menu, "mnu_custom_battle_end"),
				(jump_to_scene, ":var_18"),
				(change_screen_mission),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_20"),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_6"),
			(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_7"),
			(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_8"),
			(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_9"),
			(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_10"),
			(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_11"),
			(try_begin),
				(eq, ":trigger_param_2", 1),
				(try_begin),
					(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_last_mouse_over_object"),
					(assign, "$g_presentation_obj_custom_battle_last_mouse_over_object", -1),
				(try_end),
			(else_try),
				(assign, "$g_presentation_obj_custom_battle_last_mouse_over_object", ":trigger_param_1"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
			(else_try),
				(key_clicked, 225),
				(neq, "$g_presentation_obj_custom_battle_last_mouse_over_object", -1),
				(try_begin),
					(eq, "$g_presentation_obj_custom_battle_last_mouse_over_object", "$g_presentation_obj_custom_battle_designer_6"),
					(try_begin),
						(eq, "$g_presentation_obj_custom_battle_designer_6_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_6_locked", 1),
						(assign, "$g_presentation_obj_custom_battle_designer_7_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_8_locked", 0),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_6_locked", 0),
					(try_end),
				(else_try),
					(eq, "$g_presentation_obj_custom_battle_last_mouse_over_object", "$g_presentation_obj_custom_battle_designer_7"),
					(try_begin),
						(eq, "$g_presentation_obj_custom_battle_designer_7_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_6_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_7_locked", 1),
						(assign, "$g_presentation_obj_custom_battle_designer_8_locked", 0),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_7_locked", 0),
					(try_end),
				(else_try),
					(eq, "$g_presentation_obj_custom_battle_last_mouse_over_object", "$g_presentation_obj_custom_battle_designer_8"),
					(try_begin),
						(eq, "$g_presentation_obj_custom_battle_designer_8_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_6_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_7_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_8_locked", 1),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_8_locked", 0),
					(try_end),
				(else_try),
					(eq, "$g_presentation_obj_custom_battle_last_mouse_over_object", "$g_presentation_obj_custom_battle_designer_9"),
					(try_begin),
						(eq, "$g_presentation_obj_custom_battle_designer_9_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_9_locked", 1),
						(assign, "$g_presentation_obj_custom_battle_designer_10_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_11_locked", 0),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_9_locked", 0),
					(try_end),
				(else_try),
					(eq, "$g_presentation_obj_custom_battle_last_mouse_over_object", "$g_presentation_obj_custom_battle_designer_10"),
					(try_begin),
						(eq, "$g_presentation_obj_custom_battle_designer_10_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_9_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_10_locked", 1),
						(assign, "$g_presentation_obj_custom_battle_designer_11_locked", 0),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_10_locked", 0),
					(try_end),
				(else_try),
					(eq, "$g_presentation_obj_custom_battle_last_mouse_over_object", "$g_presentation_obj_custom_battle_designer_11"),
					(try_begin),
						(eq, "$g_presentation_obj_custom_battle_designer_11_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_9_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_10_locked", 0),
						(assign, "$g_presentation_obj_custom_battle_designer_11_locked", 1),
					(else_try),
						(assign, "$g_presentation_obj_custom_battle_designer_11_locked", 0),
					(try_end),
				(try_end),
			(try_end)
		])
	]),

	("game_multiplayer_admin_panel", prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_1"),
				(assign, ":value", "mesh_mp_ui_host_maps_1"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_2"),
				(assign, ":value", "mesh_mp_ui_host_maps_2"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_3"),
				(assign, ":value", "mesh_mp_ui_host_maps_3"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_4"),
				(assign, ":value", "mesh_mp_ui_host_maps_4"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_5"),
				(assign, ":value", "mesh_mp_ui_host_maps_5"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_6"),
				(assign, ":value", "mesh_mp_ui_host_maps_6"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_7"),
				(assign, ":value", "mesh_mp_ui_host_maps_7"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_8"),
				(assign, ":value", "mesh_mp_ui_host_maps_8"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_9"),
				(assign, ":value", "mesh_mp_ui_host_maps_9"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_10"),
				(assign, ":value", "mesh_mp_ui_host_maps_10"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_11"),
				(assign, ":value", "mesh_mp_ui_host_maps_11"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_12"),
				(assign, ":value", "mesh_mp_ui_host_maps_12"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_13"),
				(assign, ":value", "mesh_mp_ui_host_maps_13"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_14"),
				(assign, ":value", "mesh_mp_ui_host_maps_14"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_15"),
				(assign, ":value", "mesh_mp_ui_host_maps_15"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_16"),
				(assign, ":value", "mesh_mp_ui_host_maps_16"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_17"),
				(assign, ":value", "mesh_mp_ui_host_maps_17"),
			(else_try),
				(eq, "$g_multiplayer_selected_map", "scn_multi_scene_18"),
				(assign, ":value", "mesh_mp_ui_host_maps_18"),
			(else_try),
				(this_or_next|eq, "$g_multiplayer_selected_map", "scn_random_multi_plain_medium"),
				(eq, "$g_multiplayer_selected_map", "scn_random_multi_plain_large"),
				(assign, ":value", "mesh_mp_ui_host_maps_randomp"),
			(else_try),
				(this_or_next|eq, "$g_multiplayer_selected_map", "scn_random_multi_steppe_medium"),
				(eq, "$g_multiplayer_selected_map", "scn_random_multi_steppe_large"),
				(assign, ":value", "mesh_mp_ui_host_maps_randoms"),
			(else_try),
				(assign, ":value", "mesh_mp_ui_host_maps_randomp"),
			(try_end),
			(create_mesh_overlay, reg0, ":value"),
			(position_set_x, 1, -1),
			(position_set_y, 1, 550),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1002),
			(position_set_y, 1, 1002),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_mp_ui_host_main"),
			(position_set_x, 1, -1),
			(position_set_y, 1, -1),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1002),
			(position_set_y, 1, 1002),
			(overlay_set_size, reg0, 1),
			(assign, ":var_2", 1240),
			(assign, ":var_3", 40),
			(try_begin),
				(this_or_next|eq, "$g_multiplayer_game_type", 1),
				(this_or_next|eq, "$g_multiplayer_game_type", 2),
				(this_or_next|eq, "$g_multiplayer_game_type", 3),
				(this_or_next|eq, "$g_multiplayer_game_type", 4),
				(this_or_next|eq, "$g_multiplayer_game_type", 5),
				(eq, "$g_multiplayer_game_type", 6),
				(val_add, ":var_2", ":var_3"),
				(val_add, ":var_2", ":var_3"),
				(this_or_next|eq, "$g_multiplayer_game_type", 4),
				(this_or_next|eq, "$g_multiplayer_game_type", 2),
				(this_or_next|eq, "$g_multiplayer_game_type", 3),
				(eq, "$g_multiplayer_game_type", 6),
				(val_add, ":var_2", ":var_3"),
				(this_or_next|eq, "$g_multiplayer_game_type", 2),
				(this_or_next|eq, "$g_multiplayer_game_type", 3),
				(eq, "$g_multiplayer_game_type", 6),
				(val_add, ":var_2", ":var_3"),
				(this_or_next|eq, "$g_multiplayer_game_type", 2),
				(this_or_next|eq, "$g_multiplayer_game_type", 3),
				(eq, "$g_multiplayer_game_type", 6),
				(val_add, ":var_2", ":var_3"),
			(try_end),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_admin_panel_container", 0, 8192),
			(position_set_x, 1, 59),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_admin_panel_container", 1),
			(position_set_x, 1, 640),
			(position_set_y, 1, 520),
			(overlay_set_area_size, "$g_presentation_obj_admin_panel_container", 1),
			(set_container_overlay, "$g_presentation_obj_admin_panel_container"),
			(create_text_overlay, reg0, "str_add_to_official_game_servers_list", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_14", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_14", 1),
			(server_get_add_to_game_servers_list, ":server_add_to_game_servers_list"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_14", ":server_add_to_game_servers_list"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_enable_valve_anti_cheat", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_41", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_41", 1),
			(server_get_anti_cheat, ":server_anti_cheat"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_41", ":server_anti_cheat"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_server_name", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(str_store_server_name, 0),
			(try_begin),
				(eq, "$g_multiplayer_renaming_server_allowed", 1),
				(create_simple_text_box_overlay, "$g_presentation_obj_admin_panel_20"),
				(position_set_x, 1, 390),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_20", 1),
				(overlay_set_text, "$g_presentation_obj_admin_panel_20", 0),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_20", -1),
				(create_text_overlay, reg0, 0, 0),
				(position_set_x, 1, 385),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
			(try_end),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_game_password", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_simple_text_box_overlay, "$g_presentation_obj_admin_panel_9"),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_9", 1),
			(str_store_server_password, 0),
			(overlay_set_text, "$g_presentation_obj_admin_panel_9", 0),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_welcome_message", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_simple_text_box_overlay, "$g_presentation_obj_admin_panel_32"),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_32", 1),
			(str_store_welcome_message, 0),
			(overlay_set_text, "$g_presentation_obj_admin_panel_32", 0),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_map", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(call_script, "script_multiplayer_fill_map_game_types", "$g_multiplayer_game_type"),
			(assign, ":var_7", reg0),
			(assign, ":value_3", 0),
			(try_begin),
				(gt, ":var_7", 12),
				(create_combo_label_overlay, "$g_presentation_obj_admin_panel_1"),
			(else_try),
				(create_combo_button_overlay, "$g_presentation_obj_admin_panel_1"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_admin_panel_1", 1),
			(try_begin),
				(gt, ":var_7", 14),
				(position_set_x, 1, 465),
			(else_try),
				(position_set_x, 1, 490),
			(try_end),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_1", 1),
			(troop_get_slot, ":multiplayer_data_relations_begin", "trp_multiplayer_data", slot_troop_relations_begin),
			(assign, ":value_4", 0),
			(try_for_range, ":number", 0, ":var_7"),
				(store_add, ":value_5", ":number", 0),
				(troop_get_slot, ":multiplayer_data_value_5", "trp_multiplayer_data", ":value_5"),
				(store_sub, ":value_6", ":multiplayer_data_value_5", "scn_multi_scene_1"),
				(val_add, ":value_6", "str_multi_scene_1"),
				(str_store_string, 0, ":value_6"),
				(overlay_add_item, "$g_presentation_obj_admin_panel_1", 0),
				(try_begin),
					(eq, ":multiplayer_data_value_5", "$g_multiplayer_selected_map"),
					(assign, ":value_3", ":number"),
					(assign, ":value_4", 1),
				(try_end),
			(try_end),
			(overlay_set_val, "$g_presentation_obj_admin_panel_1", ":value_3"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_game_type", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(eq, "$g_multiplayer_changing_game_type_allowed", 1),
				(create_combo_button_overlay, "$g_presentation_obj_admin_panel_10"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, "$g_presentation_obj_admin_panel_10", 1),
				(position_set_x, 1, 490),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_10", 1),
				(try_for_range, ":number_2", 0, 8),
					(store_add, ":value_6", ":number_2", "str_multi_game_type_1"),
					(str_store_string, 0, ":value_6"),
					(overlay_add_item, "$g_presentation_obj_admin_panel_10", 0),
				(try_end),
				(overlay_set_val, "$g_presentation_obj_admin_panel_10", "$g_multiplayer_game_type"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_10", -1),
				(store_add, ":value_6", "$g_multiplayer_game_type", "str_multi_game_type_1"),
				(str_store_string, 0, ":value_6"),
				(create_text_overlay, reg0, 0, 0),
				(position_set_x, 1, 385),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
			(try_end),
			(val_sub, ":var_2", ":var_3"),
			(assign, reg1, 1),
			(create_text_overlay, reg0, "str_team_reg1_faction", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_combo_button_overlay, "$g_presentation_obj_admin_panel_11"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_admin_panel_11", 1),
			(position_set_x, 1, 490),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_11", 1),
			(call_script, "script_multiplayer_fill_available_factions_combo_button", "$g_presentation_obj_admin_panel_11", "$g_multiplayer_next_team_1_faction", "$g_multiplayer_next_team_2_faction"),
			(val_sub, ":var_2", ":var_3"),
			(assign, reg1, 2),
			(create_text_overlay, reg0, "str_team_reg1_faction", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_combo_button_overlay, "$g_presentation_obj_admin_panel_12"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_admin_panel_12", 1),
			(position_set_x, 1, 490),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_12", 1),
			(call_script, "script_multiplayer_fill_available_factions_combo_button", "$g_presentation_obj_admin_panel_12", "$g_multiplayer_next_team_2_faction", "$g_multiplayer_next_team_1_faction"),
			(val_sub, ":var_2", ":var_3"),
			(assign, reg1, 1),
			(create_text_overlay, reg0, "str_max_number_of_players", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_21", 2, 65),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_21", 1),
			(server_get_max_num_players, ":server_max_num_players"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_21", ":server_max_num_players"),
			(val_sub, ":var_2", ":var_3"),
			(assign, reg1, 1),
			(create_text_overlay, reg0, "str_number_of_bots_in_team_reg1", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_3", 0, "$g_multiplayer_max_num_bots"),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_3", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_3", "$g_multiplayer_num_bots_team_1"),
			(val_sub, ":var_2", ":var_3"),
			(assign, reg1, 2),
			(create_text_overlay, reg0, "str_number_of_bots_in_team_reg1", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_4", 0, "$g_multiplayer_max_num_bots"),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_4", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_4", "$g_multiplayer_num_bots_team_2"),
			(try_begin),
				(neq, "$g_multiplayer_game_type", 0),
				(neq, "$g_multiplayer_game_type", 7),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_allow_friendly_fire", 0),
				(position_set_x, 1, 30),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_check_box_overlay, "$g_presentation_obj_admin_panel_5", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 1, 7),
				(store_add, ":value_2", ":var_2", 7),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_5", 1),
				(server_get_friendly_fire, ":server_friendly_fire"),
				(overlay_set_val, "$g_presentation_obj_admin_panel_5", ":server_friendly_fire"),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_allow_melee_friendly_fire", 0),
				(position_set_x, 1, 30),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_check_box_overlay, "$g_presentation_obj_admin_panel_36", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 1, 7),
				(store_add, ":value_2", ":var_2", 7),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_36", 1),
				(server_get_melee_friendly_fire, ":server_melee_friendly_fire"),
				(overlay_set_val, "$g_presentation_obj_admin_panel_36", ":server_melee_friendly_fire"),
			(try_end),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_friendly_fire_damage_self_ratio", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_37", 0, 101),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_37", 1),
			(server_get_friendly_fire_damage_self_ratio, ":server_friendly_fire_damage_self_ratio"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_37", ":server_friendly_fire_damage_self_ratio"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_friendly_fire_damage_friend_ratio", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_38", 0, 101),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_38", 1),
			(server_get_friendly_fire_damage_friend_ratio, ":server_friendly_fire_damage_friend_ratio"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_38", ":server_friendly_fire_damage_friend_ratio"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_spectator_camera", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_combo_button_overlay, "$g_presentation_obj_admin_panel_19"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_admin_panel_19", 1),
			(position_set_x, 1, 490),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_19", 1),
			(overlay_add_item, "$g_presentation_obj_admin_panel_19", "str_free"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_19", "str_stick_to_any_player"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_19", "str_stick_to_team_members"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_19", "str_stick_to_team_members_view"),
			(server_get_ghost_mode, ":server_ghost_mode"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_19", ":server_ghost_mode"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_control_block_direction", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_combo_button_overlay, "$g_presentation_obj_admin_panel_15"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_admin_panel_15", 1),
			(position_set_x, 1, 490),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_15", 1),
			(overlay_add_item, "$g_presentation_obj_admin_panel_15", "str_automatic"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_15", "str_by_mouse_movement"),
			(server_get_control_block_dir, ":server_control_block_dir"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_15", ":server_control_block_dir"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_combat_speed", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_combo_button_overlay, "$g_presentation_obj_admin_panel_26"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_admin_panel_26", 1),
			(position_set_x, 1, 490),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_26", 1),
			(overlay_add_item, "$g_presentation_obj_admin_panel_26", "str_combat_speed_0"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_26", "str_combat_speed_1"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_26", "str_combat_speed_2"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_26", "str_combat_speed_3"),
			(overlay_add_item, "$g_presentation_obj_admin_panel_26", "str_combat_speed_4"),
			(server_get_combat_speed, ":server_combat_speed"),
			(overlay_set_val, "$g_presentation_obj_admin_panel_26", ":server_combat_speed"),
			(try_begin),
				(neq, "$g_multiplayer_game_type", 5),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_map_time_limit", 0),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_number_box_overlay, "$g_presentation_obj_admin_panel_7", 5, 121),
				(position_set_x, 1, 390),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_7", 1),
				(overlay_set_val, "$g_presentation_obj_admin_panel_7", "$g_multiplayer_game_max_minutes"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_7", -1),
			(try_end),
			(try_begin),
				(this_or_next|eq, "$g_multiplayer_game_type", 2),
				(this_or_next|eq, "$g_multiplayer_game_type", 3),
				(eq, "$g_multiplayer_game_type", 6),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_round_time_limit", 0),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_number_box_overlay, "$g_presentation_obj_admin_panel_16", 60, 901),
				(position_set_x, 1, 390),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_16", 1),
				(overlay_set_val, "$g_presentation_obj_admin_panel_16", "$g_multiplayer_round_max_seconds"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_16", -1),
			(try_end),
			(try_begin),
				(this_or_next|eq, "$g_multiplayer_game_type", 2),
				(eq, "$g_multiplayer_game_type", 3),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_players_take_control_of_a_bot_after_death", 0),
				(position_set_x, 1, 30),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_check_box_overlay, "$g_presentation_obj_admin_panel_25", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 1, 7),
				(store_add, ":value_2", ":var_2", 7),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_25", 1),
				(overlay_set_val, "$g_presentation_obj_admin_panel_25", "$g_multiplayer_player_respawn_as_bot"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_25", -1),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_game_type", 6),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_defender_spawn_count_limit", 0),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_combo_button_overlay, "$g_presentation_obj_admin_panel_27"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, "$g_presentation_obj_admin_panel_27", 1),
				(position_set_x, 1, 490),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_27", 1),
				(assign, reg0, 5),
				(overlay_add_item, "$g_presentation_obj_admin_panel_27", "str_reg0"),
				(assign, reg0, 4),
				(overlay_add_item, "$g_presentation_obj_admin_panel_27", "str_reg0"),
				(assign, reg0, 3),
				(overlay_add_item, "$g_presentation_obj_admin_panel_27", "str_reg0"),
				(assign, reg0, 2),
				(overlay_add_item, "$g_presentation_obj_admin_panel_27", "str_reg0"),
				(assign, reg0, 1),
				(overlay_add_item, "$g_presentation_obj_admin_panel_27", "str_reg0"),
				(overlay_add_item, "$g_presentation_obj_admin_panel_27", "str_unlimited"),
				(store_sub, ":value_7", 5, "$g_multiplayer_number_of_respawn_count"),
				(overlay_set_val, "$g_presentation_obj_admin_panel_27", ":value_7"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_27", -1),
			(try_end),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_team_points_limit", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_8", 3, 1001),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_8", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_8", "$g_multiplayer_game_max_points"),
			(try_begin),
				(eq, "$g_multiplayer_game_type", 5),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_point_gained_from_flags", 0),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_number_box_overlay, "$g_presentation_obj_admin_panel_17", 25, 401),
				(position_set_x, 1, 390),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_17", 1),
				(overlay_set_val, "$g_presentation_obj_admin_panel_17", "$g_multiplayer_point_gained_from_flags"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_17", -1),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_game_type", 4),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_point_gained_from_capturing_flag", 0),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_number_box_overlay, "$g_presentation_obj_admin_panel_18", 0, 11),
				(position_set_x, 1, 390),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_18", 1),
				(overlay_set_val, "$g_presentation_obj_admin_panel_18", "$g_multiplayer_point_gained_from_capturing_flag"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_18", -1),
			(try_end),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_respawn_period", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_6", 3, 31),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_6", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_6", "$g_multiplayer_respawn_period"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_initial_gold_multiplier", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_33", 0, 1001),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_33", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_33", "$g_multiplayer_initial_gold_multiplier"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_battle_earnings_multiplier", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_34", 0, 1001),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_34", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_34", "$g_multiplayer_battle_earnings_multiplier"),
			(try_begin),
				(this_or_next|eq, "$g_multiplayer_game_type", 2),
				(this_or_next|eq, "$g_multiplayer_game_type", 3),
				(eq, "$g_multiplayer_game_type", 6),
				(val_sub, ":var_2", ":var_3"),
				(create_text_overlay, reg0, "str_round_earnings_multiplier", 0),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg0, 1),
				(create_number_box_overlay, "$g_presentation_obj_admin_panel_35", 0, 1001),
				(position_set_x, 1, 390),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, "$g_presentation_obj_admin_panel_35", 1),
				(overlay_set_val, "$g_presentation_obj_admin_panel_35", "$g_multiplayer_round_earnings_multiplier"),
			(else_try),
				(assign, "$g_presentation_obj_admin_panel_35", -1),
			(try_end),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_make_kick_voteable", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_28", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_28", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_28", "$g_multiplayer_kick_voteable"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_make_ban_voteable", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_29", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_29", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_29", "$g_multiplayer_ban_voteable"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_make_maps_voteable", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_24", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_24", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_24", "$g_multiplayer_maps_voteable"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_make_factions_voteable", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_23", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_23", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_23", "$g_multiplayer_factions_voteable"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_bots_upper_limit_for_votes", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(assign, ":var_25", 51),
			(val_min, ":var_25", "$g_multiplayer_max_num_bots"),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_22", 0, ":var_25"),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_22", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_22", "$g_multiplayer_num_bots_voteable"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_valid_vote_ratio", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_admin_panel_30", 50, 101),
			(position_set_x, 1, 390),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_30", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_30", "$g_multiplayer_valid_vote_ratio"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_auto_team_balance_limit", 0),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_combo_button_overlay, "$g_presentation_obj_admin_panel_31"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_admin_panel_31", 1),
			(position_set_x, 1, 490),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_31", 1),
			(overlay_add_item, "$g_presentation_obj_admin_panel_31", "str_unlimited"),
			(assign, reg0, 6),
			(overlay_add_item, "$g_presentation_obj_admin_panel_31", "str_reg0"),
			(assign, reg0, 5),
			(overlay_add_item, "$g_presentation_obj_admin_panel_31", "str_reg0"),
			(assign, reg0, 4),
			(overlay_add_item, "$g_presentation_obj_admin_panel_31", "str_reg0"),
			(assign, reg0, 3),
			(overlay_add_item, "$g_presentation_obj_admin_panel_31", "str_reg0"),
			(assign, reg0, 2),
			(overlay_add_item, "$g_presentation_obj_admin_panel_31", "str_reg0"),
			(try_begin),
				(ge, "$g_multiplayer_auto_team_balance_limit", 1000),
				(overlay_set_val, "$g_presentation_obj_admin_panel_31", 0),
			(else_try),
				(store_sub, ":value_8", 7, "$g_multiplayer_auto_team_balance_limit"),
				(overlay_set_val, "$g_presentation_obj_admin_panel_31", ":value_8"),
			(try_end),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_allow_player_banners", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_39", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_39", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_39", "$g_multiplayer_allow_player_banners"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_disallow_ranged_weapons", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_42", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_42", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_42", "$g_multiplayer_disallow_ranged_weapons"),
			(val_sub, ":var_2", ":var_3"),
			(create_text_overlay, reg0, "str_force_default_armor", 0),
			(position_set_x, 1, 30),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_admin_panel_40", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 7),
			(store_add, ":value_2", ":var_2", 7),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_admin_panel_40", 1),
			(overlay_set_val, "$g_presentation_obj_admin_panel_40", "$g_multiplayer_force_default_armor"),
			(set_container_overlay, -1),
			(create_button_overlay, "$g_presentation_obj_admin_panel_13", "str_back", 16),
			(position_set_x, 1, 825),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_admin_panel_13", 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, "$g_presentation_obj_admin_panel_13", 1),
			(create_button_overlay, "$g_presentation_obj_admin_panel_2", "str_start_map", 16),
			(position_set_x, 1, 825),
			(position_set_y, 1, 90),
			(overlay_set_position, "$g_presentation_obj_admin_panel_2", 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, "$g_presentation_obj_admin_panel_2", 1),
			(presentation_set_duration, 999999),
			(try_begin),
				(eq, ":value_4", 0),
				(assign, "$g_multiplayer_selected_map", ":multiplayer_data_relations_begin"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_multiplayer_admin_panel"),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_1"),
				(store_add, ":value", ":trigger_param_2", 0),
				(troop_get_slot, "$g_multiplayer_selected_map", "trp_multiplayer_data", ":value"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_multiplayer_admin_panel"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_2"),
				(multiplayer_send_2_int_to_server, 2, "$g_multiplayer_selected_map", "$g_multiplayer_game_type"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_3"),
				(multiplayer_send_2_int_to_server, 4, 1, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_4"),
				(multiplayer_send_2_int_to_server, 4, 2, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_5"),
				(multiplayer_send_int_to_server, 5, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_6"),
				(multiplayer_send_int_to_server, 9, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_7"),
				(multiplayer_send_int_to_server, 10, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_8"),
				(multiplayer_send_int_to_server, 12, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_9"),
				(multiplayer_send_string_to_server, 16, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_10"),
				(assign, "$g_multiplayer_game_type", ":trigger_param_2"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_multiplayer_admin_panel"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_11"),
				(store_add, "$g_multiplayer_next_team_1_faction", ":trigger_param_2", "fac_kingdom_1"),
				(multiplayer_send_2_int_to_server, 17, 1, "$g_multiplayer_next_team_1_faction"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_multiplayer_admin_panel"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_12"),
				(store_add, "$g_multiplayer_next_team_2_faction", ":trigger_param_2", "fac_kingdom_1"),
				(multiplayer_send_2_int_to_server, 17, 2, "$g_multiplayer_next_team_2_faction"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_game_multiplayer_admin_panel"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_13"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_14"),
				(multiplayer_send_int_to_server, 8, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_15"),
				(multiplayer_send_int_to_server, 7, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_16"),
				(multiplayer_send_int_to_server, 11, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_17"),
				(multiplayer_send_int_to_server, 13, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_18"),
				(multiplayer_send_int_to_server, 14, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_19"),
				(multiplayer_send_int_to_server, 6, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_20"),
				(multiplayer_send_string_to_server, 15, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_21"),
				(multiplayer_send_int_to_server, 3, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_22"),
				(multiplayer_send_int_to_server, 25, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_23"),
				(multiplayer_send_int_to_server, 26, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_24"),
				(multiplayer_send_int_to_server, 27, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_25"),
				(multiplayer_send_int_to_server, 28, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_26"),
				(multiplayer_send_int_to_server, 29, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_27"),
				(store_sub, ":value_2", 5, ":trigger_param_2"),
				(multiplayer_send_int_to_server, 30, ":value_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_28"),
				(multiplayer_send_int_to_server, 31, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_29"),
				(multiplayer_send_int_to_server, 32, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_30"),
				(multiplayer_send_int_to_server, 33, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_31"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(multiplayer_send_int_to_server, 34, 1000),
				(else_try),
					(store_sub, ":value_2", 7, ":trigger_param_2"),
					(multiplayer_send_int_to_server, 34, ":value_2"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_32"),
				(server_set_welcome_message, 0),
				(multiplayer_send_string_to_server, 35, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_33"),
				(multiplayer_send_int_to_server, 36, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_34"),
				(multiplayer_send_int_to_server, 37, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_35"),
				(multiplayer_send_int_to_server, 38, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_36"),
				(multiplayer_send_int_to_server, 39, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_37"),
				(multiplayer_send_int_to_server, 40, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_38"),
				(multiplayer_send_int_to_server, 41, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_39"),
				(multiplayer_send_int_to_server, 42, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_40"),
				(multiplayer_send_int_to_server, 43, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_41"),
				(multiplayer_send_int_to_server, 44, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_admin_panel_42"),
				(multiplayer_send_int_to_server, 47, ":trigger_param_2"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_welcome_message", prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(str_store_welcome_message, 0),
			(try_begin),
				(neg|str_is_empty, 0),
				(eq, "$g_multiplayer_welcome_message_shown", 0),
				(create_mesh_overlay, reg0, "mesh_mp_ui_welcome_panel"),
				(position_set_x, 1, 200),
				(position_set_y, 1, 400),
				(overlay_set_position, reg0, 1),
				(create_text_overlay, reg0, 0, 8192),
				(overlay_set_color, reg0, 16777215),
				(position_set_x, 1, 230),
				(position_set_y, 1, 425),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 540),
				(position_set_y, 1, 150),
				(overlay_set_area_size, reg0, 1),
				(presentation_set_duration, 999999),
			(else_try),
				(eq, "$g_multiplayer_show_server_rules", 1),
				(create_mesh_overlay, reg0, "mesh_mp_ui_welcome_panel"),
				(position_set_x, 1, 200),
				(position_set_y, 1, 400),
				(overlay_set_position, reg0, 1),
				(try_begin),
					(neg|str_is_empty, 0),
					(str_clear, 3),
					(str_store_string, 2, 0),
					(str_store_string, 2, "str_s2_s3"),
					(str_store_string, 2, "str_s2_s3"),
				(else_try),
					(str_clear, 2),
				(try_end),
				(str_store_string, 3, "@Game Rules:^"),
				(str_store_string, 2, "str_s2_s3"),
				(assign, ":value", 1000),
				(call_script, "script_game_multiplayer_get_game_type_mission_template", "$g_multiplayer_game_type"),
				(assign, ":var_2", reg0),
				(str_store_server_name, 0),
				(str_store_string, 3, "str_server_name_s0"),
				(str_store_string, 2, "str_s2_s3"),
				(try_begin),
					(eq, "$g_multiplayer_game_type", 0),
					(str_store_string, 0, "str_multi_game_type_1"),
				(else_try),
					(eq, "$g_multiplayer_game_type", 1),
					(str_store_string, 0, "str_multi_game_type_2"),
				(else_try),
					(eq, "$g_multiplayer_game_type", 2),
					(str_store_string, 0, "str_multi_game_type_3"),
				(else_try),
					(eq, "$g_multiplayer_game_type", 3),
					(str_store_string, 0, "str_multi_game_type_4"),
				(else_try),
					(eq, "$g_multiplayer_game_type", 4),
					(str_store_string, 0, "str_multi_game_type_5"),
				(else_try),
					(eq, "$g_multiplayer_game_type", 5),
					(str_store_string, 0, "str_multi_game_type_6"),
				(else_try),
					(eq, "$g_multiplayer_game_type", 6),
					(str_store_string, 0, "str_multi_game_type_7"),
				(else_try),
					(eq, "$g_multiplayer_game_type", 7),
					(str_store_string, 0, "str_multi_game_type_8"),
				(try_end),
				(str_store_string, 3, "str_game_type_s0"),
				(str_store_string, 2, "str_s2_s3"),
				(store_current_scene, ":current_scene"),
				(val_sub, ":current_scene", "scn_multi_scene_1"),
				(val_add, ":current_scene", "str_multi_scene_1"),
				(str_store_string, 0, ":current_scene"),
				(str_store_string, 3, "str_map_name_s0"),
				(str_store_string, 2, "str_s2_s3"),
				(store_mission_timer_a, ":mission_timer_a"),
				(val_add, ":mission_timer_a", "$server_mission_timer_while_player_joined"),
				(assign, reg0, ":mission_timer_a"),
				(store_mul, "$g_multiplayer_game_max_seconds", "$g_multiplayer_game_max_minutes", 60),
				(store_sub, ":value_2", "$g_multiplayer_game_max_seconds", ":mission_timer_a"),
				(store_div, reg0, ":value_2", 60),
				(store_mod, reg1, ":value_2", 60),
				(try_begin),
					(ge, reg0, 10),
					(ge, reg1, 10),
					(str_clear, 0),
					(str_clear, 1),
				(else_try),
					(ge, reg0, 10),
					(str_clear, 0),
					(str_store_string, 1, "@0"),
				(else_try),
					(ge, reg1, 10),
					(str_store_string, 0, "@0"),
					(str_clear, 1),
				(else_try),
					(str_store_string, 0, "@0"),
					(str_store_string, 1, "@0"),
				(try_end),
				(str_store_string, 3, "str_remaining_time_s0reg0_s1reg1"),
				(str_store_string, 2, "str_s2_s3"),
				(try_for_range, ":number", 0, ":value"),
					(assign, reg0, -12345),
					(call_script, "script_game_get_multiplayer_server_option_for_mission_template", ":var_2", ":number"),
					(try_begin),
						(eq, reg0, -12345),
						(assign, ":value", 0),
					(else_try),
						(call_script, "script_game_multiplayer_server_option_for_mission_template_to_string", ":var_2", ":number", reg0),
						(str_store_string, 3, 0),
						(str_store_string, 2, "str_s2_s3"),
					(try_end),
				(try_end),
				(create_text_overlay, reg0, 2, 8192),
				(overlay_set_color, reg0, 16777215),
				(position_set_x, 1, 230),
				(position_set_y, 1, 425),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 540),
				(position_set_y, 1, 150),
				(overlay_set_area_size, reg0, 1),
				(presentation_set_duration, 999999),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(str_store_welcome_message, 0),
			(try_begin),
				(neq, "$g_multiplayer_show_server_rules", 1),
				(this_or_next|str_is_empty, 0),
				(eq, "$g_multiplayer_welcome_message_shown", 1),
				(presentation_set_duration, 0),
				(neg|is_presentation_active, "prsnt_multiplayer_escape_menu"),
				(neg|is_presentation_active, "prsnt_multiplayer_team_select"),
				(start_presentation, "prsnt_multiplayer_team_select"),
			(else_try),
				(store_mission_timer_a, ":mission_timer_a"),
				(gt, ":mission_timer_a", 1),
				(this_or_next|key_clicked, 1),
				(this_or_next|key_clicked, 57),
				(this_or_next|key_clicked, 28),
				(this_or_next|key_clicked, 224),
				(key_clicked, 225),
				(assign, "$g_multiplayer_welcome_message_shown", 1),
				(presentation_set_duration, 0),
				(neg|is_presentation_active, "prsnt_multiplayer_escape_menu"),
				(neg|is_presentation_active, "prsnt_multiplayer_team_select"),
				(try_begin),
					(eq, "$g_multiplayer_show_server_rules", 1),
					(assign, "$g_multiplayer_show_server_rules", 0),
					(start_presentation, "prsnt_multiplayer_escape_menu"),
				(else_try),
					(start_presentation, "prsnt_multiplayer_team_select"),
				(try_end),
			(try_end)
		])
	]),

	("multiplayer_team_select", prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_team_select_container", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_team_select_container", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_team_select_container", 1),
			(set_container_overlay, "$g_presentation_obj_team_select_container"),
			(assign, ":var_1", 450),
			(create_text_overlay, reg0, "str_choose_a_faction", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(position_set_x, 1, 100),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(team_get_faction, ":faction_0", 0),
			(str_store_faction_name, 0, ":faction_0"),
			(create_button_overlay, "$g_presentation_obj_team_select_1", 0, 0),
			(try_begin),
				(call_script, "script_cf_multiplayer_team_is_available", ":multiplayer_my_player", 0),
				(overlay_set_color, "$g_presentation_obj_team_select_1", 16777215),
				(overlay_set_hilight_color, "$g_presentation_obj_team_select_1", 5635920),
				(assign, "$g_multiplayer_team_select_1_available", 1),
			(else_try),
				(overlay_set_color, "$g_presentation_obj_team_select_1", 8947848),
				(overlay_set_hilight_color, "$g_presentation_obj_team_select_1", 8947848),
				(assign, "$g_multiplayer_team_select_1_available", 0),
			(try_end),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, "$g_presentation_obj_team_select_1", 1),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(team_get_faction, ":faction_0", 1),
			(str_store_faction_name, 0, ":faction_0"),
			(create_button_overlay, "$g_presentation_obj_team_select_2", 0, 0),
			(try_begin),
				(call_script, "script_cf_multiplayer_team_is_available", ":multiplayer_my_player", 1),
				(overlay_set_color, "$g_presentation_obj_team_select_2", 16777215),
				(overlay_set_hilight_color, "$g_presentation_obj_team_select_2", 5635920),
				(assign, "$g_multiplayer_team_select_2_available", 1),
			(else_try),
				(overlay_set_color, "$g_presentation_obj_team_select_2", 8947848),
				(overlay_set_hilight_color, "$g_presentation_obj_team_select_2", 8947848),
				(assign, "$g_multiplayer_team_select_2_available", 0),
			(try_end),
			(overlay_set_position, "$g_presentation_obj_team_select_2", 1),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(create_button_overlay, "$g_presentation_obj_team_select_3", "str_spectator", 0),
			(overlay_set_color, "$g_presentation_obj_team_select_3", 16777215),
			(overlay_set_position, "$g_presentation_obj_team_select_3", 1),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(try_begin),
				(eq, "$g_waiting_for_confirmation_to_terminate", 0),
				(try_begin),
					(eq, ":trigger_param_1", "$g_presentation_obj_team_select_1"),
					(try_begin),
						(call_script, "script_cf_multiplayer_team_is_available", ":multiplayer_my_player", 0),
						(try_begin),
							(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
							(neq, ":team_no_multiplayer_my_player", 0),
							(assign, "$g_confirmation_result", 0),
							(assign, "$g_waiting_for_confirmation_to_terminate", 1),
							(player_get_troop_id, "$g_confirmation_troop_backup", ":multiplayer_my_player"),
							(player_get_team_no, "$g_confirmation_team_backup", ":multiplayer_my_player"),
							(player_set_troop_id, ":multiplayer_my_player", -1),
							(multiplayer_send_int_to_server, 19, 0),
							(player_set_team_no, ":multiplayer_my_player", 0),
						(else_try),
							(presentation_set_duration, 0),
							(start_presentation, "prsnt_multiplayer_troop_select"),
						(try_end),
					(try_end),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_team_select_2"),
					(try_begin),
						(call_script, "script_cf_multiplayer_team_is_available", ":multiplayer_my_player", 1),
						(try_begin),
							(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
							(neq, ":team_no_multiplayer_my_player", 1),
							(assign, "$g_confirmation_result", 0),
							(assign, "$g_waiting_for_confirmation_to_terminate", 1),
							(player_get_troop_id, "$g_confirmation_troop_backup", ":multiplayer_my_player"),
							(player_get_team_no, "$g_confirmation_team_backup", ":multiplayer_my_player"),
							(player_set_troop_id, ":multiplayer_my_player", -1),
							(multiplayer_send_int_to_server, 19, 1),
							(player_set_team_no, ":multiplayer_my_player", 1),
						(else_try),
							(presentation_set_duration, 0),
							(start_presentation, "prsnt_multiplayer_troop_select"),
						(try_end),
					(try_end),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_team_select_3"),
					(player_set_troop_id, ":multiplayer_my_player", -1),
					(multiplayer_send_int_to_server, 19, 2),
					(player_set_team_no, ":multiplayer_my_player", 2),
					(presentation_set_duration, 0),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(try_begin),
				(key_clicked, 1),
				(eq, "$g_waiting_for_confirmation_to_terminate", 0),
				(multiplayer_get_my_team, ":multiplayer_my_team"),
				(try_begin),
					(eq, ":multiplayer_my_team", 3),
					(player_set_troop_id, ":multiplayer_my_player", -1),
					(multiplayer_send_int_to_server, 19, 2),
					(player_set_team_no, ":multiplayer_my_player", 2),
				(try_end),
				(presentation_set_duration, 0),
			(else_try),
				(eq, "$g_waiting_for_confirmation_to_terminate", 1),
				(eq, "$g_confirmation_result", 1),
				(assign, "$g_waiting_for_confirmation_to_terminate", 0),
				(assign, "$g_confirmation_result", 0),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_troop_select"),
			(else_try),
				(eq, "$g_waiting_for_confirmation_to_terminate", 1),
				(eq, "$g_confirmation_result", -1),
				(player_set_troop_id, ":multiplayer_my_player", "$g_confirmation_troop_backup"),
				(player_set_team_no, ":multiplayer_my_player", "$g_confirmation_team_backup"),
				(assign, "$g_waiting_for_confirmation_to_terminate", 0),
				(assign, "$g_confirmation_result", 0),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_team_select"),
			(else_try),
				(assign, ":value", 0),
				(try_begin),
					(call_script, "script_cf_multiplayer_team_is_available", ":multiplayer_my_player", 0),
					(try_begin),
						(eq, "$g_multiplayer_team_select_1_available", 0),
						(assign, ":value", 1),
					(try_end),
				(else_try),
					(try_begin),
						(eq, "$g_multiplayer_team_select_1_available", 1),
						(assign, ":value", 1),
					(try_end),
				(try_end),
				(try_begin),
					(call_script, "script_cf_multiplayer_team_is_available", ":multiplayer_my_player", 1),
					(try_begin),
						(eq, "$g_multiplayer_team_select_2_available", 0),
						(assign, ":value", 1),
					(try_end),
				(else_try),
					(try_begin),
						(eq, "$g_multiplayer_team_select_2_available", 1),
						(assign, ":value", 1),
					(try_end),
				(try_end),
				(eq, ":value", 1),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_team_select"),
			(try_end)
		])
	]),

	("multiplayer_troop_select", prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_troop_select_container", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_troop_select_container", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_troop_select_container", 1),
			(set_container_overlay, "$g_presentation_obj_troop_select_container"),
			(assign, ":var_1", 450),
			(create_text_overlay, reg0, "str_choose_a_troop", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(position_set_x, 1, 100),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
			(team_get_faction, ":faction_team_no_multiplayer_my_player", ":team_no_multiplayer_my_player"),
			(try_for_range, ":number", 30, 46),
				(troop_set_slot, "trp_multiplayer_data", ":number", -1),
			(try_end),
			(assign, ":var_6", 0),
			(try_for_range, ":troop", "trp_swadian_crossbowman_multiplayer", "trp_multiplayer_end"),
				(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
				(eq, ":faction_of_troop_troop", ":faction_team_no_multiplayer_my_player"),
				(str_store_troop_name, 1, ":troop"),
				(create_button_overlay, reg0, 1, 0),
				(overlay_set_color, reg0, 16777215),
				(store_add, ":value", ":var_6", 30),
				(troop_set_slot, "trp_multiplayer_data", ":value", reg0),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(val_add, ":var_6", 1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
			(team_get_faction, ":faction_team_no_multiplayer_my_player", ":team_no_multiplayer_my_player"),
			(assign, ":value", -1),
			(assign, ":value_2", 46),
			(try_for_range, ":number", 30, ":value_2"),
				(troop_slot_eq, "trp_multiplayer_data", ":number", ":trigger_param_1"),
				(store_sub, ":value_3", ":number", 30),
				(assign, ":value_4", "trp_multiplayer_end"),
				(try_for_range, ":troop", "trp_swadian_crossbowman_multiplayer", ":value_4"),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(eq, ":faction_of_troop_troop", ":faction_team_no_multiplayer_my_player"),
					(val_sub, ":value_3", 1),
					(lt, ":value_3", 0),
					(assign, ":value", ":troop"),
					(assign, ":value_4", 0),
				(try_end),
				(try_begin),
					(multiplayer_get_my_troop, ":troop"),
					(neq, ":troop", ":value"),
					(player_set_troop_id, ":multiplayer_my_player", ":value"),
					(multiplayer_send_int_to_server, 20, ":value"),
					(call_script, "script_multiplayer_set_default_item_selections_for_troop", ":value"),
					(call_script, "script_multiplayer_send_item_selections"),
				(try_end),
				(presentation_set_duration, 0),
				(assign, "$g_presentation_state", 0),
				(start_presentation, "prsnt_multiplayer_item_select"),
				(assign, ":value_2", 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(is_between, ":multiplayer_my_player", 0, 1000),
				(multiplayer_get_my_troop, ":multiplayer_my_troop"),
				(try_begin),
					(neg|is_between, ":multiplayer_my_troop", "trp_swadian_crossbowman_multiplayer", "trp_multiplayer_end"),
					(player_set_troop_id, ":multiplayer_my_player", -1),
					(multiplayer_send_int_to_server, 20, -1),
					(multiplayer_send_int_to_server, 19, 2),
					(player_set_team_no, ":multiplayer_my_player", 2),
				(try_end),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_item_select", prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(assign, "$g_presentation_obj_item_select_1", -1),
			(assign, "$g_presentation_obj_item_select_2", -1),
			(assign, "$g_presentation_obj_item_select_3", -1),
			(assign, "$g_presentation_obj_item_select_4", -1),
			(assign, "$g_presentation_obj_item_select_5", -1),
			(assign, "$g_presentation_obj_item_select_6", -1),
			(assign, "$g_presentation_obj_item_select_7", -1),
			(assign, "$g_presentation_obj_item_select_8", -1),
			(assign, "$g_presentation_obj_item_select_9", -1),
			(assign, "$g_presentation_obj_item_select_10", -1),
			(assign, "$g_presentation_obj_item_select_11", -1),
			(assign, "$g_presentation_obj_item_select_12", -1),
			(assign, "$g_presentation_obj_item_select_13", -1),
			(assign, "$g_presentation_obj_item_select_14", -1),
			(assign, "$g_presentation_obj_item_select_15", -1),
			(assign, "$g_presentation_obj_item_select_16", -1),
			(try_begin),
				(neq, "$g_current_opened_item_details", -1),
				(close_item_details),
				(assign, "$g_current_opened_item_details", -1),
			(try_end),
			(store_add, ":value", 2, 0),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_1", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 950),
				(position_set_y, 1, 526),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_1", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_1", "mesh_mp_inventory_slot_equip", "mesh_mp_inventory_slot_equip"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_1", 1),
			(position_set_x, 1, 899),
			(position_set_y, 1, 475),
			(overlay_set_position, "$g_presentation_obj_item_select_1", 1),
			(store_add, ":value", 2, 1),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_2", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 950),
				(position_set_y, 1, 426),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_2", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_2", "mesh_mp_inventory_slot_equip", "mesh_mp_inventory_slot_equip"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_2", 1),
			(position_set_x, 1, 899),
			(position_set_y, 1, 375),
			(overlay_set_position, "$g_presentation_obj_item_select_2", 1),
			(store_add, ":value", 2, 2),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_3", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 950),
				(position_set_y, 1, 326),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_3", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_3", "mesh_mp_inventory_slot_equip", "mesh_mp_inventory_slot_equip"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_3", 1),
			(position_set_x, 1, 899),
			(position_set_y, 1, 275),
			(overlay_set_position, "$g_presentation_obj_item_select_3", 1),
			(store_add, ":value", 2, 3),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_4", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 950),
				(position_set_y, 1, 226),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_4", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_4", "mesh_mp_inventory_slot_equip", "mesh_mp_inventory_slot_equip"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_4", 1),
			(position_set_x, 1, 899),
			(position_set_y, 1, 175),
			(overlay_set_position, "$g_presentation_obj_item_select_4", 1),
			(store_add, ":value", 2, 4),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_5", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 53),
				(position_set_y, 1, 576),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_5", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_5", "mesh_mp_inventory_slot_helmet", "mesh_mp_inventory_slot_helmet"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_5", 1),
			(position_set_x, 1, 2),
			(position_set_y, 1, 525),
			(overlay_set_position, "$g_presentation_obj_item_select_5", 1),
			(store_add, ":value", 2, 5),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_6", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 53),
				(position_set_y, 1, 476),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_6", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_6", "mesh_mp_inventory_slot_armor", "mesh_mp_inventory_slot_armor"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_6", 1),
			(position_set_x, 1, 2),
			(position_set_y, 1, 425),
			(overlay_set_position, "$g_presentation_obj_item_select_6", 1),
			(store_add, ":value", 2, 6),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_7", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 53),
				(position_set_y, 1, 376),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_7", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_7", "mesh_mp_inventory_slot_boot", "mesh_mp_inventory_slot_boot"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_7", 1),
			(position_set_x, 1, 2),
			(position_set_y, 1, 325),
			(overlay_set_position, "$g_presentation_obj_item_select_7", 1),
			(store_add, ":value", 2, 7),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(create_image_button_overlay, "$g_presentation_obj_item_select_8", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 53),
				(position_set_y, 1, 276),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_8", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_8", "mesh_mp_inventory_slot_glove", "mesh_mp_inventory_slot_glove"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_8", 1),
			(position_set_x, 1, 2),
			(position_set_y, 1, 225),
			(overlay_set_position, "$g_presentation_obj_item_select_8", 1),
			(store_add, ":value", 2, 8),
			(player_get_slot, ":multiplayer_my_player_value", ":multiplayer_my_player", ":value"),
			(try_begin),
				(ge, ":multiplayer_my_player_value", 0),
				(eq, "$g_horses_are_avaliable", 1),
				(create_image_button_overlay, "$g_presentation_obj_item_select_9", "mesh_mp_inventory_slot_empty", "mesh_mp_inventory_slot_empty"),
				(create_mesh_overlay_with_item_id, reg0, ":multiplayer_my_player_value"),
				(position_set_x, 1, 53),
				(position_set_y, 1, 176),
				(overlay_set_position, reg0, 1),
				(assign, "$g_inside_obj_9", reg0),
			(else_try),
				(create_image_button_overlay, "$g_presentation_obj_item_select_9", "mesh_mp_inventory_slot_horse", "mesh_mp_inventory_slot_horse"),
			(try_end),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_item_select_9", 1),
			(position_set_x, 1, 2),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_item_select_9", 1),
			(create_mesh_overlay, reg0, "mesh_mp_inventory_left"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 0),
			(position_set_y, 1, 14),
			(overlay_set_position, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_mp_inventory_right"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 894),
			(position_set_y, 1, 65),
			(overlay_set_position, reg0, 1),
			(create_in_game_button_overlay, "$g_presentation_obj_item_select_10", "str_reset_to_default", 0),
			(overlay_set_color, "$g_presentation_obj_item_select_10", 16777215),
			(position_set_x, 1, 605),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_item_select_10", 1),
			(create_in_game_button_overlay, "$g_presentation_obj_item_select_11", "str_done", 0),
			(overlay_set_color, "$g_presentation_obj_item_select_11", 16777215),
			(position_set_x, 1, 395),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_item_select_11", 1),
			(assign, ":var_4", 725),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
			(assign, ":value_2", 0),
			(try_begin),
				(eq, ":team_no_multiplayer_my_player", 0),
				(try_begin),
					(gt, "$g_multiplayer_num_bots_team_1", 0),
					(assign, ":value_2", 1),
				(try_end),
			(else_try),
				(try_begin),
					(gt, "$g_multiplayer_num_bots_team_2", 0),
					(assign, ":value_2", 1),
				(try_end),
			(try_end),
			(team_get_faction, ":faction_team_no_multiplayer_my_player", ":team_no_multiplayer_my_player"),
			(try_begin),
				(eq, ":value_2", 1),
				(neq, "$g_multiplayer_game_type", 0),
				(neq, "$g_multiplayer_game_type", 7),
				(assign, ":var_8", 0),
				(try_begin),
					(eq, ":value_2", 1),
					(try_for_range, ":troop", "trp_swadian_crossbowman_multiplayer_ai", "trp_swadian_crossbowman_multiplayer"),
						(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
						(eq, ":faction_of_troop_troop", ":faction_team_no_multiplayer_my_player"),
						(val_add, ":var_8", 1),
					(try_end),
				(try_end),
				(store_mul, ":value_3", ":var_8", 20),
				(val_add, ":value_3", 40),
				(create_mesh_overlay, reg0, "mesh_mp_ui_command_border_r"),
				(position_set_x, 1, 280),
				(position_set_y, 1, 680),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 2500),
				(position_set_y, 1, 2500),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "mesh_mp_ui_command_border_l"),
				(position_set_x, 1, 650),
				(position_set_y, 1, 680),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 2500),
				(position_set_y, 1, 2500),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "mesh_mp_ui_command_panel"),
				(position_set_x, 1, 350),
				(store_sub, ":value_4", 750, ":value_3"),
				(position_set_y, 1, ":value_4"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 3000),
				(position_set_y, 1, 3000),
				(overlay_set_size, reg0, 1),
				(create_text_overlay, reg0, "str_command", 0),
				(overlay_set_color, reg0, 16777215),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 370),
				(position_set_y, 1, ":var_4"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":var_4", 20),
				(assign, ":var_13", 0),
				(try_for_range, ":troop", "trp_swadian_crossbowman_multiplayer_ai", "trp_swadian_crossbowman_multiplayer"),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(eq, ":faction_of_troop_troop", ":faction_team_no_multiplayer_my_player"),
					(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
					(position_set_x, 1, 800),
					(position_set_y, 1, 800),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, 377),
					(store_add, ":value_5", ":var_4", 2),
					(position_set_y, 1, ":value_5"),
					(overlay_set_position, reg0, 1),
					(try_begin),
						(eq, ":var_13", 0),
						(overlay_set_val, reg0, "$g_multiplayer_bot_type_1_wanted"),
						(assign, "$g_presentation_obj_item_select_13", reg0),
					(else_try),
						(eq, ":var_13", 1),
						(overlay_set_val, reg0, "$g_multiplayer_bot_type_2_wanted"),
						(assign, "$g_presentation_obj_item_select_14", reg0),
					(else_try),
						(eq, ":var_13", 2),
						(overlay_set_val, reg0, "$g_multiplayer_bot_type_3_wanted"),
						(assign, "$g_presentation_obj_item_select_15", reg0),
					(else_try),
						(overlay_set_val, reg0, "$g_multiplayer_bot_type_4_wanted"),
						(assign, "$g_presentation_obj_item_select_16", reg0),
					(try_end),
					(str_store_troop_name, 0, ":troop"),
					(create_text_overlay, reg0, "str_s0", 0),
					(overlay_set_color, reg0, 16777215),
					(position_set_x, 1, 800),
					(position_set_y, 1, 800),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, 397),
					(position_set_y, 1, ":var_4"),
					(overlay_set_position, reg0, 1),
					(val_sub, ":var_4", 20),
					(val_add, ":var_13", 1),
				(try_end),
				(val_sub, ":var_4", 20),
			(try_end),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(player_get_gold, ":gold_multiplayer_my_player", ":multiplayer_my_player"),
			(call_script, "script_multiplayer_calculate_cur_selected_items_cost", ":multiplayer_my_player", 1),
			(create_text_overlay, "$g_presentation_obj_item_select_12", "str_total_item_cost_reg0", 98308),
			(try_begin),
				(ge, ":gold_multiplayer_my_player", reg0),
				(overlay_set_color, "$g_presentation_obj_item_select_12", 16777215),
			(else_try),
				(overlay_set_color, "$g_presentation_obj_item_select_12", 16711680),
			(try_end),
			(position_set_x, 1, 680),
			(position_set_y, 1, 652),
			(overlay_set_position, "$g_presentation_obj_item_select_12", 1),
			(store_add, "$g_presentation_obj_item_select_next", "$g_presentation_obj_item_select_12", 1),
			(player_get_troop_id, ":troop_id_multiplayer_my_player", ":multiplayer_my_player"),
			(try_begin),
				(eq, "$g_presentation_state", 1),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 1, 18, 781, 474),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_right_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 881),
				(position_set_y, 1, 515),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 2),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 1, 18, 781, 374),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_right_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 881),
				(position_set_y, 1, 415),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 3),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 1, 18, 781, 274),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_right_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 881),
				(position_set_y, 1, 315),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 4),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 1, 18, 781, 174),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_right_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 881),
				(position_set_y, 1, 215),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 5),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 22, 24, 117, 524),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_left_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 106),
				(position_set_y, 1, 565),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 6),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 19, 22, 117, 424),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_left_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 106),
				(position_set_y, 1, 465),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 7),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 24, 26, 117, 324),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_left_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 106),
				(position_set_y, 1, 365),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 8),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 26, 27, 117, 224),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_left_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 106),
				(position_set_y, 1, 265),
				(overlay_set_position, reg0, 1),
			(else_try),
				(eq, "$g_presentation_state", 9),
				(eq, "$g_horses_are_avaliable", 1),
				(call_script, "script_multiplayer_display_available_items_for_troop_and_item_classes", ":troop_id_multiplayer_my_player", 18, 19, 117, 124),
				(create_mesh_overlay, reg0, "mesh_mp_inventory_left_arrow"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 106),
				(position_set_y, 1, 165),
				(overlay_set_position, reg0, 1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, "$g_close_equipment_selection", 0),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(assign, ":value", -1),
					(try_begin),
						(ge, ":trigger_param_1", "$g_presentation_obj_item_select_next"),
						(store_sub, ":value_2", ":trigger_param_1", "$g_presentation_obj_item_select_next"),
						(store_mod, ":value_3", ":value_2", 2),
						(store_sub, ":value_3", 1, ":value_3"),
						(val_div, ":value_2", 2),
						(store_add, ":value_4", 46, ":value_2"),
						(troop_get_slot, ":value", "trp_multiplayer_data", ":value_4"),
						(assign, ":value_5", ":trigger_param_1"),
						(val_add, ":value_5", ":value_3"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_1"),
						(store_add, ":value_6", 2, 1),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_1"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_2"),
						(store_add, ":value_6", 2, 2),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_2"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_3"),
						(store_add, ":value_6", 2, 3),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_3"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_4"),
						(store_add, ":value_6", 2, 4),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_4"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_5"),
						(store_add, ":value_6", 2, 5),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_5"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_6"),
						(store_add, ":value_6", 2, 6),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_6"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_7"),
						(store_add, ":value_6", 2, 7),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_7"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_8"),
						(store_add, ":value_6", 2, 8),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_8"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_9"),
						(eq, "$g_horses_are_avaliable", 1),
						(store_add, ":value_6", 2, 9),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_9"),
					(try_end),
					(try_begin),
						(ge, ":value", 0),
						(overlay_get_position, 0, ":value_5"),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_troop_id, ":troop_id_multiplayer_my_player", ":multiplayer_my_player"),
						(try_begin),
							(call_script, "script_cf_multiplayer_is_item_default_for_troop", ":value", ":troop_id_multiplayer_my_player"),
							(show_item_details, ":value", 0, 0),
						(else_try),
							(store_faction_of_troop, ":faction_of_troop_troop_id_multiplayer_my_player", ":troop_id_multiplayer_my_player"),
							(store_sub, ":value_7", ":faction_of_troop_troop_id_multiplayer_my_player", "fac_kingdom_1"),
							(val_add, ":value_7", 30),
							(item_get_slot, ":value_value_7", ":value", ":value_7"),
							(show_item_details, ":value", 0, ":value_value_7"),
						(try_end),
						(assign, "$g_current_opened_item_details", ":value"),
					(try_end),
				(else_try),
					(assign, ":value", -1),
					(try_begin),
						(ge, ":trigger_param_1", "$g_presentation_obj_item_select_next"),
						(store_sub, ":value_2", ":trigger_param_1", "$g_presentation_obj_item_select_next"),
						(val_div, ":value_2", 2),
						(store_add, ":value_4", 46, ":value_2"),
						(troop_get_slot, ":value", "trp_multiplayer_data", ":value_4"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_1"),
						(store_add, ":value_6", 2, 1),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_1"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_2"),
						(store_add, ":value_6", 2, 2),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_2"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_3"),
						(store_add, ":value_6", 2, 3),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_3"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_4"),
						(store_add, ":value_6", 2, 4),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_4"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_5"),
						(store_add, ":value_6", 2, 5),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_5"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_6"),
						(store_add, ":value_6", 2, 6),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_6"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_7"),
						(store_add, ":value_6", 2, 7),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_7"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_8"),
						(store_add, ":value_6", 2, 8),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_8"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_9"),
						(eq, "$g_horses_are_avaliable", 1),
						(store_add, ":value_6", 2, 9),
						(val_sub, ":value_6", 1),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_slot, ":value", ":multiplayer_my_player", ":value_6"),
						(assign, ":value_5", "$g_inside_obj_9"),
					(try_end),
					(try_begin),
						(eq, "$g_current_opened_item_details", ":value"),
						(close_item_details),
						(assign, "$g_current_opened_item_details", -1),
					(try_end),
				(try_end),
			(else_try),
				(assign, "$g_close_equipment_selection", 0),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(player_get_troop_id, ":troop_id_multiplayer_my_player", ":multiplayer_my_player"),
			(try_begin),
				(eq, "$g_close_equipment_selection", 0),
				(try_begin),
					(eq, "$g_presentation_state", 0),
					(try_begin),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_1"),
						(assign, "$g_presentation_state", 1),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_2"),
						(assign, "$g_presentation_state", 2),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_3"),
						(assign, "$g_presentation_state", 3),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_4"),
						(assign, "$g_presentation_state", 4),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_5"),
						(assign, "$g_presentation_state", 5),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_6"),
						(assign, "$g_presentation_state", 6),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_7"),
						(assign, "$g_presentation_state", 7),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_8"),
						(assign, "$g_presentation_state", 8),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(else_try),
						(eq, ":trigger_param_1", "$g_presentation_obj_item_select_9"),
						(eq, "$g_horses_are_avaliable", 1),
						(assign, "$g_presentation_state", 9),
						(presentation_set_duration, 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(try_end),
				(else_try),
					(gt, "$g_presentation_state", 0),
					(store_sub, ":value", ":trigger_param_1", "$g_presentation_obj_item_select_next"),
					(val_div, ":value", 2),
					(assign, ":value_2", 146),
					(try_for_range, ":number", 46, ":value_2"),
						(neg|troop_slot_eq, "trp_multiplayer_data", ":number", -1),
						(store_sub, ":value_3", ":number", 46),
						(eq, ":value", ":value_3"),
						(troop_get_slot, ":multiplayer_data_number", "trp_multiplayer_data", ":number"),
						(store_add, ":value_4", 2, "$g_presentation_state"),
						(val_sub, ":value_4", 1),
						(player_set_slot, ":multiplayer_my_player", ":value_4", ":multiplayer_data_number"),
						(player_get_gold, ":gold_multiplayer_my_player", ":multiplayer_my_player"),
						(call_script, "script_multiplayer_calculate_cur_selected_items_cost", ":multiplayer_my_player", 1),
						(overlay_set_text, "$g_presentation_obj_item_select_12", "str_total_item_cost_reg0"),
						(try_begin),
							(ge, ":gold_multiplayer_my_player", reg0),
							(overlay_set_color, "$g_presentation_obj_item_select_12", 16777215),
						(else_try),
							(overlay_set_color, "$g_presentation_obj_item_select_12", 16711680),
						(try_end),
						(assign, ":value_2", 0),
					(try_end),
					(presentation_set_duration, 0),
					(assign, "$g_presentation_state", 0),
					(start_presentation, "prsnt_multiplayer_item_select"),
				(try_end),
				(try_begin),
					(eq, ":trigger_param_1", "$g_presentation_obj_item_select_10"),
					(call_script, "script_multiplayer_set_default_item_selections_for_troop", ":troop_id_multiplayer_my_player"),
					(presentation_set_duration, 0),
					(assign, "$g_presentation_state", 0),
					(start_presentation, "prsnt_multiplayer_item_select"),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_item_select_11"),
					(call_script, "script_multiplayer_send_item_selections"),
					(presentation_set_duration, 0),
					(try_begin),
						(try_begin),
							(eq, "$g_multiplayer_game_type", 6),
							(gt, "$g_multiplayer_number_of_respawn_count", 0),
							(ge, "$g_my_spawn_count", "$g_multiplayer_number_of_respawn_count"),
							(multiplayer_get_my_player, ":multiplayer_my_player"),
							(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
							(this_or_next|eq, ":team_no_multiplayer_my_player", 0),
							(ge, "$g_my_spawn_count", 999),
							(assign, "$g_show_no_more_respawns_remained", 1),
						(else_try),
							(assign, "$g_show_no_more_respawns_remained", 0),
						(try_end),
						(eq, "$g_show_no_more_respawns_remained", 1),
						(store_mission_timer_a, "$g_multiplayer_respawn_start_time"),
						(start_presentation, "prsnt_multiplayer_respawn_time_counter"),
					(try_end),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_item_select_13"),
					(assign, "$g_multiplayer_bot_type_1_wanted", ":trigger_param_2"),
					(multiplayer_send_2_int_to_server, 1, 35, ":trigger_param_2"),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_item_select_14"),
					(assign, "$g_multiplayer_bot_type_2_wanted", ":trigger_param_2"),
					(multiplayer_send_2_int_to_server, 1, 36, ":trigger_param_2"),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_item_select_15"),
					(assign, "$g_multiplayer_bot_type_3_wanted", ":trigger_param_2"),
					(multiplayer_send_2_int_to_server, 1, 37, ":trigger_param_2"),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_item_select_16"),
					(assign, "$g_multiplayer_bot_type_4_wanted", ":trigger_param_2"),
					(multiplayer_send_2_int_to_server, 1, 38, ":trigger_param_2"),
				(try_end),
			(else_try),
				(assign, "$g_close_equipment_selection", 0),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_mouse_press,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, "$g_close_equipment_selection", 0),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(try_begin),
						(eq, "$g_presentation_state", 0),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(try_begin),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_1"),
							(store_add, ":value", 2, 0),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_2"),
							(store_add, ":value", 2, 1),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_3"),
							(store_add, ":value", 2, 2),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_4"),
							(store_add, ":value", 2, 3),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_5"),
							(store_add, ":value", 2, 4),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_6"),
							(store_add, ":value", 2, 5),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_7"),
							(store_add, ":value", 2, 6),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_8"),
							(store_add, ":value", 2, 7),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(else_try),
							(eq, ":trigger_param_1", "$g_presentation_obj_item_select_9"),
							(eq, "$g_horses_are_avaliable", 1),
							(store_add, ":value", 2, 8),
							(player_set_slot, ":multiplayer_my_player", ":value", -1),
							(presentation_set_duration, 0),
							(assign, "$g_presentation_state", 0),
							(start_presentation, "prsnt_multiplayer_item_select"),
						(try_end),
					(else_try),
						(gt, "$g_presentation_state", 0),
						(presentation_set_duration, 0),
						(assign, "$g_presentation_state", 0),
						(start_presentation, "prsnt_multiplayer_item_select"),
					(try_end),
				(try_end),
			(else_try),
				(assign, "$g_close_equipment_selection", 0),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, "$g_close_equipment_selection", 0),
				(try_begin),
					(key_clicked, 1),
					(try_begin),
						(neq, "$g_current_opened_item_details", -1),
						(close_item_details),
						(assign, "$g_current_opened_item_details", -1),
					(try_end),
					(gt, ":trigger_param_1", 200),
					(presentation_set_duration, 0),
				(try_end),
			(else_try),
				(assign, "$g_close_equipment_selection", 0),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_message_1", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(eq, "$g_multiplayer_message_type", 12),
				(assign, ":value", "$g_multiplayer_message_value_1"),
				(try_begin),
					(eq, ":value", -1),
					(assign, ":value_2", 4294967295),
					(str_store_string, 0, "str_round_draw_no_one_remained"),
				(else_try),
					(try_begin),
						(eq, ":value", 0),
						(assign, ":value_2", 4281589009),
					(else_try),
						(assign, ":value_2", 4294919202),
					(try_end),
					(try_begin),
						(lt, "$my_team_at_start_of_round", 2),
						(try_begin),
							(eq, "$my_team_at_start_of_round", ":value"),
							(assign, ":value_2", 4281589009),
						(else_try),
							(assign, ":value_2", 4294919202),
						(try_end),
					(try_end),
					(team_get_faction, ":faction_value", ":value"),
					(str_store_faction_name, 1, ":faction_value"),
					(str_store_string, 0, "str_s1_won_round"),
				(try_end),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(try_begin),
					(neq, ":value", -1),
					(position_set_x, 1, 375),
				(else_try),
					(position_set_x, 1, 400),
				(try_end),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 300),
			(else_try),
				(eq, "$g_multiplayer_message_type", 4),
				(agent_get_team, ":value", "$g_multiplayer_message_value_1"),
				(team_get_faction, ":faction_value_2", ":value"),
				(str_store_faction_name, 1, ":faction_value_2"),
				(try_begin),
					(eq, ":value", 0),
					(assign, ":value_2", 4281589009),
				(else_try),
					(assign, ":value_2", 4294919202),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", ":value"),
							(assign, ":value_2", 4281589009),
							(play_sound, "snd_team_scored_a_point"),
						(else_try),
							(assign, ":value_2", 4294919202),
							(play_sound, "snd_enemy_scored_a_point"),
						(try_end),
					(try_end),
				(try_end),
				(str_store_string, 0, "str_s1_captured_flag"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 350),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 5),
				(try_begin),
					(ge, "$g_multiplayer_message_value_1", 0),
					(agent_get_team, ":team_l_g_multiplayer_message_value_1", "$g_multiplayer_message_value_1"),
					(team_get_faction, ":faction_team_l_g_multiplayer_message_value_1", ":team_l_g_multiplayer_message_value_1"),
					(str_store_faction_name, 1, ":faction_team_l_g_multiplayer_message_value_1"),
					(str_store_string, 0, "str_s1_returned_flag"),
				(else_try),
					(val_add, "$g_multiplayer_message_value_1", 1),
					(val_mul, "$g_multiplayer_message_value_1", -1),
					(assign, ":team_l_g_multiplayer_message_value_1", "$g_multiplayer_message_value_1"),
					(team_get_faction, ":faction_team_l_g_multiplayer_message_value_1", ":team_l_g_multiplayer_message_value_1"),
					(str_store_faction_name, 1, ":faction_team_l_g_multiplayer_message_value_1"),
					(str_store_string, 0, "str_s1_auto_returned_flag"),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(play_sound, "snd_flag_returned"),
					(try_end),
				(try_end),
				(assign, ":value_2", 4294967295),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 325),
				(position_set_y, 1, 400),
				(position_set_x, 1, 500),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 6),
				(agent_get_team, ":team_l_g_multiplayer_message_value_1_2", "$g_multiplayer_message_value_1"),
				(team_get_faction, ":faction_team_l_g_multiplayer_message_value_1_2", ":team_l_g_multiplayer_message_value_1_2"),
				(str_store_faction_name, 1, ":faction_team_l_g_multiplayer_message_value_1_2"),
				(assign, ":value_2", 4294967295),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", ":team_l_g_multiplayer_message_value_1_2"),
							(play_sound, "snd_enemy_flag_taken"),
						(else_try),
							(play_sound, "snd_your_flag_taken"),
						(try_end),
					(try_end),
				(try_end),
				(str_store_string, 0, "str_s1_taken_flag"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 365),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 9),
				(store_div, ":value", "$g_multiplayer_message_value_1", 100),
				(store_mod, reg0, "$g_multiplayer_message_value_1", 100),
				(val_sub, ":value", 1),
				(try_begin),
					(eq, ":value", 0),
					(assign, ":value_2", 4281589009),
				(else_try),
					(assign, ":value_2", 4294919202),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", ":value"),
							(assign, ":value_2", 4281589009),
							(play_sound, "snd_team_scored_a_point"),
						(else_try),
							(assign, ":value_2", 4294919202),
							(play_sound, "snd_enemy_scored_a_point"),
						(try_end),
					(try_end),
				(try_end),
				(team_get_faction, ":faction_value_2", ":value"),
				(str_store_faction_name, 1, ":faction_value_2"),
				(str_store_string, 0, "str_s1_captured_flag_reg0"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 345),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 10),
				(store_div, ":value", "$g_multiplayer_message_value_1", 100),
				(store_mod, reg0, "$g_multiplayer_message_value_1", 100),
				(val_sub, ":value", 1),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", ":value"),
							(play_sound, "snd_enemy_flag_taken"),
						(else_try),
							(play_sound, "snd_your_flag_taken"),
						(try_end),
					(try_end),
				(try_end),
				(assign, ":value_2", 4294967295),
				(team_get_faction, ":faction_value_2", ":value"),
				(str_store_faction_name, 1, ":faction_value_2"),
				(str_store_string, 0, "str_s1_pulling_flag_reg0"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 345),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 8),
				(store_div, ":value", "$g_multiplayer_message_value_1", 100),
				(store_mod, reg0, "$g_multiplayer_message_value_1", 100),
				(val_sub, ":value", 1),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(play_sound, "snd_flag_returned"),
					(try_end),
				(try_end),
				(try_begin),
					(eq, ":value", 0),
					(assign, ":value_2", 4281589009),
				(else_try),
					(assign, ":value_2", 4294919202),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", ":value"),
							(assign, ":value_2", 4281589009),
						(else_try),
							(assign, ":value_2", 4294919202),
						(try_end),
					(try_end),
				(try_end),
				(team_get_faction, ":faction_value_2", ":value"),
				(str_store_faction_name, 1, ":faction_value_2"),
				(str_store_string, 0, "str_s1_neutralized_flag_reg0"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 345),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 13),
				(assign, ":value", "$g_multiplayer_message_value_1"),
				(try_begin),
					(eq, ":value", 0),
					(assign, ":value_2", 4281589009),
				(else_try),
					(assign, ":value_2", 4294919202),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", ":value"),
							(assign, ":value_2", 4281589009),
						(else_try),
							(assign, ":value_2", 4294919202),
						(try_end),
					(try_end),
				(try_end),
				(try_begin),
					(eq, "$g_multiplayer_message_value_1", 0),
					(str_store_string, 0, "str_s1_defended_castle"),
				(else_try),
					(eq, "$g_multiplayer_message_value_1", 1),
					(str_store_string, 0, "str_s1_captured_castle"),
				(else_try),
					(str_store_string, 0, "str_round_draw"),
					(assign, ":value_2", 4294967295),
				(try_end),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(try_begin),
					(neq, "$g_multiplayer_message_value_1", -1),
					(position_set_x, 1, 325),
				(else_try),
					(position_set_x, 1, 400),
				(try_end),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 14),
				(assign, ":value_2", 4294967295),
				(str_store_string, 0, "str_round_draw"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 375),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 18),
				(assign, ":value_2", 4294967295),
				(str_store_string, 0, "str_death_mode_started"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 350),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 15),
				(try_begin),
					(lt, "$g_multiplayer_message_value_1", 0),
					(val_mul, "$g_multiplayer_message_value_1", -1),
					(assign, ":value_3", 0),
					(team_get_faction, ":faction_value", 1),
					(str_store_faction_name, 1, ":faction_value"),
				(else_try),
					(assign, ":value_3", 1),
					(team_get_faction, ":faction_value", 0),
					(str_store_faction_name, 1, ":faction_value"),
				(try_end),
				(try_begin),
					(eq, "$g_multiplayer_message_value_1", 1),
					(assign, ":value_2", 4281589009),
				(else_try),
					(assign, ":value_2", 4294919202),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(try_begin),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
						(neq, ":value_3", ":team_no_multiplayer_my_player"),
						(assign, ":value_2", 4281589009),
					(else_try),
						(assign, ":value_2", 4294919202),
					(try_end),
				(try_end),
				(try_begin),
					(eq, "$g_multiplayer_message_value_1", 9),
					(str_store_string, 0, "str_s1_destroyed_all_targets"),
				(else_try),
					(eq, "$g_multiplayer_message_value_1", 1),
					(str_store_string, 0, "str_s1_destroyed_catapult"),
				(else_try),
					(eq, "$g_multiplayer_message_value_1", 2),
					(str_store_string, 0, "str_s1_destroyed_trebuchet"),
				(try_end),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 350),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 16),
				(try_begin),
					(eq, "$g_defender_team", 0),
					(assign, ":value_2", 4281589009),
				(else_try),
					(assign, ":value_2", 4294919202),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", "$g_defender_team"),
							(assign, ":value_2", 4281589009),
						(else_try),
							(assign, ":value_2", 4294919202),
						(try_end),
					(try_end),
				(try_end),
				(assign, ":var_14", "$g_multiplayer_message_value_1"),
				(team_get_faction, ":faction_value", "$g_defender_team"),
				(str_store_faction_name, 1, ":faction_value"),
				(try_begin),
					(eq, ":var_14", 1),
					(str_store_string, 0, "str_s1_saved_1_target"),
				(else_try),
					(eq, ":var_14", 2),
					(str_store_string, 0, "str_s1_saved_2_targets"),
				(try_end),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 350),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(else_try),
				(eq, "$g_multiplayer_message_type", 17),
				(assign, ":value", "$g_multiplayer_message_value_1"),
				(try_begin),
					(eq, ":value", 0),
					(assign, ":value_2", 4281589009),
				(else_try),
					(assign, ":value_2", 4294919202),
				(try_end),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_agent_id, ":agent_id_multiplayer_my_player", ":multiplayer_my_player"),
					(try_begin),
						(ge, ":agent_id_multiplayer_my_player", 0),
						(agent_get_team, ":team_agent_id_multiplayer_my_player", ":agent_id_multiplayer_my_player"),
						(try_begin),
							(eq, ":team_agent_id_multiplayer_my_player", ":value"),
							(assign, ":value_2", 4281589009),
						(else_try),
							(assign, ":value_2", 4294919202),
						(try_end),
					(try_end),
				(try_end),
				(try_begin),
					(eq, "$g_defender_team", 0),
					(team_get_faction, ":faction_value", 1),
				(else_try),
					(team_get_faction, ":faction_value", 0),
				(try_end),
				(str_store_faction_name, 1, ":faction_value"),
				(str_store_string, 0, "str_s1_won_round"),
				(create_text_overlay, "$g_multiplayer_message_1", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_1", ":value_2"),
				(position_set_x, 1, 350),
				(position_set_x, 1, 500),
				(position_set_y, 1, 400),
				(overlay_set_position, "$g_multiplayer_message_1", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_1", 1),
				(presentation_set_duration, 400),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_message_2", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(eq, "$g_multiplayer_message_type", 2),
				(assign, ":value", 4294967295),
				(str_store_string, 0, "str_auto_team_balance_done"),
				(create_text_overlay, "$g_multiplayer_message_2", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_2", ":value"),
				(position_set_x, 1, 375),
				(position_set_x, 1, 500),
				(position_set_y, 1, 550),
				(overlay_set_position, "$g_multiplayer_message_2", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_2", 1),
				(presentation_set_duration, 300),
			(else_try),
				(eq, "$g_multiplayer_message_type", 3),
				(assign, ":value", 4294967295),
				(try_begin),
					(neq, "$g_multiplayer_game_type", 2),
					(neq, "$g_multiplayer_game_type", 3),
					(neq, "$g_multiplayer_game_type", 6),
					(str_store_string, 0, "str_auto_team_balance_in_20_seconds"),
					(position_set_x, 1, 375),
				(else_try),
					(str_store_string, 0, "str_auto_team_balance_next_round"),
					(position_set_x, 1, 375),
				(try_end),
				(create_text_overlay, "$g_multiplayer_message_2", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_2", ":value"),
				(position_set_y, 1, 550),
				(position_set_x, 1, 500),
				(overlay_set_position, "$g_multiplayer_message_2", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_2", 1),
				(presentation_set_duration, 300),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_message_3", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(eq, "$g_multiplayer_message_type", 7),
				(assign, ":var_1", 4294967295),
				(try_begin),
					(eq, "$g_multiplayer_message_value_3", 1),
					(str_store_string, 0, "str_poll_result_yes"),
				(else_try),
					(str_store_string, 0, "str_poll_result_no"),
				(try_end),
				(create_text_overlay, "$g_multiplayer_message_3", 0, 65552),
				(overlay_set_color, "$g_multiplayer_message_3", ":var_1"),
				(position_set_x, 1, 380),
				(position_set_x, 1, 500),
				(position_set_y, 1, 475),
				(overlay_set_position, "$g_multiplayer_message_3", 1),
				(position_set_x, 1, 2000),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_multiplayer_message_3", 1),
				(presentation_set_duration, 400),
			(try_end)
		]),

		(ti_on_presentation_run,
		[])
	]),

	("multiplayer_round_time_counter", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_multiplayer_last_round_time_counter_value", -1),
			(str_clear, 0),
			(create_text_overlay, "$g_multiplayer_round_time_counter_overlay", 0, 98308),
			(overlay_set_color, "$g_multiplayer_round_time_counter_overlay", 16777215),
			(position_set_x, 1, 900),
			(position_set_y, 1, 690),
			(overlay_set_position, "$g_multiplayer_round_time_counter_overlay", 1),
			(position_set_x, 1, 2000),
			(position_set_y, 1, 2000),
			(overlay_set_size, "$g_multiplayer_round_time_counter_overlay", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(store_mission_timer_a, ":mission_timer_a"),
			(store_sub, ":value", ":mission_timer_a", "$g_round_start_time"),
			(store_sub, ":value_2", "$g_multiplayer_round_max_seconds", ":value"),
			(val_max, ":value_2", 0),
			(try_begin),
				(neq, "$g_multiplayer_last_round_time_counter_value", ":value_2"),
				(assign, "$g_multiplayer_last_round_time_counter_value", ":value_2"),
				(store_div, reg0, ":value_2", 60),
				(store_div, reg1, ":value_2", 10),
				(val_mod, reg1, 6),
				(assign, reg2, ":value_2"),
				(val_mod, reg2, 10),
				(str_store_string, 0, "str_reg0_dd_reg1reg2"),
				(overlay_set_text, "$g_multiplayer_round_time_counter_overlay", 0),
			(try_end)
		])
	]),

	("multiplayer_team_score_display", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_multiplayer_team_1_last_displayed_score", -1),
			(assign, "$g_multiplayer_team_2_last_displayed_score", -1),
			(str_clear, 0),
			(create_text_overlay, "$g_multiplayer_team_1_score_display_overlay", 0, 98308),
			(overlay_set_color, "$g_multiplayer_team_1_score_display_overlay", 16777215),
			(position_set_x, 1, 40),
			(position_set_y, 1, 700),
			(overlay_set_position, "$g_multiplayer_team_1_score_display_overlay", 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, "$g_multiplayer_team_1_score_display_overlay", 1),
			(create_text_overlay, "$g_multiplayer_team_2_score_display_overlay", 0, 98308),
			(overlay_set_color, "$g_multiplayer_team_2_score_display_overlay", 16777215),
			(position_set_x, 1, 40),
			(position_set_y, 1, 645),
			(overlay_set_position, "$g_multiplayer_team_2_score_display_overlay", 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, "$g_multiplayer_team_2_score_display_overlay", 1),
			(try_begin),
				(eq, "$g_multiplayer_team_1_faction", "fac_kingdom_4"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_1"),
			(else_try),
				(eq, "$g_multiplayer_team_1_faction", "fac_kingdom_2"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_2"),
			(else_try),
				(eq, "$g_multiplayer_team_1_faction", "fac_kingdom_3"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_3"),
			(else_try),
				(eq, "$g_multiplayer_team_1_faction", "fac_kingdom_5"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_4"),
			(else_try),
				(eq, "$g_multiplayer_team_1_faction", "fac_kingdom_6"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_5"),
			(else_try),
				(eq, "$g_multiplayer_team_1_faction", "fac_kingdom_1"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_6"),
			(try_end),
			(position_set_x, 3, 25),
			(position_set_y, 3, 715),
			(overlay_set_position, reg0, 3),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(eq, "$g_multiplayer_team_1_faction", "$g_multiplayer_team_2_faction"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_7"),
			(else_try),
				(eq, "$g_multiplayer_team_2_faction", "fac_kingdom_4"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_1"),
			(else_try),
				(eq, "$g_multiplayer_team_2_faction", "fac_kingdom_2"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_2"),
			(else_try),
				(eq, "$g_multiplayer_team_2_faction", "fac_kingdom_3"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_3"),
			(else_try),
				(eq, "$g_multiplayer_team_2_faction", "fac_kingdom_5"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_4"),
			(else_try),
				(eq, "$g_multiplayer_team_2_faction", "fac_kingdom_6"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_5"),
			(else_try),
				(eq, "$g_multiplayer_team_2_faction", "fac_kingdom_1"),
				(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_6"),
			(try_end),
			(position_set_x, 3, 25),
			(position_set_y, 3, 660),
			(overlay_set_position, reg0, 3),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_size, reg0, 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(team_get_score, ":score_0", 0),
			(team_get_score, ":score_1", 1),
			(try_begin),
				(this_or_next|neq, ":score_0", "$g_multiplayer_team_1_last_displayed_score"),
				(neq, ":score_1", "$g_multiplayer_team_2_last_displayed_score"),
				(assign, "$g_multiplayer_team_1_last_displayed_score", ":score_0"),
				(assign, "$g_multiplayer_team_2_last_displayed_score", ":score_1"),
				(str_store_faction_name, 0, "$g_multiplayer_team_1_faction"),
				(assign, reg0, ":score_0"),
				(overlay_set_text, "$g_multiplayer_team_1_score_display_overlay", "str_reg0"),
				(str_store_faction_name, 0, "$g_multiplayer_team_2_faction"),
				(assign, reg0, ":score_1"),
				(overlay_set_text, "$g_multiplayer_team_2_score_display_overlay", "str_reg0"),
			(try_end)
		])
	]),

	("multiplayer_flag_projection_display", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(store_sub, ":value", "$g_multiplayer_team_1_faction", "fac_kingdom_1"),
			(val_add, ":value", "mesh_flag_project_sw"),
			(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_1", ":value"),
			(val_sub, ":value", "mesh_flag_project_sw"),
			(val_add, ":value", "mesh_flag_project_sw_miss"),
			(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_2", ":value"),
			(try_begin),
				(neq, "$g_multiplayer_team_1_faction", "$g_multiplayer_team_2_faction"),
				(store_sub, ":value", "$g_multiplayer_team_2_faction", "fac_kingdom_1"),
				(val_add, ":value", "mesh_flag_project_sw"),
				(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_3", ":value"),
				(val_sub, ":value", "mesh_flag_project_sw"),
				(val_add, ":value", "mesh_flag_project_sw_miss"),
				(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_4", ":value"),
			(else_try),
				(assign, ":value", "mesh_flag_project_rb"),
				(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_3", ":value"),
				(assign, ":value", "mesh_flag_project_rb_miss"),
				(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_4", ":value"),
			(try_end),
			(position_set_x, 1, 250),
			(position_set_y, 1, 250),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_1", 1),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_2", 1),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_3", 1),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_4", 1),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 0),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 0),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 0),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_4", 0),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(set_fixed_point_multiplier, 1000),
			(scene_prop_get_instance, ":scene_prop_instance_team_1_flag_scene_prop_0", "$team_1_flag_scene_prop", 0),
			(team_get_slot, ":0_flag_situation", 0, slot_team_flag_situation),
			(try_begin),
				(neq, ":0_flag_situation", 1),
				(prop_instance_get_position, 1, ":scene_prop_instance_team_1_flag_scene_prop_0"),
			(else_try),
				(entry_point_get_position, 1, 64),
			(try_end),
			(position_move_z, 1, 200, 1),
			(scene_prop_get_instance, ":scene_prop_instance_team_2_flag_scene_prop_0", "$team_2_flag_scene_prop", 0),
			(team_get_slot, ":1_flag_situation", 1, slot_team_flag_situation),
			(try_begin),
				(neq, ":1_flag_situation", 1),
				(prop_instance_get_position, 2, ":scene_prop_instance_team_2_flag_scene_prop_0"),
			(else_try),
				(entry_point_get_position, 2, 65),
			(try_end),
			(position_move_z, 2, 200, 1),
			(position_get_screen_projection, 3, 1),
			(position_get_x, ":position_x_3", 3),
			(position_get_y, ":position_y_3", 3),
			(position_set_y, 3, ":position_y_3"),
			(try_begin),
				(is_between, ":position_x_3", -100, 1100),
				(is_between, ":position_y_3", -100, 850),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
				(else_try),
					(assign, ":team_no_multiplayer_my_player", 2),
				(try_end),
				(try_begin),
					(neq, ":team_no_multiplayer_my_player", 1),
					(try_begin),
						(neq, ":0_flag_situation", 1),
						(overlay_set_position, "$g_presentation_obj_flag_projection_display_1", 3),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 1),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 0),
					(else_try),
						(try_begin),
							(eq, ":team_no_multiplayer_my_player", 0),
							(assign, ":value", 64),
						(else_try),
							(assign, ":value", 65),
						(try_end),
						(entry_point_get_position, 5, ":value"),
						(position_get_screen_projection, 3, 5),
						(overlay_set_position, "$g_presentation_obj_flag_projection_display_2", 3),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 1),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 0),
					(try_end),
				(else_try),
					(try_begin),
						(neq, ":0_flag_situation", 1),
						(overlay_set_position, "$g_presentation_obj_flag_projection_display_1", 3),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 1),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 0),
					(try_end),
				(try_end),
			(else_try),
				(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 0),
				(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 0),
			(try_end),
			(position_get_screen_projection, 3, 2),
			(position_get_x, ":position_x_3", 3),
			(position_get_y, ":position_y_3", 3),
			(position_set_y, 3, ":position_y_3"),
			(try_begin),
				(is_between, ":position_x_3", -100, 1100),
				(is_between, ":position_y_3", -100, 850),
				(team_get_slot, ":1_flag_situation", 1, slot_team_flag_situation),
				(multiplayer_get_my_player, ":multiplayer_my_player"),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
				(else_try),
					(assign, ":team_no_multiplayer_my_player", 2),
				(try_end),
				(try_begin),
					(neq, ":team_no_multiplayer_my_player", 0),
					(try_begin),
						(neq, ":1_flag_situation", 1),
						(overlay_set_position, "$g_presentation_obj_flag_projection_display_3", 3),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 1),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_4", 0),
					(else_try),
						(try_begin),
							(eq, ":team_no_multiplayer_my_player", 0),
							(assign, ":value", 64),
						(else_try),
							(assign, ":value", 65),
						(try_end),
						(entry_point_get_position, 5, ":value"),
						(position_get_screen_projection, 3, 5),
						(overlay_set_position, "$g_presentation_obj_flag_projection_display_4", 3),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_4", 1),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 0),
					(try_end),
				(else_try),
					(try_begin),
						(neq, ":1_flag_situation", 1),
						(overlay_set_position, "$g_presentation_obj_flag_projection_display_3", 3),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 1),
						(overlay_set_display, "$g_presentation_obj_flag_projection_display_4", 0),
					(try_end),
				(try_end),
			(else_try),
				(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 0),
				(overlay_set_display, "$g_presentation_obj_flag_projection_display_4", 0),
			(try_end)
		])
	]),

	("multiplayer_flag_projection_display_bt", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(store_sub, ":value", "$g_multiplayer_team_1_faction", "fac_kingdom_1"),
			(val_add, ":value", "mesh_flag_project_sw"),
			(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_1", ":value"),
			(try_begin),
				(neq, "$g_multiplayer_team_1_faction", "$g_multiplayer_team_2_faction"),
				(store_sub, ":value", "$g_multiplayer_team_2_faction", "fac_kingdom_1"),
				(val_add, ":value", "mesh_flag_project_sw"),
			(else_try),
				(assign, ":value", "mesh_flag_project_rb"),
			(try_end),
			(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_3", ":value"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 250),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_1", 1),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_3", 1),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 0),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 0),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(eq, "$g_round_ended", 0),
				(set_fixed_point_multiplier, 1000),
				(scene_prop_get_instance, ":scene_prop_instance_team_1_flag_scene_prop_0", "$team_1_flag_scene_prop", 0),
				(prop_instance_get_position, 1, ":scene_prop_instance_team_1_flag_scene_prop_0"),
				(position_move_z, 1, 250, 1),
				(scene_prop_get_instance, ":scene_prop_instance_team_2_flag_scene_prop_0", "$team_2_flag_scene_prop", 0),
				(prop_instance_get_position, 2, ":scene_prop_instance_team_2_flag_scene_prop_0"),
				(position_move_z, 2, 250, 1),
				(position_get_screen_projection, 3, 1),
				(position_get_x, ":position_x_3", 3),
				(position_get_y, ":position_y_3", 3),
				(position_set_y, 3, ":position_y_3"),
				(try_begin),
					(is_between, ":position_x_3", -100, 1100),
					(is_between, ":position_y_3", -100, 850),
					(overlay_set_position, "$g_presentation_obj_flag_projection_display_1", 3),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 1),
				(else_try),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 0),
				(try_end),
				(position_get_screen_projection, 3, 2),
				(position_get_x, ":position_x_3", 3),
				(position_get_y, ":position_y_3", 3),
				(position_set_y, 3, ":position_y_3"),
				(try_begin),
					(is_between, ":position_x_3", -100, 1100),
					(is_between, ":position_y_3", -100, 850),
					(overlay_set_position, "$g_presentation_obj_flag_projection_display_3", 3),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 1),
				(else_try),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_3", 0),
				(try_end),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_destructible_targets_display", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(eq, "$g_defender_team", 0),
				(store_sub, ":value", "$g_multiplayer_team_1_faction", "fac_kingdom_1"),
			(else_try),
				(store_sub, ":value", "$g_multiplayer_team_2_faction", "fac_kingdom_1"),
			(try_end),
			(val_add, ":value", "mesh_flag_project_sw"),
			(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_1", ":value"),
			(create_mesh_overlay, "$g_presentation_obj_flag_projection_display_2", ":value"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 250),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_1", 1),
			(overlay_set_size, "$g_presentation_obj_flag_projection_display_2", 1),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 0),
			(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 0),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(eq, "$g_round_ended", 0),
				(set_fixed_point_multiplier, 1000),
				(scene_prop_get_instance, ":scene_prop_instance_g_destructible_target_1_0", "$g_destructible_target_1", 0),
				(prop_instance_get_position, 1, ":scene_prop_instance_g_destructible_target_1_0"),
				(prop_instance_get_position, 1, ":scene_prop_instance_g_destructible_target_1_0"),
				(position_move_z, 1, 250, 1),
				(scene_prop_get_instance, ":scene_prop_instance_g_destructible_target_2_0", "$g_destructible_target_2", 0),
				(prop_instance_get_position, 2, ":scene_prop_instance_g_destructible_target_2_0"),
				(prop_instance_get_position, 2, ":scene_prop_instance_g_destructible_target_2_0"),
				(position_move_z, 2, 250, 1),
				(position_get_screen_projection, 3, 1),
				(position_get_x, ":position_x_3", 3),
				(position_get_y, ":position_y_3", 3),
				(position_set_y, 3, ":position_y_3"),
				(try_begin),
					(is_between, ":position_x_3", -100, 1100),
					(is_between, ":position_y_3", -100, 850),
					(prop_instance_get_starting_position, 0, ":scene_prop_instance_g_destructible_target_1_0"),
					(prop_instance_get_position, 1, ":scene_prop_instance_g_destructible_target_1_0"),
					(get_sq_distance_between_positions_in_meters, ":sq_distance_between_positions_in_meters_0_1", 0, 1),
					(le, ":sq_distance_between_positions_in_meters_0_1", 2),
					(overlay_set_position, "$g_presentation_obj_flag_projection_display_1", 3),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 1),
				(else_try),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_1", 0),
				(try_end),
				(position_get_screen_projection, 3, 2),
				(position_get_x, ":position_x_3", 3),
				(position_get_y, ":position_y_3", 3),
				(position_set_y, 3, ":position_y_3"),
				(try_begin),
					(is_between, ":position_x_3", -100, 1100),
					(is_between, ":position_y_3", -100, 850),
					(prop_instance_get_starting_position, 0, ":scene_prop_instance_g_destructible_target_2_0"),
					(prop_instance_get_position, 1, ":scene_prop_instance_g_destructible_target_2_0"),
					(get_sq_distance_between_positions_in_meters, ":sq_distance_between_positions_in_meters_0_1", 0, 1),
					(le, ":sq_distance_between_positions_in_meters_0_1", 2),
					(overlay_set_position, "$g_presentation_obj_flag_projection_display_2", 3),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 1),
				(else_try),
					(overlay_set_display, "$g_presentation_obj_flag_projection_display_2", 0),
				(try_end),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_respawn_time_counter", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_multiplayer_respawn_counter_overlay", -1),
			(assign, "$g_multiplayer_respawn_remained_overlay", -1),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$g_multiplayer_message_type", 13),
				(this_or_next|eq, "$g_round_ended", 1),
				(eq, "$g_flag_is_not_ready", 1),
				(assign, ":value", 1),
			(try_end),
			(eq, ":value", 0),
			(assign, "$g_multiplayer_last_respawn_counter_value", -1),
			(str_clear, 0),
			(create_text_overlay, "$g_multiplayer_respawn_counter_overlay", 0, 65552),
			(overlay_set_color, "$g_multiplayer_respawn_counter_overlay", 16777215),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, "$g_multiplayer_respawn_counter_overlay", 1),
			(position_set_x, 1, 2000),
			(position_set_y, 1, 2000),
			(overlay_set_size, "$g_multiplayer_respawn_counter_overlay", 1),
			(str_clear, 0),
			(create_text_overlay, "$g_multiplayer_respawn_remained_overlay", 0, 65552),
			(overlay_set_color, "$g_multiplayer_respawn_remained_overlay", 16777215),
			(position_set_x, 1, 500),
			(position_set_y, 1, 570),
			(overlay_set_position, "$g_multiplayer_respawn_remained_overlay", 1),
			(position_set_x, 1, 1400),
			(position_set_y, 1, 1400),
			(overlay_set_size, "$g_multiplayer_respawn_remained_overlay", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(ge, "$g_multiplayer_respawn_counter_overlay", 0),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(try_begin),
				(ge, ":multiplayer_my_player", 0),
				(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
				(try_begin),
					(eq, ":team_no_multiplayer_my_player", 2),
					(presentation_set_duration, 0),
				(else_try),
					(store_mission_timer_a, ":mission_timer_a"),
					(store_sub, ":value", ":mission_timer_a", "$g_multiplayer_respawn_start_time"),
					(try_begin),
						(eq, "$g_show_no_more_respawns_remained", 0),
						(assign, ":value_2", "$g_multiplayer_respawn_period"),
						(try_begin),
							(eq, "$g_multiplayer_game_type", 6),
							(player_get_team_no, ":team_no_multiplayer_my_player", ":multiplayer_my_player"),
							(eq, ":team_no_multiplayer_my_player", 0),
							(val_add, ":value_2", 27),
						(try_end),
					(else_try),
						(assign, ":value_2", 6),
					(try_end),
					(store_sub, ":value_3", ":value_2", ":value"),
					(try_begin),
						(le, ":value_3", 0),
						(presentation_set_duration, 0),
					(else_try),
						(neq, "$g_multiplayer_last_respawn_counter_value", ":value_3"),
						(assign, "$g_multiplayer_last_respawn_counter_value", ":value_3"),
						(try_begin),
							(eq, "$g_show_no_more_respawns_remained", 0),
							(assign, reg0, ":value_3"),
							(str_store_string, 0, "str_respawning_in_reg0_seconds"),
							(try_begin),
								(gt, "$g_multiplayer_number_of_respawn_count", 0),
								(store_sub, reg0, "$g_multiplayer_number_of_respawn_count", "$g_my_spawn_count"),
								(multiplayer_get_my_player, ":multiplayer_my_player"),
								(player_get_team_no, ":team_no_multiplayer_my_player_2", ":multiplayer_my_player"),
								(eq, ":team_no_multiplayer_my_player_2", 0),
								(try_begin),
									(gt, reg0, 1),
									(str_store_string, 1, "str_reg0_respawns_remained"),
								(else_try),
									(str_store_string, 1, "str_this_is_your_last_respawn"),
								(try_end),
							(else_try),
								(str_clear, 1),
							(try_end),
						(else_try),
							(eq, "$g_show_no_more_respawns_remained", 1),
							(str_store_string, 0, "str_no_more_respawns_remained_this_round"),
							(str_clear, 1),
							(str_store_string, 1, "str_wait_next_round"),
						(try_end),
						(overlay_set_text, "$g_multiplayer_respawn_counter_overlay", 0),
						(overlay_set_text, "$g_multiplayer_respawn_remained_overlay", 1),
					(try_end),
				(try_end),
			(else_try),
				(presentation_set_duration, 0),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_message_type", 13),
				(this_or_next|eq, "$g_round_ended", 1),
				(eq, "$g_flag_is_not_ready", 1),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_stats_chart", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_score_b"),
			(position_set_x, 1, 100),
			(position_set_y, 1, 100),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(assign, ":var_1", 0),
			(assign, ":var_2", 0),
			(assign, ":var_3", 0),
			(get_max_players, ":max_players"),
			(try_for_range, ":number", 0, ":max_players"),
				(store_add, ":value", ":number", 186),
				(try_begin),
					(player_is_active, ":number"),
					(troop_set_slot, "trp_multiplayer_data", ":value", 1),
					(player_get_team_no, ":team_no_number", ":number"),
					(try_begin),
						(eq, ":team_no_number", 0),
						(val_add, ":var_1", 1),
					(else_try),
						(eq, ":team_no_number", 1),
						(val_add, ":var_2", 1),
					(else_try),
						(eq, ":team_no_number", 2),
						(val_add, ":var_3", 1),
					(try_end),
				(else_try),
					(troop_set_slot, "trp_multiplayer_data", ":value", 0),
				(try_end),
			(try_end),
			(try_begin),
				(gt, "$g_multiplayer_num_bots_team_1", 0),
				(val_add, ":var_1", 1),
			(try_end),
			(try_begin),
				(gt, "$g_multiplayer_num_bots_team_2", 0),
				(val_add, ":var_2", 1),
			(try_end),
			(assign, ":var_8", ":var_1"),
			(val_max, ":var_8", ":var_2"),
			(val_add, ":var_8", ":var_3"),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_stats_chart_container", 0, 131072),
			(position_set_x, 1, 100),
			(position_set_y, 1, 120),
			(overlay_set_position, "$g_presentation_obj_stats_chart_container", 1),
			(position_set_x, 1, 746),
			(position_set_y, 1, 530),
			(overlay_set_area_size, "$g_presentation_obj_stats_chart_container", 1),
			(set_container_overlay, "$g_presentation_obj_stats_chart_container"),
			(store_mul, ":value_2", ":var_8", 20),
			(val_add, ":value_2", 100),
			(try_begin),
				(gt, ":var_3", 0),
				(val_add, ":value_2", 70),
			(try_end),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(try_begin),
				(gt, ":value_2", 490),
				(assign, "$g_stats_chart_update_period", 8),
			(else_try),
				(assign, "$g_stats_chart_update_period", 1),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_game_type", 5),
				(call_script, "script_get_headquarters_scores"),
				(assign, ":var_11", reg0),
				(assign, ":var_12", reg1),
			(try_end),
			(try_for_range, ":number_2", 0, 2),
				(assign, ":var_14", 0),
				(get_max_players, ":max_players"),
				(try_for_range, ":number", 0, ":max_players"),
					(player_is_active, ":number"),
					(player_get_team_no, ":team_no_number_2", ":number"),
					(eq, ":team_no_number_2", ":number_2"),
					(val_add, ":var_14", 1),
				(try_end),
				(assign, reg0, ":var_14"),
				(try_begin),
					(neq, ":var_14", 1),
					(create_text_overlay, reg1, "str_reg0_players", 0),
				(else_try),
					(create_text_overlay, reg1, "str_reg0_player", 0),
				(try_end),
				(assign, ":value_3", ":value_2"),
				(team_get_faction, ":faction_number_2", ":number_2"),
				(str_store_faction_name, 1, ":faction_number_2"),
				(create_text_overlay, reg0, 1, 0),
				(try_begin),
					(eq, ":number_2", 0),
					(overlay_set_color, reg0, 16711680),
					(overlay_set_color, reg1, 16711680),
				(else_try),
					(overlay_set_color, reg0, 39423),
					(overlay_set_color, reg1, 39423),
				(try_end),
				(assign, ":var_18", 373),
				(store_mul, ":value_4", ":var_18", ":number_2"),
				(val_add, ":value_4", 42),
				(store_add, ":value_5", ":value_4", 15),
				(position_set_x, 3, ":value_5"),
				(position_set_y, 3, ":value_3"),
				(store_add, ":value_6", ":value_4", 35),
				(position_set_x, 1, ":value_6"),
				(position_set_y, 1, ":value_3"),
				(copy_position, 2, 1),
				(store_sub, ":value_7", ":value_3", 10),
				(position_set_x, 2, ":value_6"),
				(position_set_y, 2, ":value_7"),
				(overlay_set_position, reg0, 1),
				(overlay_set_position, reg1, 2),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(position_set_x, 2, 600),
				(position_set_y, 2, 600),
				(overlay_set_size, reg0, 1),
				(overlay_set_size, reg1, 2),
				(team_get_faction, ":faction_0", 0),
				(team_get_faction, ":faction_1", 1),
				(try_begin),
					(eq, ":faction_0", ":faction_1"),
					(eq, ":number_2", 1),
					(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_7"),
				(else_try),
					(eq, ":faction_number_2", "fac_kingdom_4"),
					(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_1"),
				(else_try),
					(eq, ":faction_number_2", "fac_kingdom_2"),
					(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_2"),
				(else_try),
					(eq, ":faction_number_2", "fac_kingdom_3"),
					(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_3"),
				(else_try),
					(eq, ":faction_number_2", "fac_kingdom_5"),
					(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_4"),
				(else_try),
					(eq, ":faction_number_2", "fac_kingdom_6"),
					(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_5"),
				(else_try),
					(eq, ":faction_number_2", "fac_kingdom_1"),
					(create_mesh_overlay, reg0, "mesh_ui_kingdom_shield_6"),
				(try_end),
				(position_set_x, 1, 100),
				(position_set_y, 1, 100),
				(overlay_set_position, reg0, 3),
				(position_set_x, 1, 50),
				(position_set_y, 1, 50),
				(overlay_set_size, reg0, 1),
				(team_get_score, reg0, ":number_2"),
				(create_text_overlay, reg0, "str_score_reg0", 8),
				(overlay_set_color, reg0, 16777215),
				(store_add, ":value_8", ":value_4", 325),
				(store_add, ":value_9", ":value_3", 0),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_9"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1200),
				(position_set_y, 1, 1200),
				(overlay_set_size, reg0, 1),
				(try_begin),
					(eq, "$g_multiplayer_game_type", 5),
					(try_begin),
						(eq, ":number_2", 0),
						(assign, reg0, ":var_11"),
					(else_try),
						(eq, ":number_2", 1),
						(assign, reg0, ":var_12"),
					(try_end),
					(create_text_overlay, reg0, "str_flags_reg0", 0),
					(overlay_set_color, reg0, 16777215),
					(store_add, ":value_8", ":value_4", 258),
					(store_add, ":value_9", ":value_3", -10),
					(position_set_x, 1, ":value_8"),
					(position_set_y, 1, ":value_9"),
					(overlay_set_position, reg0, 1),
					(position_set_x, 1, 600),
					(position_set_y, 1, 600),
					(overlay_set_size, reg0, 1),
				(try_end),
				(val_sub, ":value_3", 60),
				(create_text_overlay, reg0, "str_player_name", 0),
				(overlay_set_color, reg0, 16777215),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, reg0, 1),
				(try_begin),
					(this_or_next|eq, "$g_multiplayer_game_type", 4),
					(eq, "$g_multiplayer_game_type", 5),
					(create_text_overlay, reg0, "str_score", 0),
					(overlay_set_color, reg0, 16777215),
					(store_add, ":value_8", ":value_4", 138),
					(position_set_x, 1, ":value_8"),
					(position_set_y, 1, ":value_3"),
					(overlay_set_position, reg0, 1),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
				(try_end),
				(create_text_overlay, reg0, "str_kills", 16),
				(overlay_set_color, reg0, 16777215),
				(store_add, ":value_8", ":value_4", 206),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, reg0, 1),
				(create_text_overlay, reg0, "str_deaths", 16),
				(overlay_set_color, reg0, 16777215),
				(store_add, ":value_8", ":value_4", 260),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, reg0, 1),
				(create_text_overlay, reg0, "str_ping", 16),
				(overlay_set_color, reg0, 16777215),
				(store_add, ":value_8", ":value_4", 308),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 16777215),
				(overlay_set_alpha, reg0, 208),
				(store_add, ":value_8", ":value_4", 0),
				(position_set_x, 1, ":value_8"),
				(store_add, ":value_9", ":value_3", -10),
				(position_set_y, 1, ":value_9"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 16500),
				(position_set_y, 1, 50),
				(overlay_set_size, reg0, 1),
				(val_sub, ":value_3", 35),
				(store_add, ":value_10", ":max_players", 1),
				(try_for_range, ":unused", 0, ":value_10"),
					(assign, ":value_11", -30030),
					(assign, ":value_12", -1),
					(try_for_range, ":number", 0, ":max_players"),
						(store_add, ":value", ":number", 186),
						(troop_slot_eq, "trp_multiplayer_data", ":value", 1),
						(player_get_team_no, ":team_no_number", ":number"),
						(eq, ":team_no_number", ":number_2"),
						(try_begin),
							(this_or_next|eq, "$g_multiplayer_game_type", 4),
							(eq, "$g_multiplayer_game_type", 5),
							(player_get_score, ":score_number", ":number"),
						(else_try),
							(player_get_kill_count, ":score_number", ":number"),
						(try_end),
						(player_get_death_count, ":death_count_number", ":number"),
						(store_mul, ":value_13", ":score_number", 1000),
						(val_sub, ":value_13", ":death_count_number"),
						(this_or_next|gt, ":value_13", ":value_11"),
						(eq, ":value_13", -30030),
						(assign, ":value_11", ":value_13"),
						(assign, ":value_12", ":number"),
					(try_end),
					(try_begin),
						(ge, ":value_12", 0),
						(store_add, ":value", ":value_12", 186),
						(troop_set_slot, "trp_multiplayer_data", ":value", 0),
						(try_begin),
							(eq, ":multiplayer_my_player", ":value_12"),
							(create_mesh_overlay, reg0, "mesh_white_plane"),
							(overlay_set_color, reg0, 16777215),
							(overlay_set_alpha, reg0, 53),
							(store_add, ":value_8", ":value_4", 0),
							(position_set_x, 1, ":value_8"),
							(store_add, ":value_9", ":value_3", 0),
							(position_set_y, 1, ":value_9"),
							(overlay_set_position, reg0, 1),
							(position_set_x, 1, 16500),
							(position_set_y, 1, 1000),
							(overlay_set_size, reg0, 1),
						(try_end),
						(try_begin),
							(this_or_next|eq, "$g_multiplayer_game_type", 4),
							(eq, "$g_multiplayer_game_type", 5),
							(assign, ":value_14", 16777215),
							(player_get_agent_id, ":agent_id_value_12", ":value_12"),
							(try_begin),
								(this_or_next|lt, ":agent_id_value_12", 0),
								(neg|agent_is_alive, ":agent_id_value_12"),
								(assign, ":value_14", 16711680),
							(try_end),
							(player_get_score, reg0, ":value_12"),
							(create_text_overlay, reg0, "str_reg0", 8),
							(overlay_set_color, reg0, ":value_14"),
							(position_set_x, 1, 750),
							(position_set_y, 1, 750),
							(overlay_set_size, reg0, 1),
							(store_add, ":value_8", ":value_4", 165),
							(position_set_x, 1, ":value_8"),
							(position_set_y, 1, ":value_3"),
							(overlay_set_position, reg0, 1),
						(else_try),
							(assign, ":value_14", 16777215),
							(player_get_agent_id, ":agent_id_value_12", ":value_12"),
							(try_begin),
								(this_or_next|lt, ":agent_id_value_12", 0),
								(neg|agent_is_alive, ":agent_id_value_12"),
								(assign, ":value_14", 16711680),
								(create_text_overlay, reg0, "str_dead", 0),
								(overlay_set_color, reg0, ":value_14"),
								(position_set_x, 1, 750),
								(position_set_y, 1, 750),
								(overlay_set_size, reg0, 1),
								(store_add, ":value_8", ":value_4", 130),
								(position_set_x, 1, ":value_8"),
								(position_set_y, 1, ":value_3"),
								(overlay_set_position, reg0, 1),
							(try_end),
						(try_end),
						(str_store_player_username, 1, ":value_12"),
						(create_text_overlay, reg0, 1, 0),
						(overlay_set_color, reg0, ":value_14"),
						(position_set_x, 1, 750),
						(position_set_y, 1, 750),
						(overlay_set_size, reg0, 1),
						(position_set_x, 1, ":value_4"),
						(position_set_y, 1, ":value_3"),
						(overlay_set_position, reg0, 1),
						(player_get_kill_count, reg0, ":value_12"),
						(create_text_overlay, reg0, "str_reg0", 8),
						(overlay_set_color, reg0, ":value_14"),
						(position_set_x, 1, 750),
						(position_set_y, 1, 750),
						(overlay_set_size, reg0, 1),
						(store_add, ":value_8", ":value_4", 215),
						(position_set_x, 1, ":value_8"),
						(position_set_y, 1, ":value_3"),
						(overlay_set_position, reg0, 1),
						(player_get_death_count, reg0, ":value_12"),
						(create_text_overlay, reg0, "str_reg0", 8),
						(overlay_set_color, reg0, ":value_14"),
						(position_set_x, 1, 750),
						(position_set_y, 1, 750),
						(overlay_set_size, reg0, 1),
						(store_add, ":value_8", ":value_4", 265),
						(position_set_x, 1, ":value_8"),
						(position_set_y, 1, ":value_3"),
						(overlay_set_position, reg0, 1),
						(player_get_ping, reg0, ":value_12"),
						(create_text_overlay, reg0, "str_reg0", 8),
						(overlay_set_color, reg0, ":value_14"),
						(position_set_x, 1, 750),
						(position_set_y, 1, 750),
						(overlay_set_size, reg0, 1),
						(store_add, ":value_8", ":value_4", 315),
						(position_set_x, 1, ":value_8"),
						(position_set_y, 1, ":value_3"),
						(overlay_set_position, reg0, 1),
						(val_sub, ":value_3", 20),
					(else_try),
						(try_begin),
							(try_begin),
								(eq, ":number_2", 0),
								(assign, ":value_15", "$g_multiplayer_num_bots_team_1"),
							(else_try),
								(assign, ":value_15", "$g_multiplayer_num_bots_team_2"),
							(try_end),
							(team_get_bot_kill_count, reg0, ":number_2"),
							(team_get_bot_death_count, reg1, ":number_2"),
							(try_begin),
								(this_or_next|neq, reg0, 0),
								(this_or_next|neq, reg1, 0),
								(neq, ":value_15", 0),
								(assign, ":value_16", 1),
							(else_try),
								(assign, ":value_16", 0),
							(try_end),
							(eq, ":value_16", 1),
							(assign, ":var_38", 0),
							(try_for_agents, ":var_39"),
								(agent_is_non_player, ":var_39"),
								(agent_is_alive, ":var_39"),
								(agent_get_team, ":team_var_39", ":var_39"),
								(eq, ":team_var_39", ":number_2"),
								(val_add, ":var_38", 1),
							(try_end),
							(store_sub, ":value_17", ":value_15", ":var_38"),
							(try_begin),
								(eq, ":var_38", 0),
								(assign, ":value_14", 16711680),
							(else_try),
								(assign, ":value_14", 13684944),
							(try_end),
							(try_begin),
								(gt, ":value_17", 0),
								(try_begin),
									(eq, ":value_15", 1),
									(create_text_overlay, reg0, "str_dead", 0),
									(store_add, ":value_8", ":value_4", 130),
								(else_try),
									(assign, reg0, ":value_17"),
									(create_text_overlay, reg0, "str_reg0_dead", 0),
									(store_add, ":value_8", ":value_4", 123),
								(try_end),
								(overlay_set_color, reg0, ":value_14"),
								(position_set_x, 1, 750),
								(position_set_y, 1, 750),
								(overlay_set_size, reg0, 1),
								(position_set_x, 1, ":value_8"),
								(position_set_y, 1, ":value_3"),
								(overlay_set_position, reg0, 1),
							(try_end),
							(try_begin),
								(gt, ":value_15", 1),
								(assign, reg0, ":value_15"),
								(create_text_overlay, reg0, "str_bots_reg0_agents", 0),
							(else_try),
								(create_text_overlay, reg0, "str_bot_1_agent", 0),
							(try_end),
							(overlay_set_color, reg0, ":value_14"),
							(position_set_x, 1, 750),
							(position_set_y, 1, 750),
							(overlay_set_size, reg0, 1),
							(position_set_x, 1, ":value_4"),
							(position_set_y, 1, ":value_3"),
							(overlay_set_position, reg0, 1),
							(team_get_bot_kill_count, reg0, ":number_2"),
							(create_text_overlay, reg0, "str_reg0", 8),
							(overlay_set_color, reg0, ":value_14"),
							(position_set_x, 1, 750),
							(position_set_y, 1, 750),
							(overlay_set_size, reg0, 1),
							(store_add, ":value_8", ":value_4", 215),
							(position_set_x, 1, ":value_8"),
							(position_set_y, 1, ":value_3"),
							(overlay_set_position, reg0, 1),
							(team_get_bot_death_count, reg0, ":number_2"),
							(create_text_overlay, reg0, "str_reg0", 8),
							(overlay_set_color, reg0, ":value_14"),
							(position_set_x, 1, 750),
							(position_set_y, 1, 750),
							(overlay_set_size, reg0, 1),
							(store_add, ":value_8", ":value_4", 265),
							(position_set_x, 1, ":value_8"),
							(position_set_y, 1, ":value_3"),
							(overlay_set_position, reg0, 1),
							(val_sub, ":value_3", 20),
						(try_end),
						(assign, ":value_10", 0),
					(try_end),
				(try_end),
				(try_begin),
					(eq, ":number_2", 0),
					(assign, ":var_42", ":value_3"),
				(try_end),
			(try_end),
			(try_begin),
				(le, ":var_42", ":value_3"),
				(assign, ":value_3", ":var_42"),
			(try_end),
			(assign, ":value_4", 42),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 16777215),
			(overlay_set_alpha, reg0, 208),
			(store_add, ":value_8", ":value_4", 0),
			(position_set_x, 1, ":value_8"),
			(store_add, ":value_9", ":value_3", 10),
			(position_set_y, 1, ":value_9"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 36000),
			(position_set_y, 1, 50),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(gt, ":var_3", 0),
				(assign, ":value_4", 280),
				(val_sub, ":value_3", 50),
				(create_text_overlay, reg0, "str_spectators", 0),
				(overlay_set_color, reg0, 16777215),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, reg0, 1),
				(create_text_overlay, reg0, "str_ping", 8),
				(overlay_set_color, reg0, 16777215),
				(store_add, ":value_8", ":value_4", 215),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 16777215),
				(overlay_set_alpha, reg0, 208),
				(store_add, ":value_8", ":value_4", 0),
				(position_set_x, 1, ":value_8"),
				(store_add, ":value_9", ":value_3", -10),
				(position_set_y, 1, ":value_9"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 12000),
				(position_set_y, 1, 50),
				(overlay_set_size, reg0, 1),
				(val_sub, ":value_3", 30),
				(assign, ":value_14", 12632256),
				(store_add, ":value_10", ":max_players", 1),
				(try_for_range, ":number", 0, ":value_10"),
					(store_add, ":value", ":number", 186),
					(troop_slot_eq, "trp_multiplayer_data", ":value", 1),
					(player_get_team_no, ":team_no_number", ":number"),
					(eq, ":team_no_number", 2),
					(troop_set_slot, "trp_multiplayer_data", ":value", 1),
					(try_begin),
						(eq, ":multiplayer_my_player", ":number"),
						(create_mesh_overlay, reg0, "mesh_white_plane"),
						(overlay_set_color, reg0, 16777215),
						(overlay_set_alpha, reg0, 53),
						(store_add, ":value_8", ":value_4", 0),
						(position_set_x, 1, ":value_8"),
						(store_add, ":value_9", ":value_3", 0),
						(position_set_y, 1, ":value_9"),
						(overlay_set_position, reg0, 1),
						(position_set_x, 1, 12000),
						(position_set_y, 1, 1000),
						(overlay_set_size, reg0, 1),
					(try_end),
					(str_store_player_username, 1, ":number"),
					(create_text_overlay, reg0, 1, 0),
					(overlay_set_color, reg0, ":value_14"),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, ":value_4"),
					(position_set_y, 1, ":value_3"),
					(overlay_set_position, reg0, 1),
					(player_get_ping, reg0, ":number"),
					(create_text_overlay, reg0, "str_reg0", 8),
					(overlay_set_color, reg0, ":value_14"),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(store_add, ":value_8", ":value_4", 215),
					(position_set_x, 1, ":value_8"),
					(position_set_y, 1, ":value_3"),
					(overlay_set_position, reg0, 1),
					(val_sub, ":value_3", 20),
				(try_end),
			(try_end),
			(omit_key_once, 238),
			(omit_key_once, 239),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|key_clicked, 238),
				(key_clicked, 239),
				(omit_key_once, 238),
				(omit_key_once, 239),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_stats_chart_opened_manually", 1),
				(neg|game_key_is_down, 18),
				(assign, "$g_multiplayer_stats_chart_opened_manually", 0),
				(clear_omitted_keys),
				(presentation_set_duration, 0),
			(try_end),
			(try_begin),
				(store_mul, ":value", "$g_stats_chart_update_period", 1000),
				(gt, ":trigger_param_1", ":value"),
				(clear_omitted_keys),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_stats_chart"),
			(try_end)
		])
	]),

	("multiplayer_stats_chart_deathmatch", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_score_a"),
			(position_set_x, 1, 295),
			(position_set_y, 1, 115),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(assign, ":var_1", 0),
			(assign, ":var_2", 0),
			(get_max_players, ":max_players"),
			(try_for_range, ":number", 0, ":max_players"),
				(store_add, ":value", ":number", 186),
				(try_begin),
					(player_is_active, ":number"),
					(troop_set_slot, "trp_multiplayer_data", ":value", 1),
					(player_get_team_no, ":team_no_number", ":number"),
					(try_begin),
						(this_or_next|eq, ":team_no_number", 0),
						(eq, ":team_no_number", 1),
						(val_add, ":var_1", 1),
					(else_try),
						(eq, ":team_no_number", 2),
						(val_add, ":var_2", 1),
					(try_end),
				(else_try),
					(troop_set_slot, "trp_multiplayer_data", ":value", 0),
				(try_end),
			(try_end),
			(try_begin),
				(this_or_next|gt, "$g_multiplayer_num_bots_team_1", 0),
				(gt, "$g_multiplayer_num_bots_team_2", 0),
				(val_add, ":var_1", 1),
			(try_end),
			(store_add, ":value_2", ":var_1", ":var_2"),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_stats_chart_deathmatch_container", 0, 131072),
			(position_set_x, 1, 300),
			(position_set_y, 1, 140),
			(overlay_set_position, "$g_presentation_obj_stats_chart_deathmatch_container", 1),
			(position_set_x, 1, 346),
			(position_set_y, 1, 530),
			(overlay_set_area_size, "$g_presentation_obj_stats_chart_deathmatch_container", 1),
			(set_container_overlay, "$g_presentation_obj_stats_chart_deathmatch_container"),
			(store_mul, ":value_3", ":value_2", 20),
			(val_add, ":value_3", 80),
			(try_begin),
				(gt, ":var_2", 0),
				(val_add, ":value_3", 70),
			(try_end),
			(try_begin),
				(ge, ":value_2", 17),
				(assign, "$g_stats_chart_update_period", 10),
			(else_try),
				(assign, "$g_stats_chart_update_period", 1),
			(try_end),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(assign, ":var_10", ":value_3"),
			(assign, ":value_4", 42),
			(create_text_overlay, reg0, "str_player_name", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, ":value_4"),
			(position_set_y, 1, ":var_10"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg0, 1),
			(create_text_overlay, reg0, "str_kills", 16),
			(overlay_set_color, reg0, 16777215),
			(store_add, ":value_5", ":value_4", 179),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":var_10"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg0, 1),
			(create_text_overlay, reg0, "str_deaths", 16),
			(overlay_set_color, reg0, 16777215),
			(store_add, ":value_5", ":value_4", 233),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":var_10"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg0, 1),
			(create_text_overlay, reg0, "str_ping", 16),
			(overlay_set_color, reg0, 16777215),
			(store_add, ":value_5", ":value_4", 282),
			(position_set_x, 1, ":value_5"),
			(position_set_y, 1, ":var_10"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 16777215),
			(overlay_set_alpha, reg0, 208),
			(store_add, ":value_5", ":value_4", 0),
			(position_set_x, 1, ":value_5"),
			(store_add, ":value_6", ":var_10", -10),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 15250),
			(position_set_y, 1, 50),
			(overlay_set_size, reg0, 1),
			(val_sub, ":var_10", 35),
			(store_add, ":value_7", ":max_players", 1),
			(try_for_range, ":unused", 0, ":value_7"),
				(assign, ":value_8", -30030),
				(assign, ":value_9", -1),
				(try_for_range, ":number", 0, ":max_players"),
					(store_add, ":value", ":number", 186),
					(troop_slot_eq, "trp_multiplayer_data", ":value", 1),
					(player_get_team_no, ":team_no_number", ":number"),
					(this_or_next|eq, ":team_no_number", 0),
					(eq, ":team_no_number", 1),
					(player_get_kill_count, ":kill_count_number", ":number"),
					(player_get_death_count, ":death_count_number", ":number"),
					(store_mul, ":value_10", ":kill_count_number", 1000),
					(val_sub, ":value_10", ":death_count_number"),
					(this_or_next|gt, ":value_10", ":value_8"),
					(eq, ":value_10", -30030),
					(assign, ":value_8", ":value_10"),
					(assign, ":value_9", ":number"),
				(try_end),
				(try_begin),
					(ge, ":value_9", 0),
					(store_add, ":value", ":value_9", 186),
					(troop_set_slot, "trp_multiplayer_data", ":value", 0),
					(str_store_player_username, 1, ":value_9"),
					(try_begin),
						(eq, ":multiplayer_my_player", ":value_9"),
						(create_mesh_overlay, reg0, "mesh_white_plane"),
						(overlay_set_color, reg0, 16777215),
						(overlay_set_alpha, reg0, 53),
						(store_add, ":value_5", ":value_4", 0),
						(position_set_x, 1, ":value_5"),
						(store_add, ":value_6", ":var_10", 0),
						(position_set_y, 1, ":value_6"),
						(overlay_set_position, reg0, 1),
						(position_set_x, 1, 16000),
						(position_set_y, 1, 1000),
						(overlay_set_size, reg0, 1),
					(try_end),
					(create_text_overlay, reg0, 1, 0),
					(overlay_set_color, reg0, 16777215),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, ":value_4"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(player_get_kill_count, reg0, ":value_9"),
					(create_text_overlay, reg0, "str_reg0", 8),
					(overlay_set_color, reg0, 16777215),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(store_add, ":value_5", ":value_4", 188),
					(position_set_x, 1, ":value_5"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(player_get_death_count, reg0, ":value_9"),
					(create_text_overlay, reg0, "str_reg0", 8),
					(overlay_set_color, reg0, 16777215),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(store_add, ":value_5", ":value_4", 238),
					(position_set_x, 1, ":value_5"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(player_get_ping, reg0, ":value_9"),
					(create_text_overlay, reg0, "str_reg0", 8),
					(overlay_set_color, reg0, 16777215),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(store_add, ":value_5", ":value_4", 288),
					(position_set_x, 1, ":value_5"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(val_sub, ":var_10", 20),
				(else_try),
					(store_add, ":value_11", "$g_multiplayer_num_bots_team_1", "$g_multiplayer_num_bots_team_2"),
					(ge, ":value_11", 1),
					(try_begin),
						(gt, ":value_11", 1),
						(assign, reg0, ":value_11"),
						(create_text_overlay, reg0, "str_bots_reg0_agents", 0),
					(else_try),
						(create_text_overlay, reg0, "str_bot_1_agent", 0),
					(try_end),
					(overlay_set_color, reg0, 13684944),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, ":value_4"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(team_get_bot_kill_count, reg0, 0),
					(assign, ":var_22", reg0),
					(team_get_bot_kill_count, reg0, 1),
					(val_add, ":var_22", reg0),
					(assign, reg0, ":var_22"),
					(create_text_overlay, reg0, "str_reg0", 8),
					(overlay_set_color, reg0, 13684944),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(store_add, ":value_5", ":value_4", 188),
					(position_set_x, 1, ":value_5"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(team_get_bot_death_count, reg0, 0),
					(assign, ":var_23", reg0),
					(team_get_bot_death_count, reg0, 1),
					(val_add, ":var_23", reg0),
					(assign, reg0, ":var_23"),
					(create_text_overlay, reg0, "str_reg0", 8),
					(overlay_set_color, reg0, 13684944),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(store_add, ":value_5", ":value_4", 238),
					(position_set_x, 1, ":value_5"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(val_sub, ":var_10", 20),
					(assign, ":value_7", 0),
				(else_try),
					(assign, ":value_7", 0),
				(try_end),
			(try_end),
			(assign, ":value_4", 42),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 16777215),
			(overlay_set_alpha, reg0, 208),
			(store_add, ":value_5", ":value_4", 0),
			(position_set_x, 1, ":value_5"),
			(store_add, ":value_6", ":var_10", 10),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 15250),
			(position_set_y, 1, 50),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(gt, ":var_2", 0),
				(assign, ":value_4", 75),
				(val_sub, ":var_10", 50),
				(create_text_overlay, reg0, "str_spectators", 0),
				(overlay_set_color, reg0, 16777215),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":var_10"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, reg0, 1),
				(create_text_overlay, reg0, "str_ping", 16),
				(overlay_set_color, reg0, 16777215),
				(store_add, ":value_5", ":value_4", 218),
				(position_set_x, 1, ":value_5"),
				(position_set_y, 1, ":var_10"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 750),
				(overlay_set_size, reg0, 1),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(overlay_set_color, reg0, 16777215),
				(overlay_set_alpha, reg0, 208),
				(store_add, ":value_5", ":value_4", 0),
				(position_set_x, 1, ":value_5"),
				(store_add, ":value_6", ":var_10", -10),
				(position_set_y, 1, ":value_6"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 12000),
				(position_set_y, 1, 50),
				(overlay_set_size, reg0, 1),
				(val_sub, ":var_10", 30),
				(assign, ":var_24", 12632256),
				(store_add, ":value_7", ":max_players", 1),
				(try_for_range, ":number", 0, ":value_7"),
					(store_add, ":value", ":number", 186),
					(troop_slot_eq, "trp_multiplayer_data", ":value", 1),
					(player_get_team_no, ":team_no_number", ":number"),
					(eq, ":team_no_number", 2),
					(troop_set_slot, "trp_multiplayer_data", ":value", 1),
					(try_begin),
						(eq, ":multiplayer_my_player", ":number"),
						(create_mesh_overlay, reg0, "mesh_white_plane"),
						(overlay_set_color, reg0, 16777215),
						(overlay_set_alpha, reg0, 53),
						(store_add, ":value_5", ":value_4", 0),
						(position_set_x, 1, ":value_5"),
						(store_add, ":value_6", ":var_10", 0),
						(position_set_y, 1, ":value_6"),
						(overlay_set_position, reg0, 1),
						(position_set_x, 1, 12000),
						(position_set_y, 1, 1000),
						(overlay_set_size, reg0, 1),
					(try_end),
					(str_store_player_username, 1, ":number"),
					(create_text_overlay, reg0, 1, 0),
					(overlay_set_color, reg0, ":var_24"),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, ":value_4"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(player_get_ping, reg0, ":number"),
					(create_text_overlay, reg0, "str_reg0", 8),
					(overlay_set_color, reg0, ":var_24"),
					(position_set_x, 1, 750),
					(position_set_y, 1, 750),
					(overlay_set_size, reg0, 1),
					(store_add, ":value_5", ":value_4", 215),
					(position_set_x, 1, ":value_5"),
					(position_set_y, 1, ":var_10"),
					(overlay_set_position, reg0, 1),
					(val_sub, ":var_10", 20),
				(try_end),
			(try_end),
			(omit_key_once, 238),
			(omit_key_once, 239),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|key_clicked, 238),
				(key_clicked, 239),
				(omit_key_once, 238),
				(omit_key_once, 239),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_stats_chart_opened_manually", 1),
				(neg|game_key_is_down, 18),
				(assign, "$g_multiplayer_stats_chart_opened_manually", 0),
				(clear_omitted_keys),
				(presentation_set_duration, 0),
			(try_end),
			(try_begin),
				(store_mul, ":value", "$g_stats_chart_update_period", 1000),
				(gt, ":trigger_param_1", ":value"),
				(clear_omitted_keys),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_stats_chart_deathmatch"),
			(try_end)
		])
	]),

	("multiplayer_escape_menu", prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_escape_menu_container", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 75),
			(overlay_set_position, "$g_presentation_obj_escape_menu_container", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 550),
			(overlay_set_area_size, "$g_presentation_obj_escape_menu_container", 1),
			(set_container_overlay, "$g_presentation_obj_escape_menu_container"),
			(assign, ":var_1", 500),
			(create_text_overlay, reg0, "str_choose_an_option", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":var_1", 40),
			(create_button_overlay, "$g_presentation_obj_escape_menu_1", "str_choose_faction", 0),
			(overlay_set_color, "$g_presentation_obj_escape_menu_1", 16777215),
			(multiplayer_get_my_team, ":multiplayer_my_team"),
			(assign, "$g_presentation_obj_escape_menu_2", -1),
			(assign, "$g_presentation_obj_escape_menu_3", -1),
			(assign, "$g_presentation_obj_escape_menu_6", -1),
			(assign, "$g_presentation_obj_escape_menu_7", -1),
			(assign, "$g_presentation_obj_escape_menu_8", -1),
			(assign, "$g_presentation_obj_escape_menu_9", -1),
			(assign, "$g_presentation_obj_escape_menu_10", -1),
			(assign, "$g_presentation_obj_escape_menu_11", -1),
			(assign, "$g_presentation_obj_escape_menu_12", -1),
			(assign, "$g_presentation_obj_escape_menu_13", -1),
			(try_begin),
				(lt, ":multiplayer_my_team", 2),
				(create_button_overlay, "$g_presentation_obj_escape_menu_2", "str_choose_troop", 0),
				(overlay_set_color, "$g_presentation_obj_escape_menu_2", 16777215),
				(multiplayer_get_my_troop, ":multiplayer_my_troop"),
				(try_begin),
					(ge, ":multiplayer_my_troop", 0),
					(create_button_overlay, "$g_presentation_obj_escape_menu_3", "str_choose_items", 0),
					(overlay_set_color, "$g_presentation_obj_escape_menu_3", 16777215),
				(try_end),
			(try_end),
			(create_button_overlay, "$g_presentation_obj_escape_menu_4", "str_options", 0),
			(overlay_set_color, "$g_presentation_obj_escape_menu_4", 16777215),
			(create_button_overlay, "$g_presentation_obj_escape_menu_5", "str_redefine_keys", 0),
			(overlay_set_color, "$g_presentation_obj_escape_menu_5", 16777215),
			(create_button_overlay, "$g_presentation_obj_escape_menu_13", "@Show game rules", 0),
			(overlay_set_color, "$g_presentation_obj_escape_menu_13", 16777215),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(try_begin),
				(this_or_next|eq, "$g_multiplayer_maps_voteable", 1),
				(this_or_next|eq, "$g_multiplayer_factions_voteable", 1),
				(this_or_next|gt, "$g_multiplayer_num_bots_voteable", 0),
				(this_or_next|eq, "$g_multiplayer_kick_voteable", 1),
				(eq, "$g_multiplayer_ban_voteable", 1),
				(create_button_overlay, "$g_presentation_obj_escape_menu_6", "str_submit_a_poll", 0),
				(overlay_set_color, "$g_presentation_obj_escape_menu_6", 16777215),
				(assign, "$g_presentation_obj_escape_menu_6_available", 1),
				(try_begin),
					(ge, ":multiplayer_my_player", 0),
					(player_get_slot, ":multiplayer_my_player_poll_disabled_until_time", ":multiplayer_my_player", slot_player_poll_disabled_until_time),
					(store_mission_timer_a, ":mission_timer_a"),
					(lt, ":mission_timer_a", ":multiplayer_my_player_poll_disabled_until_time"),
					(overlay_set_color, "$g_presentation_obj_escape_menu_6", 8947848),
					(overlay_set_hilight_color, "$g_presentation_obj_escape_menu_6", 8947848),
					(assign, "$g_presentation_obj_escape_menu_6_available", 0),
				(try_end),
			(try_end),
			(try_begin),
				(ge, ":multiplayer_my_player", 0),
				(player_is_admin, ":multiplayer_my_player"),
				(create_button_overlay, "$g_presentation_obj_escape_menu_7", "str_administrator_panel", 0),
				(overlay_set_color, "$g_presentation_obj_escape_menu_7", 16777215),
				(create_button_overlay, "$g_presentation_obj_escape_menu_8", "str_kick_player", 0),
				(overlay_set_color, "$g_presentation_obj_escape_menu_8", 16777215),
				(create_button_overlay, "$g_presentation_obj_escape_menu_9", "str_ban_player", 0),
				(overlay_set_color, "$g_presentation_obj_escape_menu_9", 16777215),
			(try_end),
			(create_button_overlay, "$g_presentation_obj_escape_menu_11", "str_mute_player", 0),
			(overlay_set_color, "$g_presentation_obj_escape_menu_11", 16777215),
			(try_begin),
				(assign, "$g_presentation_obj_escape_menu_12", -1),
				(assign, ":value", 0),
				(get_max_players, ":max_players"),
				(try_for_range, ":number", 0, ":max_players"),
					(player_is_active, ":number"),
					(player_get_is_muted, ":is_muted_number", ":number"),
					(eq, ":is_muted_number", 1),
					(assign, ":value", 1),
				(try_end),
				(eq, ":value", 1),
				(create_button_overlay, "$g_presentation_obj_escape_menu_12", "str_unmute_player", 0),
				(overlay_set_color, "$g_presentation_obj_escape_menu_12", 16777215),
			(try_end),
			(create_button_overlay, "$g_presentation_obj_escape_menu_10", "str_quit", 0),
			(overlay_set_color, "$g_presentation_obj_escape_menu_10", 16777215),
			(position_set_x, 1, 130),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, "$g_presentation_obj_escape_menu_1", 1),
			(try_begin),
				(ge, "$g_presentation_obj_escape_menu_2", 0),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_escape_menu_2", 1),
			(try_end),
			(try_begin),
				(ge, "$g_presentation_obj_escape_menu_3", 0),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_escape_menu_3", 1),
			(try_end),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, "$g_presentation_obj_escape_menu_4", 1),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, "$g_presentation_obj_escape_menu_5", 1),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, "$g_presentation_obj_escape_menu_13", 1),
			(try_begin),
				(ge, "$g_presentation_obj_escape_menu_6", 0),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_escape_menu_6", 1),
			(try_end),
			(try_begin),
				(ge, "$g_presentation_obj_escape_menu_7", 0),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_escape_menu_7", 1),
			(try_end),
			(try_begin),
				(ge, "$g_presentation_obj_escape_menu_8", 0),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_escape_menu_8", 1),
			(try_end),
			(try_begin),
				(ge, "$g_presentation_obj_escape_menu_9", 0),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_escape_menu_9", 1),
			(try_end),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, "$g_presentation_obj_escape_menu_11", 1),
			(try_begin),
				(ge, "$g_presentation_obj_escape_menu_12", 0),
				(val_sub, ":var_1", 40),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_escape_menu_12", 1),
			(try_end),
			(val_sub, ":var_1", 40),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, "$g_presentation_obj_escape_menu_10", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_1"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_team_select"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_2"),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_troop_select"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_3"),
				(presentation_set_duration, 0),
				(assign, "$g_presentation_state", 0),
				(start_presentation, "prsnt_multiplayer_item_select"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_4"),
				(presentation_set_duration, 0),
				(change_screen_options),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_5"),
				(presentation_set_duration, 0),
				(change_screen_controls),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_6"),
				(eq, "$g_presentation_obj_escape_menu_6_available", 1),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_multiplayer_poll_menu"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_7"),
				(presentation_set_duration, 0),
				(multiplayer_send_message_to_server, 18),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_8"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_players_list_action_type", 3),
				(start_presentation, "prsnt_multiplayer_show_players_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_9"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_players_list_action_type", 4),
				(start_presentation, "prsnt_multiplayer_show_players_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_10"),
				(presentation_set_duration, 0),
				(finish_mission, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_11"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_players_list_action_type", 5),
				(start_presentation, "prsnt_multiplayer_show_players_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_12"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_players_list_action_type", 6),
				(start_presentation, "prsnt_multiplayer_show_players_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_escape_menu_13"),
				(presentation_set_duration, 0),
				(multiplayer_send_message_to_server, 45),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(key_clicked, 1),
				(gt, ":trigger_param_1", 200),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_poll_menu", prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_poll_menu_container", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_poll_menu_container", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_poll_menu_container", 1),
			(set_container_overlay, "$g_presentation_obj_poll_menu_container"),
			(assign, "$g_presentation_obj_poll_menu_1", -1),
			(assign, "$g_presentation_obj_poll_menu_4", -1),
			(assign, "$g_presentation_obj_poll_menu_5", -1),
			(assign, ":var_1", 450),
			(create_text_overlay, reg0, "str_choose_a_poll_type", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_1"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":var_1", 40),
			(position_set_x, 1, 60),
			(try_begin),
				(eq, "$g_multiplayer_maps_voteable", 1),
				(create_button_overlay, "$g_presentation_obj_poll_menu_1", "str_poll_for_changing_the_map", 0),
				(overlay_set_color, "$g_presentation_obj_poll_menu_1", 16777215),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_poll_menu_1", 1),
				(val_sub, ":var_1", 40),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_factions_voteable", 1),
				(create_button_overlay, "$g_presentation_obj_poll_menu_4", "str_poll_for_changing_the_map_and_factions", 0),
				(overlay_set_color, "$g_presentation_obj_poll_menu_4", 16777215),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_poll_menu_4", 1),
				(val_sub, ":var_1", 40),
			(try_end),
			(try_begin),
				(gt, "$g_multiplayer_num_bots_voteable", 0),
				(create_button_overlay, "$g_presentation_obj_poll_menu_5", "str_poll_for_changing_number_of_bots", 0),
				(overlay_set_color, "$g_presentation_obj_poll_menu_5", 16777215),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_poll_menu_5", 1),
				(val_sub, ":var_1", 40),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_kick_voteable", 1),
				(create_button_overlay, "$g_presentation_obj_poll_menu_2", "str_poll_for_kicking_a_player", 0),
				(overlay_set_color, "$g_presentation_obj_poll_menu_2", 16777215),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_poll_menu_2", 1),
				(val_sub, ":var_1", 40),
			(try_end),
			(try_begin),
				(eq, "$g_multiplayer_ban_voteable", 1),
				(create_button_overlay, "$g_presentation_obj_poll_menu_3", "str_poll_for_banning_a_player", 0),
				(overlay_set_color, "$g_presentation_obj_poll_menu_3", 16777215),
				(position_set_y, 1, ":var_1"),
				(overlay_set_position, "$g_presentation_obj_poll_menu_3", 1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_poll_menu_1"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_maps_list_action_type", 1),
				(start_presentation, "prsnt_multiplayer_show_maps_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_poll_menu_2"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_players_list_action_type", 1),
				(start_presentation, "prsnt_multiplayer_show_players_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_poll_menu_3"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_players_list_action_type", 2),
				(start_presentation, "prsnt_multiplayer_show_players_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_poll_menu_4"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_maps_list_action_type", 2),
				(start_presentation, "prsnt_multiplayer_show_maps_list"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_poll_menu_5"),
				(presentation_set_duration, 0),
				(assign, "$g_multiplayer_number_of_bots_list_action_type", 1),
				(start_presentation, "prsnt_multiplayer_show_number_of_bots_list"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(key_clicked, 1),
				(gt, ":trigger_param_1", 200),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_show_players_list", prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_show_players_1", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_show_players_1", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_show_players_1", 1),
			(set_container_overlay, "$g_presentation_obj_show_players_1"),
			(multiplayer_get_my_player, ":multiplayer_my_player"),
			(assign, ":var_2", 10),
			(get_max_players, ":max_players"),
			(try_for_range, ":number", 1, ":max_players"),
				(player_is_active, ":number"),
				(assign, ":value", 0),
				(try_begin),
					(neq, "$g_multiplayer_players_list_action_type", 5),
					(neq, "$g_multiplayer_players_list_action_type", 6),
					(assign, ":value", 1),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 5),
					(neq, ":number", ":multiplayer_my_player"),
					(player_get_is_muted, ":is_muted_number", ":number"),
					(eq, ":is_muted_number", 0),
					(assign, ":value", 1),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 6),
					(neq, ":number", ":multiplayer_my_player"),
					(player_get_is_muted, ":is_muted_number", ":number"),
					(eq, ":is_muted_number", 1),
					(assign, ":value", 1),
				(try_end),
				(eq, ":value", 1),
				(val_add, ":var_2", 40),
			(try_end),
			(create_text_overlay, reg0, "str_choose_a_player", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":var_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":var_2", 40),
			(get_max_players, ":max_players"),
			(try_for_range, ":number", 1, ":max_players"),
				(player_is_active, ":number"),
				(player_set_slot, ":number", slot_player_button_index, -1),
				(assign, ":value", 0),
				(try_begin),
					(neq, "$g_multiplayer_players_list_action_type", 5),
					(neq, "$g_multiplayer_players_list_action_type", 6),
					(assign, ":value", 1),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 5),
					(neq, ":number", ":multiplayer_my_player"),
					(player_get_is_muted, ":is_muted_number", ":number"),
					(eq, ":is_muted_number", 0),
					(assign, ":value", 1),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 6),
					(neq, ":number", ":multiplayer_my_player"),
					(player_get_is_muted, ":is_muted_number", ":number"),
					(eq, ":is_muted_number", 1),
					(assign, ":value", 1),
				(try_end),
				(eq, ":value", 1),
				(str_store_player_username, 0, ":number"),
				(create_button_overlay, ":var_7", 0, 0),
				(overlay_set_color, ":var_7", 16777215),
				(position_set_x, 1, 130),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, ":var_7", 1),
				(val_sub, ":var_2", 40),
				(player_set_slot, ":number", slot_player_button_index, ":var_7"),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(get_max_players, ":max_players"),
			(try_for_range, ":number", 1, ":max_players"),
				(player_is_active, ":number"),
				(player_slot_eq, ":number", slot_player_button_index, ":trigger_param_1"),
				(try_begin),
					(is_between, "$g_multiplayer_players_list_action_type", 1, 3),
					(try_begin),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(ge, ":multiplayer_my_player", 0),
						(multiplayer_send_2_int_to_server, 21, "$g_multiplayer_players_list_action_type", ":number"),
						(store_mission_timer_a, ":mission_timer_a"),
						(val_add, ":mission_timer_a", 900),
						(player_set_slot, ":multiplayer_my_player", slot_player_poll_disabled_until_time, ":mission_timer_a"),
					(try_end),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 3),
					(multiplayer_send_int_to_server, 23, ":number"),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 4),
					(multiplayer_send_int_to_server, 24, ":number"),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 5),
					(player_set_is_muted, ":number", 1),
				(else_try),
					(eq, "$g_multiplayer_players_list_action_type", 6),
					(player_set_is_muted, ":number", 0),
				(try_end),
				(assign, ":max_players", 0),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(key_clicked, 1),
				(gt, ":trigger_param_1", 200),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_show_maps_list", prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_show_maps_list_menu_container", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_show_maps_list_menu_container", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_show_maps_list_menu_container", 1),
			(set_container_overlay, "$g_presentation_obj_show_maps_list_menu_container"),
			(call_script, "script_multiplayer_fill_map_game_types", "$g_multiplayer_game_type"),
			(assign, ":var_1", reg0),
			(store_mul, ":value", ":var_1", 40),
			(val_add, ":value", 10),
			(create_text_overlay, reg0, "str_choose_a_map", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":value"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value", 40),
			(assign, ":value_2", -1),
			(try_for_range, ":number", 0, ":var_1"),
				(store_add, ":value_3", ":number", 0),
				(troop_get_slot, ":multiplayer_data_value_3", "trp_multiplayer_data", ":value_3"),
				(store_sub, ":value_4", ":multiplayer_data_value_3", "scn_multi_scene_1"),
				(val_add, ":value_4", "str_multi_scene_1"),
				(str_store_string, 0, ":value_4"),
				(create_button_overlay, ":value_2", 0, 0),
				(overlay_set_color, ":value_2", 16777215),
				(position_set_x, 1, 100),
				(position_set_y, 1, ":value"),
				(overlay_set_position, ":value_2", 1),
				(val_sub, ":value", 40),
			(try_end),
			(store_add, "$g_show_maps_list_button_list_end_index", ":value_2", 1),
			(store_sub, "$g_show_maps_list_button_list_first_index", "$g_show_maps_list_button_list_end_index", ":var_1"),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_for_range, ":var_2", "$g_show_maps_list_button_list_first_index", "$g_show_maps_list_button_list_end_index"),
				(eq, ":trigger_param_1", ":var_2"),
				(call_script, "script_multiplayer_fill_map_game_types", "$g_multiplayer_game_type"),
				(store_sub, ":value", ":trigger_param_1", "$g_show_maps_list_button_list_first_index"),
				(val_add, ":value", 0),
				(troop_get_slot, ":multiplayer_data_value", "trp_multiplayer_data", ":value"),
				(presentation_set_duration, 0),
				(try_begin),
					(eq, "$g_multiplayer_maps_list_action_type", 1),
					(try_begin),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(ge, ":multiplayer_my_player", 0),
						(multiplayer_send_2_int_to_server, 21, 0, ":multiplayer_data_value"),
						(store_mission_timer_a, ":mission_timer_a"),
						(val_add, ":mission_timer_a", 900),
						(player_set_slot, ":multiplayer_my_player", slot_player_poll_disabled_until_time, ":mission_timer_a"),
					(try_end),
				(else_try),
					(assign, "$g_multiplayer_factions_list_action_type", 1),
					(assign, "$g_multiplayer_poll_for_map_and_faction_data_map", ":multiplayer_data_value"),
					(start_presentation, "prsnt_multiplayer_show_factions_list"),
				(try_end),
				(assign, "$g_show_maps_list_button_list_end_index", 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(key_clicked, 1),
				(gt, ":trigger_param_1", 200),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_show_factions_list", prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_show_factions_list_menu_container", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_show_factions_list_menu_container", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_show_factions_list_menu_container", 1),
			(set_container_overlay, "$g_presentation_obj_show_factions_list_menu_container"),
			(store_sub, ":value", "fac_kingdoms_end", "fac_kingdom_1"),
			(try_begin),
				(eq, "$g_multiplayer_factions_list_action_type", 2),
				(val_sub, ":value", 1),
			(try_end),
			(store_mul, ":value_2", ":value", 40),
			(val_add, ":value_2", 10),
			(assign, reg0, "$g_multiplayer_factions_list_action_type"),
			(create_text_overlay, reg0, "str_choose_a_faction_for_team_reg0", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", 40),
			(assign, ":value_3", -1),
			(try_for_range, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
				(this_or_next|eq, "$g_multiplayer_factions_list_action_type", 1),
				(neq, "$g_multiplayer_poll_for_map_and_faction_data_faction_1", ":faction"),
				(str_store_faction_name, 0, ":faction"),
				(create_button_overlay, ":value_3", 0, 0),
				(overlay_set_color, ":value_3", 16777215),
				(position_set_x, 1, 100),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_3", 1),
				(val_sub, ":value_2", 40),
			(try_end),
			(store_add, "$g_show_factions_list_button_list_end_index", ":value_3", 1),
			(store_sub, "$g_show_factions_list_button_list_first_index", "$g_show_factions_list_button_list_end_index", ":value"),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_for_range, ":var_2", "$g_show_factions_list_button_list_first_index", "$g_show_factions_list_button_list_end_index"),
				(eq, ":trigger_param_1", ":var_2"),
				(store_sub, ":value", ":trigger_param_1", "$g_show_factions_list_button_list_first_index"),
				(val_add, ":value", "fac_kingdom_1"),
				(presentation_set_duration, 0),
				(try_begin),
					(eq, "$g_multiplayer_factions_list_action_type", 2),
					(try_begin),
						(ge, ":value", "$g_multiplayer_poll_for_map_and_faction_data_faction_1"),
						(val_add, ":value", 1),
					(try_end),
					(try_begin),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(ge, ":multiplayer_my_player", 0),
						(multiplayer_send_4_int_to_server, 21, 3, "$g_multiplayer_poll_for_map_and_faction_data_map", "$g_multiplayer_poll_for_map_and_faction_data_faction_1", ":value"),
						(store_mission_timer_a, ":mission_timer_a"),
						(val_add, ":mission_timer_a", 900),
						(player_set_slot, ":multiplayer_my_player", slot_player_poll_disabled_until_time, ":mission_timer_a"),
					(try_end),
				(else_try),
					(assign, "$g_multiplayer_factions_list_action_type", 2),
					(assign, "$g_multiplayer_poll_for_map_and_faction_data_faction_1", ":value"),
					(start_presentation, "prsnt_multiplayer_show_factions_list"),
				(try_end),
				(assign, "$g_show_factions_list_button_list_end_index", 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(key_clicked, 1),
				(gt, ":trigger_param_1", 200),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_show_number_of_bots_list", prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_mp_ingame_menu"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_show_number_of_bots_list_menu_container", 0, 131072),
			(position_set_x, 1, 285),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_show_number_of_bots_list_menu_container", 1),
			(position_set_x, 1, 405),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_show_number_of_bots_list_menu_container", 1),
			(set_container_overlay, "$g_presentation_obj_show_number_of_bots_list_menu_container"),
			(assign, ":var_1", 0),
			(store_add, ":value", "$g_multiplayer_num_bots_voteable", 1),
			(try_for_range, ":number", 0, ":value"),
				(assign, ":value_2", ":number"),
				(val_mod, ":value_2", 5),
				(this_or_next|lt, ":number", 10),
				(eq, ":value_2", 0),
				(val_add, ":var_1", 1),
			(try_end),
			(store_mul, ":value_3", ":var_1", 40),
			(val_add, ":value_3", 10),
			(assign, reg0, "$g_multiplayer_number_of_bots_list_action_type"),
			(create_text_overlay, reg0, "str_choose_number_of_bots_for_team_reg0", 0),
			(overlay_set_color, reg0, 16777215),
			(position_set_x, 1, 0),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_3", 40),
			(assign, ":value_4", -1),
			(try_for_range, ":number", 0, ":value"),
				(assign, ":value_2", ":number"),
				(val_mod, ":value_2", 5),
				(this_or_next|lt, ":number", 10),
				(eq, ":value_2", 0),
				(assign, reg0, ":number"),
				(str_store_string, 0, "str_reg0"),
				(create_button_overlay, ":value_4", 0, 0),
				(overlay_set_color, ":value_4", 16777215),
				(position_set_x, 1, 100),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, ":value_4", 1),
				(val_sub, ":value_3", 40),
			(try_end),
			(store_add, "$g_show_number_of_bots_list_button_list_end_index", ":value_4", 1),
			(store_sub, "$g_show_number_of_bots_list_button_list_first_index", "$g_show_number_of_bots_list_button_list_end_index", ":var_1"),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_for_range, ":var_2", "$g_show_number_of_bots_list_button_list_first_index", "$g_show_number_of_bots_list_button_list_end_index"),
				(eq, ":trigger_param_1", ":var_2"),
				(store_sub, ":value", ":trigger_param_1", "$g_show_number_of_bots_list_button_list_first_index"),
				(try_begin),
					(lt, ":value", 10),
					(assign, ":value_2", ":value"),
				(else_try),
					(store_sub, ":value_2", ":value", 8),
					(val_mul, ":value_2", 5),
				(try_end),
				(presentation_set_duration, 0),
				(try_begin),
					(eq, "$g_multiplayer_number_of_bots_list_action_type", 2),
					(try_begin),
						(multiplayer_get_my_player, ":multiplayer_my_player"),
						(ge, ":multiplayer_my_player", 0),
						(multiplayer_send_3_int_to_server, 21, 4, "$g_multiplayer_poll_number_of_bots_team_1", ":value_2"),
						(store_mission_timer_a, ":mission_timer_a"),
						(val_add, ":mission_timer_a", 900),
						(player_set_slot, ":multiplayer_my_player", slot_player_poll_disabled_until_time, ":mission_timer_a"),
					(try_end),
				(else_try),
					(assign, "$g_multiplayer_number_of_bots_list_action_type", 2),
					(assign, "$g_multiplayer_poll_number_of_bots_team_1", ":value_2"),
					(start_presentation, "prsnt_multiplayer_show_number_of_bots_list"),
				(try_end),
				(assign, "$g_show_number_of_bots_list_button_list_end_index", 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(key_clicked, 1),
				(gt, ":trigger_param_1", 200),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("multiplayer_poll", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_color, reg0, 0),
			(overlay_set_alpha, reg0, 68),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 37500),
			(position_set_y, 1, 4500),
			(overlay_set_size, reg0, 1),
			(try_begin),
				(eq, "$g_multiplayer_poll_to_show", 0),
				(store_sub, ":value", "$g_multiplayer_poll_value_to_show", "scn_multi_scene_1"),
				(val_add, ":value", "str_multi_scene_1"),
				(str_store_string, 0, ":value"),
				(create_text_overlay, reg0, "str_poll_change_map", 16),
			(else_try),
				(eq, "$g_multiplayer_poll_to_show", 1),
				(str_store_player_username, 0, "$g_multiplayer_poll_value_to_show"),
				(create_text_overlay, reg0, "str_poll_kick_player", 16),
			(else_try),
				(eq, "$g_multiplayer_poll_to_show", 2),
				(str_store_player_username, 0, "$g_multiplayer_poll_value_to_show"),
				(create_text_overlay, reg0, "str_poll_ban_player", 16),
			(else_try),
				(eq, "$g_multiplayer_poll_to_show", 3),
				(store_sub, ":value", "$g_multiplayer_poll_value_to_show", "scn_multi_scene_1"),
				(val_add, ":value", "str_multi_scene_1"),
				(str_store_string, 0, ":value"),
				(str_store_faction_name, 1, "$g_multiplayer_poll_value_2_to_show"),
				(str_store_faction_name, 2, "$g_multiplayer_poll_value_3_to_show"),
				(create_text_overlay, reg0, "str_poll_change_map_with_faction", 131088),
			(else_try),
				(assign, reg0, "$g_multiplayer_poll_value_to_show"),
				(assign, reg1, "$g_multiplayer_poll_value_2_to_show"),
				(str_store_faction_name, 0, "$g_multiplayer_team_1_faction"),
				(str_store_faction_name, 1, "$g_multiplayer_team_2_faction"),
				(create_text_overlay, reg0, "str_poll_change_number_of_bots", 131088),
			(try_end),
			(overlay_set_color, reg0, 16777215),
			(try_begin),
				(neq, "$g_multiplayer_poll_to_show", 3),
				(neq, "$g_multiplayer_poll_to_show", 4),
				(position_set_x, 1, 400),
				(position_set_y, 1, 100),
				(overlay_set_position, reg0, 1),
			(else_try),
				(position_set_x, 1, 50),
				(position_set_y, 1, 70),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 60),
				(overlay_set_area_size, reg0, 1),
			(try_end),
			(store_mission_timer_a, ":mission_timer_a"),
			(store_sub, "$g_multiplayer_poll_last_written_seconds_left", "$g_multiplayer_poll_client_end_time", ":mission_timer_a"),
			(assign, reg0, "$g_multiplayer_poll_last_written_seconds_left"),
			(create_text_overlay, "$g_presentation_obj_poll_1", "str_poll_time_left", 32776),
			(overlay_set_color, "$g_presentation_obj_poll_1", 16777215),
			(position_set_x, 1, 790),
			(position_set_y, 1, 60),
			(overlay_set_position, "$g_presentation_obj_poll_1", 1),
			(omit_key_once, 2),
			(omit_key_once, 3),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 3),
				(gt, ":trigger_param_1", 500),
				(multiplayer_send_int_to_server, 22, 0),
				(clear_omitted_keys),
				(presentation_set_duration, 0),
			(else_try),
				(key_clicked, 2),
				(gt, ":trigger_param_1", 500),
				(multiplayer_send_int_to_server, 22, 1),
				(clear_omitted_keys),
				(presentation_set_duration, 0),
			(try_end),
			(store_mission_timer_a, ":mission_timer_a"),
			(store_sub, ":value", "$g_multiplayer_poll_client_end_time", ":mission_timer_a"),
			(try_begin),
				(neq, ":value", "$g_multiplayer_poll_last_written_seconds_left"),
				(try_begin),
					(lt, ":value", 0),
					(clear_omitted_keys),
					(presentation_set_duration, 0),
				(else_try),
					(assign, "$g_multiplayer_poll_last_written_seconds_left", ":value"),
					(assign, reg0, "$g_multiplayer_poll_last_written_seconds_left"),
					(overlay_set_text, "$g_presentation_obj_poll_1", "str_poll_time_left"),
				(try_end),
			(try_end)
		])
	]),

	("tutorial_show_mouse_movement", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(try_begin),
				(this_or_next|eq, "$g_tutorial_mouse_dir", -1),
				(eq, "$g_tutorial_mouse_click", -1),
				(presentation_set_duration, 0),
			(else_try),
				(set_fixed_point_multiplier, 1000),
				(assign, "$g_tutorial_displayed_mouse_dir", "$g_tutorial_mouse_dir"),
				(assign, "$g_tutorial_displayed_mouse_click", "$g_tutorial_mouse_click"),
				(store_add, ":value", "$g_tutorial_mouse_dir", "mesh_mouse_arrow_down"),
				(create_mesh_overlay, reg0, ":value"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 380),
				(position_set_y, 1, 500),
				(overlay_set_position, reg0, 1),
				(try_begin),
					(eq, "$g_tutorial_mouse_click", 0),
					(create_mesh_overlay, reg0, "mesh_mouse_left_click"),
				(else_try),
					(create_mesh_overlay, reg0, "mesh_mouse_right_click"),
				(try_end),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 540),
				(position_set_y, 1, 500),
				(overlay_set_position, reg0, 1),
				(create_mesh_overlay, reg0, "mesh_mouse_arrow_plus"),
				(overlay_set_color, reg0, 16777215),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 470),
				(position_set_y, 1, 510),
				(overlay_set_position, reg0, 1),
				(presentation_set_duration, 999999),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|neq, "$g_tutorial_displayed_mouse_dir", "$g_tutorial_mouse_dir"),
				(neq, "$g_tutorial_displayed_mouse_click", "$g_tutorial_mouse_click"),
				(presentation_set_duration, 0),
				(try_begin),
					(ge, "$g_tutorial_mouse_dir", 0),
					(ge, "$g_tutorial_mouse_click", 0),
					(start_presentation, "prsnt_tutorial_show_mouse_movement"),
				(try_end),
			(try_end)
		])
	]),

	("name_kingdom", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(str_store_string, 1, "str_name_kingdom_text"),
			(create_text_overlay, reg1, 1, 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_position, reg1, 1),
			(overlay_set_text, reg1, 1),
			(create_simple_text_box_overlay, "$g_presentation_obj_name_kingdom_1"),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_1", 1),
			(try_begin),
				(eq, "$players_kingdom_name_set", 1),
				(str_store_faction_name, 7, "fac_player_supporters_faction"),
				(overlay_set_text, "$g_presentation_obj_name_kingdom_1", 7),
			(else_try),
				(str_store_troop_name, 0, "trp_player"),
				(overlay_set_text, "$g_presentation_obj_name_kingdom_1", "str_default_kingdom_name"),
				(str_store_string, 7, "str_default_kingdom_name"),
			(try_end),
			(create_button_overlay, "$g_presentation_obj_name_kingdom_2", "@Continue...", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_2", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_name_kingdom_1"),
				(str_store_string, 7, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_name_kingdom_2"),
				(faction_set_name, "fac_player_supporters_faction", 7),
				(faction_set_color, "fac_player_supporters_faction", 6724044),
				(assign, "$players_kingdom_name_set", 1),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("banner_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(str_store_string, 1, "str_banner_selection_text"),
			(create_text_overlay, reg1, 1, 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(overlay_set_text, reg1, 1),
			(create_button_overlay, "$g_presentation_obj_banner_selection_1", "@Next Page", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_banner_selection_1", 1),
			(assign, ":value", 150),
			(assign, ":var_2", 575),
			(assign, ":var_3", "mesh_banner_kingdom_n"),
			(store_sub, ":value_2", "fac_kingdoms_end", "fac_kingdom_1"),
			(val_sub, ":var_3", ":value_2"),
			(store_mul, ":value_3", 16, "$g_presentation_page_no"),
			(val_add, ":value_3", "mesh_banner_a01"),
			(store_add, ":value_4", ":value_3", 16),
			(val_min, ":var_3", ":value_4"),
			(store_add, "$g_presentation_banner_start", "$g_presentation_obj_banner_selection_1", 1),
			(try_for_range, ":var_7", ":value_3", ":var_3"),
				(create_image_button_overlay, reg1, ":var_7", ":var_7"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 100),
				(position_set_y, 1, 100),
				(overlay_set_size, reg1, 1),
				(val_add, ":value", 100),
				(ge, ":value", 900),
				(assign, ":value", 150),
				(val_sub, ":var_2", 250),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_banner_selection_1"),
				(val_add, "$g_presentation_page_no", 1),
				(val_mod, "$g_presentation_page_no", 8),
				(start_presentation, "prsnt_banner_selection"),
			(else_try),
				(store_sub, ":value", ":trigger_param_1", "$g_presentation_banner_start"),
				(store_mul, ":value_2", 16, "$g_presentation_page_no"),
				(val_add, ":value", ":value_2"),
				(store_add, ":value_3", ":value", "icon_banner_01"),
				(party_set_banner_icon, "p_main_party", ":value_3"),
				(store_add, ":value_4", ":value", "spr_banner_a"),
				(troop_set_slot, "trp_player", slot_troop_banner_scene_prop, ":value_4"),
				(presentation_set_duration, 0),
				(assign, ":value_5", 0),
				(assign, ":value_6", "trp_knight_1_1_wife"),
				(try_for_range, ":troop", "trp_npc1", ":value_6"),
					(troop_slot_eq, ":troop", slot_troop_banner_scene_prop, ":value_4"),
					(assign, ":value_5", ":troop"),
					(assign, ":value_6", 0),
					(troop_set_slot, ":troop", slot_troop_banner_scene_prop, "spr_banner_lords_sarranid21"),
					(troop_get_slot, ":troop_leaded_party", ":troop", slot_troop_leaded_party),
					(gt, ":troop_leaded_party", 0),
					(party_set_banner_icon, ":troop_leaded_party", "icon_map_flag_kingdom_n"),
				(try_end),
				(try_for_range, ":party", "p_town_1", "p_village_1"),
					(try_begin),
						(party_slot_eq, ":party", slot_town_lord, "trp_player"),
						(party_set_banner_icon, ":party", ":value_3"),
					(else_try),
						(party_slot_eq, ":party", slot_town_lord, ":value_5"),
						(party_set_banner_icon, ":party", "icon_map_flag_kingdom_n"),
					(try_end),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|key_clicked, 57),
				(this_or_next|key_clicked, 28),
				(this_or_next|key_clicked, 1),
				(key_clicked, 14),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("custom_banner", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(troop_get_slot, ":player_custom_banner_flag_type", "trp_player", slot_troop_custom_banner_flag_type),
			(val_max, ":player_custom_banner_flag_type", 0),
			(val_add, ":player_custom_banner_flag_type", "mesh_custom_banner_01"),
			(troop_get_slot, ":player_custom_banner_map_flag_type", "trp_player", slot_troop_custom_banner_map_flag_type),
			(val_max, ":player_custom_banner_map_flag_type", 0),
			(val_add, ":player_custom_banner_map_flag_type", "mesh_custom_map_banner_01"),
			(troop_get_slot, ":player_custom_banner_bg_color_1", "trp_player", slot_troop_custom_banner_bg_color_1),
			(troop_get_slot, ":player_custom_banner_bg_color_2", "trp_player", slot_troop_custom_banner_bg_color_2),
			(create_text_overlay, reg1, "str_color_no_1", 0),
			(position_set_x, 1, 40),
			(position_set_y, 1, 550),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "str_color_no_2", 0),
			(position_set_x, 1, 40),
			(position_set_y, 1, 500),
			(overlay_set_position, reg1, 1),
			(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_22", "mesh_color_picker", "tableau_color_picker", ":player_custom_banner_bg_color_1"),
			(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_23", "mesh_color_picker", "tableau_color_picker", ":player_custom_banner_bg_color_2"),
			(position_set_x, 1, 200),
			(position_set_y, 1, 565),
			(overlay_set_position, "$g_presentation_obj_custom_banner_22", 1),
			(position_set_y, 1, 515),
			(overlay_set_position, "$g_presentation_obj_custom_banner_23", 1),
			(position_set_x, 1, 250),
			(position_set_y, 1, 250),
			(overlay_set_size, "$g_presentation_obj_custom_banner_22", 1),
			(overlay_set_size, "$g_presentation_obj_custom_banner_23", 1),
			(create_button_overlay, "$g_presentation_obj_custom_banner_2", "str_change", 16),
			(create_button_overlay, "$g_presentation_obj_custom_banner_3", "str_change", 16),
			(create_button_overlay, "$g_presentation_obj_custom_banner_4", "str_change_background", 16),
			(create_button_overlay, "$g_presentation_obj_custom_banner_5", "str_change", 16),
			(create_button_overlay, "$g_presentation_obj_custom_banner_19", "str_change", 16),
			(create_button_overlay, "$g_presentation_obj_custom_banner_20", "str_accept", 16),
			(troop_get_slot, ":player_custom_banner_num_charges", "trp_player", slot_troop_custom_banner_num_charges),
			(create_button_overlay, "$g_presentation_obj_custom_banner_16", "str_randomize", 16),
			(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_17", ":player_custom_banner_flag_type", "tableau_custom_banner_default", "trp_player"),
			(try_begin),
				(eq, ":player_custom_banner_map_flag_type", "mesh_custom_map_banner_01"),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_18", ":player_custom_banner_map_flag_type", "tableau_custom_banner_square", "trp_player"),
			(else_try),
				(eq, ":player_custom_banner_map_flag_type", "mesh_custom_map_banner_02"),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_18", ":player_custom_banner_map_flag_type", "tableau_custom_banner_short", "trp_player"),
			(else_try),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_18", ":player_custom_banner_map_flag_type", "tableau_custom_banner_tall", "trp_player"),
			(try_end),
			(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_1", -1, "tableau_custom_banner_square_no_mesh", "trp_player"),
			(create_text_overlay, reg1, "str_sample_banner", 16),
			(position_set_x, 1, 825),
			(position_set_y, 1, 650),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "str_sample_map_banner", 16),
			(position_set_y, 1, 500),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 640),
			(overlay_set_position, "$g_presentation_obj_custom_banner_17", 1),
			(position_set_x, 1, 780),
			(position_set_y, 1, 315),
			(overlay_set_position, "$g_presentation_obj_custom_banner_18", 1),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_size, "$g_presentation_obj_custom_banner_17", 1),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_size, "$g_presentation_obj_custom_banner_18", 1),
			(create_text_overlay, reg1, "str_number_of_charges", 0),
			(position_set_x, 1, 40),
			(position_set_y, 1, 350),
			(overlay_set_position, reg1, 1),
			(assign, reg1, ":player_custom_banner_num_charges"),
			(create_text_overlay, reg2, "str_reg1", 16),
			(position_set_x, 1, 350),
			(position_set_y, 1, 350),
			(overlay_set_position, reg2, 1),
			(try_begin),
				(lt, ":player_custom_banner_num_charges", 4),
				(create_button_overlay, "$g_presentation_obj_custom_banner_15", "str_plus", 16),
				(position_set_x, 1, 385),
				(position_set_y, 1, 350),
				(overlay_set_position, "$g_presentation_obj_custom_banner_15", 1),
			(else_try),
				(assign, "$g_presentation_obj_custom_banner_15", -1),
			(try_end),
			(try_begin),
				(gt, ":player_custom_banner_num_charges", 0),
				(create_button_overlay, "$g_presentation_obj_custom_banner_21", "str_minus", 16),
				(position_set_x, 1, 370),
				(position_set_y, 1, 350),
				(overlay_set_position, "$g_presentation_obj_custom_banner_21", 1),
			(else_try),
				(assign, "$g_presentation_obj_custom_banner_21", -1),
			(try_end),
			(try_begin),
				(ge, ":player_custom_banner_num_charges", 1),
				(create_text_overlay, reg1, "str_charge", 16),
				(position_set_x, 1, 300),
				(position_set_y, 1, 300),
				(overlay_set_position, reg1, 1),
				(create_text_overlay, reg1, "str_color", 16),
				(position_set_x, 1, 550),
				(position_set_y, 1, 300),
				(overlay_set_position, reg1, 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_14", "str_change_charge_position", 16),
				(position_set_y, 1, 350),
				(position_set_x, 1, 550),
				(overlay_set_position, "$g_presentation_obj_custom_banner_14", 1),
				(create_text_overlay, reg1, "str_charge_no_1", 0),
				(position_set_x, 1, 40),
				(position_set_y, 1, 240),
				(overlay_set_position, reg1, 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_6", "str_change", 0),
				(position_set_x, 1, 310),
				(overlay_set_position, "$g_presentation_obj_custom_banner_6", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_7", "str_change", 0),
				(position_set_x, 1, 560),
				(overlay_set_position, "$g_presentation_obj_custom_banner_7", 1),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_1),
				(val_mod, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", "mesh_custom_banner_charge_01"),
				(create_image_button_overlay, "$g_presentation_obj_custom_banner_24", ":player_custom_banner_charge_type_1", ":player_custom_banner_charge_type_1"),
				(position_set_x, 1, 260),
				(position_set_y, 1, 255),
				(overlay_set_position, "$g_presentation_obj_custom_banner_24", 1),
				(position_set_x, 1, 50),
				(position_set_y, 1, 50),
				(overlay_set_size, "$g_presentation_obj_custom_banner_24", 1),
				(troop_get_slot, ":player_custom_banner_charge_color_1", "trp_player", slot_troop_custom_banner_charge_color_1),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_28", "mesh_color_picker", "tableau_color_picker", ":player_custom_banner_charge_color_1"),
				(position_set_x, 1, 530),
				(position_set_y, 1, 255),
				(overlay_set_position, "$g_presentation_obj_custom_banner_28", 1),
				(position_set_x, 1, 250),
				(position_set_y, 1, 250),
				(overlay_set_size, "$g_presentation_obj_custom_banner_28", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_32", "str_flip_horizontal", 0),
				(position_set_x, 1, 700),
				(position_set_y, 1, 240),
				(overlay_set_position, "$g_presentation_obj_custom_banner_32", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_33", "str_flip_vertical", 0),
				(position_set_x, 1, 800),
				(overlay_set_position, "$g_presentation_obj_custom_banner_33", 1),
			(try_end),
			(try_begin),
				(ge, ":player_custom_banner_num_charges", 2),
				(create_text_overlay, reg1, "str_charge_no_2", 0),
				(position_set_x, 1, 40),
				(position_set_y, 1, 180),
				(overlay_set_position, reg1, 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_8", "str_change", 0),
				(position_set_x, 1, 310),
				(overlay_set_position, "$g_presentation_obj_custom_banner_8", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_9", "str_change", 0),
				(position_set_x, 1, 560),
				(overlay_set_position, "$g_presentation_obj_custom_banner_9", 1),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_2),
				(val_mod, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", "mesh_custom_banner_charge_01"),
				(create_image_button_overlay, "$g_presentation_obj_custom_banner_25", ":player_custom_banner_charge_type_1", ":player_custom_banner_charge_type_1"),
				(position_set_x, 1, 260),
				(position_set_y, 1, 195),
				(overlay_set_position, "$g_presentation_obj_custom_banner_25", 1),
				(position_set_x, 1, 50),
				(position_set_y, 1, 50),
				(overlay_set_size, "$g_presentation_obj_custom_banner_25", 1),
				(troop_get_slot, ":player_custom_banner_charge_color_1", "trp_player", slot_troop_custom_banner_charge_color_2),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_29", "mesh_color_picker", "tableau_color_picker", ":player_custom_banner_charge_color_1"),
				(position_set_x, 1, 530),
				(position_set_y, 1, 195),
				(overlay_set_position, "$g_presentation_obj_custom_banner_29", 1),
				(position_set_x, 1, 250),
				(position_set_y, 1, 250),
				(overlay_set_size, "$g_presentation_obj_custom_banner_29", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_34", "str_flip_horizontal", 0),
				(position_set_x, 1, 700),
				(position_set_y, 1, 180),
				(overlay_set_position, "$g_presentation_obj_custom_banner_34", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_35", "str_flip_vertical", 0),
				(position_set_x, 1, 800),
				(overlay_set_position, "$g_presentation_obj_custom_banner_35", 1),
			(try_end),
			(try_begin),
				(ge, ":player_custom_banner_num_charges", 3),
				(create_text_overlay, reg1, "str_charge_no_3", 0),
				(position_set_x, 1, 40),
				(position_set_y, 1, 120),
				(overlay_set_position, reg1, 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_10", "str_change", 0),
				(position_set_x, 1, 310),
				(overlay_set_position, "$g_presentation_obj_custom_banner_10", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_11", "str_change", 0),
				(position_set_x, 1, 560),
				(overlay_set_position, "$g_presentation_obj_custom_banner_11", 1),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_3),
				(val_mod, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", "mesh_custom_banner_charge_01"),
				(create_image_button_overlay, "$g_presentation_obj_custom_banner_26", ":player_custom_banner_charge_type_1", ":player_custom_banner_charge_type_1"),
				(position_set_x, 1, 260),
				(position_set_y, 1, 135),
				(overlay_set_position, "$g_presentation_obj_custom_banner_26", 1),
				(position_set_x, 1, 50),
				(position_set_y, 1, 50),
				(overlay_set_size, "$g_presentation_obj_custom_banner_26", 1),
				(troop_get_slot, ":player_custom_banner_charge_color_1", "trp_player", slot_troop_custom_banner_charge_color_3),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_30", "mesh_color_picker", "tableau_color_picker", ":player_custom_banner_charge_color_1"),
				(position_set_x, 1, 530),
				(position_set_y, 1, 135),
				(overlay_set_position, "$g_presentation_obj_custom_banner_30", 1),
				(position_set_x, 1, 250),
				(position_set_y, 1, 250),
				(overlay_set_size, "$g_presentation_obj_custom_banner_30", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_36", "str_flip_horizontal", 0),
				(position_set_x, 1, 700),
				(position_set_y, 1, 120),
				(overlay_set_position, "$g_presentation_obj_custom_banner_36", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_37", "str_flip_vertical", 0),
				(position_set_x, 1, 800),
				(overlay_set_position, "$g_presentation_obj_custom_banner_37", 1),
			(try_end),
			(try_begin),
				(ge, ":player_custom_banner_num_charges", 4),
				(create_text_overlay, reg1, "str_charge_no_4", 0),
				(position_set_x, 1, 40),
				(position_set_y, 1, 60),
				(overlay_set_position, reg1, 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_12", "str_change", 0),
				(position_set_x, 1, 310),
				(overlay_set_position, "$g_presentation_obj_custom_banner_12", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_13", "str_change", 0),
				(position_set_x, 1, 560),
				(overlay_set_position, "$g_presentation_obj_custom_banner_13", 1),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_4),
				(val_mod, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", "mesh_custom_banner_charge_01"),
				(create_image_button_overlay, "$g_presentation_obj_custom_banner_27", ":player_custom_banner_charge_type_1", ":player_custom_banner_charge_type_1"),
				(position_set_x, 1, 260),
				(position_set_y, 1, 75),
				(overlay_set_position, "$g_presentation_obj_custom_banner_27", 1),
				(position_set_x, 1, 50),
				(position_set_y, 1, 50),
				(overlay_set_size, "$g_presentation_obj_custom_banner_27", 1),
				(troop_get_slot, ":player_custom_banner_charge_color_1", "trp_player", slot_troop_custom_banner_charge_color_4),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_custom_banner_31", "mesh_color_picker", "tableau_color_picker", ":player_custom_banner_charge_color_1"),
				(position_set_x, 1, 530),
				(position_set_y, 1, 75),
				(overlay_set_position, "$g_presentation_obj_custom_banner_31", 1),
				(position_set_x, 1, 250),
				(position_set_y, 1, 250),
				(overlay_set_size, "$g_presentation_obj_custom_banner_31", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_38", "str_flip_horizontal", 0),
				(position_set_x, 1, 700),
				(position_set_y, 1, 60),
				(overlay_set_position, "$g_presentation_obj_custom_banner_38", 1),
				(create_button_overlay, "$g_presentation_obj_custom_banner_39", "str_flip_vertical", 0),
				(position_set_x, 1, 800),
				(overlay_set_position, "$g_presentation_obj_custom_banner_39", 1),
			(try_end),
			(position_set_x, 1, 350),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_custom_banner_1", 1),
			(position_set_x, 1, 275),
			(position_set_y, 1, 550),
			(overlay_set_position, "$g_presentation_obj_custom_banner_2", 1),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_custom_banner_3", 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, 600),
			(overlay_set_position, "$g_presentation_obj_custom_banner_4", 1),
			(position_set_x, 1, 880),
			(position_set_y, 1, 575),
			(overlay_set_position, "$g_presentation_obj_custom_banner_5", 1),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_custom_banner_19", 1),
			(position_set_y, 1, 650),
			(position_set_x, 1, 175),
			(overlay_set_position, "$g_presentation_obj_custom_banner_16", 1),
			(position_set_y, 1, 150),
			(position_set_x, 1, 850),
			(overlay_set_position, "$g_presentation_obj_custom_banner_20", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(troop_get_slot, ":player_custom_banner_num_charges", "trp_player", slot_troop_custom_banner_num_charges),
			(try_begin),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_2"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_22"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 85),
				(start_presentation, "prsnt_color_selection"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_3"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_23"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 86),
				(start_presentation, "prsnt_color_selection"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_4"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_1"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(start_presentation, "prsnt_banner_background_selection"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_5"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(start_presentation, "prsnt_banner_flag_type_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 1),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_6"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_24"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 92),
				(start_presentation, "prsnt_banner_charge_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 1),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_7"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_28"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 87),
				(start_presentation, "prsnt_color_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 2),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_8"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_25"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 93),
				(start_presentation, "prsnt_banner_charge_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 2),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_9"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_29"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 88),
				(start_presentation, "prsnt_color_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 3),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_10"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_26"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 94),
				(start_presentation, "prsnt_banner_charge_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 3),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_11"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_30"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 89),
				(start_presentation, "prsnt_color_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 4),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_12"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_27"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 95),
				(start_presentation, "prsnt_banner_charge_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 4),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_13"),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_31"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(assign, "$g_presentation_output_slot", 90),
				(start_presentation, "prsnt_color_selection"),
			(else_try),
				(ge, ":player_custom_banner_num_charges", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_14"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(start_presentation, "prsnt_banner_charge_positioning"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_15"),
				(troop_get_slot, ":player_custom_banner_num_charges", "trp_player", slot_troop_custom_banner_num_charges),
				(val_add, ":player_custom_banner_num_charges", 1),
				(val_clamp, ":player_custom_banner_num_charges", 0, 5),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_num_charges, ":player_custom_banner_num_charges"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_21"),
				(troop_get_slot, ":player_custom_banner_num_charges", "trp_player", slot_troop_custom_banner_num_charges),
				(val_sub, ":player_custom_banner_num_charges", 1),
				(val_clamp, ":player_custom_banner_num_charges", 0, 5),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_num_charges, ":player_custom_banner_num_charges"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_16"),
				(call_script, "script_get_random_custom_banner", "trp_player"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_17"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(start_presentation, "prsnt_banner_flag_type_selection"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_18"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(start_presentation, "prsnt_banner_flag_map_type_selection"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_19"),
				(assign, "$g_presentation_next_presentation", "prsnt_custom_banner"),
				(start_presentation, "prsnt_banner_flag_map_type_selection"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_32"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_1),
				(store_mod, ":value", ":player_custom_banner_charge_type_1", 256),
				(val_div, ":player_custom_banner_charge_type_1", 256),
				(store_mod, ":value_2", ":player_custom_banner_charge_type_1", 2),
				(val_div, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(val_mul, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", ":value"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_1, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_34"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_2),
				(store_mod, ":value", ":player_custom_banner_charge_type_1", 256),
				(val_div, ":player_custom_banner_charge_type_1", 256),
				(store_mod, ":value_2", ":player_custom_banner_charge_type_1", 2),
				(val_div, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(val_mul, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", ":value"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_2, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_36"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_3),
				(store_mod, ":value", ":player_custom_banner_charge_type_1", 256),
				(val_div, ":player_custom_banner_charge_type_1", 256),
				(store_mod, ":value_2", ":player_custom_banner_charge_type_1", 2),
				(val_div, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(val_mul, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", ":value"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_3, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_38"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_4),
				(store_mod, ":value", ":player_custom_banner_charge_type_1", 256),
				(val_div, ":player_custom_banner_charge_type_1", 256),
				(store_mod, ":value_2", ":player_custom_banner_charge_type_1", 2),
				(val_div, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":player_custom_banner_charge_type_1", 2),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(val_mul, ":player_custom_banner_charge_type_1", 256),
				(val_add, ":player_custom_banner_charge_type_1", ":value"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_4, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_33"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_1),
				(store_div, ":value_2", ":player_custom_banner_charge_type_1", 512),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":value_2", 512),
				(val_mod, ":player_custom_banner_charge_type_1", 512),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_1, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_35"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_2),
				(store_div, ":value_2", ":player_custom_banner_charge_type_1", 512),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":value_2", 512),
				(val_mod, ":player_custom_banner_charge_type_1", 512),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_2, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_37"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_3),
				(store_div, ":value_2", ":player_custom_banner_charge_type_1", 512),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":value_2", 512),
				(val_mod, ":player_custom_banner_charge_type_1", 512),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_3, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_39"),
				(troop_get_slot, ":player_custom_banner_charge_type_1", "trp_player", slot_troop_custom_banner_charge_type_4),
				(store_div, ":value_2", ":player_custom_banner_charge_type_1", 512),
				(val_add, ":value_2", 1),
				(val_mod, ":value_2", 2),
				(val_mul, ":value_2", 512),
				(val_mod, ":player_custom_banner_charge_type_1", 512),
				(val_add, ":player_custom_banner_charge_type_1", ":value_2"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_charge_type_4, ":player_custom_banner_charge_type_1"),
				(start_presentation, "prsnt_custom_banner"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_banner_20"),
				(troop_get_slot, ":player_custom_banner_map_flag_type", "trp_player", slot_troop_custom_banner_map_flag_type),
				(try_begin),
					(ge, ":player_custom_banner_map_flag_type", 0),
					(val_add, ":player_custom_banner_map_flag_type", "icon_custom_banner_01"),
					(party_set_banner_icon, "p_main_party", ":player_custom_banner_map_flag_type"),
				(try_end),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("banner_charge_positioning", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg1, "str_choose_position", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(assign, ":value", 125),
			(assign, ":var_2", 400),
			(call_script, "script_get_troop_custom_banner_num_positionings", "trp_player"),
			(assign, ":var_3", reg0),
			(store_mul, ":value_2", ":var_3", 125),
			(val_sub, ":value_2", 25),
			(store_div, ":value", ":value_2", 2),
			(store_sub, ":value", 500, ":value"),
			(try_for_range, ":number", 0, ":var_3"),
				(create_image_button_overlay_with_tableau_material, reg1, -1, "tableau_positioning_selection", ":number"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(val_add, ":value", 125),
				(overlay_set_position, reg1, 1),
				(troop_set_slot, "trp_temp_array_a", ":number", reg1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(call_script, "script_get_troop_custom_banner_num_positionings", "trp_player"),
			(assign, ":value", reg0),
			(try_for_range, ":number", 0, ":value"),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_positioning, ":number"),
				(assign, ":value", 0),
			(try_end),
			(try_begin),
				(gt, "$g_presentation_next_presentation", 0),
				(start_presentation, "$g_presentation_next_presentation"),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("banner_charge_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg1, "str_choose_charge", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 650),
			(overlay_set_position, reg1, 1),
			(assign, ":value", 100),
			(assign, ":var_2", 600),
			(try_for_range, ":mesh", "mesh_custom_banner_charge_01", "mesh_tableau_mesh_custom_banner"),
				(create_image_button_overlay, reg1, ":mesh", ":mesh"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(val_add, ":value", 100),
				(try_begin),
					(gt, ":value", 900),
					(assign, ":value", 100),
					(val_sub, ":var_2", 100),
				(try_end),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 80),
				(position_set_y, 1, 80),
				(overlay_set_size, reg1, 1),
				(store_sub, ":value_2", ":mesh", "mesh_custom_banner_charge_01"),
				(troop_set_slot, "trp_temp_array_a", ":value_2", reg1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(assign, ":value", "mesh_tableau_mesh_custom_banner"),
			(val_sub, ":value", "mesh_custom_banner_charge_01"),
			(try_for_range, ":number", 0, ":value"),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_set_slot, "trp_player", "$g_presentation_output_slot", ":number"),
				(assign, ":value", 0),
			(try_end),
			(try_begin),
				(gt, "$g_presentation_next_presentation", 0),
				(start_presentation, "$g_presentation_next_presentation"),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("banner_background_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg1, "str_choose_background", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(assign, ":value", 75),
			(assign, ":var_2", 450),
			(try_for_range, ":mesh", "mesh_custom_banner_bg", "mesh_custom_banner_charge_01"),
				(store_sub, ":value_2", ":mesh", "mesh_custom_banner_bg"),
				(create_image_button_overlay_with_tableau_material, reg1, -1, "tableau_background_selection", ":value_2"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(val_add, ":value", 125),
				(try_begin),
					(gt, ":value", 900),
					(assign, ":value", 75),
					(val_sub, ":var_2", 125),
				(try_end),
				(overlay_set_position, reg1, 1),
				(troop_set_slot, "trp_temp_array_a", ":value_2", reg1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(assign, ":value", "mesh_custom_banner_charge_01"),
			(val_sub, ":value", "mesh_custom_banner_bg"),
			(try_for_range, ":number", 0, ":value"),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_bg_type, ":number"),
				(assign, ":value", 0),
			(try_end),
			(try_begin),
				(gt, "$g_presentation_next_presentation", 0),
				(start_presentation, "$g_presentation_next_presentation"),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("banner_flag_type_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg1, "str_choose_flag_type", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(assign, ":var_1", 435),
			(assign, ":var_2", 450),
			(try_for_range, ":mesh", "mesh_custom_banner_01", "mesh_custom_banner_bg"),
				(store_sub, ":value", ":mesh", "mesh_custom_banner_01"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_flag_type, ":value"),
				(create_image_button_overlay_with_tableau_material, reg1, ":mesh", "tableau_custom_banner_default", "trp_player"),
				(position_set_x, 1, ":var_1"),
				(position_set_y, 1, ":var_2"),
				(val_add, ":var_1", 130),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 100),
				(position_set_y, 1, 100),
				(overlay_set_size, reg1, 1),
				(troop_set_slot, "trp_temp_array_a", ":value", reg1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(assign, ":value", "mesh_custom_banner_bg"),
			(val_sub, ":value", "mesh_custom_banner_01"),
			(try_for_range, ":number", 0, ":value"),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_flag_type, ":number"),
				(assign, ":value", 0),
			(try_end),
			(try_begin),
				(gt, "$g_presentation_next_presentation", 0),
				(start_presentation, "$g_presentation_next_presentation"),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("banner_flag_map_type_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg1, "str_choose_map_flag_type", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(troop_get_slot, ":player_custom_banner_bg_type", "trp_player", slot_troop_custom_banner_bg_type),
			(val_add, ":player_custom_banner_bg_type", "mesh_custom_banner_bg"),
			(assign, ":var_2", 250),
			(assign, ":var_3", 150),
			(try_for_range, ":mesh", "mesh_custom_map_banner_01", "mesh_custom_banner_01"),
				(store_sub, ":value", ":mesh", "mesh_custom_map_banner_01"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_map_flag_type, ":value"),
				(try_begin),
					(eq, ":mesh", "mesh_custom_map_banner_01"),
					(create_image_button_overlay_with_tableau_material, reg1, ":mesh", "tableau_custom_banner_square", "trp_player"),
				(else_try),
					(eq, ":mesh", "mesh_custom_map_banner_02"),
					(create_image_button_overlay_with_tableau_material, reg1, ":mesh", "tableau_custom_banner_short", "trp_player"),
				(else_try),
					(create_image_button_overlay_with_tableau_material, reg1, ":mesh", "tableau_custom_banner_tall", "trp_player"),
				(try_end),
				(position_set_x, 1, ":var_2"),
				(position_set_y, 1, ":var_3"),
				(val_add, ":var_2", 200),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 100),
				(position_set_y, 1, 100),
				(overlay_set_size, reg1, 1),
				(troop_set_slot, "trp_temp_array_a", ":value", reg1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(assign, ":value", "mesh_custom_banner_01"),
			(val_sub, ":value", "mesh_custom_map_banner_01"),
			(try_for_range, ":number", 0, ":value"),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_set_slot, "trp_player", slot_troop_custom_banner_map_flag_type, ":number"),
				(assign, ":value", 0),
			(try_end),
			(try_begin),
				(gt, "$g_presentation_next_presentation", 0),
				(start_presentation, "$g_presentation_next_presentation"),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("color_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg1, "str_choose_color", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(assign, ":value", 125),
			(assign, ":var_2", 450),
			(try_for_range, ":number", 0, 42),
				(call_script, "script_get_custom_banner_color_from_index", ":number"),
				(assign, ":var_4", reg0),
				(create_image_button_overlay_with_tableau_material, reg1, "mesh_color_picker", "tableau_color_picker", ":var_4"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(val_add, ":value", 50),
				(try_begin),
					(store_mod, ":value_2", ":number", 7),
					(eq, ":value_2", 6),
					(assign, ":value", 125),
					(val_sub, ":var_2", 50),
				(try_end),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, 500),
				(overlay_set_size, reg1, 1),
				(store_mul, ":value_3", ":number", 2),
				(store_add, ":value_4", ":value_3", 1),
				(troop_set_slot, "trp_temp_array_a", ":value_3", reg1),
				(troop_set_slot, "trp_temp_array_a", ":value_4", ":var_4"),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(assign, ":value", 64),
			(try_for_range, ":number", 0, ":value"),
				(store_mul, ":value_2", ":number", 2),
				(troop_slot_eq, "trp_temp_array_a", ":value_2", ":trigger_param_1"),
				(store_add, ":value_3", ":value_2", 1),
				(troop_get_slot, ":temp_array_a_value_3", "trp_temp_array_a", ":value_3"),
				(troop_set_slot, "trp_player", "$g_presentation_output_slot", ":temp_array_a_value_3"),
				(assign, ":value", 0),
			(try_end),
			(try_begin),
				(gt, "$g_presentation_next_presentation", 0),
				(start_presentation, "$g_presentation_next_presentation"),
			(else_try),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("marshall_selection", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(assign, "$g_presentation_obj_marshall_selection_1", -1),
			(assign, "$g_presentation_obj_marshall_selection_2", -1),
			(assign, "$g_presentation_obj_marshall_selection_3", -1),
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_presentation_next_presentation", -1),
			(store_add, ":value", "$g_presentation_marshall_selection_max_renown_1", "$g_presentation_marshall_selection_max_renown_2"),
			(faction_get_slot, ":players_kingdom_leader", "$players_kingdom", slot_faction_leader),
			(str_store_troop_name, 1, "$g_presentation_marshall_selection_max_renown_1_troop"),
			(create_text_overlay, reg1, "@Candidate #1: {s1}", 16),
			(position_set_x, 1, 200),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(str_store_troop_name, 1, "$g_presentation_marshall_selection_max_renown_2_troop"),
			(create_text_overlay, reg1, "@Candidate #2: {s1}", 16),
			(position_set_x, 1, 800),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_troop_note_mesh", "$g_presentation_marshall_selection_max_renown_1_troop"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 100),
			(position_set_y, 1, 300),
			(overlay_set_position, reg1, 1),
			(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_troop_note_mesh", "$g_presentation_marshall_selection_max_renown_2_troop"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 300),
			(overlay_set_position, reg1, 1),
			(assign, ":var_3", "$g_presentation_input"),
			(val_add, "$g_presentation_input", 1),
			(try_begin),
				(lt, ":var_3", 0),
				(str_store_troop_name, 1, "$g_presentation_marshall_selection_max_renown_1_troop"),
				(str_store_troop_name, 2, "$g_presentation_marshall_selection_max_renown_2_troop"),
				(str_store_troop_name, 3, ":players_kingdom_leader"),
				(str_store_faction_name, 4, "$players_kingdom"),
				(create_text_overlay, reg1, "@{s3} of the {s4} wishes to select a new marshall and invites his vassals for a counsel. {s1} and {s2} are the likely candidates.", 16),
				(position_set_x, 1, 500),
				(position_set_y, 1, 200),
				(overlay_set_position, reg1, 1),
				(create_button_overlay, "$g_presentation_obj_marshall_selection_1", "@Continue...", 16),
				(position_set_x, 1, 500),
				(position_set_y, 1, 100),
				(overlay_set_position, "$g_presentation_obj_marshall_selection_1", 1),
				(assign, "$g_presentation_next_presentation", "prsnt_marshall_selection"),
			(else_try),
				(assign, ":var_4", ":var_3"),
				(try_for_range_backwards, ":var_5", "trp_kingdom_heroes_including_player_begin", "trp_knight_1_1_wife"),
					(ge, ":var_4", 0),
					(assign, ":value_2", ":var_5"),
					(assign, ":value_3", 0),
					(try_begin),
						(eq, ":var_5", "trp_kingdom_heroes_including_player_begin"),
						(assign, ":value_2", "trp_player"),
						(try_begin),
							(eq, "$g_player_is_captive", 0),
							(assign, ":value_3", 1),
						(try_end),
					(else_try),
						(store_faction_of_troop, ":faction_of_troop_value_2", ":value_2"),
						(eq, "$players_kingdom", ":faction_of_troop_value_2"),
						(neg|troop_slot_ge, ":value_2", 8, 0),
						(troop_slot_ge, ":value_2", 10, 1),
						(troop_slot_eq, ":value_2", slot_troop_occupation, 2),
						(neg|faction_slot_eq, ":faction_of_troop_value_2", slot_faction_leader, ":value_2"),
						(assign, ":value_3", 1),
					(try_end),
					(eq, ":value_3", 1),
					(neq, "$g_presentation_marshall_selection_max_renown_1_troop", ":value_2"),
					(neq, "$g_presentation_marshall_selection_max_renown_2_troop", ":value_2"),
					(val_sub, ":var_4", 1),
					(lt, ":var_4", 0),
					(assign, "$g_presentation_next_presentation", "prsnt_marshall_selection"),
					(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_troop_note_mesh", ":value_2"),
					(position_set_x, 1, 300),
					(position_set_y, 1, 300),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, 440),
					(position_set_y, 1, 400),
					(overlay_set_position, reg1, 1),
					(try_begin),
						(eq, ":value_2", "trp_player"),
						(create_text_overlay, reg1, "@Who do you wish to support?", 16),
						(position_set_x, 1, 500),
						(position_set_y, 1, 200),
						(overlay_set_position, reg1, 1),
						(str_store_troop_name, 1, "$g_presentation_marshall_selection_max_renown_1_troop"),
						(create_button_overlay, "$g_presentation_obj_marshall_selection_2", "@{!}{s1}", 16),
						(position_set_x, 1, 300),
						(position_set_y, 1, 100),
						(overlay_set_position, "$g_presentation_obj_marshall_selection_2", 1),
						(str_store_troop_name, 1, "$g_presentation_marshall_selection_max_renown_2_troop"),
						(create_button_overlay, "$g_presentation_obj_marshall_selection_3", "@{!}{s1}", 16),
						(position_set_x, 1, 700),
						(position_set_y, 1, 100),
						(overlay_set_position, "$g_presentation_obj_marshall_selection_3", 1),
					(else_try),
						(str_store_troop_name, 1, ":value_2"),
						(store_random_in_range, ":random_in_range_0_value", 0, ":value"),
						(val_sub, ":random_in_range_0_value", "$g_presentation_marshall_selection_max_renown_1"),
						(try_begin),
							(lt, ":random_in_range_0_value", 0),
							(val_add, "$g_presentation_marshall_selection_1_vote", 1),
							(str_store_troop_name, 2, "$g_presentation_marshall_selection_max_renown_1_troop"),
						(else_try),
							(val_add, "$g_presentation_marshall_selection_2_vote", 1),
							(str_store_troop_name, 2, "$g_presentation_marshall_selection_max_renown_2_troop"),
						(try_end),
						(create_text_overlay, reg1, "@{s1} gives his support to {s2}.", 16),
						(position_set_x, 1, 500),
						(position_set_y, 1, 200),
						(overlay_set_position, reg1, 1),
						(create_button_overlay, "$g_presentation_obj_marshall_selection_1", "@Continue...", 16),
						(position_set_x, 1, 500),
						(position_set_y, 1, 100),
						(overlay_set_position, "$g_presentation_obj_marshall_selection_1", 1),
					(try_end),
				(try_end),
			(try_end),
			(assign, reg0, "$g_presentation_marshall_selection_1_vote"),
			(create_text_overlay, reg1, "@Number of Supporters: {reg0}", 16),
			(position_set_x, 1, 200),
			(position_set_y, 1, 550),
			(overlay_set_position, reg1, 1),
			(assign, reg0, "$g_presentation_marshall_selection_2_vote"),
			(create_text_overlay, reg1, "@Number of Supporters: {reg0}", 16),
			(position_set_x, 1, 800),
			(position_set_y, 1, 550),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(lt, "$g_presentation_next_presentation", 0),
				(try_begin),
					(gt, "$g_presentation_marshall_selection_2_vote", "$g_presentation_marshall_selection_1_vote"),
					(assign, ":var_10", "$g_presentation_marshall_selection_max_renown_1_troop"),
					(assign, "$g_presentation_marshall_selection_max_renown_1_troop", "$g_presentation_marshall_selection_max_renown_2_troop"),
					(assign, "$g_presentation_marshall_selection_max_renown_2_troop", ":var_10"),
				(try_end),
				(str_store_troop_name, 1, "$g_presentation_marshall_selection_max_renown_1_troop"),
				(str_store_troop_name, 2, ":players_kingdom_leader"),
				(str_store_faction_name, 3, "$players_kingdom"),
				(create_text_overlay, reg1, "@{s2} has heard his vassals' counsel. He selects {s1} as the marshall of the {s3}.", 16),
				(position_set_x, 1, 500),
				(position_set_y, 1, 200),
				(overlay_set_position, reg1, 1),
				(create_button_overlay, "$g_presentation_obj_marshall_selection_1", "@Continue...", 16),
				(position_set_x, 1, 500),
				(position_set_y, 1, 100),
				(overlay_set_position, "$g_presentation_obj_marshall_selection_1", 1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_marshall_selection_2"),
				(val_add, "$g_presentation_marshall_selection_1_vote", 1),
				(call_script, "script_change_player_relation_with_troop", "$g_presentation_marshall_selection_max_renown_1_troop", 2),
				(call_script, "script_change_player_relation_with_troop", "$g_presentation_marshall_selection_max_renown_2_troop", -2),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_marshall_selection_3"),
				(val_add, "$g_presentation_marshall_selection_2_vote", 1),
				(call_script, "script_change_player_relation_with_troop", "$g_presentation_marshall_selection_max_renown_1_troop", -2),
				(call_script, "script_change_player_relation_with_troop", "$g_presentation_marshall_selection_max_renown_2_troop", 2),
			(try_end),
			(try_begin),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_marshall_selection_1"),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_marshall_selection_2"),
				(eq, ":trigger_param_1", "$g_presentation_obj_marshall_selection_3"),
				(try_begin),
					(ge, "$g_presentation_next_presentation", 0),
					(start_presentation, "$g_presentation_next_presentation"),
				(else_try),
					(try_begin),
						(neg|faction_slot_eq, "$players_kingdom", slot_faction_marshall, "$g_presentation_marshall_selection_max_renown_1_troop"),
						(call_script, "script_check_and_finish_active_army_quests_for_faction", "$players_kingdom"),
					(try_end),
					(faction_get_slot, ":players_kingdom_marshall", "$players_kingdom", slot_faction_marshall),
					(try_begin),
						(ge, ":players_kingdom_marshall", 0),
						(party_is_active, ":players_kingdom_marshall"),
						(party_set_marshall, ":players_kingdom_marshall", 0),
					(try_end),
					(faction_set_slot, "$players_kingdom", slot_faction_marshall, "$g_presentation_marshall_selection_max_renown_1_troop"),
					(try_begin),
						(eq, "$g_presentation_marshall_selection_max_renown_1_troop", "trp_player"),
						(call_script, "script_change_player_relation_with_troop", "$g_presentation_marshall_selection_max_renown_2_troop", -3),
					(try_end),
					(assign, "$g_recalculate_ais", 1),
					(assign, "$g_presentation_marshall_selection_ended", 1),
					(presentation_set_duration, 0),
				(try_end),
			(try_end)
		])
	]),

	("battle", 0, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_formation_group0_selected", 0),
			(assign, "$g_formation_group1_selected", 0),
			(assign, "$g_formation_group2_selected", 0),
			(assign, "$g_formation_group3_selected", 0),
			(assign, "$g_formation_group4_selected", 0),
			(assign, "$g_formation_group5_selected", 0),
			(assign, "$g_formation_group6_selected", 0),
			(assign, "$g_formation_group7_selected", 0),
			(assign, "$g_formation_group8_selected", 0),
			(assign, "$g_presentation_obj_battle_but0", -1),
			(assign, "$g_presentation_obj_battle_but1", -1),
			(assign, "$g_presentation_obj_battle_but2", -1),
			(assign, "$g_presentation_obj_battle_but3", -1),
			(assign, "$g_presentation_obj_battle_but4", -1),
			(assign, "$g_presentation_obj_battle_but5", -1),
			(assign, "$g_presentation_obj_battle_but6", -1),
			(assign, "$g_presentation_obj_battle_but7", -1),
			(assign, "$g_presentation_obj_battle_but8", -1),
			(str_clear, 7),
			(try_begin),
				(scene_prop_get_instance, ":scene_prop_instance_inventory_0", "spr_inventory", 0),
				(ge, ":scene_prop_instance_inventory_0", 0),
				(create_mesh_overlay, "$g_presentation_obj_39", "mesh_white_plane"),
				(overlay_set_color, "$g_presentation_obj_39", 16711935),
				(position_set_x, 1, 250),
				(position_set_y, 1, 250),
				(overlay_set_size, "$g_presentation_obj_39", 1),
			(try_end),
			(position_set_y, 1, 700),
			(create_text_overlay, reg1, "@Action", 98320),
			(overlay_set_color, reg1, 4289374890),
			(position_set_x, 1, 270),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Mount", 98320),
			(overlay_set_color, reg1, 4289374890),
			(position_set_x, 1, 410),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Attack Type", 98320),
			(overlay_set_color, reg1, 4289374890),
			(position_set_x, 1, 550),
			(overlay_set_position, reg1, 1),
			(assign, "$group0_has_troops", 0),
			(assign, "$group1_has_troops", 0),
			(assign, "$group2_has_troops", 0),
			(assign, "$group3_has_troops", 0),
			(assign, "$group4_has_troops", 0),
			(assign, "$group5_has_troops", 0),
			(assign, "$group6_has_troops", 0),
			(assign, "$group7_has_troops", 0),
			(assign, "$group8_has_troops", 0),
			(assign, "$num_classes", 0),
			(try_for_agents, ":var_2"),
				(agent_set_slot, ":var_2", slot_agent_map_overlay_id, 0),
				(agent_is_alive, ":var_2"),
				(agent_is_human, ":var_2"),
				(agent_is_non_player, ":var_2"),
				(agent_get_party_id, ":party_id_var_2", ":var_2"),
				(eq, ":party_id_var_2", "p_main_party"),
				(agent_get_division, ":division_var_2", ":var_2"),
				(try_begin),
					(eq, ":division_var_2", 0),
					(try_begin),
						(neq, "$group0_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group0_has_troops", 1),
				(else_try),
					(eq, ":division_var_2", 1),
					(try_begin),
						(neq, "$group1_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group1_has_troops", 1),
				(else_try),
					(eq, ":division_var_2", 2),
					(try_begin),
						(neq, "$group2_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group2_has_troops", 1),
				(else_try),
					(eq, ":division_var_2", 3),
					(try_begin),
						(neq, "$group3_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group3_has_troops", 1),
				(else_try),
					(eq, ":division_var_2", 4),
					(try_begin),
						(neq, "$group4_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group4_has_troops", 1),
				(else_try),
					(eq, ":division_var_2", 5),
					(try_begin),
						(neq, "$group5_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group5_has_troops", 1),
				(else_try),
					(eq, ":division_var_2", 6),
					(try_begin),
						(neq, "$group6_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group6_has_troops", 1),
				(else_try),
					(eq, ":division_var_2", 7),
					(try_begin),
						(neq, "$group7_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group7_has_troops", 1),
				(else_try),
					(eq, ":division_var_2", 8),
					(try_begin),
						(neq, "$group8_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group8_has_troops", 1),
				(try_end),
			(try_end),
			(assign, ":value", 0),
			(assign, ":value_2", 653),
			(assign, ":var_7", 20),
			(assign, ":var_8", 662),
			(assign, ":var_9", 50),
			(assign, ":var_10", 660),
			(try_begin),
				(eq, "$group0_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but0", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but0", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but0", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but0", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but0", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check0", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check0", 2),
				(val_add, ":var_8", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name0", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name0", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but0_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but0_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but0_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group1_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but1", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but1", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but1", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but1", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but1", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check1", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check1", 2),
				(val_add, ":var_8", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name1", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name1", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but1_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but1_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but1_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group2_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but2", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but2", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but2", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but2", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but2", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check2", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check2", 2),
				(val_add, ":var_8", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name2", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name2", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but2_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but2_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but2_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group3_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but3", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but3", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but3", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but3", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but3", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check3", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check3", 2),
				(val_add, ":var_8", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name3", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name3", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but3_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but3_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but3_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group4_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but4", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but4", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but4", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but4", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but4", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check4", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check4", 2),
				(val_add, ":var_8", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name4", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name4", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but4_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but4_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but4_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group5_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but5", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but5", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but5", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but5", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but5", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check5", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check5", 2),
				(val_add, ":var_8", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name5", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name5", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but5_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but5_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but5_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group6_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but6", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but6", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but6", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but6", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but6", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check6", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check6", 2),
				(val_add, ":var_8", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name6", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name6", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but6_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but6_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but6_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group7_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but7", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but7", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but7", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but7", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but7", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check7", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check7", 2),
				(val_add, ":var_8", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name7", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name7", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but7_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but7_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but7_weapon_usage", 7, 16),
			(try_end),
			(try_begin),
				(eq, "$group8_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but8", "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_battle_but8", 1),
				(val_add, ":value_2", -40),
				(position_set_x, 1, 32500),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but8", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but8", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but8", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check8", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check8", 2),
				(val_add, ":var_8", -40),
				(create_text_overlay, "$g_presentation_obj_battle_name8", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name8", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but8_movement", 7, 16),
				(create_text_overlay, "$g_presentation_but8_riding", 7, 16),
				(create_text_overlay, "$g_presentation_but8_weapon_usage", 7, 16),
			(try_end),
			(get_player_agent_no, ":player_agent_no"),
			(agent_get_team, ":team_player_agent_no", ":player_agent_no"),
			(call_script, "script_update_order_panel", ":team_player_agent_no"),
			(assign, ":var_13", 640),
			(assign, ":var_14", "$num_classes"),
			(val_mul, ":var_14", -40),
			(val_add, ":var_13", ":var_14"),
			(create_listbox_overlay, "$g_presentation_obj_battle_10", "str_space", 0),
			(create_listbox_overlay, "$g_presentation_obj_battle_11", "str_space", 0),
			(create_listbox_overlay, "$g_presentation_obj_battle_12", "str_space", 0),
			(create_listbox_overlay, "$g_presentation_obj_battle_13", "str_space", 0),
			(overlay_add_item, "$g_presentation_obj_battle_10", "@Stand Ground"),
			(overlay_add_item, "$g_presentation_obj_battle_10", "@Charge"),
			(overlay_add_item, "$g_presentation_obj_battle_10", "@Follow Me"),
			(overlay_add_item, "$g_presentation_obj_battle_10", "@Hold This Position"),
			(create_button_overlay, "$g_presentation_obj_battle_14", "@Spread Out", 98320),
			(overlay_set_color, "$g_presentation_obj_battle_14", 4294967295),
			(create_button_overlay, "$g_presentation_obj_battle_15", "@Stand Closer", 98320),
			(overlay_set_color, "$g_presentation_obj_battle_15", 4294967295),
			(create_button_overlay, "$g_presentation_obj_battle_16", "@Fall Back", 98320),
			(overlay_set_color, "$g_presentation_obj_battle_16", 4294967295),
			(create_button_overlay, "$g_presentation_obj_battle_17", "@Advance", 98320),
			(overlay_set_color, "$g_presentation_obj_battle_17", 4294967295),
			(position_set_x, 1, 600),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_10", 1),
			(val_add, ":var_13", -35),
			(position_set_x, 1, 205),
			(position_set_y, 1, ":var_13"),
			(val_add, ":var_13", 35),
			(overlay_set_position, "$g_presentation_obj_battle_10", 1),
			(overlay_set_alpha, "$g_presentation_obj_battle_10", 96),
			(overlay_set_val, "$g_presentation_obj_battle_10", "$g_latest_order_1"),
			(val_add, ":var_13", -40),
			(position_set_x, 1, 130),
			(position_set_y, 1, ":var_13"),
			(val_add, ":var_13", 40),
			(overlay_set_position, "$g_presentation_obj_battle_14", 1),
			(val_add, ":var_13", -20),
			(position_set_x, 1, 130),
			(position_set_y, 1, ":var_13"),
			(val_add, ":var_13", 20),
			(overlay_set_position, "$g_presentation_obj_battle_15", 1),
			(val_add, ":var_13", 0),
			(position_set_x, 1, 130),
			(position_set_y, 1, ":var_13"),
			(val_add, ":var_13", 0),
			(overlay_set_position, "$g_presentation_obj_battle_16", 1),
			(val_add, ":var_13", 20),
			(position_set_x, 1, 130),
			(position_set_y, 1, ":var_13"),
			(val_add, ":var_13", -20),
			(overlay_set_position, "$g_presentation_obj_battle_17", 1),
			(overlay_add_item, "$g_presentation_obj_battle_11", "@Dismount"),
			(overlay_add_item, "$g_presentation_obj_battle_11", "@Mount"),
			(position_set_x, 1, 600),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_11", 1),
			(position_set_x, 1, 350),
			(position_set_y, 1, ":var_13"),
			(overlay_set_position, "$g_presentation_obj_battle_11", 1),
			(overlay_set_alpha, "$g_presentation_obj_battle_11", 96),
			(overlay_set_val, "$g_presentation_obj_battle_11", "$g_latest_order_2"),
			(overlay_add_item, "$g_presentation_obj_battle_12", "@Fire At Will"),
			(overlay_add_item, "$g_presentation_obj_battle_12", "@Hold Your Fire"),
			(position_set_x, 1, 600),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_12", 1),
			(position_set_x, 1, 495),
			(position_set_y, 1, ":var_13"),
			(overlay_set_position, "$g_presentation_obj_battle_12", 1),
			(overlay_set_alpha, "$g_presentation_obj_battle_12", 96),
			(overlay_set_val, "$g_presentation_obj_battle_12", "$g_latest_order_3"),
			(overlay_add_item, "$g_presentation_obj_battle_13", "@Use Blunt Weapons"),
			(overlay_add_item, "$g_presentation_obj_battle_13", "@Use Any Weapon"),
			(position_set_x, 1, 600),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_13", 1),
			(val_add, ":var_13", -35),
			(position_set_x, 1, 495),
			(position_set_y, 1, ":var_13"),
			(val_add, ":var_13", 35),
			(overlay_set_position, "$g_presentation_obj_battle_13", 1),
			(overlay_set_alpha, "$g_presentation_obj_battle_13", 96),
			(overlay_set_val, "$g_presentation_obj_battle_13", "$g_latest_order_4"),
			(create_text_overlay, "$g_presentation_obj_battle_22", "str_us_", 0),
			(create_text_overlay, "$g_presentation_obj_battle_23", "str_allies_", 0),
			(create_text_overlay, "$g_presentation_obj_battle_24", "str_enemies_", 0),
			(create_text_overlay, "$g_presentation_obj_battle_25", "@Ready", 16),
			(create_text_overlay, "$g_presentation_obj_battle_26", "@Wounded", 16),
			(create_text_overlay, "$g_presentation_obj_battle_28", "str_routed", 16),
			(create_text_overlay, "$g_presentation_obj_battle_27", "@Dead", 16),
			(create_text_overlay, "$g_battle_us_ready", 7, 16),
			(create_text_overlay, "$g_battle_us_wounded", 7, 16),
			(create_text_overlay, "$g_battle_us_routed", 7, 16),
			(create_text_overlay, "$g_battle_us_dead", 7, 16),
			(create_text_overlay, "$g_battle_enemies_ready", 7, 16),
			(create_text_overlay, "$g_battle_enemies_wounded", 7, 16),
			(create_text_overlay, "$g_battle_enemies_routed", 7, 16),
			(create_text_overlay, "$g_battle_enemies_dead", 7, 16),
			(create_text_overlay, "$g_battle_allies_ready", 7, 16),
			(create_text_overlay, "$g_battle_allies_wounded", 7, 16),
			(create_text_overlay, "$g_battle_allies_routed", 7, 16),
			(create_text_overlay, "$g_battle_allies_dead", 7, 16),
			(create_image_button_overlay, "$g_battle_report_plane", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_color, "$g_battle_report_plane", 0),
			(position_set_x, 1, 15500),
			(position_set_y, 1, 6000),
			(overlay_set_size, "$g_battle_report_plane", 1),
			(position_set_x, 1, 672),
			(position_set_y, 1, 275),
			(overlay_set_position, "$g_battle_report_plane", 1),
			(overlay_set_alpha, "$g_battle_report_plane", 68),
			(overlay_set_color, "$g_battle_report_plane", 1140411),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, "$g_presentation_obj_battle_14", 1),
			(overlay_set_size, "$g_presentation_obj_battle_15", 1),
			(overlay_set_size, "$g_presentation_obj_battle_16", 1),
			(overlay_set_size, "$g_presentation_obj_battle_17", 1),
			(overlay_set_size, "$g_presentation_obj_battle_22", 1),
			(overlay_set_size, "$g_presentation_obj_battle_23", 1),
			(overlay_set_size, "$g_presentation_obj_battle_24", 1),
			(overlay_set_size, "$g_presentation_obj_battle_25", 1),
			(overlay_set_size, "$g_presentation_obj_battle_26", 1),
			(overlay_set_size, "$g_presentation_obj_battle_27", 1),
			(overlay_set_size, "$g_presentation_obj_battle_28", 1),
			(overlay_set_size, "$g_battle_us_ready", 1),
			(overlay_set_size, "$g_battle_us_wounded", 1),
			(overlay_set_size, "$g_battle_us_routed", 1),
			(overlay_set_size, "$g_battle_us_dead", 1),
			(overlay_set_size, "$g_battle_enemies_ready", 1),
			(overlay_set_size, "$g_battle_enemies_wounded", 1),
			(overlay_set_size, "$g_battle_enemies_routed", 1),
			(overlay_set_size, "$g_battle_enemies_dead", 1),
			(overlay_set_size, "$g_battle_allies_ready", 1),
			(overlay_set_size, "$g_battle_allies_wounded", 1),
			(overlay_set_size, "$g_battle_allies_routed", 1),
			(overlay_set_size, "$g_battle_allies_dead", 1),
			(assign, ":value", 675),
			(assign, ":value_2", 280),
			(val_add, ":value", 70),
			(val_add, ":value_2", 90),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_25", 1),
			(val_add, ":value", 70),
			(position_set_x, 1, ":value"),
			(overlay_set_position, "$g_presentation_obj_battle_26", 1),
			(val_add, ":value", 70),
			(position_set_x, 1, ":value"),
			(overlay_set_position, "$g_presentation_obj_battle_28", 1),
			(val_add, ":value", 70),
			(position_set_x, 1, ":value"),
			(overlay_set_position, "$g_presentation_obj_battle_27", 1),
			(val_add, ":value", -280),
			(val_add, ":value_2", -30),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_22", 1),
			(val_add, ":value_2", -30),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_23", 1),
			(val_add, ":value_2", -30),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_presentation_obj_battle_24", 1),
			(get_scene_boundaries, 2, 3),
			(position_transform_position_to_local, 4, 2, 3),
			(set_fixed_point_multiplier, 1000),
			(position_get_x, ":position_x_4", 4),
			(position_get_y, ":position_y_4", 4),
			(set_fixed_point_multiplier, 1000),
			(store_div, ":value_3", ":position_y_4", 100),
			(store_div, ":value_3", ":position_x_4", ":value_3"),
			(try_begin),
				(gt, ":value_3", 100),
				(assign, "$g_battle_map_width", 300),
				(store_div, "$g_battle_map_scale", ":position_x_4", "$g_battle_map_width"),
				(store_div, "$g_battle_map_height", ":position_y_4", "$g_battle_map_scale"),
			(else_try),
				(assign, "$g_battle_map_height", 300),
				(store_div, "$g_battle_map_scale", ":position_y_4", "$g_battle_map_height"),
				(store_div, "$g_battle_map_width", ":position_x_4", "$g_battle_map_scale"),
			(try_end),
			(create_image_button_overlay, "$g_battle_map_plane", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_color, "$g_battle_map_plane", 0),
			(store_add, ":value_4", "$g_battle_map_width", 20),
			(store_add, ":value_5", "$g_battle_map_height", 20),
			(store_mul, ":value_6", ":value_4", 50),
			(store_mul, ":value_7", ":value_5", 50),
			(position_set_x, 1, ":value_6"),
			(position_set_y, 1, ":value_7"),
			(overlay_set_size, "$g_battle_map_plane", 1),
			(store_sub, ":value_8", 990, ":value_4"),
			(store_sub, ":value_9", 740, ":value_5"),
			(position_set_x, 1, ":value_8"),
			(position_set_y, 1, ":value_9"),
			(overlay_set_position, "$g_battle_map_plane", 1),
			(overlay_set_alpha, "$g_battle_map_plane", 68),
			(create_mesh_overlay, "$g_battle_map_infantry_order_flag", "mesh_flag_infantry"),
			(create_mesh_overlay, "$g_battle_map_archers_order_flag", "mesh_flag_archers"),
			(create_mesh_overlay, "$g_battle_map_cavalry_order_flag", "mesh_flag_cavalry"),
			(overlay_set_alpha, "$g_battle_map_infantry_order_flag", 0),
			(overlay_set_alpha, "$g_battle_map_archers_order_flag", 0),
			(overlay_set_alpha, "$g_battle_map_cavalry_order_flag", 0),
			(create_mesh_overlay, reg0, "mesh_flag4"),
			(overlay_set_alpha, reg0, 0),
			(create_mesh_overlay, reg0, "mesh_flag5"),
			(overlay_set_alpha, reg0, 0),
			(create_mesh_overlay, reg0, "mesh_flag6"),
			(overlay_set_alpha, reg0, 0),
			(create_mesh_overlay, reg0, "mesh_flag7"),
			(overlay_set_alpha, reg0, 0),
			(create_mesh_overlay, reg0, "mesh_flag8"),
			(overlay_set_alpha, reg0, 0),
			(create_mesh_overlay, reg0, "mesh_flag9"),
			(overlay_set_alpha, reg0, 0),
			(call_script, "script_update_order_panel_checked_classes"),
			(call_script, "script_update_order_panel_statistics_and_map"),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(get_player_agent_no, ":player_agent_no"),
			(agent_get_team, ":team_player_agent_no", ":player_agent_no"),
			(assign, ":value", 0),
			(try_begin),
				(eq, "$group0_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check0"),
				(assign, ":value", 1),
				(assign, "$g_formation_group0_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group1_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check1"),
				(assign, ":value", 1),
				(assign, "$g_formation_group1_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group2_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check2"),
				(assign, ":value", 1),
				(assign, "$g_formation_group2_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group3_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check3"),
				(assign, ":value", 1),
				(assign, "$g_formation_group3_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group4_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check4"),
				(assign, ":value", 1),
				(assign, "$g_formation_group4_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group5_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check5"),
				(assign, ":value", 1),
				(assign, "$g_formation_group5_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group6_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check6"),
				(assign, ":value", 1),
				(assign, "$g_formation_group6_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group7_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check7"),
				(assign, ":value", 1),
				(assign, "$g_formation_group7_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group8_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check8"),
				(assign, ":value", 1),
				(assign, "$g_formation_group8_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but0"),
				(assign, ":value", 1),
				(assign, "$g_formation_group0_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check0", 1),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but1"),
				(assign, ":value", 1),
				(assign, "$g_formation_group1_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check1", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but2"),
				(assign, ":value", 1),
				(assign, "$g_formation_group2_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check2", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but3"),
				(assign, ":value", 1),
				(assign, "$g_formation_group3_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check3", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but4"),
				(assign, ":value", 1),
				(assign, "$g_formation_group4_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check4", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but5"),
				(assign, ":value", 1),
				(assign, "$g_formation_group5_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check5", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but6"),
				(assign, ":value", 1),
				(assign, "$g_formation_group6_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check6", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but7"),
				(assign, ":value", 1),
				(assign, "$g_formation_group7_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check7", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but8"),
				(assign, ":value", 1),
				(assign, "$g_formation_group8_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check8", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_14"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 8),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_15"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 7),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_16"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 6),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_17"),
				(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 5),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_10"),
				(try_begin),
					(eq, ":trigger_param_2", 3),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 0),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_1", 3),
				(else_try),
					(eq, ":trigger_param_2", 2),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 1),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_1", 2),
				(else_try),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 2),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_1", 1),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 11),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_1", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_11"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 3),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_2", 1),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 4),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_2", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_12"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 12),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_3", 1),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 13),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_3", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_13"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 10),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_4", 1),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_team_give_order_from_order_panel", ":player_agent_no", 9),
					(call_script, "script_update_order_panel", ":team_player_agent_no"),
					(assign, "$g_latest_order_4", 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_battle_map_plane"),
				(get_scene_boundaries, 2, 3),
				(mouse_get_position, 1),
				(set_fixed_point_multiplier, 1000),
				(position_get_x, ":position_x_1", 1),
				(position_get_y, ":position_y_1", 1),
				(store_sub, ":value_2", 980, "$g_battle_map_width"),
				(store_sub, ":value_3", 730, "$g_battle_map_height"),
				(val_sub, ":position_x_1", ":value_2"),
				(val_sub, ":position_y_1", ":value_3"),
				(val_clamp, ":position_x_1", 0, "$g_battle_map_width"),
				(val_clamp, ":position_y_1", 0, "$g_battle_map_height"),
				(val_mul, ":position_x_1", "$g_battle_map_scale"),
				(val_mul, ":position_y_1", "$g_battle_map_scale"),
				(set_fixed_point_multiplier, 1000),
				(position_set_x, 1, ":position_x_1"),
				(position_set_y, 1, ":position_y_1"),
				(position_transform_position_to_parent, 3, 2, 1),
				(try_begin),
					(eq, "$g_formation_group0_selected", 1),
					(team_give_order, ":team_player_agent_no", 0, 0),
					(team_set_order_position, ":team_player_agent_no", 0, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group1_selected", 1),
					(team_give_order, ":team_player_agent_no", 1, 0),
					(team_set_order_position, ":team_player_agent_no", 1, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group2_selected", 1),
					(team_give_order, ":team_player_agent_no", 2, 0),
					(team_set_order_position, ":team_player_agent_no", 2, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group3_selected", 1),
					(team_give_order, ":team_player_agent_no", 3, 0),
					(team_set_order_position, ":team_player_agent_no", 3, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group4_selected", 1),
					(team_give_order, ":team_player_agent_no", 4, 0),
					(team_set_order_position, ":team_player_agent_no", 4, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group5_selected", 1),
					(team_give_order, ":team_player_agent_no", 5, 0),
					(team_set_order_position, ":team_player_agent_no", 5, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group6_selected", 1),
					(team_give_order, ":team_player_agent_no", 6, 0),
					(team_set_order_position, ":team_player_agent_no", 6, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group7_selected", 1),
					(team_give_order, ":team_player_agent_no", 7, 0),
					(team_set_order_position, ":team_player_agent_no", 7, 3),
				(try_end),
				(try_begin),
					(eq, "$g_formation_group8_selected", 1),
					(team_give_order, ":team_player_agent_no", 8, 0),
					(team_set_order_position, ":team_player_agent_no", 8, 3),
				(try_end),
				(assign, ":value_4", 1),
				(convert_to_fixed_point, ":value_4"),
				(set_fixed_point_multiplier, 100),
				(call_script, "script_team_get_position_of_enemies", 24, "$fplayer_team_no", 9),
				(try_for_range, ":number", 0, 9),
					(assign, ":value_5", 0),
					(try_begin),
						(eq, ":number", 0),
						(eq, "$g_formation_group0_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 1),
						(eq, "$g_formation_group1_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 2),
						(eq, "$g_formation_group2_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 3),
						(eq, "$g_formation_group3_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 4),
						(eq, "$g_formation_group4_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 5),
						(eq, "$g_formation_group5_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 6),
						(eq, "$g_formation_group6_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 7),
						(eq, "$g_formation_group7_selected", 1),
						(assign, ":value_5", 1),
					(else_try),
						(eq, ":number", 8),
						(eq, "$g_formation_group8_selected", 1),
						(assign, ":value_5", 1),
					(try_end),
					(eq, ":value_5", 1),
					(store_add, ":value_6", 185, ":number"),
					(team_get_slot, ":fplayer_team_no_value_6", "$fplayer_team_no", ":value_6"),
					(neq, ":fplayer_team_no_value_6", 0),
					(copy_position, 1, 3),
					(call_script, "script_point_y_toward_position", 1, 24),
					(call_script, "script_set_formation_destination", "$fplayer_team_no", ":number", 1),
					(store_add, ":value_6", 14, ":number"),
					(team_get_slot, ":fplayer_team_no_value_6_2", "$fplayer_team_no", ":value_6"),
					(store_add, ":value_6", 194, ":number"),
					(team_get_slot, ":fplayer_team_no_value_6_3", "$fplayer_team_no", ":value_6"),
					(call_script, "script_get_centering_amount", ":fplayer_team_no_value_6", ":fplayer_team_no_value_6_2", ":fplayer_team_no_value_6_3"),
					(position_move_x, 1, reg0),
					(store_add, ":value_6", 176, ":number"),
					(try_begin),
						(team_slot_eq, "$fplayer_team_no", ":value_6", 1),
						(call_script, "script_form_archers", "$fplayer_team_no", ":number", "$fplayer_agent_no", ":fplayer_team_no_value_6_3", ":fplayer_team_no_value_6"),
					(else_try),
						(this_or_next|team_slot_eq, "$fplayer_team_no", ":value_6", 2),
						(team_slot_eq, "$fplayer_team_no", ":value_6", 5),
						(call_script, "script_form_cavalry", "$fplayer_team_no", ":number", "$fplayer_agent_no", ":fplayer_team_no_value_6_3"),
					(else_try),
						(call_script, "script_form_infantry", "$fplayer_team_no", ":number", "$fplayer_agent_no", ":fplayer_team_no_value_6_3", ":fplayer_team_no_value_6"),
					(try_end),
					(store_add, ":value_6", 203, ":number"),
					(team_set_slot, "$fplayer_team_no", ":value_6", 0),
				(try_end),
				(set_fixed_point_multiplier, ":value_4"),
				(call_script, "script_update_order_flags_on_map"),
				(call_script, "script_update_order_flags_on_map"),
				(call_script, "script_update_order_panel", ":team_player_agent_no"),
			(try_end),
			(try_begin),
				(eq, ":value", 1),
				(team_set_order_listener, ":team_player_agent_no", -1),
				(try_begin),
					(this_or_next|eq, "$g_formation_group0_selected", 1),
					(eq, "$group0_has_troops", 0),
					(this_or_next|eq, "$g_formation_group1_selected", 1),
					(eq, "$group1_has_troops", 0),
					(this_or_next|eq, "$g_formation_group2_selected", 1),
					(eq, "$group2_has_troops", 0),
					(this_or_next|eq, "$g_formation_group3_selected", 1),
					(eq, "$group3_has_troops", 0),
					(this_or_next|eq, "$g_formation_group4_selected", 1),
					(eq, "$group4_has_troops", 0),
					(this_or_next|eq, "$g_formation_group5_selected", 1),
					(eq, "$group5_has_troops", 0),
					(this_or_next|eq, "$g_formation_group6_selected", 1),
					(eq, "$group6_has_troops", 0),
					(this_or_next|eq, "$g_formation_group7_selected", 1),
					(eq, "$group7_has_troops", 0),
					(this_or_next|eq, "$g_formation_group8_selected", 1),
					(eq, "$group8_has_troops", 0),
					(team_set_order_listener, ":team_player_agent_no", 9),
				(else_try),
					(eq, "$g_formation_group0_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 0, 1),
				(else_try),
					(eq, "$g_formation_group1_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 1, 1),
				(else_try),
					(eq, "$g_formation_group2_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 2, 1),
				(else_try),
					(eq, "$g_formation_group3_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 3, 1),
				(else_try),
					(eq, "$g_formation_group4_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 4, 1),
				(else_try),
					(eq, "$g_formation_group5_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 5, 1),
				(else_try),
					(eq, "$g_formation_group6_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 6, 1),
				(else_try),
					(eq, "$g_formation_group7_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 7, 1),
				(else_try),
					(eq, "$g_formation_group8_selected", 1),
					(team_set_order_listener, ":team_player_agent_no", 8, 1),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but0"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but0_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but0_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but0_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name0", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but0_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but0_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but0_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name0", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but1"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but1_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but1_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but1_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name1", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but1_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but1_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but1_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name1", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but2"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but2_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but2_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but2_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name2", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but2_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but2_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but2_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name2", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but3"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but3_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but3_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but3_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name3", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but3_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but3_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but3_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name3", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but4"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but4_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but4_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but4_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name4", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but4_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but4_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but4_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name4", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but5"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but5_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but5_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but5_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name5", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but5_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but5_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but5_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name5", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but6"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but6_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but6_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but6_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name6", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but6_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but6_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but6_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name6", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but7"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but7_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but7_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but7_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name7", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but7_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but7_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but7_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name7", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but8"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but8_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but8_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but8_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name8", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but8_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but8_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but8_weapon_usage", 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name8", 250, 0),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(this_or_next|game_key_clicked, 30),
				(this_or_next|game_key_clicked, 31),
				(this_or_next|game_key_clicked, 32),
				(this_or_next|game_key_clicked, 33),
				(this_or_next|game_key_clicked, 34),
				(this_or_next|game_key_clicked, 35),
				(this_or_next|game_key_clicked, 36),
				(this_or_next|game_key_clicked, 37),
				(this_or_next|game_key_clicked, 38),
				(this_or_next|game_key_clicked, 29),
				(game_key_clicked, 39),
				(call_script, "script_update_order_panel_checked_classes"),
			(try_end),
			(try_begin),
				(this_or_next|game_key_clicked, 23),
				(this_or_next|game_key_clicked, 24),
				(this_or_next|game_key_clicked, 25),
				(this_or_next|game_key_clicked, 26),
				(this_or_next|game_key_clicked, 27),
				(game_key_clicked, 28),
				(get_player_agent_no, ":player_agent_no"),
				(agent_get_team, ":team_player_agent_no", ":player_agent_no"),
				(call_script, "script_update_order_panel", ":team_player_agent_no"),
			(try_end),
			(try_begin),
				(gt, ":trigger_param_1", 200),
				(game_key_clicked, 22),
				(try_for_agents, ":var_4"),
					(agent_set_slot, ":var_4", slot_agent_map_overlay_id, 0),
				(try_end),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_mini_map"),
			(try_end)
		])
	]),

	("sliders", 0, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_slider_overlay, "$g_presentation_obj_sliders_1", 0, 100),
			(create_slider_overlay, "$g_presentation_obj_sliders_2", 0, 100),
			(create_slider_overlay, "$g_presentation_obj_sliders_3", 0, 100),
			(create_slider_overlay, "$g_presentation_obj_sliders_4", 0, 100),
			(assign, reg1, 25),
			(str_store_string, 1, "str_reg1"),
			(create_text_overlay, "$g_presentation_obj_sliders_5", 1),
			(create_text_overlay, "$g_presentation_obj_sliders_6", 1),
			(create_text_overlay, "$g_presentation_obj_sliders_7", 1),
			(create_text_overlay, "$g_presentation_obj_sliders_8", 1),
			(assign, "$g_presentation_obj_sliders_1_val", 25),
			(overlay_set_val, "$g_presentation_obj_sliders_1", 25),
			(assign, "$g_presentation_obj_sliders_2_val", 25),
			(overlay_set_val, "$g_presentation_obj_sliders_2", 25),
			(assign, "$g_presentation_obj_sliders_3_val", 25),
			(overlay_set_val, "$g_presentation_obj_sliders_3", 25),
			(assign, "$g_presentation_obj_sliders_4_val", 25),
			(overlay_set_val, "$g_presentation_obj_sliders_4", 25),
			(position_set_x, 1, 600),
			(position_set_y, 1, 200),
			(overlay_set_position, "$g_presentation_obj_sliders_1", 1),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_sliders_2", 1),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_sliders_3", 1),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_sliders_4", 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 200),
			(overlay_set_position, "$g_presentation_obj_sliders_5", 1),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_sliders_6", 1),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_sliders_7", 1),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_sliders_8", 1),
			(position_set_x, 1, 500),
			(overlay_set_size, "$g_presentation_obj_sliders_3", 1)
		]),

		(ti_on_presentation_run,
		[]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(assign, ":value", 0),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_1"),
				(try_begin),
					(neq, "$g_presentation_obj_sliders_1_val", ":trigger_param_2"),
					(assign, "$g_presentation_obj_sliders_1_val", ":trigger_param_2"),
					(assign, ":value", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_2"),
				(try_begin),
					(neq, "$g_presentation_obj_sliders_2_val", ":trigger_param_2"),
					(assign, "$g_presentation_obj_sliders_2_val", ":trigger_param_2"),
					(assign, ":value", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_3"),
				(try_begin),
					(neq, "$g_presentation_obj_sliders_3_val", ":trigger_param_2"),
					(assign, "$g_presentation_obj_sliders_3_val", ":trigger_param_2"),
					(assign, ":value", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_4"),
				(try_begin),
					(neq, "$g_presentation_obj_sliders_4_val", ":trigger_param_2"),
					(assign, "$g_presentation_obj_sliders_4_val", ":trigger_param_2"),
					(assign, ":value", 1),
				(try_end),
			(try_end),
			(try_begin),
				(eq, ":value", 1),
				(assign, ":var_4", 0),
				(val_add, ":var_4", "$g_presentation_obj_sliders_1_val"),
				(val_add, ":var_4", "$g_presentation_obj_sliders_2_val"),
				(val_add, ":var_4", "$g_presentation_obj_sliders_3_val"),
				(val_add, ":var_4", "$g_presentation_obj_sliders_4_val"),
				(store_sub, ":value_2", 100, ":var_4"),
				(assign, ":var_6", "$g_presentation_obj_sliders_1_val"),
				(assign, ":var_7", "$g_presentation_obj_sliders_2_val"),
				(assign, ":var_8", "$g_presentation_obj_sliders_3_val"),
				(assign, ":var_9", "$g_presentation_obj_sliders_4_val"),
				(assign, ":value_3", 1),
				(assign, ":value_4", 0),
				(assign, ":value_5", 100),
				(try_begin),
					(lt, ":value_2", 0),
					(val_mul, ":value_2", -1),
					(assign, ":value_3", -1),
					(assign, ":value_4", 1),
					(assign, ":value_5", 101),
				(try_end),
				(store_sub, ":value_6", ":var_4", ":trigger_param_2"),
				(val_add, ":value_6", 30),
				(try_for_range, ":unused", 0, ":value_2"),
					(store_random_in_range, ":random_in_range_0_value_6", 0, ":value_6"),
					(try_begin),
						(neq, ":trigger_param_1", "$g_presentation_obj_sliders_1"),
						(val_sub, ":random_in_range_0_value_6", "$g_presentation_obj_sliders_1_val"),
						(val_sub, ":random_in_range_0_value_6", 10),
						(lt, ":random_in_range_0_value_6", 0),
						(is_between, ":var_6", ":value_4", ":value_5"),
						(val_add, ":var_6", ":value_3"),
					(else_try),
						(neq, ":trigger_param_1", "$g_presentation_obj_sliders_2"),
						(val_sub, ":random_in_range_0_value_6", "$g_presentation_obj_sliders_2_val"),
						(val_sub, ":random_in_range_0_value_6", 10),
						(lt, ":random_in_range_0_value_6", 0),
						(is_between, ":var_7", ":value_4", ":value_5"),
						(val_add, ":var_7", ":value_3"),
					(else_try),
						(neq, ":trigger_param_1", "$g_presentation_obj_sliders_3"),
						(val_sub, ":random_in_range_0_value_6", "$g_presentation_obj_sliders_3_val"),
						(val_sub, ":random_in_range_0_value_6", 10),
						(lt, ":random_in_range_0_value_6", 0),
						(is_between, ":var_8", ":value_4", ":value_5"),
						(val_add, ":var_8", ":value_3"),
					(else_try),
						(is_between, ":var_9", ":value_4", ":value_5"),
						(val_add, ":var_9", ":value_3"),
					(else_try),
						(val_add, ":value_2", 1),
					(try_end),
				(try_end),
				(assign, "$g_presentation_obj_sliders_1_val", ":var_6"),
				(assign, "$g_presentation_obj_sliders_2_val", ":var_7"),
				(assign, "$g_presentation_obj_sliders_3_val", ":var_8"),
				(assign, "$g_presentation_obj_sliders_4_val", ":var_9"),
			(try_end),
			(overlay_set_val, "$g_presentation_obj_sliders_1", "$g_presentation_obj_sliders_1_val"),
			(overlay_set_val, "$g_presentation_obj_sliders_2", "$g_presentation_obj_sliders_2_val"),
			(overlay_set_val, "$g_presentation_obj_sliders_3", "$g_presentation_obj_sliders_3_val"),
			(overlay_set_val, "$g_presentation_obj_sliders_4", "$g_presentation_obj_sliders_4_val"),
			(assign, reg1, "$g_presentation_obj_sliders_1_val"),
			(str_store_string, 1, "str_reg1"),
			(overlay_set_text, "$g_presentation_obj_sliders_5", 1),
			(assign, reg1, "$g_presentation_obj_sliders_2_val"),
			(str_store_string, 1, "str_reg1"),
			(overlay_set_text, "$g_presentation_obj_sliders_6", 1),
			(assign, reg1, "$g_presentation_obj_sliders_3_val"),
			(str_store_string, 1, "str_reg1"),
			(overlay_set_text, "$g_presentation_obj_sliders_7", 1),
			(assign, reg1, "$g_presentation_obj_sliders_4_val"),
			(str_store_string, 1, "str_reg1"),
			(overlay_set_text, "$g_presentation_obj_sliders_8", 1)
		])
	]),

	("arena_training", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(get_player_agent_no, ":player_agent_no"),
			(agent_get_kill_count, reg1, ":player_agent_no", 1),
			(str_store_string, 1, "@Number of men knocked down: {reg1}"),
			(create_text_overlay, "$g_presentation_obj_arena_training_1", 1),
			(overlay_set_color, "$g_presentation_obj_arena_training_1", 16777215),
			(position_set_x, 1, 10),
			(position_set_y, 1, 700),
			(overlay_set_position, "$g_presentation_obj_arena_training_1", 1),
			(assign, reg1, 0),
			(str_store_string, 1, "@Number of men left: {reg1}"),
			(create_text_overlay, "$g_presentation_obj_arena_training_2", 1),
			(overlay_set_color, "$g_presentation_obj_arena_training_2", 16777215),
			(position_set_x, 1, 10),
			(position_set_y, 1, 670),
			(overlay_set_position, "$g_presentation_obj_arena_training_2", 1)
		]),

		(ti_on_presentation_run,
		[
			(get_player_agent_no, ":player_agent_no"),
			(agent_get_kill_count, reg1, ":player_agent_no", 1),
			(str_store_string, 1, "@Opponents Beaten: {reg1}"),
			(overlay_set_text, "$g_presentation_obj_arena_training_1", 1),
			(assign, ":var_2", "$g_arena_training_max_opponents"),
			(try_for_agents, ":var_3"),
				(agent_is_human, ":var_3"),
				(neg|agent_is_alive, ":var_3"),
				(neq, ":var_3", ":player_agent_no"),
				(val_sub, ":var_2", 1),
			(try_end),
			(assign, reg1, ":var_2"),
			(str_store_string, 1, "@Opponents Remaining: {reg1}"),
			(overlay_set_text, "$g_presentation_obj_arena_training_2", 1)
		])
	]),

	("retirement", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_button_overlay, "$g_presentation_obj_retirement_1", "@Remain in retirement.", 16),
			(create_button_overlay, "$g_presentation_obj_retirement_2", "@Go back to the adventuring.", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 80),
			(overlay_set_position, "$g_presentation_obj_retirement_1", 1),
			(position_set_y, 1, 40),
			(overlay_set_position, "$g_presentation_obj_retirement_2", 1),
			(assign, ":var_1", 0),
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(store_div, ":value", ":troop_gold_player", 200),
			(val_add, ":var_1", ":value"),
			(assign, ":var_4", 0),
			(assign, ":var_5", 0),
			(assign, ":var_6", 0),
			(assign, ":var_7", 0),
			(assign, ":var_8", 0),
			(assign, ":var_9", 0),
			(assign, ":var_10", 0),
			(try_for_range, ":party", "p_town_1", "p_salt_mine"),
				(party_get_slot, ":party_type", ":party", slot_party_type),
				(try_begin),
					(party_slot_eq, ":party", slot_town_lord, "trp_player"),
					(try_begin),
						(eq, ":party_type", 3),
						(val_add, ":var_4", 1),
					(else_try),
						(eq, ":party_type", 2),
						(val_add, ":var_5", 1),
					(else_try),
						(val_add, ":var_6", 1),
					(try_end),
				(try_end),
				(party_get_slot, ":party_center_player_relation", ":party", slot_center_player_relation),
				(try_begin),
					(ge, ":party_center_player_relation", 40),
					(try_begin),
						(eq, ":party_type", 3),
						(val_add, ":var_7", 1),
					(else_try),
						(eq, ":party_type", 4),
						(val_add, ":var_8", 1),
					(try_end),
				(else_try),
					(le, ":party_center_player_relation", -40),
					(try_begin),
						(eq, ":party_type", 3),
						(val_add, ":var_9", 1),
					(else_try),
						(eq, ":party_type", 4),
						(val_add, ":var_10", 1),
					(try_end),
				(try_end),
			(try_end),
			(store_mul, ":value_2", ":var_4", 100),
			(store_mul, ":value_3", ":var_5", 50),
			(store_mul, ":value_4", ":var_6", 20),
			(store_add, ":value_5", ":var_4", ":var_5"),
			(val_add, ":value_5", ":var_6"),
			(store_add, ":value_6", ":value_2", ":value_3"),
			(val_add, ":value_6", ":value_4"),
			(val_add, ":var_1", ":value_6"),
			(store_mul, ":value_7", ":var_7", 20),
			(store_mul, ":value_8", ":var_8", 4),
			(store_add, ":value_9", ":var_7", ":var_8"),
			(store_add, ":value_10", ":value_7", ":value_8"),
			(val_add, ":var_1", ":value_10"),
			(store_mul, ":value_11", ":var_9", -40),
			(store_mul, ":value_12", ":var_10", -8),
			(store_add, ":value_13", ":var_9", ":var_10"),
			(store_add, ":value_14", ":value_11", ":value_12"),
			(val_add, ":var_1", ":value_14"),
			(assign, ":var_27", 0),
			(troop_get_inventory_capacity, ":inventory_capacity_player", "trp_player"),
			(try_for_range, ":number", 0, ":inventory_capacity_player"),
				(troop_get_inventory_slot, ":inventory_slot_player_number", "trp_player", ":number"),
				(ge, ":inventory_slot_player_number", 0),
				(store_item_value, ":item_value_inventory_slot_player_number", ":inventory_slot_player_number"),
				(val_add, ":var_27", ":item_value_inventory_slot_player_number"),
			(try_end),
			(store_div, ":value_15", ":var_27", 200),
			(val_add, ":var_1", ":value_15"),
			(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
			(store_div, ":value_16", ":player_renown", 1),
			(val_add, ":var_1", ":value_16"),
			(assign, ":var_35", 0),
			(assign, ":var_36", 0),
			(try_for_range, ":troop", "trp_npc1", "trp_heroes_end"),
				(this_or_next|troop_slot_eq, ":troop", slot_troop_occupation, 2),
				(troop_slot_eq, ":troop", slot_troop_occupation, 6),
				(call_script, "script_troop_get_player_relation", ":troop"),
				(assign, ":party_center_player_relation", reg0),
				(try_begin),
					(ge, ":party_center_player_relation", 40),
					(val_add, ":var_36", 1),
				(else_try),
					(le, ":party_center_player_relation", -40),
					(val_add, ":var_35", 1),
				(try_end),
			(try_end),
			(store_mul, ":value_17", ":var_36", 10),
			(val_add, ":var_1", ":value_17"),
			(store_mul, ":value_18", ":var_35", -10),
			(val_add, ":var_1", ":value_18"),
			(store_current_day, ":current_day"),
			(store_div, ":value_19", ":current_day", -1),
			(val_add, ":var_1", ":value_19"),
			(store_mul, ":value_20", "$g_total_victories", 2),
			(val_add, ":var_1", ":value_20"),
			(store_mul, ":value_21", "$g_total_defeats", -3),
			(val_add, ":var_1", ":value_21"),
			(store_mul, ":value_22", "$g_total_quests_completed", 4),
			(val_add, ":var_1", ":value_22"),
			(troop_get_xp, ":xp_player", "trp_player"),
			(store_div, ":value_23", ":xp_player", 5000),
			(val_add, ":var_1", ":value_23"),
			(assign, ":var_47", 0),
			(assign, ":var_48", 0),
			(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
				(try_begin),
					(troop_slot_eq, ":troop", slot_troop_occupation, 5),
					(val_add, ":var_47", 1),
				(else_try),
					(troop_slot_ge, ":troop", 82, 1),
					(val_add, ":var_48", 1),
				(try_end),
			(try_end),
			(store_div, ":value_24", ":var_47", 2),
			(val_add, ":var_1", ":value_24"),
			(store_div, ":value_25", ":var_48", -4),
			(val_add, ":var_1", ":value_25"),
			(get_average_game_difficulty, ":average_game_difficulty"),
			(assign, ":value_26", ":var_1"),
			(val_mul, ":var_1", ":average_game_difficulty"),
			(val_div, ":var_1", 75),
			(val_mul, ":var_1", ":average_game_difficulty"),
			(val_div, ":var_1", 75),
			(store_sub, ":value_26", ":var_1", ":value_26"),
			(assign, reg5, ":current_day"),
			(store_character_level, reg4, "trp_player"),
			(create_text_overlay, reg1, "@You have retired at level {reg4} after {reg5} days of adventuring.", 16),
			(position_set_x, 1, 700),
			(position_set_y, 1, 700),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 950),
			(position_set_y, 1, 950),
			(overlay_set_size, reg1, 1),
			(create_text_overlay, reg2, "@Effect on Score", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg2, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 670),
			(overlay_set_position, reg2, 1),
			(assign, reg0, ":value_5"),
			(create_text_overlay, reg1, "@Settlements owned by you: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 650),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_6"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 650),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":value_9"),
			(create_text_overlay, reg1, "@Friendly Settlements: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 630),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_10"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 630),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":value_13"),
			(create_text_overlay, reg1, "@Hostile Settlements: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 610),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_14"),
			(create_text_overlay, reg1, "@{!}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 610),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(lt, reg0, 0),
				(overlay_set_color, reg1, 16711680),
			(try_end),
			(assign, reg0, ":var_36"),
			(create_text_overlay, reg1, "@Friendly Lords: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 590),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_17"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 590),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":var_35"),
			(create_text_overlay, reg1, "@Enemy Lords: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 570),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_18"),
			(create_text_overlay, reg1, "@{!}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 570),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(lt, reg0, 0),
				(overlay_set_color, reg1, 16711680),
			(try_end),
			(assign, reg0, "$g_total_victories"),
			(create_text_overlay, reg1, "@Victories: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 550),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_20"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 550),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, "$g_total_defeats"),
			(create_text_overlay, reg1, "@Defeats: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 530),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_21"),
			(create_text_overlay, reg1, "@{!}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 530),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(lt, reg0, 0),
				(overlay_set_color, reg1, 16711680),
			(try_end),
			(assign, reg0, "$g_total_quests_completed"),
			(create_text_overlay, reg1, "@Quests Completed: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 510),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_22"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 510),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":var_47"),
			(create_text_overlay, reg1, "@Companions Found: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 490),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_24"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 490),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":var_48"),
			(create_text_overlay, reg1, "@Companions Lost/Departed: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 470),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_25"),
			(create_text_overlay, reg1, "@{!}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 470),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(lt, reg0, 0),
				(overlay_set_color, reg1, 16711680),
			(try_end),
			(assign, reg0, ":troop_gold_player"),
			(create_text_overlay, reg1, "@Wealth: {reg0} denars", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 450),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 450),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":var_27"),
			(create_text_overlay, reg1, "@Inventory: {reg0} denars", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 430),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_15"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 430),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":player_renown"),
			(create_text_overlay, reg1, "@Renown: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 410),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_16"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 410),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":xp_player"),
			(create_text_overlay, reg1, "@Experience: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 390),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_23"),
			(create_text_overlay, reg1, "@{!}{reg0?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 390),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(try_end),
			(assign, reg0, ":current_day"),
			(create_text_overlay, reg1, "@Days Passed: {reg0}", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 370),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_19"),
			(create_text_overlay, reg1, "@{!}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 370),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(lt, reg0, 0),
				(overlay_set_color, reg1, 16711680),
			(try_end),
			(assign, reg0, ":average_game_difficulty"),
			(create_text_overlay, reg1, "@Difficulty: {reg0}%", 0),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 350),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":value_26"),
			(assign, reg3, reg0),
			(val_max, reg3, 0),
			(create_text_overlay, reg1, "@{!}{reg3?+:}{reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 750),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 850),
			(position_set_y, 1, 350),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(else_try),
				(lt, reg0, 0),
				(overlay_set_color, reg1, 16711680),
			(try_end),
			(assign, reg0, ":var_1"),
			(create_text_overlay, reg1, "@TOTAL SCORE: {reg0}", 16),
			(position_set_x, 1, 750),
			(position_set_y, 1, 320),
			(overlay_set_position, reg1, 1),
			(assign, ":var_53", 0),
			(assign, ":var_54", 0),
			(assign, ":var_55", 0),
			(assign, ":var_56", 0),
			(assign, ":var_57", 0),
			(assign, ":var_58", 0),
			(try_for_range, ":party_2", "p_town_1", "p_salt_mine"),
				(try_begin),
					(party_slot_eq, ":party_2", slot_town_lord, "trp_player"),
					(try_begin),
						(party_slot_eq, ":party_2", slot_party_type, 3),
						(val_add, ":var_55", 1),
					(else_try),
						(party_slot_eq, ":party_2", slot_party_type, 2),
						(val_add, ":var_54", 1),
					(else_try),
						(val_add, ":var_53", 1),
					(try_end),
				(else_try),
					(party_get_slot, ":party_2_center_player_relation", ":party_2", slot_center_player_relation),
					(gt, ":party_2_center_player_relation", 0),
					(try_begin),
						(party_slot_eq, ":party_2", slot_party_type, 3),
						(val_add, ":var_58", ":party_2_center_player_relation"),
					(else_try),
						(party_slot_eq, ":party_2", slot_party_type, 2),
						(val_add, ":var_57", ":party_2_center_player_relation"),
					(else_try),
						(val_add, ":var_56", ":party_2_center_player_relation"),
					(try_end),
				(try_end),
			(try_end),
			(try_begin),
				(gt, ":var_55", 0),
				(store_random_in_range, ":random_in_range_0_var_55", 0, ":var_55"),
				(try_for_range, ":party_2", "p_town_1", "p_castle_1"),
					(party_slot_eq, ":party_2", slot_town_lord, "trp_player"),
					(val_sub, ":random_in_range_0_var_55", 1),
					(lt, ":random_in_range_0_var_55", 0),
					(str_store_party_name, 9, ":party_2"),
				(try_end),
			(else_try),
				(gt, ":var_58", 0),
				(store_random_in_range, ":random_in_range_0_var_58", 0, ":var_58"),
				(try_for_range, ":party_2", "p_town_1", "p_castle_1"),
					(party_get_slot, ":party_2_center_player_relation", ":party_2", slot_center_player_relation),
					(gt, ":party_2_center_player_relation", 0),
					(val_sub, ":random_in_range_0_var_58", ":party_2_center_player_relation"),
					(lt, ":random_in_range_0_var_58", 0),
					(str_store_party_name, 9, ":party_2"),
				(try_end),
			(else_try),
				(store_random_in_range, ":random_in_range_0_var_55", "p_town_1", "p_castle_1"),
				(str_store_party_name, 9, ":random_in_range_0_var_55"),
			(try_end),
			(try_begin),
				(gt, ":var_54", 0),
				(store_random_in_range, ":random_in_range_0_var_54", 0, ":var_54"),
				(try_for_range, ":party_2", "p_castle_1", "p_village_1"),
					(party_slot_eq, ":party_2", slot_town_lord, "trp_player"),
					(val_sub, ":random_in_range_0_var_54", 1),
					(lt, ":random_in_range_0_var_54", 0),
					(str_store_party_name, 8, ":party_2"),
				(try_end),
			(else_try),
				(gt, ":var_57", 0),
				(store_random_in_range, ":random_in_range_0_var_57", 0, ":var_57"),
				(try_for_range, ":party_2", "p_castle_1", "p_village_1"),
					(party_get_slot, ":party_2_center_player_relation", ":party_2", slot_center_player_relation),
					(gt, ":party_2_center_player_relation", 0),
					(val_sub, ":random_in_range_0_var_57", ":party_2_center_player_relation"),
					(lt, ":random_in_range_0_var_57", 0),
					(str_store_party_name, 8, ":party_2"),
				(try_end),
			(else_try),
				(store_random_in_range, ":random_in_range_0_var_54", "p_castle_1", "p_village_1"),
				(str_store_party_name, 8, ":random_in_range_0_var_54"),
			(try_end),
			(try_begin),
				(gt, ":var_53", 0),
				(store_random_in_range, ":random_in_range_0_var_53", 0, ":var_53"),
				(try_for_range, ":party_2", "p_village_1", "p_salt_mine"),
					(party_slot_eq, ":party_2", slot_town_lord, "trp_player"),
					(val_sub, ":random_in_range_0_var_53", 1),
					(lt, ":random_in_range_0_var_53", 0),
					(str_store_party_name, 7, ":party_2"),
				(try_end),
			(else_try),
				(gt, ":var_56", 0),
				(store_random_in_range, ":random_in_range_0_var_56", 0, ":var_56"),
				(try_for_range, ":party_2", "p_village_1", "p_salt_mine"),
					(party_get_slot, ":party_2_center_player_relation", ":party_2", slot_center_player_relation),
					(gt, ":party_2_center_player_relation", 0),
					(val_sub, ":random_in_range_0_var_56", ":party_2_center_player_relation"),
					(lt, ":random_in_range_0_var_56", 0),
					(str_store_party_name, 7, ":party_2"),
				(try_end),
			(else_try),
				(store_random_in_range, ":random_in_range_0_var_53", "p_village_1", "p_salt_mine"),
				(str_store_party_name, 7, ":random_in_range_0_var_53"),
			(try_end),
			(try_begin),
				(lt, ":var_1", 100),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 0),
				(str_store_string, 0, "str_retirement_text_1"),
			(else_try),
				(lt, ":var_1", 200),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 1),
				(str_store_string, 0, "str_retirement_text_2"),
			(else_try),
				(lt, ":var_1", 400),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 2),
				(str_store_string, 0, "str_retirement_text_3"),
			(else_try),
				(lt, ":var_1", 700),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 3),
				(str_store_string, 0, "str_retirement_text_4"),
			(else_try),
				(lt, ":var_1", 1200),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 4),
				(str_store_string, 0, "str_retirement_text_5"),
			(else_try),
				(lt, ":var_1", 1850),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 5),
				(str_store_string, 0, "str_retirement_text_6"),
			(else_try),
				(lt, ":var_1", 2500),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 6),
				(str_store_string, 0, "str_retirement_text_7"),
			(else_try),
				(lt, ":var_1", 3500),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 7),
				(str_store_string, 0, "str_retirement_text_8"),
			(else_try),
				(lt, ":var_1", 5000),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 8),
				(str_store_string, 0, "str_retirement_text_9"),
			(else_try),
				(create_mesh_overlay_with_tableau_material, reg1, -1, "tableau_retirement_troop", 9),
				(str_store_string, 0, "str_retirement_text_10"),
			(try_end),
			(position_set_x, 1, 0),
			(position_set_y, 1, 120),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, 0, 10240),
			(position_set_x, 1, 600),
			(position_set_y, 1, 120),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 360),
			(position_set_y, 1, 190),
			(overlay_set_area_size, reg1, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg1, 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_retirement_1"),
				(jump_to_menu, "mnu_end_game"),
				(start_presentation, "prsnt_game_credits"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_retirement_2"),
				(presentation_set_duration, 0),
				(change_screen_return),
			(try_end)
		])
	]),

	("budget_report", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg1, "mesh_pic_payment"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 170),
			(position_set_y, 1, 0),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "str_weekly_budget", 16),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 260),
			(position_set_y, 1, 650),
			(overlay_set_position, reg1, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_bugdet_report_container", 0, 131072),
			(position_set_x, 1, 0),
			(position_set_y, 1, 100),
			(overlay_set_position, "$g_presentation_obj_bugdet_report_container", 1),
			(position_set_x, 1, 505),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_bugdet_report_container", 1),
			(set_container_overlay, "$g_presentation_obj_bugdet_report_container"),
			(game_get_reduce_campaign_ai, ":game_reduce_campaign_ai"),
			(try_begin),
				(eq, ":game_reduce_campaign_ai", 0),
				(assign, ":value", 2),
				(assign, ":value_2", 5),
			(else_try),
				(eq, ":game_reduce_campaign_ai", 1),
				(assign, ":value", 4),
				(assign, ":value_2", 4),
			(else_try),
				(eq, ":game_reduce_campaign_ai", 2),
				(assign, ":value", 6),
				(assign, ":value_2", 3),
			(try_end),
			(assign, ":value_3", "fac_player_supporters_faction"),
			(try_begin),
				(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
				(call_script, "script_dplmc_get_troop_standing_in_faction", "trp_player", "$players_kingdom"),
				(ge, reg0, 50),
				(assign, ":value_3", "$players_kingdom"),
			(try_end),
			(assign, ":var_5", 0),
			(assign, ":var_6", 0),
			(assign, ":var_7", 0),
			(assign, ":var_8", 0),
			(try_for_range, ":party", "p_town_1", "p_salt_mine"),
				(try_begin),
					(party_slot_ge, ":party", 137, 1),
					(val_add, ":var_5", 1),
				(try_end),
				(party_slot_eq, ":party", slot_town_lord, "trp_player"),
				(val_add, ":var_5", 1),
				(val_add, ":var_6", 1),
				(try_begin),
					(is_between, ":party", "p_town_1", "p_castle_1"),
					(val_add, ":var_5", 1),
					(val_add, ":var_6", 1),
				(try_end),
			(try_end),
			(try_begin),
				(gt, "$players_kingdom", 0),
				(neq, "$players_kingdom", "fac_player_supporters_faction"),
				(neq, "$players_kingdom", "fac_player_faction"),
				(eq, "$player_has_homage", 0),
				(val_add, ":var_5", 1),
			(try_end),
			(try_begin),
				(gt, ":var_6", ":value"),
				(val_add, ":var_5", 1),
			(try_end),
			(try_for_parties, ":value_4"),
				(assign, ":value_5", 0),
				(try_begin),
					(this_or_next|party_slot_eq, ":value_4", slot_party_type, 3),
					(party_slot_eq, ":value_4", slot_party_type, 2),
					(party_slot_eq, ":value_4", slot_town_lord, "trp_player"),
					(assign, ":value_5", 1),
				(else_try),
					(this_or_next|party_slot_eq, ":value_4", slot_party_type, 3),
					(party_slot_eq, ":value_4", slot_party_type, 2),
					(neg|party_slot_ge, ":value_4", 7, 1),
					(store_faction_of_party, ":faction_of_party_value_4", ":value_4"),
					(this_or_next|eq, ":value_3", ":faction_of_party_value_4"),
					(eq, ":faction_of_party_value_4", "fac_player_supporters_faction"),
					(this_or_next|is_between, ":value_3", "fac_kingdom_1", "fac_kingdoms_end"),
					(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
					(assign, ":value_5", 1),
				(try_end),
				(this_or_next|eq, ":value_4", "p_main_party"),
				(assign, ":value_6", 0),
				(try_begin),
					(party_slot_eq, ":value_4", slot_party_type, 7),
					(party_slot_eq, ":value_4", 300, "trp_player"),
					(assign, ":value_6", 1),
				(try_end),
				(this_or_next|eq, ":value_6", 1),
				(eq, ":value_5", 1),
				(val_add, ":var_5", 1),
			(try_end),
			(try_begin),
				(gt, "$g_player_debt_to_party_members", 0),
				(val_add, ":var_5", 2),
			(try_end),
			(try_begin),
				(this_or_next|gt, "$g_player_minister", 0),
				(this_or_next|troop_slot_ge, "trp_player", 30, 0),
				(this_or_next|gt, "$g_player_chamberlain", 0),
				(gt, "$g_player_constable", 0),
				(val_add, ":var_5", 1),
			(try_end),
			(try_begin),
				(gt, "$g_player_chamberlain", 0),
				(val_add, ":var_5", 2),
			(try_end),
			(val_add, ":var_5", 3),
			(store_mul, ":value_7", 27, ":var_5"),
			(assign, ":var_15", 0),
			(try_for_range, ":party", "p_town_1", "p_salt_mine"),
				(try_begin),
					(party_get_slot, ":party_center_player_enterprise", ":party", slot_center_player_enterprise),
					(gt, ":party_center_player_enterprise", 1),
					(neg|party_slot_ge, ":party", 139, 1),
					(str_store_party_name, 0, ":party"),
					(call_script, "script_process_player_enterprise", ":party_center_player_enterprise", ":party"),
					(assign, ":value_8", reg0),
					(assign, ":var_18", reg4),
					(assign, ":var_19", reg5),
					(assign, ":var_20", reg10),
					(store_sub, ":value_9", ":party", "p_town_1"),
					(store_add, ":value_10", ":value_9", "trp_town_1_master_craftsman"),
					(item_get_slot, ":party_center_player_enterprise_output_per_run", ":party_center_player_enterprise", slot_item_output_per_run),
					(assign, ":value_11", 0),
					(try_begin),
						(party_slot_eq, ":party", slot_center_player_enterprise_production_order, 1),
						(assign, ":var_25", 0),
						(troop_get_inventory_capacity, ":inventory_capacity_value_10", ":value_10"),
						(try_for_range, ":number", 0, ":inventory_capacity_value_10"),
							(troop_get_inventory_slot, ":inventory_slot_value_10_number", ":value_10", ":number"),
							(lt, ":inventory_slot_value_10_number", 1),
							(val_add, ":var_25", 1),
						(try_end),
						(assign, ":value_11", ":party_center_player_enterprise_output_per_run"),
						(val_min, ":value_11", ":var_25"),
						(gt, ":value_11", 0),
						(store_mul, ":value_12", ":var_18", ":value_11"),
						(val_sub, ":value_8", ":value_12"),
						(val_sub, ":party_center_player_enterprise_output_per_run", ":value_11"),
					(try_end),
					(try_begin),
						(eq, "$g_apply_budget_report_to_gold", 1),
						(troop_add_items, ":value_10", ":party_center_player_enterprise", ":value_11"),
						(store_sub, ":value_13", ":party_center_player_enterprise", "itm_trade_spice"),
						(val_add, ":value_13", 267),
						(party_get_slot, ":party_value_13", ":party", ":value_13"),
						(store_mul, ":value_14", ":party_center_player_enterprise_output_per_run", 15),
						(val_sub, ":party_value_13", ":value_14"),
						(party_set_slot, ":party", ":value_13", ":party_value_13"),
						(gt, "$cheat_mode", 0),
						(str_store_troop_name, 3, ":value_10"),
						(assign, reg3, ":value_11"),
						(display_message, "@{!}DEBUG -- Adding {reg3} items to {s3}"),
					(try_end),
					(item_get_slot, ":party_center_player_enterprise_input_number", ":party_center_player_enterprise", slot_item_input_number),
					(try_begin),
						(item_slot_ge, ":party_center_player_enterprise", 57, 1),
						(assign, ":value_15", ":party_center_player_enterprise_input_number"),
					(else_try),
						(assign, ":value_15", 0),
					(try_end),
					(assign, ":var_35", 0),
					(assign, ":var_36", 0),
					(try_begin),
						(troop_get_inventory_capacity, ":inventory_capacity_value_10", ":value_10"),
						(try_for_range, ":number", 0, ":inventory_capacity_value_10"),
							(troop_get_inventory_slot, ":inventory_slot_value_10_number_2", ":value_10", ":number"),
							(lt, ":var_35", ":party_center_player_enterprise_input_number"),
							(item_slot_eq, ":party_center_player_enterprise", slot_item_primary_raw_material, ":inventory_slot_value_10_number_2"),
							(val_add, ":var_35", 1),
						(else_try),
							(lt, ":var_36", ":value_15"),
							(item_slot_eq, ":party_center_player_enterprise", slot_item_secondary_raw_material, ":inventory_slot_value_10_number_2"),
							(val_add, ":var_36", 1),
						(try_end),
						(try_begin),
							(gt, ":var_35", 0),
							(val_sub, ":party_center_player_enterprise_input_number", ":var_35"),
							(store_mul, ":value_16", ":var_19", ":var_35"),
							(val_add, ":value_8", ":value_16"),
						(try_end),
						(try_begin),
							(gt, ":var_36", 0),
							(val_sub, ":value_15", ":var_36"),
							(assign, ":value_16", ":var_20"),
							(val_add, ":value_8", ":value_16"),
						(try_end),
					(try_end),
					(try_begin),
						(eq, "$g_apply_budget_report_to_gold", 1),
						(item_get_slot, ":party_center_player_enterprise_primary_raw_material", ":party_center_player_enterprise", slot_item_primary_raw_material),
						(troop_remove_items, ":value_10", ":party_center_player_enterprise_primary_raw_material", ":var_35"),
						(item_get_slot, ":party_center_player_enterprise_secondary_raw_material", ":party_center_player_enterprise", slot_item_secondary_raw_material),
						(troop_remove_items, ":value_10", ":party_center_player_enterprise_secondary_raw_material", ":var_36"),
						(store_sub, ":value_13", ":party_center_player_enterprise_primary_raw_material", "itm_trade_spice"),
						(val_add, ":value_13", 267),
						(party_get_slot, ":party_value_13", ":party", ":value_13"),
						(store_mul, ":value_14", ":party_center_player_enterprise_output_per_run", 15),
						(val_add, ":party_value_13", ":value_14"),
						(party_set_slot, ":party", ":value_13", ":party_value_13"),
						(try_begin),
							(gt, ":value_15", 0),
							(store_sub, ":value_13", ":party_center_player_enterprise_secondary_raw_material", "itm_trade_spice"),
							(val_add, ":value_13", 267),
							(party_get_slot, ":party_value_13", ":party", ":value_13"),
							(val_add, ":party_value_13", 15),
							(party_set_slot, ":party", ":value_13", ":party_value_13"),
						(try_end),
					(try_end),
					(call_script, "script_get_enterprise_name", ":party_center_player_enterprise"),
					(str_store_string, 5, reg0),
					(create_text_overlay, reg1, "str_enterprise_s5_at_s0", 0),
					(position_set_x, 1, 900),
					(position_set_y, 1, 900),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, 25),
					(position_set_y, 1, ":value_7"),
					(overlay_set_position, reg1, 1),
					(assign, reg0, ":value_8"),
					(try_begin),
						(store_faction_of_party, ":faction_of_party_party", ":party"),
						(store_relation, ":relation_faction_of_party_party_players_kingdom", ":faction_of_party_party", "$players_kingdom"),
						(lt, ":relation_faction_of_party_party_players_kingdom", 0),
						(assign, reg0, 0),
						(assign, ":value_8", 0),
						(create_text_overlay, reg1, "str_under_sequestration", 32776),
						(overlay_set_color, reg1, 16711680),
					(else_try),
						(ge, reg0, 0),
						(create_text_overlay, reg1, "@{!}{reg0}", 32776),
						(overlay_set_color, reg1, 43520),
					(else_try),
						(create_text_overlay, reg1, "@{!}{reg0}", 32776),
						(overlay_set_color, reg1, 16711680),
					(try_end),
					(val_add, ":var_7", ":value_8"),
					(val_add, ":var_15", ":value_8"),
					(position_set_x, 1, 900),
					(position_set_y, 1, 900),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, 500),
					(position_set_y, 1, ":value_7"),
					(overlay_set_position, reg1, 1),
					(val_sub, ":value_7", 27),
				(try_end),
				(party_slot_eq, ":party", slot_town_lord, "trp_player"),
				(party_get_slot, ":party_center_accumulated_rents", ":party", slot_center_accumulated_rents),
				(party_get_slot, ":party_center_accumulated_tariffs", ":party", slot_center_accumulated_tariffs),
				(store_add, ":value_17", ":party_center_accumulated_rents", ":party_center_accumulated_tariffs"),
				(val_add, ":var_7", ":value_17"),
				(val_add, ":var_8", ":value_17"),
				(val_add, ":var_15", ":value_17"),
				(str_store_party_name, 0, ":party"),
				(try_begin),
					(neg|is_between, ":party", "p_castle_1", "p_village_1"),
					(party_get_slot, ":party_400", ":party", 400),
					(neq, ":party_400", 0),
					(call_script, "script_dplmc_describe_tax_rate_to_s50", ":party_400"),
					(str_store_string, 0, "@{s0} ({s50})"),
				(try_end),
				(create_text_overlay, reg1, "str_rents_from_s0", 0),
				(str_store_party_name, 0, ":party"),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(try_begin),
					(gt, ":party_center_accumulated_rents", 0),
					(assign, reg0, ":party_center_accumulated_rents"),
					(create_text_overlay, reg1, "@{!}{reg0}", 32776),
					(overlay_set_color, reg1, 43520),
				(else_try),
					(create_text_overlay, reg1, "@None", 32776),
				(try_end),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_7", 27),
				(try_begin),
					(is_between, ":party", "p_town_1", "p_castle_1"),
					(create_text_overlay, reg1, "str_tariffs_from_s0", 0),
					(position_set_x, 1, 900),
					(position_set_y, 1, 900),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, 25),
					(position_set_y, 1, ":value_7"),
					(overlay_set_position, reg1, 1),
					(try_begin),
						(gt, ":party_center_accumulated_tariffs", 0),
						(assign, reg0, ":party_center_accumulated_tariffs"),
						(create_text_overlay, reg1, "@{!}{reg0}", 32776),
						(overlay_set_color, reg1, 43520),
					(else_try),
						(create_text_overlay, reg1, "@None", 32776),
					(try_end),
					(position_set_x, 1, 900),
					(position_set_y, 1, 900),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, 500),
					(position_set_y, 1, ":value_7"),
					(overlay_set_position, reg1, 1),
					(val_sub, ":value_7", 27),
				(try_end),
			(try_end),
			(try_begin),
				(gt, "$players_kingdom", 0),
				(neq, "$players_kingdom", "fac_player_supporters_faction"),
				(neq, "$players_kingdom", "fac_player_faction"),
				(eq, "$player_has_homage", 0),
				(str_store_faction_name, 0, "$players_kingdom"),
				(create_text_overlay, reg1, "str_mercenary_payment_from_s0", 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(assign, ":value_4", "p_main_party"),
				(assign, ":value_18", 0),
				(party_get_num_companion_stacks, ":num_companion_stacks_value_4", ":value_4"),
				(try_for_range, ":number_2", 0, ":num_companion_stacks_value_4"),
					(party_stack_get_troop_id, ":party_stack_troop_id_value_4_number_2", ":value_4", ":number_2"),
					(party_stack_get_size, ":party_stack_size_value_4_number_2", ":value_4", ":number_2"),
					(call_script, "script_game_get_troop_wage", ":party_stack_troop_id_value_4_number_2", ":value_4"),
					(assign, ":value_19", reg0),
					(val_mul, ":value_19", ":party_stack_size_value_4_number_2"),
					(val_add, ":value_18", ":value_19"),
				(try_end),
				(try_begin),
					(eq, ":value_5", 1),
					(val_div, ":value_18", 2),
				(else_try),
					(eq, ":value_4", "p_main_party"),
					(store_sub, ":value_20", 14, "$g_cur_week_half_daily_wage_payments"),
					(val_mul, ":value_18", ":value_20"),
					(val_div, ":value_18", 14),
				(try_end),
				(store_mul, ":value_21", ":value_18", 20),
				(val_div, ":value_21", 100),
				(store_skill_level, ":skill_level_7_player", 7, "trp_player"),
				(val_mul, ":skill_level_7_player", 2),
				(store_add, ":value_22", 0, ":skill_level_7_player"),
				(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
				(store_div, ":value_23", ":player_renown", 20),
				(val_min, ":value_23", 40),
				(val_add, ":value_22", ":value_23"),
				(store_div, ":value_24", ":value_18", ":value_22"),
				(val_add, ":value_18", ":value_24"),
				(val_sub, ":value_18", ":value_21"),
				(assign, reg0, ":value_18"),
				(val_add, ":var_15", reg0),
				(create_text_overlay, reg1, "@{!}{reg0}", 32776),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(overlay_set_color, reg1, 43520),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_7", 27),
			(try_end),
			(try_begin),
				(gt, ":var_6", ":value"),
				(gt, ":var_7", 0),
				(store_sub, ":value_25", ":var_6", ":value"),
				(val_mul, ":value_25", ":value_2"),
				(val_min, ":value_25", 65),
				(store_mul, ":value_26", ":var_8", ":value_25"),
				(val_div, ":value_26", 100),
				(assign, ":value_27", 0),
				(try_begin),
					(gt, "$g_player_chamberlain", 0),
					(val_add, ":value_27", 10),
				(try_end),
				(try_begin),
					(try_begin),
						(is_between, ":value_3", "fac_kingdom_1", "fac_kingdoms_end"),
						(neg|faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
						(faction_get_slot, reg0, ":value_3", 203),
						(faction_set_slot, "fac_player_supporters_faction", 203, reg0),
						(faction_get_slot, reg0, ":value_3", 201),
						(faction_set_slot, "fac_player_supporters_faction", 201, reg0),
						(faction_get_slot, reg0, ":value_3", 204),
						(faction_set_slot, "fac_player_supporters_faction", 204, reg0),
						(faction_get_slot, reg0, ":value_3", 202),
						(faction_set_slot, "fac_player_supporters_faction", 202, reg0),
						(faction_get_slot, reg0, ":value_3", 206),
						(faction_set_slot, "fac_player_supporters_faction", 206, reg0),
					(try_end),
					(this_or_next|is_between, ":value_3", "fac_kingdom_1", "fac_kingdoms_end"),
					(faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
					(try_begin),
						(faction_get_slot, ":player_supporters_faction_201", "fac_player_supporters_faction", 201),
						(neq, ":player_supporters_faction_201", 0),
						(val_mul, ":player_supporters_faction_201", 5),
						(val_add, ":value_27", ":player_supporters_faction_201"),
					(try_end),
					(try_begin),
						(faction_get_slot, ":player_supporters_faction_203", "fac_player_supporters_faction", 203),
						(neq, ":player_supporters_faction_203", 0),
						(val_mul, ":player_supporters_faction_203", 3),
						(val_add, ":value_27", ":player_supporters_faction_203"),
					(try_end),
				(else_try),
					(gt, "$players_kingdom", 0),
					(faction_get_slot, ":player_supporters_faction_201", "$players_kingdom", 201),
					(neq, ":player_supporters_faction_201", 0),
					(val_mul, ":player_supporters_faction_201", -5),
					(val_add, ":value_27", ":player_supporters_faction_201"),
				(try_end),
				(try_begin),
					(gt, ":value_26", 0),
					(store_mul, ":value_28", ":value_26", ":value_27"),
					(val_div, ":value_28", 100),
					(store_mul, ":value_27", ":value_28", 100),
					(val_div, ":value_27", ":value_26"),
					(val_sub, ":value_26", ":value_28"),
				(try_end),
				(val_sub, ":var_15", ":value_26"),
				(try_begin),
					(gt, "$g_player_chamberlain", 0),
					(str_store_string, 55, "str_loss_due_to_tax_inefficiency"),
					(assign, reg0, ":value_27"),
					(val_mul, reg0, -1),
					(str_store_string, 55, "@{s55} ({reg0}%)"),
					(create_text_overlay, reg1, "@{s55}", 0),
				(else_try),
					(create_text_overlay, reg1, "str_loss_due_to_tax_inefficiency", 0),
				(try_end),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(store_mul, reg0, ":value_26", -1),
				(create_text_overlay, reg1, "@{!}{reg0}", 32776),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(overlay_set_color, reg1, 16711680),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_7", 27),
			(try_end),
			(try_for_parties, ":value_4"),
				(assign, ":value_5", 0),
				(try_begin),
					(this_or_next|party_slot_eq, ":value_4", slot_party_type, 3),
					(party_slot_eq, ":value_4", slot_party_type, 2),
					(party_slot_eq, ":value_4", slot_town_lord, "trp_player"),
					(store_add, ":value_29", 3, "trp_troop_tree_0"),
					(try_for_range, ":troop", "trp_troop_tree_0", ":value_29"),
						(eq, "$troop_trees", ":troop"),
						(assign, ":var_68", ":troop"),
					(try_end),
					(troop_get_slot, ":var_68_859", ":var_68", 859),
					(neg|party_slot_eq, ":value_4", slot_village_infested_by_bandits, ":var_68_859"),
					(assign, ":value_5", 1),
				(else_try),
					(this_or_next|party_slot_eq, ":value_4", slot_party_type, 3),
					(party_slot_eq, ":value_4", slot_party_type, 2),
					(neg|party_slot_ge, ":value_4", 7, 1),
					(store_faction_of_party, ":faction_of_party_value_4", ":value_4"),
					(this_or_next|eq, ":value_3", ":faction_of_party_value_4"),
					(eq, ":faction_of_party_value_4", "fac_player_supporters_faction"),
					(this_or_next|is_between, ":value_3", "fac_kingdom_1", "fac_kingdoms_end"),
					(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
					(assign, ":value_5", 1),
				(try_end),
				(assign, ":value_6", 0),
				(try_begin),
					(party_slot_eq, ":value_4", slot_party_type, 7),
					(party_slot_eq, ":value_4", 300, "trp_player"),
					(assign, ":value_6", 1),
				(try_end),
				(this_or_next|eq, ":value_6", 1),
				(this_or_next|eq, ":value_4", "p_main_party"),
				(eq, ":value_5", 1),
				(assign, ":value_18", 0),
				(party_get_num_companion_stacks, ":num_companion_stacks_value_4", ":value_4"),
				(try_for_range, ":number_2", 0, ":num_companion_stacks_value_4"),
					(party_stack_get_troop_id, ":party_stack_troop_id_value_4_number_2", ":value_4", ":number_2"),
					(party_stack_get_size, ":party_stack_size_value_4_number_2", ":value_4", ":number_2"),
					(call_script, "script_game_get_troop_wage", ":party_stack_troop_id_value_4_number_2", ":value_4"),
					(assign, ":value_19", reg0),
					(val_mul, ":value_19", ":party_stack_size_value_4_number_2"),
					(val_add, ":value_18", ":value_19"),
				(try_end),
				(try_begin),
					(eq, ":value_5", 1),
					(val_div, ":value_18", 2),
				(else_try),
					(eq, ":value_4", "p_main_party"),
					(store_sub, ":value_20", 14, "$g_cur_week_half_daily_wage_payments"),
					(val_mul, ":value_18", ":value_20"),
					(val_div, ":value_18", 14),
				(try_end),
				(val_mul, ":value_18", -1),
				(val_add, ":var_15", ":value_18"),
				(str_store_party_name, 0, ":value_4"),
				(try_begin),
					(eq, ":value_4", "p_main_party"),
					(str_store_string, 0, "str_s0s_party"),
				(try_end),
				(create_text_overlay, reg1, "str_wages_for_s0", 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(try_begin),
					(lt, ":value_18", 0),
					(assign, reg0, ":value_18"),
					(create_text_overlay, reg1, "@{!}{reg0}", 32776),
					(overlay_set_color, reg1, 16711680),
				(else_try),
					(create_text_overlay, reg1, "@None", 32776),
				(try_end),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_7", 27),
			(try_end),
			(try_begin),
				(gt, "$g_player_debt_to_party_members", 0),
				(val_sub, ":var_15", "$g_player_debt_to_party_members"),
				(create_text_overlay, reg1, "str_earlier_debts", 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(store_mul, reg0, "$g_player_debt_to_party_members", -1),
				(create_text_overlay, reg1, "@{!}{reg0}", 32776),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(overlay_set_color, reg1, 16711680),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_7", 27),
			(try_end),
			(assign, ":var_70", 0),
			(try_begin),
				(gt, "$g_player_minister", 0),
				(val_add, ":var_70", 15),
			(try_end),
			(try_begin),
				(troop_slot_ge, "trp_player", 30, 0),
				(val_add, ":var_70", 10),
			(try_end),
			(try_begin),
				(gt, "$g_player_chamberlain", 0),
				(val_add, ":var_70", 15),
			(try_end),
			(try_begin),
				(gt, "$g_player_constable", 0),
				(val_add, ":var_70", 15),
			(try_end),
			(try_begin),
				(gt, "$g_player_chancellor", 0),
				(val_add, ":var_70", 20),
			(try_end),
			(try_begin),
				(gt, ":var_70", 0),
				(val_sub, ":var_15", ":var_70"),
				(create_text_overlay, reg1, "@Staff:", 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(store_mul, reg0, ":var_70", -1),
				(create_text_overlay, reg1, "@{!}{reg0}", 32776),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(overlay_set_color, reg1, 16711680),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_7", 27),
			(try_end),
			(try_begin),
				(faction_slot_eq, "fac_player_supporters_faction", slot_faction_state, 0),
				(faction_slot_eq, "fac_player_supporters_faction", slot_faction_leader, "trp_player"),
				(assign, ":var_71", 0),
				(try_for_range, ":party", "p_town_1", "p_salt_mine"),
					(party_slot_eq, ":party", slot_village_infested_by_bandits, 0),
					(party_slot_ge, ":party", 7, 1),
					(party_get_slot, ":party_town_lord", ":party", slot_town_lord),
					(store_faction_of_troop, ":faction_of_troop_party_town_lord", ":party_town_lord"),
					(eq, ":faction_of_troop_party_town_lord", "fac_player_supporters_faction"),
					(assign, ":value_30", 0),
					(try_begin),
						(party_slot_eq, ":party", slot_party_type, 4),
						(party_slot_eq, ":party", slot_village_state, 0),
						(assign, ":value_30", 1200),
					(else_try),
						(party_slot_eq, ":party", slot_party_type, 2),
						(assign, ":value_30", 1200),
					(else_try),
						(party_slot_eq, ":party", slot_party_type, 3),
						(assign, ":value_30", 2400),
					(try_end),
					(party_get_slot, ":party_town_prosperity", ":party", slot_town_prosperity),
					(store_add, ":value_31", 20, ":party_town_prosperity"),
					(val_mul, ":value_30", ":value_31"),
					(val_div, ":value_30", 120),
					(game_get_reduce_campaign_ai, ":game_reduce_campaign_ai"),
					(try_begin),
						(eq, ":game_reduce_campaign_ai", 0),
						(val_mul, ":value_30", 3),
						(val_div, ":value_30", 4),
					(else_try),
						(eq, ":game_reduce_campaign_ai", 1),
					(else_try),
						(eq, ":game_reduce_campaign_ai", 2),
						(val_mul, ":value_30", 4),
						(val_div, ":value_30", 3),
					(try_end),
					(assign, ":var_77", ":value_30"),
					(try_begin),
						(party_get_slot, ":party_400", ":party", 400),
						(neq, ":party_400", 0),
						(store_div, ":value_32", ":var_77", 100),
						(val_mul, ":value_32", ":party_400"),
						(val_add, ":value_30", ":value_32"),
					(try_end),
					(try_begin),
						(faction_get_slot, ":player_supporters_faction_202", "fac_player_supporters_faction", 202),
						(neq, ":player_supporters_faction_202", 0),
						(val_mul, ":player_supporters_faction_202", 5),
						(store_div, ":value_32", ":var_77", 100),
						(val_mul, ":value_32", ":player_supporters_faction_202"),
						(val_add, ":value_30", ":value_32"),
					(try_end),
					(try_begin),
						(faction_get_slot, ":player_supporters_faction_201", "fac_player_supporters_faction", 201),
						(neq, ":player_supporters_faction_201", 0),
						(val_mul, ":player_supporters_faction_201", 10),
						(store_div, ":value_32", ":var_77", 100),
						(val_mul, ":value_32", ":player_supporters_faction_201"),
						(val_add, ":value_30", ":value_32"),
					(try_end),
					(try_begin),
						(faction_get_slot, ":player_supporters_faction_203", "fac_player_supporters_faction", 203),
						(neq, ":player_supporters_faction_203", 0),
						(val_mul, ":player_supporters_faction_203", 2),
						(store_div, ":value_32", ":var_77", 100),
						(val_mul, ":value_32", ":player_supporters_faction_203"),
						(val_add, ":value_30", ":value_32"),
					(try_end),
					(val_div, ":value_30", 5),
					(val_div, ":var_77", 2),
					(val_clamp, ":value_30", 0, ":var_77"),
					(val_add, ":var_71", ":value_30"),
				(try_end),
				(create_text_overlay, reg1, "@Tributes from your nobles:", 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(try_begin),
					(gt, ":var_71", 0),
					(val_add, ":var_15", ":var_71"),
					(assign, reg0, ":var_71"),
					(create_text_overlay, reg1, "str_reg0", 32776),
					(overlay_set_color, reg1, 43520),
				(else_try),
					(create_text_overlay, reg1, "str_none", 32776),
				(try_end),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_7", 27),
			(try_end),
			(create_mesh_overlay, reg1, "mesh_white_plane"),
			(overlay_set_color, reg1, 0),
			(position_set_x, 1, 24000),
			(position_set_y, 1, 50),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 25),
			(store_add, ":value_33", ":value_7", 25),
			(position_set_y, 1, ":value_33"),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "str_net_change", 0),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 25),
			(position_set_y, 1, ":value_7"),
			(overlay_set_position, reg1, 1),
			(assign, reg0, ":var_15"),
			(create_text_overlay, reg1, "@{!}{reg0}", 32776),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg1, 1),
			(try_begin),
				(gt, reg0, 0),
				(overlay_set_color, reg1, 43520),
			(else_try),
				(lt, reg0, 0),
				(overlay_set_color, reg1, 16711680),
			(try_end),
			(position_set_x, 1, 500),
			(position_set_y, 1, ":value_7"),
			(overlay_set_position, reg1, 1),
			(val_sub, ":value_7", 27),
			(create_text_overlay, reg1, "str_earlier_wealth", 0),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 25),
			(position_set_y, 1, ":value_7"),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(gt, "$g_player_chamberlain", 0),
				(store_troop_gold, ":troop_gold_household_possessions", "trp_household_possessions"),
			(else_try),
				(store_troop_gold, ":troop_gold_household_possessions", "trp_player"),
			(try_end),
			(assign, reg0, ":troop_gold_household_possessions"),
			(create_text_overlay, reg1, "@{!}{reg0}", 32776),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, ":value_7"),
			(overlay_set_position, reg1, 1),
			(val_sub, ":value_7", 27),
			(val_mul, ":var_15", -1),
			(assign, ":value_34", 0),
			(try_begin),
				(ge, ":troop_gold_household_possessions", ":var_15"),
				(assign, ":value_35", ":var_15"),
				(assign, ":value_36", 0),
			(else_try),
				(assign, ":value_35", ":troop_gold_household_possessions"),
				(store_sub, ":value_36", ":var_15", ":troop_gold_household_possessions"),
				(try_begin),
					(gt, "$g_player_chamberlain", 0),
					(store_troop_gold, ":troop_gold_player", "trp_player"),
					(try_begin),
						(ge, ":troop_gold_player", ":value_36"),
						(assign, ":value_34", ":value_36"),
						(assign, ":value_36", 0),
					(else_try),
						(assign, ":value_34", ":troop_gold_player"),
						(val_sub, ":value_36", ":troop_gold_player"),
					(try_end),
					(try_begin),
						(eq, "$g_apply_budget_report_to_gold", 1),
						(troop_remove_gold, "trp_player", ":value_34"),
						(assign, reg0, ":value_34"),
						(display_message, "@You paid {reg0} cash to liquidate a debt"),
					(try_end),
				(try_end),
			(try_end),
			(create_text_overlay, reg1, "str_new_wealth", 0),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 25),
			(position_set_y, 1, ":value_7"),
			(overlay_set_position, reg1, 1),
			(store_sub, reg0, ":troop_gold_household_possessions", ":value_35"),
			(create_text_overlay, reg1, "@{!}{reg0}", 32776),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, ":value_7"),
			(overlay_set_position, reg1, 1),
			(val_sub, ":value_7", 27),
			(try_begin),
				(gt, "$g_player_chamberlain", 0),
				(gt, ":value_34", 0),
				(create_text_overlay, reg1, "@Earlier cash:", 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(assign, reg0, ":troop_gold_player"),
				(create_text_overlay, reg1, "@{!}{reg0}", 32776),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_7", 27),
				(create_text_overlay, reg1, "@New cash:", 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(store_sub, reg0, ":troop_gold_player", ":value_34"),
				(create_text_overlay, reg1, "@{!}{reg0}", 32776),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_7", 27),
			(try_end),
			(try_begin),
				(gt, ":value_36", 0),
				(create_text_overlay, reg1, "str_new_debts", 0),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(assign, reg0, ":value_36"),
				(create_text_overlay, reg1, "@{!}{reg0}", 32776),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 500),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(val_sub, ":value_7", 27),
				(neq, "$g_apply_budget_report_to_gold", 0),
				(call_script, "script_objectionable_action", 2, "str_men_unpaid"),
			(try_end),
			(set_container_overlay, -1),
			(create_button_overlay, "$g_presentation_obj_budget_report_1", "@Continue..."),
			(position_set_x, 1, 225),
			(position_set_y, 1, 60),
			(overlay_set_position, "$g_presentation_obj_budget_report_1", 1),
			(try_begin),
				(eq, "$g_apply_budget_report_to_gold", 1),
				(assign, "$g_player_debt_to_party_members", ":value_36"),
				(try_begin),
					(gt, ":value_35", 0),
					(try_begin),
						(gt, "$g_player_chamberlain", 0),
						(call_script, "script_dplmc_withdraw_from_treasury", ":value_35"),
					(else_try),
						(troop_remove_gold, "trp_player", ":value_35"),
					(try_end),
				(else_try),
					(val_mul, ":value_35", -1),
					(try_begin),
						(gt, "$g_player_chamberlain", 0),
						(call_script, "script_dplmc_pay_into_treasury", ":value_35"),
					(else_try),
						(troop_add_gold, "trp_player", ":value_35"),
					(try_end),
				(try_end),
				(try_for_range, ":party", "p_town_1", "p_salt_mine"),
					(party_slot_eq, ":party", slot_town_lord, "trp_player"),
					(party_set_slot, ":party", slot_center_accumulated_rents, 0),
					(party_set_slot, ":party", slot_center_accumulated_tariffs, 0),
				(try_end),
				(assign, "$g_cur_week_half_daily_wage_payments", 0),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_budget_report_1"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("game_before_quit", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(try_begin),
				(is_trial_version),
				(set_fixed_point_multiplier, 1000),
				(create_mesh_overlay, reg0, "mesh_quit_adv"),
				(position_set_x, 1, -1),
				(position_set_y, 1, -1),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 1002),
				(position_set_y, 1, 1002),
				(overlay_set_size, reg0, 1),
				(assign, "$g_game_before_quit_state", 0),
				(presentation_set_duration, 999999),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(gt, ":trigger_param_1", 500),
			(try_begin),
				(this_or_next|key_clicked, 57),
				(this_or_next|key_clicked, 28),
				(this_or_next|key_clicked, 1),
				(this_or_next|key_clicked, 14),
				(this_or_next|key_clicked, 224),
				(key_clicked, 225),
				(try_begin),
					(eq, "$g_game_before_quit_state", 0),
					(val_add, "$g_game_before_quit_state", 1),
					(create_mesh_overlay, reg0, "mesh_quit_adv_b"),
					(position_set_x, 1, -1),
					(position_set_y, 1, -1),
					(overlay_set_position, reg0, 1),
					(position_set_x, 1, 1002),
					(position_set_y, 1, 1002),
					(overlay_set_size, reg0, 1),
				(else_try),
					(presentation_set_duration, 0),
				(try_end),
			(try_end)
		])
	]),

	("multiplayer_duel_start_counter", prsntf_read_only|prsntf_manual_end_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_multiplayer_duel_start_counter_overlay", -1),
			(assign, "$g_multiplayer_last_duel_start_counter_value", -1),
			(str_clear, 0),
			(create_text_overlay, "$g_multiplayer_duel_start_counter_overlay", 0, 65552),
			(overlay_set_color, "$g_multiplayer_duel_start_counter_overlay", 16777215),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, "$g_multiplayer_duel_start_counter_overlay", 1),
			(position_set_x, 1, 2000),
			(position_set_y, 1, 2000),
			(overlay_set_size, "$g_multiplayer_duel_start_counter_overlay", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(ge, "$g_multiplayer_duel_start_counter_overlay", 0),
			(store_mission_timer_a, ":mission_timer_a"),
			(store_sub, ":value", ":mission_timer_a", "$g_multiplayer_duel_start_time"),
			(store_sub, ":value_2", 3, ":value"),
			(try_begin),
				(le, ":value_2", 0),
				(presentation_set_duration, 0),
			(else_try),
				(neq, "$g_multiplayer_last_duel_start_counter_value", ":value_2"),
				(assign, "$g_multiplayer_last_duel_start_counter_value", ":value_2"),
				(assign, reg0, ":value_2"),
				(str_store_string, 0, "str_duel_starts_in_reg0_seconds"),
				(overlay_set_text, "$g_multiplayer_duel_start_counter_overlay", 0),
			(try_end)
		])
	]),

	("autoloot_upgrade_management", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_game_button_overlay, "$g_presentation_obj_10", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_10", 1),
			(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", "$temp"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 200),
			(position_set_y, 1, 530),
			(overlay_set_position, reg0, 1),
			(str_store_troop_name, 1, "$temp"),
			(store_character_level, ":character_level_temp", "$temp"),
			(assign, reg1, ":character_level_temp"),
			(str_store_string, 1, "@Name: {s1}^Level: {reg1}"),
			(store_troop_health, ":troop_health_temp_1", "$temp", 1),
			(call_script, "script_get_troop_max_hp", "$temp"),
			(assign, reg1, ":troop_health_temp_1"),
			(assign, reg2, reg0),
			(str_store_string, 1, "@{s1}^HP: {reg1}/{reg2}"),
			(create_text_overlay, reg1, "@{s1}", 2048),
			(position_set_x, 1, 380),
			(position_set_y, 1, 530),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Weapon upgrade settings:", 4112),
			(position_set_x, 1, 445),
			(position_set_y, 1, 500),
			(overlay_set_position, reg1, 1),
			(assign, ":value", 0),
			(try_for_range_backwards, ":value_2", 0, 19),
				(this_or_next|is_between, ":value_2", 2, 11),
				(this_or_next|is_between, ":value_2", 16, 19),
				(eq, ":value_2", 0),
				(troop_set_slot, "trp_temp_array_c", ":value", ":value_2"),
				(val_add, ":value", 1),
			(try_end),
			(position_set_x, 1, 445),
			(position_set_y, 1, 450),
			(create_combo_button_overlay, "$g_presentation_obj_1"),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(assign, ":value", 0),
			(call_script, "script_get_current_item_for_autoloot", 0),
			(try_for_range_backwards, ":value_2", 0, 19),
				(this_or_next|is_between, ":value_2", 2, 11),
				(this_or_next|is_between, ":value_2", 16, 19),
				(eq, ":value_2", 0),
				(store_add, ":value_3", "str_hero_wpn_slot_none", ":value_2"),
				(str_store_string, 0, ":value_3"),
				(overlay_add_item, "$g_presentation_obj_1", 0),
				(try_begin),
					(troop_slot_eq, "$temp", 317, ":value_2"),
					(overlay_set_val, "$g_presentation_obj_1", ":value"),
				(try_end),
				(val_add, ":value", 1),
			(try_end),
			(position_set_y, 1, 420),
			(create_combo_button_overlay, "$g_presentation_obj_2"),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(assign, ":value", 0),
			(call_script, "script_get_current_item_for_autoloot", 1),
			(try_for_range_backwards, ":value_2", 0, 19),
				(this_or_next|is_between, ":value_2", 2, 11),
				(this_or_next|is_between, ":value_2", 16, 19),
				(eq, ":value_2", 0),
				(store_add, ":value_3", "str_hero_wpn_slot_none", ":value_2"),
				(str_store_string, 0, ":value_3"),
				(overlay_add_item, "$g_presentation_obj_2", 0),
				(try_begin),
					(troop_slot_eq, "$temp", 318, ":value_2"),
					(overlay_set_val, "$g_presentation_obj_2", ":value"),
				(try_end),
				(val_add, ":value", 1),
			(try_end),
			(position_set_y, 1, 390),
			(create_combo_button_overlay, "$g_presentation_obj_3"),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(assign, ":value", 0),
			(call_script, "script_get_current_item_for_autoloot", 2),
			(try_for_range_backwards, ":value_2", 0, 19),
				(this_or_next|is_between, ":value_2", 2, 11),
				(this_or_next|is_between, ":value_2", 16, 19),
				(eq, ":value_2", 0),
				(store_add, ":value_3", "str_hero_wpn_slot_none", ":value_2"),
				(str_store_string, 0, ":value_3"),
				(overlay_add_item, "$g_presentation_obj_3", 0),
				(try_begin),
					(troop_slot_eq, "$temp", 319, ":value_2"),
					(overlay_set_val, "$g_presentation_obj_3", ":value"),
				(try_end),
				(val_add, ":value", 1),
			(try_end),
			(position_set_y, 1, 360),
			(create_combo_button_overlay, "$g_presentation_obj_4"),
			(overlay_set_position, "$g_presentation_obj_4", 1),
			(assign, ":value", 0),
			(call_script, "script_get_current_item_for_autoloot", 3),
			(try_for_range_backwards, ":value_2", 0, 19),
				(this_or_next|is_between, ":value_2", 2, 11),
				(this_or_next|is_between, ":value_2", 16, 19),
				(eq, ":value_2", 0),
				(store_add, ":value_3", "str_hero_wpn_slot_none", ":value_2"),
				(str_store_string, 0, ":value_3"),
				(overlay_add_item, "$g_presentation_obj_4", 0),
				(try_begin),
					(troop_slot_eq, "$temp", 320, ":value_2"),
					(overlay_set_val, "$g_presentation_obj_4", ":value"),
				(try_end),
				(val_add, ":value", 1),
			(try_end),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_1", 1),
			(overlay_set_size, "$g_presentation_obj_2", 1),
			(overlay_set_size, "$g_presentation_obj_3", 1),
			(overlay_set_size, "$g_presentation_obj_4", 1),
			(position_set_x, 1, 303),
			(position_set_y, 1, 310),
			(create_image_button_overlay, "$g_presentation_obj_11", "mesh_longer_button", "mesh_longer_button_down"),
			(overlay_set_position, "$g_presentation_obj_11", 1),
			(position_set_x, 1, 445),
			(position_set_y, 1, 325),
			(create_text_overlay, reg1, "@Apply to everyone", 4112),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 300),
			(position_set_y, 1, 255),
			(create_text_overlay, reg1, "@Upgrade armor ", 4112),
			(overlay_set_position, reg1, 1),
			(position_set_y, 1, 205),
			(create_text_overlay, reg1, "@Upgrade horse ", 4112),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 180),
			(position_set_y, 1, 248),
			(create_check_box_overlay, "$g_presentation_obj_13", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_13", 1),
			(troop_get_slot, ":temp_313", "$temp", 313),
			(overlay_set_val, "$g_presentation_obj_13", ":temp_313"),
			(position_set_y, 1, 198),
			(create_check_box_overlay, "$g_presentation_obj_14", "mesh_checkbox_off", "mesh_checkbox_on"),
			(overlay_set_position, "$g_presentation_obj_14", 1),
			(troop_get_slot, ":temp_314", "$temp", 314),
			(overlay_set_val, "$g_presentation_obj_14", ":temp_314"),
			(position_set_x, 1, 418),
			(position_set_y, 1, 240),
			(create_image_button_overlay, "$g_presentation_obj_15", "mesh_longer_button", "mesh_longer_button_down"),
			(overlay_set_position, "$g_presentation_obj_15", 1),
			(position_set_y, 1, 190),
			(create_image_button_overlay, "$g_presentation_obj_16", "mesh_longer_button", "mesh_longer_button_down"),
			(overlay_set_position, "$g_presentation_obj_16", 1),
			(position_set_x, 1, 560),
			(position_set_y, 1, 255),
			(create_text_overlay, reg1, "@Apply to everyone", 4112),
			(overlay_set_position, reg1, 1),
			(position_set_y, 1, 205),
			(create_text_overlay, reg1, "@Apply to everyone", 4112),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, 145),
			(create_text_overlay, reg1, "@Price threshold of items for picking:", 4096),
			(overlay_set_position, reg1, 1),
			(create_number_box_overlay, "$g_presentation_obj_9", 0, 1001),
			(position_set_x, 1, 600),
			(position_set_y, 1, 131),
			(overlay_set_position, "$g_presentation_obj_9", 1),
			(overlay_set_val, "$g_presentation_obj_9", "$g_price_threshold_for_picking"),
			(call_script, "script_prsnt_lines", 640, 2, 125, 285),
			(call_script, "script_prsnt_lines", 640, 2, 125, 175),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_6", 0, 8192),
			(position_set_x, 1, 800),
			(position_set_y, 1, 150),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(position_set_x, 1, 100),
			(position_set_y, 1, 400),
			(overlay_set_area_size, "$g_presentation_obj_6", 1),
			(set_container_overlay, "$g_presentation_obj_6"),
			(assign, ":value_4", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
				(is_between, ":party_stack_troop_id_main_party_number", "trp_npc1", "trp_kingdom_1_lord"),
				(val_add, ":value_4", 1),
			(try_end),
			(try_begin),
				(le, ":value_4", 10),
				(assign, ":value_5", 400),
			(else_try),
				(store_mul, ":value_5", ":value_4", 40),
			(try_end),
			(val_sub, ":value_5", 40),
			(assign, ":var_13", 50),
			(assign, ":value_4", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
				(is_between, ":party_stack_troop_id_main_party_number", "trp_npc1", "trp_kingdom_1_lord"),
				(str_store_troop_name, 1, ":party_stack_troop_id_main_party_number"),
				(position_set_x, 1, ":var_13"),
				(position_set_y, 1, ":value_5"),
				(val_sub, ":value_5", 40),
				(create_button_overlay, reg0, "@{s1}", 16),
				(overlay_set_position, reg0, 1),
				(assign, ":var_14", ":value_4"),
				(troop_set_slot, "trp_temp_array_a", ":var_14", reg0),
				(troop_set_slot, "trp_temp_array_b", ":var_14", ":party_stack_troop_id_main_party_number"),
				(val_add, ":value_4", 1),
			(try_end),
			(set_container_overlay, -1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(troop_get_slot, ":temp_array_c_trigger_param_2", "trp_temp_array_c", ":trigger_param_2"),
				(troop_set_slot, "$temp", 317, ":temp_array_c_trigger_param_2"),
				(start_presentation, "prsnt_autoloot_upgrade_management"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_2"),
				(troop_get_slot, ":temp_array_c_trigger_param_2", "trp_temp_array_c", ":trigger_param_2"),
				(troop_set_slot, "$temp", 318, ":temp_array_c_trigger_param_2"),
				(start_presentation, "prsnt_autoloot_upgrade_management"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_3"),
				(troop_get_slot, ":temp_array_c_trigger_param_2", "trp_temp_array_c", ":trigger_param_2"),
				(troop_set_slot, "$temp", 319, ":temp_array_c_trigger_param_2"),
				(start_presentation, "prsnt_autoloot_upgrade_management"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_4"),
				(troop_get_slot, ":temp_array_c_trigger_param_2", "trp_temp_array_c", ":trigger_param_2"),
				(troop_set_slot, "$temp", 320, ":temp_array_c_trigger_param_2"),
				(start_presentation, "prsnt_autoloot_upgrade_management"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_9"),
				(assign, "$g_price_threshold_for_picking", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_10"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_11"),
				(call_script, "script_copy_upgrade_to_all_heroes", "$temp", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_13"),
				(troop_set_slot, "$temp", 313, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_14"),
				(troop_set_slot, "$temp", 314, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_15"),
				(call_script, "script_copy_upgrade_to_all_heroes", "$temp", 2),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_16"),
				(call_script, "script_copy_upgrade_to_all_heroes", "$temp", 3),
			(try_end),
			(assign, ":var_4", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
				(is_between, ":party_stack_troop_id_main_party_number", "trp_npc1", "trp_kingdom_1_lord"),
				(assign, ":var_8", ":var_4"),
				(val_add, ":var_4", 1),
				(troop_slot_eq, "trp_temp_array_a", ":var_8", ":trigger_param_1"),
				(troop_get_slot, ":temp_array_b_var_8", "trp_temp_array_b", ":var_8"),
				(assign, "$temp", ":temp_array_b_var_8"),
				(start_presentation, "prsnt_autoloot_upgrade_management"),
			(try_end)
		])
	]),

	("dplmc_policy_management", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(faction_get_slot, ":player_supporters_faction_201", "fac_player_supporters_faction", 201),
			(faction_get_slot, ":player_supporters_faction_202", "fac_player_supporters_faction", 202),
			(faction_get_slot, ":player_supporters_faction_203", "fac_player_supporters_faction", 203),
			(faction_get_slot, ":player_supporters_faction_204", "fac_player_supporters_faction", 204),
			(faction_get_slot, ":player_supporters_faction_204_2", "fac_player_supporters_faction", 204),
			(create_game_button_overlay, "$g_presentation_obj_12", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_12", 1),
			(create_text_overlay, reg1, "@Select your domestic policy", 4112),
			(position_set_x, 1, 445),
			(position_set_y, 1, 700),
			(overlay_set_position, reg1, 1),
			(create_slider_overlay, "$g_presentation_obj_sliders_1", -3, 3),
			(create_slider_overlay, "$g_presentation_obj_sliders_2", -3, 3),
			(create_slider_overlay, "$g_presentation_obj_sliders_3", -3, 3),
			(create_slider_overlay, "$g_presentation_obj_sliders_4", -3, 3),
			(create_slider_overlay, "$g_presentation_obj_sliders_5", -3, 3),
			(assign, reg1, 25),
			(store_add, ":value", "str_dplmc_neither_centralize_nor_decentralized", ":player_supporters_faction_201"),
			(create_text_overlay, "$g_presentation_obj_sliders_6", ":value"),
			(store_add, ":value", "str_dplmc_neither_aristocratic_nor_plutocratic", ":player_supporters_faction_202"),
			(create_text_overlay, "$g_presentation_obj_sliders_7", ":value"),
			(store_add, ":value", "str_dplmc_mixture_serfs", ":player_supporters_faction_203"),
			(create_text_overlay, "$g_presentation_obj_sliders_8", ":value"),
			(store_add, ":value", "str_dplmc_mediocre_quality", ":player_supporters_faction_204"),
			(create_text_overlay, "$g_presentation_obj_sliders_9", ":value"),
			(store_add, ":value", "str_dplmc_neither_mercantilist_nor_laissez_faire", ":player_supporters_faction_204_2"),
			(create_text_overlay, "$g_presentation_obj_sliders_10", ":value"),
			(create_text_overlay, "$g_presentation_obj_1", "@Centralization:"),
			(create_text_overlay, "$g_presentation_obj_2", "@Aristocracy:"),
			(create_text_overlay, "$g_presentation_obj_3", "@Serfdom:"),
			(create_text_overlay, "$g_presentation_obj_4", "@Troop quality:"),
			(create_text_overlay, "$g_presentation_obj_5", "@Mercantilism:"),
			(create_text_overlay, "$g_presentation_obj_6", "@High centralization reduces tax inefficiency for the king and raises it for vassals. This will interfere  the relations between ruler and vassals."),
			(create_text_overlay, "$g_presentation_obj_7", "@High aristocracy will improve the relations between the king and his vassals who will be able to raise bigger armies but it will decreased trade."),
			(create_text_overlay, "$g_presentation_obj_8", "@High serfdom reduces tax inefficiency for the king and his vassals and vassals can maintain bigger armies but troops loose moral."),
			(create_text_overlay, "$g_presentation_obj_9", "@High troop quality increases the strength of troops but decreases army size."),
			(create_text_overlay, "$g_presentation_obj_10", "@Mercantilistic policies maximize exports while minimizing imports, and increase government regulation of industry."),
			(overlay_set_val, "$g_presentation_obj_sliders_1", ":player_supporters_faction_201"),
			(overlay_set_val, "$g_presentation_obj_sliders_2", ":player_supporters_faction_202"),
			(overlay_set_val, "$g_presentation_obj_sliders_3", ":player_supporters_faction_203"),
			(overlay_set_val, "$g_presentation_obj_sliders_4", ":player_supporters_faction_204"),
			(overlay_set_val, "$g_presentation_obj_sliders_5", ":player_supporters_faction_204_2"),
			(position_set_x, 1, 200),
			(position_set_y, 1, 575),
			(overlay_set_position, "$g_presentation_obj_sliders_1", 1),
			(position_set_y, 1, 450),
			(overlay_set_position, "$g_presentation_obj_sliders_2", 1),
			(position_set_y, 1, 325),
			(overlay_set_position, "$g_presentation_obj_sliders_3", 1),
			(position_set_y, 1, 200),
			(overlay_set_position, "$g_presentation_obj_sliders_4", 1),
			(position_set_y, 1, 75),
			(overlay_set_position, "$g_presentation_obj_sliders_5", 1),
			(position_set_x, 1, 100),
			(position_set_y, 1, 625),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(position_set_y, 1, 375),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(position_set_y, 1, 250),
			(overlay_set_position, "$g_presentation_obj_4", 1),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_5", 1),
			(position_set_x, 1, 50),
			(position_set_y, 1, 550),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(position_set_y, 1, 425),
			(overlay_set_position, "$g_presentation_obj_7", 1),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_8", 1),
			(position_set_y, 1, 175),
			(overlay_set_position, "$g_presentation_obj_9", 1),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_10", 1),
			(position_set_x, 1, 775),
			(position_set_y, 1, 775),
			(overlay_set_size, "$g_presentation_obj_6", 1),
			(overlay_set_size, "$g_presentation_obj_7", 1),
			(overlay_set_size, "$g_presentation_obj_8", 1),
			(overlay_set_size, "$g_presentation_obj_9", 1),
			(overlay_set_size, "$g_presentation_obj_10", 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 575),
			(overlay_set_position, "$g_presentation_obj_sliders_6", 1),
			(position_set_y, 1, 450),
			(overlay_set_position, "$g_presentation_obj_sliders_7", 1),
			(position_set_y, 1, 325),
			(overlay_set_position, "$g_presentation_obj_sliders_8", 1),
			(position_set_y, 1, 200),
			(overlay_set_position, "$g_presentation_obj_sliders_9", 1),
			(position_set_y, 1, 75),
			(overlay_set_position, "$g_presentation_obj_sliders_10", 1),
			(position_set_x, 1, 925),
			(position_set_y, 1, 925),
			(overlay_set_size, "$g_presentation_obj_sliders_6", 1),
			(overlay_set_size, "$g_presentation_obj_sliders_7", 1),
			(overlay_set_size, "$g_presentation_obj_sliders_8", 1),
			(overlay_set_size, "$g_presentation_obj_sliders_9", 1),
			(overlay_set_size, "$g_presentation_obj_sliders_10", 1)
		]),

		(ti_on_presentation_run,
		[]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_1"),
				(faction_set_slot, "fac_player_supporters_faction", 201, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_neither_centralize_nor_decentralized"),
				(overlay_set_text, "$g_presentation_obj_sliders_6", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_2"),
				(faction_set_slot, "fac_player_supporters_faction", 202, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_neither_aristocratic_nor_plutocratic"),
				(overlay_set_text, "$g_presentation_obj_sliders_7", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_3"),
				(faction_set_slot, "fac_player_supporters_faction", 203, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_mixture_serfs"),
				(overlay_set_text, "$g_presentation_obj_sliders_8", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_4"),
				(faction_set_slot, "fac_player_supporters_faction", 204, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_mediocre_quality"),
				(overlay_set_text, "$g_presentation_obj_sliders_9", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_5"),
				(faction_set_slot, "fac_player_supporters_faction", 206, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_neither_mercantilist_nor_laissez_faire"),
				(overlay_set_text, "$g_presentation_obj_sliders_10", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_12"),
				(assign, "$g_players_policy_set", 1),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_game_button_overlay, "$g_presentation_obj_10", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_10", 1),
			(create_text_overlay, reg1, "@Select your domestic policy", 4112),
			(position_set_x, 1, 445),
			(position_set_y, 1, 700),
			(overlay_set_position, reg1, 1),
			(create_slider_overlay, "$g_presentation_obj_sliders_1", -3, 3),
			(create_slider_overlay, "$g_presentation_obj_sliders_2", -3, 3),
			(create_slider_overlay, "$g_presentation_obj_sliders_3", -3, 3),
			(create_slider_overlay, "$g_presentation_obj_sliders_4", -3, 3),
			(assign, reg1, 25),
			(create_text_overlay, "$g_presentation_obj_sliders_5", "str_dplmc_neither_centralize_nor_decentralized"),
			(create_text_overlay, "$g_presentation_obj_sliders_6", "str_dplmc_neither_aristocratic_nor_plutocratic"),
			(create_text_overlay, "$g_presentation_obj_sliders_7", "str_dplmc_mixture_serfs"),
			(create_text_overlay, "$g_presentation_obj_sliders_8", "str_dplmc_mediocre_quality"),
			(create_text_overlay, "$g_presentation_obj_1", "@Centralization:"),
			(create_text_overlay, "$g_presentation_obj_2", "@Aristocracy:"),
			(create_text_overlay, "$g_presentation_obj_3", "@Serfdom:"),
			(create_text_overlay, "$g_presentation_obj_4", "@Conscript quality:"),
			(create_text_overlay, "$g_presentation_obj_5", "@High centralization reduces tax inefficiency for the sovereign and raises it for vassals. This will interfere  the relations between ruler and vassals."),
			(create_text_overlay, "$g_presentation_obj_6", "@High aristocracy will improve the relations between the sovereign and his vassals who will be able to raise larger armies but it will decreased trade capabilities with a disenfranchised merchant class."),
			(create_text_overlay, "$g_presentation_obj_7", "@High serfdom reduces tax inefficiency for the sovereign and his vassals and vassals can maintain larger armies but soldiers lose morale."),
			(create_text_overlay, "$g_presentation_obj_8", "@High troop quality increases the strength of troops but decreases army size."),
			(faction_get_slot, ":player_supporters_faction_201", "fac_player_supporters_faction", 201),
			(faction_get_slot, ":player_supporters_faction_202", "fac_player_supporters_faction", 202),
			(faction_get_slot, ":player_supporters_faction_203", "fac_player_supporters_faction", 203),
			(faction_get_slot, ":player_supporters_faction_204", "fac_player_supporters_faction", 204),
			(overlay_set_val, "$g_presentation_obj_sliders_1", ":player_supporters_faction_201"),
			(overlay_set_val, "$g_presentation_obj_sliders_2", ":player_supporters_faction_202"),
			(overlay_set_val, "$g_presentation_obj_sliders_3", ":player_supporters_faction_203"),
			(overlay_set_val, "$g_presentation_obj_sliders_4", ":player_supporters_faction_204"),
			(position_set_x, 1, 200),
			(position_set_y, 1, 600),
			(overlay_set_position, "$g_presentation_obj_sliders_1", 1),
			(position_set_y, 1, 450),
			(overlay_set_position, "$g_presentation_obj_sliders_2", 1),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_sliders_3", 1),
			(position_set_y, 1, 150),
			(overlay_set_position, "$g_presentation_obj_sliders_4", 1),
			(position_set_x, 1, 100),
			(position_set_y, 1, 650),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(position_set_y, 1, 350),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(position_set_y, 1, 200),
			(overlay_set_position, "$g_presentation_obj_4", 1),
			(position_set_x, 1, 50),
			(position_set_y, 1, 550),
			(overlay_set_position, "$g_presentation_obj_5", 1),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(position_set_y, 1, 250),
			(overlay_set_position, "$g_presentation_obj_7", 1),
			(position_set_y, 1, 100),
			(overlay_set_position, "$g_presentation_obj_8", 1),
			(position_set_x, 1, 775),
			(position_set_y, 1, 775),
			(overlay_set_size, "$g_presentation_obj_5", 1),
			(overlay_set_size, "$g_presentation_obj_6", 1),
			(overlay_set_size, "$g_presentation_obj_7", 1),
			(overlay_set_size, "$g_presentation_obj_8", 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 600),
			(overlay_set_position, "$g_presentation_obj_sliders_5", 1),
			(position_set_y, 1, 450),
			(overlay_set_position, "$g_presentation_obj_sliders_6", 1),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_sliders_7", 1),
			(position_set_y, 1, 150),
			(overlay_set_position, "$g_presentation_obj_sliders_8", 1),
			(position_set_x, 1, 925),
			(position_set_y, 1, 925),
			(overlay_set_size, "$g_presentation_obj_sliders_5", 1),
			(overlay_set_size, "$g_presentation_obj_sliders_6", 1),
			(overlay_set_size, "$g_presentation_obj_sliders_7", 1),
			(overlay_set_size, "$g_presentation_obj_sliders_8", 1)
		]),

		(ti_on_presentation_run,
		[]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_1"),
				(faction_set_slot, "fac_player_supporters_faction", 201, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_neither_centralize_nor_decentralized"),
				(overlay_set_text, "$g_presentation_obj_sliders_5", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_2"),
				(faction_set_slot, "fac_player_supporters_faction", 202, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_neither_aristocratic_nor_plutocratic"),
				(overlay_set_text, "$g_presentation_obj_sliders_6", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_3"),
				(faction_set_slot, "fac_player_supporters_faction", 203, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_mixture_serfs"),
				(overlay_set_text, "$g_presentation_obj_sliders_7", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_4"),
				(faction_set_slot, "fac_player_supporters_faction", 204, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_mediocre_quality"),
				(overlay_set_text, "$g_presentation_obj_sliders_8", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_10"),
				(assign, "$g_players_policy_set", 1),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("dplmc_peace_terms", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_game_button_overlay, "$g_presentation_obj_10", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_10", 1),
			(create_game_button_overlay, "$g_presentation_obj_9", "@Cancel"),
			(position_set_x, 1, 100),
			(overlay_set_position, "$g_presentation_obj_9", 1),
			(create_text_overlay, reg1, "@Dictate the peace terms", 4112),
			(position_set_x, 1, 445),
			(position_set_y, 1, 700),
			(overlay_set_position, reg1, 1),
			(position_set_y, 1, 550),
			(create_text_overlay, "$g_presentation_obj_2", "@Select the castle and the amount of money and check the boxes to activate the demand. The demands are combined if both boxes are checked."),
			(position_set_x, 1, 50),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(create_slider_overlay, "$g_presentation_obj_sliders_1", 1, 10),
			(overlay_set_val, "$g_presentation_obj_sliders_1", 1),
			(position_set_x, 1, 300),
			(position_set_y, 1, 350),
			(overlay_set_position, "$g_presentation_obj_sliders_1", 1),
			(assign, "$demanded_money", 1000),
			(assign, "$diplomacy_var", 1),
			(create_text_overlay, "$g_presentation_obj_sliders_2", "@1000 denars"),
			(position_set_x, 1, 500),
			(overlay_set_position, "$g_presentation_obj_sliders_2", 1),
			(create_check_box_overlay, "$g_presentation_obj_battle_check0", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 700),
			(overlay_set_position, "$g_presentation_obj_battle_check0", 1),
			(overlay_set_val, "$g_presentation_obj_battle_check0", 1),
			(assign, "$demanded_castle", 0),
			(assign, ":var_1", 0),
			(create_combo_button_overlay, "$g_presentation_obj_1"),
			(try_for_range, ":party", "p_castle_1", "p_village_1"),
				(party_slot_eq, ":party", slot_party_type, 2),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(eq, ":faction_of_party_party", "$g_notification_menu_var1"),
				(str_store_party_name, 2, ":party"),
				(overlay_add_item, "$g_presentation_obj_1", 2),
				(assign, "$demanded_castle", ":party"),
				(val_add, ":var_1", 1),
			(try_end),
			(assign, "$diplomacy_var2", 0),
			(position_set_x, 1, 300),
			(position_set_y, 1, 250),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(overlay_set_val, "$g_presentation_obj_1", ":var_1"),
			(create_check_box_overlay, "$g_presentation_obj_battle_check1", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 700),
			(overlay_set_position, "$g_presentation_obj_battle_check1", 1)
		]),

		(ti_on_presentation_run,
		[]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(assign, ":var_3", 0),
				(try_for_range, ":party", "p_castle_1", "p_village_1"),
					(store_faction_of_party, ":faction_of_party_party", ":party"),
					(eq, ":faction_of_party_party", "$g_notification_menu_var1"),
					(try_begin),
						(eq, ":var_3", ":trigger_param_2"),
						(assign, "$demanded_castle", ":party"),
					(try_end),
					(val_add, ":var_3", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check0"),
				(assign, "$diplomacy_var", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check1"),
				(assign, "$diplomacy_var2", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_1"),
				(store_mul, "$demanded_money", ":trigger_param_2", 1000),
				(assign, reg1, "$demanded_money"),
				(overlay_set_text, "$g_presentation_obj_sliders_2", "str_reg1_denars"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_9"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_10"),
				(presentation_set_duration, 0),
				(try_begin),
					(eq, "$diplomacy_var", 0),
					(assign, "$demanded_money", 0),
				(try_end),
				(try_begin),
					(eq, "$diplomacy_var2", 0),
					(assign, "$demanded_castle", 0),
				(try_end),
				(assign, ":value", 0),
				(try_begin),
					(gt, "$demanded_money", 0),
					(store_div, ":value", "$demanded_money", 1000),
				(try_end),
				(assign, ":var_7", "$g_notification_menu_var1"),
				(assign, ":value_2", "fac_player_supporters_faction"),
				(try_begin),
					(neg|faction_slot_eq, ":value_2", slot_faction_state, 0),
					(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
					(assign, ":value_2", "$players_kingdom"),
				(try_end),
				(assign, ":value_3", 0),
				(assign, ":value_4", 0),
				(assign, ":value_5", 100),
				(try_begin),
					(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
					(try_begin),
						(neg|party_slot_eq, "$demanded_castle", 403, 0),
						(store_current_hours, ":current_hours"),
						(party_get_slot, reg0, "$demanded_castle", 403),
						(val_sub, ":current_hours", reg0),
						(try_begin),
							(lt, ":current_hours", 744),
							(assign, ":value_3", 1),
						(else_try),
							(neg|party_slot_eq, "$demanded_castle", slot_center_original_faction, ":var_7"),
							(lt, ":current_hours", 2184),
							(assign, ":value_3", 1),
						(else_try),
							(assign, ":value_3", 0),
						(try_end),
					(else_try),
						(this_or_next|party_slot_eq, "$demanded_castle", slot_center_original_faction, "$players_kingdom"),
						(this_or_next|party_slot_eq, "$demanded_castle", slot_center_ex_faction, "$players_kingdom"),
						(party_slot_eq, "$demanded_castle", slot_center_ex_faction, "fac_player_supporters_faction"),
						(assign, ":value_3", 1),
					(else_try),
						(neg|party_slot_eq, "$demanded_castle", slot_center_original_faction, ":var_7"),
						(party_get_slot, ":demanded_castle_center_original_faction", "$demanded_castle", slot_center_original_faction),
						(is_between, ":demanded_castle_center_original_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
						(faction_slot_eq, ":demanded_castle_center_original_faction", slot_faction_state, 0),
						(store_relation, reg0, ":var_7", ":demanded_castle_center_original_faction"),
						(lt, reg0, 0),
						(assign, ":value_3", 1),
					(else_try),
						(neg|party_slot_eq, "$demanded_castle", slot_center_ex_faction, ":var_7"),
						(party_get_slot, ":demanded_castle_center_original_faction", "$demanded_castle", slot_center_ex_faction),
						(is_between, ":demanded_castle_center_original_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
						(faction_slot_eq, ":demanded_castle_center_original_faction", slot_faction_state, 0),
						(store_relation, reg0, ":var_7", ":demanded_castle_center_original_faction"),
						(lt, reg0, 0),
						(assign, ":value_3", 1),
					(else_try),
						(neg|party_slot_ge, "$demanded_castle", 7, 0),
						(assign, ":value_3", 1),
					(try_end),
					(party_slot_ge, "$demanded_castle", 7, 1),
					(party_get_slot, ":demanded_castle_town_lord", "$demanded_castle", slot_town_lord),
					(assign, ":value_6", -1),
					(assign, ":value_4", 1),
					(assign, ":var_16", 10000),
					(assign, ":var_17", 10000),
					(try_for_range, ":party_2", "p_town_1", "p_salt_mine"),
						(neq, ":party_2", "$demanded_castle"),
						(try_begin),
							(party_slot_eq, ":party_2", slot_village_bound_center, "$demanded_castle"),
							(neg|party_slot_eq, ":party_2", slot_town_lord, ":demanded_castle_town_lord"),
							(party_slot_ge, ":party_2", 7, 1),
							(party_get_slot, ":value_6", ":party_2", slot_town_lord),
						(else_try),
							(party_slot_eq, ":party_2", slot_town_lord, ":demanded_castle_town_lord"),
							(neg|party_slot_eq, ":party_2", slot_village_bound_center, "$demanded_castle"),
							(assign, ":value_4", 0),
						(try_end),
						(this_or_next|party_slot_eq, ":party_2", slot_party_type, 3),
						(this_or_next|party_slot_eq, ":party_2", slot_party_type, 2),
						(store_faction_of_party, ":faction_of_party_party_2", ":party_2"),
						(store_distance_to_party_from_party, ":distance_to_party_from_party_party_2_demanded_castle", ":party_2", "$demanded_castle"),
						(call_script, "script_dplmc_get_faction_truce_length_with_faction", ":faction_of_party_party_2", ":var_7"),
						(try_begin),
							(this_or_next|gt, reg0, 30),
							(eq, ":faction_of_party_party_2", ":var_7"),
							(val_min, ":var_16", ":distance_to_party_from_party_party_2_demanded_castle"),
						(else_try),
							(store_relation, reg0, ":faction_of_party_party_2", ":var_7"),
							(val_min, ":var_17", ":distance_to_party_from_party_party_2_demanded_castle"),
						(try_end),
					(try_end),
					(assign, ":value_5", 100),
					(try_begin),
						(this_or_next|ge, ":var_16", 10000),
						(ge, ":var_17", 10000),
					(else_try),
						(lt, ":var_16", ":var_17"),
						(gt, ":var_17", 25),
						(val_max, ":var_16", 1),
						(store_mul, ":value_5", ":var_17", 100),
						(val_div, ":value_5", ":var_16"),
						(try_begin),
							(le, ":var_17", 50),
							(val_min, ":value_5", 200),
						(try_end),
					(else_try),
						(lt, ":var_17", ":var_16"),
						(gt, ":var_16", 25),
						(val_max, ":var_17", 1),
						(store_mul, ":value_5", ":var_16", 100),
						(val_div, ":value_5", ":var_17"),
						(try_begin),
							(le, ":var_16", 50),
							(val_min, ":value_5", 200),
						(try_end),
						(val_mul, ":value_5", -1),
					(try_end),
					(neq, ":value_4", 1),
					(ge, ":value_6", 1),
					(assign, ":value_4", 1),
					(try_for_range, ":party_2", "p_town_1", "p_salt_mine"),
						(party_slot_eq, ":party_2", slot_town_lord, ":value_6"),
						(this_or_next|neg|is_between, ":party_2", "p_village_1", "p_salt_mine"),
						(neg|party_slot_eq, ":party_2", slot_village_bound_center, "$demanded_castle"),
						(assign, ":value_4", 0),
					(try_end),
				(try_end),
				(assign, ":value_7", 100),
				(assign, ":value_8", 150),
				(try_begin),
					(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
					(assign, ":var_23", 0),
					(assign, ":value_8", 0),
					(try_for_range, ":party_2", "p_castle_1", "p_village_1"),
						(try_begin),
							(eq, "$g_dplmc_terrain_advantage", 0),
							(call_script, "script_dplmc_party_calculate_strength_in_terrain", ":party_2", -2, 0, 1),
							(assign, reg0, reg1),
						(else_try),
							(call_script, "script_party_calculate_strength", ":party_2", -2, 0),
						(try_end),
						(val_max, reg0, 250),
						(val_add, ":var_23", reg0),
						(val_max, ":value_8", reg0),
						(eq, ":party_2", "$demanded_castle"),
						(assign, ":value_7", reg0),
					(try_end),
					(try_begin),
						(gt, "p_village_1", "p_castle_1"),
						(store_sub, reg0, "p_village_1", "p_castle_1"),
						(val_div, ":var_23", reg0),
					(try_end),
					(val_max, ":var_23", 300),
					(val_mul, ":value_7", 100),
					(val_mul, ":value_8", 100),
					(store_div, reg0, ":var_23", 2),
					(val_add, ":value_7", reg0),
					(val_add, ":value_8", reg0),
					(val_div, ":value_7", ":var_23"),
					(val_div, ":value_8", ":var_23"),
					(assign, reg0, ":value_7"),
					(val_max, reg0, 100),
					(val_mul, reg0, 12),
					(val_add, reg0, 50),
					(val_div, reg0, 100),
					(val_add, ":value", reg0),
					(val_sub, ":value_8", 100),
					(val_div, ":value_8", 2),
					(val_add, ":value_8", 100),
					(val_clamp, ":value_8", 110, 400),
				(try_end),
				(call_script, "script_npc_decision_checklist_peace_or_war", "$g_notification_menu_var1", ":value_2", -1),
				(assign, ":var_24", reg0),
				(assign, ":var_25", reg0),
				(val_mul, ":var_25", 2),
				(store_random_in_range, ":random_in_range_0_value", 0, ":value"),
				(val_div, ":value", -2),
				(call_script, "script_change_player_relation_with_faction", "$g_notification_menu_var1", ":value"),
				(assign, ":var_27", 0),
				(try_for_range, ":demanded_castle_center_original_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
					(faction_slot_eq, ":demanded_castle_center_original_faction", slot_faction_state, 0),
					(neq, ":demanded_castle_center_original_faction", ":var_7"),
					(neq, ":demanded_castle_center_original_faction", "fac_player_supporters_faction"),
					(neq, ":demanded_castle_center_original_faction", "$players_kingdom"),
					(call_script, "script_dplmc_get_faction_truce_length_with_faction", ":demanded_castle_center_original_faction", ":var_7"),
					(le, reg0, 30),
					(call_script, "script_dplmc_get_faction_truce_length_with_faction", ":demanded_castle_center_original_faction", "$players_kingdom"),
					(le, reg0, 30),
					(val_add, ":var_27", 1),
				(try_end),
				(game_get_reduce_campaign_ai, ":game_reduce_campaign_ai"),
				(val_clamp, ":game_reduce_campaign_ai", 0, 3),
				(try_begin),
					(lt, ":var_24", 0),
					(this_or_next|is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
					(gt, "$demanded_money", 0),
					(jump_to_menu, "mnu_dplmc_deny_terms"),
				(else_try),
					(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
					(lt, ":var_24", 2),
					(this_or_next|party_slot_eq, "$demanded_castle", slot_center_original_faction, ":var_7"),
					(this_or_next|eq, ":value_4", 1),
					(this_or_next|ge, ":value_7", ":value_8"),
					(this_or_next|eq, ":value_3", 0),
					(eq, ":var_27", 0),
					(jump_to_menu, "mnu_dplmc_deny_terms"),
				(else_try),
					(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
					(assign, reg0, 1),
					(val_sub, reg0, ":value_3"),
					(val_max, reg0, 0),
					(try_begin),
						(party_slot_eq, "$demanded_castle", slot_center_original_faction, ":var_7"),
						(val_add, reg0, 1),
					(try_end),
					(val_max, ":value_4", 0),
					(val_add, reg0, ":value_4"),
					(try_begin),
						(ge, ":value_7", ":value_8"),
						(val_add, reg0, 1),
					(try_end),
					(try_begin),
						(eq, ":var_27", 0),
						(val_add, reg0, 1),
					(try_end),
					(try_begin),
						(ge, ":value_5", 190),
						(val_add, reg0, 1),
					(try_end),
					(val_add, ":random_in_range_0_value", reg0),
					(ge, reg0, 3),
					(jump_to_menu, "mnu_dplmc_deny_terms"),
				(else_try),
					(eq, ":var_27", 0),
					(this_or_next|is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
					(gt, "$demanded_money", 0),
					(is_between, ":var_7", "fac_player_supporters_faction", "fac_kingdoms_end"),
					(assign, ":value_9", 2),
					(try_begin),
						(eq, ":game_reduce_campaign_ai", 0),
						(store_add, ":value_9", ":var_24", 1),
						(val_max, ":value_9", 4),
					(else_try),
						(eq, ":game_reduce_campaign_ai", 1),
						(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
						(store_add, ":value_9", ":var_24", 1),
						(val_max, ":value_9", 4),
					(else_try),
						(eq, ":game_reduce_campaign_ai", 2),
					(try_end),
					(lt, ":var_24", ":value_9"),
					(jump_to_menu, "mnu_dplmc_deny_terms"),
				(else_try),
					(le, ":random_in_range_0_value", ":var_25"),
					(try_begin),
						(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
						(try_begin),
							(party_slot_ge, "$demanded_castle", 7, 1),
							(party_get_slot, reg0, ":party_2", slot_town_lord),
							(call_script, "script_change_player_relation_with_troop", reg0, -1),
						(try_end),
						(try_for_range, ":party_2", "p_village_1", "p_salt_mine"),
							(party_slot_eq, ":party_2", slot_village_bound_center, "$demanded_castle"),
							(party_slot_ge, ":party_2", 7, 1),
							(party_get_slot, reg0, ":party_2", slot_town_lord),
							(call_script, "script_change_player_relation_with_troop", reg0, -1),
						(try_end),
						(call_script, "script_give_center_to_faction", "$demanded_castle", ":value_2"),
					(try_end),
					(try_begin),
						(gt, "$demanded_money", 0),
						(call_script, "script_dplmc_pay_into_treasury", "$demanded_money"),
						(faction_get_slot, ":g_notification_menu_var1_leader", "$g_notification_menu_var1", slot_faction_leader),
						(try_begin),
							(ge, ":g_notification_menu_var1_leader", 1),
							(neq, "$g_notification_menu_var1", "$players_kingdom"),
							(neq, "$g_notification_menu_var1", "fac_player_supporters_faction"),
							(ge, "$demanded_money", 1),
							(assign, ":var_31", "$demanded_money"),
							(ge, ":var_31", 1),
							(call_script, "script_dplmc_remove_gold_from_lord_and_holdings", ":var_31", ":g_notification_menu_var1_leader"),
							(store_random_in_range, reg0, 0, 1000),
							(val_add, reg0, ":var_31"),
							(val_div, reg0, 1000),
							(ge, reg0, 1),
							(val_mul, reg0, -1),
							(call_script, "script_change_player_relation_with_troop", ":g_notification_menu_var1_leader", reg0),
						(try_end),
					(try_end),
					(call_script, "script_diplomacy_start_peace_between_kingdoms", "$g_notification_menu_var1", ":value_2", 1),
					(presentation_set_duration, 0),
					(change_screen_return),
				(else_try),
					(jump_to_menu, "mnu_dplmc_deny_terms"),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_game_button_overlay, "$g_presentation_obj_10", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_10", 1),
			(create_game_button_overlay, "$g_presentation_obj_9", "@Cancel"),
			(position_set_x, 1, 100),
			(overlay_set_position, "$g_presentation_obj_9", 1),
			(create_text_overlay, reg1, "@Dictate the peace terms", 4112),
			(position_set_x, 1, 445),
			(position_set_y, 1, 700),
			(overlay_set_position, reg1, 1),
			(position_set_y, 1, 550),
			(create_text_overlay, "$g_presentation_obj_2", "@Select the castle and the amount of money and check the boxes to activate the demand. The demands are combined if both boxes are checked."),
			(position_set_x, 1, 50),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(create_slider_overlay, "$g_presentation_obj_sliders_1", 1, 10),
			(overlay_set_val, "$g_presentation_obj_sliders_1", 1),
			(position_set_x, 1, 300),
			(position_set_y, 1, 350),
			(overlay_set_position, "$g_presentation_obj_sliders_1", 1),
			(assign, "$demanded_money", 1000),
			(assign, "$diplomacy_var", 1),
			(create_text_overlay, "$g_presentation_obj_sliders_2", "@1000 denars"),
			(position_set_x, 1, 500),
			(overlay_set_position, "$g_presentation_obj_sliders_2", 1),
			(create_check_box_overlay, "$g_presentation_obj_battle_check0", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 700),
			(overlay_set_position, "$g_presentation_obj_battle_check0", 1),
			(overlay_set_val, "$g_presentation_obj_battle_check0", 1),
			(assign, "$demanded_castle", 0),
			(assign, ":var_1", 0),
			(create_combo_button_overlay, "$g_presentation_obj_1"),
			(try_for_range, ":party", "p_castle_1", "p_village_1"),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(eq, ":faction_of_party_party", "$g_notification_menu_var1"),
				(str_store_party_name, 2, ":party"),
				(overlay_add_item, "$g_presentation_obj_1", 2),
				(assign, "$demanded_castle", ":party"),
				(val_add, ":var_1", 1),
			(try_end),
			(assign, "$diplomacy_var2", 0),
			(position_set_x, 1, 300),
			(position_set_y, 1, 250),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(overlay_set_val, "$g_presentation_obj_1", ":var_1"),
			(create_check_box_overlay, "$g_presentation_obj_battle_check1", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 700),
			(overlay_set_position, "$g_presentation_obj_battle_check1", 1)
		]),

		(ti_on_presentation_run,
		[]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(assign, ":var_3", 0),
				(try_for_range, ":party", "p_castle_1", "p_village_1"),
					(store_faction_of_party, ":faction_of_party_party", ":party"),
					(eq, ":faction_of_party_party", "$g_notification_menu_var1"),
					(try_begin),
						(eq, ":var_3", ":trigger_param_2"),
						(assign, "$demanded_castle", ":party"),
					(try_end),
					(val_add, ":var_3", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check0"),
				(assign, "$diplomacy_var", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check1"),
				(assign, "$diplomacy_var2", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_1"),
				(store_mul, "$demanded_money", ":trigger_param_2", 1000),
				(assign, reg0, "$demanded_money"),
				(overlay_set_text, "$g_presentation_obj_sliders_2", "@{reg0} denars"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_9"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_10"),
				(presentation_set_duration, 0),
				(try_begin),
					(eq, "$diplomacy_var", 0),
					(assign, "$demanded_money", 0),
				(try_end),
				(try_begin),
					(eq, "$diplomacy_var2", 0),
					(assign, "$demanded_castle", 0),
				(try_end),
				(assign, ":value", 0),
				(try_begin),
					(gt, "$demanded_money", 0),
					(store_div, ":value", "$demanded_money", 1000),
				(try_end),
				(try_begin),
					(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
					(val_add, ":value", 12),
				(try_end),
				(call_script, "script_npc_decision_checklist_peace_or_war", "$g_notification_menu_var1", "fac_player_supporters_faction", -1),
				(assign, ":var_7", reg0),
				(val_mul, ":var_7", 2),
				(store_random_in_range, ":random_in_range_0_value", 0, ":value"),
				(val_div, ":value", -2),
				(call_script, "script_change_player_relation_with_faction", "$g_notification_menu_var1", ":value"),
				(try_begin),
					(le, ":random_in_range_0_value", ":var_7"),
					(try_begin),
						(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
						(call_script, "script_give_center_to_faction", "$demanded_castle", "fac_player_supporters_faction"),
					(try_end),
					(try_begin),
						(gt, "$demanded_money", 0),
						(call_script, "script_dplmc_pay_into_treasury", "$demanded_money"),
					(try_end),
					(call_script, "script_diplomacy_start_peace_between_kingdoms", "$g_notification_menu_var1", "fac_player_supporters_faction", 1),
					(presentation_set_duration, 0),
					(change_screen_return),
				(else_try),
					(jump_to_menu, "mnu_dplmc_deny_terms"),
				(try_end),
			(try_end)
		])
	]),

	("jrider_faction_relations_report", 0, mesh_message_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg1, "mesh_pic_castledes"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 180),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 795),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(create_mesh_overlay, reg1, "mesh_pic_looted_village"),
			(position_set_x, 1, 170),
			(position_set_y, 1, 170),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, -15),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@ Faction Relations Report ", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 670),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg1, 1),
			(create_game_button_overlay, reg1, "@ Return to menu "),
			(position_set_x, 1, 500),
			(position_set_y, 1, 23),
			(overlay_set_position, reg1, 1),
			(assign, "$g_jrider_faction_report_Return_to_menu", reg1),
			(assign, ":value", 250),
			(assign, ":value_2", 620),
			(position_set_y, 1, ":value_2"),
			(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(faction_slot_eq, ":faction", slot_faction_state, 0),
				(try_begin),
					(is_between, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
					(store_sub, ":value_3", ":faction", "fac_kingdom_1"),
					(val_add, ":value_3", "str_swadians"),
					(str_store_string, 1, ":value_3"),
				(else_try),
					(str_store_string, 1, "@Your kingdom"),
				(try_end),
				(str_store_string, 11, ":value_3"),
				(create_text_overlay, reg10, 1, 65540),
				(faction_get_color, ":color_faction", ":faction"),
				(overlay_set_color, reg10, ":color_faction"),
				(position_set_x, 3, 650),
				(position_set_y, 3, 800),
				(overlay_set_size, reg10, 3),
				(position_set_x, 1, ":value"),
				(overlay_set_position, reg10, 1),
				(val_add, ":value", 90),
			(try_end),
			(assign, ":value", 215),
			(assign, ":value_2", 597),
			(assign, ":var_6", 0),
			(position_set_x, ":var_6", 720),
			(position_set_y, ":var_6", 775),
			(assign, ":var_7", 50),
			(position_set_x, ":var_7", 60),
			(position_set_y, ":var_7", 28000),
			(create_text_overlay, reg2, "@Player^Relation", 16),
			(overlay_set_size, reg2, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg2, 1),
			(val_add, ":value", 45),
			(try_for_range, ":number", 0, 7),
				(create_mesh_overlay, reg1, "mesh_white_plane"),
				(overlay_set_color, reg1, 0),
				(overlay_set_size, reg1, ":var_7"),
				(store_sub, ":value_4", ":value", 15),
				(store_sub, ":value_5", ":value_2", 500),
				(position_set_x, 2, ":value_4"),
				(position_set_y, 2, ":value_5"),
				(overlay_set_position, reg1, 2),
				(val_add, ":value", 90),
				(try_begin),
					(eq, "$cheat_mode", 1),
					(assign, reg20, ":number"),
					(display_message, "@{!}DEBUG - Drawing line {reg20}"),
				(try_end),
			(try_end),
			(str_clear, 9),
			(str_clear, 8),
			(str_clear, 3),
			(str_clear, 60),
			(str_clear, 61),
			(str_clear, 0),
			(create_text_overlay, reg1, 0, 131072),
			(position_set_x, 1, 50),
			(position_set_y, 1, 70),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 860),
			(position_set_y, 1, 527),
			(overlay_set_area_size, reg1, 1),
			(set_container_overlay, reg1),
			(assign, ":value_6", 0),
			(assign, ":value_2", 0),
			(assign, ":var_12", 0),
			(try_for_range_backwards, ":var_13", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(faction_slot_eq, ":var_13", slot_faction_state, 0),
				(assign, ":var_14", 220),
				(try_for_range, ":faction_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
					(faction_slot_eq, ":faction_2", slot_faction_state, 0),
					(try_begin),
						(neq, ":faction_2", ":var_13"),
						(str_store_faction_name, 8, ":faction_2"),
						(try_begin),
							(neq, ":faction_2", ":var_13"),
							(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_13", ":faction_2"),
							(assign, ":var_16", reg0),
							(assign, ":var_17", reg1),
							(try_begin),
								(eq, ":var_16", -2),
								(str_store_string, 60, "@War"),
								(assign, reg60, 14483456),
								(assign, reg59, 0),
							(else_try),
								(eq, ":var_16", -1),
								(str_store_string, 60, "@Casus Belli"),
								(assign, reg60, 14516224),
								(assign, reg59, ":var_17"),
							(else_try),
								(eq, ":var_16", 0),
								(str_store_string, 60, "@Peace"),
								(assign, reg60, 16777215),
								(assign, reg59, 0),
							(else_try),
								(eq, ":var_16", 1),
								(str_store_string, 60, "@Truce"),
								(assign, reg60, 14540253),
								(assign, reg59, ":var_17"),
								(try_begin),
									(ge, ":var_17", 61),
									(str_store_string, 60, "@Alliance"),
									(assign, reg60, 65280),
									(store_sub, reg59, ":var_17", 60),
								(else_try),
									(ge, ":var_17", 41),
									(str_store_string, 60, "@Defense"),
									(assign, reg60, 65450),
									(store_sub, reg59, ":var_17", 40),
								(else_try),
									(ge, ":var_17", 21),
									(str_store_string, 60, "@Trade"),
									(assign, reg60, 65484),
									(store_sub, reg59, ":var_17", 20),
								(try_end),
							(try_end),
							(val_add, ":value", 50),
							(create_text_overlay, reg10, 60, 65540),
							(overlay_set_size, reg10, ":value_6"),
							(overlay_set_color, reg10, reg60),
							(store_sub, ":value_4", ":var_14", 20),
							(store_add, ":value_7", ":value_2", 54),
							(position_set_x, 3, ":value_4"),
							(position_set_y, 3, ":value_7"),
							(overlay_set_position, reg10, 3),
							(create_text_overlay, reg10, "@{reg59?{reg59} days:}", 16),
							(overlay_set_size, reg10, ":value_6"),
							(store_add, ":value_7", ":value_2", 36),
							(store_add, ":value_4", ":var_14", 10),
							(position_set_x, 3, ":value_4"),
							(position_set_y, 3, ":value_7"),
							(overlay_set_position, reg10, 3),
							(store_relation, ":relation_var_13_faction_2", ":var_13", ":faction_2"),
							(assign, reg61, ":relation_var_13_faction_2"),
							(create_text_overlay, reg10, "@{reg61}", 16),
							(overlay_set_size, reg10, ":value_6"),
							(store_add, ":value_7", ":value_2", 18),
							(store_add, ":value_4", ":var_14", 10),
							(position_set_x, 3, ":value_4"),
							(position_set_y, 3, ":value_7"),
							(overlay_set_position, reg10, 3),
						(try_end),
					(try_end),
					(val_add, ":var_14", 90),
				(try_end),
				(assign, ":value", 165),
				(val_add, ":value_2", 54),
				(create_mesh_overlay, reg1, "mesh_white_plane"),
				(overlay_set_color, reg1, 0),
				(position_set_x, 1, 42000),
				(position_set_y, 1, 60),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 17),
				(store_add, ":value_7", ":value_2", 20),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(str_store_faction_name, 9, ":var_13"),
				(str_store_string, 1, "@{s9}"),
				(create_text_overlay, reg10, 1, 65540),
				(faction_get_color, ":color_faction", ":var_13"),
				(overlay_set_color, reg10, ":color_faction"),
				(position_set_x, 3, 750),
				(position_set_y, 3, 850),
				(overlay_set_size, reg10, 3),
				(position_set_x, 3, 10),
				(position_set_y, 3, ":value_2"),
				(overlay_set_position, reg10, 3),
				(assign, ":value", 165),
				(assign, ":value_6", 0),
				(position_set_x, ":value_6", 700),
				(position_set_y, ":value_6", 800),
				(store_relation, reg1, "fac_player_supporters_faction", ":var_13"),
				(try_begin),
					(ge, reg1, 90),
					(str_store_string, 3, "@Loyal"),
				(else_try),
					(ge, reg1, 80),
					(str_store_string, 3, "@Devoted"),
				(else_try),
					(ge, reg1, 70),
					(str_store_string, 3, "@Fond"),
				(else_try),
					(ge, reg1, 60),
					(str_store_string, 3, "@Gracious"),
				(else_try),
					(ge, reg1, 50),
					(str_store_string, 3, "@Friendly"),
				(else_try),
					(ge, reg1, 40),
					(str_store_string, 3, "@Supportive"),
				(else_try),
					(ge, reg1, 30),
					(str_store_string, 3, "@Favorable"),
				(else_try),
					(ge, reg1, 20),
					(str_store_string, 3, "@Cooperative"),
				(else_try),
					(ge, reg1, 10),
					(str_store_string, 3, "@Accepting"),
				(else_try),
					(ge, reg1, 0),
					(str_store_string, 3, "@Indifferent"),
				(else_try),
					(ge, reg1, -10),
					(str_store_string, 3, "@Suspicious"),
				(else_try),
					(ge, reg1, -20),
					(str_store_string, 3, "@Grumbling"),
				(else_try),
					(ge, reg1, -30),
					(str_store_string, 3, "@Hostile"),
				(else_try),
					(ge, reg1, -40),
					(str_store_string, 3, "@Resentful"),
				(else_try),
					(ge, reg1, -50),
					(str_store_string, 3, "@Angry"),
				(else_try),
					(ge, reg1, -60),
					(str_store_string, 3, "@Hateful"),
				(else_try),
					(ge, reg1, -70),
					(str_store_string, 3, "@Revengeful"),
				(else_try),
					(str_store_string, 3, "@Vengeful"),
				(try_end),
				(create_text_overlay, reg10, "@{reg1}", 8),
				(overlay_set_size, reg10, ":value_6"),
				(store_add, ":value_4", ":value", 20),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, ":var_12"),
				(create_text_overlay, reg10, "@{s3}", 8),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, ":value_4"),
				(store_sub, ":value_7", ":value_2", 20),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, ":var_12"),
				(try_begin),
					(neq, ":var_13", "fac_player_supporters_faction"),
					(store_sub, ":value_8", ":var_13", "fac_player_supporters_faction"),
					(val_add, ":value_8", "mesh_pic_recruits"),
					(create_mesh_overlay, reg10, ":value_8"),
					(position_set_x, 1, 75),
					(position_set_y, 1, 75),
					(overlay_set_size, reg10, 1),
					(position_set_x, 1, 165),
					(store_sub, ":value_7", ":value_2", 37),
					(position_set_y, 1, ":value_7"),
					(overlay_set_position, reg10, 1),
				(try_end),
				(assign, ":var_21", 0),
				(assign, ":var_22", 0),
				(assign, ":var_23", 0),
				(assign, ":var_24", 0),
				(try_for_parties, ":var_25"),
					(store_faction_of_party, ":faction_of_party_var_25", ":var_25"),
					(eq, ":faction_of_party_var_25", ":var_13"),
					(try_begin),
						(party_slot_eq, ":var_25", slot_party_type, 13),
						(val_add, ":var_21", 1),
					(else_try),
						(party_slot_eq, ":var_25", slot_party_type, 11),
						(val_add, ":var_22", 1),
					(else_try),
						(this_or_next|party_slot_eq, ":var_25", slot_party_type, 3),
						(this_or_next|party_slot_eq, ":var_25", slot_party_type, 2),
						(party_slot_eq, ":var_25", slot_party_type, 4),
						(val_add, ":var_23", 1),
						(try_begin),
							(party_slot_eq, ":var_25", slot_town_lord, -1),
							(val_add, ":var_24", 1),
						(try_end),
					(try_end),
				(try_end),
				(assign, ":var_27", 0),
				(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
					(troop_slot_eq, ":troop", slot_troop_occupation, 2),
					(troop_slot_ge, ":troop", 8, 0),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(eq, ":faction_of_troop_troop", ":var_13"),
					(val_add, ":var_27", 1),
				(try_end),
				(assign, reg61, ":var_23"),
				(assign, reg58, ":var_24"),
				(create_text_overlay, reg10, "@{reg61} {reg58?({reg58} U) :}Centers", 4),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, 15),
				(store_sub, ":value_7", ":value_2", 17),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, 0),
				(assign, reg62, ":var_22"),
				(create_text_overlay, reg10, "@{reg62} Caravans", 4),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, 15),
				(val_sub, ":value_7", 17),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, 0),
				(assign, reg60, ":var_21"),
				(assign, reg59, ":var_27"),
				(create_text_overlay, reg10, "@{reg60} {reg59?({reg59} P) :}Lords", 4),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, 15),
				(val_sub, ":value_7", 17),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, 0),
				(val_add, ":value_2", 18),
			(try_end),
			(set_container_overlay, -1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_jrider_faction_report_Return_to_menu"),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 225),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_reports"),
			(try_end)
		]),

		(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg1, "mesh_pic_castledes"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 180),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 795),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(create_mesh_overlay, reg1, "mesh_pic_looted_village"),
			(position_set_x, 1, 170),
			(position_set_y, 1, 170),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, -15),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@ Sovereignty Relations Report ", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 670),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg1, 1),
			(create_game_button_overlay, reg1, "@ Return to menu "),
			(position_set_x, 1, 500),
			(position_set_y, 1, 23),
			(overlay_set_position, reg1, 1),
			(assign, "$g_jrider_faction_report_Return_to_menu", reg1),
			(assign, ":value", 250),
			(assign, ":value_2", 620),
			(position_set_y, 1, ":value_2"),
			(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(faction_slot_eq, ":faction", slot_faction_state, 0),
				(try_begin),
					(is_between, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
					(store_sub, ":value_3", ":faction", "fac_kingdom_1"),
					(val_add, ":value_3", "str_swadians"),
					(str_store_string, 1, ":value_3"),
				(else_try),
					(str_store_string, 1, "@Your sovereignty"),
				(try_end),
				(str_store_string, 11, ":value_3"),
				(create_text_overlay, reg10, 1, 65540),
				(faction_get_color, ":color_faction", ":faction"),
				(overlay_set_color, reg10, ":color_faction"),
				(position_set_x, 3, 650),
				(position_set_y, 3, 800),
				(overlay_set_size, reg10, 3),
				(position_set_x, 1, ":value"),
				(overlay_set_position, reg10, 1),
				(val_add, ":value", 90),
			(try_end),
			(assign, ":value", 215),
			(assign, ":value_2", 597),
			(assign, ":var_6", 0),
			(position_set_x, ":var_6", 720),
			(position_set_y, ":var_6", 775),
			(assign, ":var_7", 50),
			(position_set_x, ":var_7", 60),
			(position_set_y, ":var_7", 28000),
			(create_text_overlay, reg2, "@Player^Relation", 16),
			(overlay_set_size, reg2, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg2, 1),
			(val_add, ":value", 45),
			(try_for_range, ":number", 0, 7),
				(create_mesh_overlay, reg1, "mesh_white_plane"),
				(overlay_set_color, reg1, 0),
				(overlay_set_size, reg1, ":var_7"),
				(store_sub, ":value_4", ":value", 15),
				(store_sub, ":value_5", ":value_2", 500),
				(position_set_x, 2, ":value_4"),
				(position_set_y, 2, ":value_5"),
				(overlay_set_position, reg1, 2),
				(val_add, ":value", 90),
				(try_begin),
					(eq, "$cheat_mode", 1),
					(assign, reg20, ":number"),
					(display_message, "@{!}DEBUG - Drawing line {reg20}"),
				(try_end),
			(try_end),
			(str_clear, 9),
			(str_clear, 8),
			(str_clear, 3),
			(str_clear, 60),
			(str_clear, 61),
			(str_clear, 0),
			(create_text_overlay, reg1, 0, 131072),
			(position_set_x, 1, 50),
			(position_set_y, 1, 70),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 860),
			(position_set_y, 1, 527),
			(overlay_set_area_size, reg1, 1),
			(set_container_overlay, reg1),
			(assign, ":value_6", 0),
			(assign, ":value_2", 0),
			(assign, ":var_12", 0),
			(try_for_range_backwards, ":var_13", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(faction_slot_eq, ":var_13", slot_faction_state, 0),
				(assign, ":var_14", 220),
				(try_for_range, ":faction_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
					(faction_slot_eq, ":faction_2", slot_faction_state, 0),
					(try_begin),
						(neq, ":faction_2", ":var_13"),
						(str_store_faction_name, 8, ":faction_2"),
						(try_begin),
							(neq, ":faction_2", ":var_13"),
							(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_13", ":faction_2"),
							(assign, ":var_16", reg0),
							(assign, ":var_17", reg1),
							(try_begin),
								(eq, ":var_16", -2),
								(str_store_string, 60, "@War"),
								(assign, reg60, 14483456),
								(assign, reg59, 0),
							(else_try),
								(eq, ":var_16", -1),
								(str_store_string, 60, "@Casus Belli"),
								(assign, reg60, 14516224),
								(assign, reg59, ":var_17"),
							(else_try),
								(eq, ":var_16", 0),
								(str_store_string, 60, "@Peace"),
								(assign, reg60, 16777215),
								(assign, reg59, 0),
							(else_try),
								(eq, ":var_16", 1),
								(str_store_string, 60, "@Truce"),
								(assign, reg60, 14540253),
								(assign, reg59, ":var_17"),
								(try_begin),
									(ge, ":var_17", 61),
									(str_store_string, 60, "@Alliance"),
									(assign, reg60, 65280),
									(store_sub, reg59, ":var_17", 60),
								(else_try),
									(ge, ":var_17", 41),
									(str_store_string, 60, "@Defense"),
									(assign, reg60, 65450),
									(store_sub, reg59, ":var_17", 40),
								(else_try),
									(ge, ":var_17", 21),
									(str_store_string, 60, "@Trade"),
									(assign, reg60, 65484),
									(store_sub, reg59, ":var_17", 20),
								(try_end),
							(try_end),
							(val_add, ":value", 50),
							(create_text_overlay, reg10, 60, 65540),
							(overlay_set_size, reg10, ":value_6"),
							(overlay_set_color, reg10, reg60),
							(store_sub, ":value_4", ":var_14", 20),
							(store_add, ":value_7", ":value_2", 54),
							(position_set_x, 3, ":value_4"),
							(position_set_y, 3, ":value_7"),
							(overlay_set_position, reg10, 3),
							(create_text_overlay, reg10, "@{reg59?{reg59} days:}", 16),
							(overlay_set_size, reg10, ":value_6"),
							(store_add, ":value_7", ":value_2", 36),
							(store_add, ":value_4", ":var_14", 10),
							(position_set_x, 3, ":value_4"),
							(position_set_y, 3, ":value_7"),
							(overlay_set_position, reg10, 3),
							(store_relation, ":relation_var_13_faction_2", ":var_13", ":faction_2"),
							(assign, reg61, ":relation_var_13_faction_2"),
							(create_text_overlay, reg10, "@{reg61}", 16),
							(overlay_set_size, reg10, ":value_6"),
							(store_add, ":value_7", ":value_2", 18),
							(store_add, ":value_4", ":var_14", 10),
							(position_set_x, 3, ":value_4"),
							(position_set_y, 3, ":value_7"),
							(overlay_set_position, reg10, 3),
						(try_end),
					(try_end),
					(val_add, ":var_14", 90),
				(try_end),
				(assign, ":value", 165),
				(val_add, ":value_2", 54),
				(create_mesh_overlay, reg1, "mesh_white_plane"),
				(overlay_set_color, reg1, 0),
				(position_set_x, 1, 42000),
				(position_set_y, 1, 60),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 17),
				(store_add, ":value_7", ":value_2", 20),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(str_store_faction_name, 9, ":var_13"),
				(str_store_string, 1, "@{s9}"),
				(create_text_overlay, reg10, 1, 65540),
				(faction_get_color, ":color_faction", ":var_13"),
				(overlay_set_color, reg10, ":color_faction"),
				(position_set_x, 3, 750),
				(position_set_y, 3, 850),
				(overlay_set_size, reg10, 3),
				(position_set_x, 3, 10),
				(position_set_y, 3, ":value_2"),
				(overlay_set_position, reg10, 3),
				(assign, ":value", 165),
				(assign, ":value_6", 0),
				(position_set_x, ":value_6", 700),
				(position_set_y, ":value_6", 800),
				(store_relation, reg1, "fac_player_supporters_faction", ":var_13"),
				(try_begin),
					(ge, reg1, 90),
					(str_store_string, 3, "@Loyal"),
				(else_try),
					(ge, reg1, 80),
					(str_store_string, 3, "@Devoted"),
				(else_try),
					(ge, reg1, 70),
					(str_store_string, 3, "@Fond"),
				(else_try),
					(ge, reg1, 60),
					(str_store_string, 3, "@Gracious"),
				(else_try),
					(ge, reg1, 50),
					(str_store_string, 3, "@Friendly"),
				(else_try),
					(ge, reg1, 40),
					(str_store_string, 3, "@Supportive"),
				(else_try),
					(ge, reg1, 30),
					(str_store_string, 3, "@Favorable"),
				(else_try),
					(ge, reg1, 20),
					(str_store_string, 3, "@Cooperative"),
				(else_try),
					(ge, reg1, 10),
					(str_store_string, 3, "@Accepting"),
				(else_try),
					(ge, reg1, 0),
					(str_store_string, 3, "@Indifferent"),
				(else_try),
					(ge, reg1, -10),
					(str_store_string, 3, "@Suspicious"),
				(else_try),
					(ge, reg1, -20),
					(str_store_string, 3, "@Grumbling"),
				(else_try),
					(ge, reg1, -30),
					(str_store_string, 3, "@Hostile"),
				(else_try),
					(ge, reg1, -40),
					(str_store_string, 3, "@Resentful"),
				(else_try),
					(ge, reg1, -50),
					(str_store_string, 3, "@Angry"),
				(else_try),
					(ge, reg1, -60),
					(str_store_string, 3, "@Hateful"),
				(else_try),
					(ge, reg1, -70),
					(str_store_string, 3, "@Revengeful"),
				(else_try),
					(str_store_string, 3, "@Vengeful"),
				(try_end),
				(create_text_overlay, reg10, "@{reg1}", 8),
				(overlay_set_size, reg10, ":value_6"),
				(store_add, ":value_4", ":value", 20),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, ":var_12"),
				(create_text_overlay, reg10, "@{s3}", 8),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, ":value_4"),
				(store_sub, ":value_7", ":value_2", 20),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, ":var_12"),
				(try_begin),
					(neq, ":var_13", "fac_player_supporters_faction"),
					(store_sub, ":value_8", ":var_13", "fac_player_supporters_faction"),
					(val_add, ":value_8", "mesh_pic_recruits"),
					(create_mesh_overlay, reg10, ":value_8"),
					(position_set_x, 1, 75),
					(position_set_y, 1, 75),
					(overlay_set_size, reg10, 1),
					(position_set_x, 1, 165),
					(store_sub, ":value_7", ":value_2", 37),
					(position_set_y, 1, ":value_7"),
					(overlay_set_position, reg10, 1),
				(try_end),
				(assign, ":var_21", 0),
				(assign, ":var_22", 0),
				(assign, ":var_23", 0),
				(assign, ":var_24", 0),
				(try_for_parties, ":var_25"),
					(store_faction_of_party, ":faction_of_party_var_25", ":var_25"),
					(eq, ":faction_of_party_var_25", ":var_13"),
					(try_begin),
						(party_slot_eq, ":var_25", slot_party_type, 13),
						(val_add, ":var_21", 1),
					(else_try),
						(party_slot_eq, ":var_25", slot_party_type, 11),
						(val_add, ":var_22", 1),
					(else_try),
						(this_or_next|party_slot_eq, ":var_25", slot_party_type, 3),
						(this_or_next|party_slot_eq, ":var_25", slot_party_type, 2),
						(party_slot_eq, ":var_25", slot_party_type, 4),
						(val_add, ":var_23", 1),
						(try_begin),
							(party_slot_eq, ":var_25", slot_town_lord, -1),
							(val_add, ":var_24", 1),
						(try_end),
					(try_end),
				(try_end),
				(assign, ":var_27", 0),
				(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
					(troop_slot_eq, ":troop", slot_troop_occupation, 2),
					(troop_slot_ge, ":troop", 8, 0),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(eq, ":faction_of_troop_troop", ":var_13"),
					(val_add, ":var_27", 1),
				(try_end),
				(assign, reg61, ":var_23"),
				(assign, reg58, ":var_24"),
				(create_text_overlay, reg10, "@{reg61} {reg58?({reg58} U) :}Centers", 4),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, 15),
				(store_sub, ":value_7", ":value_2", 17),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, 0),
				(assign, reg62, ":var_22"),
				(create_text_overlay, reg10, "@{reg62} Caravans", 4),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, 15),
				(val_sub, ":value_7", 17),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, 0),
				(assign, reg60, ":var_21"),
				(assign, reg59, ":var_27"),
				(create_text_overlay, reg10, "@{reg60} {reg59?({reg59} P) :}Lords", 4),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, 15),
				(val_sub, ":value_7", 17),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, 0),
				(val_add, ":value_2", 18),
			(try_end),
			(set_container_overlay, -1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_jrider_faction_report_Return_to_menu"),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 225),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_reports"),
			(try_end)
		])
	]),

	("auto_sell_options", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg0, "@Sell items automaticly when leaving:", 4096),
			(position_set_x, 1, 150),
			(position_set_y, 1, 660),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_1", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 600),
			(position_set_y, 1, 652),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(overlay_set_val, "$g_presentation_obj_1", "$g_sell_items_when_leaving"),
			(create_text_overlay, reg0, "@Price limit for auto-sell:", 4096),
			(position_set_x, 1, 150),
			(position_set_y, 1, 610),
			(overlay_set_position, reg0, 1),
			(create_number_box_overlay, "$g_presentation_obj_2", 10, 10000),
			(position_set_x, 1, 600),
			(position_set_y, 1, 596),
			(overlay_set_val, "$g_presentation_obj_2", "$g_auto_sell_price_limit"),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(create_game_button_overlay, "$g_presentation_obj_3", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(create_text_overlay, reg0, "@Item types for auto-sell:", 4096),
			(position_set_x, 1, 150),
			(position_set_y, 1, 578),
			(overlay_set_position, reg0, 1),
			(create_image_button_overlay, "$g_presentation_obj_5", "mesh_drop_button_child", "mesh_drop_button_child_down"),
			(position_set_x, 1, 160),
			(position_set_y, 1, 528),
			(overlay_set_position, "$g_presentation_obj_5", 1),
			(create_text_overlay, reg1, "@Select all", 4112),
			(position_set_x, 1, 265),
			(position_set_y, 1, 538),
			(overlay_set_position, reg1, 1),
			(create_image_button_overlay, "$g_presentation_obj_6", "mesh_drop_button_child", "mesh_drop_button_child_down"),
			(position_set_x, 1, 385),
			(position_set_y, 1, 528),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(create_text_overlay, reg1, "@Select invert", 4112),
			(position_set_x, 1, 490),
			(position_set_y, 1, 538),
			(overlay_set_position, reg1, 1),
			(assign, ":value", 160),
			(assign, ":var_2", 500),
			(try_for_range, ":number", 0, 20),
				(store_add, ":value_2", 1, ":number"),
				(neq, ":value_2", 11),
				(neq, ":value_2", 19),
				(neq, ":value_2", 20),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(create_mesh_overlay, reg1, "mesh_drop_button_child"),
				(overlay_set_position, reg1, 1),
				(store_add, ":value_3", ":value", 120),
				(store_add, ":value_4", ":var_2", 10),
				(position_set_x, 1, ":value_3"),
				(position_set_y, 1, ":value_4"),
				(store_add, ":value_5", "str_hero_wpn_slot_horse", ":number"),
				(str_store_string, 1, ":value_5"),
				(create_text_overlay, reg1, "@{s1}", 4112),
				(overlay_set_position, reg1, 1),
				(store_add, ":value_6", ":value", 0),
				(store_add, ":value_7", ":var_2", 4),
				(position_set_x, 1, ":value_6"),
				(position_set_y, 1, ":value_7"),
				(create_check_box_overlay, reg1, "mesh_checkbox_off", "mesh_checkbox_on"),
				(overlay_set_position, reg1, 1),
				(store_add, ":value_8", 1, ":number"),
				(item_get_slot, ":value_8_71", ":value_8", 71),
				(store_sub, ":value_8_71", 1, ":value_8_71"),
				(overlay_set_val, reg1, ":value_8_71"),
				(troop_set_slot, "trp_temp_array_b", ":number", reg1),
				(val_add, ":value", 225),
				(try_begin),
					(eq, ":value", 835),
					(assign, ":value", 160),
					(val_sub, ":var_2", 28),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(assign, "$g_sell_items_when_leaving", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_2"),
				(assign, "$g_auto_sell_price_limit", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_3"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_5"),
				(try_for_range, ":number", 0, 20),
					(store_add, ":value", 1, ":number"),
					(neq, ":value", 11),
					(neq, ":value", 19),
					(neq, ":value", 20),
					(item_set_slot, ":value", 71, 0),
					(troop_get_slot, ":temp_array_b_number", "trp_temp_array_b", ":number"),
					(overlay_set_val, ":temp_array_b_number", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_6"),
				(try_for_range, ":number", 0, 20),
					(store_add, ":value", 1, ":number"),
					(neq, ":value", 11),
					(neq, ":value", 19),
					(neq, ":value", 20),
					(item_get_slot, ":value_71", ":value", 71),
					(val_add, ":value_71", 1),
					(val_mod, ":value_71", 2),
					(item_set_slot, ":value", 71, ":value_71"),
					(troop_get_slot, ":temp_array_b_number", "trp_temp_array_b", ":number"),
					(store_sub, ":value_2", 1, ":value_71"),
					(overlay_set_val, ":temp_array_b_number", ":value_2"),
				(try_end),
			(try_end),
			(try_for_range, ":number_2", 0, 20),
				(troop_slot_eq, "trp_temp_array_b", ":number_2", ":trigger_param_1"),
				(store_add, ":value_3", 1, ":number_2"),
				(store_sub, ":value_71", 1, ":trigger_param_2"),
				(item_set_slot, ":value_3", 71, ":value_71"),
			(try_end)
		])
	]),

	("mini_map", prsntf_read_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(position_set_x, 1, 1200),
			(position_set_y, 1, 800),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(eq, "$g_show_minimap", 1),
				(val_clamp, "$g_minimap_ratio", 60, 111),
				(try_for_agents, ":value"),
					(agent_set_slot, ":value", slot_agent_map_overlay_id, 0),
				(try_end),
				(get_scene_boundaries, 2, 3),
				(position_transform_position_to_local, 4, 2, 3),
				(set_fixed_point_multiplier, 1000),
				(position_get_x, ":position_x_4", 4),
				(position_get_y, ":position_y_4", 4),
				(set_fixed_point_multiplier, 1000),
				(store_div, ":value_2", ":position_y_4", 100),
				(store_div, ":value_2", ":position_x_4", ":value_2"),
				(try_begin),
					(gt, ":value_2", 100),
					(store_mul, ":value_3", "$g_minimap_ratio", 3),
					(assign, "$g_battle_map_width", ":value_3"),
					(store_div, "$g_battle_map_scale", ":position_x_4", "$g_battle_map_width"),
					(store_div, "$g_battle_map_height", ":position_y_4", "$g_battle_map_scale"),
				(else_try),
					(store_mul, ":value_3", "$g_minimap_ratio", 3),
					(assign, "$g_battle_map_height", ":value_3"),
					(store_div, "$g_battle_map_scale", ":position_y_4", "$g_battle_map_height"),
					(store_div, "$g_battle_map_width", ":position_x_4", "$g_battle_map_scale"),
				(try_end),
				(create_mesh_overlay, "$g_battle_map_plane", "mesh_white_plane"),
				(overlay_set_color, "$g_battle_map_plane", 0),
				(store_add, ":value_4", "$g_battle_map_width", 20),
				(store_add, ":value_5", "$g_battle_map_height", 20),
				(store_mul, ":value_6", ":value_4", 50),
				(store_mul, ":value_7", ":value_5", 50),
				(position_set_x, 1, ":value_6"),
				(position_set_y, 1, ":value_7"),
				(overlay_set_size, "$g_battle_map_plane", 1),
				(store_sub, ":value_8", 990, ":value_4"),
				(store_sub, ":value_9", 740, ":value_5"),
				(position_set_x, 1, ":value_8"),
				(position_set_y, 1, ":value_9"),
				(overlay_set_position, "$g_battle_map_plane", 1),
				(overlay_set_alpha, "$g_battle_map_plane", 34),
				(try_begin),
					(scene_prop_get_instance, ":scene_prop_instance_inventory_0", "spr_inventory", 0),
					(ge, ":scene_prop_instance_inventory_0", 0),
					(create_mesh_overlay, "$g_presentation_obj_39", "mesh_white_plane"),
					(overlay_set_color, "$g_presentation_obj_39", 16711935),
					(position_set_x, 1, 250),
					(position_set_y, 1, 250),
					(overlay_set_size, "$g_presentation_obj_39", 1),
				(try_end),
				(call_script, "script_update_order_panel_map"),
			(try_end),
			(try_for_agents, ":value"),
				(agent_set_slot, ":value", 51, 0),
				(agent_set_slot, ":value", 52, 0),
			(try_end),
			(call_script, "script_update_agent_hp_bar"),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(game_key_clicked, 22),
				(neg|main_hero_fallen),
				(presentation_set_duration, 0),
				(start_presentation, "prsnt_battle"),
			(try_end)
		])
	]),

	("upgrade_tree_1", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_swadian"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_swadian_r_peasant", 60, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_swadian_r_peasant", 210, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_swadian_r_peasant", 360, 420),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_swadian_r_peasant", 360, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_swadian_r_peasant", 500, 460),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_swadian_r_peasant", 500, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_swadian_r_peasant", 500, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_swadian_r_peasant", 640, 460),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_swadian_r_peasant", 640, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_swadian_r_peasant", 640, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 115, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 265, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 415, 475),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 415, 355),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 545, 515),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 545, 435),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 545, 355),
			(call_script, "script_prsnt_lines", 110, 4, 85, 380),
			(call_script, "script_prsnt_lines", 55, 4, 235, 380),
			(call_script, "script_prsnt_lines", 55, 4, 290, 460),
			(call_script, "script_prsnt_lines", 55, 4, 290, 340),
			(call_script, "script_prsnt_lines", 55, 4, 385, 460),
			(call_script, "script_prsnt_lines", 50, 4, 440, 500),
			(call_script, "script_prsnt_lines", 50, 4, 440, 420),
			(call_script, "script_prsnt_lines", 105, 4, 385, 340),
			(call_script, "script_prsnt_lines", 110, 4, 520, 500),
			(call_script, "script_prsnt_lines", 110, 4, 520, 420),
			(call_script, "script_prsnt_lines", 110, 4, 520, 340),
			(call_script, "script_prsnt_lines", 4, 120, 290, 340),
			(call_script, "script_prsnt_lines", 4, 80, 440, 420)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 10),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_1"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_2", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_vaegir"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_vaegir_n_kholop", 60, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_vaegir_n_kholop", 210, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_vaegir_n_kholop", 360, 420),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_vaegir_n_kholop", 360, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_vaegir_n_kholop", 500, 460),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_vaegir_n_kholop", 500, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_vaegir_n_kholop", 500, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_vaegir_n_kholop", 640, 460),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_vaegir_n_kholop", 640, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_vaegir_n_kholop", 640, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 115, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 265, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 415, 475),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 415, 355),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 545, 515),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 545, 435),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 545, 355),
			(call_script, "script_prsnt_lines", 110, 4, 85, 380),
			(call_script, "script_prsnt_lines", 55, 4, 235, 380),
			(call_script, "script_prsnt_lines", 55, 4, 290, 460),
			(call_script, "script_prsnt_lines", 55, 4, 290, 340),
			(call_script, "script_prsnt_lines", 55, 4, 385, 460),
			(call_script, "script_prsnt_lines", 50, 4, 440, 500),
			(call_script, "script_prsnt_lines", 50, 4, 440, 420),
			(call_script, "script_prsnt_lines", 105, 4, 385, 340),
			(call_script, "script_prsnt_lines", 110, 4, 520, 500),
			(call_script, "script_prsnt_lines", 110, 4, 520, 420),
			(call_script, "script_prsnt_lines", 110, 4, 520, 340),
			(call_script, "script_prsnt_lines", 4, 120, 290, 340),
			(call_script, "script_prsnt_lines", 4, 80, 440, 420)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 10),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_2"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_3", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_khergit"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_khergit_n_tariachin", 60, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_khergit_n_tariachin", 210, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_khergit_n_tariachin", 360, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_khergit_n_tariachin", 500, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_khergit_n_tariachin", 500, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_khergit_n_tariachin", 640, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_n_tariachin", 115, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_n_tariachin", 265, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_n_tariachin", 420, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_n_tariachin", 550, 355),
			(call_script, "script_prsnt_lines", 110, 4, 85, 380),
			(call_script, "script_prsnt_lines", 110, 4, 235, 380),
			(call_script, "script_prsnt_lines", 50, 4, 390, 380),
			(call_script, "script_prsnt_lines", 50, 4, 440, 420),
			(call_script, "script_prsnt_lines", 50, 4, 440, 340),
			(call_script, "script_prsnt_lines", 110, 4, 520, 340),
			(call_script, "script_prsnt_lines", 4, 80, 440, 340)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 6),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_3"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_4", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_nord"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_nord_n_bondi", 60, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_nord_n_bondi", 210, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_nord_n_bondi", 210, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_nord_n_bondi", 360, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_nord_n_bondi", 360, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_nord_n_bondi", 500, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_nord_n_bondi", 500, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_nord_n_bondi", 640, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_nord_n_bondi", 790, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 115, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 265, 435),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 265, 355),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 420, 435),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 420, 355),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 550, 435),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 695, 435),
			(call_script, "script_prsnt_lines", 55, 4, 85, 380),
			(call_script, "script_prsnt_lines", 55, 4, 140, 420),
			(call_script, "script_prsnt_lines", 55, 4, 140, 340),
			(call_script, "script_prsnt_lines", 110, 4, 235, 420),
			(call_script, "script_prsnt_lines", 110, 4, 235, 340),
			(call_script, "script_prsnt_lines", 100, 4, 390, 420),
			(call_script, "script_prsnt_lines", 100, 4, 390, 340),
			(call_script, "script_prsnt_lines", 110, 4, 520, 420),
			(call_script, "script_prsnt_lines", 110, 4, 665, 420),
			(call_script, "script_prsnt_lines", 4, 80, 140, 340)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 9),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_4"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_5", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_rhodok"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_rhodok_n_cittadino", 60, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_rhodok_n_novizio", 210, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_rhodok_n_recluta_balestriere", 210, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_rhodok_n_milizia", 360, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_rhodok_n_milizia_balestriere", 360, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_rhodok_n_fante", 500, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_rhodok_n_balestriere", 500, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_rhodok_n_veterano", 640, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_rhodok_n_balestriere_veterano", 640, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_n_cittadino", 115, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_n_novizio", 265, 435),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_n_recluta_balestriere", 265, 355),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_n_milizia", 420, 435),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_n_milizia_balestriere", 420, 355),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_n_fante", 550, 435),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_n_balestriere", 550, 355),
			(call_script, "script_prsnt_lines", 55, 4, 85, 380),
			(call_script, "script_prsnt_lines", 55, 4, 140, 420),
			(call_script, "script_prsnt_lines", 55, 4, 140, 340),
			(call_script, "script_prsnt_lines", 110, 4, 235, 420),
			(call_script, "script_prsnt_lines", 110, 4, 235, 340),
			(call_script, "script_prsnt_lines", 100, 4, 390, 420),
			(call_script, "script_prsnt_lines", 100, 4, 390, 340),
			(call_script, "script_prsnt_lines", 110, 4, 520, 420),
			(call_script, "script_prsnt_lines", 110, 4, 520, 340),
			(call_script, "script_prsnt_lines", 4, 80, 140, 340)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 9),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_5"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_6", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_sarranid_arms"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_sarranid_n_millet", 60, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_sarranid_n_ajam", 210, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_sarranid_n_cemaat", 360, 420),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_sarranid_n_jebelus", 360, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_sarranid_n_yerliyya", 500, 460),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_sarranid_n_timariot", 500, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_sarranid_n_garip", 500, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_sarranid_n_yeniceri", 640, 460),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_sarranid_n_kapikula", 640, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_sarranid_n_uluteci", 640, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_millet", 115, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_ajam", 265, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_cemaat", 415, 475),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_jebelus", 415, 355),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_yerliyya", 545, 515),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_timariot", 545, 435),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_garip", 545, 355),
			(call_script, "script_prsnt_lines", 110, 4, 85, 380),
			(call_script, "script_prsnt_lines", 55, 4, 235, 380),
			(call_script, "script_prsnt_lines", 55, 4, 290, 460),
			(call_script, "script_prsnt_lines", 55, 4, 290, 340),
			(call_script, "script_prsnt_lines", 55, 4, 385, 460),
			(call_script, "script_prsnt_lines", 50, 4, 440, 500),
			(call_script, "script_prsnt_lines", 50, 4, 440, 420),
			(call_script, "script_prsnt_lines", 105, 4, 385, 340),
			(call_script, "script_prsnt_lines", 110, 4, 520, 500),
			(call_script, "script_prsnt_lines", 110, 4, 520, 420),
			(call_script, "script_prsnt_lines", 110, 4, 520, 340),
			(call_script, "script_prsnt_lines", 4, 120, 290, 340),
			(call_script, "script_prsnt_lines", 4, 80, 440, 420)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 28),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_6"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_7", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_mercenary_infantry_1", 60, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_mercenary_infantry_1", 60, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_mercenary_infantry_1", 210, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_mercenary_infantry_1", 360, 420),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_mercenary_infantry_1", 360, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_mercenary_infantry_1", 500, 460),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_mercenary_infantry_1", 500, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_mercenary_infantry_1", 640, 460),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_mercenary_infantry_1", 640, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 115, 435),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 115, 355),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 265, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 475),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 515),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 435),
			(call_script, "script_prsnt_lines", 55, 4, 85, 420),
			(call_script, "script_prsnt_lines", 55, 4, 140, 385),
			(call_script, "script_prsnt_lines", 55, 4, 85, 340),
			(call_script, "script_prsnt_lines", 55, 4, 140, 375),
			(call_script, "script_prsnt_lines", 55, 4, 235, 380),
			(call_script, "script_prsnt_lines", 55, 4, 290, 460),
			(call_script, "script_prsnt_lines", 55, 4, 290, 340),
			(call_script, "script_prsnt_lines", 50, 4, 390, 460),
			(call_script, "script_prsnt_lines", 50, 4, 440, 500),
			(call_script, "script_prsnt_lines", 50, 4, 440, 420),
			(call_script, "script_prsnt_lines", 110, 4, 520, 500),
			(call_script, "script_prsnt_lines", 110, 4, 520, 420),
			(call_script, "script_prsnt_lines", 4, 40, 140, 385),
			(call_script, "script_prsnt_lines", 4, 35, 140, 340),
			(call_script, "script_prsnt_lines", 4, 120, 290, 340),
			(call_script, "script_prsnt_lines", 4, 80, 440, 420)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 9),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_7"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_8", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_bandit_n_looter", 60, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_bandit_n_bandit", 360, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_bandit_n_brigand", 500, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_bandit_n_mountain", 60, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_bandit_n_forest", 60, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_bandit_n_sea_raider", 360, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_bandit_n_steppe", 360, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_bandit_n_taiga", 640, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_bandit_n_desert", 640, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_bandit_n_mountain", 210, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_bandit_n_forest", 210, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_mercenary_infantry_1", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_rhodok_n_cittadino", 210, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_swadian_r_peasant", 210, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_nord_n_bondi", 500, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 15, "trp_khergit_n_tariachin", 500, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 16, "trp_vaegir_n_kholop", 790, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 17, "trp_sarranid_n_millet", 790, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 18, "trp_bandit_n_manhunter", 60, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 19, "trp_bandit_n_slave_driver", 210, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 20, "trp_bandit_n_slave_hunter", 360, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 21, "trp_bandit_n_slave_crusher", 500, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 22, "trp_bandit_n_slaver_chief", 640, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_n_looter", 115, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_n_bandit", 420, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_n_mountain", 115, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_n_forest", 115, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_n_sea_raider", 420, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_n_steppe", 420, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_n_taiga", 695, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_n_desert", 695, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_n_manhunter", 115, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_n_slave_driver", 265, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_n_slave_hunter", 420, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_n_slave_crusher", 550, 165),
			(call_script, "script_prsnt_lines", 110, 4, 85, 630),
			(call_script, "script_prsnt_lines", 55, 4, 140, 550),
			(call_script, "script_prsnt_lines", 100, 4, 390, 630),
			(call_script, "script_prsnt_lines", 50, 4, 440, 550),
			(call_script, "script_prsnt_lines", 110, 4, 85, 430),
			(call_script, "script_prsnt_lines", 110, 4, 85, 270),
			(call_script, "script_prsnt_lines", 100, 4, 390, 430),
			(call_script, "script_prsnt_lines", 100, 4, 390, 270),
			(call_script, "script_prsnt_lines", 110, 4, 665, 430),
			(call_script, "script_prsnt_lines", 110, 4, 665, 270),
			(call_script, "script_prsnt_lines", 110, 4, 85, 150),
			(call_script, "script_prsnt_lines", 110, 4, 235, 150),
			(call_script, "script_prsnt_lines", 100, 4, 390, 150),
			(call_script, "script_prsnt_lines", 110, 4, 520, 150),
			(call_script, "script_prsnt_lines", 4, 80, 140, 550),
			(call_script, "script_prsnt_lines", 4, 80, 440, 550)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 23),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_8"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_9", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_mercenary_infantry_1", 60, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_mercenary_infantry_1", 60, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_mercenary_infantry_1", 210, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_mercenary_infantry_1", 360, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_mercenary_infantry_1", 500, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_mercenary_infantry_1", 640, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 115, 435),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 115, 355),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 265, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 395),
			(call_script, "script_prsnt_lines", 55, 4, 85, 420),
			(call_script, "script_prsnt_lines", 55, 4, 140, 385),
			(call_script, "script_prsnt_lines", 55, 4, 85, 340),
			(call_script, "script_prsnt_lines", 55, 4, 140, 375),
			(call_script, "script_prsnt_lines", 110, 4, 235, 380),
			(call_script, "script_prsnt_lines", 100, 4, 390, 380),
			(call_script, "script_prsnt_lines", 110, 4, 520, 380),
			(call_script, "script_prsnt_lines", 4, 40, 140, 385),
			(call_script, "script_prsnt_lines", 4, 40, 140, 340)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 6),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_9"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_10", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_custom_n_recruit", 60, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_custom_n_militia", 210, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_custom_n_guard", 360, 420),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_custom_n_page", 360, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_custom_n_swordman", 500, 460),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_custom_n_archer", 500, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_custom_n_squire", 500, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_custom_n_swordmaster", 640, 460),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_custom_n_expert_archer", 640, 380),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_custom_n_knight", 640, 300),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_n_recruit", 115, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_n_militia", 265, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_n_guard", 415, 475),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_n_page", 415, 355),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_n_swordman", 545, 515),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_n_archer", 545, 435),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_n_squire", 545, 355),
			(call_script, "script_prsnt_lines", 110, 4, 85, 380),
			(call_script, "script_prsnt_lines", 55, 4, 235, 380),
			(call_script, "script_prsnt_lines", 55, 4, 290, 460),
			(call_script, "script_prsnt_lines", 55, 4, 290, 340),
			(call_script, "script_prsnt_lines", 55, 4, 385, 460),
			(call_script, "script_prsnt_lines", 50, 4, 440, 500),
			(call_script, "script_prsnt_lines", 50, 4, 440, 420),
			(call_script, "script_prsnt_lines", 105, 4, 385, 340),
			(call_script, "script_prsnt_lines", 110, 4, 520, 500),
			(call_script, "script_prsnt_lines", 110, 4, 520, 420),
			(call_script, "script_prsnt_lines", 110, 4, 520, 340),
			(call_script, "script_prsnt_lines", 4, 120, 290, 340),
			(call_script, "script_prsnt_lines", 4, 80, 440, 420)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 19),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_10"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_11", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_swadian"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_swadian_r_peasant", 60, 360),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_swadian_r_peasant", 210, 470),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_swadian_r_peasant", 210, 250),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_swadian_r_peasant", 360, 470),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_swadian_r_peasant", 360, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_swadian_r_peasant", 360, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_swadian_r_peasant", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_swadian_r_peasant", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_swadian_r_peasant", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_swadian_r_peasant", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_swadian_r_peasant", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_swadian_r_peasant", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_swadian_r_peasant", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_swadian_r_peasant", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_swadian_r_peasant", 790, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 115, 415),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 265, 525),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 265, 305),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 415, 525),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 415, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 415, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 545, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 545, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 545, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_r_peasant", 695, 485),
			(call_script, "script_prsnt_lines", 55, 4, 85, 400),
			(call_script, "script_prsnt_lines", 55, 4, 140, 510),
			(call_script, "script_prsnt_lines", 55, 4, 140, 290),
			(call_script, "script_prsnt_lines", 110, 4, 235, 510),
			(call_script, "script_prsnt_lines", 55, 4, 235, 290),
			(call_script, "script_prsnt_lines", 55, 4, 290, 350),
			(call_script, "script_prsnt_lines", 55, 4, 290, 230),
			(call_script, "script_prsnt_lines", 50, 4, 390, 510),
			(call_script, "script_prsnt_lines", 50, 4, 440, 550),
			(call_script, "script_prsnt_lines", 50, 4, 440, 470),
			(call_script, "script_prsnt_lines", 50, 4, 390, 350),
			(call_script, "script_prsnt_lines", 50, 4, 440, 390),
			(call_script, "script_prsnt_lines", 50, 4, 440, 310),
			(call_script, "script_prsnt_lines", 100, 4, 390, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 470),
			(call_script, "script_prsnt_lines", 110, 4, 520, 310),
			(call_script, "script_prsnt_lines", 110, 4, 520, 230),
			(call_script, "script_prsnt_lines", 110, 4, 665, 470),
			(call_script, "script_prsnt_lines", 4, 220, 140, 290),
			(call_script, "script_prsnt_lines", 4, 120, 290, 230),
			(call_script, "script_prsnt_lines", 4, 80, 440, 470),
			(call_script, "script_prsnt_lines", 4, 80, 440, 310)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 15),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_11"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_12", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_vaegir"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_vaegir_r_kholop", 60, 370),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_vaegir_n_kholop", 210, 450),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_vaegir_n_kholop", 210, 290),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_vaegir_n_kholop", 360, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_vaegir_n_kholop", 360, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_vaegir_n_kholop", 360, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_vaegir_n_kholop", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_vaegir_n_kholop", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_vaegir_n_kholop", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_vaegir_n_kholop", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_vaegir_n_kholop", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_vaegir_n_kholop", 640, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_vaegir_n_kholop", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_vaegir_n_kholop", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_vaegir_n_kholop", 790, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_r_kholop", 115, 435),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 265, 505),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 265, 345),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 415, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 415, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 415, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 545, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 545, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 545, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_n_kholop", 695, 405),
			(call_script, "script_prsnt_lines", 55, 4, 85, 420),
			(call_script, "script_prsnt_lines", 55, 4, 140, 490),
			(call_script, "script_prsnt_lines", 55, 4, 140, 330),
			(call_script, "script_prsnt_lines", 55, 4, 235, 490),
			(call_script, "script_prsnt_lines", 55, 4, 290, 550),
			(call_script, "script_prsnt_lines", 55, 4, 290, 435),
			(call_script, "script_prsnt_lines", 55, 4, 235, 330),
			(call_script, "script_prsnt_lines", 55, 4, 290, 425),
			(call_script, "script_prsnt_lines", 55, 4, 290, 270),
			(call_script, "script_prsnt_lines", 100, 4, 390, 550),
			(call_script, "script_prsnt_lines", 50, 4, 390, 430),
			(call_script, "script_prsnt_lines", 50, 4, 440, 470),
			(call_script, "script_prsnt_lines", 50, 4, 440, 390),
			(call_script, "script_prsnt_lines", 50, 4, 390, 270),
			(call_script, "script_prsnt_lines", 50, 4, 440, 310),
			(call_script, "script_prsnt_lines", 50, 4, 440, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 550),
			(call_script, "script_prsnt_lines", 110, 4, 520, 390),
			(call_script, "script_prsnt_lines", 110, 4, 520, 230),
			(call_script, "script_prsnt_lines", 110, 4, 665, 390),
			(call_script, "script_prsnt_lines", 4, 160, 140, 330),
			(call_script, "script_prsnt_lines", 4, 115, 290, 435),
			(call_script, "script_prsnt_lines", 4, 155, 290, 270),
			(call_script, "script_prsnt_lines", 4, 80, 440, 390),
			(call_script, "script_prsnt_lines", 4, 80, 440, 230)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 15),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_12"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_13", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_khergit"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_khergit_n_tariachin", 60, 410),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_khergit_n_tariachin", 210, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_khergit_n_tariachin", 210, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_khergit_n_tariachin", 360, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_khergit_n_tariachin", 360, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_khergit_n_tariachin", 360, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_khergit_n_tariachin", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_khergit_n_tariachin", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_khergit_n_tariachin", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_khergit_n_tariachin", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_khergit_n_tariachin", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_khergit_n_tariachin", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_khergit_n_tariachin", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_khergit_n_tariachin", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_khergit_n_tariachin", 790, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_n_tariachin", 115, 465),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_n_tariachin", 265, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_n_tariachin", 265, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_n_tariachin", 415, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_n_tariachin", 415, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_n_tariachin", 415, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_n_tariachin", 545, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_n_tariachin", 545, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_n_tariachin", 545, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_n_tariachin", 695, 325),
			(call_script, "script_prsnt_lines", 55, 4, 85, 450),
			(call_script, "script_prsnt_lines", 55, 4, 140, 550),
			(call_script, "script_prsnt_lines", 55, 4, 140, 350),
			(call_script, "script_prsnt_lines", 110, 4, 235, 550),
			(call_script, "script_prsnt_lines", 55, 4, 235, 350),
			(call_script, "script_prsnt_lines", 55, 4, 290, 430),
			(call_script, "script_prsnt_lines", 55, 4, 290, 270),
			(call_script, "script_prsnt_lines", 100, 4, 390, 550),
			(call_script, "script_prsnt_lines", 50, 4, 390, 430),
			(call_script, "script_prsnt_lines", 50, 4, 440, 470),
			(call_script, "script_prsnt_lines", 50, 4, 440, 390),
			(call_script, "script_prsnt_lines", 50, 4, 390, 270),
			(call_script, "script_prsnt_lines", 50, 4, 440, 310),
			(call_script, "script_prsnt_lines", 50, 4, 440, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 470),
			(call_script, "script_prsnt_lines", 110, 4, 520, 310),
			(call_script, "script_prsnt_lines", 110, 4, 520, 230),
			(call_script, "script_prsnt_lines", 110, 4, 665, 310),
			(call_script, "script_prsnt_lines", 4, 200, 140, 350),
			(call_script, "script_prsnt_lines", 4, 160, 290, 270),
			(call_script, "script_prsnt_lines", 4, 80, 440, 390),
			(call_script, "script_prsnt_lines", 4, 80, 440, 230)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 15),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_13"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_14", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_nord"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_nord_r_bondi", 60, 410),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_nord_n_bondi", 210, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_nord_n_bondi", 210, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_nord_n_bondi", 360, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_nord_n_bondi", 360, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_nord_n_bondi", 360, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_nord_n_bondi", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_nord_n_bondi", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_nord_n_bondi", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_nord_n_bondi", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_nord_n_bondi", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_nord_n_bondi", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_nord_n_bondi", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_nord_n_bondi", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_nord_n_bondi", 790, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_r_bondi", 115, 465),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 265, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 265, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 415, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 415, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 415, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 545, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 545, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 545, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_n_bondi", 695, 245),
			(call_script, "script_prsnt_lines", 55, 4, 85, 450),
			(call_script, "script_prsnt_lines", 55, 4, 140, 550),
			(call_script, "script_prsnt_lines", 55, 4, 140, 350),
			(call_script, "script_prsnt_lines", 110, 4, 235, 550),
			(call_script, "script_prsnt_lines", 55, 4, 235, 350),
			(call_script, "script_prsnt_lines", 55, 4, 290, 430),
			(call_script, "script_prsnt_lines", 55, 4, 290, 270),
			(call_script, "script_prsnt_lines", 100, 4, 390, 550),
			(call_script, "script_prsnt_lines", 50, 4, 390, 430),
			(call_script, "script_prsnt_lines", 50, 4, 440, 470),
			(call_script, "script_prsnt_lines", 50, 4, 440, 390),
			(call_script, "script_prsnt_lines", 50, 4, 390, 270),
			(call_script, "script_prsnt_lines", 50, 4, 440, 310),
			(call_script, "script_prsnt_lines", 50, 4, 440, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 390),
			(call_script, "script_prsnt_lines", 110, 4, 520, 310),
			(call_script, "script_prsnt_lines", 110, 4, 520, 230),
			(call_script, "script_prsnt_lines", 110, 4, 665, 230),
			(call_script, "script_prsnt_lines", 4, 200, 140, 350),
			(call_script, "script_prsnt_lines", 4, 160, 290, 270),
			(call_script, "script_prsnt_lines", 4, 80, 440, 390),
			(call_script, "script_prsnt_lines", 4, 80, 440, 230)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 15),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_14"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_15", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_rhodok"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_rhodok_r_cittadino", 60, 410),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_rhodok_r_novizio", 210, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_rhodok_r_recluta", 210, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_rhodok_r_lanciere_a_cavallo", 360, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_rhodok_r_recluta_balestriere", 360, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_rhodok_r_lanciere", 360, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_rhodok_r_lanza_spezzata", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_rhodok_r_balestriere", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_rhodok_r_balestriere_leggero", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_rhodok_r_lanciere_veterano", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_rhodok_r_fante", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_rhodok_r_balestriere_veterano", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_rhodok_r_balestriere_d_assedio", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_rhodok_r_picchiere_veterano", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_rhodok_r_capitano_d_assedio", 790, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_r_cittadino", 115, 465),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_r_novizio", 265, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_r_recluta", 265, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_r_lanciere_a_cavallo", 415, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_r_recluta_balestriere", 415, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_r_lanciere", 415, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_r_balestriere", 545, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_r_balestriere_leggero", 545, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_r_lanciere_veterano", 545, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_r_balestriere_d_assedio", 695, 405),
			(call_script, "script_prsnt_lines", 55, 4, 85, 450),
			(call_script, "script_prsnt_lines", 55, 4, 140, 550),
			(call_script, "script_prsnt_lines", 55, 4, 140, 350),
			(call_script, "script_prsnt_lines", 110, 4, 235, 550),
			(call_script, "script_prsnt_lines", 55, 4, 235, 350),
			(call_script, "script_prsnt_lines", 55, 4, 290, 430),
			(call_script, "script_prsnt_lines", 55, 4, 290, 270),
			(call_script, "script_prsnt_lines", 100, 4, 390, 550),
			(call_script, "script_prsnt_lines", 50, 4, 390, 430),
			(call_script, "script_prsnt_lines", 50, 4, 440, 470),
			(call_script, "script_prsnt_lines", 50, 4, 440, 390),
			(call_script, "script_prsnt_lines", 50, 4, 390, 270),
			(call_script, "script_prsnt_lines", 50, 4, 440, 310),
			(call_script, "script_prsnt_lines", 50, 4, 440, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 470),
			(call_script, "script_prsnt_lines", 110, 4, 520, 390),
			(call_script, "script_prsnt_lines", 110, 4, 520, 310),
			(call_script, "script_prsnt_lines", 110, 4, 665, 390),
			(call_script, "script_prsnt_lines", 4, 200, 140, 350),
			(call_script, "script_prsnt_lines", 4, 160, 290, 270),
			(call_script, "script_prsnt_lines", 4, 80, 440, 390),
			(call_script, "script_prsnt_lines", 4, 80, 440, 230)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 15),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_15"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_16", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_sarranid_arms"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_sarranid_n_jebelus23", 60, 320),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_sarranid_n_jebelus23", 210, 410),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_sarranid_n_jebelus23", 210, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_sarranid_n_jebelus23", 360, 470),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_sarranid_n_jebelus23", 360, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_sarranid_n_jebelus23", 360, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_sarranid_n_jebelus23", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_sarranid_n_jebelus23", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_sarranid_n_jebelus23", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_sarranid_n_jebelus23", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_sarranid_n_jebelus23", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_sarranid_n_jebelus23", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_sarranid_n_jebelus23", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_sarranid_n_jebelus23", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_sarranid_n_jebelus23", 790, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_jebelus23", 115, 375),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_jebelus23", 265, 465),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_jebelus23", 265, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_jebelus23", 415, 525),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_jebelus23", 415, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_jebelus23", 415, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_jebelus23", 545, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_jebelus23", 545, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_jebelus23", 545, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_n_jebelus23", 695, 405),
			(call_script, "script_prsnt_lines", 55, 4, 85, 360),
			(call_script, "script_prsnt_lines", 55, 4, 140, 450),
			(call_script, "script_prsnt_lines", 55, 4, 140, 270),
			(call_script, "script_prsnt_lines", 55, 4, 235, 450),
			(call_script, "script_prsnt_lines", 55, 4, 290, 510),
			(call_script, "script_prsnt_lines", 55, 4, 290, 390),
			(call_script, "script_prsnt_lines", 110, 4, 235, 270),
			(call_script, "script_prsnt_lines", 50, 4, 390, 510),
			(call_script, "script_prsnt_lines", 50, 4, 440, 550),
			(call_script, "script_prsnt_lines", 50, 4, 440, 470),
			(call_script, "script_prsnt_lines", 100, 4, 390, 390),
			(call_script, "script_prsnt_lines", 50, 4, 390, 270),
			(call_script, "script_prsnt_lines", 50, 4, 440, 310),
			(call_script, "script_prsnt_lines", 50, 4, 440, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 470),
			(call_script, "script_prsnt_lines", 110, 4, 520, 390),
			(call_script, "script_prsnt_lines", 110, 4, 520, 310),
			(call_script, "script_prsnt_lines", 110, 4, 665, 390),
			(call_script, "script_prsnt_lines", 4, 180, 140, 270),
			(call_script, "script_prsnt_lines", 4, 120, 290, 390),
			(call_script, "script_prsnt_lines", 4, 80, 440, 470),
			(call_script, "script_prsnt_lines", 4, 80, 440, 230)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 15),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_16"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_17", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_mercenary_r_townsman", 60, 370),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_mercenary_r_townsman", 60, 250),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_mercenary_r_townsman", 210, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_mercenary_r_townsman", 210, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_mercenary_r_townsman", 210, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_mercenary_r_townsman", 360, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_mercenary_r_townsman", 360, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_mercenary_r_townsman", 360, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_mercenary_r_townsman", 360, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_mercenary_r_townsman", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_mercenary_r_townsman", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_mercenary_r_townsman", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_mercenary_r_townsman", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_mercenary_r_townsman", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_mercenary_r_townsman", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 15, "trp_mercenary_r_townsman", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 16, "trp_mercenary_r_townsman", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_r_townsman", 115, 425),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_r_townsman", 115, 305),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_r_townsman", 265, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_r_townsman", 265, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_r_townsman", 265, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_r_townsman", 420, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_r_townsman", 420, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_r_townsman", 420, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_r_townsman", 420, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_r_townsman", 550, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_r_townsman", 550, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_r_townsman", 550, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_r_townsman", 550, 245),
			(call_script, "script_prsnt_lines", 55, 4, 85, 410),
			(call_script, "script_prsnt_lines", 55, 4, 140, 470),
			(call_script, "script_prsnt_lines", 55, 4, 140, 355),
			(call_script, "script_prsnt_lines", 55, 4, 85, 290),
			(call_script, "script_prsnt_lines", 55, 4, 140, 345),
			(call_script, "script_prsnt_lines", 55, 4, 140, 230),
			(call_script, "script_prsnt_lines", 110, 4, 235, 470),
			(call_script, "script_prsnt_lines", 55, 4, 235, 350),
			(call_script, "script_prsnt_lines", 55, 4, 290, 390),
			(call_script, "script_prsnt_lines", 55, 4, 290, 310),
			(call_script, "script_prsnt_lines", 110, 4, 235, 230),
			(call_script, "script_prsnt_lines", 100, 4, 390, 470),
			(call_script, "script_prsnt_lines", 100, 4, 390, 390),
			(call_script, "script_prsnt_lines", 100, 4, 390, 310),
			(call_script, "script_prsnt_lines", 100, 4, 390, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 470),
			(call_script, "script_prsnt_lines", 110, 4, 520, 390),
			(call_script, "script_prsnt_lines", 110, 4, 520, 310),
			(call_script, "script_prsnt_lines", 110, 4, 520, 230),
			(call_script, "script_prsnt_lines", 4, 115, 140, 355),
			(call_script, "script_prsnt_lines", 4, 115, 140, 230),
			(call_script, "script_prsnt_lines", 4, 80, 290, 310)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 17),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_17"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_18", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_bandit_r_looter", 60, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_bandit_r_bandit", 210, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_bandit_r_brigand", 360, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_bandit_r_mountain", 60, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_bandit_r_forest", 60, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_bandit_r_sea_raider", 360, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_bandit_r_steppe", 360, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_bandit_r_taiga", 640, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_bandit_r_desert", 640, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_mercenary_r_townsman", 210, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_mercenary_r_townsman", 360, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_mercenary_r_townsman", 500, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_mercenary_r_townsman", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_rhodok_r_lanciere", 210, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_rhodok_r_recluta_balestriere", 210, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 15, "trp_swadian_r_peasant", 210, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 16, "trp_swadian_r_peasant", 210, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 17, "trp_nord_n_bondi", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 18, "trp_nord_n_bondi", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 19, "trp_khergit_n_tariachin", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 20, "trp_khergit_n_tariachin", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 21, "trp_vaegir_n_kholop", 790, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 22, "trp_vaegir_n_kholop", 790, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 23, "trp_sarranid_n_jebelus23", 790, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 24, "trp_sarranid_n_jebelus23", 790, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 25, "trp_bandit_r_manhunter", 60, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 26, "trp_bandit_r_slave_driver", 210, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 27, "trp_bandit_r_slave_hunter", 360, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 28, "trp_bandit_r_slave_crusher", 500, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 29, "trp_bandit_r_slaver_chief", 640, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_r_looter", 115, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_r_bandit", 265, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_r_brigand", 420, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_r_mountain", 115, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_r_forest", 115, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_r_sea_raider", 420, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_r_steppe", 420, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_r_taiga", 695, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_r_desert", 695, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_r_manhunter", 115, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_r_slave_driver", 265, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_r_slave_hunter", 420, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_r_slave_crusher", 550, 165),
			(call_script, "script_prsnt_lines", 110, 4, 85, 630),
			(call_script, "script_prsnt_lines", 55, 4, 140, 550),
			(call_script, "script_prsnt_lines", 110, 4, 235, 630),
			(call_script, "script_prsnt_lines", 55, 4, 290, 550),
			(call_script, "script_prsnt_lines", 100, 4, 390, 630),
			(call_script, "script_prsnt_lines", 50, 4, 440, 550),
			(call_script, "script_prsnt_lines", 55, 4, 85, 430),
			(call_script, "script_prsnt_lines", 55, 4, 140, 470),
			(call_script, "script_prsnt_lines", 55, 4, 140, 390),
			(call_script, "script_prsnt_lines", 55, 4, 85, 270),
			(call_script, "script_prsnt_lines", 55, 4, 140, 310),
			(call_script, "script_prsnt_lines", 55, 4, 140, 230),
			(call_script, "script_prsnt_lines", 50, 4, 390, 430),
			(call_script, "script_prsnt_lines", 50, 4, 440, 470),
			(call_script, "script_prsnt_lines", 50, 4, 440, 390),
			(call_script, "script_prsnt_lines", 50, 4, 390, 270),
			(call_script, "script_prsnt_lines", 50, 4, 440, 310),
			(call_script, "script_prsnt_lines", 50, 4, 440, 230),
			(call_script, "script_prsnt_lines", 55, 4, 665, 430),
			(call_script, "script_prsnt_lines", 55, 4, 720, 470),
			(call_script, "script_prsnt_lines", 55, 4, 720, 390),
			(call_script, "script_prsnt_lines", 55, 4, 665, 270),
			(call_script, "script_prsnt_lines", 55, 4, 720, 310),
			(call_script, "script_prsnt_lines", 55, 4, 720, 230),
			(call_script, "script_prsnt_lines", 110, 4, 85, 150),
			(call_script, "script_prsnt_lines", 110, 4, 235, 150),
			(call_script, "script_prsnt_lines", 100, 4, 390, 150),
			(call_script, "script_prsnt_lines", 110, 4, 520, 150),
			(call_script, "script_prsnt_lines", 4, 80, 140, 550),
			(call_script, "script_prsnt_lines", 4, 80, 290, 550),
			(call_script, "script_prsnt_lines", 4, 80, 440, 550),
			(call_script, "script_prsnt_lines", 4, 80, 140, 390),
			(call_script, "script_prsnt_lines", 4, 80, 140, 230),
			(call_script, "script_prsnt_lines", 4, 80, 440, 390),
			(call_script, "script_prsnt_lines", 4, 80, 440, 230),
			(call_script, "script_prsnt_lines", 4, 80, 720, 390),
			(call_script, "script_prsnt_lines", 4, 80, 720, 230)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 30),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_18"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_19", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_mercenary_infantry_1", 60, 370),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_mercenary_infantry_1", 60, 250),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_mercenary_infantry_1", 210, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_mercenary_infantry_1", 210, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_mercenary_infantry_1", 210, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_mercenary_infantry_1", 360, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_mercenary_infantry_1", 360, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_mercenary_infantry_1", 360, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_mercenary_infantry_1", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_mercenary_infantry_1", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_mercenary_infantry_1", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_mercenary_infantry_1", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_mercenary_infantry_1", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_mercenary_infantry_1", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_mercenary_infantry_1", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 15, "trp_mercenary_infantry_1", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 115, 425),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 115, 305),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 265, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 265, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 265, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 245),
			(call_script, "script_prsnt_lines", 55, 4, 85, 410),
			(call_script, "script_prsnt_lines", 55, 4, 140, 470),
			(call_script, "script_prsnt_lines", 55, 4, 140, 355),
			(call_script, "script_prsnt_lines", 55, 4, 85, 260),
			(call_script, "script_prsnt_lines", 55, 4, 140, 345),
			(call_script, "script_prsnt_lines", 55, 4, 140, 230),
			(call_script, "script_prsnt_lines", 110, 4, 235, 470),
			(call_script, "script_prsnt_lines", 110, 4, 235, 350),
			(call_script, "script_prsnt_lines", 110, 4, 235, 230),
			(call_script, "script_prsnt_lines", 100, 4, 390, 470),
			(call_script, "script_prsnt_lines", 50, 4, 390, 350),
			(call_script, "script_prsnt_lines", 50, 4, 440, 390),
			(call_script, "script_prsnt_lines", 50, 4, 440, 310),
			(call_script, "script_prsnt_lines", 100, 4, 390, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 470),
			(call_script, "script_prsnt_lines", 110, 4, 520, 390),
			(call_script, "script_prsnt_lines", 110, 4, 520, 310),
			(call_script, "script_prsnt_lines", 110, 4, 520, 230),
			(call_script, "script_prsnt_lines", 4, 115, 140, 355),
			(call_script, "script_prsnt_lines", 4, 115, 140, 230),
			(call_script, "script_prsnt_lines", 4, 80, 440, 310)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 16),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_19"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_20", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_custom_r_recruit", 60, 320),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_custom_r_militia", 210, 410),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_custom_r_hunter", 210, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_custom_r_guard", 360, 470),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_custom_r_page", 360, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_custom_r_woodsman", 360, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_custom_r_spearman", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_custom_r_swordman", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_custom_r_squire", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_custom_r_archer", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_custom_r_skirmisher", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_custom_r_swordmaster", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_custom_r_knight", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_custom_r_expert_archer", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_custom_r_frontline_skirmisher", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_r_recruit", 115, 375),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_r_militia", 265, 465),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_r_hunter", 265, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_r_guard", 415, 525),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_r_page", 415, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_r_woodsman", 415, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_r_swordman", 545, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_r_squire", 545, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_r_archer", 545, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_r_skirmisher", 545, 245),
			(call_script, "script_prsnt_lines", 55, 4, 85, 360),
			(call_script, "script_prsnt_lines", 55, 4, 140, 450),
			(call_script, "script_prsnt_lines", 55, 4, 140, 270),
			(call_script, "script_prsnt_lines", 55, 4, 235, 450),
			(call_script, "script_prsnt_lines", 55, 4, 290, 510),
			(call_script, "script_prsnt_lines", 55, 4, 290, 390),
			(call_script, "script_prsnt_lines", 110, 4, 235, 270),
			(call_script, "script_prsnt_lines", 50, 4, 390, 510),
			(call_script, "script_prsnt_lines", 50, 4, 440, 550),
			(call_script, "script_prsnt_lines", 50, 4, 440, 470),
			(call_script, "script_prsnt_lines", 100, 4, 390, 390),
			(call_script, "script_prsnt_lines", 50, 4, 390, 270),
			(call_script, "script_prsnt_lines", 50, 4, 440, 310),
			(call_script, "script_prsnt_lines", 50, 4, 440, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 470),
			(call_script, "script_prsnt_lines", 110, 4, 520, 390),
			(call_script, "script_prsnt_lines", 110, 4, 520, 310),
			(call_script, "script_prsnt_lines", 110, 4, 520, 230),
			(call_script, "script_prsnt_lines", 4, 180, 140, 270),
			(call_script, "script_prsnt_lines", 4, 120, 290, 390),
			(call_script, "script_prsnt_lines", 4, 80, 440, 470),
			(call_script, "script_prsnt_lines", 4, 80, 440, 230)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 15),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_20"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_21", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_swadian"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_swadian_e_peasant", 60, 340),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_swadian_e_peasant", 210, 490),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_swadian_e_peasant", 210, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_swadian_e_peasant", 360, 550),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_swadian_e_peasant", 360, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_swadian_e_peasant", 360, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_swadian_e_peasant", 360, 70),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_swadian_e_peasant", 500, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_swadian_e_peasant", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_swadian_e_peasant", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_swadian_e_peasant", 500, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_swadian_e_peasant", 500, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_swadian_e_peasant", 500, 30),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_swadian_e_peasant", 640, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_swadian_e_peasant", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 15, "trp_swadian_e_peasant", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 16, "trp_swadian_e_peasant", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 17, "trp_swadian_e_peasant", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 18, "trp_swadian_e_peasant", 640, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 19, "trp_swadian_e_peasant", 640, 30),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 20, "trp_swadian_e_peasant", 790, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 21, "trp_swadian_e_peasant", 790, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 22, "trp_swadian_e_peasant", 790, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 23, "trp_swadian_e_peasant", 790, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 24, "trp_swadian_e_peasant", 940, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 25, "trp_swadian_e_peasant", 940, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 115, 395),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 265, 545),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 265, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 415, 605),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 415, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 415, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 415, 125),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 545, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 545, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 545, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 545, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 545, 85),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 695, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 695, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 695, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 695, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 845, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_swadian_e_peasant", 845, 165),
			(call_script, "script_prsnt_lines", 55, 4, 85, 380),
			(call_script, "script_prsnt_lines", 55, 4, 140, 530),
			(call_script, "script_prsnt_lines", 55, 4, 140, 230),
			(call_script, "script_prsnt_lines", 55, 4, 235, 530),
			(call_script, "script_prsnt_lines", 55, 4, 290, 590),
			(call_script, "script_prsnt_lines", 55, 4, 290, 470),
			(call_script, "script_prsnt_lines", 55, 4, 235, 230),
			(call_script, "script_prsnt_lines", 55, 4, 290, 350),
			(call_script, "script_prsnt_lines", 55, 4, 290, 110),
			(call_script, "script_prsnt_lines", 55, 4, 385, 590),
			(call_script, "script_prsnt_lines", 50, 4, 440, 630),
			(call_script, "script_prsnt_lines", 50, 4, 440, 555),
			(call_script, "script_prsnt_lines", 55, 4, 385, 470),
			(call_script, "script_prsnt_lines", 50, 4, 440, 545),
			(call_script, "script_prsnt_lines", 50, 4, 440, 395),
			(call_script, "script_prsnt_lines", 55, 4, 385, 350),
			(call_script, "script_prsnt_lines", 50, 4, 440, 385),
			(call_script, "script_prsnt_lines", 50, 4, 440, 270),
			(call_script, "script_prsnt_lines", 55, 4, 385, 110),
			(call_script, "script_prsnt_lines", 50, 4, 440, 150),
			(call_script, "script_prsnt_lines", 50, 4, 440, 70),
			(call_script, "script_prsnt_lines", 110, 4, 520, 550),
			(call_script, "script_prsnt_lines", 55, 4, 575, 470),
			(call_script, "script_prsnt_lines", 110, 4, 520, 390),
			(call_script, "script_prsnt_lines", 55, 4, 520, 270),
			(call_script, "script_prsnt_lines", 55, 4, 575, 310),
			(call_script, "script_prsnt_lines", 55, 4, 575, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 150),
			(call_script, "script_prsnt_lines", 110, 4, 520, 70),
			(call_script, "script_prsnt_lines", 110, 4, 665, 550),
			(call_script, "script_prsnt_lines", 110, 4, 665, 390),
			(call_script, "script_prsnt_lines", 110, 4, 665, 310),
			(call_script, "script_prsnt_lines", 110, 4, 665, 150),
			(call_script, "script_prsnt_lines", 110, 4, 815, 550),
			(call_script, "script_prsnt_lines", 110, 4, 815, 150),
			(call_script, "script_prsnt_lines", 4, 300, 140, 230),
			(call_script, "script_prsnt_lines", 4, 120, 290, 470),
			(call_script, "script_prsnt_lines", 4, 240, 290, 110),
			(call_script, "script_prsnt_lines", 4, 75, 440, 555),
			(call_script, "script_prsnt_lines", 4, 150, 440, 395),
			(call_script, "script_prsnt_lines", 4, 115, 440, 270),
			(call_script, "script_prsnt_lines", 4, 80, 440, 70),
			(call_script, "script_prsnt_lines", 4, 80, 575, 390),
			(call_script, "script_prsnt_lines", 4, 80, 575, 230)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 26),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_21"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_22", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_vaegir"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_vaegir_e_kholop", 60, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_vaegir_e_kholop", 210, 360),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_vaegir_e_kholop", 210, 180),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_vaegir_e_kholop", 360, 470),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_vaegir_e_kholop", 360, 250),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_vaegir_e_kholop", 360, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_vaegir_e_kholop", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_vaegir_e_kholop", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_vaegir_e_kholop", 500, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_vaegir_e_kholop", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_vaegir_e_kholop", 500, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_vaegir_e_kholop", 500, 30),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_vaegir_e_kholop", 640, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_vaegir_e_kholop", 640, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_vaegir_e_kholop", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 15, "trp_vaegir_e_kholop", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 16, "trp_vaegir_e_kholop", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 17, "trp_vaegir_e_kholop", 640, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 18, "trp_vaegir_e_kholop", 640, 30),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 20, "trp_vaegir_e_kholop", 790, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 19, "trp_vaegir_e_kholop", 790, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 21, "trp_vaegir_e_kholop", 790, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 22, "trp_vaegir_e_kholop", 790, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 23, "trp_vaegir_e_kholop", 790, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 24, "trp_vaegir_e_kholop", 940, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 25, "trp_vaegir_e_kholop", 940, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 115, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 265, 415),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 265, 235),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 420, 525),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 420, 305),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 420, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 550, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 550, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 550, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 550, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 550, 85),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 695, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 695, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 695, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 695, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 695, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 845, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_vaegir_e_kholop", 845, 245),
			(call_script, "script_prsnt_lines", 55, 4, 85, 310),
			(call_script, "script_prsnt_lines", 55, 4, 140, 400),
			(call_script, "script_prsnt_lines", 55, 4, 140, 220),
			(call_script, "script_prsnt_lines", 55, 4, 235, 400),
			(call_script, "script_prsnt_lines", 55, 4, 290, 510),
			(call_script, "script_prsnt_lines", 55, 4, 290, 295),
			(call_script, "script_prsnt_lines", 55, 4, 235, 220),
			(call_script, "script_prsnt_lines", 55, 4, 290, 285),
			(call_script, "script_prsnt_lines", 55, 4, 290, 150),
			(call_script, "script_prsnt_lines", 50, 4, 390, 510),
			(call_script, "script_prsnt_lines", 50, 4, 440, 550),
			(call_script, "script_prsnt_lines", 50, 4, 440, 470),
			(call_script, "script_prsnt_lines", 50, 4, 390, 290),
			(call_script, "script_prsnt_lines", 50, 4, 440, 350),
			(call_script, "script_prsnt_lines", 50, 4, 440, 230),
			(call_script, "script_prsnt_lines", 100, 4, 390, 150),
			(call_script, "script_prsnt_lines", 50, 4, 440, 70),
			(call_script, "script_prsnt_lines", 110, 4, 520, 550),
			(call_script, "script_prsnt_lines", 55, 4, 575, 630),
			(call_script, "script_prsnt_lines", 55, 4, 520, 350),
			(call_script, "script_prsnt_lines", 55, 4, 575, 390),
			(call_script, "script_prsnt_lines", 55, 4, 575, 310),
			(call_script, "script_prsnt_lines", 110, 4, 520, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 150),
			(call_script, "script_prsnt_lines", 110, 4, 520, 70),
			(call_script, "script_prsnt_lines", 110, 4, 665, 630),
			(call_script, "script_prsnt_lines", 110, 4, 665, 550),
			(call_script, "script_prsnt_lines", 110, 4, 665, 390),
			(call_script, "script_prsnt_lines", 110, 4, 665, 230),
			(call_script, "script_prsnt_lines", 110, 4, 665, 150),
			(call_script, "script_prsnt_lines", 110, 4, 815, 550),
			(call_script, "script_prsnt_lines", 110, 4, 815, 230),
			(call_script, "script_prsnt_lines", 4, 180, 140, 220),
			(call_script, "script_prsnt_lines", 4, 215, 290, 295),
			(call_script, "script_prsnt_lines", 4, 135, 290, 150),
			(call_script, "script_prsnt_lines", 4, 80, 440, 470),
			(call_script, "script_prsnt_lines", 4, 120, 440, 230),
			(call_script, "script_prsnt_lines", 4, 80, 440, 70),
			(call_script, "script_prsnt_lines", 4, 80, 575, 550),
			(call_script, "script_prsnt_lines", 4, 80, 575, 310)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 26),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_22"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_23", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_khergit"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_khergit_e_tariachin", 60, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_khergit_e_tariachin", 210, 490),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_khergit_e_tariachin", 210, 210),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_khergit_e_tariachin", 360, 530),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_khergit_e_tariachin", 360, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_khergit_e_tariachin", 360, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_khergit_e_tariachin", 360, 150),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_khergit_e_tariachin", 500, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_khergit_e_tariachin", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_khergit_e_tariachin", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_khergit_e_tariachin", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_khergit_e_tariachin", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_khergit_e_tariachin", 500, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_khergit_e_tariachin", 640, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_khergit_e_tariachin", 640, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 15, "trp_khergit_e_tariachin", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 16, "trp_khergit_e_tariachin", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 17, "trp_khergit_e_tariachin", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 18, "trp_khergit_e_tariachin", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 19, "trp_khergit_e_tariachin", 640, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 20, "trp_khergit_e_tariachin", 790, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 21, "trp_khergit_e_tariachin", 790, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 22, "trp_khergit_e_tariachin", 790, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 23, "trp_khergit_e_tariachin", 790, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 24, "trp_khergit_e_tariachin", 790, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 25, "trp_khergit_e_tariachin", 940, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 26, "trp_khergit_e_tariachin", 940, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 115, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 265, 545),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 265, 265),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 420, 605),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 420, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 420, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 420, 205),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 550, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 550, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 550, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 550, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 550, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 550, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 695, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 695, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 695, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 695, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 695, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 845, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_khergit_e_tariachin", 845, 165),
			(call_script, "script_prsnt_lines", 55, 4, 85, 390),
			(call_script, "script_prsnt_lines", 55, 4, 140, 530),
			(call_script, "script_prsnt_lines", 55, 4, 140, 250),
			(call_script, "script_prsnt_lines", 55, 4, 235, 530),
			(call_script, "script_prsnt_lines", 55, 4, 290, 590),
			(call_script, "script_prsnt_lines", 55, 4, 290, 470),
			(call_script, "script_prsnt_lines", 55, 4, 235, 250),
			(call_script, "script_prsnt_lines", 55, 4, 290, 310),
			(call_script, "script_prsnt_lines", 55, 4, 290, 190),
			(call_script, "script_prsnt_lines", 50, 4, 390, 590),
			(call_script, "script_prsnt_lines", 50, 4, 440, 630),
			(call_script, "script_prsnt_lines", 50, 4, 440, 550),
			(call_script, "script_prsnt_lines", 100, 4, 390, 470),
			(call_script, "script_prsnt_lines", 100, 4, 390, 310),
			(call_script, "script_prsnt_lines", 50, 4, 390, 190),
			(call_script, "script_prsnt_lines", 50, 4, 440, 230),
			(call_script, "script_prsnt_lines", 50, 4, 440, 150),
			(call_script, "script_prsnt_lines", 110, 4, 520, 630),
			(call_script, "script_prsnt_lines", 110, 4, 520, 550),
			(call_script, "script_prsnt_lines", 110, 4, 520, 470),
			(call_script, "script_prsnt_lines", 110, 4, 520, 310),
			(call_script, "script_prsnt_lines", 55, 4, 575, 390),
			(call_script, "script_prsnt_lines", 110, 4, 520, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 150),
			(call_script, "script_prsnt_lines", 110, 4, 665, 630),
			(call_script, "script_prsnt_lines", 110, 4, 665, 550),
			(call_script, "script_prsnt_lines", 110, 4, 665, 310),
			(call_script, "script_prsnt_lines", 110, 4, 665, 230),
			(call_script, "script_prsnt_lines", 110, 4, 665, 150),
			(call_script, "script_prsnt_lines", 110, 4, 815, 630),
			(call_script, "script_prsnt_lines", 110, 4, 815, 150),
			(call_script, "script_prsnt_lines", 4, 280, 140, 250),
			(call_script, "script_prsnt_lines", 4, 120, 290, 470),
			(call_script, "script_prsnt_lines", 4, 120, 290, 190),
			(call_script, "script_prsnt_lines", 4, 80, 440, 550),
			(call_script, "script_prsnt_lines", 4, 80, 440, 150),
			(call_script, "script_prsnt_lines", 4, 80, 575, 310)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 27),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_23"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_24", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_nord"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_nord_e_bondi", 60, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_nord_e_bondi", 210, 470),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_nord_e_bondi", 210, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_nord_e_bondi", 360, 550),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_nord_e_bondi", 360, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_nord_e_bondi", 360, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_nord_e_bondi", 360, 150),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_nord_e_bondi", 500, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_nord_e_bondi", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_nord_e_bondi", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_nord_e_bondi", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_nord_e_bondi", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_nord_e_bondi", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_nord_e_bondi", 500, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_nord_e_bondi", 640, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 15, "trp_nord_e_bondi", 640, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 16, "trp_nord_e_bondi", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 17, "trp_nord_e_bondi", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 18, "trp_nord_e_bondi", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 19, "trp_nord_e_bondi", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 20, "trp_nord_e_bondi", 640, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 21, "trp_nord_e_bondi", 790, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 22, "trp_nord_e_bondi", 790, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 23, "trp_nord_e_bondi", 790, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 24, "trp_nord_e_bondi", 790, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 25, "trp_nord_e_bondi", 790, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 26, "trp_nord_e_bondi", 940, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 27, "trp_nord_e_bondi", 940, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 115, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 265, 525),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 265, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 420, 605),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 420, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 420, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 420, 205),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 550, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 550, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 550, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 550, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 550, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 550, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 695, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 695, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 695, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 695, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 695, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 845, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_nord_e_bondi", 845, 165),
			(call_script, "script_prsnt_lines", 55, 4, 85, 390),
			(call_script, "script_prsnt_lines", 55, 4, 140, 510),
			(call_script, "script_prsnt_lines", 55, 4, 140, 270),
			(call_script, "script_prsnt_lines", 55, 4, 235, 510),
			(call_script, "script_prsnt_lines", 55, 4, 290, 590),
			(call_script, "script_prsnt_lines", 55, 4, 290, 430),
			(call_script, "script_prsnt_lines", 55, 4, 235, 270),
			(call_script, "script_prsnt_lines", 55, 4, 290, 350),
			(call_script, "script_prsnt_lines", 55, 4, 290, 190),
			(call_script, "script_prsnt_lines", 50, 4, 390, 590),
			(call_script, "script_prsnt_lines", 50, 4, 440, 630),
			(call_script, "script_prsnt_lines", 50, 4, 440, 550),
			(call_script, "script_prsnt_lines", 50, 4, 390, 430),
			(call_script, "script_prsnt_lines", 50, 4, 440, 470),
			(call_script, "script_prsnt_lines", 50, 4, 440, 395),
			(call_script, "script_prsnt_lines", 50, 4, 390, 350),
			(call_script, "script_prsnt_lines", 50, 4, 440, 385),
			(call_script, "script_prsnt_lines", 50, 4, 440, 310),
			(call_script, "script_prsnt_lines", 50, 4, 390, 190),
			(call_script, "script_prsnt_lines", 50, 4, 440, 230),
			(call_script, "script_prsnt_lines", 50, 4, 440, 150),
			(call_script, "script_prsnt_lines", 110, 4, 520, 630),
			(call_script, "script_prsnt_lines", 110, 4, 520, 550),
			(call_script, "script_prsnt_lines", 110, 4, 520, 470),
			(call_script, "script_prsnt_lines", 55, 4, 520, 315),
			(call_script, "script_prsnt_lines", 55, 4, 575, 390),
			(call_script, "script_prsnt_lines", 110, 4, 520, 230),
			(call_script, "script_prsnt_lines", 55, 4, 575, 305),
			(call_script, "script_prsnt_lines", 110, 4, 520, 150),
			(call_script, "script_prsnt_lines", 110, 4, 665, 550),
			(call_script, "script_prsnt_lines", 110, 4, 665, 390),
			(call_script, "script_prsnt_lines", 110, 4, 665, 310),
			(call_script, "script_prsnt_lines", 110, 4, 665, 230),
			(call_script, "script_prsnt_lines", 110, 4, 665, 150),
			(call_script, "script_prsnt_lines", 110, 4, 815, 550),
			(call_script, "script_prsnt_lines", 110, 4, 815, 150),
			(call_script, "script_prsnt_lines", 4, 240, 140, 270),
			(call_script, "script_prsnt_lines", 4, 160, 290, 430),
			(call_script, "script_prsnt_lines", 4, 160, 290, 190),
			(call_script, "script_prsnt_lines", 4, 80, 440, 550),
			(call_script, "script_prsnt_lines", 4, 75, 440, 395),
			(call_script, "script_prsnt_lines", 4, 75, 440, 310),
			(call_script, "script_prsnt_lines", 4, 80, 440, 150),
			(call_script, "script_prsnt_lines", 4, 75, 575, 315),
			(call_script, "script_prsnt_lines", 4, 75, 575, 230)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 28),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_24"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_25", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_arms_rhodok"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_rhodok_e_cittadino", 60, 355),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_rhodok_e_novizio", 210, 500),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_rhodok_e_recluta", 210, 210),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_rhodok_e_milizia", 360, 550),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_rhodok_e_milizia_balestriere", 360, 450),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_rhodok_e_recluta_balestriere", 360, 330),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_rhodok_e_lanciere", 360, 90),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_rhodok_e_provisionato", 500, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_rhodok_e_fante", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_rhodok_e_balestriere", 500, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_rhodok_e_balestriere_leggero", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_rhodok_e_lanciere_veterano", 500, 150),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_rhodok_e_lanciere_a_cavallo", 500, 30),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_rhodok_e_guardia", 640, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_rhodok_e_veterano", 640, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 15, "trp_rhodok_e_balestriere_veterano", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 16, "trp_rhodok_e_balestriere_d_assedio", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 17, "trp_rhodok_e_balestriere_a_cavallo", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 18, "trp_rhodok_e_picchiere_veterano", 640, 150),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 19, "trp_rhodok_e_lanza_spezzata", 640, 30),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 20, "trp_rhodok_e_guardia_ducale", 790, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 21, "trp_rhodok_e_capitano_di_ventura", 790, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 22, "trp_rhodok_e_balestriere_pesante", 790, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 23, "trp_rhodok_e_capitano_d_assedio", 790, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 24, "trp_rhodok_e_picchiere_fiammingo", 790, 150),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 25, "trp_rhodok_e_condottiero_d_assedio", 940, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 26, "trp_rhodok_e_condottiero", 940, 150),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_cittadino", 115, 410),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_novizio", 265, 555),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_recluta", 265, 265),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_milizia", 420, 605),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_milizia_balestriere", 420, 505),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_recluta_balestriere", 420, 385),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_lanciere", 420, 145),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_provisionato", 550, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_fante", 550, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_balestriere", 550, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_balestriere_leggero", 550, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_lanciere_veterano", 550, 205),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_lanciere_a_cavallo", 550, 85),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_guardia", 695, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_veterano", 695, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_balestriere_veterano", 695, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_balestriere_d_assedio", 695, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_picchiere_veterano", 695, 205),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_capitano_d_assedio", 845, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_rhodok_e_picchiere_fiammingo", 845, 205),
			(call_script, "script_prsnt_lines", 55, 4, 85, 395),
			(call_script, "script_prsnt_lines", 55, 4, 140, 540),
			(call_script, "script_prsnt_lines", 55, 4, 140, 250),
			(call_script, "script_prsnt_lines", 55, 4, 235, 540),
			(call_script, "script_prsnt_lines", 55, 4, 290, 590),
			(call_script, "script_prsnt_lines", 55, 4, 290, 490),
			(call_script, "script_prsnt_lines", 55, 4, 235, 250),
			(call_script, "script_prsnt_lines", 55, 4, 290, 370),
			(call_script, "script_prsnt_lines", 55, 4, 290, 130),
			(call_script, "script_prsnt_lines", 50, 4, 390, 590),
			(call_script, "script_prsnt_lines", 50, 4, 440, 630),
			(call_script, "script_prsnt_lines", 50, 4, 440, 555),
			(call_script, "script_prsnt_lines", 50, 4, 390, 490),
			(call_script, "script_prsnt_lines", 50, 4, 440, 545),
			(call_script, "script_prsnt_lines", 50, 4, 440, 435),
			(call_script, "script_prsnt_lines", 50, 4, 390, 370),
			(call_script, "script_prsnt_lines", 50, 4, 440, 425),
			(call_script, "script_prsnt_lines", 50, 4, 440, 310),
			(call_script, "script_prsnt_lines", 50, 4, 390, 130),
			(call_script, "script_prsnt_lines", 50, 4, 440, 190),
			(call_script, "script_prsnt_lines", 50, 4, 440, 70),
			(call_script, "script_prsnt_lines", 110, 4, 520, 630),
			(call_script, "script_prsnt_lines", 110, 4, 520, 550),
			(call_script, "script_prsnt_lines", 55, 4, 520, 430),
			(call_script, "script_prsnt_lines", 55, 4, 575, 470),
			(call_script, "script_prsnt_lines", 55, 4, 575, 390),
			(call_script, "script_prsnt_lines", 110, 4, 520, 310),
			(call_script, "script_prsnt_lines", 110, 4, 520, 190),
			(call_script, "script_prsnt_lines", 110, 4, 520, 70),
			(call_script, "script_prsnt_lines", 110, 4, 665, 630),
			(call_script, "script_prsnt_lines", 110, 4, 665, 550),
			(call_script, "script_prsnt_lines", 110, 4, 665, 470),
			(call_script, "script_prsnt_lines", 110, 4, 665, 390),
			(call_script, "script_prsnt_lines", 110, 4, 665, 190),
			(call_script, "script_prsnt_lines", 110, 4, 815, 390),
			(call_script, "script_prsnt_lines", 110, 4, 815, 190),
			(call_script, "script_prsnt_lines", 4, 290, 140, 250),
			(call_script, "script_prsnt_lines", 4, 100, 290, 490),
			(call_script, "script_prsnt_lines", 4, 240, 290, 130),
			(call_script, "script_prsnt_lines", 4, 75, 440, 555),
			(call_script, "script_prsnt_lines", 4, 110, 440, 435),
			(call_script, "script_prsnt_lines", 4, 115, 440, 310),
			(call_script, "script_prsnt_lines", 4, 120, 440, 70),
			(call_script, "script_prsnt_lines", 4, 80, 575, 390)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 27),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_25"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_26", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(create_mesh_overlay, reg0, "mesh_pic_sarranid_arms"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_sarranid_e_millet", 60, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_sarranid_e_ajam", 210, 470),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_sarranid_e_oglan", 210, 150),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_sarranid_e_azab", 360, 550),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_sarranid_e_cemaat", 360, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_sarranid_e_jebelus", 360, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_sarranid_e_ghulam", 360, 70),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_sarranid_e_al_haqa", 500, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_sarranid_e_timariot", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_sarranid_e_yerliyya", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_sarranid_e_kapikulu_savari", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_sarranid_e_garip", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_sarranid_e_badw", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_sarranid_e_serdengecti", 500, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_sarranid_e_tabardariyya", 500, 30),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 15, "trp_sarranid_e_kapikula", 640, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 16, "trp_sarranid_e_yeniceri", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 17, "trp_sarranid_e_beylik", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 18, "trp_sarranid_e_uluteci", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 19, "trp_sarranid_e_akinci", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 20, "trp_sarranid_e_terkes_serdengecti", 640, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 21, "trp_sarranid_e_qilich_arslan", 790, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 22, "trp_sarranid_e_memluk", 790, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 23, "trp_sarranid_e_sekban", 790, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 24, "trp_sarranid_e_silahtar", 790, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 25, "trp_sarranid_e_sipahi", 790, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 26, "trp_sarranid_e_hasham", 940, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 27, "trp_sarranid_e_iqta_dar", 940, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_millet", 115, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_ajam", 265, 525),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_oglan", 265, 205),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_azab", 420, 605),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_cemaat", 420, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_jebelus", 420, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_ghulam", 420, 125),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_timariot", 550, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_yerliyya", 550, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_kapikulu_savari", 550, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_garip", 550, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_badw", 550, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_serdengecti", 550, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_kapikula", 695, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_beylik", 695, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_uluteci", 695, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_akinci", 695, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_memluk", 845, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_sarranid_e_sipahi", 845, 245),
			(call_script, "script_prsnt_lines", 55, 4, 85, 350),
			(call_script, "script_prsnt_lines", 55, 4, 140, 510),
			(call_script, "script_prsnt_lines", 55, 4, 140, 190),
			(call_script, "script_prsnt_lines", 55, 4, 235, 510),
			(call_script, "script_prsnt_lines", 55, 4, 290, 590),
			(call_script, "script_prsnt_lines", 55, 4, 290, 430),
			(call_script, "script_prsnt_lines", 55, 4, 235, 190),
			(call_script, "script_prsnt_lines", 55, 4, 290, 270),
			(call_script, "script_prsnt_lines", 55, 4, 290, 110),
			(call_script, "script_prsnt_lines", 50, 4, 390, 590),
			(call_script, "script_prsnt_lines", 50, 4, 440, 630),
			(call_script, "script_prsnt_lines", 50, 4, 440, 550),
			(call_script, "script_prsnt_lines", 50, 4, 390, 430),
			(call_script, "script_prsnt_lines", 50, 4, 440, 470),
			(call_script, "script_prsnt_lines", 50, 4, 440, 390),
			(call_script, "script_prsnt_lines", 50, 4, 390, 270),
			(call_script, "script_prsnt_lines", 50, 4, 440, 310),
			(call_script, "script_prsnt_lines", 50, 4, 440, 230),
			(call_script, "script_prsnt_lines", 50, 4, 390, 110),
			(call_script, "script_prsnt_lines", 50, 4, 440, 150),
			(call_script, "script_prsnt_lines", 50, 4, 440, 70),
			(call_script, "script_prsnt_lines", 110, 4, 520, 550),
			(call_script, "script_prsnt_lines", 110, 4, 520, 470),
			(call_script, "script_prsnt_lines", 110, 4, 520, 390),
			(call_script, "script_prsnt_lines", 110, 4, 520, 310),
			(call_script, "script_prsnt_lines", 110, 4, 520, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 150),
			(call_script, "script_prsnt_lines", 110, 4, 665, 550),
			(call_script, "script_prsnt_lines", 55, 4, 720, 630),
			(call_script, "script_prsnt_lines", 110, 4, 665, 390),
			(call_script, "script_prsnt_lines", 110, 4, 665, 310),
			(call_script, "script_prsnt_lines", 110, 4, 665, 230),
			(call_script, "script_prsnt_lines", 110, 4, 815, 550),
			(call_script, "script_prsnt_lines", 110, 4, 815, 230),
			(call_script, "script_prsnt_lines", 4, 320, 140, 190),
			(call_script, "script_prsnt_lines", 4, 160, 290, 430),
			(call_script, "script_prsnt_lines", 4, 160, 290, 110),
			(call_script, "script_prsnt_lines", 4, 80, 440, 550),
			(call_script, "script_prsnt_lines", 4, 80, 440, 390),
			(call_script, "script_prsnt_lines", 4, 80, 440, 230),
			(call_script, "script_prsnt_lines", 4, 80, 440, 70),
			(call_script, "script_prsnt_lines", 4, 80, 720, 550)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 28),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_26"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_27", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_mercenary_e_townsman", 60, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_mercenary_infantry_1", 60, 150),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_mercenary_infantry_1", 210, 550),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_mercenary_infantry_1", 210, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_mercenary_infantry_1", 210, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_mercenary_infantry_1", 210, 70),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_mercenary_infantry_1", 360, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_mercenary_infantry_1", 360, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_mercenary_infantry_1", 360, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_mercenary_infantry_1", 360, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_mercenary_infantry_1", 360, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_mercenary_infantry_1", 360, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_mercenary_infantry_1", 360, 30),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_mercenary_infantry_1", 500, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_mercenary_infantry_1", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 15, "trp_mercenary_infantry_1", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 16, "trp_mercenary_infantry_1", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 17, "trp_mercenary_infantry_1", 500, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 18, "trp_mercenary_infantry_1", 640, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 19, "trp_mercenary_infantry_1", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 20, "trp_mercenary_infantry_1", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 21, "trp_mercenary_infantry_1", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 22, "trp_mercenary_infantry_1", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 23, "trp_mercenary_infantry_1", 790, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 24, "trp_mercenary_infantry_1", 790, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 25, "trp_mercenary_infantry_1", 790, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_e_townsman", 115, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 115, 205),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 265, 605),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 265, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 265, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 265, 125),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 695, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 695, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 695, 325),
			(call_script, "script_prsnt_lines", 55, 4, 85, 470),
			(call_script, "script_prsnt_lines", 55, 4, 140, 590),
			(call_script, "script_prsnt_lines", 55, 4, 140, 430),
			(call_script, "script_prsnt_lines", 55, 4, 85, 190),
			(call_script, "script_prsnt_lines", 55, 4, 140, 350),
			(call_script, "script_prsnt_lines", 55, 4, 140, 110),
			(call_script, "script_prsnt_lines", 55, 4, 235, 590),
			(call_script, "script_prsnt_lines", 55, 4, 290, 630),
			(call_script, "script_prsnt_lines", 55, 4, 290, 550),
			(call_script, "script_prsnt_lines", 55, 4, 235, 430),
			(call_script, "script_prsnt_lines", 55, 4, 290, 470),
			(call_script, "script_prsnt_lines", 55, 4, 290, 395),
			(call_script, "script_prsnt_lines", 55, 4, 235, 350),
			(call_script, "script_prsnt_lines", 55, 4, 290, 385),
			(call_script, "script_prsnt_lines", 55, 4, 290, 310),
			(call_script, "script_prsnt_lines", 55, 4, 235, 110),
			(call_script, "script_prsnt_lines", 55, 4, 290, 150),
			(call_script, "script_prsnt_lines", 55, 4, 290, 70),
			(call_script, "script_prsnt_lines", 100, 4, 390, 630),
			(call_script, "script_prsnt_lines", 100, 4, 390, 470),
			(call_script, "script_prsnt_lines", 100, 4, 390, 390),
			(call_script, "script_prsnt_lines", 100, 4, 390, 310),
			(call_script, "script_prsnt_lines", 100, 4, 390, 150),
			(call_script, "script_prsnt_lines", 110, 4, 520, 630),
			(call_script, "script_prsnt_lines", 110, 4, 520, 470),
			(call_script, "script_prsnt_lines", 110, 4, 520, 390),
			(call_script, "script_prsnt_lines", 110, 4, 520, 310),
			(call_script, "script_prsnt_lines", 55, 4, 575, 230),
			(call_script, "script_prsnt_lines", 110, 4, 665, 470),
			(call_script, "script_prsnt_lines", 110, 4, 665, 390),
			(call_script, "script_prsnt_lines", 110, 4, 665, 310),
			(call_script, "script_prsnt_lines", 4, 160, 140, 430),
			(call_script, "script_prsnt_lines", 4, 240, 140, 110),
			(call_script, "script_prsnt_lines", 4, 80, 290, 550),
			(call_script, "script_prsnt_lines", 4, 75, 290, 395),
			(call_script, "script_prsnt_lines", 4, 75, 290, 310),
			(call_script, "script_prsnt_lines", 4, 80, 290, 70),
			(call_script, "script_prsnt_lines", 4, 80, 575, 230)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 26),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_27"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_28", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_bandit_e_looter", 60, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_bandit_e_bandit", 210, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_bandit_e_brigand", 360, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_bandit_e_mountain", 60, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_bandit_e_forest", 60, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_bandit_e_sea_raider", 360, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_bandit_e_steppe", 360, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_bandit_e_taiga", 640, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_bandit_e_desert", 640, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_mercenary_infantry_1", 210, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_mercenary_infantry_1", 360, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_mercenary_infantry_1", 500, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_mercenary_infantry_1", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_rhodok_e_milizia", 210, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_rhodok_e_recluta_balestriere", 210, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 15, "trp_swadian_e_peasant", 210, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 16, "trp_swadian_e_peasant", 210, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 17, "trp_nord_e_bondi", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 18, "trp_nord_e_bondi", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 19, "trp_khergit_e_tariachin", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 20, "trp_khergit_e_tariachin", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 21, "trp_vaegir_e_kholop", 790, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 22, "trp_vaegir_e_kholop", 790, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 23, "trp_sarranid_e_timariot", 790, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 24, "trp_sarranid_e_badw", 790, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 25, "trp_bandit_e_manhunter", 60, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 26, "trp_bandit_e_slave_driver", 210, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 27, "trp_bandit_e_slave_hunter", 360, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 28, "trp_bandit_e_slave_crusher", 500, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 29, "trp_bandit_e_slaver_chief", 640, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_e_looter", 115, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_e_bandit", 265, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_e_brigand", 420, 645),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_e_mountain", 115, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_e_forest", 115, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_e_sea_raider", 420, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_e_steppe", 420, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_e_taiga", 695, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_e_desert", 695, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_e_manhunter", 115, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_e_slave_driver", 265, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_e_slave_hunter", 420, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_bandit_e_slave_crusher", 550, 165),
			(call_script, "script_prsnt_lines", 110, 4, 85, 630),
			(call_script, "script_prsnt_lines", 55, 4, 140, 550),
			(call_script, "script_prsnt_lines", 110, 4, 235, 630),
			(call_script, "script_prsnt_lines", 55, 4, 290, 550),
			(call_script, "script_prsnt_lines", 100, 4, 390, 630),
			(call_script, "script_prsnt_lines", 50, 4, 440, 550),
			(call_script, "script_prsnt_lines", 55, 4, 85, 430),
			(call_script, "script_prsnt_lines", 55, 4, 140, 470),
			(call_script, "script_prsnt_lines", 55, 4, 140, 390),
			(call_script, "script_prsnt_lines", 55, 4, 85, 270),
			(call_script, "script_prsnt_lines", 55, 4, 140, 310),
			(call_script, "script_prsnt_lines", 55, 4, 140, 230),
			(call_script, "script_prsnt_lines", 55, 4, 390, 430),
			(call_script, "script_prsnt_lines", 55, 4, 440, 470),
			(call_script, "script_prsnt_lines", 55, 4, 440, 390),
			(call_script, "script_prsnt_lines", 55, 4, 390, 270),
			(call_script, "script_prsnt_lines", 55, 4, 440, 310),
			(call_script, "script_prsnt_lines", 55, 4, 440, 230),
			(call_script, "script_prsnt_lines", 55, 4, 665, 430),
			(call_script, "script_prsnt_lines", 55, 4, 720, 470),
			(call_script, "script_prsnt_lines", 55, 4, 720, 390),
			(call_script, "script_prsnt_lines", 55, 4, 665, 270),
			(call_script, "script_prsnt_lines", 55, 4, 720, 310),
			(call_script, "script_prsnt_lines", 55, 4, 720, 230),
			(call_script, "script_prsnt_lines", 110, 4, 85, 150),
			(call_script, "script_prsnt_lines", 110, 4, 235, 150),
			(call_script, "script_prsnt_lines", 100, 4, 390, 150),
			(call_script, "script_prsnt_lines", 110, 4, 520, 150),
			(call_script, "script_prsnt_lines", 4, 80, 140, 550),
			(call_script, "script_prsnt_lines", 4, 80, 290, 550),
			(call_script, "script_prsnt_lines", 4, 80, 440, 550),
			(call_script, "script_prsnt_lines", 4, 80, 140, 390),
			(call_script, "script_prsnt_lines", 4, 80, 140, 230),
			(call_script, "script_prsnt_lines", 4, 80, 440, 390),
			(call_script, "script_prsnt_lines", 4, 80, 440, 230),
			(call_script, "script_prsnt_lines", 4, 80, 720, 390),
			(call_script, "script_prsnt_lines", 4, 80, 720, 230)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 30),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_28"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_29", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_woman_e_refugee", 60, 400),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_mercenary_infantry_1", 60, 220),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_mercenary_infantry_1", 210, 490),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_mercenary_infantry_1", 210, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_mercenary_infantry_1", 210, 130),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_mercenary_infantry_1", 360, 550),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_mercenary_infantry_1", 360, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_mercenary_infantry_1", 360, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_mercenary_infantry_1", 360, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_mercenary_infantry_1", 360, 70),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_mercenary_infantry_1", 500, 590),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_mercenary_infantry_1", 500, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_mercenary_infantry_1", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_mercenary_infantry_1", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_mercenary_infantry_1", 500, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 15, "trp_mercenary_infantry_1", 500, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 16, "trp_mercenary_infantry_1", 500, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 17, "trp_mercenary_infantry_1", 500, 30),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 18, "trp_mercenary_infantry_1", 640, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 19, "trp_mercenary_infantry_1", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 20, "trp_mercenary_infantry_1", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 21, "trp_mercenary_infantry_1", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 22, "trp_mercenary_infantry_1", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 23, "trp_mercenary_infantry_1", 640, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 24, "trp_mercenary_infantry_1", 790, 510),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 25, "trp_mercenary_infantry_1", 790, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 26, "trp_mercenary_infantry_1", 790, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_woman_e_refugee", 115, 455),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 115, 275),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 265, 545),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 265, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 265, 185),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 605),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 420, 125),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 245),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 550, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 695, 565),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 695, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_mercenary_infantry_1", 695, 165),
			(call_script, "script_prsnt_lines", 55, 4, 85, 440),
			(call_script, "script_prsnt_lines", 55, 4, 140, 530),
			(call_script, "script_prsnt_lines", 55, 4, 140, 355),
			(call_script, "script_prsnt_lines", 55, 4, 85, 260),
			(call_script, "script_prsnt_lines", 55, 4, 140, 345),
			(call_script, "script_prsnt_lines", 55, 4, 140, 170),
			(call_script, "script_prsnt_lines", 55, 4, 235, 530),
			(call_script, "script_prsnt_lines", 55, 4, 290, 590),
			(call_script, "script_prsnt_lines", 55, 4, 290, 470),
			(call_script, "script_prsnt_lines", 110, 4, 235, 350),
			(call_script, "script_prsnt_lines", 55, 4, 235, 170),
			(call_script, "script_prsnt_lines", 55, 4, 290, 230),
			(call_script, "script_prsnt_lines", 55, 4, 290, 110),
			(call_script, "script_prsnt_lines", 50, 4, 390, 590),
			(call_script, "script_prsnt_lines", 50, 4, 440, 630),
			(call_script, "script_prsnt_lines", 50, 4, 440, 550),
			(call_script, "script_prsnt_lines", 100, 4, 390, 470),
			(call_script, "script_prsnt_lines", 50, 4, 390, 350),
			(call_script, "script_prsnt_lines", 50, 4, 440, 390),
			(call_script, "script_prsnt_lines", 50, 4, 440, 310),
			(call_script, "script_prsnt_lines", 100, 4, 390, 230),
			(call_script, "script_prsnt_lines", 50, 4, 390, 110),
			(call_script, "script_prsnt_lines", 50, 4, 440, 150),
			(call_script, "script_prsnt_lines", 50, 4, 440, 70),
			(call_script, "script_prsnt_lines", 110, 4, 520, 550),
			(call_script, "script_prsnt_lines", 110, 4, 520, 470),
			(call_script, "script_prsnt_lines", 110, 4, 520, 390),
			(call_script, "script_prsnt_lines", 110, 4, 520, 310),
			(call_script, "script_prsnt_lines", 110, 4, 520, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 150),
			(call_script, "script_prsnt_lines", 110, 4, 665, 550),
			(call_script, "script_prsnt_lines", 110, 4, 665, 310),
			(call_script, "script_prsnt_lines", 110, 4, 665, 150),
			(call_script, "script_prsnt_lines", 4, 175, 140, 355),
			(call_script, "script_prsnt_lines", 4, 175, 140, 170),
			(call_script, "script_prsnt_lines", 4, 120, 290, 470),
			(call_script, "script_prsnt_lines", 4, 120, 290, 110),
			(call_script, "script_prsnt_lines", 4, 80, 440, 550),
			(call_script, "script_prsnt_lines", 4, 80, 440, 550),
			(call_script, "script_prsnt_lines", 4, 80, 440, 310),
			(call_script, "script_prsnt_lines", 4, 80, 440, 70)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 27),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_29"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("upgrade_tree_30", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_prsnt_upgrade_tree_ready"),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 0, "trp_custom_e_recruit", 60, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 1, "trp_custom_e_militia", 210, 310),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 2, "trp_custom_e_hunter", 210, 150),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 3, "trp_custom_e_guard", 360, 390),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 4, "trp_custom_e_page", 360, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 5, "trp_custom_e_woodsman", 360, 70),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 6, "trp_custom_e_swordman", 500, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 7, "trp_custom_e_spearman", 500, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 8, "trp_custom_e_squire", 500, 230),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 9, "trp_custom_e_archer", 500, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 10, "trp_custom_e_skirmisher", 500, 30),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 11, "trp_custom_e_swordmaster", 640, 430),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 12, "trp_custom_e_spearmaster", 640, 350),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 13, "trp_custom_e_knight", 640, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 14, "trp_custom_e_horse_archer", 640, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 15, "trp_custom_e_expert_archer", 640, 110),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 16, "trp_custom_e_frontline_skirmisher", 640, 30),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 17, "trp_custom_e_heavy_knight", 790, 270),
			(call_script, "script_prsnt_upgrade_tree_troop_and_name", 18, "trp_custom_e_heavy_horse_archer", 790, 190),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_e_recruit", 115, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_e_militia", 265, 365),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_e_hunter", 265, 205),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_e_guard", 420, 445),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_e_page", 420, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_e_woodsman", 420, 125),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_e_swordman", 550, 485),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_e_spearman", 550, 405),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_e_squire", 550, 285),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_e_archer", 550, 165),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_e_skirmisher", 550, 85),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_e_knight", 695, 325),
			(call_script, "script_prsnt_upgrade_tree_troop_cost", "trp_custom_e_horse_archer", 695, 245),
			(call_script, "script_prsnt_lines", 55, 4, 85, 270),
			(call_script, "script_prsnt_lines", 55, 4, 140, 350),
			(call_script, "script_prsnt_lines", 55, 4, 140, 190),
			(call_script, "script_prsnt_lines", 55, 4, 235, 350),
			(call_script, "script_prsnt_lines", 55, 4, 290, 430),
			(call_script, "script_prsnt_lines", 55, 4, 290, 275),
			(call_script, "script_prsnt_lines", 55, 4, 235, 190),
			(call_script, "script_prsnt_lines", 55, 4, 290, 265),
			(call_script, "script_prsnt_lines", 55, 4, 290, 110),
			(call_script, "script_prsnt_lines", 50, 4, 390, 430),
			(call_script, "script_prsnt_lines", 50, 4, 440, 470),
			(call_script, "script_prsnt_lines", 50, 4, 440, 390),
			(call_script, "script_prsnt_lines", 100, 4, 390, 270),
			(call_script, "script_prsnt_lines", 50, 4, 390, 110),
			(call_script, "script_prsnt_lines", 50, 4, 440, 150),
			(call_script, "script_prsnt_lines", 50, 4, 440, 70),
			(call_script, "script_prsnt_lines", 110, 4, 520, 470),
			(call_script, "script_prsnt_lines", 110, 4, 520, 390),
			(call_script, "script_prsnt_lines", 55, 4, 520, 270),
			(call_script, "script_prsnt_lines", 55, 4, 575, 310),
			(call_script, "script_prsnt_lines", 55, 4, 575, 230),
			(call_script, "script_prsnt_lines", 110, 4, 520, 150),
			(call_script, "script_prsnt_lines", 110, 4, 520, 70),
			(call_script, "script_prsnt_lines", 110, 4, 665, 310),
			(call_script, "script_prsnt_lines", 110, 4, 665, 230),
			(call_script, "script_prsnt_lines", 4, 160, 140, 190),
			(call_script, "script_prsnt_lines", 4, 155, 290, 275),
			(call_script, "script_prsnt_lines", 4, 155, 290, 110),
			(call_script, "script_prsnt_lines", 4, 80, 440, 390),
			(call_script, "script_prsnt_lines", 4, 80, 440, 70),
			(call_script, "script_prsnt_lines", 4, 80, 575, 230)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(call_script, "script_prsnt_upgrade_tree_switch", ":trigger_param_1", ":trigger_param_2"),
			(try_for_range, ":number", 0, 19),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(troop_get_slot, "$temp", "trp_temp_array_b", ":number"),
				(assign, "$g_presentation_next_presentation", "prsnt_upgrade_tree_30"),
				(start_presentation, "prsnt_troop_note"),
			(try_end)
		])
	]),

	("troop_note", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_copy_inventory", "$temp", "trp_temp_array_a"),
			(try_for_range, ":number", 0, 10),
				(troop_get_inventory_slot, ":inventory_slot_temp_array_a_number", "trp_temp_array_a", ":number"),
				(gt, ":inventory_slot_temp_array_a_number", -1),
				(troop_add_item, "trp_temp_array_a", ":inventory_slot_temp_array_a_number"),
				(troop_set_inventory_slot, "trp_temp_array_a", ":number", -1),
			(try_end),
			(create_game_button_overlay, "$g_presentation_obj_1", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(store_mul, ":value", "$temp", 2),
			(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_game_party_window", ":value"),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 750),
			(position_set_y, 1, 350),
			(overlay_set_position, reg0, 1),
			(str_store_troop_name, 1, "$temp"),
			(store_character_level, ":character_level_temp", "$temp"),
			(assign, reg1, ":character_level_temp"),
			(str_store_string, 1, "@Name: {s1}^Level: {reg1}"),
			(call_script, "script_get_troop_max_hp", "$temp"),
			(str_store_string, 1, "@{s1}^HP: {reg0}"),
			(create_text_overlay, reg0, "@{s1}", 2048),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_position, reg0, 1),
			(str_store_string, 3, "@Attributes:"),
			(store_attribute_level, reg1, "$temp", 0),
			(store_attribute_level, reg2, "$temp", 2),
			(str_store_string, 3, "@{s3}^STR: {reg1}^INT: {reg2}^^Skills:"),
			(store_skill_level, reg1, 35, "$temp"),
			(store_skill_level, reg2, 33, "$temp"),
			(store_skill_level, reg3, 34, "$temp"),
			(store_skill_level, reg4, 23, "$temp"),
			(str_store_string, 3, "@{s3}^Power Strike: {reg1}^Power Draw: {reg2}^Power Throw: {reg3}^Horse Archery: {reg4}^^Weapon Proficiencies:"),
			(store_proficiency_level, reg1, "$temp", 0),
			(store_proficiency_level, reg2, "$temp", 1),
			(store_proficiency_level, reg3, "$temp", 2),
			(str_store_string, 3, "@{s3}^1 Hand Wpns: {reg1}^2 Hand Wpns: {reg2}^Polearms: {reg3}"),
			(create_text_overlay, reg0, "@{s3}", 2048),
			(position_set_x, 1, 500),
			(position_set_y, 1, 100),
			(overlay_set_position, reg0, 1),
			(str_store_string, 4, "str_empty_string"),
			(store_attribute_level, reg1, "$temp", 1),
			(store_attribute_level, reg2, "$temp", 3),
			(str_store_string, 4, "@{s4}^AGI: {reg1}^CHA: {reg2}^^"),
			(store_skill_level, reg1, 36, "$temp"),
			(store_skill_level, reg2, 25, "$temp"),
			(store_skill_level, reg3, 26, "$temp"),
			(store_skill_level, reg4, 24, "$temp"),
			(str_store_string, 4, "@{s4}^Ironflesh: {reg1}^Athletics: {reg2}^Shield: {reg3}^Riding: {reg4}^^"),
			(store_proficiency_level, reg1, "$temp", 3),
			(store_proficiency_level, reg2, "$temp", 4),
			(store_proficiency_level, reg3, "$temp", 5),
			(str_store_string, 4, "@{s4}^Archery: {reg1}^Crossbows: {reg2}^Throwing: {reg3}"),
			(create_text_overlay, reg0, "@{s4}", 2048),
			(position_set_x, 1, 710),
			(position_set_y, 1, 100),
			(overlay_set_position, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_2", 0, 8192),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(position_set_x, 1, 350),
			(position_set_y, 1, 560),
			(overlay_set_area_size, "$g_presentation_obj_2", 1),
			(set_container_overlay, "$g_presentation_obj_2"),
			(assign, ":value_2", 0),
			(assign, ":var_6", 1840),
			(assign, ":var_7", 10),
			(try_for_range, ":unused", 0, 24),
				(try_for_range, ":unused_2", 0, 4),
					(create_mesh_overlay, reg1, "mesh_inv_slot"),
					(position_set_x, 1, 800),
					(position_set_y, 1, 800),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, ":value_2"),
					(position_set_y, 1, ":var_6"),
					(overlay_set_position, reg1, 1),
					(create_mesh_overlay, reg1, "mesh_mp_inventory_choose"),
					(position_set_x, 1, 640),
					(position_set_y, 1, 640),
					(overlay_set_size, reg1, 1),
					(position_set_x, 1, ":value_2"),
					(position_set_y, 1, ":var_6"),
					(overlay_set_position, reg1, 1),
					(troop_set_slot, "trp_temp_array_a", ":var_7", reg1),
					(troop_get_inventory_slot, ":inventory_slot_temp_array_a_var_7", "trp_temp_array_a", ":var_7"),
					(try_begin),
						(gt, ":inventory_slot_temp_array_a_var_7", -1),
						(create_mesh_overlay_with_item_id, reg1, ":inventory_slot_temp_array_a_var_7"),
						(position_set_x, 1, 800),
						(position_set_y, 1, 800),
						(overlay_set_size, reg1, 1),
						(store_add, ":value_3", ":value_2", 40),
						(store_add, ":value_4", ":var_6", 40),
						(position_set_x, 1, ":value_3"),
						(position_set_y, 1, ":value_4"),
						(overlay_set_position, reg1, 1),
						(troop_set_slot, "trp_temp_array_b", ":var_7", reg1),
					(try_end),
					(val_add, ":value_2", 80),
					(val_add, ":var_7", 1),
				(try_end),
				(assign, ":value_2", 0),
				(val_sub, ":var_6", 80),
			(try_end),
			(set_container_overlay, -1),
			(create_text_overlay, reg1, "@Equipments: ", 4096),
			(position_set_x, 1, 60),
			(position_set_y, 1, 635),
			(overlay_set_position, reg1, 1)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_2", 0),
				(try_for_range, ":number", 10, 106),
					(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
					(troop_get_inventory_slot, ":inventory_slot_temp_array_a_number", "trp_temp_array_a", ":number"),
					(try_begin),
						(gt, ":inventory_slot_temp_array_a_number", -1),
						(troop_get_slot, ":temp_array_b_number", "trp_temp_array_b", ":number"),
						(overlay_get_position, 0, ":temp_array_b_number"),
						(show_item_details, ":inventory_slot_temp_array_a_number", 0, 100),
						(assign, "$g_current_opened_item_details", ":number"),
					(try_end),
				(try_end),
			(else_try),
				(try_for_range, ":number", 10, 106),
					(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
					(try_begin),
						(eq, "$g_current_opened_item_details", ":number"),
						(close_item_details),
					(try_end),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(try_begin),
					(gt, "$g_presentation_next_presentation", -1),
					(try_begin),
						(eq, "$troop_trees", "trp_troop_tree_0"),
						(store_sub, "$temp_2", "$g_presentation_next_presentation", "prsnt_upgrade_tree_1"),
					(else_try),
						(eq, "$troop_trees", "trp_troop_tree_1"),
						(store_sub, "$temp_2", "$g_presentation_next_presentation", "prsnt_upgrade_tree_11"),
					(else_try),
						(eq, "$troop_trees", "trp_troop_tree_2"),
						(store_sub, "$temp_2", "$g_presentation_next_presentation", "prsnt_upgrade_tree_21"),
					(try_end),
					(start_presentation, "$g_presentation_next_presentation"),
				(else_try),
					(presentation_set_duration, 0),
				(try_end),
			(try_end)
		])
	]),

	("all_items", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_combo_label_overlay, "$g_presentation_obj_1"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 675),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(overlay_add_item, "$g_presentation_obj_1", "@One-Handed Weapons"),
			(overlay_add_item, "$g_presentation_obj_1", "@Two-Handed Weapons"),
			(overlay_add_item, "$g_presentation_obj_1", "@Polearms"),
			(overlay_add_item, "$g_presentation_obj_1", "@Ranged Weapons"),
			(overlay_add_item, "$g_presentation_obj_1", "@Shields"),
			(overlay_add_item, "$g_presentation_obj_1", "@Helmets"),
			(overlay_add_item, "$g_presentation_obj_1", "@Armors"),
			(overlay_add_item, "$g_presentation_obj_1", "@Boots"),
			(overlay_add_item, "$g_presentation_obj_1", "@Gauntlets"),
			(overlay_add_item, "$g_presentation_obj_1", "@Horses"),
			(overlay_set_val, "$g_presentation_obj_1", "$temp"),
			(create_game_button_overlay, "$g_presentation_obj_5", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_5", 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_6", 0, 8192),
			(position_set_x, 1, 50),
			(position_set_y, 1, 100),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(position_set_x, 1, 890),
			(position_set_y, 1, 560),
			(overlay_set_area_size, "$g_presentation_obj_6", 1),
			(set_container_overlay, "$g_presentation_obj_6"),
			(assign, ":var_1", 1025),
			(assign, "$temp_2", 0),
			(try_begin),
				(eq, "$temp", 0),
				(try_for_range, ":number", 0, ":var_1"),
					(item_get_type, ":type_number", ":number"),
					(eq, ":type_number", 2),
					(val_add, "$temp_2", 1),
				(try_end),
			(else_try),
				(eq, "$temp", 1),
				(try_for_range, ":number", 0, ":var_1"),
					(item_get_type, ":type_number", ":number"),
					(eq, ":type_number", 3),
					(val_add, "$temp_2", 1),
				(try_end),
			(else_try),
				(eq, "$temp", 2),
				(try_for_range, ":number", 0, ":var_1"),
					(item_get_type, ":type_number", ":number"),
					(eq, ":type_number", 4),
					(val_add, "$temp_2", 1),
				(try_end),
			(else_try),
				(eq, "$temp", 3),
				(try_for_range, ":number", 0, ":var_1"),
					(item_get_type, ":type_number", ":number"),
					(this_or_next|eq, ":type_number", 6),
					(this_or_next|eq, ":type_number", 8),
					(this_or_next|eq, ":type_number", 9),
					(this_or_next|eq, ":type_number", 10),
					(this_or_next|eq, ":type_number", 16),
					(this_or_next|eq, ":type_number", 17),
					(eq, ":type_number", 18),
					(val_add, "$temp_2", 1),
				(try_end),
			(else_try),
				(eq, "$temp", 4),
				(try_for_range, ":number", 0, ":var_1"),
					(item_get_type, ":type_number", ":number"),
					(eq, ":type_number", 7),
					(val_add, "$temp_2", 1),
				(try_end),
			(else_try),
				(eq, "$temp", 5),
				(try_for_range, ":number", 0, ":var_1"),
					(item_get_type, ":type_number", ":number"),
					(eq, ":type_number", 12),
					(val_add, "$temp_2", 1),
				(try_end),
			(else_try),
				(eq, "$temp", 6),
				(try_for_range, ":number", 0, ":var_1"),
					(item_get_type, ":type_number", ":number"),
					(eq, ":type_number", 13),
					(val_add, "$temp_2", 1),
				(try_end),
			(else_try),
				(eq, "$temp", 7),
				(try_for_range, ":number", 0, ":var_1"),
					(item_get_type, ":type_number", ":number"),
					(eq, ":type_number", 14),
					(val_add, "$temp_2", 1),
				(try_end),
			(else_try),
				(eq, "$temp", 8),
				(try_for_range, ":number", 0, ":var_1"),
					(item_get_type, ":type_number", ":number"),
					(eq, ":type_number", 15),
					(val_add, "$temp_2", 1),
				(try_end),
			(else_try),
				(eq, "$temp", 9),
				(try_for_range, ":number", 0, ":var_1"),
					(item_get_type, ":type_number", ":number"),
					(eq, ":type_number", 1),
					(val_add, "$temp_2", 1),
				(try_end),
			(try_end),
			(store_div, ":value", "$temp_2", 11),
			(store_mod, ":value_2", "$temp_2", 11),
			(val_min, ":value_2", 1),
			(val_add, ":value", ":value_2"),
			(store_mul, ":value_3", ":value", 80),
			(val_sub, ":value_3", 80),
			(assign, ":value_4", 0),
			(assign, ":var_8", 0),
			(try_for_range, ":number", 0, ":var_1"),
				(item_get_type, ":type_number", ":number"),
				(try_begin),
					(eq, "$temp", 0),
					(try_begin),
						(eq, ":type_number", 2),
						(assign, ":value_5", 1),
					(else_try),
						(assign, ":value_5", 0),
					(try_end),
				(else_try),
					(eq, "$temp", 1),
					(try_begin),
						(eq, ":type_number", 3),
						(assign, ":value_5", 1),
					(else_try),
						(assign, ":value_5", 0),
					(try_end),
				(else_try),
					(eq, "$temp", 2),
					(try_begin),
						(eq, ":type_number", 4),
						(assign, ":value_5", 1),
					(else_try),
						(assign, ":value_5", 0),
					(try_end),
				(else_try),
					(eq, "$temp", 3),
					(try_begin),
						(this_or_next|eq, ":type_number", 6),
						(this_or_next|eq, ":type_number", 8),
						(this_or_next|eq, ":type_number", 9),
						(this_or_next|eq, ":type_number", 10),
						(this_or_next|eq, ":type_number", 16),
						(this_or_next|eq, ":type_number", 17),
						(eq, ":type_number", 18),
						(assign, ":value_5", 1),
					(else_try),
						(assign, ":value_5", 0),
					(try_end),
				(else_try),
					(eq, "$temp", 4),
					(try_begin),
						(eq, ":type_number", 7),
						(assign, ":value_5", 1),
					(else_try),
						(assign, ":value_5", 0),
					(try_end),
				(else_try),
					(eq, "$temp", 5),
					(try_begin),
						(eq, ":type_number", 12),
						(assign, ":value_5", 1),
					(else_try),
						(assign, ":value_5", 0),
					(try_end),
				(else_try),
					(eq, "$temp", 6),
					(try_begin),
						(eq, ":type_number", 13),
						(assign, ":value_5", 1),
					(else_try),
						(assign, ":value_5", 0),
					(try_end),
				(else_try),
					(eq, "$temp", 7),
					(try_begin),
						(eq, ":type_number", 14),
						(assign, ":value_5", 1),
					(else_try),
						(assign, ":value_5", 0),
					(try_end),
				(else_try),
					(eq, "$temp", 8),
					(try_begin),
						(eq, ":type_number", 15),
						(assign, ":value_5", 1),
					(else_try),
						(assign, ":value_5", 0),
					(try_end),
				(else_try),
					(eq, "$temp", 9),
					(try_begin),
						(eq, ":type_number", 1),
						(assign, ":value_5", 1),
					(else_try),
						(assign, ":value_5", 0),
					(try_end),
				(else_try),
					(eq, "$temp", 10),
					(try_begin),
						(this_or_next|eq, ":type_number", 11),
						(this_or_next|eq, ":type_number", 19),
						(eq, ":type_number", 20),
						(assign, ":value_5", 1),
					(else_try),
						(assign, ":value_5", 0),
					(try_end),
				(try_end),
				(eq, ":value_5", 1),
				(create_mesh_overlay, reg1, "mesh_inv_slot"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg1, 1),
				(create_mesh_overlay, reg1, "mesh_mp_inventory_choose"),
				(position_set_x, 1, 640),
				(position_set_y, 1, 640),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg1, 1),
				(troop_set_slot, "trp_temp_array_a", ":var_8", reg1),
				(create_mesh_overlay_with_item_id, reg1, ":number"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg1, 1),
				(store_add, ":value_6", ":value_4", 40),
				(store_add, ":value_7", ":value_3", 40),
				(position_set_x, 1, ":value_6"),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(troop_set_slot, "trp_temp_array_b", ":var_8", reg1),
				(troop_set_slot, "trp_temp_array_c", ":var_8", ":number"),
				(val_add, ":value_4", 80),
				(val_add, ":var_8", 1),
				(try_begin),
					(ge, ":value_4", 880),
					(assign, ":value_4", 0),
					(val_sub, ":value_3", 80),
				(try_end),
			(try_end),
			(set_container_overlay, -1)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_2", 0),
				(try_for_range, ":number", 0, "$temp_2"),
					(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
					(troop_get_slot, ":temp_array_c_number", "trp_temp_array_c", ":number"),
					(troop_get_slot, ":temp_array_b_number", "trp_temp_array_b", ":number"),
					(overlay_get_position, 0, ":temp_array_b_number"),
					(show_item_details, ":temp_array_c_number", 0, 100),
					(assign, "$g_current_opened_item_details", ":number"),
				(try_end),
			(else_try),
				(try_for_range, ":number", 0, "$temp_2"),
					(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
					(try_begin),
						(eq, "$g_current_opened_item_details", ":number"),
						(close_item_details),
					(try_end),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(assign, "$temp", ":trigger_param_2"),
				(start_presentation, "prsnt_all_items"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_5"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("change_commander", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(position_set_x, 1, 400),
			(position_set_y, 1, 670),
			(str_store_troop_name, 0, "$g_player_troop"),
			(str_store_string, 1, "@Please reselect a companion as the commander for the comming battle.^^Current commander: {s0}."),
			(create_text_overlay, "$g_presentation_obj_1", "@{s1}", 4112),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(create_game_button_overlay, "$g_presentation_obj_2", "@Done"),
			(position_set_x, 1, 850),
			(position_set_y, 1, 40),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_6", 0, 8192),
			(position_set_x, 1, 750),
			(position_set_y, 1, 150),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(position_set_x, 1, 200),
			(position_set_y, 1, 400),
			(overlay_set_area_size, "$g_presentation_obj_6", 1),
			(set_container_overlay, "$g_presentation_obj_6"),
			(assign, ":value", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
				(troop_is_hero, ":party_stack_troop_id_main_party_number"),
				(neg|troop_is_wounded, ":party_stack_troop_id_main_party_number"),
				(val_add, ":value", 1),
			(try_end),
			(try_begin),
				(le, ":value", 10),
				(assign, ":value_2", 400),
			(else_try),
				(store_mul, ":value_2", ":value", 40),
			(try_end),
			(val_sub, ":value_2", 40),
			(assign, ":var_6", 0),
			(assign, ":value", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
				(troop_is_hero, ":party_stack_troop_id_main_party_number"),
				(neg|troop_is_wounded, ":party_stack_troop_id_main_party_number"),
				(str_store_troop_name, 1, ":party_stack_troop_id_main_party_number"),
				(position_set_x, 1, ":var_6"),
				(position_set_y, 1, ":value_2"),
				(val_sub, ":value_2", 40),
				(create_button_overlay, reg0, "@{s1}"),
				(overlay_set_position, reg0, 1),
				(assign, ":var_7", ":value"),
				(troop_set_slot, "trp_temp_array_a", ":var_7", reg0),
				(troop_set_slot, "trp_temp_array_b", ":var_7", ":party_stack_troop_id_main_party_number"),
				(val_add, ":value", 1),
			(try_end),
			(set_container_overlay, -1),
			(create_mesh_overlay_with_tableau_material, reg0, -1, "tableau_troop_note_mesh", "$g_player_troop"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 150),
			(position_set_y, 1, 450),
			(overlay_set_position, reg0, 1),
			(str_store_troop_name, 1, "$g_player_troop"),
			(store_character_level, ":character_level_g_player_troop", "$g_player_troop"),
			(assign, reg1, ":character_level_g_player_troop"),
			(str_store_string, 1, "@Name: {s1}^Level: {reg1}"),
			(store_troop_health, ":troop_health_g_player_troop_1", "$g_player_troop", 1),
			(call_script, "script_get_troop_max_hp", "$g_player_troop"),
			(assign, reg1, ":troop_health_g_player_troop_1"),
			(assign, reg2, reg0),
			(str_store_string, 1, "@{s1}^HP: {reg1}/{reg2}"),
			(create_text_overlay, reg0, "@{s1}", 2048),
			(position_set_x, 1, 380),
			(position_set_y, 1, 450),
			(overlay_set_position, reg0, 1),
			(str_store_string, 2, "@Arms:"),
			(try_for_range, ":number_2", 0, 4),
				(troop_get_inventory_slot, ":inventory_slot_g_player_troop_number_2", "$g_player_troop", ":number_2"),
				(troop_get_inventory_slot_modifier, ":inventory_slot_modifier_g_player_troop_number_2", "$g_player_troop", ":number_2"),
				(try_begin),
					(lt, ":inventory_slot_g_player_troop_number_2", 0),
					(str_store_string, 2, "@{s2}^None"),
				(else_try),
					(str_store_item_name, 3, ":inventory_slot_g_player_troop_number_2"),
					(store_sub, ":value_3", ":inventory_slot_modifier_g_player_troop_number_2", 0),
					(val_add, ":value_3", "str_imod_plain"),
					(str_store_string, 4, ":value_3"),
					(try_begin),
						(eq, ":inventory_slot_modifier_g_player_troop_number_2", 0),
						(str_store_string, 2, "@{s2}^{s3}"),
					(else_try),
						(str_store_string, 2, "@{s2}^{s4}{s3}"),
					(try_end),
				(try_end),
			(try_end),
			(str_store_string, 2, "@{s2}^^Outfits:"),
			(try_for_range, ":number_2", 4, 8),
				(troop_get_inventory_slot, ":inventory_slot_g_player_troop_number_2", "$g_player_troop", ":number_2"),
				(troop_get_inventory_slot_modifier, ":inventory_slot_modifier_g_player_troop_number_2", "$g_player_troop", ":number_2"),
				(try_begin),
					(lt, ":inventory_slot_g_player_troop_number_2", 0),
					(str_store_string, 2, "@{s2}^None"),
				(else_try),
					(str_store_item_name, 3, ":inventory_slot_g_player_troop_number_2"),
					(store_sub, ":value_3", ":inventory_slot_modifier_g_player_troop_number_2", 0),
					(val_add, ":value_3", "str_imod_plain"),
					(str_store_string, 4, ":value_3"),
					(try_begin),
						(eq, ":inventory_slot_modifier_g_player_troop_number_2", 0),
						(str_store_string, 2, "@{s2}^{s3}"),
					(else_try),
						(str_store_string, 2, "@{s2}^{s4}{s3}"),
					(try_end),
				(try_end),
			(try_end),
			(str_store_string, 2, "@{s2}^^Horse:"),
			(troop_get_inventory_slot, ":inventory_slot_g_player_troop_number_2", "$g_player_troop", 8),
			(troop_get_inventory_slot_modifier, ":inventory_slot_modifier_g_player_troop_number_2", "$g_player_troop", 8),
			(try_begin),
				(lt, ":inventory_slot_g_player_troop_number_2", 0),
				(str_store_string, 2, "@{s2}^None"),
			(else_try),
				(str_store_item_name, 3, ":inventory_slot_g_player_troop_number_2"),
				(store_sub, ":value_3", ":inventory_slot_modifier_g_player_troop_number_2", 0),
				(val_add, ":value_3", "str_imod_plain"),
				(str_store_string, 4, ":value_3"),
				(str_store_string, 2, "@{s2}^{s4}{s3}"),
			(try_end),
			(create_text_overlay, reg0, "@{s2}", 2064),
			(position_set_x, 1, 190),
			(position_set_y, 1, 50),
			(overlay_set_position, reg0, 1),
			(str_store_string, 3, "@Attributes:"),
			(store_attribute_level, reg1, "$g_player_troop", 0),
			(store_attribute_level, reg2, "$g_player_troop", 2),
			(str_store_string, 3, "@{s3}^STR: {reg1}^INT: {reg2}^^Skills:"),
			(store_skill_level, reg1, 35, "$g_player_troop"),
			(store_skill_level, reg2, 33, "$g_player_troop"),
			(store_skill_level, reg3, 34, "$g_player_troop"),
			(store_skill_level, reg4, 23, "$g_player_troop"),
			(str_store_string, 3, "@{s3}^Power Strike: {reg1}^Power Draw: {reg2}^Power Throw: {reg3}^Horse Archery: {reg4}^^Weapon Proficiencies:"),
			(store_proficiency_level, reg1, "$g_player_troop", 0),
			(store_proficiency_level, reg2, "$g_player_troop", 1),
			(store_proficiency_level, reg3, "$g_player_troop", 2),
			(str_store_string, 3, "@{s3}^1 Hand Wpns: {reg1}^2 Hand Wpns: {reg2}^Polearms: {reg3}"),
			(create_text_overlay, reg0, "@{s3}", 2048),
			(position_set_x, 1, 380),
			(position_set_y, 1, 50),
			(overlay_set_position, reg0, 1),
			(str_store_string, 4, "str_empty_string"),
			(store_attribute_level, reg1, "$g_player_troop", 1),
			(store_attribute_level, reg2, "$g_player_troop", 3),
			(str_store_string, 4, "@{s4}^AGI: {reg1}^CHA: {reg2}^^"),
			(store_skill_level, reg1, 36, "$g_player_troop"),
			(store_skill_level, reg2, 25, "$g_player_troop"),
			(store_skill_level, reg3, 26, "$g_player_troop"),
			(store_skill_level, reg4, 24, "$g_player_troop"),
			(str_store_string, 4, "@{s4}^Ironflesh: {reg1}^Athletics: {reg2}^Shield: {reg3}^Riding: {reg4}^^"),
			(store_proficiency_level, reg1, "$g_player_troop", 3),
			(store_proficiency_level, reg2, "$g_player_troop", 4),
			(store_proficiency_level, reg3, "$g_player_troop", 5),
			(str_store_string, 4, "@{s4}^Archery: {reg1}^Crossbows: {reg2}^Throwing: {reg3}"),
			(create_text_overlay, reg0, "@{s4}", 2048),
			(position_set_x, 1, 590),
			(position_set_y, 1, 50),
			(overlay_set_position, reg0, 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_2"),
				(presentation_set_duration, 0),
			(try_end),
			(assign, ":var_2", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
				(troop_is_hero, ":party_stack_troop_id_main_party_number"),
				(neg|troop_is_wounded, ":party_stack_troop_id_main_party_number"),
				(assign, ":var_6", ":var_2"),
				(val_add, ":var_2", 1),
				(troop_slot_eq, "trp_temp_array_a", ":var_6", ":trigger_param_1"),
				(troop_get_slot, ":temp_array_b_var_6", "trp_temp_array_b", ":var_6"),
				(assign, "$g_player_troop", ":temp_array_b_var_6"),
				(start_presentation, "prsnt_change_commander"),
			(try_end)
		])
	]),

	("deposit_withdraw_money", 0, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(party_get_slot, ":current_town_15", "$current_town", 15),
			(store_troop_gold, ":troop_gold_current_town_15", ":current_town_15"),
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(create_mesh_overlay, reg0, "mesh_message_window"),
			(position_set_x, 1, 224),
			(position_set_y, 1, 230),
			(overlay_set_position, reg0, 1),
			(assign, reg1, ":troop_gold_current_town_15"),
			(create_text_overlay, reg0, "@{reg1}^money in the chest", 4112),
			(position_set_x, 1, 370),
			(position_set_y, 1, 320),
			(overlay_set_position, reg0, 1),
			(assign, reg2, ":troop_gold_player"),
			(create_text_overlay, reg0, "@{reg2}^money in your inventory", 4112),
			(position_set_x, 1, 630),
			(position_set_y, 1, 320),
			(overlay_set_position, reg0, 1),
			(create_combo_button_overlay, "$g_presentation_obj_1"),
			(position_set_x, 1, 480),
			(position_set_y, 1, 380),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_1", 1),
			(overlay_add_item, "$g_presentation_obj_1", "@Withdraw"),
			(overlay_add_item, "$g_presentation_obj_1", "@Deposit"),
			(overlay_set_val, "$g_presentation_obj_1", 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 380),
			(val_add, ":troop_gold_player", 1),
			(create_number_box_overlay, "$g_presentation_obj_2", 0, ":troop_gold_player"),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(overlay_set_val, "$g_presentation_obj_2", 0),
			(overlay_set_display, "$g_presentation_obj_2", 1),
			(val_add, ":troop_gold_current_town_15", 1),
			(create_number_box_overlay, "$g_presentation_obj_3", 0, ":troop_gold_current_town_15"),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(overlay_set_val, "$g_presentation_obj_3", 0),
			(overlay_set_display, "$g_presentation_obj_3", 0),
			(create_game_button_overlay, "$g_presentation_obj_5", "@Done"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 250),
			(overlay_set_position, "$g_presentation_obj_5", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_set_display, "$g_presentation_obj_2", 1),
					(overlay_set_display, "$g_presentation_obj_3", 0),
				(else_try),
					(overlay_set_display, "$g_presentation_obj_2", 0),
					(overlay_set_display, "$g_presentation_obj_3", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_2"),
				(party_get_slot, ":current_town_15", "$current_town", 15),
				(gt, ":trigger_param_2", 0),
				(troop_remove_gold, "trp_player", ":trigger_param_2"),
				(troop_add_gold, ":current_town_15", ":trigger_param_2"),
				(start_presentation, "prsnt_deposit_withdraw_money"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_3"),
				(party_get_slot, ":current_town_15", "$current_town", 15),
				(gt, ":trigger_param_2", 0),
				(troop_remove_gold, ":current_town_15", ":trigger_param_2"),
				(troop_add_gold, "trp_player", ":trigger_param_2"),
				(start_presentation, "prsnt_deposit_withdraw_money"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_5"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("mod_option", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(party_slot_eq, "p_main_party", 72, 0),
				(call_script, "script_prebattle_set_default_prefs"),
				(party_set_slot, "p_main_party", 72, 1),
			(try_end),
			(str_clear, 0),
			(create_text_overlay, reg0, 0, 8192),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 550),
			(position_set_y, 1, 650),
			(overlay_set_area_size, reg0, 1),
			(set_container_overlay, reg0),
			(assign, ":var_1", 40),
			(val_add, ":var_1", 2),
			(assign, ":var_2", 50),
			(store_div, ":value", ":var_2", 2),
			(store_mul, ":value_2", ":var_2", ":var_1"),
			(store_sub, ":value_3", ":value_2", 5),
			(position_set_x, 1, 50),
			(create_text_overlay, reg0, "@Record Battle Size as set in Options:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(store_sub, ":value_4", ":value_2", ":value"),
			(val_sub, ":value_2", ":var_2"),
			(val_sub, ":value_2", 30),
			(create_text_overlay, reg0, "@The 'Weapon Use Fixes' change NPC decision-^making with the following weapon types.^^Un-tick the boxes if you dislike the behavior.", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(val_sub, ":value_2", 20),
			(create_text_overlay, reg0, "@Use NPC Lancer Fix:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Use NPC Horse Archer Fix:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Use NPC Spear/Polearm Fix:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Use Pike/Horse Damage Tweaks:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(store_add, ":value_5", ":value_2", ":value"),
			(create_text_overlay, reg0, "@Distance limit for showing HP bars:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Show health bars of ally troops:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Show health bars of enemy troops:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(store_add, ":value_6", ":value_2", ":value"),
			(create_text_overlay, reg0, "@Show battle minimap:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Size of battle minimap (%):", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Enable Battle Continuation:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Batt. Cont., Charge after KO:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Formations Battle AI:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Enable AI to use Special Orders:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Reassign De-horsed Cavalry to:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Reassign No-Ammo Archers to:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Reinforcement waves:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Report shot distance:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Report extra XP & Wpn Prof:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(store_add, ":value_7", ":value_2", ":value"),
			(create_text_overlay, reg0, "@Enable Bodyguards in Towns/Villages:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Morale threshold for consuming food^twice the speed as much as normal:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(val_sub, ":value_2", 15),
			(create_text_overlay, reg0, "@Speed of battles on the map:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(store_add, ":value_8", ":value_2", ":value"),
			(create_text_overlay, reg0, "@Skill penalty from encumbrance:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Ranged penalty from weather:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Disable horse speed scaling:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Allow drowning in missions:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Terrain advantage in Autocalc battles:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@This does nothing:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(store_add, ":value_9", ":value_2", ":value"),
			(create_text_overlay, reg0, "@Lords returning from exile:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Diplomacy AI changes:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Diplomacy economic changes:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Anti-woman prejudice level:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(store_add, ":value_10", ":value_2", ":value"),
			(create_text_overlay, reg0, "@Enable Fog of War:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Disable Time of Day:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Probability of rain/snow (%):", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Cloud amount:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Fog strength:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Disable companions' complaints:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Enable debug mode:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(store_add, ":value_11", ":value_2", ":value"),
			(call_script, "script_prsnt_lines", 640, 2, 50, ":value_4"),
			(call_script, "script_prsnt_lines", 640, 2, 50, ":value_5"),
			(call_script, "script_prsnt_lines", 640, 2, 50, ":value_6"),
			(call_script, "script_prsnt_lines", 640, 2, 50, ":value_7"),
			(call_script, "script_prsnt_lines", 640, 2, 50, ":value_8"),
			(call_script, "script_prsnt_lines", 640, 2, 50, ":value_9"),
			(call_script, "script_prsnt_lines", 640, 2, 50, ":value_10"),
			(call_script, "script_prsnt_lines", 640, 2, 50, ":value_11"),
			(position_set_x, 1, 450),
			(val_sub, ":value_3", 9),
			(create_number_box_overlay, "$g_presentation_obj_1", 30, 1001),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(party_get_slot, ":main_party_center_accumulated_tariffs", "p_main_party", slot_center_accumulated_tariffs),
			(overlay_set_val, "$g_presentation_obj_1", ":main_party_center_accumulated_tariffs"),
			(val_sub, ":value_3", ":var_2"),
			(val_sub, ":value_3", ":var_2"),
			(val_sub, ":value_3", 41),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(party_get_slot, ":main_party_town_arena_melee_mission_tpl", "p_main_party", slot_town_arena_melee_mission_tpl),
			(overlay_set_val, reg0, ":main_party_town_arena_melee_mission_tpl"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(party_get_slot, ":main_party_town_arena_torny_mission_tpl", "p_main_party", slot_town_arena_torny_mission_tpl),
			(overlay_set_val, reg0, ":main_party_town_arena_torny_mission_tpl"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(party_get_slot, ":main_party_town_arena_melee_1_num_teams", "p_main_party", slot_town_arena_melee_1_num_teams),
			(overlay_set_val, reg0, ":main_party_town_arena_melee_1_num_teams"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(party_get_slot, ":main_party_town_arena_melee_1_team_size", "p_main_party", slot_town_arena_melee_1_team_size),
			(overlay_set_val, reg0, ":main_party_town_arena_melee_1_team_size"),
			(val_sub, ":value_3", ":var_2"),
			(create_number_box_overlay, reg0, 3, 81),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_hp_bar_dis_limit"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_hp_bar_ally"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_hp_bar_enemy"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_show_minimap"),
			(val_sub, ":value_3", ":var_2"),
			(create_number_box_overlay, reg0, 60, 111),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_minimap_ratio"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(party_get_slot, ":main_party_town_arena_melee_3_team_size", "p_main_party", slot_town_arena_melee_3_team_size),
			(overlay_set_val, reg0, ":main_party_town_arena_melee_3_team_size"),
			(val_sub, ":value_3", ":var_2"),
			(create_combo_button_overlay, reg0),
			(position_set_x, 1, 485),
			(val_sub, ":value_3", 8),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(overlay_add_item, reg0, "@{!}- Disabled -"),
			(overlay_add_item, reg0, "@Charge All"),
			(overlay_add_item, reg0, "@Formations AI"),
			(position_set_x, 1, 450),
			(party_get_slot, ":main_party_town_arena_melee_cur_tier", "p_main_party", slot_town_arena_melee_cur_tier),
			(overlay_set_val, reg0, ":main_party_town_arena_melee_cur_tier"),
			(val_add, ":value_3", 8),
			(val_sub, ":value_3", ":var_2"),
			(create_combo_button_overlay, reg0),
			(position_set_x, 1, 485),
			(val_sub, ":value_3", 8),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(overlay_add_item, reg0, "@{!}- Disabled -"),
			(overlay_add_item, reg0, "@Formations AI"),
			(overlay_add_item, reg0, "@Native AI, w/Formations"),
			(position_set_x, 1, 450),
			(party_get_slot, ":main_party_town_arena_melee_2_team_size", "p_main_party", slot_town_arena_melee_2_team_size),
			(overlay_set_val, reg0, ":main_party_town_arena_melee_2_team_size"),
			(val_add, ":value_3", 8),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(party_get_slot, ":main_party_town_arena_melee_2_num_teams", "p_main_party", slot_town_arena_melee_2_num_teams),
			(overlay_set_val, reg0, ":main_party_town_arena_melee_2_num_teams"),
			(val_sub, ":value_3", ":var_2"),
			(create_combo_button_overlay, reg0),
			(position_set_x, 1, 485),
			(val_sub, ":value_3", 8),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(try_for_range, ":number", 0, 9),
				(str_store_class_name, 1, ":number"),
				(overlay_add_item, reg0, 1),
			(try_end),
			(overlay_add_item, reg0, "@{!}- Disabled -"),
			(party_get_slot, ":main_party_town_village_product", "p_main_party", slot_town_village_product),
			(overlay_set_val, reg0, ":main_party_town_village_product"),
			(position_set_x, 1, 450),
			(val_add, ":value_3", 8),
			(val_sub, ":value_3", ":var_2"),
			(create_combo_button_overlay, reg0),
			(position_set_x, 1, 485),
			(val_sub, ":value_3", 8),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(try_for_range, ":number", 0, 9),
				(str_store_class_name, 1, ":number"),
				(overlay_add_item, reg0, 1),
			(try_end),
			(overlay_add_item, reg0, "@{!}- Disabled -"),
			(party_get_slot, ":main_party_town_rebellion_readiness", "p_main_party", slot_town_rebellion_readiness),
			(overlay_set_val, reg0, ":main_party_town_rebellion_readiness"),
			(position_set_x, 1, 450),
			(val_add, ":value_3", 8),
			(val_sub, ":value_3", ":var_2"),
			(create_number_box_overlay, reg0, 2, 101),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_reinforcement_stage"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_report_shot_distance"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_report_extra_xp_and_wpt"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(party_get_slot, ":main_party_town_arena_melee_3_num_teams", "p_main_party", slot_town_arena_melee_3_num_teams),
			(overlay_set_val, reg0, ":main_party_town_arena_melee_3_num_teams"),
			(val_sub, ":value_3", ":var_2"),
			(create_number_box_overlay, reg0, 0, 100),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_morale_threshold"),
			(val_sub, ":value_3", ":var_2"),
			(val_sub, ":value_3", 15),
			(create_number_box_overlay, reg0, 1, 6),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_speed_ai_battles"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_encumbrance_penalty"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(party_get_slot, ":main_party_87", "p_main_party", 87),
			(overlay_set_val, reg0, ":main_party_87"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_dplmc_horse_speed"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$drowning"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(store_add, ":value_12", "$g_dplmc_terrain_advantage", 1),
			(overlay_set_val, reg0, ":value_12"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_wp_tpe_active"),
			(val_sub, ":value_3", ":var_2"),
			(create_combo_button_overlay, reg0),
			(position_set_x, 1, 485),
			(val_sub, ":value_3", 8),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(overlay_add_item, reg0, "@{!}- Disabled -"),
			(overlay_add_item, reg0, "@Enabled"),
			(overlay_add_item, reg0, "@Frequent"),
			(position_set_x, 1, 450),
			(store_add, ":value_12", "$g_dplmc_lord_recycling", 1),
			(overlay_set_val, reg0, ":value_12"),
			(val_add, ":value_3", 8),
			(val_sub, ":value_3", ":var_2"),
			(create_combo_button_overlay, reg0),
			(position_set_x, 1, 485),
			(val_sub, ":value_3", 8),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(overlay_add_item, reg0, "@{!}- Disabled -"),
			(overlay_add_item, reg0, "@Low"),
			(overlay_add_item, reg0, "@Medium"),
			(overlay_add_item, reg0, "@High/Experimental"),
			(position_set_x, 1, 450),
			(store_add, ":value_12", "$g_dplmc_ai_changes", 1),
			(overlay_set_val, reg0, ":value_12"),
			(val_add, ":value_3", 8),
			(val_sub, ":value_3", ":var_2"),
			(create_combo_button_overlay, reg0),
			(position_set_x, 1, 485),
			(val_sub, ":value_3", 8),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(overlay_add_item, reg0, "@{!}- Disabled -"),
			(overlay_add_item, reg0, "@Low"),
			(overlay_add_item, reg0, "@Medium"),
			(overlay_add_item, reg0, "@High/Experimental"),
			(position_set_x, 1, 450),
			(store_add, ":value_12", "$g_dplmc_gold_changes", 1),
			(overlay_set_val, reg0, ":value_12"),
			(val_add, ":value_3", 8),
			(val_sub, ":value_3", ":var_2"),
			(create_combo_button_overlay, reg0),
			(position_set_x, 1, 485),
			(val_sub, ":value_3", 8),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(overlay_add_item, reg0, "@{!}- Disabled -"),
			(overlay_add_item, reg0, "@Default"),
			(overlay_add_item, reg0, "@High"),
			(position_set_x, 1, 450),
			(try_begin),
				(this_or_next|eq, "$g_disable_condescending_comments", 2),
				(eq, "$g_disable_condescending_comments", 3),
				(assign, ":value_12", 0),
			(else_try),
				(this_or_next|eq, "$g_disable_condescending_comments", -1),
				(eq, "$g_disable_condescending_comments", -2),
				(assign, ":value_12", 2),
			(else_try),
				(assign, ":value_12", 1),
			(try_end),
			(overlay_set_val, reg0, ":value_12"),
			(val_add, ":value_3", 8),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_fog"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_date"),
			(val_sub, ":value_3", ":var_2"),
			(create_number_box_overlay, reg0, 0, 101),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$g_rand_rain_limit"),
			(val_sub, ":value_3", ":var_2"),
			(create_number_box_overlay, reg0, 0, 101),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(get_global_cloud_amount, ":global_cloud_amount"),
			(overlay_set_val, reg0, ":global_cloud_amount"),
			(val_sub, ":value_3", ":var_2"),
			(create_number_box_overlay, reg0, 0, 101),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(get_global_haze_amount, ":global_haze_amount"),
			(overlay_set_val, reg0, ":global_haze_amount"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$disable_npc_complaints"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$cheat_mode"),
			(val_sub, ":value_3", ":var_2"),
			(set_container_overlay, -1),
			(create_text_overlay, reg1, "@A Clash of Kings Mod^Options", 65552),
			(overlay_set_color, reg1, 4294967295),
			(position_set_x, 1, 800),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 2000),
			(position_set_y, 1, 2000),
			(overlay_set_size, reg1, 1),
			(str_store_string, 0, "@About morale threshold: If your party's morale is below this value, the speed of consuming food will be twice as much as normal, and the bonus to party morale of all food will also be doubled"),
			(create_text_overlay, reg1, 0, 10240),
			(position_set_x, 1, 680),
			(position_set_y, 1, 400),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 300),
			(position_set_y, 1, 120),
			(overlay_set_area_size, reg1, 1),
			(create_game_button_overlay, "$g_presentation_obj_2", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(create_game_button_overlay, reg0, "@Restore Defaults"),
			(position_set_x, 1, 735),
			(position_set_y, 1, 25),
			(overlay_set_position, reg0, 1),
			(create_game_button_overlay, reg0, "@Key Settings"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 75),
			(overlay_set_position, reg0, 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_2"),
				(party_get_slot, ":main_party_center_accumulated_tariffs", "p_main_party", slot_center_accumulated_tariffs),
				(val_clamp, ":main_party_center_accumulated_tariffs", 30, 1001),
				(party_set_slot, "p_main_party", slot_center_accumulated_tariffs, ":main_party_center_accumulated_tariffs"),
				(presentation_set_duration, 0),
			(else_try),
				(store_add, ":value", "$g_presentation_obj_2", 1),
				(eq, ":trigger_param_1", ":value"),
				(call_script, "script_floris_set_default_prefs", 0),
				(start_presentation, "prsnt_mod_option"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(start_presentation, "prsnt_pbod_redefine_keys"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(party_set_slot, "p_main_party", slot_center_accumulated_tariffs, ":trigger_param_2"),
			(else_try),
				(store_add, ":value", "$g_presentation_obj_1", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_mission_tpl, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_torny_mission_tpl, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_1_num_teams, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_1_team_size, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_hp_bar_dis_limit", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_hp_bar_ally", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_hp_bar_enemy", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_show_minimap", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_minimap_ratio", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_3_team_size, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_cur_tier, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_2_team_size, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_2_num_teams, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_village_product, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_rebellion_readiness, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_reinforcement_stage", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_report_shot_distance", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_report_extra_xp_and_wpt", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_3_num_teams, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_morale_threshold", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_speed_ai_battles", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_encumbrance_penalty", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", 87, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_dplmc_horse_speed", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$drowning", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(store_sub, "$g_dplmc_terrain_advantage", ":trigger_param_2", 1),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_wp_tpe_active", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(store_sub, "$g_dplmc_lord_recycling", ":trigger_param_2", 1),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(store_sub, "$g_dplmc_ai_changes", ":trigger_param_2", 1),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(store_sub, "$g_dplmc_gold_changes", ":trigger_param_2", 1),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(assign, "$g_disable_condescending_comments", 2),
				(else_try),
					(eq, ":trigger_param_2", 2),
					(assign, "$g_disable_condescending_comments", -2),
				(else_try),
					(assign, "$g_disable_condescending_comments", 0),
				(try_end),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_fog", ":trigger_param_2"),
				(call_script, "script_initialize_fog"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_date", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$g_rand_rain_limit", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(set_global_cloud_amount, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(set_global_haze_amount, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$disable_npc_complaints", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$cheat_mode", ":trigger_param_2"),
			(try_end)
		])
	]),

	("recruit_plan", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_get_town_faction_for_recruiting", "$current_town"),
			(assign, ":var_1", reg0),
			(str_store_faction_name, 1, ":var_1"),
			(party_get_slot, reg1, "$current_town", 40),
			(store_div, reg2, reg1, 800),
			(store_sub, reg3, reg2, 1),
			(assign, reg4, 800),
			(store_troop_gold, reg5, "trp_player"),
			(party_get_slot, ":current_town_type", "$current_town", slot_party_type),
			(assign, reg6, 0),
			(try_begin),
				(eq, ":current_town_type", 2),
				(assign, reg6, 1),
			(try_end),
			(create_text_overlay, reg0, "@You can recruit troops of {s1} for this {reg6?castle:town}. Recruiting will costs {reg4} denars and will require at least one day. You have {reg1} denars left here (can recruit for {reg2} {reg3?times:time}) and have {reg5} denars in your coffers.", 8192),
			(position_set_x, 1, 200),
			(position_set_y, 1, 300),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 300),
			(overlay_set_area_size, reg0, 1),
			(create_combo_button_overlay, "$g_presentation_obj_1"),
			(position_set_x, 1, 380),
			(position_set_y, 1, 280),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_1", 1),
			(overlay_add_item, "$g_presentation_obj_1", "@Decrease times of recruiting"),
			(overlay_add_item, "$g_presentation_obj_1", "@Increase times of recruiting"),
			(overlay_set_val, "$g_presentation_obj_1", 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 280),
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(val_div, ":troop_gold_player", 800),
			(val_add, ":troop_gold_player", 1),
			(create_number_box_overlay, "$g_presentation_obj_2", 0, ":troop_gold_player"),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(overlay_set_val, "$g_presentation_obj_2", 0),
			(overlay_set_display, "$g_presentation_obj_2", 1),
			(party_get_slot, ":current_town_40", "$current_town", 40),
			(val_div, ":current_town_40", 800),
			(val_add, ":current_town_40", 1),
			(create_number_box_overlay, "$g_presentation_obj_3", 0, ":current_town_40"),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(overlay_set_val, "$g_presentation_obj_3", 0),
			(overlay_set_display, "$g_presentation_obj_3", 0),
			(create_game_button_overlay, "$g_presentation_obj_5", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_5", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_set_display, "$g_presentation_obj_2", 1),
					(overlay_set_display, "$g_presentation_obj_3", 0),
				(else_try),
					(overlay_set_display, "$g_presentation_obj_2", 0),
					(overlay_set_display, "$g_presentation_obj_3", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_2"),
				(gt, ":trigger_param_2", 0),
				(store_mul, ":value", ":trigger_param_2", 800),
				(troop_remove_gold, "trp_player", ":value"),
				(party_get_slot, ":current_town_40", "$current_town", 40),
				(val_add, ":current_town_40", ":value"),
				(party_set_slot, "$current_town", 40, ":current_town_40"),
				(start_presentation, "prsnt_recruit_plan"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_3"),
				(gt, ":trigger_param_2", 0),
				(store_mul, ":value_2", ":trigger_param_2", 800),
				(troop_add_gold, "trp_player", ":value_2"),
				(party_get_slot, ":current_town_40", "$current_town", 40),
				(val_sub, ":current_town_40", ":value_2"),
				(party_set_slot, "$current_town", 40, ":current_town_40"),
				(start_presentation, "prsnt_recruit_plan"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_5"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("change_all_factions_color", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_combo_button_overlay, "$g_presentation_obj_1"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 680),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(troop_set_slot, "trp_temp_array_a", slot_troop_relations_begin, "fac_player_supporters_faction"),
			(troop_set_slot, "trp_temp_array_a", 1, "fac_kingdom_1"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_occupation, "fac_kingdom_2"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_state, "fac_kingdom_3"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_last_talk_time, "fac_kingdom_4"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_met, "fac_kingdom_5"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_party_template, "fac_kingdom_6"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_renown, "fac_kingdom_8"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_prisoner_of_party, "fac_kingdom_9"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_present_at_event, "fac_kingdom_10"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_leaded_party, "fac_kingdom_11"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_wealth, "fac_kingdom_12"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_cur_center, "fac_kingdom_13"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_banner_scene_prop, "fac_kingdom_14"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_original_faction, "fac_kingdom_15"),
			(troop_set_slot, "trp_temp_array_a", 15, "fac_kingdom_16"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_player_order_state, "fac_kingdom_17"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_player_order_object, "fac_kingdom_18"),
			(troop_set_slot, "trp_temp_array_a", slot_troop_age, "fac_kingdom_19"),
			(troop_set_slot, "trp_temp_array_b", slot_troop_relations_begin, 35512),
			(troop_set_slot, "trp_temp_array_b", 1, 16769085),
			(troop_set_slot, "trp_temp_array_b", slot_troop_occupation, 16777215),
			(troop_set_slot, "trp_temp_array_b", slot_troop_state, 3381759),
			(troop_set_slot, "trp_temp_array_b", slot_troop_renown, 16724838),
			(troop_set_slot, "trp_temp_array_b", slot_troop_met, 10079334),
			(troop_set_slot, "trp_temp_array_b", slot_troop_party_template, 16737792),
			(troop_set_slot, "trp_temp_array_b", slot_troop_renown, 16093184),
			(troop_set_slot, "trp_temp_array_b", slot_troop_prisoner_of_party, 14688545),
			(troop_set_slot, "trp_temp_array_b", slot_troop_present_at_event, 6736998),
			(troop_set_slot, "trp_temp_array_b", slot_troop_leaded_party, 10724259),
			(troop_set_slot, "trp_temp_array_b", slot_troop_wealth, 16764057),
			(troop_set_slot, "trp_temp_array_b", slot_troop_cur_center, 11366542),
			(troop_set_slot, "trp_temp_array_b", slot_troop_banner_scene_prop, 9728439),
			(troop_set_slot, "trp_temp_array_b", slot_troop_original_faction, 16764006),
			(troop_set_slot, "trp_temp_array_b", 15, 3394764),
			(troop_set_slot, "trp_temp_array_b", slot_troop_player_order_state, 12022129),
			(troop_set_slot, "trp_temp_array_b", slot_troop_player_order_object, 6723967),
			(troop_set_slot, "trp_temp_array_b", slot_troop_age, 7452565),
			(try_for_range, ":number", 0, 18),
				(troop_get_slot, ":temp_array_a_number", "trp_temp_array_a", ":number"),
				(str_store_faction_name, 0, ":temp_array_a_number"),
				(overlay_add_item, "$g_presentation_obj_1", 0),
			(try_end),
			(val_clamp, "$temp", 0, 18),
			(overlay_set_val, "$g_presentation_obj_1", "$temp"),
			(troop_get_slot, ":temp_array_a_number", "trp_temp_array_a", "$temp"),
			(str_store_faction_name, 0, ":temp_array_a_number"),
			(create_text_overlay, reg1, "@Sovereign color of the {s0}:", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(create_mesh_overlay, "$g_presentation_obj_2", "mesh_white_plane"),
			(position_set_x, 1, 450),
			(position_set_y, 1, 480),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(position_set_x, 1, 5000),
			(position_set_y, 1, 5000),
			(overlay_set_size, "$g_presentation_obj_2", 1),
			(faction_get_color, ":color_temp_array_a_number", ":temp_array_a_number"),
			(overlay_set_color, "$g_presentation_obj_2", ":color_temp_array_a_number"),
			(position_set_x, 1, 500),
			(create_slider_overlay, "$g_presentation_obj_3", 0, 255),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(create_slider_overlay, "$g_presentation_obj_4", 0, 255),
			(position_set_y, 1, 350),
			(overlay_set_position, "$g_presentation_obj_4", 1),
			(create_slider_overlay, "$g_presentation_obj_5", 0, 255),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_5", 1),
			(store_mod, ":value", ":color_temp_array_a_number", 256),
			(val_div, ":color_temp_array_a_number", 256),
			(store_mod, ":value_2", ":color_temp_array_a_number", 256),
			(val_div, ":color_temp_array_a_number", 256),
			(store_mod, ":value_3", ":color_temp_array_a_number", 256),
			(overlay_set_val, "$g_presentation_obj_3", ":value_3"),
			(overlay_set_val, "$g_presentation_obj_4", ":value_2"),
			(overlay_set_val, "$g_presentation_obj_5", ":value"),
			(position_set_x, 1, 650),
			(create_number_box_overlay, "$g_presentation_obj_6", 0, 256),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(create_number_box_overlay, "$g_presentation_obj_7", 0, 256),
			(position_set_y, 1, 350),
			(overlay_set_position, "$g_presentation_obj_7", 1),
			(create_number_box_overlay, "$g_presentation_obj_8", 0, 256),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_8", 1),
			(overlay_set_val, "$g_presentation_obj_6", ":value_3"),
			(overlay_set_val, "$g_presentation_obj_7", ":value_2"),
			(overlay_set_val, "$g_presentation_obj_8", ":value"),
			(assign, reg2, ":value_3"),
			(assign, reg3, ":value_2"),
			(assign, reg4, ":value"),
			(position_set_x, 1, 330),
			(create_text_overlay, reg1, "@Red:", 16),
			(position_set_y, 1, 400),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Green:", 16),
			(position_set_y, 1, 350),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Blue:", 16),
			(position_set_y, 1, 300),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, "$g_presentation_obj_9", "@ ", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 450),
			(overlay_set_position, "$g_presentation_obj_9", 1),
			(call_script, "script_convert_rgb_code_to_html_code", reg2, reg3, reg4),
			(overlay_set_text, "$g_presentation_obj_9", "@HTML code: {s0}"),
			(create_game_button_overlay, "$g_presentation_obj_11", "@Default"),
			(position_set_x, 1, 420),
			(position_set_y, 1, 230),
			(overlay_set_position, "$g_presentation_obj_11", 1),
			(create_game_button_overlay, "$g_presentation_obj_12", "@Randomize"),
			(position_set_x, 1, 580),
			(position_set_y, 1, 230),
			(overlay_set_position, "$g_presentation_obj_12", 1),
			(create_mesh_overlay, reg1, "mesh_white_plane"),
			(position_set_x, 1, 138),
			(position_set_y, 1, 78),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 36100),
			(position_set_y, 1, 6100),
			(overlay_set_size, reg1, 1),
			(overlay_set_color, reg1, 0),
			(assign, ":value_4", 140),
			(assign, ":var_8", 80),
			(try_for_range, ":number", 0, 216),
				(create_image_button_overlay, reg1, "mesh_white_plane", "mesh_white_plane"),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":var_8"),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg1, 1),
				(assign, ":var_9", ":number"),
				(call_script, "script_convert_slot_no_to_color", ":var_9"),
				(assign, ":var_10", reg0),
				(overlay_set_color, reg1, ":var_10"),
				(val_add, ":value_4", 20),
				(try_begin),
					(eq, ":value_4", 860),
					(assign, ":value_4", 140),
					(val_add, ":var_8", 20),
				(try_end),
				(troop_set_slot, "trp_temp_array_c", ":number", reg1),
			(try_end),
			(create_game_button_overlay, "$g_presentation_obj_10", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_10", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_for_range, ":number", 0, 216),
				(troop_slot_eq, "trp_temp_array_c", ":number", ":trigger_param_1"),
				(assign, ":value", ":number"),
				(call_script, "script_convert_slot_no_to_color", ":value"),
				(assign, ":var_5", reg0),
				(troop_get_slot, ":temp_array_a_temp", "trp_temp_array_a", "$temp"),
				(faction_set_color, ":temp_array_a_temp", ":var_5"),
				(overlay_set_color, "$g_presentation_obj_2", ":var_5"),
				(store_mod, ":value_2", ":var_5", 256),
				(val_div, ":var_5", 256),
				(store_mod, ":value_3", ":var_5", 256),
				(val_div, ":var_5", 256),
				(store_mod, ":value_4", ":var_5", 256),
				(overlay_set_val, "$g_presentation_obj_3", ":value_4"),
				(overlay_set_val, "$g_presentation_obj_4", ":value_3"),
				(overlay_set_val, "$g_presentation_obj_5", ":value_2"),
				(overlay_set_val, "$g_presentation_obj_6", ":value_4"),
				(overlay_set_val, "$g_presentation_obj_7", ":value_3"),
				(overlay_set_val, "$g_presentation_obj_8", ":value_2"),
				(assign, reg2, ":value_4"),
				(assign, reg3, ":value_3"),
				(assign, reg4, ":value_2"),
				(call_script, "script_convert_rgb_code_to_html_code", reg2, reg3, reg4),
				(overlay_set_text, "$g_presentation_obj_9", "@HTML code: {s0}"),
			(try_end),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(assign, "$temp", ":trigger_param_2"),
				(start_presentation, "prsnt_change_all_factions_color"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_3"),
				(eq, ":trigger_param_1", "$g_presentation_obj_6"),
				(overlay_set_val, "$g_presentation_obj_3", ":trigger_param_2"),
				(overlay_set_val, "$g_presentation_obj_6", ":trigger_param_2"),
				(assign, reg2, ":trigger_param_2"),
				(call_script, "script_get_dest_color_from_rgb", reg2, reg3, reg4),
				(assign, ":value", reg0),
				(overlay_set_color, "$g_presentation_obj_2", ":value"),
				(troop_get_slot, ":temp_array_a_temp", "trp_temp_array_a", "$temp"),
				(faction_set_color, ":temp_array_a_temp", ":value"),
				(call_script, "script_convert_rgb_code_to_html_code", reg2, reg3, reg4),
				(overlay_set_text, "$g_presentation_obj_9", "@HTML code: {s0}"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_4"),
				(eq, ":trigger_param_1", "$g_presentation_obj_7"),
				(overlay_set_val, "$g_presentation_obj_4", ":trigger_param_2"),
				(overlay_set_val, "$g_presentation_obj_7", ":trigger_param_2"),
				(assign, reg3, ":trigger_param_2"),
				(call_script, "script_get_dest_color_from_rgb", reg2, reg3, reg4),
				(assign, ":value", reg0),
				(overlay_set_color, "$g_presentation_obj_2", ":value"),
				(troop_get_slot, ":temp_array_a_temp", "trp_temp_array_a", "$temp"),
				(faction_set_color, ":temp_array_a_temp", ":value"),
				(call_script, "script_convert_rgb_code_to_html_code", reg2, reg3, reg4),
				(overlay_set_text, "$g_presentation_obj_9", "@HTML code: {s0}"),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_5"),
				(eq, ":trigger_param_1", "$g_presentation_obj_8"),
				(overlay_set_val, "$g_presentation_obj_5", ":trigger_param_2"),
				(overlay_set_val, "$g_presentation_obj_8", ":trigger_param_2"),
				(assign, reg4, ":trigger_param_2"),
				(call_script, "script_get_dest_color_from_rgb", reg2, reg3, reg4),
				(assign, ":value", reg0),
				(overlay_set_color, "$g_presentation_obj_2", ":value"),
				(troop_get_slot, ":temp_array_a_temp", "trp_temp_array_a", "$temp"),
				(faction_set_color, ":temp_array_a_temp", ":value"),
				(call_script, "script_convert_rgb_code_to_html_code", reg2, reg3, reg4),
				(overlay_set_text, "$g_presentation_obj_9", "@HTML code: {s0}"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_11"),
				(troop_get_slot, ":temp_array_a_temp", "trp_temp_array_a", "$temp"),
				(troop_get_slot, ":temp_array_b_temp", "trp_temp_array_b", "$temp"),
				(faction_set_color, ":temp_array_a_temp", ":temp_array_b_temp"),
				(overlay_set_color, "$g_presentation_obj_2", ":temp_array_b_temp"),
				(store_mod, ":value_2", ":temp_array_b_temp", 256),
				(val_div, ":temp_array_b_temp", 256),
				(store_mod, ":value_3", ":temp_array_b_temp", 256),
				(val_div, ":temp_array_b_temp", 256),
				(store_mod, ":value_4", ":temp_array_b_temp", 256),
				(overlay_set_val, "$g_presentation_obj_3", ":value_4"),
				(overlay_set_val, "$g_presentation_obj_4", ":value_3"),
				(overlay_set_val, "$g_presentation_obj_5", ":value_2"),
				(overlay_set_val, "$g_presentation_obj_6", ":value_4"),
				(overlay_set_val, "$g_presentation_obj_7", ":value_3"),
				(overlay_set_val, "$g_presentation_obj_8", ":value_2"),
				(assign, reg2, ":value_4"),
				(assign, reg3, ":value_3"),
				(assign, reg4, ":value_2"),
				(call_script, "script_convert_rgb_code_to_html_code", reg2, reg3, reg4),
				(overlay_set_text, "$g_presentation_obj_9", "@HTML code: {s0}"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_12"),
				(store_random_in_range, reg2, 0, 256),
				(store_random_in_range, reg3, 0, 256),
				(store_random_in_range, reg4, 0, 256),
				(overlay_set_val, "$g_presentation_obj_3", reg2),
				(overlay_set_val, "$g_presentation_obj_4", reg3),
				(overlay_set_val, "$g_presentation_obj_5", reg4),
				(overlay_set_val, "$g_presentation_obj_6", reg2),
				(overlay_set_val, "$g_presentation_obj_7", reg3),
				(overlay_set_val, "$g_presentation_obj_8", reg4),
				(call_script, "script_get_dest_color_from_rgb", reg2, reg3, reg4),
				(assign, ":value", reg0),
				(overlay_set_color, "$g_presentation_obj_2", ":value"),
				(troop_get_slot, ":temp_array_a_temp", "trp_temp_array_a", "$temp"),
				(faction_set_color, ":temp_array_a_temp", ":value"),
				(call_script, "script_convert_rgb_code_to_html_code", reg2, reg3, reg4),
				(overlay_set_text, "$g_presentation_obj_9", "@HTML code: {s0}"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_10"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("sort_the_defenders", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_presentation_next_presentation", -1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_1", 0, 8192),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(position_set_x, 1, 350),
			(position_set_y, 1, 600),
			(overlay_set_area_size, "$g_presentation_obj_1", 1),
			(set_container_overlay, "$g_presentation_obj_1"),
			(assign, ":var_1", 150),
			(party_get_num_companion_stacks, ":num_companion_stacks_l_current_town", "$current_town"),
			(store_mul, ":value", ":num_companion_stacks_l_current_town", 40),
			(val_sub, ":value", 40),
			(val_max, ":value", 560),
			(try_for_range, ":number", 0, ":num_companion_stacks_l_current_town"),
				(party_stack_get_troop_id, ":party_stack_troop_id_current_town_number", "$current_town", ":number"),
				(party_stack_get_size, ":party_stack_size_current_town_number", "$current_town", ":number"),
				(party_stack_get_num_wounded, ":party_stack_num_wounded_current_town_number", "$current_town", ":number"),
				(str_store_troop_name, 1, ":party_stack_troop_id_current_town_number"),
				(assign, reg2, ":party_stack_size_current_town_number"),
				(try_begin),
					(gt, ":party_stack_num_wounded_current_town_number", 0),
					(store_sub, reg3, ":party_stack_size_current_town_number", ":party_stack_num_wounded_current_town_number"),
					(str_store_string, 1, "@{s1}({reg3}/{reg2})"),
				(else_try),
					(str_store_string, 1, "@{s1}({reg2})"),
				(try_end),
				(create_game_button_overlay, reg1, "@{s1}"),
				(position_set_x, 1, ":var_1"),
				(position_set_y, 1, ":value"),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 240),
				(position_set_y, 1, 32),
				(overlay_set_size, reg1, 1),
				(troop_set_slot, "trp_temp_array_a", ":number", reg1),
				(val_sub, ":value", 40),
			(try_end),
			(try_begin),
				(gt, "$g_cur_stack", -1),
				(troop_get_slot, ":temp_array_a_g_cur_stack", "trp_temp_array_a", "$g_cur_stack"),
				(overlay_set_alpha, ":temp_array_a_g_cur_stack", 128),
			(try_end),
			(set_container_overlay, -1),
			(position_set_x, 1, 750),
			(create_button_overlay, "$g_presentation_obj_2", "@Move to Top", 16),
			(position_set_y, 1, 600),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(create_button_overlay, "$g_presentation_obj_3", "@Move Up", 16),
			(position_set_y, 1, 525),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(create_button_overlay, "$g_presentation_obj_4", "@Move Down", 16),
			(position_set_y, 1, 450),
			(overlay_set_position, "$g_presentation_obj_4", 1),
			(create_button_overlay, "$g_presentation_obj_5", "@Move to Bottom", 16),
			(position_set_y, 1, 375),
			(overlay_set_position, "$g_presentation_obj_5", 1),
			(try_begin),
				(gt, "$g_cur_stack", -1),
				(party_stack_get_troop_id, ":party_stack_troop_id_current_town_number", "$current_town", "$g_cur_stack"),
				(store_mul, ":value_2", ":party_stack_troop_id_current_town_number", 2),
				(create_image_button_overlay_with_tableau_material, "$g_presentation_obj_6", -1, "tableau_game_party_window", ":value_2"),
				(position_set_x, 1, 400),
				(position_set_y, 1, 300),
				(overlay_set_position, "$g_presentation_obj_6", 1),
			(else_try),
				(create_mesh_overlay, "$g_presentation_obj_6", "mesh_white_plane"),
				(overlay_set_display, "$g_presentation_obj_6", 0),
			(try_end),
			(create_game_button_overlay, "$g_presentation_obj_10", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_10", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(party_get_num_companion_stacks, ":num_companion_stacks_l_current_town", "$current_town"),
			(try_for_range, ":number", 0, ":num_companion_stacks_l_current_town"),
				(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
				(assign, "$g_cur_stack", ":number"),
				(start_presentation, "prsnt_sort_the_defenders"),
			(try_end),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_2"),
				(try_begin),
					(gt, "$g_cur_stack", 0),
					(store_sub, ":value", ":num_companion_stacks_l_current_town", 1),
					(call_script, "script_move_one_stack_to_the_bottom", "$current_town", "$g_cur_stack", 1),
					(call_script, "script_move_one_stack_to_the_bottom", "$current_town", 0, ":value"),
					(assign, "$g_cur_stack", 0),
					(start_presentation, "prsnt_sort_the_defenders"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_3"),
				(try_begin),
					(gt, "$g_cur_stack", 0),
					(store_sub, ":value_2", "$g_cur_stack", 1),
					(store_sub, ":value", ":num_companion_stacks_l_current_town", "$g_cur_stack"),
					(call_script, "script_move_one_stack_to_the_bottom", "$current_town", "$g_cur_stack", 1),
					(call_script, "script_move_one_stack_to_the_bottom", "$current_town", ":value_2", ":value"),
					(val_sub, "$g_cur_stack", 1),
					(start_presentation, "prsnt_sort_the_defenders"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_4"),
				(try_begin),
					(store_sub, ":value_3", ":num_companion_stacks_l_current_town", 1),
					(lt, "$g_cur_stack", ":value_3"),
					(gt, "$g_cur_stack", -1),
					(store_add, ":value_4", "$g_cur_stack", 1),
					(store_sub, ":value", ":value_3", "$g_cur_stack"),
					(call_script, "script_move_one_stack_to_the_bottom", "$current_town", ":value_4", 1),
					(call_script, "script_move_one_stack_to_the_bottom", "$current_town", "$g_cur_stack", ":value"),
					(val_add, "$g_cur_stack", 1),
					(start_presentation, "prsnt_sort_the_defenders"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_5"),
				(try_begin),
					(store_sub, ":value_3", ":num_companion_stacks_l_current_town", 1),
					(lt, "$g_cur_stack", ":value_3"),
					(gt, "$g_cur_stack", -1),
					(call_script, "script_move_one_stack_to_the_bottom", "$current_town", "$g_cur_stack", 1),
					(assign, "$g_cur_stack", ":value_3"),
					(start_presentation, "prsnt_sort_the_defenders"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_6"),
				(assign, "$g_presentation_next_presentation", "prsnt_sort_the_defenders"),
				(party_stack_get_troop_id, "$temp", "$current_town", "$g_cur_stack"),
				(start_presentation, "prsnt_troop_note"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_10"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("shopping_list_of_food", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_game_button_overlay, "$g_presentation_obj_1", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(create_text_overlay, reg0, "@Buy foods automaticly when leaving:", 4096),
			(position_set_x, 1, 150),
			(position_set_y, 1, 690),
			(overlay_set_position, reg0, 1),
			(create_check_box_overlay, "$g_presentation_obj_2", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 600),
			(position_set_y, 1, 682),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(overlay_set_val, "$g_presentation_obj_2", "$g_buy_foods_when_leaving"),
			(assign, ":value", 60),
			(assign, ":var_2", 550),
			(try_for_range, ":item", "itm_trade_smoked_fish", "itm_trade_dummy01"),
				(create_mesh_overlay, reg1, "mesh_inv_slot"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg1, 1),
				(create_mesh_overlay, reg1, "mesh_mp_inventory_choose"),
				(position_set_x, 1, 640),
				(position_set_y, 1, 640),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":var_2"),
				(overlay_set_position, reg1, 1),
				(troop_set_slot, "trp_temp_array_a", ":item", reg1),
				(create_mesh_overlay_with_item_id, reg1, ":item"),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg1, 1),
				(store_add, ":value_2", ":value", 40),
				(store_add, ":value_3", ":var_2", 40),
				(position_set_x, 1, ":value_2"),
				(position_set_y, 1, ":value_3"),
				(overlay_set_position, reg1, 1),
				(troop_set_slot, "trp_temp_array_b", ":item", reg1),
				(create_text_overlay, reg1, "@*", 4112),
				(store_add, ":value_4", ":value", 100),
				(store_add, ":value_5", ":var_2", 40),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg1, 1),
				(create_number_box_overlay, reg1, 0, 5),
				(store_add, ":value_6", ":value", 115),
				(store_add, ":value_7", ":var_2", 30),
				(position_set_x, 1, ":value_6"),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(item_get_slot, ":item_81", ":item", 81),
				(overlay_set_val, reg1, ":item_81"),
				(troop_set_slot, "trp_temp_array_c", ":item", reg1),
				(val_add, ":value", 240),
				(try_begin),
					(eq, ":value", 1020),
					(assign, ":value", 60),
					(val_sub, ":var_2", 120),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_2", 0),
				(try_for_range, ":item", "itm_trade_smoked_fish", "itm_trade_dummy01"),
					(troop_slot_eq, "trp_temp_array_a", ":item", ":trigger_param_1"),
					(troop_get_slot, ":temp_array_b_item", "trp_temp_array_b", ":item"),
					(overlay_get_position, 0, ":temp_array_b_item"),
					(show_item_details, ":item", 0, 100),
					(assign, "$g_current_opened_item_details", ":item"),
				(try_end),
			(else_try),
				(try_for_range, ":item", "itm_trade_smoked_fish", "itm_trade_dummy01"),
					(troop_slot_eq, "trp_temp_array_a", ":item", ":trigger_param_1"),
					(try_begin),
						(eq, "$g_current_opened_item_details", ":item"),
						(close_item_details),
					(try_end),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_for_range, ":item", "itm_trade_smoked_fish", "itm_trade_dummy01"),
				(troop_slot_eq, "trp_temp_array_c", ":item", ":trigger_param_1"),
				(item_set_slot, ":item", 81, ":trigger_param_2"),
			(try_end),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_2"),
				(assign, "$g_buy_foods_when_leaving", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("character_creation", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_game_button_overlay, "$g_presentation_obj_1", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(create_game_button_overlay, "$g_presentation_obj_2", "@Default"),
			(position_set_x, 1, 730),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(create_game_button_overlay, "$g_presentation_obj_3", "@Randomize"),
			(position_set_x, 1, 560),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(create_text_overlay, reg1, "@Character Background", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 630),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 2000),
			(position_set_y, 1, 2000),
			(overlay_set_size, reg1, 1),
			(create_text_overlay, reg1, "@Your story:", 4),
			(position_set_x, 1, 400),
			(position_set_y, 1, 550),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 200),
			(position_set_y, 1, 550),
			(create_text_overlay, reg1, "@Your gender:", 16),
			(overlay_set_position, reg1, 1),
			(position_set_y, 1, 470),
			(create_text_overlay, reg1, "@Your father was:", 16),
			(overlay_set_position, reg1, 1),
			(position_set_y, 1, 390),
			(create_text_overlay, reg1, "@You spent your early life as:", 16),
			(overlay_set_position, reg1, 1),
			(position_set_y, 1, 310),
			(create_text_overlay, reg1, "@Later you became:", 16),
			(overlay_set_position, reg1, 1),
			(position_set_y, 1, 230),
			(create_text_overlay, reg1, "@The reason for an adventure:", 16),
			(overlay_set_position, reg1, 1),
			(position_set_y, 1, 510),
			(create_combo_button_overlay, "$g_presentation_obj_11"),
			(overlay_set_position, "$g_presentation_obj_11", 1),
			(overlay_add_item, "$g_presentation_obj_11", "@female"),
			(overlay_add_item, "$g_presentation_obj_11", "@male"),
			(try_begin),
				(eq, "$character_gender", 1),
				(overlay_set_val, "$g_presentation_obj_11", 0),
			(else_try),
				(eq, "$character_gender", 0),
				(overlay_set_val, "$g_presentation_obj_11", 1),
			(try_end),
			(position_set_y, 1, 430),
			(create_combo_button_overlay, "$g_presentation_obj_12"),
			(overlay_set_position, "$g_presentation_obj_12", 1),
			(overlay_add_item, "$g_presentation_obj_12", "@a thief"),
			(overlay_add_item, "$g_presentation_obj_12", "@a steppe nomad"),
			(overlay_add_item, "$g_presentation_obj_12", "@a hunter"),
			(overlay_add_item, "$g_presentation_obj_12", "@a veteran warrior"),
			(overlay_add_item, "$g_presentation_obj_12", "@a travelling merchant"),
			(overlay_add_item, "$g_presentation_obj_12", "@an impoverished noble"),
			(try_begin),
				(eq, "$background_type", 1),
				(overlay_set_val, "$g_presentation_obj_12", 0),
			(else_try),
				(eq, "$background_type", 2),
				(overlay_set_val, "$g_presentation_obj_12", 1),
			(else_try),
				(eq, "$background_type", 3),
				(overlay_set_val, "$g_presentation_obj_12", 2),
			(else_try),
				(eq, "$background_type", 4),
				(overlay_set_val, "$g_presentation_obj_12", 3),
			(else_try),
				(eq, "$background_type", 5),
				(overlay_set_val, "$g_presentation_obj_12", 4),
			(else_try),
				(eq, "$background_type", 6),
				(overlay_set_val, "$g_presentation_obj_12", 5),
			(try_end),
			(position_set_y, 1, 350),
			(create_combo_button_overlay, "$g_presentation_obj_13"),
			(overlay_set_position, "$g_presentation_obj_13", 1),
			(overlay_add_item, "$g_presentation_obj_13", "@a steppe child"),
			(overlay_add_item, "$g_presentation_obj_13", "@a street urchin"),
			(overlay_add_item, "$g_presentation_obj_13", "@a shop assistant"),
			(overlay_add_item, "$g_presentation_obj_13", "@a craftsman's apprentice"),
			(overlay_add_item, "$g_presentation_obj_13", "@a page at a nobleman's court"),
			(try_begin),
				(eq, "$background_answer_2", 5),
				(overlay_set_val, "$g_presentation_obj_13", 0),
			(else_try),
				(eq, "$background_answer_2", 6),
				(overlay_set_val, "$g_presentation_obj_13", 1),
			(else_try),
				(eq, "$background_answer_2", 4),
				(overlay_set_val, "$g_presentation_obj_13", 2),
			(else_try),
				(eq, "$background_answer_2", 7),
				(overlay_set_val, "$g_presentation_obj_13", 3),
			(else_try),
				(eq, "$background_answer_2", 8),
				(overlay_set_val, "$g_presentation_obj_13", 4),
			(try_end),
			(position_set_y, 1, 270),
			(create_combo_button_overlay, "$g_presentation_obj_14"),
			(overlay_set_position, "$g_presentation_obj_14", 1),
			(overlay_add_item, "$g_presentation_obj_14", "@a game poacher"),
			(overlay_add_item, "$g_presentation_obj_14", "@a smith"),
			(overlay_add_item, "$g_presentation_obj_14", "@a goods peddler"),
			(overlay_add_item, "$g_presentation_obj_14", "@a university student"),
			(overlay_add_item, "$g_presentation_obj_14", "@a troubadour"),
			(try_begin),
				(eq, "$character_gender", 0),
				(overlay_add_item, "$g_presentation_obj_14", "@a squire"),
			(else_try),
				(eq, "$character_gender", 1),
				(overlay_add_item, "$g_presentation_obj_14", "@a lady-in-waiting"),
			(try_end),
			(try_begin),
				(eq, "$background_answer_3", 6),
				(overlay_set_val, "$g_presentation_obj_14", 0),
			(else_try),
				(eq, "$background_answer_3", 5),
				(overlay_set_val, "$g_presentation_obj_14", 1),
			(else_try),
				(eq, "$background_answer_3", 4),
				(overlay_set_val, "$g_presentation_obj_14", 2),
			(else_try),
				(eq, "$background_answer_3", 1),
				(overlay_set_val, "$g_presentation_obj_14", 3),
			(else_try),
				(eq, "$background_answer_3", 2),
				(overlay_set_val, "$g_presentation_obj_14", 4),
			(else_try),
				(this_or_next|eq, "$background_answer_3", 0),
				(eq, "$background_answer_3", 0),
				(overlay_set_val, "$g_presentation_obj_14", 5),
			(try_end),
			(position_set_y, 1, 190),
			(create_combo_button_overlay, "$g_presentation_obj_15"),
			(overlay_set_position, "$g_presentation_obj_15", 1),
			(overlay_add_item, "$g_presentation_obj_15", "@lust for money and power"),
			(overlay_add_item, "$g_presentation_obj_15", "@being forced out of your home"),
			(overlay_add_item, "$g_presentation_obj_15", "@wanderlust"),
			(overlay_add_item, "$g_presentation_obj_15", "@the loss of a loved one"),
			(overlay_add_item, "$g_presentation_obj_15", "@personal revenge"),
			(try_begin),
				(eq, "$background_answer_4", 0),
				(overlay_set_val, "$g_presentation_obj_15", 0),
			(else_try),
				(eq, "$background_answer_4", 1),
				(overlay_set_val, "$g_presentation_obj_15", 1),
			(else_try),
				(eq, "$background_answer_4", 3),
				(overlay_set_val, "$g_presentation_obj_15", 2),
			(else_try),
				(eq, "$background_answer_4", 4),
				(overlay_set_val, "$g_presentation_obj_15", 3),
			(else_try),
				(eq, "$background_answer_4", 5),
				(overlay_set_val, "$g_presentation_obj_15", 4),
			(try_end),
			(call_script, "script_get_character_background_text"),
			(create_text_overlay, reg1, "@{s1}", 10240),
			(position_set_x, 1, 400),
			(position_set_y, 1, 80),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 450),
			(overlay_set_area_size, reg1, 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_11"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(assign, "$character_gender", 1),
				(else_try),
					(eq, ":trigger_param_2", 1),
					(assign, "$character_gender", 0),
				(try_end),
				(start_presentation, "prsnt_character_creation"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_12"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(assign, "$background_type", 1),
				(else_try),
					(eq, ":trigger_param_2", 1),
					(assign, "$background_type", 2),
				(else_try),
					(eq, ":trigger_param_2", 2),
					(assign, "$background_type", 3),
				(else_try),
					(eq, ":trigger_param_2", 3),
					(assign, "$background_type", 4),
				(else_try),
					(eq, ":trigger_param_2", 4),
					(assign, "$background_type", 5),
				(else_try),
					(eq, ":trigger_param_2", 5),
					(assign, "$background_type", 6),
				(try_end),
				(start_presentation, "prsnt_character_creation"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_13"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(assign, "$background_answer_2", 5),
				(else_try),
					(eq, ":trigger_param_2", 1),
					(assign, "$background_answer_2", 6),
				(else_try),
					(eq, ":trigger_param_2", 2),
					(assign, "$background_answer_2", 4),
				(else_try),
					(eq, ":trigger_param_2", 3),
					(assign, "$background_answer_2", 7),
				(else_try),
					(eq, ":trigger_param_2", 4),
					(assign, "$background_answer_2", 8),
				(try_end),
				(start_presentation, "prsnt_character_creation"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_14"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(assign, "$background_answer_3", 6),
				(else_try),
					(eq, ":trigger_param_2", 1),
					(assign, "$background_answer_3", 5),
				(else_try),
					(eq, ":trigger_param_2", 2),
					(assign, "$background_answer_3", 4),
				(else_try),
					(eq, ":trigger_param_2", 3),
					(assign, "$background_answer_3", 1),
				(else_try),
					(eq, ":trigger_param_2", 4),
					(assign, "$background_answer_3", 2),
				(else_try),
					(eq, ":trigger_param_2", 5),
					(try_begin),
						(eq, "$character_gender", 0),
						(assign, "$background_answer_3", 0),
					(else_try),
						(eq, "$character_gender", 1),
						(assign, "$background_answer_3", 0),
					(try_end),
				(try_end),
				(start_presentation, "prsnt_character_creation"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_15"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(assign, "$background_answer_4", 0),
				(else_try),
					(eq, ":trigger_param_2", 1),
					(assign, "$background_answer_4", 1),
				(else_try),
					(eq, ":trigger_param_2", 2),
					(assign, "$background_answer_4", 3),
				(else_try),
					(eq, ":trigger_param_2", 3),
					(assign, "$background_answer_4", 4),
				(else_try),
					(eq, ":trigger_param_2", 4),
					(assign, "$background_answer_4", 5),
				(try_end),
				(start_presentation, "prsnt_character_creation"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_3"),
				(store_random_in_range, ":random_in_range_0_2", 0, 2),
				(assign, "$character_gender", ":random_in_range_0_2"),
				(store_random_in_range, ":random_in_range_0_6", 0, 6),
				(try_begin),
					(eq, ":random_in_range_0_6", 0),
					(assign, "$background_type", 1),
				(else_try),
					(eq, ":random_in_range_0_6", 1),
					(assign, "$background_type", 2),
				(else_try),
					(eq, ":random_in_range_0_6", 2),
					(assign, "$background_type", 3),
				(else_try),
					(eq, ":random_in_range_0_6", 3),
					(assign, "$background_type", 4),
				(else_try),
					(eq, ":random_in_range_0_6", 4),
					(assign, "$background_type", 5),
				(else_try),
					(eq, ":random_in_range_0_6", 5),
					(assign, "$background_type", 6),
				(try_end),
				(store_random_in_range, ":random_in_range_0_6", 0, 5),
				(try_begin),
					(eq, ":random_in_range_0_6", 0),
					(assign, "$background_answer_2", 5),
				(else_try),
					(eq, ":random_in_range_0_6", 1),
					(assign, "$background_answer_2", 6),
				(else_try),
					(eq, ":random_in_range_0_6", 2),
					(assign, "$background_answer_2", 4),
				(else_try),
					(eq, ":random_in_range_0_6", 3),
					(assign, "$background_answer_2", 7),
				(else_try),
					(eq, ":random_in_range_0_6", 4),
					(assign, "$background_answer_2", 8),
				(try_end),
				(store_random_in_range, ":random_in_range_0_6", 0, 6),
				(try_begin),
					(eq, ":random_in_range_0_6", 0),
					(assign, "$background_answer_3", 6),
				(else_try),
					(eq, ":random_in_range_0_6", 1),
					(assign, "$background_answer_3", 5),
				(else_try),
					(eq, ":random_in_range_0_6", 2),
					(assign, "$background_answer_3", 4),
				(else_try),
					(eq, ":random_in_range_0_6", 3),
					(assign, "$background_answer_3", 1),
				(else_try),
					(eq, ":random_in_range_0_6", 4),
					(assign, "$background_answer_3", 2),
				(else_try),
					(eq, ":random_in_range_0_6", 5),
					(try_begin),
						(eq, "$character_gender", 0),
						(assign, "$background_answer_3", 0),
					(else_try),
						(eq, "$character_gender", 1),
						(assign, "$background_answer_3", 0),
					(try_end),
				(try_end),
				(store_random_in_range, ":random_in_range_0_6", 0, 5),
				(try_begin),
					(eq, ":random_in_range_0_6", 0),
					(assign, "$background_answer_4", 0),
				(else_try),
					(eq, ":random_in_range_0_6", 1),
					(assign, "$background_answer_4", 1),
				(else_try),
					(eq, ":random_in_range_0_6", 2),
					(assign, "$background_answer_4", 3),
				(else_try),
					(eq, ":random_in_range_0_6", 3),
					(assign, "$background_answer_4", 4),
				(else_try),
					(eq, ":random_in_range_0_6", 4),
					(assign, "$background_answer_4", 5),
				(try_end),
				(start_presentation, "prsnt_character_creation"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_2"),
				(assign, "$character_gender", 0),
				(assign, "$background_type", 6),
				(assign, "$background_answer_2", 8),
				(assign, "$background_answer_3", 0),
				(assign, "$background_answer_4", 5),
				(start_presentation, "prsnt_character_creation"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(call_script, "script_start_adventuring_raise_skills"),
				(try_begin),
					(eq, "$character_gender", 0),
					(troop_set_type, "trp_player", 0),
				(else_try),
					(eq, "$character_gender", 1),
					(troop_set_type, "trp_player", 1),
				(try_end),
				(try_begin),
					(eq, "$background_type", 6),
					(jump_to_menu, "mnu_auto_return"),
					(start_presentation, "prsnt_banner_selection"),
				(else_try),
					(presentation_set_duration, 0),
					(jump_to_menu, "mnu_auto_return"),
				(try_end),
			(try_end)
		])
	]),

	("dplmc_policy_management", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(faction_get_slot, ":player_supporters_faction_201", "fac_player_supporters_faction", 201),
			(faction_get_slot, ":player_supporters_faction_202", "fac_player_supporters_faction", 202),
			(faction_get_slot, ":player_supporters_faction_203", "fac_player_supporters_faction", 203),
			(faction_get_slot, ":player_supporters_faction_204", "fac_player_supporters_faction", 204),
			(faction_get_slot, ":player_supporters_faction_204_2", "fac_player_supporters_faction", 204),
			(create_game_button_overlay, "$g_presentation_obj_12", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_12", 1),
			(create_text_overlay, reg1, "@Select your domestic policy", 4112),
			(position_set_x, 1, 445),
			(position_set_y, 1, 700),
			(overlay_set_position, reg1, 1),
			(create_slider_overlay, "$g_presentation_obj_sliders_1", -3, 3),
			(create_slider_overlay, "$g_presentation_obj_sliders_2", -3, 3),
			(create_slider_overlay, "$g_presentation_obj_sliders_3", -3, 3),
			(create_slider_overlay, "$g_presentation_obj_sliders_4", -3, 3),
			(create_slider_overlay, "$g_presentation_obj_sliders_5", -3, 3),
			(assign, reg1, 25),
			(store_add, ":value", "str_dplmc_neither_centralize_nor_decentralized", ":player_supporters_faction_201"),
			(create_text_overlay, "$g_presentation_obj_sliders_6", ":value"),
			(store_add, ":value", "str_dplmc_neither_aristocratic_nor_plutocratic", ":player_supporters_faction_202"),
			(create_text_overlay, "$g_presentation_obj_sliders_7", ":value"),
			(store_add, ":value", "str_dplmc_mixture_serfs", ":player_supporters_faction_203"),
			(create_text_overlay, "$g_presentation_obj_sliders_8", ":value"),
			(store_add, ":value", "str_dplmc_mediocre_quality", ":player_supporters_faction_204"),
			(create_text_overlay, "$g_presentation_obj_sliders_9", ":value"),
			(store_add, ":value", "str_dplmc_neither_mercantilist_nor_laissez_faire", ":player_supporters_faction_204_2"),
			(create_text_overlay, "$g_presentation_obj_sliders_10", ":value"),
			(create_text_overlay, "$g_presentation_obj_1", "@Centralization:"),
			(create_text_overlay, "$g_presentation_obj_2", "@Aristocracy:"),
			(create_text_overlay, "$g_presentation_obj_3", "@Serfdom:"),
			(create_text_overlay, "$g_presentation_obj_4", "@Troop quality:"),
			(create_text_overlay, "$g_presentation_obj_5", "@Mercantilism:"),
			(create_text_overlay, "$g_presentation_obj_6", "@High centralization reduces tax inefficiency for the king and raises it for vassals. This will interfere  the relations between ruler and vassals."),
			(create_text_overlay, "$g_presentation_obj_7", "@High aristocracy will improve the relations between the king and his vassals who will be able to raise bigger armies but it will decreased trade."),
			(create_text_overlay, "$g_presentation_obj_8", "@High serfdom reduces tax inefficiency for the king and his vassals and vassals can maintain bigger armies but troops loose moral."),
			(create_text_overlay, "$g_presentation_obj_9", "@High troop quality increases the strength of troops but decreases army size."),
			(create_text_overlay, "$g_presentation_obj_10", "@Mercantilistic policies maximize exports while minimizing imports, and increase government regulation of industry."),
			(overlay_set_val, "$g_presentation_obj_sliders_1", ":player_supporters_faction_201"),
			(overlay_set_val, "$g_presentation_obj_sliders_2", ":player_supporters_faction_202"),
			(overlay_set_val, "$g_presentation_obj_sliders_3", ":player_supporters_faction_203"),
			(overlay_set_val, "$g_presentation_obj_sliders_4", ":player_supporters_faction_204"),
			(overlay_set_val, "$g_presentation_obj_sliders_5", ":player_supporters_faction_204_2"),
			(position_set_x, 1, 200),
			(position_set_y, 1, 575),
			(overlay_set_position, "$g_presentation_obj_sliders_1", 1),
			(position_set_y, 1, 450),
			(overlay_set_position, "$g_presentation_obj_sliders_2", 1),
			(position_set_y, 1, 325),
			(overlay_set_position, "$g_presentation_obj_sliders_3", 1),
			(position_set_y, 1, 200),
			(overlay_set_position, "$g_presentation_obj_sliders_4", 1),
			(position_set_y, 1, 75),
			(overlay_set_position, "$g_presentation_obj_sliders_5", 1),
			(position_set_x, 1, 100),
			(position_set_y, 1, 625),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(position_set_y, 1, 375),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(position_set_y, 1, 250),
			(overlay_set_position, "$g_presentation_obj_4", 1),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_5", 1),
			(position_set_x, 1, 50),
			(position_set_y, 1, 550),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(position_set_y, 1, 425),
			(overlay_set_position, "$g_presentation_obj_7", 1),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_8", 1),
			(position_set_y, 1, 175),
			(overlay_set_position, "$g_presentation_obj_9", 1),
			(position_set_y, 1, 50),
			(overlay_set_position, "$g_presentation_obj_10", 1),
			(position_set_x, 1, 775),
			(position_set_y, 1, 775),
			(overlay_set_size, "$g_presentation_obj_6", 1),
			(overlay_set_size, "$g_presentation_obj_7", 1),
			(overlay_set_size, "$g_presentation_obj_8", 1),
			(overlay_set_size, "$g_presentation_obj_9", 1),
			(overlay_set_size, "$g_presentation_obj_10", 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 575),
			(overlay_set_position, "$g_presentation_obj_sliders_6", 1),
			(position_set_y, 1, 450),
			(overlay_set_position, "$g_presentation_obj_sliders_7", 1),
			(position_set_y, 1, 325),
			(overlay_set_position, "$g_presentation_obj_sliders_8", 1),
			(position_set_y, 1, 200),
			(overlay_set_position, "$g_presentation_obj_sliders_9", 1),
			(position_set_y, 1, 75),
			(overlay_set_position, "$g_presentation_obj_sliders_10", 1),
			(position_set_x, 1, 925),
			(position_set_y, 1, 925),
			(overlay_set_size, "$g_presentation_obj_sliders_6", 1),
			(overlay_set_size, "$g_presentation_obj_sliders_7", 1),
			(overlay_set_size, "$g_presentation_obj_sliders_8", 1),
			(overlay_set_size, "$g_presentation_obj_sliders_9", 1),
			(overlay_set_size, "$g_presentation_obj_sliders_10", 1)
		]),

		(ti_on_presentation_run,
		[]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_1"),
				(faction_set_slot, "fac_player_supporters_faction", 201, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_neither_centralize_nor_decentralized"),
				(overlay_set_text, "$g_presentation_obj_sliders_6", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_2"),
				(faction_set_slot, "fac_player_supporters_faction", 202, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_neither_aristocratic_nor_plutocratic"),
				(overlay_set_text, "$g_presentation_obj_sliders_7", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_3"),
				(faction_set_slot, "fac_player_supporters_faction", 203, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_mixture_serfs"),
				(overlay_set_text, "$g_presentation_obj_sliders_8", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_4"),
				(faction_set_slot, "fac_player_supporters_faction", 204, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_mediocre_quality"),
				(overlay_set_text, "$g_presentation_obj_sliders_9", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_5"),
				(faction_set_slot, "fac_player_supporters_faction", 206, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_neither_mercantilist_nor_laissez_faire"),
				(overlay_set_text, "$g_presentation_obj_sliders_10", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_12"),
				(assign, "$g_players_policy_set", 1),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_game_button_overlay, "$g_presentation_obj_10", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_10", 1),
			(create_text_overlay, reg1, "@Select your domestic policy", 4112),
			(position_set_x, 1, 445),
			(position_set_y, 1, 700),
			(overlay_set_position, reg1, 1),
			(create_slider_overlay, "$g_presentation_obj_sliders_1", -3, 3),
			(create_slider_overlay, "$g_presentation_obj_sliders_2", -3, 3),
			(create_slider_overlay, "$g_presentation_obj_sliders_3", -3, 3),
			(create_slider_overlay, "$g_presentation_obj_sliders_4", -3, 3),
			(assign, reg1, 25),
			(create_text_overlay, "$g_presentation_obj_sliders_5", "str_dplmc_neither_centralize_nor_decentralized"),
			(create_text_overlay, "$g_presentation_obj_sliders_6", "str_dplmc_neither_aristocratic_nor_plutocratic"),
			(create_text_overlay, "$g_presentation_obj_sliders_7", "str_dplmc_mixture_serfs"),
			(create_text_overlay, "$g_presentation_obj_sliders_8", "str_dplmc_mediocre_quality"),
			(create_text_overlay, "$g_presentation_obj_1", "@Centralization:"),
			(create_text_overlay, "$g_presentation_obj_2", "@Aristocracy:"),
			(create_text_overlay, "$g_presentation_obj_3", "@Serfdom:"),
			(create_text_overlay, "$g_presentation_obj_4", "@Conscript quality:"),
			(create_text_overlay, "$g_presentation_obj_5", "@High centralization reduces tax inefficiency for the sovereign and raises it for vassals. This will interfere  the relations between ruler and vassals."),
			(create_text_overlay, "$g_presentation_obj_6", "@High aristocracy will improve the relations between the sovereign and his vassals who will be able to raise larger armies but it will decreased trade capabilities with a disenfranchised merchant class."),
			(create_text_overlay, "$g_presentation_obj_7", "@High serfdom reduces tax inefficiency for the sovereign and his vassals and vassals can maintain larger armies but soldiers lose morale."),
			(create_text_overlay, "$g_presentation_obj_8", "@High troop quality increases the strength of troops but decreases army size."),
			(faction_get_slot, ":player_supporters_faction_201", "fac_player_supporters_faction", 201),
			(faction_get_slot, ":player_supporters_faction_202", "fac_player_supporters_faction", 202),
			(faction_get_slot, ":player_supporters_faction_203", "fac_player_supporters_faction", 203),
			(faction_get_slot, ":player_supporters_faction_204", "fac_player_supporters_faction", 204),
			(overlay_set_val, "$g_presentation_obj_sliders_1", ":player_supporters_faction_201"),
			(overlay_set_val, "$g_presentation_obj_sliders_2", ":player_supporters_faction_202"),
			(overlay_set_val, "$g_presentation_obj_sliders_3", ":player_supporters_faction_203"),
			(overlay_set_val, "$g_presentation_obj_sliders_4", ":player_supporters_faction_204"),
			(position_set_x, 1, 200),
			(position_set_y, 1, 600),
			(overlay_set_position, "$g_presentation_obj_sliders_1", 1),
			(position_set_y, 1, 450),
			(overlay_set_position, "$g_presentation_obj_sliders_2", 1),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_sliders_3", 1),
			(position_set_y, 1, 150),
			(overlay_set_position, "$g_presentation_obj_sliders_4", 1),
			(position_set_x, 1, 100),
			(position_set_y, 1, 650),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(position_set_y, 1, 350),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(position_set_y, 1, 200),
			(overlay_set_position, "$g_presentation_obj_4", 1),
			(position_set_x, 1, 50),
			(position_set_y, 1, 550),
			(overlay_set_position, "$g_presentation_obj_5", 1),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(position_set_y, 1, 250),
			(overlay_set_position, "$g_presentation_obj_7", 1),
			(position_set_y, 1, 100),
			(overlay_set_position, "$g_presentation_obj_8", 1),
			(position_set_x, 1, 775),
			(position_set_y, 1, 775),
			(overlay_set_size, "$g_presentation_obj_5", 1),
			(overlay_set_size, "$g_presentation_obj_6", 1),
			(overlay_set_size, "$g_presentation_obj_7", 1),
			(overlay_set_size, "$g_presentation_obj_8", 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 600),
			(overlay_set_position, "$g_presentation_obj_sliders_5", 1),
			(position_set_y, 1, 450),
			(overlay_set_position, "$g_presentation_obj_sliders_6", 1),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_sliders_7", 1),
			(position_set_y, 1, 150),
			(overlay_set_position, "$g_presentation_obj_sliders_8", 1),
			(position_set_x, 1, 925),
			(position_set_y, 1, 925),
			(overlay_set_size, "$g_presentation_obj_sliders_5", 1),
			(overlay_set_size, "$g_presentation_obj_sliders_6", 1),
			(overlay_set_size, "$g_presentation_obj_sliders_7", 1),
			(overlay_set_size, "$g_presentation_obj_sliders_8", 1)
		]),

		(ti_on_presentation_run,
		[]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_1"),
				(faction_set_slot, "fac_player_supporters_faction", 201, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_neither_centralize_nor_decentralized"),
				(overlay_set_text, "$g_presentation_obj_sliders_5", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_2"),
				(faction_set_slot, "fac_player_supporters_faction", 202, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_neither_aristocratic_nor_plutocratic"),
				(overlay_set_text, "$g_presentation_obj_sliders_6", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_3"),
				(faction_set_slot, "fac_player_supporters_faction", 203, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_mixture_serfs"),
				(overlay_set_text, "$g_presentation_obj_sliders_7", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_4"),
				(faction_set_slot, "fac_player_supporters_faction", 204, ":trigger_param_2"),
				(val_add, ":trigger_param_2", "str_dplmc_mediocre_quality"),
				(overlay_set_text, "$g_presentation_obj_sliders_8", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_10"),
				(assign, "$g_players_policy_set", 1),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("dplmc_peace_terms", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_game_button_overlay, "$g_presentation_obj_10", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_10", 1),
			(create_game_button_overlay, "$g_presentation_obj_9", "@Cancel"),
			(position_set_x, 1, 100),
			(overlay_set_position, "$g_presentation_obj_9", 1),
			(create_text_overlay, reg1, "@Dictate the peace terms", 4112),
			(position_set_x, 1, 445),
			(position_set_y, 1, 700),
			(overlay_set_position, reg1, 1),
			(position_set_y, 1, 550),
			(create_text_overlay, "$g_presentation_obj_2", "@Select the castle and the amount of money and check the boxes to activate the demand. The demands are combined if both boxes are checked."),
			(position_set_x, 1, 50),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(create_slider_overlay, "$g_presentation_obj_sliders_1", 1, 10),
			(overlay_set_val, "$g_presentation_obj_sliders_1", 1),
			(position_set_x, 1, 300),
			(position_set_y, 1, 350),
			(overlay_set_position, "$g_presentation_obj_sliders_1", 1),
			(assign, "$demanded_money", 1000),
			(assign, "$diplomacy_var", 1),
			(create_text_overlay, "$g_presentation_obj_sliders_2", "@1000 denars"),
			(position_set_x, 1, 500),
			(overlay_set_position, "$g_presentation_obj_sliders_2", 1),
			(create_check_box_overlay, "$g_presentation_obj_battle_check0", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 700),
			(overlay_set_position, "$g_presentation_obj_battle_check0", 1),
			(overlay_set_val, "$g_presentation_obj_battle_check0", 1),
			(assign, "$demanded_castle", 0),
			(assign, ":var_1", 0),
			(create_combo_button_overlay, "$g_presentation_obj_1"),
			(try_for_range, ":party", "p_castle_1", "p_village_1"),
				(party_slot_eq, ":party", slot_party_type, 2),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(eq, ":faction_of_party_party", "$g_notification_menu_var1"),
				(str_store_party_name, 2, ":party"),
				(overlay_add_item, "$g_presentation_obj_1", 2),
				(assign, "$demanded_castle", ":party"),
				(val_add, ":var_1", 1),
			(try_end),
			(assign, "$diplomacy_var2", 0),
			(position_set_x, 1, 300),
			(position_set_y, 1, 250),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(overlay_set_val, "$g_presentation_obj_1", ":var_1"),
			(create_check_box_overlay, "$g_presentation_obj_battle_check1", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 700),
			(overlay_set_position, "$g_presentation_obj_battle_check1", 1)
		]),

		(ti_on_presentation_run,
		[]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(assign, ":var_3", 0),
				(try_for_range, ":party", "p_castle_1", "p_village_1"),
					(store_faction_of_party, ":faction_of_party_party", ":party"),
					(eq, ":faction_of_party_party", "$g_notification_menu_var1"),
					(try_begin),
						(eq, ":var_3", ":trigger_param_2"),
						(assign, "$demanded_castle", ":party"),
					(try_end),
					(val_add, ":var_3", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check0"),
				(assign, "$diplomacy_var", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check1"),
				(assign, "$diplomacy_var2", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_1"),
				(store_mul, "$demanded_money", ":trigger_param_2", 1000),
				(assign, reg1, "$demanded_money"),
				(overlay_set_text, "$g_presentation_obj_sliders_2", "str_reg1_denars"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_9"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_10"),
				(presentation_set_duration, 0),
				(try_begin),
					(eq, "$diplomacy_var", 0),
					(assign, "$demanded_money", 0),
				(try_end),
				(try_begin),
					(eq, "$diplomacy_var2", 0),
					(assign, "$demanded_castle", 0),
				(try_end),
				(assign, ":value", 0),
				(try_begin),
					(gt, "$demanded_money", 0),
					(store_div, ":value", "$demanded_money", 1000),
				(try_end),
				(assign, ":var_7", "$g_notification_menu_var1"),
				(assign, ":value_2", "fac_player_supporters_faction"),
				(try_begin),
					(neg|faction_slot_eq, ":value_2", slot_faction_state, 0),
					(is_between, "$players_kingdom", "fac_kingdom_1", "fac_kingdoms_end"),
					(assign, ":value_2", "$players_kingdom"),
				(try_end),
				(assign, ":value_3", 0),
				(assign, ":value_4", 0),
				(assign, ":value_5", 100),
				(try_begin),
					(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
					(try_begin),
						(neg|party_slot_eq, "$demanded_castle", 403, 0),
						(store_current_hours, ":current_hours"),
						(party_get_slot, reg0, "$demanded_castle", 403),
						(val_sub, ":current_hours", reg0),
						(try_begin),
							(lt, ":current_hours", 744),
							(assign, ":value_3", 1),
						(else_try),
							(neg|party_slot_eq, "$demanded_castle", slot_center_original_faction, ":var_7"),
							(lt, ":current_hours", 2184),
							(assign, ":value_3", 1),
						(else_try),
							(assign, ":value_3", 0),
						(try_end),
					(else_try),
						(this_or_next|party_slot_eq, "$demanded_castle", slot_center_original_faction, "$players_kingdom"),
						(this_or_next|party_slot_eq, "$demanded_castle", slot_center_ex_faction, "$players_kingdom"),
						(party_slot_eq, "$demanded_castle", slot_center_ex_faction, "fac_player_supporters_faction"),
						(assign, ":value_3", 1),
					(else_try),
						(neg|party_slot_eq, "$demanded_castle", slot_center_original_faction, ":var_7"),
						(party_get_slot, ":demanded_castle_center_original_faction", "$demanded_castle", slot_center_original_faction),
						(is_between, ":demanded_castle_center_original_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
						(faction_slot_eq, ":demanded_castle_center_original_faction", slot_faction_state, 0),
						(store_relation, reg0, ":var_7", ":demanded_castle_center_original_faction"),
						(lt, reg0, 0),
						(assign, ":value_3", 1),
					(else_try),
						(neg|party_slot_eq, "$demanded_castle", slot_center_ex_faction, ":var_7"),
						(party_get_slot, ":demanded_castle_center_original_faction", "$demanded_castle", slot_center_ex_faction),
						(is_between, ":demanded_castle_center_original_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
						(faction_slot_eq, ":demanded_castle_center_original_faction", slot_faction_state, 0),
						(store_relation, reg0, ":var_7", ":demanded_castle_center_original_faction"),
						(lt, reg0, 0),
						(assign, ":value_3", 1),
					(else_try),
						(neg|party_slot_ge, "$demanded_castle", 7, 0),
						(assign, ":value_3", 1),
					(try_end),
					(party_slot_ge, "$demanded_castle", 7, 1),
					(party_get_slot, ":demanded_castle_town_lord", "$demanded_castle", slot_town_lord),
					(assign, ":value_6", -1),
					(assign, ":value_4", 1),
					(assign, ":var_16", 10000),
					(assign, ":var_17", 10000),
					(try_for_range, ":party_2", "p_town_1", "p_salt_mine"),
						(neq, ":party_2", "$demanded_castle"),
						(try_begin),
							(party_slot_eq, ":party_2", slot_village_bound_center, "$demanded_castle"),
							(neg|party_slot_eq, ":party_2", slot_town_lord, ":demanded_castle_town_lord"),
							(party_slot_ge, ":party_2", 7, 1),
							(party_get_slot, ":value_6", ":party_2", slot_town_lord),
						(else_try),
							(party_slot_eq, ":party_2", slot_town_lord, ":demanded_castle_town_lord"),
							(neg|party_slot_eq, ":party_2", slot_village_bound_center, "$demanded_castle"),
							(assign, ":value_4", 0),
						(try_end),
						(this_or_next|party_slot_eq, ":party_2", slot_party_type, 3),
						(this_or_next|party_slot_eq, ":party_2", slot_party_type, 2),
						(store_faction_of_party, ":faction_of_party_party_2", ":party_2"),
						(store_distance_to_party_from_party, ":distance_to_party_from_party_party_2_demanded_castle", ":party_2", "$demanded_castle"),
						(call_script, "script_dplmc_get_faction_truce_length_with_faction", ":faction_of_party_party_2", ":var_7"),
						(try_begin),
							(this_or_next|gt, reg0, 30),
							(eq, ":faction_of_party_party_2", ":var_7"),
							(val_min, ":var_16", ":distance_to_party_from_party_party_2_demanded_castle"),
						(else_try),
							(store_relation, reg0, ":faction_of_party_party_2", ":var_7"),
							(val_min, ":var_17", ":distance_to_party_from_party_party_2_demanded_castle"),
						(try_end),
					(try_end),
					(assign, ":value_5", 100),
					(try_begin),
						(this_or_next|ge, ":var_16", 10000),
						(ge, ":var_17", 10000),
					(else_try),
						(lt, ":var_16", ":var_17"),
						(gt, ":var_17", 25),
						(val_max, ":var_16", 1),
						(store_mul, ":value_5", ":var_17", 100),
						(val_div, ":value_5", ":var_16"),
						(try_begin),
							(le, ":var_17", 50),
							(val_min, ":value_5", 200),
						(try_end),
					(else_try),
						(lt, ":var_17", ":var_16"),
						(gt, ":var_16", 25),
						(val_max, ":var_17", 1),
						(store_mul, ":value_5", ":var_16", 100),
						(val_div, ":value_5", ":var_17"),
						(try_begin),
							(le, ":var_16", 50),
							(val_min, ":value_5", 200),
						(try_end),
						(val_mul, ":value_5", -1),
					(try_end),
					(neq, ":value_4", 1),
					(ge, ":value_6", 1),
					(assign, ":value_4", 1),
					(try_for_range, ":party_2", "p_town_1", "p_salt_mine"),
						(party_slot_eq, ":party_2", slot_town_lord, ":value_6"),
						(this_or_next|neg|is_between, ":party_2", "p_village_1", "p_salt_mine"),
						(neg|party_slot_eq, ":party_2", slot_village_bound_center, "$demanded_castle"),
						(assign, ":value_4", 0),
					(try_end),
				(try_end),
				(assign, ":value_7", 100),
				(assign, ":value_8", 150),
				(try_begin),
					(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
					(assign, ":var_23", 0),
					(assign, ":value_8", 0),
					(try_for_range, ":party_2", "p_castle_1", "p_village_1"),
						(try_begin),
							(eq, "$g_dplmc_terrain_advantage", 0),
							(call_script, "script_dplmc_party_calculate_strength_in_terrain", ":party_2", -2, 0, 1),
							(assign, reg0, reg1),
						(else_try),
							(call_script, "script_party_calculate_strength", ":party_2", -2, 0),
						(try_end),
						(val_max, reg0, 250),
						(val_add, ":var_23", reg0),
						(val_max, ":value_8", reg0),
						(eq, ":party_2", "$demanded_castle"),
						(assign, ":value_7", reg0),
					(try_end),
					(try_begin),
						(gt, "p_village_1", "p_castle_1"),
						(store_sub, reg0, "p_village_1", "p_castle_1"),
						(val_div, ":var_23", reg0),
					(try_end),
					(val_max, ":var_23", 300),
					(val_mul, ":value_7", 100),
					(val_mul, ":value_8", 100),
					(store_div, reg0, ":var_23", 2),
					(val_add, ":value_7", reg0),
					(val_add, ":value_8", reg0),
					(val_div, ":value_7", ":var_23"),
					(val_div, ":value_8", ":var_23"),
					(assign, reg0, ":value_7"),
					(val_max, reg0, 100),
					(val_mul, reg0, 12),
					(val_add, reg0, 50),
					(val_div, reg0, 100),
					(val_add, ":value", reg0),
					(val_sub, ":value_8", 100),
					(val_div, ":value_8", 2),
					(val_add, ":value_8", 100),
					(val_clamp, ":value_8", 110, 400),
				(try_end),
				(call_script, "script_npc_decision_checklist_peace_or_war", "$g_notification_menu_var1", ":value_2", -1),
				(assign, ":var_24", reg0),
				(assign, ":var_25", reg0),
				(val_mul, ":var_25", 2),
				(store_random_in_range, ":random_in_range_0_value", 0, ":value"),
				(val_div, ":value", -2),
				(call_script, "script_change_player_relation_with_faction", "$g_notification_menu_var1", ":value"),
				(assign, ":var_27", 0),
				(try_for_range, ":demanded_castle_center_original_faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
					(faction_slot_eq, ":demanded_castle_center_original_faction", slot_faction_state, 0),
					(neq, ":demanded_castle_center_original_faction", ":var_7"),
					(neq, ":demanded_castle_center_original_faction", "fac_player_supporters_faction"),
					(neq, ":demanded_castle_center_original_faction", "$players_kingdom"),
					(call_script, "script_dplmc_get_faction_truce_length_with_faction", ":demanded_castle_center_original_faction", ":var_7"),
					(le, reg0, 30),
					(call_script, "script_dplmc_get_faction_truce_length_with_faction", ":demanded_castle_center_original_faction", "$players_kingdom"),
					(le, reg0, 30),
					(val_add, ":var_27", 1),
				(try_end),
				(game_get_reduce_campaign_ai, ":game_reduce_campaign_ai"),
				(val_clamp, ":game_reduce_campaign_ai", 0, 3),
				(try_begin),
					(lt, ":var_24", 0),
					(this_or_next|is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
					(gt, "$demanded_money", 0),
					(jump_to_menu, "mnu_dplmc_deny_terms"),
				(else_try),
					(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
					(lt, ":var_24", 2),
					(this_or_next|party_slot_eq, "$demanded_castle", slot_center_original_faction, ":var_7"),
					(this_or_next|eq, ":value_4", 1),
					(this_or_next|ge, ":value_7", ":value_8"),
					(this_or_next|eq, ":value_3", 0),
					(eq, ":var_27", 0),
					(jump_to_menu, "mnu_dplmc_deny_terms"),
				(else_try),
					(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
					(assign, reg0, 1),
					(val_sub, reg0, ":value_3"),
					(val_max, reg0, 0),
					(try_begin),
						(party_slot_eq, "$demanded_castle", slot_center_original_faction, ":var_7"),
						(val_add, reg0, 1),
					(try_end),
					(val_max, ":value_4", 0),
					(val_add, reg0, ":value_4"),
					(try_begin),
						(ge, ":value_7", ":value_8"),
						(val_add, reg0, 1),
					(try_end),
					(try_begin),
						(eq, ":var_27", 0),
						(val_add, reg0, 1),
					(try_end),
					(try_begin),
						(ge, ":value_5", 190),
						(val_add, reg0, 1),
					(try_end),
					(val_add, ":random_in_range_0_value", reg0),
					(ge, reg0, 3),
					(jump_to_menu, "mnu_dplmc_deny_terms"),
				(else_try),
					(eq, ":var_27", 0),
					(this_or_next|is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
					(gt, "$demanded_money", 0),
					(is_between, ":var_7", "fac_player_supporters_faction", "fac_kingdoms_end"),
					(assign, ":value_9", 2),
					(try_begin),
						(eq, ":game_reduce_campaign_ai", 0),
						(store_add, ":value_9", ":var_24", 1),
						(val_max, ":value_9", 4),
					(else_try),
						(eq, ":game_reduce_campaign_ai", 1),
						(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
						(store_add, ":value_9", ":var_24", 1),
						(val_max, ":value_9", 4),
					(else_try),
						(eq, ":game_reduce_campaign_ai", 2),
					(try_end),
					(lt, ":var_24", ":value_9"),
					(jump_to_menu, "mnu_dplmc_deny_terms"),
				(else_try),
					(le, ":random_in_range_0_value", ":var_25"),
					(try_begin),
						(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
						(try_begin),
							(party_slot_ge, "$demanded_castle", 7, 1),
							(party_get_slot, reg0, ":party_2", slot_town_lord),
							(call_script, "script_change_player_relation_with_troop", reg0, -1),
						(try_end),
						(try_for_range, ":party_2", "p_village_1", "p_salt_mine"),
							(party_slot_eq, ":party_2", slot_village_bound_center, "$demanded_castle"),
							(party_slot_ge, ":party_2", 7, 1),
							(party_get_slot, reg0, ":party_2", slot_town_lord),
							(call_script, "script_change_player_relation_with_troop", reg0, -1),
						(try_end),
						(call_script, "script_give_center_to_faction", "$demanded_castle", ":value_2"),
					(try_end),
					(try_begin),
						(gt, "$demanded_money", 0),
						(call_script, "script_dplmc_pay_into_treasury", "$demanded_money"),
						(faction_get_slot, ":g_notification_menu_var1_leader", "$g_notification_menu_var1", slot_faction_leader),
						(try_begin),
							(ge, ":g_notification_menu_var1_leader", 1),
							(neq, "$g_notification_menu_var1", "$players_kingdom"),
							(neq, "$g_notification_menu_var1", "fac_player_supporters_faction"),
							(ge, "$demanded_money", 1),
							(assign, ":var_31", "$demanded_money"),
							(ge, ":var_31", 1),
							(call_script, "script_dplmc_remove_gold_from_lord_and_holdings", ":var_31", ":g_notification_menu_var1_leader"),
							(store_random_in_range, reg0, 0, 1000),
							(val_add, reg0, ":var_31"),
							(val_div, reg0, 1000),
							(ge, reg0, 1),
							(val_mul, reg0, -1),
							(call_script, "script_change_player_relation_with_troop", ":g_notification_menu_var1_leader", reg0),
						(try_end),
					(try_end),
					(call_script, "script_diplomacy_start_peace_between_kingdoms", "$g_notification_menu_var1", ":value_2", 1),
					(presentation_set_duration, 0),
					(change_screen_return),
				(else_try),
					(jump_to_menu, "mnu_dplmc_deny_terms"),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 999999),
			(create_game_button_overlay, "$g_presentation_obj_10", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_10", 1),
			(create_game_button_overlay, "$g_presentation_obj_9", "@Cancel"),
			(position_set_x, 1, 100),
			(overlay_set_position, "$g_presentation_obj_9", 1),
			(create_text_overlay, reg1, "@Dictate the peace terms", 4112),
			(position_set_x, 1, 445),
			(position_set_y, 1, 700),
			(overlay_set_position, reg1, 1),
			(position_set_y, 1, 550),
			(create_text_overlay, "$g_presentation_obj_2", "@Select the castle and the amount of money and check the boxes to activate the demand. The demands are combined if both boxes are checked."),
			(position_set_x, 1, 50),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(create_slider_overlay, "$g_presentation_obj_sliders_1", 1, 10),
			(overlay_set_val, "$g_presentation_obj_sliders_1", 1),
			(position_set_x, 1, 300),
			(position_set_y, 1, 350),
			(overlay_set_position, "$g_presentation_obj_sliders_1", 1),
			(assign, "$demanded_money", 1000),
			(assign, "$diplomacy_var", 1),
			(create_text_overlay, "$g_presentation_obj_sliders_2", "@1000 denars"),
			(position_set_x, 1, 500),
			(overlay_set_position, "$g_presentation_obj_sliders_2", 1),
			(create_check_box_overlay, "$g_presentation_obj_battle_check0", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 700),
			(overlay_set_position, "$g_presentation_obj_battle_check0", 1),
			(overlay_set_val, "$g_presentation_obj_battle_check0", 1),
			(assign, "$demanded_castle", 0),
			(assign, ":var_1", 0),
			(create_combo_button_overlay, "$g_presentation_obj_1"),
			(try_for_range, ":party", "p_castle_1", "p_village_1"),
				(store_faction_of_party, ":faction_of_party_party", ":party"),
				(eq, ":faction_of_party_party", "$g_notification_menu_var1"),
				(str_store_party_name, 2, ":party"),
				(overlay_add_item, "$g_presentation_obj_1", 2),
				(assign, "$demanded_castle", ":party"),
				(val_add, ":var_1", 1),
			(try_end),
			(assign, "$diplomacy_var2", 0),
			(position_set_x, 1, 300),
			(position_set_y, 1, 250),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(overlay_set_val, "$g_presentation_obj_1", ":var_1"),
			(create_check_box_overlay, "$g_presentation_obj_battle_check1", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 700),
			(overlay_set_position, "$g_presentation_obj_battle_check1", 1)
		]),

		(ti_on_presentation_run,
		[]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(assign, ":var_3", 0),
				(try_for_range, ":party", "p_castle_1", "p_village_1"),
					(store_faction_of_party, ":faction_of_party_party", ":party"),
					(eq, ":faction_of_party_party", "$g_notification_menu_var1"),
					(try_begin),
						(eq, ":var_3", ":trigger_param_2"),
						(assign, "$demanded_castle", ":party"),
					(try_end),
					(val_add, ":var_3", 1),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check0"),
				(assign, "$diplomacy_var", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check1"),
				(assign, "$diplomacy_var2", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_sliders_1"),
				(store_mul, "$demanded_money", ":trigger_param_2", 1000),
				(assign, reg0, "$demanded_money"),
				(overlay_set_text, "$g_presentation_obj_sliders_2", "@{reg0} denars"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_9"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_10"),
				(presentation_set_duration, 0),
				(try_begin),
					(eq, "$diplomacy_var", 0),
					(assign, "$demanded_money", 0),
				(try_end),
				(try_begin),
					(eq, "$diplomacy_var2", 0),
					(assign, "$demanded_castle", 0),
				(try_end),
				(assign, ":value", 0),
				(try_begin),
					(gt, "$demanded_money", 0),
					(store_div, ":value", "$demanded_money", 1000),
				(try_end),
				(try_begin),
					(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
					(val_add, ":value", 12),
				(try_end),
				(call_script, "script_npc_decision_checklist_peace_or_war", "$g_notification_menu_var1", "fac_player_supporters_faction", -1),
				(assign, ":var_7", reg0),
				(val_mul, ":var_7", 2),
				(store_random_in_range, ":random_in_range_0_value", 0, ":value"),
				(val_div, ":value", -2),
				(call_script, "script_change_player_relation_with_faction", "$g_notification_menu_var1", ":value"),
				(try_begin),
					(le, ":random_in_range_0_value", ":var_7"),
					(try_begin),
						(is_between, "$demanded_castle", "p_castle_1", "p_village_1"),
						(call_script, "script_give_center_to_faction", "$demanded_castle", "fac_player_supporters_faction"),
					(try_end),
					(try_begin),
						(gt, "$demanded_money", 0),
						(call_script, "script_dplmc_pay_into_treasury", "$demanded_money"),
					(try_end),
					(call_script, "script_diplomacy_start_peace_between_kingdoms", "$g_notification_menu_var1", "fac_player_supporters_faction", 1),
					(presentation_set_duration, 0),
					(change_screen_return),
				(else_try),
					(jump_to_menu, "mnu_dplmc_deny_terms"),
				(try_end),
			(try_end)
		])
	]),

	("jrider_faction_relations_report", 0, mesh_message_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg1, "mesh_pic_castledes"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 180),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 795),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(create_mesh_overlay, reg1, "mesh_pic_looted_village"),
			(position_set_x, 1, 170),
			(position_set_y, 1, 170),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, -15),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@ Faction Relations Report ", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 670),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg1, 1),
			(create_game_button_overlay, reg1, "@ Return to menu "),
			(position_set_x, 1, 500),
			(position_set_y, 1, 23),
			(overlay_set_position, reg1, 1),
			(assign, "$g_jrider_faction_report_Return_to_menu", reg1),
			(assign, ":value", 250),
			(assign, ":value_2", 620),
			(position_set_y, 1, ":value_2"),
			(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(faction_slot_eq, ":faction", slot_faction_state, 0),
				(try_begin),
					(is_between, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
					(store_sub, ":value_3", ":faction", "fac_kingdom_1"),
					(val_add, ":value_3", "str_swadians"),
					(str_store_string, 1, ":value_3"),
				(else_try),
					(str_store_string, 1, "@Your kingdom"),
				(try_end),
				(str_store_string, 11, ":value_3"),
				(create_text_overlay, reg10, 1, 65540),
				(faction_get_color, ":color_faction", ":faction"),
				(overlay_set_color, reg10, ":color_faction"),
				(position_set_x, 3, 650),
				(position_set_y, 3, 800),
				(overlay_set_size, reg10, 3),
				(position_set_x, 1, ":value"),
				(overlay_set_position, reg10, 1),
				(val_add, ":value", 90),
			(try_end),
			(assign, ":value", 215),
			(assign, ":value_2", 597),
			(assign, ":var_6", 0),
			(position_set_x, ":var_6", 720),
			(position_set_y, ":var_6", 775),
			(assign, ":var_7", 50),
			(position_set_x, ":var_7", 60),
			(position_set_y, ":var_7", 28000),
			(create_text_overlay, reg2, "@Player^Relation", 16),
			(overlay_set_size, reg2, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg2, 1),
			(val_add, ":value", 45),
			(try_for_range, ":number", 0, 7),
				(create_mesh_overlay, reg1, "mesh_white_plane"),
				(overlay_set_color, reg1, 0),
				(overlay_set_size, reg1, ":var_7"),
				(store_sub, ":value_4", ":value", 15),
				(store_sub, ":value_5", ":value_2", 500),
				(position_set_x, 2, ":value_4"),
				(position_set_y, 2, ":value_5"),
				(overlay_set_position, reg1, 2),
				(val_add, ":value", 90),
				(try_begin),
					(eq, "$cheat_mode", 1),
					(assign, reg20, ":number"),
					(display_message, "@{!}DEBUG - Drawing line {reg20}"),
				(try_end),
			(try_end),
			(str_clear, 9),
			(str_clear, 8),
			(str_clear, 3),
			(str_clear, 60),
			(str_clear, 61),
			(str_clear, 0),
			(create_text_overlay, reg1, 0, 131072),
			(position_set_x, 1, 50),
			(position_set_y, 1, 70),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 860),
			(position_set_y, 1, 527),
			(overlay_set_area_size, reg1, 1),
			(set_container_overlay, reg1),
			(assign, ":value_6", 0),
			(assign, ":value_2", 0),
			(assign, ":var_12", 0),
			(try_for_range_backwards, ":var_13", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(faction_slot_eq, ":var_13", slot_faction_state, 0),
				(assign, ":var_14", 220),
				(try_for_range, ":faction_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
					(faction_slot_eq, ":faction_2", slot_faction_state, 0),
					(try_begin),
						(neq, ":faction_2", ":var_13"),
						(str_store_faction_name, 8, ":faction_2"),
						(try_begin),
							(neq, ":faction_2", ":var_13"),
							(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_13", ":faction_2"),
							(assign, ":var_16", reg0),
							(assign, ":var_17", reg1),
							(try_begin),
								(eq, ":var_16", -2),
								(str_store_string, 60, "@War"),
								(assign, reg60, 14483456),
								(assign, reg59, 0),
							(else_try),
								(eq, ":var_16", -1),
								(str_store_string, 60, "@Casus Belli"),
								(assign, reg60, 14516224),
								(assign, reg59, ":var_17"),
							(else_try),
								(eq, ":var_16", 0),
								(str_store_string, 60, "@Peace"),
								(assign, reg60, 16777215),
								(assign, reg59, 0),
							(else_try),
								(eq, ":var_16", 1),
								(str_store_string, 60, "@Truce"),
								(assign, reg60, 14540253),
								(assign, reg59, ":var_17"),
								(try_begin),
									(ge, ":var_17", 61),
									(str_store_string, 60, "@Alliance"),
									(assign, reg60, 65280),
									(store_sub, reg59, ":var_17", 60),
								(else_try),
									(ge, ":var_17", 41),
									(str_store_string, 60, "@Defense"),
									(assign, reg60, 65450),
									(store_sub, reg59, ":var_17", 40),
								(else_try),
									(ge, ":var_17", 21),
									(str_store_string, 60, "@Trade"),
									(assign, reg60, 65484),
									(store_sub, reg59, ":var_17", 20),
								(try_end),
							(try_end),
							(val_add, ":value", 50),
							(create_text_overlay, reg10, 60, 65540),
							(overlay_set_size, reg10, ":value_6"),
							(overlay_set_color, reg10, reg60),
							(store_sub, ":value_4", ":var_14", 20),
							(store_add, ":value_7", ":value_2", 54),
							(position_set_x, 3, ":value_4"),
							(position_set_y, 3, ":value_7"),
							(overlay_set_position, reg10, 3),
							(create_text_overlay, reg10, "@{reg59?{reg59} days:}", 16),
							(overlay_set_size, reg10, ":value_6"),
							(store_add, ":value_7", ":value_2", 36),
							(store_add, ":value_4", ":var_14", 10),
							(position_set_x, 3, ":value_4"),
							(position_set_y, 3, ":value_7"),
							(overlay_set_position, reg10, 3),
							(store_relation, ":relation_var_13_faction_2", ":var_13", ":faction_2"),
							(assign, reg61, ":relation_var_13_faction_2"),
							(create_text_overlay, reg10, "@{reg61}", 16),
							(overlay_set_size, reg10, ":value_6"),
							(store_add, ":value_7", ":value_2", 18),
							(store_add, ":value_4", ":var_14", 10),
							(position_set_x, 3, ":value_4"),
							(position_set_y, 3, ":value_7"),
							(overlay_set_position, reg10, 3),
						(try_end),
					(try_end),
					(val_add, ":var_14", 90),
				(try_end),
				(assign, ":value", 165),
				(val_add, ":value_2", 54),
				(create_mesh_overlay, reg1, "mesh_white_plane"),
				(overlay_set_color, reg1, 0),
				(position_set_x, 1, 42000),
				(position_set_y, 1, 60),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 17),
				(store_add, ":value_7", ":value_2", 20),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(str_store_faction_name, 9, ":var_13"),
				(str_store_string, 1, "@{s9}"),
				(create_text_overlay, reg10, 1, 65540),
				(faction_get_color, ":color_faction", ":var_13"),
				(overlay_set_color, reg10, ":color_faction"),
				(position_set_x, 3, 750),
				(position_set_y, 3, 850),
				(overlay_set_size, reg10, 3),
				(position_set_x, 3, 10),
				(position_set_y, 3, ":value_2"),
				(overlay_set_position, reg10, 3),
				(assign, ":value", 165),
				(assign, ":value_6", 0),
				(position_set_x, ":value_6", 700),
				(position_set_y, ":value_6", 800),
				(store_relation, reg1, "fac_player_supporters_faction", ":var_13"),
				(try_begin),
					(ge, reg1, 90),
					(str_store_string, 3, "@Loyal"),
				(else_try),
					(ge, reg1, 80),
					(str_store_string, 3, "@Devoted"),
				(else_try),
					(ge, reg1, 70),
					(str_store_string, 3, "@Fond"),
				(else_try),
					(ge, reg1, 60),
					(str_store_string, 3, "@Gracious"),
				(else_try),
					(ge, reg1, 50),
					(str_store_string, 3, "@Friendly"),
				(else_try),
					(ge, reg1, 40),
					(str_store_string, 3, "@Supportive"),
				(else_try),
					(ge, reg1, 30),
					(str_store_string, 3, "@Favorable"),
				(else_try),
					(ge, reg1, 20),
					(str_store_string, 3, "@Cooperative"),
				(else_try),
					(ge, reg1, 10),
					(str_store_string, 3, "@Accepting"),
				(else_try),
					(ge, reg1, 0),
					(str_store_string, 3, "@Indifferent"),
				(else_try),
					(ge, reg1, -10),
					(str_store_string, 3, "@Suspicious"),
				(else_try),
					(ge, reg1, -20),
					(str_store_string, 3, "@Grumbling"),
				(else_try),
					(ge, reg1, -30),
					(str_store_string, 3, "@Hostile"),
				(else_try),
					(ge, reg1, -40),
					(str_store_string, 3, "@Resentful"),
				(else_try),
					(ge, reg1, -50),
					(str_store_string, 3, "@Angry"),
				(else_try),
					(ge, reg1, -60),
					(str_store_string, 3, "@Hateful"),
				(else_try),
					(ge, reg1, -70),
					(str_store_string, 3, "@Revengeful"),
				(else_try),
					(str_store_string, 3, "@Vengeful"),
				(try_end),
				(create_text_overlay, reg10, "@{reg1}", 8),
				(overlay_set_size, reg10, ":value_6"),
				(store_add, ":value_4", ":value", 20),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, ":var_12"),
				(create_text_overlay, reg10, "@{s3}", 8),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, ":value_4"),
				(store_sub, ":value_7", ":value_2", 20),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, ":var_12"),
				(try_begin),
					(neq, ":var_13", "fac_player_supporters_faction"),
					(store_sub, ":value_8", ":var_13", "fac_player_supporters_faction"),
					(val_add, ":value_8", "mesh_pic_recruits"),
					(create_mesh_overlay, reg10, ":value_8"),
					(position_set_x, 1, 75),
					(position_set_y, 1, 75),
					(overlay_set_size, reg10, 1),
					(position_set_x, 1, 165),
					(store_sub, ":value_7", ":value_2", 37),
					(position_set_y, 1, ":value_7"),
					(overlay_set_position, reg10, 1),
				(try_end),
				(assign, ":var_21", 0),
				(assign, ":var_22", 0),
				(assign, ":var_23", 0),
				(assign, ":var_24", 0),
				(try_for_parties, ":var_25"),
					(store_faction_of_party, ":faction_of_party_var_25", ":var_25"),
					(eq, ":faction_of_party_var_25", ":var_13"),
					(try_begin),
						(party_slot_eq, ":var_25", slot_party_type, 13),
						(val_add, ":var_21", 1),
					(else_try),
						(party_slot_eq, ":var_25", slot_party_type, 11),
						(val_add, ":var_22", 1),
					(else_try),
						(this_or_next|party_slot_eq, ":var_25", slot_party_type, 3),
						(this_or_next|party_slot_eq, ":var_25", slot_party_type, 2),
						(party_slot_eq, ":var_25", slot_party_type, 4),
						(val_add, ":var_23", 1),
						(try_begin),
							(party_slot_eq, ":var_25", slot_town_lord, -1),
							(val_add, ":var_24", 1),
						(try_end),
					(try_end),
				(try_end),
				(assign, ":var_27", 0),
				(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
					(troop_slot_eq, ":troop", slot_troop_occupation, 2),
					(troop_slot_ge, ":troop", 8, 0),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(eq, ":faction_of_troop_troop", ":var_13"),
					(val_add, ":var_27", 1),
				(try_end),
				(assign, reg61, ":var_23"),
				(assign, reg58, ":var_24"),
				(create_text_overlay, reg10, "@{reg61} {reg58?({reg58} U) :}Centers", 4),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, 15),
				(store_sub, ":value_7", ":value_2", 17),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, 0),
				(assign, reg62, ":var_22"),
				(create_text_overlay, reg10, "@{reg62} Caravans", 4),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, 15),
				(val_sub, ":value_7", 17),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, 0),
				(assign, reg60, ":var_21"),
				(assign, reg59, ":var_27"),
				(create_text_overlay, reg10, "@{reg60} {reg59?({reg59} P) :}Lords", 4),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, 15),
				(val_sub, ":value_7", 17),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, 0),
				(val_add, ":value_2", 18),
			(try_end),
			(set_container_overlay, -1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_jrider_faction_report_Return_to_menu"),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 225),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_reports"),
			(try_end)
		]),

		(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_mesh_overlay, reg1, "mesh_pic_castledes"),
			(position_set_x, 1, 180),
			(position_set_y, 1, 180),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, 795),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(create_mesh_overlay, reg1, "mesh_pic_looted_village"),
			(position_set_x, 1, 170),
			(position_set_y, 1, 170),
			(overlay_set_size, reg1, 1),
			(position_set_x, 1, -15),
			(position_set_y, 1, 600),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@ Sovereignty Relations Report ", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 670),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg1, 1),
			(create_game_button_overlay, reg1, "@ Return to menu "),
			(position_set_x, 1, 500),
			(position_set_y, 1, 23),
			(overlay_set_position, reg1, 1),
			(assign, "$g_jrider_faction_report_Return_to_menu", reg1),
			(assign, ":value", 250),
			(assign, ":value_2", 620),
			(position_set_y, 1, ":value_2"),
			(try_for_range, ":faction", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(faction_slot_eq, ":faction", slot_faction_state, 0),
				(try_begin),
					(is_between, ":faction", "fac_kingdom_1", "fac_kingdoms_end"),
					(store_sub, ":value_3", ":faction", "fac_kingdom_1"),
					(val_add, ":value_3", "str_swadians"),
					(str_store_string, 1, ":value_3"),
				(else_try),
					(str_store_string, 1, "@Your sovereignty"),
				(try_end),
				(str_store_string, 11, ":value_3"),
				(create_text_overlay, reg10, 1, 65540),
				(faction_get_color, ":color_faction", ":faction"),
				(overlay_set_color, reg10, ":color_faction"),
				(position_set_x, 3, 650),
				(position_set_y, 3, 800),
				(overlay_set_size, reg10, 3),
				(position_set_x, 1, ":value"),
				(overlay_set_position, reg10, 1),
				(val_add, ":value", 90),
			(try_end),
			(assign, ":value", 215),
			(assign, ":value_2", 597),
			(assign, ":var_6", 0),
			(position_set_x, ":var_6", 720),
			(position_set_y, ":var_6", 775),
			(assign, ":var_7", 50),
			(position_set_x, ":var_7", 60),
			(position_set_y, ":var_7", 28000),
			(create_text_overlay, reg2, "@Player^Relation", 16),
			(overlay_set_size, reg2, ":var_6"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg2, 1),
			(val_add, ":value", 45),
			(try_for_range, ":number", 0, 7),
				(create_mesh_overlay, reg1, "mesh_white_plane"),
				(overlay_set_color, reg1, 0),
				(overlay_set_size, reg1, ":var_7"),
				(store_sub, ":value_4", ":value", 15),
				(store_sub, ":value_5", ":value_2", 500),
				(position_set_x, 2, ":value_4"),
				(position_set_y, 2, ":value_5"),
				(overlay_set_position, reg1, 2),
				(val_add, ":value", 90),
				(try_begin),
					(eq, "$cheat_mode", 1),
					(assign, reg20, ":number"),
					(display_message, "@{!}DEBUG - Drawing line {reg20}"),
				(try_end),
			(try_end),
			(str_clear, 9),
			(str_clear, 8),
			(str_clear, 3),
			(str_clear, 60),
			(str_clear, 61),
			(str_clear, 0),
			(create_text_overlay, reg1, 0, 131072),
			(position_set_x, 1, 50),
			(position_set_y, 1, 70),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 860),
			(position_set_y, 1, 527),
			(overlay_set_area_size, reg1, 1),
			(set_container_overlay, reg1),
			(assign, ":value_6", 0),
			(assign, ":value_2", 0),
			(assign, ":var_12", 0),
			(try_for_range_backwards, ":var_13", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(faction_slot_eq, ":var_13", slot_faction_state, 0),
				(assign, ":var_14", 220),
				(try_for_range, ":faction_2", "fac_player_supporters_faction", "fac_kingdoms_end"),
					(faction_slot_eq, ":faction_2", slot_faction_state, 0),
					(try_begin),
						(neq, ":faction_2", ":var_13"),
						(str_store_faction_name, 8, ":faction_2"),
						(try_begin),
							(neq, ":faction_2", ":var_13"),
							(call_script, "script_diplomacy_faction_get_diplomatic_status_with_faction", ":var_13", ":faction_2"),
							(assign, ":var_16", reg0),
							(assign, ":var_17", reg1),
							(try_begin),
								(eq, ":var_16", -2),
								(str_store_string, 60, "@War"),
								(assign, reg60, 14483456),
								(assign, reg59, 0),
							(else_try),
								(eq, ":var_16", -1),
								(str_store_string, 60, "@Casus Belli"),
								(assign, reg60, 14516224),
								(assign, reg59, ":var_17"),
							(else_try),
								(eq, ":var_16", 0),
								(str_store_string, 60, "@Peace"),
								(assign, reg60, 16777215),
								(assign, reg59, 0),
							(else_try),
								(eq, ":var_16", 1),
								(str_store_string, 60, "@Truce"),
								(assign, reg60, 14540253),
								(assign, reg59, ":var_17"),
								(try_begin),
									(ge, ":var_17", 61),
									(str_store_string, 60, "@Alliance"),
									(assign, reg60, 65280),
									(store_sub, reg59, ":var_17", 60),
								(else_try),
									(ge, ":var_17", 41),
									(str_store_string, 60, "@Defense"),
									(assign, reg60, 65450),
									(store_sub, reg59, ":var_17", 40),
								(else_try),
									(ge, ":var_17", 21),
									(str_store_string, 60, "@Trade"),
									(assign, reg60, 65484),
									(store_sub, reg59, ":var_17", 20),
								(try_end),
							(try_end),
							(val_add, ":value", 50),
							(create_text_overlay, reg10, 60, 65540),
							(overlay_set_size, reg10, ":value_6"),
							(overlay_set_color, reg10, reg60),
							(store_sub, ":value_4", ":var_14", 20),
							(store_add, ":value_7", ":value_2", 54),
							(position_set_x, 3, ":value_4"),
							(position_set_y, 3, ":value_7"),
							(overlay_set_position, reg10, 3),
							(create_text_overlay, reg10, "@{reg59?{reg59} days:}", 16),
							(overlay_set_size, reg10, ":value_6"),
							(store_add, ":value_7", ":value_2", 36),
							(store_add, ":value_4", ":var_14", 10),
							(position_set_x, 3, ":value_4"),
							(position_set_y, 3, ":value_7"),
							(overlay_set_position, reg10, 3),
							(store_relation, ":relation_var_13_faction_2", ":var_13", ":faction_2"),
							(assign, reg61, ":relation_var_13_faction_2"),
							(create_text_overlay, reg10, "@{reg61}", 16),
							(overlay_set_size, reg10, ":value_6"),
							(store_add, ":value_7", ":value_2", 18),
							(store_add, ":value_4", ":var_14", 10),
							(position_set_x, 3, ":value_4"),
							(position_set_y, 3, ":value_7"),
							(overlay_set_position, reg10, 3),
						(try_end),
					(try_end),
					(val_add, ":var_14", 90),
				(try_end),
				(assign, ":value", 165),
				(val_add, ":value_2", 54),
				(create_mesh_overlay, reg1, "mesh_white_plane"),
				(overlay_set_color, reg1, 0),
				(position_set_x, 1, 42000),
				(position_set_y, 1, 60),
				(overlay_set_size, reg1, 1),
				(position_set_x, 1, 17),
				(store_add, ":value_7", ":value_2", 20),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg1, 1),
				(str_store_faction_name, 9, ":var_13"),
				(str_store_string, 1, "@{s9}"),
				(create_text_overlay, reg10, 1, 65540),
				(faction_get_color, ":color_faction", ":var_13"),
				(overlay_set_color, reg10, ":color_faction"),
				(position_set_x, 3, 750),
				(position_set_y, 3, 850),
				(overlay_set_size, reg10, 3),
				(position_set_x, 3, 10),
				(position_set_y, 3, ":value_2"),
				(overlay_set_position, reg10, 3),
				(assign, ":value", 165),
				(assign, ":value_6", 0),
				(position_set_x, ":value_6", 700),
				(position_set_y, ":value_6", 800),
				(store_relation, reg1, "fac_player_supporters_faction", ":var_13"),
				(try_begin),
					(ge, reg1, 90),
					(str_store_string, 3, "@Loyal"),
				(else_try),
					(ge, reg1, 80),
					(str_store_string, 3, "@Devoted"),
				(else_try),
					(ge, reg1, 70),
					(str_store_string, 3, "@Fond"),
				(else_try),
					(ge, reg1, 60),
					(str_store_string, 3, "@Gracious"),
				(else_try),
					(ge, reg1, 50),
					(str_store_string, 3, "@Friendly"),
				(else_try),
					(ge, reg1, 40),
					(str_store_string, 3, "@Supportive"),
				(else_try),
					(ge, reg1, 30),
					(str_store_string, 3, "@Favorable"),
				(else_try),
					(ge, reg1, 20),
					(str_store_string, 3, "@Cooperative"),
				(else_try),
					(ge, reg1, 10),
					(str_store_string, 3, "@Accepting"),
				(else_try),
					(ge, reg1, 0),
					(str_store_string, 3, "@Indifferent"),
				(else_try),
					(ge, reg1, -10),
					(str_store_string, 3, "@Suspicious"),
				(else_try),
					(ge, reg1, -20),
					(str_store_string, 3, "@Grumbling"),
				(else_try),
					(ge, reg1, -30),
					(str_store_string, 3, "@Hostile"),
				(else_try),
					(ge, reg1, -40),
					(str_store_string, 3, "@Resentful"),
				(else_try),
					(ge, reg1, -50),
					(str_store_string, 3, "@Angry"),
				(else_try),
					(ge, reg1, -60),
					(str_store_string, 3, "@Hateful"),
				(else_try),
					(ge, reg1, -70),
					(str_store_string, 3, "@Revengeful"),
				(else_try),
					(str_store_string, 3, "@Vengeful"),
				(try_end),
				(create_text_overlay, reg10, "@{reg1}", 8),
				(overlay_set_size, reg10, ":value_6"),
				(store_add, ":value_4", ":value", 20),
				(position_set_x, 1, ":value_4"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, ":var_12"),
				(create_text_overlay, reg10, "@{s3}", 8),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, ":value_4"),
				(store_sub, ":value_7", ":value_2", 20),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, ":var_12"),
				(try_begin),
					(neq, ":var_13", "fac_player_supporters_faction"),
					(store_sub, ":value_8", ":var_13", "fac_player_supporters_faction"),
					(val_add, ":value_8", "mesh_pic_recruits"),
					(create_mesh_overlay, reg10, ":value_8"),
					(position_set_x, 1, 75),
					(position_set_y, 1, 75),
					(overlay_set_size, reg10, 1),
					(position_set_x, 1, 165),
					(store_sub, ":value_7", ":value_2", 37),
					(position_set_y, 1, ":value_7"),
					(overlay_set_position, reg10, 1),
				(try_end),
				(assign, ":var_21", 0),
				(assign, ":var_22", 0),
				(assign, ":var_23", 0),
				(assign, ":var_24", 0),
				(try_for_parties, ":var_25"),
					(store_faction_of_party, ":faction_of_party_var_25", ":var_25"),
					(eq, ":faction_of_party_var_25", ":var_13"),
					(try_begin),
						(party_slot_eq, ":var_25", slot_party_type, 13),
						(val_add, ":var_21", 1),
					(else_try),
						(party_slot_eq, ":var_25", slot_party_type, 11),
						(val_add, ":var_22", 1),
					(else_try),
						(this_or_next|party_slot_eq, ":var_25", slot_party_type, 3),
						(this_or_next|party_slot_eq, ":var_25", slot_party_type, 2),
						(party_slot_eq, ":var_25", slot_party_type, 4),
						(val_add, ":var_23", 1),
						(try_begin),
							(party_slot_eq, ":var_25", slot_town_lord, -1),
							(val_add, ":var_24", 1),
						(try_end),
					(try_end),
				(try_end),
				(assign, ":var_27", 0),
				(try_for_range, ":troop", "trp_npc1", "trp_knight_1_1_wife"),
					(troop_slot_eq, ":troop", slot_troop_occupation, 2),
					(troop_slot_ge, ":troop", 8, 0),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(eq, ":faction_of_troop_troop", ":var_13"),
					(val_add, ":var_27", 1),
				(try_end),
				(assign, reg61, ":var_23"),
				(assign, reg58, ":var_24"),
				(create_text_overlay, reg10, "@{reg61} {reg58?({reg58} U) :}Centers", 4),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, 15),
				(store_sub, ":value_7", ":value_2", 17),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, 0),
				(assign, reg62, ":var_22"),
				(create_text_overlay, reg10, "@{reg62} Caravans", 4),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, 15),
				(val_sub, ":value_7", 17),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, 0),
				(assign, reg60, ":var_21"),
				(assign, reg59, ":var_27"),
				(create_text_overlay, reg10, "@{reg60} {reg59?({reg59} P) :}Lords", 4),
				(overlay_set_size, reg10, ":value_6"),
				(position_set_x, 1, 15),
				(val_sub, ":value_7", 17),
				(position_set_y, 1, ":value_7"),
				(overlay_set_position, reg10, 1),
				(overlay_set_color, reg10, 0),
				(val_add, ":value_2", 18),
			(try_end),
			(set_container_overlay, -1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_jrider_faction_report_Return_to_menu"),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 225),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_reports"),
			(try_end)
		])
	]),

	("jrider_character_relation_report", 0, mesh_message_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(str_clear, 0),
			(str_clear, 1),
			(try_begin),
				(eq, "$g_character_presentation_type", 0),
				(str_store_string, 0, "@ Courtships in progress "),
				(assign, ":value", 160),
				(assign, ":value_2", 480),
				(assign, ":value_3", 0),
				(assign, "$g_base_character_presentation_storage_index", 1000),
				(call_script, "script_generate_knonwn_poems_string"),
				(create_text_overlay, reg1, 1, 4),
				(position_set_x, 1, 590),
				(position_set_y, 1, 55),
				(overlay_set_position, reg1, 1),
				(position_set_x, 1, 750),
				(position_set_y, 1, 850),
				(overlay_set_size, reg1, 1),
				(overlay_set_color, reg1, 16737996),
			(else_try),
				(eq, "$g_character_presentation_type", 1),
				(str_store_string, 0, "@ Known Lords by Relation "),
				(assign, ":value", 110),
				(assign, ":value_2", 550),
				(assign, ":value_3", 0),
				(assign, "$g_base_character_presentation_storage_index", 2000),
			(else_try),
				(eq, "$g_character_presentation_type", 2),
				(str_store_string, 0, "@ Character & Companions "),
				(assign, ":value", 110),
				(assign, ":value_2", 550),
				(assign, ":value_3", 0),
				(assign, "$g_base_character_presentation_storage_index", 3000),
				(assign, ":var_4", 0),
				(position_set_x, ":var_4", 400),
				(position_set_y, ":var_4", 400),
				(create_mesh_overlay, reg1, "mesh_mp_inventory_left"),
				(position_set_x, 1, 67),
				(position_set_y, 1, 300),
				(overlay_set_position, reg1, 1),
				(overlay_set_size, reg1, ":var_4"),
				(create_mesh_overlay, reg1, "mesh_mp_inventory_right"),
				(position_set_x, 1, 450),
				(position_set_y, 1, 330),
				(overlay_set_position, reg1, 1),
				(overlay_set_size, reg1, ":var_4"),
			(try_end),
			(create_mesh_overlay, reg1, "mesh_face_gen_window"),
			(position_set_x, 1, 0),
			(position_set_y, 1, 0),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, reg1, 1),
			(create_text_overlay, reg1, 0, 16),
			(overlay_set_color, reg1, 14540253),
			(position_set_x, 1, 740),
			(position_set_y, 1, 680),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 1200),
			(position_set_y, 1, 1200),
			(overlay_set_size, reg1, 1),
			(create_game_button_overlay, "$g_jrider_character_report_Return_to_menu", "@ Done "),
			(position_set_x, 1, 290),
			(position_set_y, 1, 10),
			(overlay_set_position, "$g_jrider_character_report_Return_to_menu", 1),
			(create_text_overlay, "$g_jrider_character_information_text", "str_space", 4),
			(overlay_set_color, "$g_jrider_character_information_text", 16777215),
			(position_set_x, 1, 55),
			(position_set_y, 1, 60),
			(overlay_set_position, "$g_jrider_character_information_text", 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_jrider_character_information_text", 1),
			(create_text_overlay, "$g_jrider_character_relation_listbox", "str_empty_string", 131072),
			(position_set_x, 1, 590),
			(position_set_y, 1, ":value"),
			(overlay_set_position, "$g_jrider_character_relation_listbox", 1),
			(position_set_x, 1, 335),
			(position_set_y, 1, ":value_2"),
			(overlay_set_area_size, "$g_jrider_character_relation_listbox", 1),
			(create_combo_button_overlay, "$g_jrider_character_faction_filter", "str_empty_string", 0),
			(position_set_x, 1, 507),
			(position_set_y, 1, 709),
			(overlay_set_position, "$g_jrider_character_faction_filter", 1),
			(position_set_x, 1, 550),
			(position_set_y, 1, 650),
			(overlay_set_size, "$g_jrider_character_faction_filter", 1),
			(overlay_add_item, "$g_jrider_character_faction_filter", "@Your supporters"),
			(overlay_add_item, "$g_jrider_character_faction_filter", "@Swadians"),
			(overlay_add_item, "$g_jrider_character_faction_filter", "@Vaegirs"),
			(overlay_add_item, "$g_jrider_character_faction_filter", "@Khergits"),
			(overlay_add_item, "$g_jrider_character_faction_filter", "@Nords"),
			(overlay_add_item, "$g_jrider_character_faction_filter", "@Rhodoks"),
			(overlay_add_item, "$g_jrider_character_faction_filter", "@Sarranids"),
			(overlay_add_item, "$g_jrider_character_faction_filter", "@All Sovereignties"),
			(try_begin),
				(this_or_next|eq, "$g_jrider_pres_called_from_menu", 1),
				(eq, "$g_jrider_faction_filter", -1),
				(assign, "$g_jrider_faction_filter", -1),
				(overlay_set_val, "$g_jrider_character_faction_filter", 7),
			(else_try),
				(overlay_set_val, "$g_jrider_character_faction_filter", "$g_jrider_faction_filter"),
			(try_end),
			(assign, "$num_charinfo_candidates", 0),
			(call_script, "script_fill_relation_canditate_list_for_presentation", "$g_character_presentation_type", ":value_3"),
			(assign, "$g_jrider_reset_selected_on_faction", 0),
			(gt, "$num_charinfo_candidates", 0),
			(store_add, ":value_4", "$g_base_character_presentation_storage_index", "$g_latest_character_relation_entry"),
			(troop_get_slot, "$character_info_id", "trp_temp_array_c", ":value_4"),
			(call_script, "script_generate_extended_troop_relation_information_string", "$character_info_id"),
			(overlay_set_text, "$g_jrider_character_information_text", 1),
			(overlay_set_color, "$g_jrider_last_checked_indicator", 4284901119),
			(overlay_set_alpha, "$g_jrider_last_checked_indicator", 68),
			(create_image_button_overlay_with_tableau_material, "$g_jrider_character_portrait", -1, "tableau_troop_note_mesh", "$character_info_id"),
			(position_set_x, 2, 100),
			(position_set_y, 2, 280),
			(overlay_set_position, "$g_jrider_character_portrait", 2),
			(position_set_x, 2, 1100),
			(position_set_y, 2, 1100),
			(overlay_set_size, "$g_jrider_character_portrait", 2),
			(try_begin),
				(store_faction_of_troop, ":faction_of_troop_character_info_id", "$character_info_id"),
				(neq, ":faction_of_troop_character_info_id", "fac_player_supporters_faction"),
				(is_between, ":faction_of_troop_character_info_id", "fac_player_supporters_faction", "fac_kingdoms_end"),
				(store_sub, ":value_5", ":faction_of_troop_character_info_id", "fac_player_supporters_faction"),
				(val_add, ":value_5", "mesh_pic_recruits"),
				(create_mesh_overlay, "$g_jrider_faction_coat_of_arms", ":value_5"),
				(position_set_x, 3, 150),
				(position_set_y, 3, 600),
				(overlay_set_position, "$g_jrider_faction_coat_of_arms", 3),
				(position_set_x, 3, 250),
				(position_set_y, 3, 250),
				(overlay_set_size, "$g_jrider_faction_coat_of_arms", 3),
			(try_end),
			(try_begin),
				(eq, "$g_character_presentation_type", 2),
				(assign, ":value_6", 452),
				(assign, ":value_7", 536),
				(try_for_range, ":number", 0, 9),
					(troop_get_inventory_slot, reg1, "$character_info_id", ":number"),
					(try_begin),
						(eq, ":number", 4),
						(assign, ":value_6", 68),
						(assign, ":value_7", 557),
					(try_end),
					(try_begin),
						(lt, reg1, 1),
						(try_begin),
							(lt, ":number", 4),
							(assign, ":value_8", "mesh_mp_inventory_slot_equip"),
						(else_try),
							(eq, ":number", 4),
							(assign, ":value_8", "mesh_mp_inventory_slot_helmet"),
						(else_try),
							(eq, ":number", 5),
							(assign, ":value_8", "mesh_mp_inventory_slot_armor"),
						(else_try),
							(eq, ":number", 6),
							(assign, ":value_8", "mesh_mp_inventory_slot_boot"),
						(else_try),
							(eq, ":number", 7),
							(assign, ":value_8", "mesh_mp_inventory_slot_glove"),
						(else_try),
							(eq, ":number", 8),
							(assign, ":value_8", "mesh_mp_inventory_slot_horse"),
						(try_end),
						(create_mesh_overlay, reg11, ":value_8"),
						(overlay_set_size, reg11, ":var_4"),
						(position_set_x, 1, ":value_6"),
						(position_set_y, 1, ":value_7"),
						(overlay_set_position, reg11, 1),
						(troop_set_slot, "trp_temp_array_a", ":number", -1),
						(store_add, ":value_9", ":number", 10),
						(troop_set_slot, "trp_temp_array_a", ":value_9", -1),
					(else_try),
						(create_mesh_overlay_with_item_id, reg10, reg1),
						(position_set_x, 1, 450),
						(position_set_y, 1, 450),
						(overlay_set_size, reg10, 1),
						(store_add, ":value_10", ":value_6", 25),
						(store_add, ":value_11", ":value_7", 25),
						(position_set_x, 1, ":value_10"),
						(position_set_y, 1, ":value_11"),
						(overlay_set_position, reg10, 1),
						(troop_set_slot, "trp_temp_array_a", ":number", reg10),
						(store_add, ":value_9", ":number", 10),
						(troop_set_slot, "trp_temp_array_a", ":value_9", reg1),
					(try_end),
					(val_sub, ":value_7", 51),
				(try_end),
			(try_end),
			(try_begin),
				(eq, "$g_jrider_pres_called_from_menu", 1),
				(assign, "$g_jrider_pres_called_from_menu", 0),
			(try_end)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, "$g_character_presentation_type", 2),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(try_for_range, ":number", 0, 9),
						(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
						(store_add, ":value", ":number", 10),
						(troop_get_slot, ":temp_array_a_value", "trp_temp_array_a", ":value"),
						(set_fixed_point_multiplier, 1000),
						(position_set_x, 0, 740),
						(position_set_y, 0, 235),
						(show_item_details, ":temp_array_a_value", 0, 100),
					(try_end),
				(else_try),
					(try_for_range, ":number", 0, 9),
						(troop_slot_eq, "trp_temp_array_a", ":number", ":trigger_param_1"),
						(close_item_details),
					(try_end),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_jrider_character_report_Return_to_menu"),
				(try_begin),
					(neq, "$num_charinfo_candidates", 0),
					(overlay_set_text, "$g_jrider_character_information_text", "str_empty_string"),
					(overlay_set_alpha, "$g_jrider_last_checked_indicator", 0),
				(try_end),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_jrider_character_faction_filter"),
				(try_begin),
					(eq, ":trigger_param_2", 7),
					(assign, "$g_jrider_faction_filter", -1),
				(else_try),
					(assign, "$g_jrider_faction_filter", ":trigger_param_2"),
				(try_end),
				(assign, "$g_jrider_reset_selected_on_faction", 1000),
				(start_presentation, "prsnt_jrider_character_relation_report"),
			(else_try),
				(neq, ":trigger_param_1", "$g_jrider_character_information_text"),
				(neq, ":trigger_param_1", "$g_jrider_character_portrait"),
				(neq, ":trigger_param_1", "$g_jrider_character_relation_listbox"),
				(store_add, ":value", ":trigger_param_1", "$g_base_character_presentation_storage_index"),
				(troop_get_slot, ":temp_array_b_value", "trp_temp_array_b", ":value"),
				(overlay_set_alpha, "$g_jrider_last_checked_indicator", 0),
				(overlay_set_color, "$g_jrider_last_checked_indicator", 14540253),
				(assign, "$g_latest_character_relation_entry", ":temp_array_b_value"),
				(assign, "$g_jrider_last_checked_indicator", ":trigger_param_1"),
				(overlay_set_color, "$g_jrider_last_checked_indicator", 4284901119),
				(overlay_set_alpha, "$g_jrider_last_checked_indicator", 68),
				(val_add, ":temp_array_b_value", "$g_base_character_presentation_storage_index"),
				(troop_get_slot, "$character_info_id", "trp_temp_array_c", ":temp_array_b_value"),
				(start_presentation, "prsnt_jrider_character_relation_report"),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 225),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_reports"),
			(try_end)
		])
	]),

	("jq_companions_quickview", 0, mesh_companion_overview, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(assign, "$jq_just_visited_CO", 0),
			(create_game_button_overlay, "$g_jq_Return_to_menu", "@ Return to menu "),
			(position_set_x, 1, 500),
			(position_set_y, 1, 23),
			(overlay_set_position, "$g_jq_Return_to_menu", 1),
			(create_game_button_overlay, "$g_jq_Back_to_shop", "@ Back to shop "),
			(position_set_x, 1, 100),
			(position_set_y, 1, -180),
			(overlay_set_position, "$g_jq_Back_to_shop", 1),
			(try_begin),
				(eq, "$jq_current_town", "$current_town"),
				(eq, "$jq_in_market_menu", 1),
				(position_set_x, 1, 100),
				(position_set_y, 1, 23),
				(overlay_set_position, "$g_jq_Back_to_shop", 1),
			(try_end),
			(assign, ":value", 165),
			(assign, ":value_2", 581),
			(assign, ":value_3", 0),
			(position_set_x, ":value_3", 720),
			(position_set_y, ":value_3", 775),
			(create_text_overlay, reg2, "@Strength", 16),
			(overlay_set_size, reg2, ":value_3"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg2, 1),
			(create_text_overlay, reg2, "@Riding", 16),
			(overlay_set_size, reg2, ":value_3"),
			(val_add, ":value", 55),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg2, 1),
			(create_text_overlay, reg2, "@Pdraw", 16),
			(overlay_set_size, reg2, ":value_3"),
			(val_add, ":value", 55),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg2, 1),
			(create_text_overlay, reg2, "@Pthrow", 16),
			(overlay_set_size, reg2, ":value_3"),
			(val_add, ":value", 55),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg2, 1),
			(create_text_overlay, reg2, "@1-hand", 16),
			(overlay_set_size, reg2, ":value_3"),
			(val_add, ":value", 55),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg2, 1),
			(create_text_overlay, reg2, "@2-hand", 16),
			(overlay_set_size, reg2, ":value_3"),
			(val_add, ":value", 55),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg2, 1),
			(create_text_overlay, reg2, "@Polearm", 16),
			(overlay_set_size, reg2, ":value_3"),
			(val_add, ":value", 55),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg2, 1),
			(create_text_overlay, reg2, "@Archery", 16),
			(overlay_set_size, reg2, ":value_3"),
			(val_add, ":value", 55),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg2, 1),
			(create_text_overlay, reg2, "@ X-bow ", 16),
			(overlay_set_size, reg2, ":value_3"),
			(val_add, ":value", 55),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg2, 1),
			(create_text_overlay, reg2, "@Throwing ", 16),
			(overlay_set_size, reg2, ":value_3"),
			(val_add, ":value", 55),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg2, 1),
			(create_text_overlay, reg2, "@  Firearms", 16),
			(position_set_x, ":value_3", 640),
			(overlay_set_size, reg2, ":value_3"),
			(val_add, ":value", 55),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg2, 1),
			(create_text_overlay, reg2, "@ Mode", 16),
			(position_set_x, ":value_3", 700),
			(overlay_set_size, reg2, ":value_3"),
			(val_add, ":value", 55),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg2, 1),
			(create_text_overlay, reg2, "@(to next lvl)", 16),
			(position_set_x, ":value_3", 640),
			(position_set_y, ":value_3", 750),
			(overlay_set_size, reg2, ":value_3"),
			(val_add, ":value", 60),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg2, 1),
			(assign, ":var_4", 100),
			(assign, "$jq_nr", 0),
			(assign, ":value_3", 0),
			(assign, ":value_4", 25),
			(assign, ":value_2", 547),
			(str_clear, 9),
			(assign, ":value_5", 0),
			(str_clear, 8),
			(create_text_overlay, "$g_jq_version", "@ 1.3 ", 4),
			(position_set_x, 1, 963),
			(position_set_y, 1, 735),
			(overlay_set_position, "$g_jq_version", 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 700),
			(overlay_set_size, "$g_jq_version", 1),
			(overlay_set_color, "$g_jq_version", 4294967295),
			(create_text_overlay, "$g_jq_equipment_status", "@If you can see this, buy a new cpu.", 16),
			(create_text_overlay, "$g_jq_equip_hline1", "@ -Weapons-", 4),
			(create_text_overlay, "$g_jq_equip_hline2", "@ -Armor-", 4),
			(create_text_overlay, "$g_jq_equipment_item0", "@                n/a                ", 16),
			(create_text_overlay, "$g_jq_equipment_item1", "@                n/a                ", 16),
			(create_text_overlay, "$g_jq_equipment_item2", "@                n/a                ", 16),
			(create_text_overlay, "$g_jq_equipment_item3", "@                n/a                ", 16),
			(create_text_overlay, "$g_jq_equipment_item4", "@                n/a                ", 16),
			(create_text_overlay, "$g_jq_equipment_item5", "@                n/a                ", 16),
			(create_text_overlay, "$g_jq_equipment_item6", "@                n/a                ", 16),
			(create_text_overlay, "$g_jq_equipment_item7", "@                n/a                ", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 630),
			(overlay_set_position, "$g_jq_equipment_status", 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 850),
			(overlay_set_size, "$g_jq_equipment_status", 1),
			(position_set_x, 1, 210),
			(position_set_y, 1, 700),
			(overlay_set_position, "$g_jq_equip_hline1", 1),
			(overlay_set_color, "$g_jq_equip_hline1", 4289374975),
			(position_set_x, 1, 700),
			(overlay_set_position, "$g_jq_equip_hline2", 1),
			(overlay_set_color, "$g_jq_equip_hline2", 4289374975),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_jq_equip_hline1", 1),
			(overlay_set_size, "$g_jq_equip_hline2", 1),
			(position_set_x, 1, 255),
			(position_set_y, 1, 681),
			(overlay_set_position, "$g_jq_equipment_item0", 1),
			(position_set_y, 1, 664),
			(overlay_set_position, "$g_jq_equipment_item1", 1),
			(position_set_y, 1, 647),
			(overlay_set_position, "$g_jq_equipment_item2", 1),
			(position_set_y, 1, 630),
			(overlay_set_position, "$g_jq_equipment_item3", 1),
			(position_set_x, 1, 740),
			(position_set_y, 1, 681),
			(overlay_set_position, "$g_jq_equipment_item4", 1),
			(position_set_y, 1, 664),
			(overlay_set_position, "$g_jq_equipment_item5", 1),
			(position_set_y, 1, 647),
			(overlay_set_position, "$g_jq_equipment_item6", 1),
			(position_set_y, 1, 630),
			(overlay_set_position, "$g_jq_equipment_item7", 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_jq_equipment_status", 1),
			(overlay_set_size, "$g_jq_equipment_item0", 1),
			(overlay_set_color, "$g_jq_equipment_item0", 4294967295),
			(overlay_set_size, "$g_jq_equipment_item1", 1),
			(overlay_set_color, "$g_jq_equipment_item1", 4294967295),
			(overlay_set_size, "$g_jq_equipment_item2", 1),
			(overlay_set_color, "$g_jq_equipment_item2", 4294967295),
			(overlay_set_size, "$g_jq_equipment_item3", 1),
			(overlay_set_color, "$g_jq_equipment_item3", 4294967295),
			(overlay_set_size, "$g_jq_equipment_item4", 1),
			(overlay_set_color, "$g_jq_equipment_item4", 4294967295),
			(overlay_set_size, "$g_jq_equipment_item5", 1),
			(overlay_set_color, "$g_jq_equipment_item5", 4294967295),
			(overlay_set_size, "$g_jq_equipment_item6", 1),
			(overlay_set_color, "$g_jq_equipment_item6", 4294967295),
			(overlay_set_size, "$g_jq_equipment_item7", 1),
			(overlay_set_color, "$g_jq_equipment_item7", 4294967295),
			(try_for_range, "$jq_dude", "trp_npc1", "trp_kingdom_1_lord"),
				(main_party_has_troop, "$jq_dude"),
				(troop_set_slot, "trp_temp_array_c", "$jq_nr", "$jq_dude"),
				(val_add, "$jq_nr", 1),
				(call_script, "script_npc_morale", "$jq_dude"),
				(assign, ":var_7", reg0),
				(assign, reg1, ":var_7"),
				(troop_set_slot, "trp_temp_array_c", ":var_4", reg1),
				(val_add, ":var_4", 1),
				(str_store_troop_name, 9, "$jq_dude"),
				(str_store_string, 1, "@{s9}"),
				(create_text_overlay, reg1, 1, 4),
				(position_set_x, 3, ":value_4"),
				(position_set_y, 3, ":value_2"),
				(overlay_set_position, reg1, 3),
				(position_set_x, 3, 750),
				(position_set_y, 3, 850),
				(overlay_set_size, reg1, 3),
				(create_text_overlay, reg2, 1, 4),
				(position_set_x, 3, 880),
				(position_set_y, 3, ":value_2"),
				(overlay_set_position, reg2, 3),
				(position_set_x, 3, 750),
				(position_set_y, 3, 850),
				(overlay_set_size, reg2, 3),
				(assign, ":value", 165),
				(assign, ":value_3", 0),
				(position_set_x, ":value_3", 750),
				(position_set_y, ":value_3", 850),
				(store_attribute_level, reg1, "$jq_dude", 0),
				(create_text_overlay, ":value_6", "@{reg1}", 16),
				(overlay_set_size, ":value_6", ":value_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_6", 1),
				(overlay_set_color, ":value_6", ":value_5"),
				(store_skill_level, reg1, "skl_riding", "$jq_dude"),
				(val_add, ":value", 55),
				(create_text_overlay, ":value_6", "@{reg1}", 16),
				(overlay_set_size, ":value_6", ":value_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_6", 1),
				(overlay_set_color, ":value_6", ":value_5"),
				(store_skill_level, reg1, "skl_power_draw", "$jq_dude"),
				(val_add, ":value", 55),
				(create_text_overlay, ":value_6", "@{reg1}", 16),
				(overlay_set_size, ":value_6", ":value_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_6", 1),
				(overlay_set_color, ":value_6", ":value_5"),
				(store_skill_level, reg1, "skl_power_throw", "$jq_dude"),
				(val_add, ":value", 55),
				(create_text_overlay, ":value_6", "@{reg1}", 16),
				(overlay_set_size, ":value_6", ":value_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_6", 1),
				(overlay_set_color, ":value_6", ":value_5"),
				(store_proficiency_level, reg1, "$jq_dude", 0),
				(val_add, ":value", 55),
				(create_text_overlay, ":value_6", "@{reg1}", 16),
				(overlay_set_size, ":value_6", ":value_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_6", 1),
				(overlay_set_color, ":value_6", ":value_5"),
				(store_proficiency_level, reg1, "$jq_dude", 1),
				(val_add, ":value", 55),
				(create_text_overlay, ":value_6", "@{reg1}", 16),
				(overlay_set_size, ":value_6", ":value_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_6", 1),
				(overlay_set_color, ":value_6", ":value_5"),
				(store_proficiency_level, reg1, "$jq_dude", 2),
				(val_add, ":value", 55),
				(create_text_overlay, ":value_6", "@{reg1}", 16),
				(overlay_set_size, ":value_6", ":value_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_6", 1),
				(overlay_set_color, ":value_6", ":value_5"),
				(store_proficiency_level, reg1, "$jq_dude", 3),
				(val_add, ":value", 55),
				(create_text_overlay, ":value_6", "@{reg1}", 16),
				(overlay_set_size, ":value_6", ":value_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_6", 1),
				(overlay_set_color, ":value_6", ":value_5"),
				(store_proficiency_level, reg1, "$jq_dude", 4),
				(val_add, ":value", 55),
				(create_text_overlay, ":value_6", "@{reg1}", 16),
				(overlay_set_size, ":value_6", ":value_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_6", 1),
				(overlay_set_color, ":value_6", ":value_5"),
				(store_proficiency_level, reg1, "$jq_dude", 5),
				(val_add, ":value", 55),
				(create_text_overlay, ":value_6", "@{reg1}", 16),
				(overlay_set_size, ":value_6", ":value_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_6", 1),
				(overlay_set_color, ":value_6", ":value_5"),
				(store_proficiency_level, reg1, "$jq_dude", 6),
				(val_add, ":value", 55),
				(create_text_overlay, ":value_6", "@{reg1}", 16),
				(overlay_set_size, ":value_6", ":value_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_6", 1),
				(overlay_set_color, ":value_6", ":value_5"),
				(try_begin),
					(troop_is_mounted, "$jq_dude"),
					(str_store_string, 1, "@Rides"),
					(assign, ":value_5", 255),
				(else_try),
					(str_store_string, 1, "@Walks"),
				(try_end),
				(val_add, ":value", 41),
				(create_text_overlay, ":value_6", 1, 4),
				(overlay_set_size, ":value_6", ":value_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_6", 1),
				(overlay_set_color, ":value_6", ":value_5"),
				(assign, ":value_5", 0),
				(troop_get_xp, ":value_6", "$jq_dude"),
				(call_script, "script_jq_xp_to_next_lvl", ":value_6"),
				(val_add, ":value", 64),
				(create_text_overlay, ":value_6", 1, 4),
				(overlay_set_size, ":value_6", ":value_3"),
				(position_set_x, 1, ":value"),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, ":value_6", 1),
				(assign, ":value_4", 25),
				(assign, ":value", 165),
				(val_sub, ":value_2", 23),
				(ge, ":value_4", 950),
				(assign, ":value_4", 25),
				(val_sub, ":value_2", 23),
			(try_end),
			(position_set_x, ":value_3", 49350),
			(position_set_y, ":value_3", 1000),
			(position_set_x, 1, 0),
			(position_set_y, 1, -200),
			(create_image_button_overlay, "$g_jq_selector_1", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_1", 1),
			(create_image_button_overlay, "$g_jq_selector_2", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_2", 1),
			(create_image_button_overlay, "$g_jq_selector_3", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_3", 1),
			(create_image_button_overlay, "$g_jq_selector_4", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_4", 1),
			(create_image_button_overlay, "$g_jq_selector_5", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_5", 1),
			(create_image_button_overlay, "$g_jq_selector_6", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_6", 1),
			(create_image_button_overlay, "$g_jq_selector_7", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_7", 1),
			(create_image_button_overlay, "$g_jq_selector_8", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_8", 1),
			(create_image_button_overlay, "$g_jq_selector_9", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_9", 1),
			(create_image_button_overlay, "$g_jq_selector_10", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_10", 1),
			(create_image_button_overlay, "$g_jq_selector_11", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_11", 1),
			(create_image_button_overlay, "$g_jq_selector_12", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_12", 1),
			(create_image_button_overlay, "$g_jq_selector_13", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_13", 1),
			(create_image_button_overlay, "$g_jq_selector_14", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_14", 1),
			(create_image_button_overlay, "$g_jq_selector_15", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_15", 1),
			(create_image_button_overlay, "$g_jq_selector_16", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_16", 1),
			(create_image_button_overlay, "$g_jq_selector_17", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_17", 1),
			(create_image_button_overlay, "$g_jq_selector_18", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_18", 1),
			(create_image_button_overlay, "$g_jq_selector_19", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_19", 1),
			(create_image_button_overlay, "$g_jq_selector_20", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_position, "$g_jq_selector_20", 1),
			(try_begin),
				(gt, "$jq_nr", 0),
				(position_set_x, 1, 5),
				(position_set_y, 1, 547),
				(overlay_set_position, "$g_jq_selector_1", 1),
				(overlay_set_size, "$g_jq_selector_1", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_1", 0),
				(overlay_set_color, "$g_jq_selector_1", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 1),
				(position_set_y, 1, 524),
				(overlay_set_position, "$g_jq_selector_2", 1),
				(overlay_set_size, "$g_jq_selector_2", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_2", 0),
				(overlay_set_color, "$g_jq_selector_2", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 2),
				(position_set_y, 1, 501),
				(overlay_set_position, "$g_jq_selector_3", 1),
				(overlay_set_size, "$g_jq_selector_3", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_3", 0),
				(overlay_set_color, "$g_jq_selector_3", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 3),
				(position_set_y, 1, 478),
				(overlay_set_position, "$g_jq_selector_4", 1),
				(overlay_set_size, "$g_jq_selector_4", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_4", 0),
				(overlay_set_color, "$g_jq_selector_4", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 4),
				(position_set_y, 1, 455),
				(overlay_set_position, "$g_jq_selector_5", 1),
				(overlay_set_size, "$g_jq_selector_5", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_5", 0),
				(overlay_set_color, "$g_jq_selector_5", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 5),
				(position_set_y, 1, 432),
				(overlay_set_position, "$g_jq_selector_6", 1),
				(overlay_set_size, "$g_jq_selector_6", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_6", 0),
				(overlay_set_color, "$g_jq_selector_6", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 6),
				(position_set_y, 1, 409),
				(overlay_set_position, "$g_jq_selector_7", 1),
				(overlay_set_size, "$g_jq_selector_7", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_7", 0),
				(overlay_set_color, "$g_jq_selector_7", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 7),
				(position_set_y, 1, 386),
				(overlay_set_position, "$g_jq_selector_8", 1),
				(overlay_set_size, "$g_jq_selector_8", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_8", 0),
				(overlay_set_color, "$g_jq_selector_8", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 8),
				(position_set_y, 1, 363),
				(overlay_set_position, "$g_jq_selector_9", 1),
				(overlay_set_size, "$g_jq_selector_9", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_9", 0),
				(overlay_set_color, "$g_jq_selector_9", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 9),
				(position_set_y, 1, 340),
				(overlay_set_position, "$g_jq_selector_10", 1),
				(overlay_set_size, "$g_jq_selector_10", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_10", 0),
				(overlay_set_color, "$g_jq_selector_10", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 10),
				(position_set_y, 1, 317),
				(overlay_set_position, "$g_jq_selector_11", 1),
				(overlay_set_size, "$g_jq_selector_11", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_11", 0),
				(overlay_set_color, "$g_jq_selector_11", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 11),
				(position_set_y, 1, 294),
				(overlay_set_position, "$g_jq_selector_12", 1),
				(overlay_set_size, "$g_jq_selector_12", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_12", 0),
				(overlay_set_color, "$g_jq_selector_12", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 12),
				(position_set_y, 1, 271),
				(overlay_set_position, "$g_jq_selector_13", 1),
				(overlay_set_size, "$g_jq_selector_13", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_13", 0),
				(overlay_set_color, "$g_jq_selector_13", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 13),
				(position_set_y, 1, 248),
				(overlay_set_position, "$g_jq_selector_14", 1),
				(overlay_set_size, "$g_jq_selector_14", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_14", 0),
				(overlay_set_color, "$g_jq_selector_14", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 14),
				(position_set_y, 1, 225),
				(overlay_set_position, "$g_jq_selector_15", 1),
				(overlay_set_size, "$g_jq_selector_15", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_15", 0),
				(overlay_set_color, "$g_jq_selector_15", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 15),
				(position_set_y, 1, 202),
				(overlay_set_position, "$g_jq_selector_16", 1),
				(overlay_set_size, "$g_jq_selector_16", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_16", 0),
				(overlay_set_color, "$g_jq_selector_16", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 16),
				(position_set_y, 1, 179),
				(overlay_set_position, "$g_jq_selector_17", 1),
				(overlay_set_size, "$g_jq_selector_17", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_17", 0),
				(overlay_set_color, "$g_jq_selector_17", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 17),
				(position_set_y, 1, 156),
				(overlay_set_position, "$g_jq_selector_18", 1),
				(overlay_set_size, "$g_jq_selector_18", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_18", 0),
				(overlay_set_color, "$g_jq_selector_18", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 18),
				(position_set_y, 1, 133),
				(overlay_set_position, "$g_jq_selector_19", 1),
				(overlay_set_size, "$g_jq_selector_19", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_19", 0),
				(overlay_set_color, "$g_jq_selector_19", 16776960),
			(try_end),
			(try_begin),
				(gt, "$jq_nr", 19),
				(position_set_y, 1, 110),
				(overlay_set_position, "$g_jq_selector_20", 1),
				(overlay_set_size, "$g_jq_selector_20", ":value_3"),
				(overlay_set_alpha, "$g_jq_selector_20", 0),
				(overlay_set_color, "$g_jq_selector_20", 16776960),
			(try_end),
			(position_set_x, ":value_3", 49350),
			(position_set_y, ":value_3", 1000),
			(assign, ":var_9", 547),
			(create_mesh_overlay, "$g_jq_last_checked_indicator", "mesh_white_plane", "mesh_white_plane"),
			(overlay_set_size, "$g_jq_last_checked_indicator", ":value_3"),
			(overlay_set_color, "$g_jq_last_checked_indicator", 4284901119),
			(overlay_animate_to_alpha, "$g_jq_last_checked_indicator", 0, 0),
			(assign, "$jq_nr", 0),
			(try_for_range, "$jq_dude", "trp_npc1", "trp_kingdom_1_lord"),
				(main_party_has_troop, "$jq_dude"),
				(try_begin),
					(eq, "$jq_last_checked_hero", "$jq_dude"),
					(assign, ":var_10", "$jq_nr"),
					(assign, reg2, "$jq_nr"),
					(val_add, reg2, 100),
					(assign, ":value_2", ":var_9"),
				(try_end),
				(val_add, "$jq_nr", 1),
				(val_sub, ":var_9", 23),
			(try_end),
			(troop_get_slot, "$jq_dude", "trp_temp_array_c", ":var_10"),
			(call_script, "script_jq_extra_stats", "$jq_dude", reg2),
			(position_set_x, 1, 5),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, "$g_jq_last_checked_indicator", 1),
			(overlay_animate_to_alpha, "$g_jq_last_checked_indicator", 50, 68)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, "$espresso"),
			(try_begin),
				(eq, "$espresso", "$g_jq_Return_to_menu"),
				(assign, "$jq_just_visited_CO", 0),
				(assign, "$jq_override", 0),
				(presentation_set_duration, 0),
			(else_try),
				(eq, "$espresso", "$g_jq_Back_to_shop"),
				(assign, "$jq_just_visited_CO", 1),
				(assign, "$jq_override", 0),
				(presentation_set_duration, 0),
			(else_try),
				(try_begin),
					(eq, "$espresso", "$g_jq_selector_1"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_relations_begin),
					(assign, "$jq_slot", 0),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_2"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", 1),
					(assign, "$jq_slot", 1),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_3"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_occupation),
					(assign, "$jq_slot", 2),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_4"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_state),
					(assign, "$jq_slot", 3),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_5"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_last_talk_time),
					(assign, "$jq_slot", 4),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_6"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_met),
					(assign, "$jq_slot", 5),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_7"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_party_template),
					(assign, "$jq_slot", 6),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_8"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_renown),
					(assign, "$jq_slot", 7),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_9"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_prisoner_of_party),
					(assign, "$jq_slot", 8),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_10"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_present_at_event),
					(assign, "$jq_slot", 9),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_11"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_leaded_party),
					(assign, "$jq_slot", 10),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_12"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_wealth),
					(assign, "$jq_slot", 10),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_13"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_cur_center),
					(assign, "$jq_slot", 12),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_14"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_banner_scene_prop),
					(assign, "$jq_slot", 13),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_15"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_original_faction),
					(assign, "$jq_slot", 14),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_16"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", 15),
					(assign, "$jq_slot", 15),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_17"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_player_order_state),
					(assign, "$jq_slot", 16),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_18"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_player_order_object),
					(assign, "$jq_slot", 17),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_19"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_age),
					(assign, "$jq_slot", 18),
				(else_try),
					(eq, "$espresso", "$g_jq_selector_20"),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_age_appearance),
					(assign, "$jq_slot", 19),
				(try_end),
				(start_presentation, "prsnt_jq_extended_info"),
			(try_end)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, "$espresso"),
			(store_trigger_param_2, ":trigger_param_2"),
			(overlay_animate_to_alpha, "$g_jq_last_checked_indicator", 1500, 0),
			(try_begin),
				(eq, "$espresso", "$g_jq_selector_1"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_1", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_relations_begin),
					(call_script, "script_jq_extra_stats", "$jq_dude", 100),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_1", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_2"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_2", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", 1),
					(call_script, "script_jq_extra_stats", "$jq_dude", 101),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_2", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_3"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_3", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_occupation),
					(call_script, "script_jq_extra_stats", "$jq_dude", 102),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_3", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_4"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_4", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_state),
					(call_script, "script_jq_extra_stats", "$jq_dude", 103),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_4", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_5"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_5", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_last_talk_time),
					(call_script, "script_jq_extra_stats", "$jq_dude", 104),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_5", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_6"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_6", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_met),
					(call_script, "script_jq_extra_stats", "$jq_dude", 105),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_6", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_7"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_7", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_party_template),
					(call_script, "script_jq_extra_stats", "$jq_dude", 106),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_7", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_8"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_8", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_renown),
					(call_script, "script_jq_extra_stats", "$jq_dude", 107),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_8", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_9"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_9", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_prisoner_of_party),
					(call_script, "script_jq_extra_stats", "$jq_dude", 108),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_9", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_10"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_10", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_present_at_event),
					(call_script, "script_jq_extra_stats", "$jq_dude", 109),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_10", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_11"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_11", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_leaded_party),
					(call_script, "script_jq_extra_stats", "$jq_dude", 110),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_11", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_12"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_12", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_wealth),
					(call_script, "script_jq_extra_stats", "$jq_dude", 111),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_12", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_13"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_13", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_cur_center),
					(call_script, "script_jq_extra_stats", "$jq_dude", 112),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_13", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_14"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_14", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_banner_scene_prop),
					(call_script, "script_jq_extra_stats", "$jq_dude", 113),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_14", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_15"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_15", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_original_faction),
					(call_script, "script_jq_extra_stats", "$jq_dude", 114),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_15", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_16"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_16", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", 15),
					(call_script, "script_jq_extra_stats", "$jq_dude", 115),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_16", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_17"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_17", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_player_order_state),
					(call_script, "script_jq_extra_stats", "$jq_dude", 116),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_17", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_18"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_18", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_player_order_object),
					(call_script, "script_jq_extra_stats", "$jq_dude", 117),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_18", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_19"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_19", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_age),
					(call_script, "script_jq_extra_stats", "$jq_dude", 118),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_19", 10, 0),
				(try_end),
			(else_try),
				(eq, "$espresso", "$g_jq_selector_20"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_alpha, "$g_jq_selector_20", 5, 68),
					(troop_get_slot, "$jq_dude", "trp_temp_array_c", slot_troop_age_appearance),
					(call_script, "script_jq_extra_stats", "$jq_dude", 119),
				(else_try),
					(overlay_animate_to_alpha, "$g_jq_selector_20", 10, 0),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(this_or_next|key_clicked, 1),
				(key_clicked, 225),
				(eq, "$jq_in_market_menu", 0),
				(assign, "$jq_override", 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_reports"),
			(else_try),
				(this_or_next|key_clicked, 1),
				(key_clicked, 225),
				(eq, "$jq_in_market_menu", 1),
				(assign, "$jq_override", 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_town_trade"),
			(else_try),
				(key_clicked, 14),
				(eq, "$jq_in_market_menu", 1),
				(eq, "$jq_current_town", "$current_town"),
				(assign, "$jq_just_visited_CO", 1),
				(assign, "$jq_override", 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_town_trade"),
			(else_try),
				(key_clicked, 199),
				(assign, "$jq_startpage", 1),
				(play_sound, "snd_put_back_sword"),
				(display_message, "@Startpage set (Quick View)", 0xffaaffaa),
			(try_end)
		])
	]),

	("jq_extended_info", 0, mesh_companion_overview_details, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(gt, "$jq_dude", 0),
				(assign, "$jq_last_checked_hero", "$jq_dude"),
			(else_try),
				(assign, "$jq_nr", 0),
				(try_for_range, "$jq_dude", "trp_npc1", "trp_kingdom_1_lord"),
					(main_party_has_troop, "$jq_dude"),
					(troop_set_slot, "trp_temp_array_c", "$jq_nr", "$jq_dude"),
					(val_add, "$jq_nr", 1),
				(try_end),
				(assign, "$jq_last_checked_hero", "$jq_dude"),
			(try_end),
			(assign, "$jq_override", 1),
			(create_game_button_overlay, "$g_jq_Return_to_menu", "@ Return to menu "),
			(position_set_x, 1, 500),
			(position_set_y, 1, 20),
			(overlay_set_position, "$g_jq_Return_to_menu", 1),
			(create_game_button_overlay, "$g_jq_Back_to_shop", "@Back to shop"),
			(position_set_x, 1, 100),
			(position_set_y, 1, -180),
			(overlay_set_position, "$g_jq_Back_to_shop", 1),
			(try_begin),
				(eq, "$jq_current_town", "$current_town"),
				(eq, "$jq_in_market_menu", 1),
				(position_set_x, 1, 100),
				(position_set_y, 1, 20),
				(overlay_set_position, "$g_jq_Back_to_shop", 1),
			(try_end),
			(assign, "$jq_helptoggle", 0),
			(create_button_overlay, "$g_jqhelp", "@ [?] ", 4),
			(position_set_x, 1, 700),
			(position_set_y, 1, 28),
			(overlay_set_position, "$g_jqhelp", 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_jqhelp", 1),
			(overlay_set_color, "$g_jqhelp", 4294967295),
			(create_text_overlay, "$g_jqhelptxt", "@Hotkeys:^HOME = Set startpage^RMB = Exit to menu^ESCAPE = Quick View^BACKSPACE = Back to shop (if visited)", 4),
			(position_set_x, 1, 707),
			(position_set_y, 1, 80),
			(overlay_set_position, "$g_jqhelptxt", 1),
			(position_set_x, 1, 750),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_jqhelptxt", 1),
			(overlay_set_color, "$g_jqhelptxt", 4294967295),
			(overlay_set_alpha, "$g_jqhelptxt", 0),
			(create_button_overlay, "$g_quitdebug2", "@- Quit2 -", 4),
			(position_set_x, 1, 330),
			(position_set_y, 1, -50),
			(overlay_set_position, "$g_quitdebug2", 1),
			(create_game_button_overlay, "$g_presentation_obj_1", "@ Quick View "),
			(position_set_x, 1, 900),
			(position_set_y, 1, 20),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(assign, "$g_jq_prevtroop", 1),
			(create_game_button_overlay, "$g_jq_prevtroop", "@      "),
			(position_set_x, 1, 90),
			(position_set_y, 1, 710),
			(overlay_set_position, "$g_jq_prevtroop", 1),
			(position_set_x, 1, 25),
			(position_set_y, 1, 20),
			(overlay_set_size, "$g_jq_prevtroop", 1),
			(assign, "$g_jq_nexttroop", 1),
			(create_game_button_overlay, "$g_jq_nexttroop", "@      "),
			(position_set_x, 1, 350),
			(position_set_y, 1, 710),
			(overlay_set_position, "$g_jq_nexttroop", 1),
			(position_set_x, 1, 25),
			(position_set_y, 1, 20),
			(overlay_set_size, "$g_jq_nexttroop", 1),
			(create_mesh_overlay_with_tableau_material, "$jq_portrait", -1, "tableau_game_character_sheet", "$jq_dude"),
			(position_set_x, 1, 1150),
			(position_set_y, 1, 1150),
			(overlay_set_size, "$jq_portrait", 1),
			(position_set_x, 1, 10),
			(position_set_y, 1, 295),
			(position_set_z, 1, 170),
			(overlay_set_position, "$jq_portrait", 1),
			(assign, ":value", 35),
			(assign, ":var_2", 0),
			(position_set_x, ":var_2", 1250),
			(position_set_y, ":var_2", 1200),
			(str_store_troop_name, 9, "$jq_dude"),
			(str_store_string, 1, "@{s9}"),
			(create_text_overlay, "$jq_troop_name", 1, 16),
			(position_set_x, 3, 160),
			(position_set_y, 3, 705),
			(overlay_set_position, "$jq_troop_name", 3),
			(position_set_x, 3, 900),
			(position_set_y, 3, 1000),
			(overlay_set_size, "$jq_troop_name", 3),
			(create_text_overlay, reg2, "@Attributes", 4),
			(overlay_set_size, reg2, ":var_2"),
			(position_set_x, 1, 78),
			(position_set_y, 1, 243),
			(overlay_set_position, reg2, 1),
			(overlay_set_color, reg2, 4278190131),
			(create_text_overlay, reg2, "@Skills", 4),
			(overlay_set_size, reg2, ":var_2"),
			(position_set_x, 1, 388),
			(position_set_y, 1, 503),
			(overlay_set_position, reg2, 1),
			(overlay_set_color, reg2, 4278203136),
			(create_text_overlay, reg2, "@Proficiencies", 4),
			(overlay_set_size, reg2, ":var_2"),
			(position_set_x, 1, 740),
			(position_set_y, 1, 403),
			(overlay_set_position, reg2, 1),
			(overlay_set_color, reg2, 4281532416),
			(position_set_x, ":var_2", 975),
			(position_set_y, ":var_2", 975),
			(position_set_x, 1, 42),
			(create_text_overlay, reg2, "@STR:", 4),
			(position_set_y, 1, 212),
			(overlay_set_position, reg2, 1),
			(overlay_set_size, reg2, ":var_2"),
			(create_text_overlay, reg2, "@AGI:", 4),
			(position_set_y, 1, 187),
			(overlay_set_position, reg2, 1),
			(overlay_set_size, reg2, ":var_2"),
			(create_text_overlay, reg2, "@INT:", 4),
			(position_set_y, 1, 162),
			(overlay_set_position, reg2, 1),
			(overlay_set_size, reg2, ":var_2"),
			(create_text_overlay, reg2, "@CHA:", 4),
			(position_set_y, 1, 137),
			(overlay_set_position, reg2, 1),
			(position_set_x, ":var_2", 900),
			(overlay_set_size, reg2, ":var_2"),
			(create_text_overlay, reg2, "@Health:", 4),
			(position_set_y, 1, 105),
			(overlay_set_position, reg2, 1),
			(position_set_x, ":var_2", 1250),
			(position_set_y, ":var_2", 1250),
			(overlay_set_size, reg2, ":var_2"),
			(create_text_overlay, reg2, "@Level:", 4),
			(position_set_y, 1, 76),
			(overlay_set_position, reg2, 1),
			(position_set_x, ":var_2", 1250),
			(position_set_y, ":var_2", 1250),
			(overlay_set_size, reg2, ":var_2"),
			(create_text_overlay, reg2, "@To next lvl: ", 4),
			(position_set_y, 1, 60),
			(overlay_set_position, reg2, 1),
			(position_set_x, ":var_2", 700),
			(position_set_y, ":var_2", 800),
			(overlay_set_size, reg2, ":var_2"),
			(assign, ":value", 585),
			(assign, ":value_2", 374),
			(position_set_x, ":var_2", 900),
			(position_set_y, ":var_2", 1000),
			(create_text_overlay, reg2, "@Ironflesh^Power Strike^Power Throw^Power Draw^Weapon Master^Shield^Athletics^Riding^Horse Archery^Looting^Trainer^Tracking^", 4),
			(create_text_overlay, reg3, "@Tactics^Path-finding^Spotting^Inventory Management^Wound Treatment^Surgery^First Aid^Engineer^Persuasion^Prisoner Management^Leadership^Trade", 4),
			(position_set_x, 1, 353),
			(position_set_y, 1, 284),
			(overlay_set_position, reg2, 1),
			(position_set_y, 1, 68),
			(overlay_set_position, reg3, 1),
			(overlay_set_size, reg2, ":var_2"),
			(overlay_set_size, reg3, ":var_2"),
			(assign, ":value", 625),
			(assign, ":value_2", 68),
			(str_clear, 1),
			(create_text_overlay, "$jq_allskills", "@10", 16),
			(position_set_x, ":var_2", 850),
			(position_set_y, ":var_2", 1000),
			(position_set_x, 2, ":value"),
			(position_set_y, 2, ":value_2"),
			(overlay_set_position, "$jq_allskills", 2),
			(overlay_set_size, "$jq_allskills", ":var_2"),
			(create_text_overlay, ":var_4", "@One Handed Weapons:^^Two Handed Weapons:^^Polearms:^^Archery:^^Crossbows:^^Throwing:^^Firearms:", 4),
			(create_text_overlay, "$jq_allprofs", "@350^^350^^350^^350^^350^^350^^350", 4),
			(position_set_x, 1, 707),
			(position_set_y, 1, 155),
			(overlay_set_position, ":var_4", 1),
			(position_set_x, 1, 900),
			(overlay_set_position, "$jq_allprofs", 1),
			(position_set_x, ":var_2", 950),
			(position_set_y, ":var_2", 1000),
			(overlay_set_size, ":var_4", ":var_2"),
			(overlay_set_size, "$jq_allprofs", ":var_2"),
			(assign, ":value", 115),
			(assign, ":value_3", 500),
			(position_set_x, ":var_2", 975),
			(position_set_y, ":var_2", 975),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, 212),
			(create_text_overlay, "$jqregstr", "@ {reg1} ", 16),
			(overlay_set_position, "$jqregstr", 1),
			(overlay_set_size, "$jqregstr", ":var_2"),
			(create_text_overlay, "$jqregagi", "@ {reg1} ", 16),
			(position_set_y, 1, 187),
			(overlay_set_position, "$jqregagi", 1),
			(overlay_set_size, "$jqregagi", ":var_2"),
			(create_text_overlay, "$jqregint", "@ {reg1} ", 16),
			(position_set_y, 1, 162),
			(overlay_set_position, "$jqregint", 1),
			(overlay_set_size, "$jqregint", ":var_2"),
			(create_text_overlay, "$jqregcha", "@ {reg1} ", 16),
			(position_set_y, 1, 137),
			(overlay_set_position, "$jqregcha", 1),
			(overlay_set_size, "$jqregcha", ":var_2"),
			(create_text_overlay, "$jqhealth", "@ 100%  ", 16),
			(position_set_x, 1, 142),
			(position_set_y, 1, 105),
			(overlay_set_position, "$jqhealth", 1),
			(position_set_x, ":var_2", 1250),
			(position_set_y, ":var_2", 1250),
			(overlay_set_size, "$jqhealth", ":var_2"),
			(create_text_overlay, "$jqreglvl", "@ 30 ", 16),
			(position_set_x, 1, 122),
			(position_set_y, 1, 76),
			(overlay_set_position, "$jqreglvl", 1),
			(position_set_x, ":var_2", 1250),
			(position_set_y, ":var_2", 1250),
			(overlay_set_size, "$jqreglvl", ":var_2"),
			(create_text_overlay, "$jqtonextlvl", "@ 3333333333 ", 16),
			(position_set_x, 1, 124),
			(position_set_y, 1, 60),
			(overlay_set_position, "$jqtonextlvl", 1),
			(position_set_x, ":var_2", 800),
			(position_set_y, ":var_2", 800),
			(overlay_set_size, "$jqtonextlvl", ":var_2"),
			(position_set_x, 1, 353),
			(position_set_y, 1, 707),
			(create_text_overlay, "$g_jq_equip_hline1", "@-Weapons-"),
			(overlay_set_position, "$g_jq_equip_hline1", 1),
			(overlay_set_color, "$g_jq_equip_hline1", 4278190182),
			(position_set_y, 1, 622),
			(create_text_overlay, "$g_jq_equip_hline2", "@-Armor-"),
			(overlay_set_position, "$g_jq_equip_hline2", 1),
			(overlay_set_color, "$g_jq_equip_hline2", 4278190233),
			(create_text_overlay, "$g_jq_equipment_item0", "@n/a                                ", 4),
			(create_text_overlay, "$g_jq_equipment_item1", "@n/a                                ", 4),
			(create_text_overlay, "$g_jq_equipment_item2", "@n/a                                ", 4),
			(create_text_overlay, "$g_jq_equipment_item3", "@n/a                                ", 4),
			(create_text_overlay, "$g_jq_equipment_item4", "@n/a                                ", 4),
			(create_text_overlay, "$g_jq_equipment_item5", "@n/a                                ", 4),
			(create_text_overlay, "$g_jq_equipment_item6", "@n/a                                ", 4),
			(create_text_overlay, "$g_jq_equipment_item7", "@n/a                                ", 4),
			(position_set_x, 1, 353),
			(position_set_y, 1, 690),
			(overlay_set_position, "$g_jq_equipment_item0", 1),
			(position_set_y, 1, 673),
			(overlay_set_position, "$g_jq_equipment_item1", 1),
			(position_set_y, 1, 656),
			(overlay_set_position, "$g_jq_equipment_item2", 1),
			(position_set_y, 1, 639),
			(overlay_set_position, "$g_jq_equipment_item3", 1),
			(position_set_y, 1, 605),
			(overlay_set_position, "$g_jq_equipment_item4", 1),
			(position_set_y, 1, 588),
			(overlay_set_position, "$g_jq_equipment_item5", 1),
			(position_set_y, 1, 571),
			(overlay_set_position, "$g_jq_equipment_item6", 1),
			(position_set_y, 1, 554),
			(overlay_set_position, "$g_jq_equipment_item7", 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_jq_equip_hline1", 1),
			(overlay_set_size, "$g_jq_equip_hline2", 1),
			(overlay_set_size, "$g_jq_equipment_item0", 1),
			(overlay_set_size, "$g_jq_equipment_item1", 1),
			(overlay_set_size, "$g_jq_equipment_item2", 1),
			(overlay_set_size, "$g_jq_equipment_item3", 1),
			(overlay_set_size, "$g_jq_equipment_item4", 1),
			(overlay_set_size, "$g_jq_equipment_item5", 1),
			(overlay_set_size, "$g_jq_equipment_item6", 1),
			(overlay_set_size, "$g_jq_equipment_item7", 1),
			(assign, ":value", 840),
			(assign, ":value_3", 690),
			(position_set_x, ":var_2", 850),
			(position_set_y, ":var_2", 875),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_3"),
			(str_store_troop_name, 9, "$jq_dude"),
			(create_text_overlay, "$jq_mrlc", "@{s9} feels...", 16),
			(overlay_set_size, "$jq_mrlc", ":var_2"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$jq_mrlc", 1),
			(overlay_set_color, "$jq_mrlc", 4294967295),
			(val_sub, ":value_3", 27),
			(call_script, "script_npc_morale", "$jq_dude"),
			(assign, reg1, reg0),
			(create_text_overlay, "$jq_feeling1", "@{s6}", 16),
			(create_text_overlay, ":value_4", "@your choice of companions,", 16),
			(overlay_set_size, ":value_4", ":var_2"),
			(overlay_set_size, "$jq_feeling1", ":var_2"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$jq_feeling1", 1),
			(val_sub, ":value_3", 19),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, ":value_4", 1),
			(overlay_set_color, "$jq_feeling1", 4294967040),
			(overlay_set_color, ":value_4", 4294967295),
			(val_sub, ":value_3", 19),
			(create_text_overlay, "$jq_feeling2", "@{s7}", 16),
			(create_text_overlay, ":value_4", "@your style of leadership and...", 16),
			(overlay_set_size, ":value_4", ":var_2"),
			(overlay_set_size, "$jq_feeling2", ":var_2"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$jq_feeling2", 1),
			(val_sub, ":value_3", 19),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, ":value_4", 1),
			(overlay_set_color, "$jq_feeling2", 4294967040),
			(overlay_set_color, ":value_4", 4294967295),
			(val_sub, ":value_3", 19),
			(create_text_overlay, "$jq_feeling3", "@{s8}", 16),
			(create_text_overlay, ":value_4", "@the general state of affairs.^------------------------------", 16),
			(overlay_set_size, ":value_4", ":var_2"),
			(overlay_set_size, "$jq_feeling3", ":var_2"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$jq_feeling3", 1),
			(val_sub, ":value_3", 36),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, ":value_4", 1),
			(overlay_set_color, "$jq_feeling3", 4294967040),
			(overlay_set_color, ":value_4", 4294967295),
			(val_sub, ":value_3", 51),
			(create_text_overlay, "$jq_comphome", "@Morale:                       ^^Origin:          ", 16),
			(overlay_set_size, "$jq_comphome", ":var_2"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$jq_comphome", 1),
			(overlay_set_color, "$jq_comphome", 4294967295),
			(val_sub, ":value_3", 27),
			(create_text_overlay, "$jq_state", "@State:                       ", 16),
			(overlay_set_size, "$jq_state", ":var_2"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$jq_state", 1),
			(overlay_set_color, "$jq_state", 4294967295),
			(call_script, "script_jq_browse", "$jq_dude", 150)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_jq_Return_to_menu"),
				(assign, "$jq_just_visited_CO", 0),
				(assign, "$jq_override", 0),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(start_presentation, "prsnt_jq_companions_quickview"),
			(else_try),
				(eq, ":trigger_param_1", "$g_jq_prevtroop"),
				(val_sub, "$jq_slot", 1),
				(try_begin),
					(lt, "$jq_slot", 0),
					(val_sub, "$jq_nr", 1),
					(assign, "$jq_slot", "$jq_nr"),
					(val_add, "$jq_nr", 1),
				(try_end),
				(troop_get_slot, "$jq_dude", "trp_temp_array_c", "$jq_slot"),
				(overlay_set_alpha, "$jq_portrait", 0),
				(create_mesh_overlay_with_tableau_material, "$jq_portrait", -1, "tableau_game_character_sheet", "$jq_dude"),
				(call_script, "script_jq_browse", "$jq_dude", 150),
			(else_try),
				(eq, ":trigger_param_1", "$g_jq_nexttroop"),
				(val_add, "$jq_slot", 1),
				(try_begin),
					(eq, "$jq_slot", "$jq_nr"),
					(assign, "$jq_slot", 0),
				(try_end),
				(troop_get_slot, "$jq_dude", "trp_temp_array_c", "$jq_slot"),
				(overlay_set_alpha, "$jq_portrait", 0),
				(create_mesh_overlay_with_tableau_material, "$jq_portrait", -1, "tableau_game_character_sheet", "$jq_dude"),
				(call_script, "script_jq_browse", "$jq_dude", 150),
			(else_try),
				(eq, ":trigger_param_1", "$g_jqhelp"),
				(eq, "$jq_helptoggle", 0),
				(assign, "$jq_helptoggle", 1),
				(overlay_animate_to_alpha, "$g_jqhelptxt", 400, 255),
			(else_try),
				(eq, ":trigger_param_1", "$g_jqhelp"),
				(eq, "$jq_helptoggle", 1),
				(assign, "$jq_helptoggle", 0),
				(overlay_animate_to_alpha, "$g_jqhelptxt", 400, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_quitdebug2"),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_end_game"),
			(else_try),
				(eq, ":trigger_param_1", "$g_jq_Back_to_shop"),
				(assign, "$jq_just_visited_CO", 1),
				(assign, "$jq_override", 0),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 225),
				(eq, "$jq_in_market_menu", 0),
				(assign, "$jq_override", 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_reports"),
			(else_try),
				(key_clicked, 225),
				(eq, "$jq_in_market_menu", 1),
				(assign, "$jq_override", 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_town_trade"),
			(else_try),
				(key_clicked, 14),
				(eq, "$jq_in_market_menu", 1),
				(eq, "$jq_current_town", "$current_town"),
				(assign, "$jq_just_visited_CO", 1),
				(assign, "$jq_override", 0),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_town_trade"),
			(else_try),
				(key_clicked, 1),
				(start_presentation, "prsnt_jq_companions_quickview"),
			(else_try),
				(key_clicked, 199),
				(assign, "$jq_startpage", 2),
				(play_sound, "snd_put_back_sword"),
				(display_message, "@Startpage set (Extended View)", 0xffaaffaa),
			(try_end)
		])
	]),

	("set_vassal_title", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(str_clear, 0),
			(str_clear, 1),
			(str_clear, 2),
			(str_clear, 3),
			(create_text_overlay, reg0, "@How will your male vassals be known?", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@How will your female vassals be known?", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 400),
			(overlay_set_position, reg0, 1),
			(create_simple_text_box_overlay, "$g_presentation_obj_name_kingdom_1"),
			(position_set_x, 1, 400),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_1", 1),
			(try_begin),
				(troop_slot_eq, "trp_heroes_end", slot_troop_relations_begin, 1),
				(str_store_troop_name, 3, "trp_heroes_end"),
			(else_try),
				(str_store_string, 3, "@Default title."),
			(try_end),
			(overlay_set_text, "$g_presentation_obj_name_kingdom_1", 3),
			(create_simple_text_box_overlay, reg0),
			(position_set_x, 1, 400),
			(position_set_y, 1, 300),
			(overlay_set_position, reg0, 1),
			(try_begin),
				(troop_slot_eq, "trp_heroes_end", 1, 1),
				(str_store_troop_name_plural, 3, "trp_heroes_end"),
			(else_try),
				(str_store_string, 3, "@Default title."),
			(try_end),
			(overlay_set_text, reg0, 3),
			(str_clear, 3),
			(create_button_overlay, reg0, "@Set Custom Titles.", 16),
			(position_set_x, 1, 600),
			(position_set_y, 1, 150),
			(overlay_set_position, reg0, 1),
			(create_button_overlay, reg0, "@Use fief-based titles (Default).", 16),
			(position_set_x, 1, 600),
			(position_set_y, 1, 100),
			(overlay_set_position, reg0, 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_name_kingdom_1"),
				(str_store_string, 1, 0),
			(else_try),
				(store_add, ":value", "$g_presentation_obj_name_kingdom_1", 1),
				(eq, ":trigger_param_1", ":value"),
				(str_store_string, 2, 0),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, ":value_2", 0),
				(try_begin),
					(neg|str_is_empty, 1),
					(troop_set_name, "trp_heroes_end", 1),
					(troop_set_slot, "trp_heroes_end", slot_troop_relations_begin, 1),
					(try_for_range, ":troop", "trp_knight_1_1", "trp_kingdom_1_pretender"),
						(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
						(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
						(call_script, "script_troop_set_title_according_to_faction", ":troop", ":faction_of_troop_troop"),
					(try_end),
					(assign, ":value_2", 1),
				(try_end),
				(try_begin),
					(neg|str_is_empty, 2),
					(troop_set_plural_name, "trp_heroes_end", 2),
					(troop_set_slot, "trp_heroes_end", 1, 1),
					(try_for_range, ":troop", "trp_knight_1_1_wife", "trp_heroes_end"),
						(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
						(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
						(call_script, "script_troop_set_title_according_to_faction", ":troop", ":faction_of_troop_troop"),
					(try_end),
					(assign, ":value_2", 1),
				(try_end),
				(try_begin),
					(eq, ":value_2", 1),
					(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
						(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
						(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
						(troop_slot_eq, ":troop", slot_troop_occupation, 2),
						(call_script, "script_troop_set_title_according_to_faction", ":troop", ":faction_of_troop_troop"),
					(try_end),
				(try_end),
				(presentation_set_duration, 0),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(troop_set_slot, "trp_heroes_end", slot_troop_relations_begin, 0),
				(troop_set_slot, "trp_heroes_end", 1, 0),
				(try_for_range, ":troop", "trp_knight_1_1", "trp_heroes_end"),
					(neg|is_between, ":troop", "trp_kingdom_1_pretender", "trp_knight_1_1_wife"),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
					(call_script, "script_troop_set_title_according_to_faction", ":troop", ":faction_of_troop_troop"),
				(try_end),
				(try_for_range, ":troop", "trp_npc1", "trp_kingdom_1_lord"),
					(store_faction_of_troop, ":faction_of_troop_troop", ":troop"),
					(eq, ":faction_of_troop_troop", "fac_player_supporters_faction"),
					(troop_slot_eq, ":troop", slot_troop_occupation, 2),
					(call_script, "script_troop_set_title_according_to_faction", ":troop", ":faction_of_troop_troop"),
				(try_end),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("set_party_name", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(str_clear, 0),
			(str_clear, 5),
			(str_clear, 7),
			(str_store_string, 1, "@What will your party be known as?"),
			(create_text_overlay, reg1, 1, 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_position, reg1, 1),
			(overlay_set_text, reg1, 1),
			(create_simple_text_box_overlay, "$g_presentation_obj_name_kingdom_1"),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_1", 1),
			(str_store_party_name, 7, "p_main_party"),
			(overlay_set_text, "$g_presentation_obj_name_kingdom_1", 7),
			(create_button_overlay, "$g_presentation_obj_name_kingdom_2", "@By the name entered above."),
			(position_set_x, 1, 500),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_2", 1),
			(str_store_troop_name, 5, "trp_player"),
			(create_button_overlay, reg1, "@Simply by my name: {s5}."),
			(position_set_x, 1, 500),
			(position_set_y, 1, 275),
			(overlay_set_position, reg1, 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_name_kingdom_1"),
				(str_store_string, 7, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_name_kingdom_2"),
				(party_set_name, "p_main_party", 7),
				(party_set_slot, 0, 1, 1),
				(presentation_set_duration, 0),
			(else_try),
				(store_add, ":value", "$g_presentation_obj_name_kingdom_2", 1),
				(eq, ":value", ":trigger_param_1"),
				(party_set_name, "p_main_party", 5),
				(party_set_slot, 0, 1, 0),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("scene_picker", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 99999),
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_presentation_obj_15_val", "p_town_1"),
			(str_store_party_name, 2, "$g_presentation_obj_15_val"),
			(create_slider_overlay, "$g_presentation_obj_15", "p_town_1", "p_castle_48"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_position, "$g_presentation_obj_15", 1),
			(overlay_set_val, "$g_presentation_obj_15", "$g_presentation_obj_15_val"),
			(create_text_overlay, "$g_presentation_obj_17", "@ {s2} siege camp.", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_position, "$g_presentation_obj_17", 1),
			(position_set_x, 2, 1000),
			(position_set_y, 2, 1000),
			(overlay_set_size, "$g_presentation_obj_17", 2),
			(create_game_button_overlay, "$g_presentation_obj_19", "@ Continue ", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 30),
			(overlay_set_position, "$g_presentation_obj_19", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, "$g_presentation_obj_19", ":trigger_param_1"),
				(assign, "$temp_presentation_shown", 1),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_15"),
				(assign, "$g_presentation_obj_15_val", ":trigger_param_2"),
				(str_store_party_name, 2, ":trigger_param_2"),
				(overlay_set_text, "$g_presentation_obj_17", "@ {s2} siege camp.", 16),
			(try_end)
		])
	]),

	("bank", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(party_get_slot, ":current_town_462", "$current_town", 462),
				(troop_add_gold, "trp_player", ":current_town_462"),
				(party_set_slot, "$current_town", 462, 0),
			(try_end),
			(str_store_party_name, 1, "$current_town"),
			(create_text_overlay, reg0, "@This area of Braavos can best be described as the very core of the city.^^ You can almost see the strings that are being pulled from here, the coin and wealth that comes and goes at seemingly endless rates. Though all the Free Cities have their own banks, the Iron Bank is richer and more powerful than all the rest combined, though one would not immediatly think so when observing the keyholders and justiciars, all of whom are dressed in drab coats of brown and grey. Here you can buy the land that is cultivated all along the western shores of northern Essos, the area known as the Braavosian Coastlands, and benefit from the ones working hard, while also acquiring a steady income to fund whatever endeavors you wish. Of course you might not have the coin required to do so, but the servants of Iron Bank are known to have some spare change, and will gladly lend you whatever you require, as long as the loan is repayed. Those who default on their promises meet a grizzly fate, and the people of Braavos have a saying 'The Iron Bank will have its due'.", 16),
			(position_set_x, 1, 475),
			(position_set_y, 1, 600),
			(overlay_set_position, reg0, 1),
			(position_set_x, 2, 800),
			(position_set_y, 2, 900),
			(overlay_set_size, reg0, 2),
			(party_get_slot, ":current_town_459", "$current_town", 459),
			(party_get_slot, ":current_town_456", "$current_town", 456),
			(party_get_slot, ":current_town_458", "$current_town", 458),
			(store_add, ":value", ":current_town_456", ":current_town_458"),
			(assign, reg1, ":current_town_459"),
			(assign, reg2, ":value"),
			(assign, reg3, ":current_town_458"),
			(party_get_slot, ":current_town_463", "$current_town", 463),
			(assign, reg4, ":current_town_463"),
			(assign, reg5, 0),
			(assign, reg6, 0),
			(assign, reg7, 0),
			(assign, reg8, 0),
			(party_get_slot, ":current_town_town_prosperity", "$current_town", slot_town_prosperity),
			(store_mul, ":value_2", ":current_town_town_prosperity", 10),
			(val_sub, ":value_2", 500),
			(store_add, reg9, 2000, ":value_2"),
			(store_add, reg10, 800, ":value_2"),
			(store_add, reg11, 4000, ":value_2"),
			(store_sub, ":value_3", ":current_town_town_prosperity", 50),
			(store_add, reg13, ":value_3", 100),
			(create_text_overlay, "$g_presentation_obj_19", "@There are currently {reg2} acres of land available for cultivation to provide the people of Braavos with  grain, corn, olives and other goods. You own {reg3} acres of land spread out across the Braavosian Coastlands. You currently owe the Iron Bank {reg4} coins. The interest rate is 20% and the contract period amounts  to 2 weeks. If you dont manage to pay off your debt until the deadline, the interest is raised to 40%. Buying an existing acre costs {reg9} coins, while it sells for {reg10} coins. Building a new one requires {reg11} coins. The rent paid to landowners currently accumulates to {reg13} coins per acre every 2 weeks and is delivered to the servants of the Iron Bank, for safekeeping in the vaults. You can collect your rents by visiting the bank. Land won't be rented if the people of Braavos are already well supplied.", 16),
			(position_set_x, 1, 475),
			(position_set_y, 1, 450),
			(overlay_set_position, "$g_presentation_obj_19", 1),
			(position_set_x, 2, 900),
			(position_set_y, 2, 1000),
			(overlay_set_size, "$g_presentation_obj_19", 2),
			(try_begin),
				(eq, reg12, 2222),
				(str_store_string, 2, "@Choose how many acres you wish to sell :"),
			(else_try),
				(str_store_string, 2, "@Choose how many acres you wish to buy :"),
			(try_end),
			(create_button_overlay, "$g_presentation_obj_16", "@{s2}", 16),
			(position_set_x, 1, 250),
			(position_set_y, 1, 350),
			(overlay_set_position, "$g_presentation_obj_16", 1),
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(store_div, ":value_4", ":troop_gold_player", reg11),
			(val_div, ":troop_gold_player", reg9),
			(val_min, ":troop_gold_player", ":current_town_456"),
			(try_begin),
				(eq, reg12, 2222),
				(party_get_slot, ":current_town_458_2", "$current_town", 458),
				(assign, ":troop_gold_player", ":current_town_458_2"),
			(try_end),
			(create_slider_overlay, "$g_presentation_obj_1", 0, ":troop_gold_player"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 310),
			(overlay_set_position, "$g_presentation_obj_1", 1),
			(create_text_overlay, "$g_presentation_obj_2", "@0"),
			(position_set_x, 1, 400),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_2", 1),
			(create_button_overlay, "$g_presentation_obj_3", "@Verify", 16),
			(position_set_x, 1, 250),
			(position_set_y, 1, 275),
			(overlay_set_position, "$g_presentation_obj_3", 1),
			(create_text_overlay, reg0, "@Choose how much money you wish to borrow :", 16),
			(position_set_x, 1, 725),
			(position_set_y, 1, 350),
			(overlay_set_position, reg0, 1),
			(assign, ":var_13", 0),
			(try_for_range, ":party", "p_town_1", "p_salt_mine"),
				(party_slot_eq, ":party", slot_town_lord, "trp_player"),
				(val_add, ":var_13", 1),
			(try_end),
			(troop_get_slot, ":player_renown", "trp_player", slot_troop_renown),
			(party_get_slot, ":current_town_town_prosperity_2", "$current_town", slot_town_prosperity),
			(store_mul, ":value_5", ":current_town_town_prosperity_2", 250),
			(try_begin),
				(lt, ":var_13", 1),
				(lt, ":player_renown", 500),
				(gt, ":value_5", 5000),
				(assign, ":value_5", 5000),
			(try_end),
			(party_get_slot, ":current_town_center_player_relation", "$current_town", slot_center_player_relation),
			(store_mul, ":value_6", ":current_town_center_player_relation", 100),
			(val_add, ":value_5", ":value_6"),
			(val_sub, ":value_5", ":current_town_463"),
			(try_begin),
				(lt, ":value_5", 0),
				(assign, ":value_5", 0),
			(try_end),
			(try_begin),
				(assign, reg25, 0),
				(try_for_range, ":party_2", "p_town_1", "p_castle_1"),
					(party_get_slot, ":party_2_463", ":party_2", 463),
					(val_add, reg25, ":party_2_463"),
				(try_end),
				(ge, reg25, 50000),
				(assign, ":value_5", 0),
			(try_end),
			(create_slider_overlay, "$g_presentation_obj_4", 0, ":value_5"),
			(position_set_x, 1, 700),
			(position_set_y, 1, 310),
			(overlay_set_position, "$g_presentation_obj_4", 1),
			(create_text_overlay, "$g_presentation_obj_5", "@0"),
			(position_set_x, 1, 850),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_5", 1),
			(create_button_overlay, "$g_presentation_obj_6", "@Verify", 16),
			(position_set_x, 1, 700),
			(position_set_y, 1, 275),
			(overlay_set_position, "$g_presentation_obj_6", 1),
			(create_text_overlay, "$g_presentation_obj_7", "@Buy and prepare uncultivated land :", 16),
			(position_set_x, 1, 250),
			(position_set_y, 1, 200),
			(overlay_set_position, "$g_presentation_obj_7", 1),
			(create_slider_overlay, "$g_presentation_obj_8", 0, ":value_4"),
			(position_set_x, 1, 250),
			(position_set_y, 1, 160),
			(overlay_set_position, "$g_presentation_obj_8", 1),
			(create_text_overlay, "$g_presentation_obj_9", "@0"),
			(position_set_x, 1, 400),
			(position_set_y, 1, 150),
			(overlay_set_position, "$g_presentation_obj_9", 1),
			(create_button_overlay, "$g_presentation_obj_10", "@Verify", 16),
			(position_set_x, 1, 250),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_10", 1),
			(create_text_overlay, "$g_presentation_obj_11", "@Pay off your debt :", 16),
			(position_set_x, 1, 700),
			(position_set_y, 1, 200),
			(overlay_set_position, "$g_presentation_obj_11", 1),
			(store_troop_gold, ":troop_gold_player", "trp_player"),
			(try_begin),
				(lt, ":current_town_463", ":troop_gold_player"),
				(assign, ":troop_gold_player", ":current_town_463"),
			(try_end),
			(create_slider_overlay, "$g_presentation_obj_12", 0, ":troop_gold_player"),
			(position_set_x, 1, 700),
			(position_set_y, 1, 160),
			(overlay_set_position, "$g_presentation_obj_12", 1),
			(create_text_overlay, "$g_presentation_obj_13", "@0"),
			(position_set_x, 1, 850),
			(position_set_y, 1, 150),
			(overlay_set_position, "$g_presentation_obj_13", 1),
			(create_button_overlay, "$g_presentation_obj_14", "@Verify", 16),
			(position_set_x, 1, 700),
			(position_set_y, 1, 125),
			(overlay_set_position, "$g_presentation_obj_14", 1),
			(create_game_button_overlay, "$g_presentation_obj_15", "@Done", 0),
			(position_set_x, 1, 880),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_15", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_1"),
				(assign, reg5, ":trigger_param_2"),
				(overlay_set_text, "$g_presentation_obj_2", "@{reg5}"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_3"),
				(try_begin),
					(eq, reg12, 2222),
					(try_begin),
						(gt, reg5, 0),
						(store_mul, ":value", reg5, reg10),
						(troop_add_gold, "trp_player", ":value"),
						(party_get_slot, ":current_town_456", "$current_town", 456),
						(val_add, ":current_town_456", reg5),
						(party_set_slot, "$current_town", 456, ":current_town_456"),
						(party_get_slot, ":current_town_458", "$current_town", 458),
						(val_sub, ":current_town_458", reg5),
						(party_set_slot, "$current_town", 458, ":current_town_458"),
						(start_presentation, "prsnt_bank"),
					(else_try),
						(display_message, "@You can't sell 0 acres of land."),
					(try_end),
				(else_try),
					(try_begin),
						(gt, reg5, 0),
						(store_mul, ":value_2", reg5, reg9),
						(troop_remove_gold, "trp_player", ":value_2"),
						(party_get_slot, ":current_town_456", "$current_town", 456),
						(val_sub, ":current_town_456", reg5),
						(party_set_slot, "$current_town", 456, ":current_town_456"),
						(party_get_slot, ":current_town_458", "$current_town", 458),
						(val_add, ":current_town_458", reg5),
						(party_set_slot, "$current_town", 458, ":current_town_458"),
						(start_presentation, "prsnt_bank"),
					(else_try),
						(display_message, "@You can't buy 0 acres of land."),
					(try_end),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_4"),
				(assign, reg6, ":trigger_param_2"),
				(overlay_set_text, "$g_presentation_obj_5", "@{reg6}"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_6"),
				(try_begin),
					(gt, reg6, 0),
					(party_get_slot, ":current_town_463", "$current_town", 463),
					(try_begin),
						(le, ":current_town_463", 0),
						(store_current_hours, ":current_hours"),
						(val_add, ":current_hours", 672),
						(party_set_slot, "$current_town", 464, ":current_hours"),
					(try_end),
					(troop_add_gold, "trp_player", reg6),
					(val_mul, reg6, 120),
					(val_div, reg6, 100),
					(val_add, ":current_town_463", reg6),
					(party_set_slot, "$current_town", 463, ":current_town_463"),
					(start_presentation, "prsnt_bank"),
				(else_try),
					(display_message, "@You can't borrow 0 denars."),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_8"),
				(assign, reg7, ":trigger_param_2"),
				(overlay_set_text, "$g_presentation_obj_9", "@{reg7}"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_10"),
				(try_begin),
					(gt, reg7, 0),
					(store_mul, ":value_2", reg7, reg11),
					(troop_remove_gold, "trp_player", ":value_2"),
					(party_get_slot, ":current_town_458", "$current_town", 458),
					(val_add, ":current_town_458", reg7),
					(party_set_slot, "$current_town", 458, ":current_town_458"),
					(start_presentation, "prsnt_bank"),
				(else_try),
					(display_message, "@You can't buy 0 acres of land."),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_12"),
				(assign, reg8, ":trigger_param_2"),
				(overlay_set_text, "$g_presentation_obj_13", "@{reg8}"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_14"),
				(try_begin),
					(gt, reg8, 0),
					(troop_remove_gold, "trp_player", reg8),
					(party_get_slot, ":current_town_463", "$current_town", 463),
					(val_sub, ":current_town_463", reg8),
					(party_set_slot, "$current_town", 463, ":current_town_463"),
					(try_begin),
						(le, ":current_town_463", 0),
						(party_set_slot, "$current_town", 464, 0),
					(try_end),
					(start_presentation, "prsnt_bank"),
				(else_try),
					(display_message, "@You can't pay back 0 denars."),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_16"),
				(try_begin),
					(neq, reg12, 2222),
					(assign, reg12, 2222),
					(start_presentation, "prsnt_bank"),
				(else_try),
					(assign, reg12, 0),
					(start_presentation, "prsnt_bank"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_15"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("bank_quickview", 0, mesh_companion_overview, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(assign, ":value", 155),
			(assign, ":value_2", 581),
			(assign, ":value_3", 0),
			(position_set_x, ":value_3", 720),
			(position_set_y, ":value_3", 775),
			(create_text_overlay, reg1, "@Town", 16),
			(overlay_set_size, reg1, ":value_3"),
			(position_set_x, 1, ":value"),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Acres", 16),
			(overlay_set_size, reg1, ":value_3"),
			(val_add, ":value", 120),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Owned", 16),
			(overlay_set_size, reg1, ":value_3"),
			(val_add, ":value", 108),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Balance", 16),
			(overlay_set_size, reg1, ":value_3"),
			(val_add, ":value", 112),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Assets", 16),
			(overlay_set_size, reg1, ":value_3"),
			(val_add, ":value", 105),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Debt", 16),
			(overlay_set_size, reg1, ":value_3"),
			(val_add, ":value", 105),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg1, 1),
			(create_text_overlay, reg1, "@Deadline", 16),
			(overlay_set_size, reg1, ":value_3"),
			(val_add, ":value", 120),
			(position_set_x, 1, ":value"),
			(overlay_set_position, reg1, 1),
			(str_clear, 0),
			(create_text_overlay, reg0, 0, 8192),
			(position_set_x, 1, 10),
			(position_set_y, 1, 100),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 900),
			(position_set_y, 1, 450),
			(overlay_set_area_size, reg0, 1),
			(set_container_overlay, reg0),
			(assign, ":var_4", 100),
			(assign, ":value_3", 0),
			(assign, ":value_4", 0),
			(assign, ":value_2", 547),
			(str_clear, 9),
			(str_clear, 8),
			(assign, reg2, 0),
			(assign, reg3, 0),
			(assign, reg4, 0),
			(assign, reg5, 0),
			(assign, reg6, 0),
			(assign, reg7, 0),
			(try_for_range, ":party", "p_town_1", "p_castle_1"),
				(party_get_slot, ":party_456", ":party", 456),
				(party_get_slot, ":party_458", ":party", 458),
				(party_get_slot, ":party_462", ":party", 462),
				(party_get_slot, ":party_463", ":party", 463),
				(party_get_slot, ":party_464", ":party", 464),
				(party_get_slot, ":party_459", ":party", 459),
				(party_get_slot, ":party_town_prosperity", ":party", slot_town_prosperity),
				(store_add, ":value_5", ":party_456", ":party_458"),
				(store_div, ":value_6", ":party_459", 200),
				(store_sub, ":value_7", ":value_5", ":value_6"),
				(store_sub, ":value_8", ":party_town_prosperity", 50),
				(val_add, ":value_8", 100),
				(assign, ":value_9", 0),
				(try_begin),
					(le, ":value_5", ":value_6"),
					(store_mul, ":value_10", ":party_458", ":value_8"),
				(else_try),
					(store_mul, ":value_11", ":value_7", -1),
					(val_add, ":value_11", ":value_8"),
					(try_begin),
						(ge, ":value_11", 85),
						(store_mul, ":value_10", ":party_458", ":value_11"),
					(else_try),
						(store_sub, ":value_12", ":value_7", 15),
						(val_sub, ":party_458", ":value_12"),
						(store_mul, ":value_10", ":party_458", 85),
						(store_mul, ":value_9", ":value_12", -50),
					(try_end),
				(try_end),
				(store_add, ":value_13", ":value_10", ":value_9"),
				(val_add, ":var_4", 1),
				(val_add, ":value_4", 118),
				(str_store_party_name, 9, ":party"),
				(str_store_string, 1, "@{s9}"),
				(create_text_overlay, reg1, 1, 4),
				(position_set_x, 3, ":value_4"),
				(position_set_y, 3, ":value_2"),
				(overlay_set_position, reg1, 3),
				(position_set_x, 3, 750),
				(position_set_y, 3, 850),
				(overlay_set_size, reg1, 3),
				(val_add, ":value_4", 135),
				(assign, reg2, ":value_5"),
				(create_text_overlay, reg1, "@{reg2}", 4),
				(position_set_x, 3, ":value_4"),
				(position_set_y, 3, ":value_2"),
				(overlay_set_position, reg1, 3),
				(position_set_x, 3, 750),
				(position_set_y, 3, 850),
				(overlay_set_size, reg1, 3),
				(val_add, ":value_4", 113),
				(assign, reg3, ":party_458"),
				(str_store_string, 1, "@{reg3}"),
				(create_text_overlay, reg1, 1, 4),
				(position_set_x, 3, ":value_4"),
				(position_set_y, 3, ":value_2"),
				(overlay_set_position, reg1, 3),
				(position_set_x, 3, 750),
				(position_set_y, 3, 850),
				(overlay_set_size, reg1, 3),
				(val_add, ":value_4", 110),
				(assign, reg4, ":value_13"),
				(str_store_string, 1, "@{reg4}"),
				(create_text_overlay, reg1, 1, 4),
				(position_set_x, 3, ":value_4"),
				(position_set_y, 3, ":value_2"),
				(overlay_set_position, reg1, 3),
				(position_set_x, 3, 750),
				(position_set_y, 3, 850),
				(overlay_set_size, reg1, 3),
				(val_add, ":value_4", 110),
				(assign, reg4, ":party_462"),
				(str_store_string, 1, "@{reg4}"),
				(create_text_overlay, reg1, 1, 4),
				(position_set_x, 3, ":value_4"),
				(position_set_y, 3, ":value_2"),
				(overlay_set_position, reg1, 3),
				(position_set_x, 3, 750),
				(position_set_y, 3, 850),
				(overlay_set_size, reg1, 3),
				(val_add, ":value_4", 105),
				(assign, reg5, ":party_463"),
				(str_store_string, 1, "@{reg5}"),
				(create_text_overlay, reg1, 1, 4),
				(position_set_x, 3, ":value_4"),
				(position_set_y, 3, ":value_2"),
				(overlay_set_position, reg1, 3),
				(position_set_x, 3, 750),
				(position_set_y, 3, 850),
				(overlay_set_size, reg1, 3),
				(val_add, ":value_4", 105),
				(try_begin),
					(gt, ":party_464", 0),
					(call_script, "script_game_get_date_text", 1, ":party_464"),
				(else_try),
					(str_store_string, 1, "@None"),
				(try_end),
				(create_text_overlay, reg1, 1, 4),
				(position_set_x, 3, ":value_4"),
				(position_set_y, 3, ":value_2"),
				(overlay_set_position, reg1, 3),
				(position_set_x, 3, 750),
				(position_set_y, 3, 850),
				(overlay_set_size, reg1, 3),
				(assign, ":value_4", 0),
				(assign, ":value", 165),
				(val_sub, ":value_2", 23),
				(ge, ":value_4", 950),
				(assign, ":value_4", 0),
				(val_sub, ":value_2", 23),
			(try_end),
			(set_container_overlay, -1),
			(create_game_button_overlay, "$g_jq_Return_to_menu", "@ Return to menu "),
			(position_set_x, 1, 500),
			(position_set_y, 1, 23),
			(overlay_set_position, "$g_jq_Return_to_menu", 1),
			(assign, "$g_jq_Back_to_shop", 0),
			(assign, "$jq_nr", 0)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_jq_Return_to_menu"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("trade_ledger_basic", 0, mesh_game_log_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(assign, ":var_1", "$g_date"),
			(assign, "$g_date", 1),
			(create_text_overlay, reg0, "@Merchant Ledger", 98320),
			(overlay_set_color, reg0, 4294967295),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 680),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@    Assessed Profit by Subtitle Here", 32784),
			(position_set_x, 1, 500),
			(position_set_y, 1, 650),
			(overlay_set_position, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_bugdet_report_container", 0, 131072),
			(position_set_x, 1, 50),
			(position_set_y, 1, 100),
			(overlay_set_position, "$g_presentation_obj_bugdet_report_container", 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_bugdet_report_container", 1),
			(set_container_overlay, "$g_presentation_obj_bugdet_report_container"),
			(troop_get_slot, ":player_155", "trp_player", 155),
			(ge, ":player_155", 1),
			(call_script, "script_cf_array_is_array", ":player_155"),
			(call_script, "script_array_get_element", ":player_155", 0),
			(assign, ":var_3", reg0),
			(call_script, "script_array_get_element", ":player_155", 1),
			(assign, ":var_4", reg0),
			(call_script, "script_array_get_element", ":player_155", 2),
			(assign, ":var_5", reg0),
			(call_script, "script_array_get_element", ":player_155", 3),
			(assign, ":var_6", reg0),
			(call_script, "script_array_get_element", ":player_155", 4),
			(assign, ":var_7", reg0),
			(call_script, "script_array_get_size", ":var_3"),
			(assign, ":value", reg0),
			(store_mul, ":value_2", ":value", 30),
			(try_begin),
				(eq, reg60, 0),
				(assign, ":value_3", 0),
				(try_for_range, ":number", 0, ":value"),
					(eq, ":number", ":value_3"),
					(call_script, "script_cf_array_get_element", ":var_3", ":number"),
					(assign, ":var_12", reg0),
					(str_store_date, 0, ":var_12"),
					(call_script, "script_cf_array_get_element", ":var_4", ":number"),
					(assign, ":var_13", reg0),
					(str_store_party_name, 1, ":var_13"),
					(create_text_overlay, reg0, "@{s0}, products from {s1}:"),
					(position_set_x, 1, 1000),
					(position_set_y, 1, 1000),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, 25),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(assign, ":value_4", ":value"),
					(assign, ":value_5", ":value_4"),
					(try_for_range, ":value_6", ":number", ":value_4"),
						(call_script, "script_cf_array_get_element", ":var_3", ":value_6"),
						(assign, ":var_17", reg0),
						(call_script, "script_cf_array_get_element", ":var_4", ":value_6"),
						(this_or_next|neq, ":var_13", reg0),
						(neq, ":var_12", ":var_17"),
						(assign, ":value_5", ":value_6"),
						(assign, ":value_3", ":value_6"),
						(assign, ":value_4", 0),
					(try_end),
					(assign, ":value_7", 0),
					(str_clear, 3),
					(try_for_range, ":value_6", ":number", ":value_5"),
						(val_add, ":value_7", 1),
						(call_script, "script_cf_array_get_element", ":var_5", ":value_6"),
						(str_store_item_name, 1, reg0),
						(call_script, "script_cf_array_get_element", ":var_6", ":value_6"),
						(str_store_party_name, 2, reg0),
						(call_script, "script_cf_array_get_element", ":var_7", ":value_6"),
						(str_store_string, 3, "@^{s1} sold in {s2} would earn {reg0} denars.{s3}"),
					(try_end),
					(val_mul, ":value_7", 14),
					(val_sub, ":value_2", ":value_7"),
					(create_text_overlay, reg0, 3),
					(position_set_x, 1, 800),
					(position_set_y, 1, 800),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, 50),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(val_sub, ":value_2", 30),
				(try_end),
				(store_sub, reg0, "$g_presentation_obj_bugdet_report_container", 1),
				(overlay_set_text, reg0, "@  Assessed Profit by Log Entry Date"),
			(else_try),
				(eq, reg60, 1),
				(try_for_range, ":party", "p_town_1", "p_castle_1"),
					(assign, ":value_7", 0),
					(assign, ":value_8", 0),
					(try_for_range, ":number", 0, ":value"),
						(call_script, "script_cf_array_get_element", ":var_4", ":number"),
						(eq, ":party", reg0),
						(call_script, "script_cf_array_get_element", ":var_7", ":number"),
						(val_add, ":value_8", reg0),
						(val_add, ":value_7", 1),
					(try_end),
					(val_max, ":value_7", 1),
					(val_div, ":value_8", ":value_7"),
					(troop_set_slot, "trp_temp_array_b", ":party", ":value_8"),
				(try_end),
				(assign, ":value_9", 0),
				(try_for_range, ":number", "p_town_1", "p_castle_1"),
					(troop_get_slot, reg0, "trp_temp_array_b", ":number"),
					(lt, ":value_9", reg0),
					(assign, ":value_9", reg0),
				(try_end),
				(val_add, ":value_9", 1),
				(try_for_range_backwards, ":value_8", 0, ":value_9"),
					(try_for_range, ":party", "p_town_1", "p_castle_1"),
						(troop_slot_eq, "trp_temp_array_b", ":party", ":value_8"),
						(assign, ":value_7", 0),
						(str_clear, 3),
						(try_for_range, ":number", 0, ":value"),
							(call_script, "script_cf_array_get_element", ":var_4", ":number"),
							(eq, ":party", reg0),
							(val_add, ":value_7", 1),
							(call_script, "script_cf_array_get_element", ":var_3", ":number"),
							(str_store_date, 0, reg0),
							(call_script, "script_cf_array_get_element", ":var_5", ":number"),
							(str_store_item_name, 1, reg0),
							(call_script, "script_cf_array_get_element", ":var_6", ":number"),
							(str_store_party_name, 2, reg0),
							(call_script, "script_cf_array_get_element", ":var_7", ":number"),
							(str_store_string, 3, "@^{s1} sold in {s2} would earn {reg0} denars (as of {s0}).{s3}"),
						(try_end),
						(ge, ":value_7", 1),
						(str_store_party_name, 1, ":party"),
						(str_store_string, 1, "@Production in {s1}"),
						(create_text_overlay, reg0, 1),
						(position_set_x, 1, 1000),
						(position_set_y, 1, 1000),
						(overlay_set_size, reg0, 1),
						(position_set_x, 1, 25),
						(position_set_y, 1, ":value_2"),
						(overlay_set_position, reg0, 1),
						(val_mul, ":value_7", 14),
						(val_sub, ":value_2", ":value_7"),
						(create_text_overlay, reg0, 3),
						(position_set_x, 1, 800),
						(position_set_y, 1, 800),
						(overlay_set_size, reg0, 1),
						(position_set_x, 1, 50),
						(position_set_y, 1, ":value_2"),
						(overlay_set_position, reg0, 1),
						(val_sub, ":value_2", 30),
					(try_end),
				(try_end),
				(store_sub, reg0, "$g_presentation_obj_bugdet_report_container", 1),
				(overlay_set_text, reg0, "@Assessed Profit by Town of Production"),
			(else_try),
				(eq, reg60, 2),
				(try_for_range, ":party", "p_town_1", "p_castle_1"),
					(assign, ":value_7", 0),
					(assign, ":value_8", 0),
					(try_for_range, ":number", 0, ":value"),
						(call_script, "script_cf_array_get_element", ":var_6", ":number"),
						(eq, ":party", reg0),
						(call_script, "script_cf_array_get_element", ":var_7", ":number"),
						(val_add, ":value_8", reg0),
						(val_add, ":value_7", 1),
					(try_end),
					(val_max, ":value_7", 1),
					(val_div, ":value_8", ":value_7"),
					(troop_set_slot, "trp_temp_array_b", ":party", ":value_8"),
				(try_end),
				(assign, ":value_9", 0),
				(try_for_range, ":number", "p_town_1", "p_castle_1"),
					(troop_get_slot, reg0, "trp_temp_array_b", ":number"),
					(lt, ":value_9", reg0),
					(assign, ":value_9", reg0),
				(try_end),
				(val_add, ":value_9", 1),
				(try_for_range_backwards, ":value_8", 0, ":value_9"),
					(try_for_range, ":party", "p_town_1", "p_castle_1"),
						(troop_slot_eq, "trp_temp_array_b", ":party", ":value_8"),
						(assign, ":value_7", 0),
						(str_clear, 3),
						(try_for_range, ":number", 0, ":value"),
							(call_script, "script_cf_array_get_element", ":var_6", ":number"),
							(eq, ":party", reg0),
							(val_add, ":value_7", 1),
							(call_script, "script_cf_array_get_element", ":var_3", ":number"),
							(str_store_date, 0, reg0),
							(call_script, "script_cf_array_get_element", ":var_5", ":number"),
							(str_store_item_name, 1, reg0),
							(call_script, "script_cf_array_get_element", ":var_4", ":number"),
							(str_store_party_name, 2, reg0),
							(call_script, "script_cf_array_get_element", ":var_7", ":number"),
							(str_store_string, 3, "@^{s1} purchased in {s2} would earn {reg0} denars (as of {s0}).{s3}"),
						(try_end),
						(ge, ":value_7", 1),
						(str_store_party_name, 1, ":party"),
						(str_store_string, 1, "@Demand in {s1}"),
						(create_text_overlay, reg0, 1),
						(position_set_x, 1, 1000),
						(position_set_y, 1, 1000),
						(overlay_set_size, reg0, 1),
						(position_set_x, 1, 25),
						(position_set_y, 1, ":value_2"),
						(overlay_set_position, reg0, 1),
						(val_mul, ":value_7", 14),
						(val_sub, ":value_2", ":value_7"),
						(create_text_overlay, reg0, 3),
						(position_set_x, 1, 800),
						(position_set_y, 1, 800),
						(overlay_set_size, reg0, 1),
						(position_set_x, 1, 50),
						(position_set_y, 1, ":value_2"),
						(overlay_set_position, reg0, 1),
						(val_sub, ":value_2", 30),
					(try_end),
				(try_end),
				(store_sub, reg0, "$g_presentation_obj_bugdet_report_container", 1),
				(overlay_set_text, reg0, "@Assessed Profit by Town of Demand"),
			(else_try),
				(eq, reg60, 3),
				(try_for_range, ":item", "itm_trade_spice", "itm_trade_dummy01"),
					(assign, ":value_7", 0),
					(assign, ":value_8", 0),
					(try_for_range, ":number", 0, ":value"),
						(call_script, "script_cf_array_get_element", ":var_5", ":number"),
						(eq, ":item", reg0),
						(call_script, "script_cf_array_get_element", ":var_7", ":number"),
						(val_add, ":value_8", reg0),
						(val_add, ":value_7", 1),
					(try_end),
					(val_max, ":value_7", 1),
					(val_div, ":value_8", ":value_7"),
					(troop_set_slot, "trp_temp_array_b", ":item", ":value_8"),
				(try_end),
				(assign, ":value_9", 0),
				(try_for_range, ":number", "itm_trade_spice", "itm_trade_dummy01"),
					(troop_get_slot, reg0, "trp_temp_array_b", ":number"),
					(lt, ":value_9", reg0),
					(assign, ":value_9", reg0),
				(try_end),
				(val_add, ":value_9", 1),
				(try_for_range_backwards, ":value_8", 0, ":value_9"),
					(try_for_range, ":item", "itm_trade_spice", "itm_trade_dummy01"),
						(troop_slot_eq, "trp_temp_array_b", ":item", ":value_8"),
						(assign, ":value_7", 0),
						(str_clear, 3),
						(try_for_range, ":number", 0, ":value"),
							(call_script, "script_cf_array_get_element", ":var_5", ":number"),
							(eq, ":item", reg0),
							(val_add, ":value_7", 1),
							(call_script, "script_cf_array_get_element", ":var_3", ":number"),
							(str_store_date, 0, reg0),
							(call_script, "script_cf_array_get_element", ":var_4", ":number"),
							(str_store_party_name, 1, reg0),
							(call_script, "script_cf_array_get_element", ":var_6", ":number"),
							(str_store_party_name, 2, reg0),
							(call_script, "script_cf_array_get_element", ":var_7", ":number"),
							(str_store_string, 3, "@^Buy in: {s1} - sell in: {s2} for {reg0} denars profit (as of {s0}).{s3}"),
						(try_end),
						(ge, ":value_7", 1),
						(str_store_item_name, 1, ":item"),
						(str_store_string, 1, "@Supply and Demand of {s1}"),
						(create_text_overlay, reg0, 1),
						(position_set_x, 1, 1000),
						(position_set_y, 1, 1000),
						(overlay_set_size, reg0, 1),
						(position_set_x, 1, 25),
						(position_set_y, 1, ":value_2"),
						(overlay_set_position, reg0, 1),
						(val_mul, ":value_7", 14),
						(val_sub, ":value_2", ":value_7"),
						(create_text_overlay, reg0, 3),
						(position_set_x, 1, 800),
						(position_set_y, 1, 800),
						(overlay_set_size, reg0, 1),
						(position_set_x, 1, 50),
						(position_set_y, 1, ":value_2"),
						(overlay_set_position, reg0, 1),
						(val_sub, ":value_2", 30),
					(try_end),
				(try_end),
				(store_sub, reg0, "$g_presentation_obj_bugdet_report_container", 1),
				(overlay_set_text, reg0, "@    Assessed Profit by Trade Good"),
			(else_try),
				(eq, reg60, 4),
				(assign, ":value_2", 750),
				(create_text_overlay, reg0, "@Trim ledger entries older than:              days:"),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 50),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(create_number_box_overlay, "$g_presentation_obj_custom_battle_designer_17", 3, 1001),
				(position_set_x, 1, 285),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_custom_battle_designer_17", 1),
				(overlay_set_val, "$g_presentation_obj_custom_battle_designer_17", 3),
				(val_sub, ":value_2", 30),
				(create_button_overlay, reg0, "@Remove entries."),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 290),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", 40),
				(create_text_overlay, reg0, "@Trim ledger entries covering the following trade good:"),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 50),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", 40),
				(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_16", "itm_trade_spice", "itm_trade_dummy01"),
				(position_set_x, 1, 200),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_custom_battle_designer_16", 1),
				(create_text_overlay, reg0, "@Use slider to choose item"),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 350),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", 30),
				(create_button_overlay, reg0, "@Remove entries."),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 290),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", 40),
				(create_text_overlay, reg0, "@Trim ledger entries for goods tied to this town:"),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 50),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", 40),
				(create_slider_overlay, "$g_presentation_obj_custom_battle_designer_15", "p_town_1", "p_castle_1"),
				(position_set_x, 1, 200),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_custom_battle_designer_15", 1),
				(create_text_overlay, reg0, "@Use slider to choose town"),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 350),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", 30),
				(create_button_overlay, reg0, "@Remove entries (Production)."),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 290),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", 20),
				(create_button_overlay, reg0, "@Remove entries (Demand)."),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 290),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", 40),
				(create_text_overlay, reg0, "@Trim ledger entries with less than:              denar profit:"),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 50),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(create_number_box_overlay, "$g_presentation_obj_custom_battle_designer_14", 10, 1001),
				(position_set_x, 1, 305),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, "$g_presentation_obj_custom_battle_designer_14", 1),
				(overlay_set_val, "$g_presentation_obj_custom_battle_designer_14", 10),
				(val_sub, ":value_2", 30),
				(create_button_overlay, reg0, "@Remove entries."),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 290),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", 60),
				(create_text_overlay, reg0, "@Ask about the potential profit of the following items^    every time you assess prices in a marketplace:"),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 50),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", 40),
				(call_script, "script_get_max_skill_of_player_party", "skl_trade"),
				(assign, ":var_23", reg0),
				(val_max, ":var_23", 1),
				(store_add, ":value_10", ":var_23", 5),
				(assign, ":value", ":value_10"),
				(try_begin),
					(call_script, "script_array_get_size", ":player_155"),
					(lt, reg0, ":value_10"),
					(val_sub, ":value_10", reg0),
					(try_for_range, ":unused", 0, ":value_10"),
						(call_script, "script_array_pushback", ":player_155", -1),
					(try_end),
				(try_end),
				(try_for_range, ":number", 5, ":value"),
					(create_slider_overlay, ":var_26", "itm_trade_spice", "itm_trade_dummy01"),
					(position_set_x, 1, 200),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, ":var_26", 1),
					(create_text_overlay, reg0, 0),
					(position_set_x, 1, 900),
					(position_set_y, 1, 900),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, 350),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(val_sub, ":value_2", 40),
					(troop_set_slot, "trp_temp_array_c", ":number", ":var_26"),
					(try_begin),
						(call_script, "script_cf_array_get_element", ":player_155", ":number"),
						(is_between, reg0, "itm_trade_spice", "itm_trade_dummy01"),
						(str_store_item_name, 0, reg0),
						(overlay_set_val, ":var_26", reg0),
					(else_try),
						(str_store_string, 0, "@Use slider to choose item"),
					(try_end),
					(val_add, ":var_26", 1),
					(overlay_set_text, ":var_26", 0),
				(try_end),
				(store_sub, reg0, "$g_presentation_obj_bugdet_report_container", 1),
				(overlay_set_text, reg0, "@           Log Entry Options"),
			(try_end),
			(set_container_overlay, -1),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(overlay_set_alpha, reg0, 48),
			(position_set_x, 1, 11550),
			(position_set_y, 1, 19500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 210),
			(overlay_set_position, reg0, 1),
			(str_store_party_name, 0, ":var_3"),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_18", 0, 131072),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_18", 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 210),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_18", 1),
			(position_set_x, 1, 230),
			(position_set_y, 1, 390),
			(overlay_set_area_size, "$g_presentation_obj_custom_battle_designer_18", 1),
			(create_button_overlay, reg0, "@Add Note"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 150),
			(overlay_set_position, reg0, 1),
			(create_button_overlay, reg0, "@Clear Notes"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 830),
			(position_set_y, 1, 150),
			(overlay_set_position, reg0, 1),
			(create_simple_text_box_overlay, reg0),
			(position_set_x, 1, 228),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 180),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Use a /\ (caret) for a line break."),
			(position_set_x, 1, 700),
			(position_set_y, 1, 700),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 730),
			(position_set_y, 1, 120),
			(overlay_set_position, reg0, 1),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_19", "@Chronological Log", 0),
			(position_set_x, 1, 260),
			(position_set_y, 1, 10),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_19", 1),
			(create_game_button_overlay, reg0, "@Production Towns", 0),
			(position_set_x, 1, 420),
			(position_set_y, 1, 10),
			(overlay_set_position, reg0, 1),
			(create_game_button_overlay, reg0, "@Purchasing Towns", 0),
			(position_set_x, 1, 580),
			(position_set_y, 1, 10),
			(overlay_set_position, reg0, 1),
			(create_game_button_overlay, reg0, "@Trade Goods", 0),
			(position_set_x, 1, 740),
			(position_set_y, 1, 10),
			(overlay_set_position, reg0, 1),
			(create_game_button_overlay, reg0, "@Manage Ledger", 0),
			(position_set_x, 1, 100),
			(position_set_y, 1, 10),
			(overlay_set_position, reg0, 1),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_20", "@Done", 0),
			(position_set_x, 1, 900),
			(position_set_y, 1, 10),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_20", 1),
			(str_clear, 0),
			(assign, reg56, 10),
			(assign, reg57, -1),
			(assign, reg58, -1),
			(assign, reg59, 3),
			(assign, "$g_date", ":var_1"),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(key_clicked, 1),
			(try_begin),
				(eq, reg60, 4),
				(call_script, "script_cf_trade_ledger_custom_assess_duplicates"),
			(try_end),
			(presentation_set_duration, 0)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_20"),
				(try_begin),
					(eq, reg60, 4),
					(call_script, "script_cf_trade_ledger_custom_assess_duplicates"),
				(try_end),
				(presentation_set_duration, 0),
			(else_try),
				(store_add, ":value", "$g_presentation_obj_custom_battle_designer_18", 1),
				(eq, ":trigger_param_1", ":value"),
				(neg|str_is_empty, 0),
				(troop_get_slot, ":player_155", "trp_player", 155),
				(ge, ":player_155", 1),
				(call_script, "script_array_get_element", ":player_155", 0),
				(str_store_party_name, 1, reg0),
				(str_store_string, 1, "@{s1}^+{s0}"),
				(party_set_name, reg0, 1),
				(overlay_set_text, "$g_presentation_obj_custom_battle_designer_18", 1),
				(str_clear, 0),
				(val_add, ":value", 2),
				(overlay_set_text, ":value", 0),
			(else_try),
				(store_add, ":value", "$g_presentation_obj_custom_battle_designer_18", 2),
				(eq, ":trigger_param_1", ":value"),
				(troop_get_slot, ":player_155", "trp_player", 155),
				(ge, ":player_155", 1),
				(call_script, "script_array_get_element", ":player_155", 0),
				(str_clear, 0),
				(party_set_name, reg0, 0),
				(overlay_set_text, "$g_presentation_obj_custom_battle_designer_18", 0),
			(else_try),
				(is_between, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_19", "$g_presentation_obj_custom_battle_designer_20"),
				(store_sub, ":value_2", ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_19"),
				(try_begin),
					(eq, reg60, 4),
					(call_script, "script_cf_trade_ledger_custom_assess_duplicates"),
				(try_end),
				(assign, reg60, ":value_2"),
				(start_presentation, "prsnt_trade_ledger_basic"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_17"),
				(assign, reg59, ":trigger_param_2"),
			(else_try),
				(store_add, ":value", "$g_presentation_obj_custom_battle_designer_17", 1),
				(eq, ":trigger_param_1", ":value"),
				(gt, reg59, 0),
				(call_script, "script_cf_trade_ledger_trim_entries", "trp_player", reg59, 0),
				(display_message, "@{reg0} entries removed from ledger."),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_16"),
				(is_between, ":trigger_param_2", "itm_trade_spice", "itm_trade_dummy01"),
				(assign, reg58, ":trigger_param_2"),
				(str_store_item_name, 0, ":trigger_param_2"),
				(overlay_set_val, ":trigger_param_1", ":trigger_param_2"),
				(val_add, ":trigger_param_1", 1),
				(overlay_set_text, ":trigger_param_1", 0),
			(else_try),
				(store_add, ":value", "$g_presentation_obj_custom_battle_designer_16", 2),
				(eq, ":trigger_param_1", ":value"),
				(is_between, reg58, "itm_trade_spice", "itm_trade_dummy01"),
				(call_script, "script_cf_trade_ledger_trim_entries", "trp_player", reg58, 2),
				(display_message, "@{reg0} entries removed from ledger."),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_15"),
				(is_between, ":trigger_param_2", "p_town_1", "p_castle_1"),
				(assign, reg57, ":trigger_param_2"),
				(str_store_party_name, 0, ":trigger_param_2"),
				(overlay_set_val, ":trigger_param_1", ":trigger_param_2"),
				(val_add, ":trigger_param_1", 1),
				(overlay_set_text, ":trigger_param_1", 0),
			(else_try),
				(store_add, ":value", "$g_presentation_obj_custom_battle_designer_15", 2),
				(eq, ":trigger_param_1", ":value"),
				(is_between, reg57, "p_town_1", "p_castle_1"),
				(store_sub, ":value", ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_15"),
				(call_script, "script_cf_trade_ledger_trim_entries", "trp_player", reg57, 1),
				(display_message, "@{reg0} entries removed from ledger."),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(is_between, reg57, "p_town_1", "p_castle_1"),
				(store_sub, ":value", ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_15"),
				(call_script, "script_cf_trade_ledger_trim_entries", "trp_player", reg57, 3),
				(display_message, "@{reg0} entries removed from ledger."),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_14"),
				(assign, reg56, ":trigger_param_2"),
			(else_try),
				(store_add, ":value", "$g_presentation_obj_custom_battle_designer_14", 1),
				(eq, ":trigger_param_1", ":value"),
				(gt, reg56, 0),
				(call_script, "script_cf_trade_ledger_trim_entries", "trp_player", reg56, 4),
				(display_message, "@{reg0} entries removed from ledger."),
			(else_try),
				(troop_get_slot, ":temp_array_c_met", "trp_temp_array_c", slot_troop_met),
				(is_between, ":trigger_param_1", ":temp_array_c_met", "$g_presentation_obj_custom_battle_designer_18"),
				(is_between, ":trigger_param_2", "itm_trade_spice", "itm_trade_dummy01"),
				(troop_get_slot, ":player_155", "trp_player", 155),
				(call_script, "script_array_get_size", ":player_155"),
				(val_add, reg0, 1),
				(try_for_range, ":number", 5, reg0),
					(troop_slot_eq, "trp_temp_array_c", ":number", ":trigger_param_1"),
					(assign, ":var_8", ":number"),
					(assign, reg0, 0),
				(try_end),
				(call_script, "script_cf_trade_ledger_custom_assess_item", ":trigger_param_2", ":var_8"),
				(str_store_item_name, 0, ":trigger_param_2"),
				(overlay_set_val, ":trigger_param_1", ":trigger_param_2"),
				(val_add, ":trigger_param_1", 1),
				(overlay_set_text, ":trigger_param_1", 0),
			(try_end)
		])
	]),

	("prebattle_custom_deployment", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_presentation_credits_obj_1", 0),
			(party_get_slot, ":main_party_center_accumulated_tariffs", "p_main_party", slot_center_accumulated_tariffs),
			(set_show_messages, 0),
			(call_script, "script_calculate_battle_advantage"),
			(assign, ":var_2", reg0),
			(set_show_messages, 1),
			(call_script, "script_party_count_members_with_full_health", "p_collective_friends"),
			(assign, ":var_3", reg0),
			(call_script, "script_party_count_members_with_full_health", "p_main_party"),
			(assign, ":var_4", reg0),
			(store_mul, ":value", ":var_4", 100),
			(val_div, ":value", ":var_3"),
			(store_sub, ":value_2", ":main_party_center_accumulated_tariffs", 30),
			(val_mul, ":value_2", 100),
			(val_div, ":value_2", 120),
			(assign, ":var_7", 12),
			(try_begin),
				(this_or_next|party_slot_eq, "$g_encountered_party", slot_party_type, 2),
				(party_slot_eq, "$g_encountered_party", slot_party_type, 3),
				(val_mul, ":var_2", 2),
				(val_div, ":var_2", 3),
				(val_add, ":var_7", 6),
				(eq, "$g_next_menu", "mnu_siege_started_defender"),
				(party_slot_eq, "$g_encountered_party", slot_center_siege_with_belfry, 1),
				(val_add, ":var_7", 2),
			(try_end),
			(val_mul, ":var_7", 100),
			(store_mul, ":value_3", ":value_2", 4),
			(val_add, ":value_3", 125),
			(val_add, ":var_2", 15),
			(val_mul, ":var_2", 100),
			(val_div, ":var_2", 15),
			(val_clamp, ":var_2", 20, 250),
			(val_mul, ":value_3", ":var_2"),
			(val_mul, ":value_3", ":var_7"),
			(val_div, ":value_3", 1000000),
			(val_add, ":value_3", 1),
			(store_mul, ":value_4", ":value_3", ":value"),
			(val_div, ":value_4", 100),
			(val_min, ":value_4", ":var_4"),
			(party_set_slot, "p_main_party", slot_town_wealth, ":value_4"),
			(create_text_overlay, reg0, "@Plan Deployment", 98320),
			(overlay_set_color, reg0, 4294967295),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 680),
			(overlay_set_position, reg0, 1),
			(party_get_slot, ":main_party_town_wealth", "p_main_party", slot_town_wealth),
			(assign, reg1, ":main_party_town_wealth"),
			(create_text_overlay, reg0, "@You will have {reg1} troops available at the battle's start", 32784),
			(position_set_x, 1, 500),
			(position_set_y, 1, 650),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Troop", 16),
			(position_set_x, 1, 105),
			(position_set_y, 1, 600),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@# at start  / # in party", 16),
			(position_set_x, 1, 385),
			(position_set_y, 1, 600),
			(overlay_set_position, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_bugdet_report_container", 0, 131072),
			(position_set_x, 1, 50),
			(position_set_y, 1, 100),
			(overlay_set_position, "$g_presentation_obj_bugdet_report_container", 1),
			(position_set_x, 1, 385),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_bugdet_report_container", 1),
			(set_container_overlay, "$g_presentation_obj_bugdet_report_container"),
			(assign, ":var_11", 0),
			(assign, ":var_12", 40),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(store_mul, ":value_5", ":num_companion_stacks_main_party", ":var_12"),
			(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
				(neq, ":party_stack_troop_id_main_party_number", "trp_player"),
				(party_stack_get_size, ":party_stack_size_main_party_number", "p_main_party", ":number"),
				(party_stack_get_num_wounded, ":party_stack_num_wounded_main_party_number", "p_main_party", ":number"),
				(val_sub, ":party_stack_size_main_party_number", ":party_stack_num_wounded_main_party_number"),
				(troop_get_slot, ":party_stack_troop_id_main_party_number_love_interest_3", ":party_stack_troop_id_main_party_number", slot_troop_love_interest_3),
				(val_min, ":party_stack_troop_id_main_party_number_love_interest_3", ":party_stack_size_main_party_number"),
				(troop_set_slot, ":party_stack_troop_id_main_party_number", slot_troop_love_interest_3, ":party_stack_troop_id_main_party_number_love_interest_3"),
				(val_add, ":var_11", ":party_stack_troop_id_main_party_number_love_interest_3"),
				(str_store_troop_name, 1, ":party_stack_troop_id_main_party_number"),
				(create_text_overlay, reg0, 1),
				(position_set_x, 1, 800),
				(position_set_y, 1, 800),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg0, 1),
				(assign, reg0, ":party_stack_size_main_party_number"),
				(str_store_string, 1, "@/ {reg0}"),
				(create_text_overlay, reg0, 1),
				(position_set_x, 1, 325),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg0, 1),
				(val_add, ":party_stack_size_main_party_number", 1),
				(create_number_box_overlay, reg0, 0, ":party_stack_size_main_party_number"),
				(overlay_set_val, reg0, ":party_stack_troop_id_main_party_number_love_interest_3"),
				(position_set_x, 1, 250),
				(position_set_y, 1, ":value_5"),
				(overlay_set_position, reg0, 1),
				(troop_set_slot, "trp_temp_array_a", ":party_stack_troop_id_main_party_number", reg0),
				(val_sub, ":value_5", ":var_12"),
			(try_end),
			(set_container_overlay, -1),
			(party_set_slot, "p_main_party", slot_town_prosperity, ":var_11"),
			(assign, reg0, ":var_11"),
			(create_text_overlay, reg60, "@{reg0}", 65536),
			(try_begin),
				(gt, ":var_11", ":main_party_town_wealth"),
				(overlay_set_color, reg60, 16716032),
			(else_try),
				(overlay_set_color, reg60, 16777215),
			(try_end),
			(position_set_x, 1, 290),
			(position_set_y, 1, 50),
			(overlay_set_position, reg60, 1),
			(assign, reg0, ":main_party_town_wealth"),
			(create_text_overlay, reg0, "@of {reg0} troops", 0),
			(position_set_x, 1, 330),
			(position_set_y, 1, 50),
			(overlay_set_position, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_pic_charge"),
			(position_set_x, 1, 700),
			(position_set_y, 1, 700),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 225),
			(position_set_y, 1, 50),
			(overlay_set_position, reg0, 1),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_19", "@Ready Troops", 0),
			(position_set_x, 1, 880),
			(position_set_y, 1, 15),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_19", 1),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_20", "@Reassess", 0),
			(position_set_x, 1, 722),
			(position_set_y, 1, 15),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_20", 1),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_18", "@Scrap All", 0),
			(position_set_x, 1, 565),
			(position_set_y, 1, 15),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_18", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
			(try_end),
			(party_get_slot, ":main_party_center_accumulated_tariffs", "p_main_party", slot_center_accumulated_tariffs),
			(this_or_next|lt, ":main_party_center_accumulated_tariffs", 30),
			(gt, ":main_party_center_accumulated_tariffs", 1000),
			(assign, "$g_presentation_credits_obj_1", 1),
			(start_presentation, "prsnt_prebattle_record_battle_size")
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_20"),
				(jump_to_menu, "$g_next_menu"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_18"),
				(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
				(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
					(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
					(neq, ":party_stack_troop_id_main_party_number", "trp_player"),
					(troop_get_slot, ":temp_array_a_party_stack_troop_id_main_party_number", "trp_temp_array_a", ":party_stack_troop_id_main_party_number"),
					(troop_set_slot, ":party_stack_troop_id_main_party_number", slot_troop_love_interest_3, 0),
					(overlay_set_val, ":temp_array_a_party_stack_troop_id_main_party_number", 0),
				(try_end),
				(party_set_slot, "p_main_party", slot_town_prosperity, 0),
				(overlay_set_text, reg60, "@0"),
				(overlay_set_color, reg60, 16777215),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_19"),
				(party_get_slot, ":main_party_town_prosperity", "p_main_party", slot_town_prosperity),
				(party_get_slot, ":main_party_town_wealth", "p_main_party", slot_town_wealth),
				(try_begin),
					(gt, ":main_party_town_prosperity", ":main_party_town_wealth"),
					(create_text_overlay, reg0, "@Too many troops^Check number available", 65552),
					(overlay_set_color, reg0, 16716032),
					(position_set_x, 1, 600),
					(position_set_y, 1, 500),
					(overlay_set_position, reg0, 1),
					(position_set_x, 1, 0),
					(position_set_y, 1, 0),
					(overlay_animate_to_size, reg0, 3000, 1),
				(else_try),
					(party_set_slot, "p_main_party", slot_center_accumulated_rents, 1),
					(jump_to_menu, "$g_next_menu"),
					(presentation_set_duration, 0),
				(try_end),
			(else_try),
				(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
				(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
					(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
					(neq, ":party_stack_troop_id_main_party_number", "trp_player"),
					(troop_slot_eq, "trp_temp_array_a", ":party_stack_troop_id_main_party_number", ":trigger_param_1"),
					(troop_get_slot, ":party_stack_troop_id_main_party_number_love_interest_3", ":party_stack_troop_id_main_party_number", slot_troop_love_interest_3),
					(assign, ":num_companion_stacks_main_party", 0),
				(try_end),
				(party_get_slot, ":main_party_town_prosperity", "p_main_party", slot_town_prosperity),
				(party_get_slot, ":main_party_town_wealth", "p_main_party", slot_town_wealth),
				(store_sub, ":value", ":trigger_param_2", ":party_stack_troop_id_main_party_number_love_interest_3"),
				(store_add, ":value_2", ":main_party_town_prosperity", ":value"),
				(try_begin),
					(gt, ":value_2", ":main_party_town_wealth"),
					(ge, ":value_2", ":main_party_town_prosperity"),
					(try_begin),
						(ge, ":main_party_town_prosperity", ":main_party_town_wealth"),
						(assign, ":value_3", ":party_stack_troop_id_main_party_number_love_interest_3"),
						(assign, ":value_2", ":main_party_town_prosperity"),
					(else_try),
						(store_sub, ":value_4", ":value_2", ":main_party_town_wealth"),
						(val_sub, ":value", ":value_4"),
						(val_max, ":value", 0),
						(store_add, ":value_3", ":trigger_param_2", ":value"),
						(store_add, ":value_2", ":main_party_town_prosperity", ":value"),
					(try_end),
					(overlay_set_val, ":trigger_param_1", ":value_3"),
					(troop_set_slot, ":party_stack_troop_id_main_party_number", slot_troop_love_interest_3, ":value_3"),
				(else_try),
					(troop_set_slot, ":party_stack_troop_id_main_party_number", slot_troop_love_interest_3, ":trigger_param_2"),
				(try_end),
				(assign, reg0, ":value_2"),
				(overlay_set_text, reg60, "@{reg0}"),
				(try_begin),
					(gt, ":value_2", ":main_party_town_wealth"),
					(overlay_set_color, reg60, 16716032),
				(else_try),
					(overlay_set_color, reg60, 16777215),
				(try_end),
				(party_set_slot, "p_main_party", slot_town_prosperity, ":value_2"),
			(try_end)
		])
	]),

	("prebattle_orders", 0, mesh_note_window_bottom, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_formation_group0_selected", 0),
			(assign, "$g_formation_group1_selected", 0),
			(assign, "$g_formation_group2_selected", 0),
			(assign, "$g_formation_group3_selected", 0),
			(assign, "$g_formation_group4_selected", 0),
			(assign, "$g_formation_group5_selected", 0),
			(assign, "$g_formation_group6_selected", 0),
			(assign, "$g_formation_group7_selected", 0),
			(assign, "$g_formation_group8_selected", 0),
			(assign, "$g_presentation_obj_battle_but0", -1),
			(assign, "$g_presentation_obj_battle_but1", -1),
			(assign, "$g_presentation_obj_battle_but2", -1),
			(assign, "$g_presentation_obj_battle_but3", -1),
			(assign, "$g_presentation_obj_battle_but4", -1),
			(assign, "$g_presentation_obj_battle_but5", -1),
			(assign, "$g_presentation_obj_battle_but6", -1),
			(assign, "$g_presentation_obj_battle_but7", -1),
			(assign, "$g_presentation_obj_battle_but8", -1),
			(str_clear, 7),
			(position_set_y, 1, 700),
			(create_text_overlay, "$g_presentation_credits_obj_2", "@Initial", 98320),
			(overlay_set_color, "$g_presentation_credits_obj_2", 4289374890),
			(position_set_x, 1, 225),
			(overlay_set_position, "$g_presentation_credits_obj_2", 1),
			(create_text_overlay, "$g_presentation_credits_obj_3", "@Movement 1", 98320),
			(overlay_set_color, "$g_presentation_credits_obj_3", 4289374890),
			(position_set_x, 1, 357),
			(overlay_set_position, "$g_presentation_credits_obj_3", 1),
			(create_text_overlay, "$g_presentation_credits_obj_4", "@Movement 2", 98320),
			(overlay_set_color, "$g_presentation_credits_obj_4", 4289374890),
			(position_set_x, 1, 487),
			(overlay_set_position, "$g_presentation_credits_obj_4", 1),
			(create_text_overlay, "$g_presentation_credits_obj_5", "@Formation", 98320),
			(overlay_set_color, "$g_presentation_credits_obj_5", 4289374890),
			(position_set_x, 1, 610),
			(overlay_set_position, "$g_presentation_credits_obj_5", 1),
			(create_text_overlay, "$g_presentation_credits_obj_6", "@Attack", 98320),
			(overlay_set_color, "$g_presentation_credits_obj_6", 4289374890),
			(position_set_x, 1, 225),
			(overlay_set_position, "$g_presentation_credits_obj_6", 1),
			(overlay_set_display, "$g_presentation_credits_obj_6", 0),
			(create_text_overlay, "$g_presentation_credits_obj_7", "@Weapon Type", 98320),
			(overlay_set_color, "$g_presentation_credits_obj_7", 4289374890),
			(position_set_x, 1, 360),
			(overlay_set_position, "$g_presentation_credits_obj_7", 1),
			(overlay_set_display, "$g_presentation_credits_obj_7", 0),
			(create_text_overlay, "$g_presentation_credits_obj_8", "@Shield", 98320),
			(overlay_set_color, "$g_presentation_credits_obj_8", 4289374890),
			(position_set_x, 1, 485),
			(overlay_set_position, "$g_presentation_credits_obj_8", 1),
			(overlay_set_display, "$g_presentation_credits_obj_8", 0),
			(create_text_overlay, "$g_presentation_credits_obj_9", "@Skirmish", 98320),
			(overlay_set_color, "$g_presentation_credits_obj_9", 4289374890),
			(position_set_x, 1, 600),
			(overlay_set_position, "$g_presentation_credits_obj_9", 1),
			(overlay_set_display, "$g_presentation_credits_obj_9", 0),
			(assign, "$group0_has_troops", 0),
			(assign, "$group1_has_troops", 0),
			(assign, "$group2_has_troops", 0),
			(assign, "$group3_has_troops", 0),
			(assign, "$group4_has_troops", 0),
			(assign, "$group5_has_troops", 0),
			(assign, "$group6_has_troops", 0),
			(assign, "$group7_has_troops", 0),
			(assign, "$group8_has_troops", 0),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(assign, "$num_classes", 0),
			(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
				(troop_get_class, ":class_party_stack_troop_id_main_party_number", ":party_stack_troop_id_main_party_number"),
				(neq, "trp_player", ":party_stack_troop_id_main_party_number"),
				(try_begin),
					(eq, ":class_party_stack_troop_id_main_party_number", 0),
					(try_begin),
						(neq, "$group0_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group0_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_number", 1),
					(try_begin),
						(neq, "$group1_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group1_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_number", 2),
					(try_begin),
						(neq, "$group2_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group2_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_number", 3),
					(try_begin),
						(neq, "$group3_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group3_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_number", 4),
					(try_begin),
						(neq, "$group4_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group4_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_number", 5),
					(try_begin),
						(neq, "$group5_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group5_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_number", 6),
					(try_begin),
						(neq, "$group6_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group6_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_number", 7),
					(try_begin),
						(neq, "$group7_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group7_has_troops", 1),
				(else_try),
					(eq, ":class_party_stack_troop_id_main_party_number", 8),
					(try_begin),
						(neq, "$group8_has_troops", 1),
						(val_add, "$num_classes", 1),
					(try_end),
					(assign, "$group8_has_troops", 1),
				(try_end),
			(try_end),
			(assign, ":var_5", 0),
			(assign, ":var_6", 653),
			(assign, ":var_7", 20),
			(assign, ":var_8", 662),
			(assign, ":var_9", 50),
			(assign, ":var_10", 660),
			(assign, ":var_11", 660),
			(try_begin),
				(eq, "$group0_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but0", "mesh_white_plane", "mesh_white_plane"),
				(val_add, ":var_5", 15),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_position, "$g_presentation_obj_battle_but0", 1),
				(val_add, ":var_5", -15),
				(val_add, ":var_6", -40),
				(position_set_x, 1, 32650),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but0", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but0", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but0", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check0", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check0", 2),
				(val_add, ":var_8", -40),
				(str_store_class_name, 7, 0),
				(create_text_overlay, "$g_presentation_obj_battle_name0", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name0", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but0_movement", "str_space", 16),
				(create_text_overlay, "$g_presentation_but0_riding", "str_space", 16),
				(create_text_overlay, "$g_presentation_but0_weapon_usage", "str_space", 16),
				(create_text_overlay, reg6, "str_space", 16),
				(create_text_overlay, reg15, "str_space", 16),
				(create_text_overlay, reg24, "str_space", 16),
				(create_text_overlay, reg33, "str_space", 16),
				(create_text_overlay, reg42, "str_space", 16),
				(position_set_x, 1, 950),
				(position_set_y, 1, 950),
				(overlay_set_size, "$g_presentation_but0_movement", 1),
				(overlay_set_size, "$g_presentation_but0_riding", 1),
				(overlay_set_size, "$g_presentation_but0_weapon_usage", 1),
				(overlay_set_size, reg6, 1),
				(overlay_set_size, reg15, 1),
				(overlay_set_size, reg24, 1),
				(overlay_set_size, reg33, 1),
				(overlay_set_size, reg42, 1),
				(overlay_set_display, reg15, 0),
				(overlay_set_display, reg24, 0),
				(overlay_set_display, reg33, 0),
				(overlay_set_display, reg42, 0),
				(position_set_y, 1, ":var_11"),
				(position_set_x, 1, 225),
				(overlay_set_position, "$g_presentation_but0_movement", 1),
				(position_set_x, 1, 355),
				(overlay_set_position, "$g_presentation_but0_riding", 1),
				(position_set_x, 1, 485),
				(overlay_set_position, "$g_presentation_but0_weapon_usage", 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg6, 1),
				(position_set_x, 1, 225),
				(overlay_set_position, reg15, 1),
				(position_set_x, 1, 355),
				(overlay_set_position, reg24, 1),
				(position_set_x, 1, 485),
				(overlay_set_position, reg33, 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg42, 1),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_1", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_1", 1),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_11", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_11", 1),
			(try_end),
			(try_begin),
				(eq, "$group1_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but1", "mesh_white_plane", "mesh_white_plane"),
				(val_add, ":var_5", 15),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_position, "$g_presentation_obj_battle_but1", 1),
				(val_add, ":var_6", -40),
				(val_add, ":var_5", -15),
				(position_set_x, 1, 32650),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but1", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but1", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but1", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check1", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check1", 2),
				(val_add, ":var_8", -40),
				(str_store_class_name, 7, 1),
				(create_text_overlay, "$g_presentation_obj_battle_name1", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name1", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but1_movement", "str_space", 16),
				(create_text_overlay, "$g_presentation_but1_riding", "str_space", 16),
				(create_text_overlay, "$g_presentation_but1_weapon_usage", "str_space", 16),
				(create_text_overlay, reg7, "str_space", 16),
				(create_text_overlay, reg16, "str_space", 16),
				(create_text_overlay, reg25, "str_space", 16),
				(create_text_overlay, reg34, "str_space", 16),
				(create_text_overlay, reg43, "str_space", 16),
				(position_set_x, 1, 950),
				(position_set_y, 1, 950),
				(overlay_set_size, "$g_presentation_but1_movement", 1),
				(overlay_set_size, "$g_presentation_but1_riding", 1),
				(overlay_set_size, "$g_presentation_but1_weapon_usage", 1),
				(overlay_set_size, reg7, 1),
				(overlay_set_size, reg16, 1),
				(overlay_set_size, reg25, 1),
				(overlay_set_size, reg34, 1),
				(overlay_set_size, reg43, 1),
				(overlay_set_display, reg16, 0),
				(overlay_set_display, reg25, 0),
				(overlay_set_display, reg34, 0),
				(overlay_set_display, reg43, 0),
				(position_set_y, 1, ":var_11"),
				(position_set_x, 1, 225),
				(overlay_set_position, "$g_presentation_but1_movement", 1),
				(position_set_x, 1, 355),
				(overlay_set_position, "$g_presentation_but1_riding", 1),
				(position_set_x, 1, 485),
				(overlay_set_position, "$g_presentation_but1_weapon_usage", 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg7, 1),
				(position_set_x, 1, 225),
				(overlay_set_position, reg16, 1),
				(position_set_x, 1, 355),
				(overlay_set_position, reg25, 1),
				(position_set_x, 1, 485),
				(overlay_set_position, reg34, 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg43, 1),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_2", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_2", 1),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_12", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_12", 1),
			(try_end),
			(try_begin),
				(eq, "$group2_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but2", "mesh_white_plane", "mesh_white_plane"),
				(val_add, ":var_5", 15),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_position, "$g_presentation_obj_battle_but2", 1),
				(val_add, ":var_6", -40),
				(val_add, ":var_5", -15),
				(position_set_x, 1, 32650),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but2", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but2", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but2", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check2", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check2", 2),
				(val_add, ":var_8", -40),
				(str_store_class_name, 7, 2),
				(create_text_overlay, "$g_presentation_obj_battle_name2", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name2", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but2_movement", "str_space", 16),
				(create_text_overlay, "$g_presentation_but2_riding", "str_space", 16),
				(create_text_overlay, "$g_presentation_but2_weapon_usage", "str_space", 16),
				(create_text_overlay, reg8, "str_space", 16),
				(create_text_overlay, reg17, "str_space", 16),
				(create_text_overlay, reg26, "str_space", 16),
				(create_text_overlay, reg35, "str_space", 16),
				(create_text_overlay, reg44, "str_space", 16),
				(position_set_x, 1, 950),
				(position_set_y, 1, 950),
				(overlay_set_size, "$g_presentation_but2_movement", 1),
				(overlay_set_size, "$g_presentation_but2_riding", 1),
				(overlay_set_size, "$g_presentation_but2_weapon_usage", 1),
				(overlay_set_size, reg8, 1),
				(overlay_set_size, reg17, 1),
				(overlay_set_size, reg26, 1),
				(overlay_set_size, reg35, 1),
				(overlay_set_size, reg44, 1),
				(overlay_set_display, reg17, 0),
				(overlay_set_display, reg26, 0),
				(overlay_set_display, reg35, 0),
				(overlay_set_display, reg44, 0),
				(position_set_y, 1, ":var_11"),
				(position_set_x, 1, 225),
				(overlay_set_position, "$g_presentation_but2_movement", 1),
				(position_set_x, 1, 355),
				(overlay_set_position, "$g_presentation_but2_riding", 1),
				(position_set_x, 1, 485),
				(overlay_set_position, "$g_presentation_but2_weapon_usage", 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg8, 1),
				(position_set_x, 1, 225),
				(overlay_set_position, reg17, 1),
				(position_set_x, 1, 355),
				(overlay_set_position, reg26, 1),
				(position_set_x, 1, 485),
				(overlay_set_position, reg35, 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg44, 1),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_3", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_3", 1),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_13", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_13", 1),
			(try_end),
			(try_begin),
				(eq, "$group3_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but3", "mesh_white_plane", "mesh_white_plane"),
				(val_add, ":var_5", 15),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_position, "$g_presentation_obj_battle_but3", 1),
				(val_add, ":var_6", -40),
				(val_add, ":var_5", -15),
				(position_set_x, 1, 32650),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but3", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but3", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but3", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check3", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check3", 2),
				(val_add, ":var_8", -40),
				(str_store_class_name, 7, 3),
				(create_text_overlay, "$g_presentation_obj_battle_name3", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name3", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but3_movement", "str_space", 16),
				(create_text_overlay, "$g_presentation_but3_riding", "str_space", 16),
				(create_text_overlay, "$g_presentation_but3_weapon_usage", "str_space", 16),
				(create_text_overlay, reg9, "str_space", 16),
				(create_text_overlay, reg18, "str_space", 16),
				(create_text_overlay, reg27, "str_space", 16),
				(create_text_overlay, reg36, "str_space", 16),
				(create_text_overlay, reg45, "str_space", 16),
				(position_set_x, 1, 950),
				(position_set_y, 1, 950),
				(overlay_set_size, "$g_presentation_but3_movement", 1),
				(overlay_set_size, "$g_presentation_but3_riding", 1),
				(overlay_set_size, "$g_presentation_but3_weapon_usage", 1),
				(overlay_set_size, reg9, 1),
				(overlay_set_size, reg18, 1),
				(overlay_set_size, reg27, 1),
				(overlay_set_size, reg36, 1),
				(overlay_set_size, reg45, 1),
				(overlay_set_display, reg18, 0),
				(overlay_set_display, reg27, 0),
				(overlay_set_display, reg36, 0),
				(overlay_set_display, reg45, 0),
				(position_set_y, 1, ":var_11"),
				(position_set_x, 1, 225),
				(overlay_set_position, "$g_presentation_but3_movement", 1),
				(position_set_x, 1, 355),
				(overlay_set_position, "$g_presentation_but3_riding", 1),
				(position_set_x, 1, 485),
				(overlay_set_position, "$g_presentation_but3_weapon_usage", 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg9, 1),
				(position_set_x, 1, 225),
				(overlay_set_position, reg18, 1),
				(position_set_x, 1, 355),
				(overlay_set_position, reg27, 1),
				(position_set_x, 1, 485),
				(overlay_set_position, reg36, 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg45, 1),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_4", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_4", 1),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_14", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_14", 1),
			(try_end),
			(try_begin),
				(eq, "$group4_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but4", "mesh_white_plane", "mesh_white_plane"),
				(val_add, ":var_5", 15),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_position, "$g_presentation_obj_battle_but4", 1),
				(val_add, ":var_6", -40),
				(val_add, ":var_5", -15),
				(position_set_x, 1, 32650),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but4", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but4", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but4", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check4", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check4", 2),
				(val_add, ":var_8", -40),
				(str_store_class_name, 7, 4),
				(create_text_overlay, "$g_presentation_obj_battle_name4", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name4", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but4_movement", "str_space", 16),
				(create_text_overlay, "$g_presentation_but4_riding", "str_space", 16),
				(create_text_overlay, "$g_presentation_but4_weapon_usage", "str_space", 16),
				(create_text_overlay, reg10, "str_space", 16),
				(create_text_overlay, reg19, "str_space", 16),
				(create_text_overlay, reg28, "str_space", 16),
				(create_text_overlay, reg37, "str_space", 16),
				(create_text_overlay, reg46, "str_space", 16),
				(position_set_x, 1, 950),
				(position_set_y, 1, 950),
				(overlay_set_size, "$g_presentation_but4_movement", 1),
				(overlay_set_size, "$g_presentation_but4_riding", 1),
				(overlay_set_size, "$g_presentation_but4_weapon_usage", 1),
				(overlay_set_size, reg10, 1),
				(overlay_set_size, reg19, 1),
				(overlay_set_size, reg28, 1),
				(overlay_set_size, reg37, 1),
				(overlay_set_size, reg46, 1),
				(overlay_set_display, reg19, 0),
				(overlay_set_display, reg28, 0),
				(overlay_set_display, reg37, 0),
				(overlay_set_display, reg46, 0),
				(position_set_y, 1, ":var_11"),
				(position_set_x, 1, 225),
				(overlay_set_position, "$g_presentation_but4_movement", 1),
				(position_set_x, 1, 355),
				(overlay_set_position, "$g_presentation_but4_riding", 1),
				(position_set_x, 1, 485),
				(overlay_set_position, "$g_presentation_but4_weapon_usage", 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg10, 1),
				(position_set_x, 1, 225),
				(overlay_set_position, reg19, 1),
				(position_set_x, 1, 355),
				(overlay_set_position, reg28, 1),
				(position_set_x, 1, 485),
				(overlay_set_position, reg37, 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg46, 1),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_5", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_5", 1),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_15", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_15", 1),
			(try_end),
			(try_begin),
				(eq, "$group5_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but5", "mesh_white_plane", "mesh_white_plane"),
				(val_add, ":var_5", 15),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_position, "$g_presentation_obj_battle_but5", 1),
				(val_add, ":var_6", -40),
				(val_add, ":var_5", -15),
				(position_set_x, 1, 32650),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but5", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but5", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but5", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check5", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check5", 2),
				(val_add, ":var_8", -40),
				(str_store_class_name, 7, 5),
				(create_text_overlay, "$g_presentation_obj_battle_name5", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name5", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but5_movement", "str_space", 16),
				(create_text_overlay, "$g_presentation_but5_riding", "str_space", 16),
				(create_text_overlay, "$g_presentation_but5_weapon_usage", "str_space", 16),
				(create_text_overlay, reg11, "str_space", 16),
				(create_text_overlay, reg20, "str_space", 16),
				(create_text_overlay, reg29, "str_space", 16),
				(create_text_overlay, reg38, "str_space", 16),
				(create_text_overlay, reg47, "str_space", 16),
				(position_set_x, 1, 950),
				(position_set_y, 1, 950),
				(overlay_set_size, "$g_presentation_but5_movement", 1),
				(overlay_set_size, "$g_presentation_but5_riding", 1),
				(overlay_set_size, "$g_presentation_but5_weapon_usage", 1),
				(overlay_set_size, reg11, 1),
				(overlay_set_size, reg20, 1),
				(overlay_set_size, reg29, 1),
				(overlay_set_size, reg38, 1),
				(overlay_set_size, reg47, 1),
				(overlay_set_display, reg20, 0),
				(overlay_set_display, reg29, 0),
				(overlay_set_display, reg38, 0),
				(overlay_set_display, reg47, 0),
				(position_set_y, 1, ":var_11"),
				(position_set_x, 1, 225),
				(overlay_set_position, "$g_presentation_but5_movement", 1),
				(position_set_x, 1, 355),
				(overlay_set_position, "$g_presentation_but5_riding", 1),
				(position_set_x, 1, 485),
				(overlay_set_position, "$g_presentation_but5_weapon_usage", 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg11, 1),
				(position_set_x, 1, 225),
				(overlay_set_position, reg20, 1),
				(position_set_x, 1, 355),
				(overlay_set_position, reg29, 1),
				(position_set_x, 1, 485),
				(overlay_set_position, reg38, 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg47, 1),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_6", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_6", 1),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_16", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_16", 1),
			(try_end),
			(try_begin),
				(eq, "$group6_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but6", "mesh_white_plane", "mesh_white_plane"),
				(val_add, ":var_5", 15),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_position, "$g_presentation_obj_battle_but6", 1),
				(val_add, ":var_6", -40),
				(val_add, ":var_5", -15),
				(position_set_x, 1, 32650),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but6", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but6", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but6", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check6", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check6", 2),
				(val_add, ":var_8", -40),
				(str_store_class_name, 7, 6),
				(create_text_overlay, "$g_presentation_obj_battle_name6", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name6", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but6_movement", "str_space", 16),
				(create_text_overlay, "$g_presentation_but6_riding", "str_space", 16),
				(create_text_overlay, "$g_presentation_but6_weapon_usage", "str_space", 16),
				(create_text_overlay, reg12, "str_space", 16),
				(create_text_overlay, reg21, "str_space", 16),
				(create_text_overlay, reg30, "str_space", 16),
				(create_text_overlay, reg39, "str_space", 16),
				(create_text_overlay, reg48, "str_space", 16),
				(position_set_x, 1, 950),
				(position_set_y, 1, 950),
				(overlay_set_size, "$g_presentation_but6_movement", 1),
				(overlay_set_size, "$g_presentation_but6_riding", 1),
				(overlay_set_size, "$g_presentation_but6_weapon_usage", 1),
				(overlay_set_size, reg12, 1),
				(overlay_set_size, reg21, 1),
				(overlay_set_size, reg30, 1),
				(overlay_set_size, reg39, 1),
				(overlay_set_size, reg48, 1),
				(overlay_set_display, reg21, 0),
				(overlay_set_display, reg30, 0),
				(overlay_set_display, reg39, 0),
				(overlay_set_display, reg48, 0),
				(position_set_y, 1, ":var_11"),
				(position_set_x, 1, 225),
				(overlay_set_position, "$g_presentation_but6_movement", 1),
				(position_set_x, 1, 355),
				(overlay_set_position, "$g_presentation_but6_riding", 1),
				(position_set_x, 1, 485),
				(overlay_set_position, "$g_presentation_but6_weapon_usage", 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg12, 1),
				(position_set_x, 1, 225),
				(overlay_set_position, reg21, 1),
				(position_set_x, 1, 355),
				(overlay_set_position, reg30, 1),
				(position_set_x, 1, 485),
				(overlay_set_position, reg39, 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg48, 1),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_7", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_7", 1),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_17", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_17", 1),
			(try_end),
			(try_begin),
				(eq, "$group7_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but7", "mesh_white_plane", "mesh_white_plane"),
				(val_add, ":var_5", 15),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_position, "$g_presentation_obj_battle_but7", 1),
				(val_add, ":var_6", -40),
				(val_add, ":var_5", -15),
				(position_set_x, 1, 32650),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but7", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but7", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but7", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check7", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check7", 2),
				(val_add, ":var_8", -40),
				(str_store_class_name, 7, 7),
				(create_text_overlay, "$g_presentation_obj_battle_name7", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name7", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but7_movement", "str_space", 16),
				(create_text_overlay, "$g_presentation_but7_riding", "str_space", 16),
				(create_text_overlay, "$g_presentation_but7_weapon_usage", "str_space", 16),
				(create_text_overlay, reg13, "str_space", 16),
				(create_text_overlay, reg22, "str_space", 16),
				(create_text_overlay, reg31, "str_space", 16),
				(create_text_overlay, reg40, "str_space", 16),
				(create_text_overlay, reg49, "str_space", 16),
				(position_set_x, 1, 950),
				(position_set_y, 1, 950),
				(overlay_set_size, "$g_presentation_but7_movement", 1),
				(overlay_set_size, "$g_presentation_but7_riding", 1),
				(overlay_set_size, "$g_presentation_but7_weapon_usage", 1),
				(overlay_set_size, reg13, 1),
				(overlay_set_size, reg22, 1),
				(overlay_set_size, reg31, 1),
				(overlay_set_size, reg40, 1),
				(overlay_set_size, reg49, 1),
				(overlay_set_display, reg22, 0),
				(overlay_set_display, reg31, 0),
				(overlay_set_display, reg40, 0),
				(overlay_set_display, reg49, 0),
				(position_set_y, 1, ":var_11"),
				(position_set_x, 1, 225),
				(overlay_set_position, "$g_presentation_but7_movement", 1),
				(position_set_x, 1, 355),
				(overlay_set_position, "$g_presentation_but7_riding", 1),
				(position_set_x, 1, 485),
				(overlay_set_position, "$g_presentation_but7_weapon_usage", 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg13, 1),
				(position_set_x, 1, 225),
				(overlay_set_position, reg22, 1),
				(position_set_x, 1, 355),
				(overlay_set_position, reg31, 1),
				(position_set_x, 1, 485),
				(overlay_set_position, reg40, 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg49, 1),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_8", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_8", 1),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_18", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_18", 1),
			(try_end),
			(try_begin),
				(eq, "$group8_has_troops", 1),
				(create_image_button_overlay, "$g_presentation_obj_battle_but8", "mesh_white_plane", "mesh_white_plane"),
				(val_add, ":var_5", 15),
				(position_set_x, 1, ":var_5"),
				(position_set_y, 1, ":var_6"),
				(overlay_set_position, "$g_presentation_obj_battle_but8", 1),
				(val_add, ":var_6", -40),
				(val_add, ":var_5", -15),
				(position_set_x, 1, 32650),
				(position_set_y, 1, 2000),
				(overlay_set_size, "$g_presentation_obj_battle_but8", 1),
				(overlay_set_alpha, "$g_presentation_obj_battle_but8", 0),
				(overlay_set_color, "$g_presentation_obj_battle_but8", 16776960),
				(create_check_box_overlay, "$g_presentation_obj_battle_check8", "mesh_checkbox_off", "mesh_checkbox_on"),
				(position_set_x, 2, ":var_7"),
				(position_set_y, 2, ":var_8"),
				(overlay_set_position, "$g_presentation_obj_battle_check8", 2),
				(val_add, ":var_8", -40),
				(str_store_class_name, 7, 8),
				(create_text_overlay, "$g_presentation_obj_battle_name8", 7, 0),
				(position_set_x, 3, ":var_9"),
				(position_set_y, 3, ":var_10"),
				(overlay_set_position, "$g_presentation_obj_battle_name8", 3),
				(val_add, ":var_10", -40),
				(create_text_overlay, "$g_presentation_but8_movement", "str_space", 16),
				(create_text_overlay, "$g_presentation_but8_riding", "str_space", 16),
				(create_text_overlay, "$g_presentation_but8_weapon_usage", "str_space", 16),
				(create_text_overlay, reg14, "str_space", 16),
				(create_text_overlay, reg23, "str_space", 16),
				(create_text_overlay, reg32, "str_space", 16),
				(create_text_overlay, reg41, "str_space", 16),
				(create_text_overlay, reg50, "str_space", 16),
				(position_set_x, 1, 950),
				(position_set_y, 1, 950),
				(overlay_set_size, "$g_presentation_but8_movement", 1),
				(overlay_set_size, "$g_presentation_but8_riding", 1),
				(overlay_set_size, "$g_presentation_but8_weapon_usage", 1),
				(overlay_set_size, reg14, 1),
				(overlay_set_size, reg23, 1),
				(overlay_set_size, reg32, 1),
				(overlay_set_size, reg41, 1),
				(overlay_set_size, reg50, 1),
				(overlay_set_display, reg23, 0),
				(overlay_set_display, reg32, 0),
				(overlay_set_display, reg41, 0),
				(overlay_set_display, reg50, 0),
				(position_set_y, 1, ":var_11"),
				(position_set_x, 1, 225),
				(overlay_set_position, "$g_presentation_but8_movement", 1),
				(position_set_x, 1, 355),
				(overlay_set_position, "$g_presentation_but8_riding", 1),
				(position_set_x, 1, 485),
				(overlay_set_position, "$g_presentation_but8_weapon_usage", 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg14, 1),
				(position_set_x, 1, 225),
				(overlay_set_position, reg23, 1),
				(position_set_x, 1, 355),
				(overlay_set_position, reg32, 1),
				(position_set_x, 1, 485),
				(overlay_set_position, reg41, 1),
				(position_set_x, 1, 605),
				(overlay_set_position, reg50, 1),
				(val_add, ":var_11", -40),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_9", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_9", 1),
				(create_text_overlay, "$g_presentation_obj_custom_battle_designer_19", "str_space"),
				(position_set_x, 1, 600),
				(position_set_y, 1, 600),
				(overlay_set_size, "$g_presentation_obj_custom_battle_designer_19", 1),
			(try_end),
			(assign, ":var_12", 640),
			(assign, ":var_13", "$num_classes"),
			(val_mul, ":var_13", -40),
			(val_add, ":var_12", ":var_13"),
			(val_sub, ":var_12", 50),
			(create_listbox_overlay, "$g_presentation_obj_battle_10", "str_space", 0),
			(create_listbox_overlay, "$g_presentation_obj_battle_11", "str_space", 0),
			(create_listbox_overlay, "$g_presentation_obj_battle_12", "str_space", 0),
			(create_listbox_overlay, "$g_presentation_obj_battle_17", "str_space", 0),
			(create_listbox_overlay, "$g_presentation_obj_battle_13", "str_space", 0),
			(create_listbox_overlay, "$g_presentation_obj_battle_14", "str_space", 0),
			(create_listbox_overlay, "$g_presentation_obj_battle_15", "str_space", 0),
			(create_listbox_overlay, "$g_presentation_obj_battle_16", "str_space", 0),
			(overlay_add_item, "$g_presentation_obj_battle_10", "@Stand Ground"),
			(overlay_add_item, "$g_presentation_obj_battle_10", "@Charge"),
			(overlay_add_item, "$g_presentation_obj_battle_10", "@Follow Me"),
			(overlay_add_item, "$g_presentation_obj_battle_10", "@Hold Position"),
			(overlay_add_item, "$g_presentation_obj_battle_10", "@None"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_10", 1),
			(position_set_x, 1, 170),
			(position_set_y, 1, ":var_12"),
			(overlay_set_position, "$g_presentation_obj_battle_10", 1),
			(overlay_set_color, "$g_presentation_obj_battle_10", 16711680),
			(overlay_set_alpha, "$g_presentation_obj_battle_10", 96),
			(overlay_set_val, "$g_presentation_obj_battle_10", 4),
			(overlay_add_item, "$g_presentation_obj_battle_11", "@Dismount"),
			(overlay_add_item, "$g_presentation_obj_battle_11", "@Mount"),
			(overlay_add_item, "$g_presentation_obj_battle_11", "@Spread Out"),
			(overlay_add_item, "$g_presentation_obj_battle_11", "@Stand Closer"),
			(overlay_add_item, "$g_presentation_obj_battle_11", "@Back 10"),
			(overlay_add_item, "$g_presentation_obj_battle_11", "@Forward 10"),
			(overlay_add_item, "$g_presentation_obj_battle_11", "@None"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_11", 1),
			(position_set_x, 1, 305),
			(val_add, ":var_12", -35),
			(position_set_y, 1, ":var_12"),
			(overlay_set_position, "$g_presentation_obj_battle_11", 1),
			(overlay_set_color, "$g_presentation_obj_battle_11", 16737792),
			(overlay_set_alpha, "$g_presentation_obj_battle_11", 96),
			(overlay_set_val, "$g_presentation_obj_battle_11", 6),
			(val_add, ":var_12", -50),
			(create_number_box_overlay, reg51, 1, 5),
			(create_number_box_overlay, reg52, 1, 5),
			(overlay_set_val, reg51, 1),
			(overlay_set_val, reg52, 1),
			(position_set_x, 1, 320),
			(position_set_y, 1, ":var_12"),
			(overlay_set_position, reg51, 1),
			(position_set_x, 1, 452),
			(overlay_set_position, reg52, 1),
			(assign, reg53, 0),
			(assign, reg54, 0),
			(create_text_overlay, reg0, "@Repeat x"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 295),
			(val_add, ":var_12", 25),
			(position_set_y, 1, ":var_12"),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Repeat x"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 422),
			(position_set_y, 1, ":var_12"),
			(overlay_set_position, reg0, 1),
			(val_add, ":var_12", 25),
			(overlay_add_item, "$g_presentation_obj_battle_12", "@Dismount"),
			(overlay_add_item, "$g_presentation_obj_battle_12", "@Mount"),
			(overlay_add_item, "$g_presentation_obj_battle_12", "@Spread Out"),
			(overlay_add_item, "$g_presentation_obj_battle_12", "@Stand Closer"),
			(overlay_add_item, "$g_presentation_obj_battle_12", "@Back 10"),
			(overlay_add_item, "$g_presentation_obj_battle_12", "@Forward 10"),
			(overlay_add_item, "$g_presentation_obj_battle_12", "@None"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_12", 1),
			(position_set_x, 1, 430),
			(position_set_y, 1, ":var_12"),
			(overlay_set_position, "$g_presentation_obj_battle_12", 1),
			(overlay_set_color, "$g_presentation_obj_battle_12", 16737792),
			(overlay_set_alpha, "$g_presentation_obj_battle_12", 96),
			(overlay_set_val, "$g_presentation_obj_battle_12", 6),
			(val_add, ":var_12", 35),
			(overlay_add_item, "$g_presentation_obj_battle_17", "@Square"),
			(overlay_add_item, "$g_presentation_obj_battle_17", "@Wedge"),
			(overlay_add_item, "$g_presentation_obj_battle_17", "@Shieldwall"),
			(overlay_add_item, "$g_presentation_obj_battle_17", "@Ranks"),
			(overlay_add_item, "$g_presentation_obj_battle_17", "@None"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_17", 1),
			(position_set_x, 1, 555),
			(position_set_y, 1, ":var_12"),
			(overlay_set_position, "$g_presentation_obj_battle_17", 1),
			(overlay_set_color, "$g_presentation_obj_battle_17", 16737792),
			(overlay_set_alpha, "$g_presentation_obj_battle_17", 96),
			(overlay_set_val, "$g_presentation_obj_battle_17", 4),
			(overlay_add_item, "$g_presentation_obj_battle_13", "@Fire At Will"),
			(overlay_add_item, "$g_presentation_obj_battle_13", "@Hold Your Fire"),
			(overlay_add_item, "$g_presentation_obj_battle_13", "@Use Blunt Weapons"),
			(overlay_add_item, "$g_presentation_obj_battle_13", "@Use Any Weapon"),
			(overlay_add_item, "$g_presentation_obj_battle_13", "@None"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_13", 1),
			(position_set_x, 1, 175),
			(position_set_y, 1, ":var_12"),
			(overlay_set_position, "$g_presentation_obj_battle_13", 1),
			(overlay_set_alpha, "$g_presentation_obj_battle_13", 96),
			(overlay_set_val, "$g_presentation_obj_battle_13", 4),
			(overlay_set_display, "$g_presentation_obj_battle_13", 0),
			(overlay_add_item, "$g_presentation_obj_battle_14", "@Ranged"),
			(overlay_add_item, "$g_presentation_obj_battle_14", "@Polearms"),
			(overlay_add_item, "$g_presentation_obj_battle_14", "@Two Handed"),
			(overlay_add_item, "$g_presentation_obj_battle_14", "@One Handed"),
			(overlay_add_item, "$g_presentation_obj_battle_14", "@None"),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_14", 1),
			(position_set_x, 1, 305),
			(position_set_y, 1, ":var_12"),
			(overlay_set_position, "$g_presentation_obj_battle_14", 1),
			(overlay_set_alpha, "$g_presentation_obj_battle_14", 96),
			(overlay_set_val, "$g_presentation_obj_battle_14", 4),
			(overlay_set_display, "$g_presentation_obj_battle_14", 0),
			(overlay_add_item, "$g_presentation_obj_battle_15", "@No Shields"),
			(overlay_add_item, "$g_presentation_obj_battle_15", "@Use Shields"),
			(overlay_add_item, "$g_presentation_obj_battle_15", "@None"),
			(val_add, ":var_12", 35),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_15", 1),
			(position_set_x, 1, 430),
			(position_set_y, 1, ":var_12"),
			(overlay_set_position, "$g_presentation_obj_battle_15", 1),
			(overlay_set_alpha, "$g_presentation_obj_battle_15", 96),
			(overlay_set_val, "$g_presentation_obj_battle_15", 2),
			(overlay_set_display, "$g_presentation_obj_battle_15", 0),
			(overlay_add_item, "$g_presentation_obj_battle_16", "@Avoid Melee"),
			(overlay_add_item, "$g_presentation_obj_battle_16", "@None"),
			(val_add, ":var_12", 18),
			(position_set_x, 1, 500),
			(position_set_y, 1, 600),
			(overlay_set_size, "$g_presentation_obj_battle_16", 1),
			(position_set_x, 1, 555),
			(position_set_y, 1, ":var_12"),
			(overlay_set_position, "$g_presentation_obj_battle_16", 1),
			(overlay_set_alpha, "$g_presentation_obj_battle_16", 96),
			(overlay_set_val, "$g_presentation_obj_battle_16", 1),
			(overlay_set_display, "$g_presentation_obj_battle_16", 0),
			(val_sub, ":var_12", 53),
			(val_sub, ":var_12", 50),
			(create_button_overlay, "$g_presentation_obj_battle_24", "@Turn to weapon orders..."),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, "$g_presentation_obj_battle_24", 1),
			(position_set_x, 1, 450),
			(position_set_y, 1, 150),
			(overlay_set_position, "$g_presentation_obj_battle_24", 1),
			(create_game_button_overlay, "$g_presentation_obj_battle_25", "@Reassess"),
			(position_set_x, 1, 420),
			(position_set_y, 1, 8),
			(overlay_set_position, "$g_presentation_obj_battle_25", 1),
			(create_game_button_overlay, "$g_presentation_obj_battle_26", "@Scrap All"),
			(position_set_x, 1, 580),
			(position_set_y, 1, 8),
			(overlay_set_position, "$g_presentation_obj_battle_26", 1),
			(create_game_button_overlay, "$g_presentation_obj_battle_27", "@Prepare Orders"),
			(position_set_x, 1, 740),
			(position_set_y, 1, 8),
			(overlay_set_position, "$g_presentation_obj_battle_27", 1),
			(create_game_button_overlay, "$g_presentation_obj_battle_28", "@Dispatch Orders"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 8),
			(overlay_set_position, "$g_presentation_obj_battle_28", 1),
			(call_script, "script_prebattle_order_get_stored"),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_25"),
				(jump_to_menu, "$g_next_menu"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_26"),
				(party_set_slot, "p_main_party", slot_center_shipyards, 0),
				(call_script, "script_prebattle_order_clear_all"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_27"),
				(call_script, "script_prebattle_order_preview_orders"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_28"),
				(party_set_slot, "p_main_party", slot_center_shipyards, 1),
				(call_script, "script_prebattle_order_store_orders"),
				(jump_to_menu, "$g_next_menu"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_24"),
				(overlay_get_position, 1, "$g_presentation_obj_battle_24"),
				(position_get_x, ":position_x_1", 1),
				(try_begin),
					(eq, ":position_x_1", 450),
					(overlay_set_display, "$g_presentation_obj_battle_10", 0),
					(overlay_set_display, "$g_presentation_obj_battle_11", 0),
					(overlay_set_display, "$g_presentation_obj_battle_12", 0),
					(overlay_set_display, "$g_presentation_obj_battle_17", 0),
					(overlay_set_display, reg51, 0),
					(overlay_set_display, reg52, 0),
					(overlay_set_display, "$g_presentation_credits_obj_2", 0),
					(overlay_set_display, "$g_presentation_credits_obj_3", 0),
					(overlay_set_display, "$g_presentation_credits_obj_4", 0),
					(overlay_set_display, "$g_presentation_credits_obj_5", 0),
					(store_add, ":value", reg51, 2),
					(overlay_set_display, ":value", 0),
					(val_add, ":value", 1),
					(overlay_set_display, ":value", 0),
					(overlay_set_display, "$g_presentation_obj_battle_13", 1),
					(overlay_set_display, "$g_presentation_obj_battle_14", 1),
					(overlay_set_display, "$g_presentation_obj_battle_15", 1),
					(overlay_set_display, "$g_presentation_obj_battle_16", 1),
					(overlay_set_display, "$g_presentation_credits_obj_6", 1),
					(overlay_set_display, "$g_presentation_credits_obj_7", 1),
					(overlay_set_display, "$g_presentation_credits_obj_8", 1),
					(overlay_set_display, "$g_presentation_credits_obj_9", 1),
					(try_begin),
						(eq, "$group0_has_troops", 1),
						(overlay_set_display, "$g_presentation_but0_movement", 0),
						(overlay_set_display, "$g_presentation_but0_riding", 0),
						(overlay_set_display, "$g_presentation_but0_weapon_usage", 0),
						(overlay_set_display, reg6, 0),
						(overlay_set_display, reg15, 1),
						(overlay_set_display, reg24, 1),
						(overlay_set_display, reg33, 1),
						(overlay_set_display, reg42, 1),
					(try_end),
					(try_begin),
						(eq, "$group1_has_troops", 1),
						(overlay_set_display, "$g_presentation_but1_movement", 0),
						(overlay_set_display, "$g_presentation_but1_riding", 0),
						(overlay_set_display, "$g_presentation_but1_weapon_usage", 0),
						(overlay_set_display, reg7, 0),
						(overlay_set_display, reg16, 1),
						(overlay_set_display, reg25, 1),
						(overlay_set_display, reg34, 1),
						(overlay_set_display, reg43, 1),
					(try_end),
					(try_begin),
						(eq, "$group2_has_troops", 1),
						(overlay_set_display, "$g_presentation_but2_movement", 0),
						(overlay_set_display, "$g_presentation_but2_riding", 0),
						(overlay_set_display, "$g_presentation_but2_weapon_usage", 0),
						(overlay_set_display, reg8, 0),
						(overlay_set_display, reg17, 1),
						(overlay_set_display, reg26, 1),
						(overlay_set_display, reg35, 1),
						(overlay_set_display, reg44, 1),
					(try_end),
					(try_begin),
						(eq, "$group3_has_troops", 1),
						(overlay_set_display, "$g_presentation_but3_movement", 0),
						(overlay_set_display, "$g_presentation_but3_riding", 0),
						(overlay_set_display, "$g_presentation_but3_weapon_usage", 0),
						(overlay_set_display, reg9, 0),
						(overlay_set_display, reg18, 1),
						(overlay_set_display, reg27, 1),
						(overlay_set_display, reg36, 1),
						(overlay_set_display, reg45, 1),
					(try_end),
					(try_begin),
						(eq, "$group4_has_troops", 1),
						(overlay_set_display, "$g_presentation_but4_movement", 0),
						(overlay_set_display, "$g_presentation_but4_riding", 0),
						(overlay_set_display, "$g_presentation_but4_weapon_usage", 0),
						(overlay_set_display, reg10, 0),
						(overlay_set_display, reg19, 1),
						(overlay_set_display, reg28, 1),
						(overlay_set_display, reg37, 1),
						(overlay_set_display, reg46, 1),
					(try_end),
					(try_begin),
						(eq, "$group5_has_troops", 1),
						(overlay_set_display, "$g_presentation_but5_movement", 0),
						(overlay_set_display, "$g_presentation_but5_riding", 0),
						(overlay_set_display, "$g_presentation_but5_weapon_usage", 0),
						(overlay_set_display, reg11, 0),
						(overlay_set_display, reg20, 1),
						(overlay_set_display, reg29, 1),
						(overlay_set_display, reg38, 1),
						(overlay_set_display, reg47, 1),
					(try_end),
					(try_begin),
						(eq, "$group6_has_troops", 1),
						(overlay_set_display, "$g_presentation_but6_movement", 0),
						(overlay_set_display, "$g_presentation_but6_riding", 0),
						(overlay_set_display, "$g_presentation_but6_weapon_usage", 0),
						(overlay_set_display, reg12, 0),
						(overlay_set_display, reg21, 1),
						(overlay_set_display, reg30, 1),
						(overlay_set_display, reg39, 1),
						(overlay_set_display, reg48, 1),
					(try_end),
					(try_begin),
						(eq, "$group7_has_troops", 1),
						(overlay_set_display, "$g_presentation_but7_movement", 0),
						(overlay_set_display, "$g_presentation_but7_riding", 0),
						(overlay_set_display, "$g_presentation_but7_weapon_usage", 0),
						(overlay_set_display, reg13, 0),
						(overlay_set_display, reg22, 1),
						(overlay_set_display, reg31, 1),
						(overlay_set_display, reg40, 1),
						(overlay_set_display, reg49, 1),
					(try_end),
					(try_begin),
						(eq, "$group8_has_troops", 1),
						(overlay_set_display, "$g_presentation_but8_movement", 0),
						(overlay_set_display, "$g_presentation_but8_riding", 0),
						(overlay_set_display, "$g_presentation_but8_weapon_usage", 0),
						(overlay_set_display, reg14, 0),
						(overlay_set_display, reg23, 1),
						(overlay_set_display, reg32, 1),
						(overlay_set_display, reg41, 1),
						(overlay_set_display, reg50, 1),
					(try_end),
					(position_set_x, 1, 150),
					(overlay_set_text, "$g_presentation_obj_battle_24", "@...Turn to positioning orders"),
					(overlay_set_position, "$g_presentation_obj_battle_24", 1),
				(else_try),
					(eq, ":position_x_1", 150),
					(overlay_set_display, "$g_presentation_obj_battle_13", 0),
					(overlay_set_display, "$g_presentation_obj_battle_14", 0),
					(overlay_set_display, "$g_presentation_obj_battle_15", 0),
					(overlay_set_display, "$g_presentation_obj_battle_16", 0),
					(overlay_set_display, "$g_presentation_credits_obj_6", 0),
					(overlay_set_display, "$g_presentation_credits_obj_7", 0),
					(overlay_set_display, "$g_presentation_credits_obj_8", 0),
					(overlay_set_display, "$g_presentation_credits_obj_9", 0),
					(overlay_set_display, "$g_presentation_obj_battle_10", 1),
					(overlay_set_display, "$g_presentation_obj_battle_11", 1),
					(overlay_set_display, "$g_presentation_obj_battle_12", 1),
					(overlay_set_display, "$g_presentation_obj_battle_17", 1),
					(overlay_set_display, reg51, 1),
					(overlay_set_display, reg52, 1),
					(overlay_set_display, "$g_presentation_credits_obj_2", 1),
					(overlay_set_display, "$g_presentation_credits_obj_3", 1),
					(overlay_set_display, "$g_presentation_credits_obj_4", 1),
					(overlay_set_display, "$g_presentation_credits_obj_5", 1),
					(store_add, ":value", reg51, 2),
					(overlay_set_display, ":value", 1),
					(val_add, ":value", 1),
					(overlay_set_display, ":value", 1),
					(try_begin),
						(eq, "$group0_has_troops", 1),
						(overlay_set_display, "$g_presentation_but0_movement", 1),
						(overlay_set_display, "$g_presentation_but0_riding", 1),
						(overlay_set_display, "$g_presentation_but0_weapon_usage", 1),
						(overlay_set_display, reg6, 1),
						(overlay_set_display, reg15, 0),
						(overlay_set_display, reg24, 0),
						(overlay_set_display, reg33, 0),
						(overlay_set_display, reg42, 0),
					(try_end),
					(try_begin),
						(eq, "$group1_has_troops", 1),
						(overlay_set_display, "$g_presentation_but1_movement", 1),
						(overlay_set_display, "$g_presentation_but1_riding", 1),
						(overlay_set_display, "$g_presentation_but1_weapon_usage", 1),
						(overlay_set_display, reg7, 1),
						(overlay_set_display, reg16, 0),
						(overlay_set_display, reg25, 0),
						(overlay_set_display, reg34, 0),
						(overlay_set_display, reg43, 0),
					(try_end),
					(try_begin),
						(eq, "$group2_has_troops", 1),
						(overlay_set_display, "$g_presentation_but2_movement", 1),
						(overlay_set_display, "$g_presentation_but2_riding", 1),
						(overlay_set_display, "$g_presentation_but2_weapon_usage", 1),
						(overlay_set_display, reg8, 1),
						(overlay_set_display, reg17, 0),
						(overlay_set_display, reg26, 0),
						(overlay_set_display, reg35, 0),
						(overlay_set_display, reg44, 0),
					(try_end),
					(try_begin),
						(eq, "$group3_has_troops", 1),
						(overlay_set_display, "$g_presentation_but3_movement", 1),
						(overlay_set_display, "$g_presentation_but3_riding", 1),
						(overlay_set_display, "$g_presentation_but3_weapon_usage", 1),
						(overlay_set_display, reg9, 1),
						(overlay_set_display, reg18, 0),
						(overlay_set_display, reg27, 0),
						(overlay_set_display, reg36, 0),
						(overlay_set_display, reg45, 0),
					(try_end),
					(try_begin),
						(eq, "$group4_has_troops", 1),
						(overlay_set_display, "$g_presentation_but4_movement", 1),
						(overlay_set_display, "$g_presentation_but4_riding", 1),
						(overlay_set_display, "$g_presentation_but4_weapon_usage", 1),
						(overlay_set_display, reg10, 1),
						(overlay_set_display, reg19, 0),
						(overlay_set_display, reg28, 0),
						(overlay_set_display, reg37, 0),
						(overlay_set_display, reg46, 0),
					(try_end),
					(try_begin),
						(eq, "$group5_has_troops", 1),
						(overlay_set_display, "$g_presentation_but5_movement", 1),
						(overlay_set_display, "$g_presentation_but5_riding", 1),
						(overlay_set_display, "$g_presentation_but5_weapon_usage", 1),
						(overlay_set_display, reg11, 1),
						(overlay_set_display, reg20, 0),
						(overlay_set_display, reg29, 0),
						(overlay_set_display, reg38, 0),
						(overlay_set_display, reg47, 0),
					(try_end),
					(try_begin),
						(eq, "$group6_has_troops", 1),
						(overlay_set_display, "$g_presentation_but6_movement", 1),
						(overlay_set_display, "$g_presentation_but6_riding", 1),
						(overlay_set_display, "$g_presentation_but6_weapon_usage", 1),
						(overlay_set_display, reg12, 1),
						(overlay_set_display, reg21, 0),
						(overlay_set_display, reg30, 0),
						(overlay_set_display, reg39, 0),
						(overlay_set_display, reg48, 0),
					(try_end),
					(try_begin),
						(eq, "$group7_has_troops", 1),
						(overlay_set_display, "$g_presentation_but7_movement", 1),
						(overlay_set_display, "$g_presentation_but7_riding", 1),
						(overlay_set_display, "$g_presentation_but7_weapon_usage", 1),
						(overlay_set_display, reg13, 1),
						(overlay_set_display, reg22, 0),
						(overlay_set_display, reg31, 0),
						(overlay_set_display, reg40, 0),
						(overlay_set_display, reg49, 0),
					(try_end),
					(try_begin),
						(eq, "$group8_has_troops", 1),
						(overlay_set_display, "$g_presentation_but8_movement", 1),
						(overlay_set_display, "$g_presentation_but8_riding", 1),
						(overlay_set_display, "$g_presentation_but8_weapon_usage", 1),
						(overlay_set_display, reg14, 1),
						(overlay_set_display, reg23, 0),
						(overlay_set_display, reg32, 0),
						(overlay_set_display, reg41, 0),
						(overlay_set_display, reg50, 0),
					(try_end),
					(position_set_x, 1, 450),
					(overlay_set_text, "$g_presentation_obj_battle_24", "@Turn to weapon orders..."),
					(overlay_set_position, "$g_presentation_obj_battle_24", 1),
				(try_end),
			(else_try),
				(eq, "$group0_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check0"),
				(assign, "$g_formation_group0_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group1_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check1"),
				(assign, "$g_formation_group1_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group2_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check2"),
				(assign, "$g_formation_group2_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group3_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check3"),
				(assign, "$g_formation_group3_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group4_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check4"),
				(assign, "$g_formation_group4_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group5_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check5"),
				(assign, "$g_formation_group5_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group6_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check6"),
				(assign, "$g_formation_group6_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group7_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check7"),
				(assign, "$g_formation_group7_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
			(else_try),
				(eq, "$group8_has_troops", 1),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_check8"),
				(assign, "$g_formation_group8_selected", ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 68),
				(else_try),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but0"),
				(assign, "$g_formation_group0_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check0", 1),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but1"),
				(assign, "$g_formation_group1_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check1", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but2"),
				(assign, "$g_formation_group2_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check2", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but3"),
				(assign, "$g_formation_group3_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check3", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but4"),
				(assign, "$g_formation_group4_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check4", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but5"),
				(assign, "$g_formation_group5_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check5", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but6"),
				(assign, "$g_formation_group6_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check6", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but7"),
				(assign, "$g_formation_group7_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check7", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group8_has_troops", 1),
					(assign, "$g_formation_group8_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check8", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but8"),
				(assign, "$g_formation_group8_selected", 1),
				(overlay_animate_to_alpha, "$g_presentation_obj_battle_but8", 250, 68),
				(overlay_set_val, "$g_presentation_obj_battle_check8", 1),
				(try_begin),
					(eq, "$group0_has_troops", 1),
					(assign, "$g_formation_group0_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check0", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but0", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group1_has_troops", 1),
					(assign, "$g_formation_group1_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check1", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but1", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group2_has_troops", 1),
					(assign, "$g_formation_group2_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check2", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but2", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group3_has_troops", 1),
					(assign, "$g_formation_group3_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check3", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but3", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group4_has_troops", 1),
					(assign, "$g_formation_group4_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check4", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but4", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group5_has_troops", 1),
					(assign, "$g_formation_group5_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check5", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but5", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group6_has_troops", 1),
					(assign, "$g_formation_group6_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check6", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but6", 250, 0),
				(try_end),
				(try_begin),
					(eq, "$group7_has_troops", 1),
					(assign, "$g_formation_group7_selected", 0),
					(overlay_set_val, "$g_presentation_obj_battle_check7", 0),
					(overlay_animate_to_alpha, "$g_presentation_obj_battle_but7", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_10"),
				(try_begin),
					(eq, ":trigger_param_2", 4),
					(call_script, "script_prebattle_order_update_text_slot", 0, -1, 0),
				(else_try),
					(eq, ":trigger_param_2", 3),
					(call_script, "script_prebattle_order_update_text_slot", 0, 0, 0),
				(else_try),
					(eq, ":trigger_param_2", 2),
					(call_script, "script_prebattle_order_update_text_slot", 0, 1, 0),
				(else_try),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_prebattle_order_update_text_slot", 0, 2, 0),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_prebattle_order_update_text_slot", 0, 3, 0),
				(try_end),
			(else_try),
				(this_or_next|eq, ":trigger_param_1", "$g_presentation_obj_battle_11"),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_12"),
				(try_begin),
					(eq, ":trigger_param_1", "$g_presentation_obj_battle_11"),
					(assign, ":value_2", 1),
					(assign, ":value_3", reg53),
				(else_try),
					(eq, ":trigger_param_1", "$g_presentation_obj_battle_12"),
					(assign, ":value_2", 2),
					(assign, ":value_3", reg54),
				(try_end),
				(try_begin),
					(eq, ":trigger_param_2", 6),
					(call_script, "script_prebattle_order_update_text_slot", ":value_2", -1, 0),
				(else_try),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_prebattle_order_update_text_slot", ":value_2", 3, 0),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_prebattle_order_update_text_slot", ":value_2", 4, 0),
				(else_try),
					(eq, ":trigger_param_2", 5),
					(call_script, "script_prebattle_order_update_text_slot", ":value_2", 5, ":value_3"),
					(call_script, "script_prebattle_order_update_text_slot", 0, 0, 0),
				(else_try),
					(eq, ":trigger_param_2", 4),
					(call_script, "script_prebattle_order_update_text_slot", ":value_2", 6, ":value_3"),
					(call_script, "script_prebattle_order_update_text_slot", 0, 0, 0),
				(else_try),
					(eq, ":trigger_param_2", 3),
					(call_script, "script_prebattle_order_update_text_slot", ":value_2", 7, ":value_3"),
				(else_try),
					(eq, ":trigger_param_2", 2),
					(call_script, "script_prebattle_order_update_text_slot", ":value_2", 8, ":value_3"),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_17"),
				(try_begin),
					(eq, ":trigger_param_2", 4),
					(call_script, "script_prebattle_order_update_text_slot", 3, -1, 0),
				(else_try),
					(eq, ":trigger_param_2", 3),
					(call_script, "script_prebattle_order_update_text_slot", 3, 2, 0),
					(call_script, "script_prebattle_order_update_text_slot", 0, 0, 0),
				(else_try),
					(eq, ":trigger_param_2", 2),
					(call_script, "script_prebattle_order_update_text_slot", 3, 3, 0),
					(call_script, "script_prebattle_order_update_text_slot", 0, 0, 0),
				(else_try),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_prebattle_order_update_text_slot", 3, 4, 0),
					(call_script, "script_prebattle_order_update_text_slot", 0, 0, 0),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_prebattle_order_update_text_slot", 3, 5, 0),
					(call_script, "script_prebattle_order_update_text_slot", 0, 0, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_13"),
				(try_begin),
					(eq, ":trigger_param_2", 4),
					(call_script, "script_prebattle_order_update_text_slot", 4, -1, 0),
				(else_try),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_prebattle_order_update_text_slot", 4, 2, 0),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_prebattle_order_update_text_slot", 4, 3, 0),
				(else_try),
					(eq, ":trigger_param_2", 3),
					(call_script, "script_prebattle_order_update_text_slot", 4, 0, 0),
				(else_try),
					(eq, ":trigger_param_2", 2),
					(call_script, "script_prebattle_order_update_text_slot", 4, 9, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_14"),
				(try_begin),
					(eq, ":trigger_param_2", 4),
					(call_script, "script_prebattle_order_update_text_slot", 5, -1, 0),
				(else_try),
					(eq, ":trigger_param_2", 3),
					(call_script, "script_prebattle_order_update_text_slot", 5, 1, 0),
				(else_try),
					(eq, ":trigger_param_2", 2),
					(call_script, "script_prebattle_order_update_text_slot", 5, 2, 0),
				(else_try),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_prebattle_order_update_text_slot", 5, 3, 0),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_prebattle_order_update_text_slot", 5, 0, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_15"),
				(try_begin),
					(eq, ":trigger_param_2", 2),
					(call_script, "script_prebattle_order_update_text_slot", 6, -1, 0),
				(else_try),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_prebattle_order_update_text_slot", 6, 4, 0),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_prebattle_order_update_text_slot", 6, 5, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_16"),
				(try_begin),
					(eq, ":trigger_param_2", 1),
					(call_script, "script_prebattle_order_update_text_slot", 7, -1, 0),
				(else_try),
					(eq, ":trigger_param_2", 0),
					(call_script, "script_prebattle_order_update_text_slot", 7, 1, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", reg51),
				(assign, reg53, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", reg52),
				(assign, reg54, ":trigger_param_2"),
			(try_end)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but0"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but0_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but0_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but0_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, reg6, 250, 16777215),
					(overlay_animate_to_color, reg15, 250, 16777215),
					(overlay_animate_to_color, reg24, 250, 16777215),
					(overlay_animate_to_color, reg33, 250, 16777215),
					(overlay_animate_to_color, reg42, 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name0", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but0_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but0_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but0_weapon_usage", 250, 0),
					(overlay_animate_to_color, reg6, 250, 0),
					(overlay_animate_to_color, reg15, 250, 0),
					(overlay_animate_to_color, reg24, 250, 0),
					(overlay_animate_to_color, reg33, 250, 0),
					(overlay_animate_to_color, reg42, 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name0", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but1"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but1_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but1_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but1_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, reg7, 250, 16777215),
					(overlay_animate_to_color, reg16, 250, 16777215),
					(overlay_animate_to_color, reg25, 250, 16777215),
					(overlay_animate_to_color, reg34, 250, 16777215),
					(overlay_animate_to_color, reg43, 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name1", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but1_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but1_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but1_weapon_usage", 250, 0),
					(overlay_animate_to_color, reg7, 250, 0),
					(overlay_animate_to_color, reg16, 250, 0),
					(overlay_animate_to_color, reg25, 250, 0),
					(overlay_animate_to_color, reg34, 250, 0),
					(overlay_animate_to_color, reg43, 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name1", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but2"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but2_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but2_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but2_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, reg8, 250, 16777215),
					(overlay_animate_to_color, reg17, 250, 16777215),
					(overlay_animate_to_color, reg26, 250, 16777215),
					(overlay_animate_to_color, reg35, 250, 16777215),
					(overlay_animate_to_color, reg44, 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name2", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but2_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but2_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but2_weapon_usage", 250, 0),
					(overlay_animate_to_color, reg8, 250, 0),
					(overlay_animate_to_color, reg17, 250, 0),
					(overlay_animate_to_color, reg26, 250, 0),
					(overlay_animate_to_color, reg35, 250, 0),
					(overlay_animate_to_color, reg44, 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name2", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but3"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but3_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but3_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but3_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, reg9, 250, 16777215),
					(overlay_animate_to_color, reg18, 250, 16777215),
					(overlay_animate_to_color, reg27, 250, 16777215),
					(overlay_animate_to_color, reg36, 250, 16777215),
					(overlay_animate_to_color, reg45, 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name3", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but3_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but3_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but3_weapon_usage", 250, 0),
					(overlay_animate_to_color, reg9, 250, 0),
					(overlay_animate_to_color, reg18, 250, 0),
					(overlay_animate_to_color, reg27, 250, 0),
					(overlay_animate_to_color, reg36, 250, 0),
					(overlay_animate_to_color, reg45, 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name3", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but4"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but4_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but4_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but4_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, reg10, 250, 16777215),
					(overlay_animate_to_color, reg19, 250, 16777215),
					(overlay_animate_to_color, reg28, 250, 16777215),
					(overlay_animate_to_color, reg37, 250, 16777215),
					(overlay_animate_to_color, reg46, 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name4", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but4_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but4_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but4_weapon_usage", 250, 0),
					(overlay_animate_to_color, reg10, 250, 0),
					(overlay_animate_to_color, reg19, 250, 0),
					(overlay_animate_to_color, reg28, 250, 0),
					(overlay_animate_to_color, reg37, 250, 0),
					(overlay_animate_to_color, reg46, 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name4", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but5"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but5_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but5_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but5_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, reg11, 250, 16777215),
					(overlay_animate_to_color, reg20, 250, 16777215),
					(overlay_animate_to_color, reg29, 250, 16777215),
					(overlay_animate_to_color, reg38, 250, 16777215),
					(overlay_animate_to_color, reg47, 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name5", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but5_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but5_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but5_weapon_usage", 250, 0),
					(overlay_animate_to_color, reg11, 250, 0),
					(overlay_animate_to_color, reg20, 250, 0),
					(overlay_animate_to_color, reg29, 250, 0),
					(overlay_animate_to_color, reg38, 250, 0),
					(overlay_animate_to_color, reg47, 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name5", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but6"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but6_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but6_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but6_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, reg12, 250, 16777215),
					(overlay_animate_to_color, reg21, 250, 16777215),
					(overlay_animate_to_color, reg30, 250, 16777215),
					(overlay_animate_to_color, reg39, 250, 16777215),
					(overlay_animate_to_color, reg48, 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name6", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but6_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but6_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but6_weapon_usage", 250, 0),
					(overlay_animate_to_color, reg12, 250, 0),
					(overlay_animate_to_color, reg21, 250, 0),
					(overlay_animate_to_color, reg30, 250, 0),
					(overlay_animate_to_color, reg39, 250, 0),
					(overlay_animate_to_color, reg48, 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name6", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but7"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but7_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but7_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but7_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, reg13, 250, 16777215),
					(overlay_animate_to_color, reg22, 250, 16777215),
					(overlay_animate_to_color, reg31, 250, 16777215),
					(overlay_animate_to_color, reg40, 250, 16777215),
					(overlay_animate_to_color, reg49, 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name7", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but7_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but7_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but7_weapon_usage", 250, 0),
					(overlay_animate_to_color, reg13, 250, 0),
					(overlay_animate_to_color, reg22, 250, 0),
					(overlay_animate_to_color, reg31, 250, 0),
					(overlay_animate_to_color, reg40, 250, 0),
					(overlay_animate_to_color, reg49, 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name7", 250, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_but8"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(overlay_animate_to_color, "$g_presentation_but8_movement", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but8_riding", 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_but8_weapon_usage", 250, 16777215),
					(overlay_animate_to_color, reg14, 250, 16777215),
					(overlay_animate_to_color, reg23, 250, 16777215),
					(overlay_animate_to_color, reg32, 250, 16777215),
					(overlay_animate_to_color, reg41, 250, 16777215),
					(overlay_animate_to_color, reg50, 250, 16777215),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name8", 250, 16777215),
				(else_try),
					(overlay_animate_to_color, "$g_presentation_but8_movement", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but8_riding", 250, 0),
					(overlay_animate_to_color, "$g_presentation_but8_weapon_usage", 250, 0),
					(overlay_animate_to_color, reg14, 250, 0),
					(overlay_animate_to_color, reg23, 250, 0),
					(overlay_animate_to_color, reg32, 250, 0),
					(overlay_animate_to_color, reg41, 250, 0),
					(overlay_animate_to_color, reg50, 250, 0),
					(overlay_animate_to_color, "$g_presentation_obj_battle_name8", 250, 0),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(party_set_slot, "p_main_party", slot_center_shipyards, 0),
				(jump_to_menu, "$g_next_menu"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("prebattle_record_battle_size", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(str_store_string, 1, "@Record Battle Size as set in Options"),
			(create_text_overlay, reg1, 1, 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_position, reg1, 1),
			(overlay_set_text, reg1, 1),
			(create_number_box_overlay, "$g_presentation_obj_name_kingdom_1", 30, 1001),
			(position_set_x, 1, 400),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_1", 1),
			(party_get_slot, ":main_party_center_accumulated_tariffs", "p_main_party", slot_center_accumulated_tariffs),
			(overlay_set_val, "$g_presentation_obj_name_kingdom_1", ":main_party_center_accumulated_tariffs"),
			(create_button_overlay, "$g_presentation_obj_name_kingdom_2", "@Continue...", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 300),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_2", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_name_kingdom_1"),
				(party_set_slot, "p_main_party", slot_center_accumulated_tariffs, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_name_kingdom_2"),
				(party_get_slot, ":main_party_center_accumulated_tariffs", "p_main_party", slot_center_accumulated_tariffs),
				(val_clamp, ":main_party_center_accumulated_tariffs", 30, 1001),
				(party_set_slot, "p_main_party", slot_center_accumulated_tariffs, ":main_party_center_accumulated_tariffs"),
				(try_begin),
					(eq, "$g_presentation_credits_obj_1", 1),
					(start_presentation, "prsnt_prebattle_custom_deployment"),
				(else_try),
					(presentation_set_duration, 0),
				(try_end),
			(try_end)
		])
	]),

	("pbod_preferences", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(party_slot_eq, "p_main_party", 72, 0),
				(call_script, "script_prebattle_set_default_prefs"),
				(party_set_slot, "p_main_party", 72, 1),
			(try_end),
			(str_clear, 0),
			(create_text_overlay, reg0, 0, 8192),
			(position_set_x, 1, 50),
			(position_set_y, 1, 50),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 550),
			(position_set_y, 1, 630),
			(overlay_set_area_size, reg0, 1),
			(set_container_overlay, reg0),
			(assign, ":var_1", 15),
			(val_add, ":var_1", 2),
			(assign, ":var_2", 50),
			(store_div, ":value", ":var_2", 2),
			(store_mul, ":value_2", ":var_2", ":var_1"),
			(store_sub, ":value_3", ":value_2", 5),
			(position_set_x, 1, 50),
			(create_text_overlay, reg0, "@Record Battle Size as set in Options:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(store_sub, ":value_4", ":value_2", ":value"),
			(val_sub, ":value_2", ":var_2"),
			(val_sub, ":value_2", 30),
			(create_text_overlay, reg0, "@The 'Weapon Use Fixes' change NPC decision-^making with the following weapon types.^^Un-tick the boxes if you dislike the behavior.", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(val_sub, ":value_2", 20),
			(create_text_overlay, reg0, "@Use NPC Lancer Fix:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(assign, "$g_presentation_obj_banner_selection_2", reg0),
			(create_text_overlay, reg0, "@Use NPC Horse Archer Fix:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Use NPC Spear/Polearm Fix:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(store_add, ":value_5", ":value_2", ":value"),
			(create_text_overlay, reg0, "@Use Pike/Horse Damage Tweaks:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Reassign De-horsed Cavalry to:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Reassign No-Ammo Archers to:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Enable Battle Continuation:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Batt. Cont., Charge after KO:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Formations Battle AI:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Enable AI to use Special Orders:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Enable Bodyguards in Towns/Villages:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Enable ranged penalty from weather:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(store_add, ":value_6", ":value_2", ":value"),
			(create_text_overlay, reg0, "@Disable Companions' complaints:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_text_overlay, reg0, "@Enable the cheat menu:", 4096),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":var_2"),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(position_set_x, 1, 23500),
			(position_set_y, 1, 100),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 50),
			(position_set_y, 1, ":value_4"),
			(overlay_set_position, reg0, 1),
			(overlay_set_color, reg0, 0),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(position_set_x, 1, 23500),
			(position_set_y, 1, 100),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 50),
			(position_set_y, 1, ":value_5"),
			(overlay_set_position, reg0, 1),
			(overlay_set_color, reg0, 0),
			(create_mesh_overlay, reg0, "mesh_white_plane"),
			(position_set_x, 1, 23500),
			(position_set_y, 1, 100),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 50),
			(position_set_y, 1, ":value_6"),
			(overlay_set_position, reg0, 1),
			(overlay_set_color, reg0, 0),
			(position_set_x, 1, 450),
			(val_sub, ":value_3", 9),
			(create_number_box_overlay, "$g_presentation_obj_name_kingdom_1", 30, 1001),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_1", 1),
			(party_get_slot, ":main_party_center_accumulated_tariffs", "p_main_party", slot_center_accumulated_tariffs),
			(overlay_set_val, "$g_presentation_obj_name_kingdom_1", ":main_party_center_accumulated_tariffs"),
			(val_sub, ":value_3", ":var_2"),
			(val_sub, ":value_3", ":var_2"),
			(val_sub, ":value_3", 41),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_3", ":var_2"),
			(create_combo_button_overlay, reg0),
			(position_set_x, 1, 485),
			(val_sub, ":value_3", 8),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(try_for_range, ":number", 0, 9),
				(str_store_class_name, 1, ":number"),
				(overlay_add_item, reg0, 1),
			(try_end),
			(overlay_add_item, reg0, "@{!}- Disabled -"),
			(position_set_x, 1, 450),
			(val_add, ":value_3", 8),
			(val_sub, ":value_3", ":var_2"),
			(create_combo_button_overlay, reg0),
			(position_set_x, 1, 485),
			(val_sub, ":value_3", 8),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(try_for_range, ":number", 0, 9),
				(str_store_class_name, 1, ":number"),
				(overlay_add_item, reg0, 1),
			(try_end),
			(overlay_add_item, reg0, "@{!}- Disabled -"),
			(position_set_x, 1, 450),
			(val_add, ":value_3", 8),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_3", ":var_2"),
			(create_combo_button_overlay, reg0),
			(position_set_x, 1, 485),
			(val_sub, ":value_3", 8),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(overlay_add_item, reg0, "@{!}- Disabled -"),
			(overlay_add_item, reg0, "@Charge All"),
			(overlay_add_item, reg0, "@Formations AI"),
			(position_set_x, 1, 450),
			(val_add, ":value_3", 8),
			(val_sub, ":value_3", ":var_2"),
			(create_combo_button_overlay, reg0),
			(position_set_x, 1, 485),
			(val_sub, ":value_3", 8),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 700),
			(position_set_y, 1, 800),
			(overlay_set_size, reg0, 1),
			(overlay_add_item, reg0, "@{!}- Disabled -"),
			(overlay_add_item, reg0, "@Formations AI"),
			(overlay_add_item, reg0, "@Native AI, w/Formations"),
			(position_set_x, 1, 450),
			(val_add, ":value_3", 8),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$disable_npc_complaints"),
			(val_sub, ":value_3", ":var_2"),
			(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_y, 1, ":value_3"),
			(overlay_set_position, reg0, 1),
			(overlay_set_val, reg0, "$cheat_mode"),
			(val_sub, ":value_3", ":var_2"),
			(set_container_overlay, -1),
			(party_get_slot, ":main_party_town_arena_melee_mission_tpl", "p_main_party", slot_town_arena_melee_mission_tpl),
			(party_get_slot, ":main_party_town_arena_torny_mission_tpl", "p_main_party", slot_town_arena_torny_mission_tpl),
			(party_get_slot, ":main_party_town_arena_melee_1_num_teams", "p_main_party", slot_town_arena_melee_1_num_teams),
			(party_get_slot, ":main_party_town_arena_melee_1_team_size", "p_main_party", slot_town_arena_melee_1_team_size),
			(party_get_slot, ":main_party_town_arena_melee_3_num_teams", "p_main_party", slot_town_arena_melee_3_num_teams),
			(party_get_slot, ":main_party_town_arena_melee_3_team_size", "p_main_party", slot_town_arena_melee_3_team_size),
			(party_get_slot, ":main_party_town_arena_melee_cur_tier", "p_main_party", slot_town_arena_melee_cur_tier),
			(party_get_slot, ":main_party_town_village_product", "p_main_party", slot_town_village_product),
			(party_get_slot, ":main_party_town_rebellion_readiness", "p_main_party", slot_town_rebellion_readiness),
			(party_get_slot, ":main_party_town_arena_melee_2_team_size", "p_main_party", slot_town_arena_melee_2_team_size),
			(party_get_slot, ":main_party_town_arena_melee_2_num_teams", "p_main_party", slot_town_arena_melee_2_num_teams),
			(party_get_slot, ":main_party_87", "p_main_party", 87),
			(store_add, ":value_7", "$g_presentation_obj_name_kingdom_1", 1),
			(overlay_set_val, ":value_7", ":main_party_town_arena_melee_mission_tpl"),
			(val_add, ":value_7", 1),
			(overlay_set_val, ":value_7", ":main_party_town_arena_torny_mission_tpl"),
			(val_add, ":value_7", 1),
			(overlay_set_val, ":value_7", ":main_party_town_arena_melee_1_num_teams"),
			(val_add, ":value_7", 1),
			(overlay_set_val, ":value_7", ":main_party_town_arena_melee_1_team_size"),
			(val_add, ":value_7", 1),
			(overlay_set_val, ":value_7", ":main_party_town_village_product"),
			(val_add, ":value_7", 1),
			(overlay_set_val, ":value_7", ":main_party_town_rebellion_readiness"),
			(val_add, ":value_7", 1),
			(overlay_set_val, ":value_7", ":main_party_town_arena_melee_3_team_size"),
			(val_add, ":value_7", 1),
			(overlay_set_val, ":value_7", ":main_party_town_arena_melee_cur_tier"),
			(val_add, ":value_7", 1),
			(overlay_set_val, ":value_7", ":main_party_town_arena_melee_2_team_size"),
			(val_add, ":value_7", 1),
			(overlay_set_val, ":value_7", ":main_party_town_arena_melee_2_num_teams"),
			(val_add, ":value_7", 1),
			(overlay_set_val, ":value_7", ":main_party_town_arena_melee_3_num_teams"),
			(val_add, ":value_7", 1),
			(overlay_set_val, ":value_7", ":main_party_87"),
			(create_text_overlay, reg0, "@PBOD Mod^Options", 65552),
			(overlay_set_color, reg0, 4294967295),
			(position_set_x, 1, 800),
			(position_set_y, 1, 600),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 2000),
			(position_set_y, 1, 2000),
			(overlay_set_size, reg0, 1),
			(str_store_string, 0, "@Mouse-over options for further information."),
			(create_text_overlay, "$g_presentation_obj_banner_selection_1", 0, 10240),
			(position_set_x, 1, 650),
			(position_set_y, 1, 400),
			(overlay_set_position, "$g_presentation_obj_banner_selection_1", 1),
			(position_set_x, 1, 800),
			(position_set_y, 1, 800),
			(overlay_set_size, "$g_presentation_obj_banner_selection_1", 1),
			(position_set_x, 1, 300),
			(position_set_y, 1, 150),
			(overlay_set_area_size, "$g_presentation_obj_banner_selection_1", 1),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(create_game_button_overlay, "$g_presentation_obj_name_kingdom_2", "@Done", 16),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_2", 1),
			(position_set_x, 1, 740),
			(create_game_button_overlay, reg0, "@Restore Defaults", 16),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 900),
			(position_set_y, 1, 75),
			(create_game_button_overlay, reg0, "@Key Settings", 16),
			(overlay_set_position, reg0, 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_name_kingdom_1"),
				(party_set_slot, "p_main_party", slot_center_accumulated_tariffs, ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_name_kingdom_2"),
				(party_get_slot, ":main_party_center_accumulated_tariffs", "p_main_party", slot_center_accumulated_tariffs),
				(val_clamp, ":main_party_center_accumulated_tariffs", 30, 1001),
				(party_set_slot, "p_main_party", slot_center_accumulated_tariffs, ":main_party_center_accumulated_tariffs"),
				(presentation_set_duration, 0),
			(else_try),
				(store_add, ":value", "$g_presentation_obj_name_kingdom_2", 1),
				(eq, ":trigger_param_1", ":value"),
				(call_script, "script_prebattle_set_default_prefs"),
				(start_presentation, "prsnt_pbod_preferences"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(start_presentation, "prsnt_pbod_redefine_keys"),
			(else_try),
				(store_add, ":value", "$g_presentation_obj_name_kingdom_1", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_mission_tpl, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_torny_mission_tpl, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_1_num_teams, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_1_team_size, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_village_product, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_rebellion_readiness, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_3_team_size, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_cur_tier, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_2_team_size, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_2_num_teams, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", slot_town_arena_melee_3_num_teams, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(party_set_slot, "p_main_party", 87, ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$disable_npc_complaints", ":trigger_param_2"),
			(else_try),
				(val_add, ":value", 1),
				(eq, ":trigger_param_1", ":value"),
				(assign, "$cheat_mode", ":trigger_param_2"),
			(try_end)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_2", 1),
			(else_try),
				(eq, ":trigger_param_2", 0),
				(store_add, ":value", "$g_presentation_obj_name_kingdom_1", 1),
				(assign, ":var_4", "$g_presentation_obj_banner_selection_2"),
				(try_begin),
					(lt, ":trigger_param_1", ":var_4"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@Mouse-over options for further information."),
				(else_try),
					(this_or_next|eq, ":trigger_param_1", ":var_4"),
					(eq, ":trigger_param_1", ":value"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@Weapon Use Fix for Lancers will force mounted bots with lances to use them unless they are surrounded by enemies."),
				(else_try),
					(val_add, ":value", 1),
					(val_add, ":var_4", 1),
					(this_or_next|eq, ":trigger_param_1", ":var_4"),
					(eq, ":trigger_param_1", ":value"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@Weapon Use Fix for Horse Archers will force mounted bots with bows to use them until they run out of ammo."),
				(else_try),
					(val_add, ":value", 1),
					(val_add, ":var_4", 1),
					(this_or_next|eq, ":trigger_param_1", ":var_4"),
					(eq, ":trigger_param_1", ":value"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@Weapon Use Fix for Spear/Polearms will force infantry bots with polearms to use them unless they are surrounded by enemies."),
				(else_try),
					(val_add, ":value", 1),
					(val_add, ":var_4", 1),
					(this_or_next|eq, ":trigger_param_1", ":var_4"),
					(eq, ":trigger_param_1", ":value"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@Damage tweaks will give a flat boost to damage from spears to horses, and charge damage from horses to infantry, in an attempt to compensate for poor AI use of polearms and charges."),
				(else_try),
					(val_add, ":value", 1),
					(val_add, ":var_4", 1),
					(this_or_next|eq, ":trigger_param_1", ":var_4"),
					(eq, ":trigger_param_1", ":value"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@Mounted bots, once their horse dies, can be re-assinged to a division of your choosing. If active, AI bots will be reassigned to infantry."),
				(else_try),
					(val_add, ":value", 1),
					(val_add, ":var_4", 1),
					(this_or_next|eq, ":trigger_param_1", ":var_4"),
					(eq, ":trigger_param_1", ":value"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@Foot archer bots, once out of ammo, can be re-assinged to a division of your choosing. If active, AI bots will be reassigned to infantry."),
				(else_try),
					(val_add, ":value", 1),
					(val_add, ":var_4", 1),
					(this_or_next|eq, ":trigger_param_1", ":var_4"),
					(eq, ":trigger_param_1", ":value"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@Battle Continuation allows your troops to continue fighting after you are knocked out."),
				(else_try),
					(val_add, ":value", 1),
					(val_add, ":var_4", 1),
					(this_or_next|eq, ":trigger_param_1", ":var_4"),
					(eq, ":trigger_param_1", ":value"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@If Battle Continuation is active, you can select what your troops will do after you get knocked out: Disabled has them continue their previous orders; Charge all will give everyone a charge order; Formations AI (if active for the AI) will allow the new AI to take over for you."),
				(else_try),
					(val_add, ":value", 1),
					(val_add, ":var_4", 1),
					(this_or_next|eq, ":trigger_param_1", ":var_4"),
					(eq, ":trigger_param_1", ":value"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@Select your prefered Battle AI: Disabled is Native AI; Formations AI both allows the AI to use formations and changes their battle decision-making; Native AI w/Formations is Native AI but carries out the Native AI with basic formations."),
				(else_try),
					(val_add, ":value", 1),
					(val_add, ":var_4", 1),
					(this_or_next|eq, ":trigger_param_1", ":var_4"),
					(eq, ":trigger_param_1", ":value"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@Enabling AI Special Orders allows the AI teams to use volley fire (crossbows), skirmish mode (bow-users), and spear-bracing (polearm infantry)."),
				(else_try),
					(val_add, ":value", 1),
					(val_add, ":var_4", 1),
					(this_or_next|eq, ":trigger_param_1", ":var_4"),
					(eq, ":trigger_param_1", ":value"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@Bodyguards allows your companions to serve as your character's bodyguards in town and village scenes. The number of bodyguards depends on your character's leadership and renown."),
				(else_try),
					(val_add, ":value", 1),
					(val_add, ":var_4", 1),
					(this_or_next|eq, ":trigger_param_1", ":var_4"),
					(eq, ":trigger_param_1", ":value"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@The Weather Proficiency Penalties lowers the ranged weapons proficiencies of all troops while in battle in heavy fog, rain/snow, or at night to reflect the poor conditions for archery."),
				(else_try),
					(val_add, ":value", 1),
					(val_add, ":var_4", 1),
					(this_or_next|eq, ":trigger_param_1", ":var_4"),
					(eq, ":trigger_param_1", ":value"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@Disabling NPC Complaints will mute your companion's complaints about eachother or your decisions. It will not remove the consequences of their opinions, however."),
				(else_try),
					(val_add, ":value", 1),
					(val_add, ":var_4", 1),
					(this_or_next|eq, ":trigger_param_1", ":var_4"),
					(eq, ":trigger_param_1", ":value"),
					(overlay_set_text, "$g_presentation_obj_banner_selection_1", "@The cheat/debug mode activates debug messages as well as the 'cheatmenu' in your Camp Menu and additional options under Reports."),
				(try_end),
			(try_end)
		])
	]),

	("pbod_redefine_keys", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_presentation_obj_custom_battle_designer_1", 0),
			(call_script, "script_init_key_config"),
			(init_position, 1),
			(position_set_y, 1, 650),
			(position_set_x, 1, 500),
			(position_set_x, 2, 2000),
			(position_set_y, 2, 2000),
			(create_text_overlay, reg0, "@Keys Configuration", 16),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 2),
			(position_set_y, 1, 25),
			(position_set_x, 1, 50),
			(position_set_x, 2, 750),
			(position_set_y, 2, 750),
			(create_text_overlay, "$g_presentation_obj_custom_battle_designer_2", "@Press Esc to^^Disable a key", 4),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_2", 1),
			(overlay_set_size, "$g_presentation_obj_custom_battle_designer_2", 2),
			(overlay_set_color, "$g_presentation_obj_custom_battle_designer_2", 6291456),
			(overlay_set_alpha, "$g_presentation_obj_custom_battle_designer_2", 0),
			(position_set_y, 1, 600),
			(try_begin),
				(le, 16, 20),
				(position_set_x, 2, 1000),
				(position_set_y, 2, 1000),
				(position_set_x, 1, 50),
			(else_try),
				(position_set_x, 2, 750),
				(position_set_y, 2, 750),
				(position_set_x, 1, 25),
			(try_end),
			(position_set_x, 3, 120),
			(position_set_y, 3, 30),
			(try_for_range, ":number", 0, 16),
				(store_add, ":value", ":number", "str_key_no1"),
				(store_add, ":value_2", ":number", 32),
				(store_add, ":value_3", ":value_2", 16),
				(create_text_overlay, reg1, ":value", 4),
				(troop_set_slot, "trp_temp_array_c", ":value_3", reg1),
				(overlay_set_position, reg1, 1),
				(overlay_set_size, reg1, 2),
				(try_begin),
					(le, 16, 20),
					(position_move_x, 1, 35),
				(else_try),
					(position_move_x, 1, 24),
				(try_end),
				(create_game_button_overlay, reg2, "str_no_string", 16),
				(troop_set_slot, "trp_temp_array_c", ":value_2", reg2),
				(overlay_set_position, reg2, 1),
				(overlay_set_size, reg2, 3),
				(try_begin),
					(le, 16, 20),
					(position_move_x, 1, -35),
				(else_try),
					(position_move_x, 1, -24),
				(try_end),
				(position_move_y, 1, -4),
				(try_begin),
					(le, 16, 20),
					(try_begin),
						(eq, 8, ":number"),
						(assign, ":value_4", 9),
						(val_mul, ":value_4", 4),
						(position_move_y, 1, ":value_4"),
						(position_move_x, 1, 50),
					(try_end),
				(else_try),
					(try_begin),
						(eq, 5, ":number"),
						(assign, ":value_4", 6),
						(val_mul, ":value_4", 4),
						(position_move_y, 1, ":value_4"),
						(position_move_x, 1, 33),
					(try_end),
					(try_begin),
						(eq, 10, ":number"),
						(assign, ":value_4", 6),
						(val_mul, ":value_4", 4),
						(position_move_y, 1, ":value_4"),
						(position_move_x, 1, 33),
					(try_end),
				(try_end),
			(try_end),
			(call_script, "script_set_config_slot_key_config"),
			(call_script, "script_update_key_config_buttons"),
			(create_text_overlay, reg1, "@DeathCam Mouse Sensitivity", 4),
			(try_begin),
				(le, 16, 20),
				(position_set_x, 1, 50),
			(else_try),
				(position_set_x, 1, 25),
			(try_end),
			(position_move_y, 1, -8),
			(overlay_set_position, reg1, 1),
			(overlay_set_size, reg1, 2),
			(try_begin),
				(le, 16, 20),
				(position_move_x, 1, 38),
			(else_try),
				(position_move_x, 1, 27),
			(try_end),
			(create_slider_overlay, reg2, 1, 10),
			(overlay_set_position, reg2, 1),
			(position_set_x, 3, 700),
			(position_set_y, 3, 700),
			(overlay_set_size, reg2, 3),
			(try_begin),
				(neg|is_between, "$camera_mouse_deadzone", 1, 11),
				(assign, "$camera_mouse_deadzone", 3),
			(try_end),
			(store_sub, ":value_5", 11, "$camera_mouse_deadzone"),
			(overlay_set_val, reg2, ":value_5"),
			(position_set_y, 1, 25),
			(position_set_x, 1, 900),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_3", "@OK", 16),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_3", 1),
			(position_move_x, 1, -16),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_4", "@Reset", 16),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_4", 1),
			(position_move_x, 1, -16),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_5", "@Default", 16),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_5", 1),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_6", "@Mod Options"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 75),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_6", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(assign, ":value", 0),
			(store_add, ":value_2", 32, 16),
			(try_for_range, ":number", 32, ":value_2"),
				(troop_slot_eq, "trp_temp_array_c", ":number", ":trigger_param_1"),
				(assign, "$g_presentation_obj_custom_battle_designer_1", 1),
				(assign, "$g_presentation_credits_obj_1", ":trigger_param_1"),
				(overlay_set_text, "$g_presentation_credits_obj_1", "@Press a key", 16),
				(overlay_set_color, "$g_presentation_credits_obj_1", 255),
				(overlay_set_hilight_color, "$g_presentation_credits_obj_1", 255),
				(store_sub, "$g_presentation_credits_obj_2", ":number", 16),
				(assign, ":value", ":number"),
				(assign, ":value_2", ":number"),
			(try_end),
			(try_begin),
				(gt, ":value", 0),
			(else_try),
				(store_sub, ":value_3", "$g_presentation_obj_custom_battle_designer_3", 1),
				(eq, ":trigger_param_1", ":value_3"),
				(store_trigger_param_2, ":trigger_param_2"),
				(store_sub, "$camera_mouse_deadzone", 11, ":trigger_param_2"),
				(overlay_set_val, ":value_3", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_3"),
				(call_script, "script_set_global_var_key_config"),
				(call_script, "script_update_key_config_buttons"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_4"),
				(call_script, "script_set_config_slot_key_config"),
				(call_script, "script_update_key_config_buttons"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_5"),
				(call_script, "script_reset_to_default_keys"),
				(call_script, "script_update_key_config_buttons"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_6"),
				(call_script, "script_set_global_var_key_config"),
				(start_presentation, "prsnt_mod_option"),
			(try_end),
			(try_begin),
				(eq, "$g_presentation_obj_custom_battle_designer_1", 1),
				(overlay_set_alpha, "$g_presentation_obj_custom_battle_designer_2", 255),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(eq, "$g_presentation_obj_custom_battle_designer_1", 1),
			(assign, "$g_presentation_obj_custom_battle_designer_1", 0),
			(assign, ":value", 0),
			(store_add, ":value_2", 64, 107),
			(try_for_range, ":number", 64, ":value_2"),
				(troop_get_slot, ":temp_array_c_number", "trp_temp_array_c", ":number"),
				(key_clicked, ":temp_array_c_number"),
				(troop_set_slot, "trp_temp_array_c", "$g_presentation_credits_obj_2", ":temp_array_c_number"),
				(assign, ":value", ":temp_array_c_number"),
				(assign, ":value_2", ":number"),
			(try_end),
			(try_begin),
				(gt, ":value", 0),
			(else_try),
				(key_clicked, 1),
				(troop_set_slot, "trp_temp_array_c", "$g_presentation_credits_obj_2", 255),
			(else_try),
				(assign, "$g_presentation_obj_custom_battle_designer_1", 1),
			(try_end),
			(try_begin),
				(eq, "$g_presentation_obj_custom_battle_designer_1", 0),
				(try_for_range, ":number", 16, 32),
					(neq, ":number", "$g_presentation_credits_obj_2"),
					(troop_slot_eq, "trp_temp_array_c", ":number", ":value"),
					(troop_set_slot, "trp_temp_array_c", ":number", 255),
				(try_end),
				(overlay_set_hilight_color, "$g_presentation_credits_obj_1", 65280),
				(overlay_set_alpha, "$g_presentation_obj_custom_battle_designer_2", 0),
				(call_script, "script_update_key_config_buttons"),
			(try_end)
		])
	]),

	("caba_order_display", prsntf_read_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_for_range, ":number", 0, 9),
				(troop_set_slot, "trp_tpe_presobj", ":number", -1),
			(try_end),
			(call_script, "script_init_key_config"),
			(str_store_string, 10, "str_0x3e"),
			(str_store_string, 11, "str_0x3f"),
			(str_store_string, 12, "str_0x40"),
			(call_script, "script_str_store_key_name", 13, "$key_order_7"),
			(call_script, "script_str_store_key_name", 14, "$key_order_8"),
			(call_script, "script_str_store_key_name", 15, "$key_order_9"),
			(assign, ":value", 560),
			(try_begin),
				(party_slot_eq, "p_main_party", 108, 0),
				(try_begin),
					(this_or_next|eq, "$g_next_menu", "mnu_simple_encounter"),
					(eq, "$g_next_menu", "mnu_join_battle"),
					(str_store_string, 1, "@{s10} - Formation type orders"),
					(str_store_string, 2, "@{s11} - Weapon orders"),
					(str_store_string, 3, "@{s12} - Shield orders"),
					(str_store_string, 4, "@{s13} - Attack orders"),
					(assign, ":value_2", 4),
				(else_try),
					(str_store_string, 1, "@{s11} - Weapon orders"),
					(str_store_string, 2, "@{s12} - Shield orders"),
					(str_store_string, 3, "@{s13} - Attack orders"),
					(assign, ":value_2", 3),
				(try_end),
				(assign, ":value", 473),
			(else_try),
				(party_slot_eq, "p_main_party", 108, 26),
				(str_store_string, 1, "@{s10} - Ranks"),
				(str_store_string, 2, "@{s11} - Shieldwall"),
				(str_store_string, 3, "@{s12} - Wedge"),
				(str_store_string, 4, "@{s13} - Square"),
				(str_store_string, 5, "@{s14} - No Formation"),
				(str_store_string, 6, "@{s15} - Escape Menu"),
				(assign, ":value_2", 6),
			(else_try),
				(party_slot_eq, "p_main_party", 108, 27),
				(str_store_string, 1, "@{s11} - One Handers"),
				(str_store_string, 2, "@{s12} - Two Handers"),
				(str_store_string, 3, "@{s13} - Polearms"),
				(str_store_string, 4, "@{s14} - Ranged"),
				(str_store_string, 5, "@{s15} - Escape Menu"),
				(assign, ":value_2", 5),
			(else_try),
				(party_slot_eq, "p_main_party", 108, 28),
				(str_store_string, 1, "@{s11} - Use Shields"),
				(str_store_string, 2, "@{s12} - No Shields"),
				(str_store_string, 3, "@{s13} - Free"),
				(str_store_string, 4, "@{s15} - Escape Menu"),
				(assign, ":value_2", 4),
			(else_try),
				(party_slot_eq, "p_main_party", 108, "$key_order_7"),
				(str_store_string, 1, "@{s10} - End Order"),
				(str_store_string, 2, "@{s11} - Skirmish"),
				(str_store_string, 3, "@{s12} - Volley Fire"),
				(str_store_string, 4, "@{s13} - Brace Polearms"),
				(str_store_string, 5, "@{s15} - Escape Menu"),
				(assign, ":value_2", 5),
			(try_end),
			(party_get_slot, ":main_party_108", "p_main_party", 108),
			(party_set_slot, "p_main_party_backup", 108, ":main_party_108"),
			(try_for_range, ":number", 0, ":value_2"),
				(store_add, ":value_3", ":number", 1),
				(str_store_string_reg, 0, ":value_3"),
				(create_text_overlay, ":value_4", 0),
				(overlay_set_color, ":value_4", 16777215),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, ":value_4", 1),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":value"),
				(overlay_set_position, ":value_4", 1),
				(troop_set_slot, "trp_tpe_presobj", ":number", ":value_4"),
				(val_sub, ":value", 30),
			(try_end),
			(store_mul, ":value_5", 30, ":value_2"),
			(val_add, ":value", ":value_5"),
			(val_sub, ":value", 3),
			(try_for_range, ":number", 0, ":value_2"),
				(create_mesh_overlay, ":value_4", "mesh_order_frame"),
				(position_set_x, 1, 700),
				(position_set_y, 1, 700),
				(overlay_set_size, ":value_4", 1),
				(position_set_x, 1, 0),
				(position_set_y, 1, ":value"),
				(overlay_set_position, ":value_4", 1),
				(val_sub, ":value", 30),
			(try_end),
			(try_begin),
				(neg|party_slot_eq, "p_main_party", 108, 0),
				(create_mesh_overlay, ":value_4", "mesh_white_plane"),
				(overlay_set_color, ":value_4", 0),
				(overlay_set_alpha, ":value_4", 16),
				(position_set_x, 1, 14000),
				(position_set_y, 1, 4500),
				(overlay_set_size, ":value_4", 1),
				(position_set_x, 1, 0),
				(position_set_y, 1, 498),
				(overlay_set_position, ":value_4", 1),
			(try_end),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(gt, ":trigger_param_1", 250),
			(try_begin),
				(this_or_next|game_key_clicked, 23),
				(this_or_next|game_key_clicked, 24),
				(this_or_next|game_key_clicked, 25),
				(this_or_next|game_key_clicked, 30),
				(this_or_next|game_key_clicked, 31),
				(this_or_next|game_key_clicked, 32),
				(this_or_next|game_key_clicked, 33),
				(this_or_next|game_key_clicked, 34),
				(this_or_next|game_key_clicked, 35),
				(this_or_next|game_key_clicked, 36),
				(this_or_next|game_key_clicked, 37),
				(this_or_next|game_key_clicked, 38),
				(this_or_next|game_key_clicked, 29),
				(this_or_next|game_key_clicked, 40),
				(game_key_clicked, 39),
				(presentation_set_duration, 0),
			(else_try),
				(assign, ":value", -1),
				(try_begin),
					(game_key_clicked, 26),
					(assign, ":value", 4),
				(else_try),
					(game_key_clicked, 27),
					(assign, ":value", 5),
				(else_try),
					(game_key_clicked, 28),
					(assign, ":value", 6),
				(else_try),
					(key_clicked, "$key_order_7"),
					(assign, ":value", 7),
				(else_try),
					(key_clicked, "$key_order_8"),
					(assign, ":value", 8),
				(try_end),
				(neq, ":value", -1),
				(try_begin),
					(party_slot_eq, "p_main_party_backup", 108, 0),
					(presentation_set_duration, 0),
				(else_try),
					(try_begin),
						(party_slot_eq, "p_main_party_backup", 108, 26),
						(assign, ":value_2", 4),
						(assign, ":value_3", 8),
					(else_try),
						(party_slot_eq, "p_main_party_backup", 108, 27),
						(assign, ":value_2", 5),
						(assign, ":value_3", 8),
					(else_try),
						(party_slot_eq, "p_main_party_backup", 108, 28),
						(assign, ":value_2", 5),
						(assign, ":value_3", 7),
					(else_try),
						(party_slot_eq, "p_main_party_backup", 108, "$key_order_7"),
						(assign, ":value_2", 4),
						(assign, ":value_3", 7),
					(try_end),
					(store_sub, ":value_4", ":value_3", ":value_2"),
					(val_add, ":value_4", 1),
					(store_sub, ":value_5", ":value", ":value_2"),
					(is_between, ":value_5", 0, ":value_4"),
					(val_add, ":value_4", 1),
					(try_for_range, ":number", 0, ":value_4"),
						(troop_get_slot, ":tpe_presobj_number", "trp_tpe_presobj", ":number"),
						(neq, ":number", ":value_5"),
						(overlay_animate_to_alpha, ":tpe_presobj_number", 400, 0),
						(val_add, ":tpe_presobj_number", ":value_4"),
						(overlay_animate_to_alpha, ":tpe_presobj_number", 400, 0),
					(else_try),
						(overlay_animate_to_alpha, ":tpe_presobj_number", 1100, 0),
						(val_add, ":tpe_presobj_number", ":value_4"),
						(overlay_animate_to_alpha, ":tpe_presobj_number", 1100, 0),
					(try_end),
					(presentation_set_duration, 200),
				(try_end),
			(try_end)
		])
	]),

	("caba_camera_mode_display", prsntf_read_only, mesh_pic_ships_port, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(presentation_set_duration, 200),
			(try_begin),
				(main_hero_fallen),
				(str_store_string, 0, "@DeathCam"),
			(else_try),
				(str_store_string, 0, "@Camera"),
			(try_end),
			(try_begin),
				(eq, "$cam_mode", 0),
				(str_store_string, 1, "@Default"),
			(else_try),
				(eq, "$cam_mode", 1),
				(str_store_string, 1, "@Follow"),
			(else_try),
				(eq, "$cam_mode", 2),
				(str_store_string, 1, "@Free"),
			(try_end),
			(str_store_string, 0, "@{!}{s0} Mode: {s1}"),
			(create_text_overlay, "$g_presentation_obj_name_kingdom_1", 0),
			(overlay_set_color, "$g_presentation_obj_name_kingdom_1", 16777215),
			(position_set_x, 1, 1000),
			(position_set_y, 1, 1000),
			(overlay_set_size, "$g_presentation_obj_name_kingdom_1", 1),
			(position_set_x, 1, 750),
			(position_set_y, 1, 625),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_1", 1),
			(create_mesh_overlay, "$g_presentation_obj_name_kingdom_2", "mesh_order_frame"),
			(position_set_x, 1, 570),
			(position_set_y, 1, 725),
			(overlay_set_size, "$g_presentation_obj_name_kingdom_2", 1),
			(position_set_x, 1, 745),
			(position_set_y, 1, 622),
			(overlay_set_position, "$g_presentation_obj_name_kingdom_2", 1)
		]),

		(ti_on_presentation_run,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(ge, ":trigger_param_1", 1000),
			(overlay_animate_to_alpha, "$g_presentation_obj_name_kingdom_1", 400, 0),
			(overlay_animate_to_alpha, "$g_presentation_obj_name_kingdom_2", 400, 0)
		])
	]),

	("prebattle_custom_divisions", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(set_fixed_point_multiplier, 1000),
			(try_for_range, ":troop", "trp_mercenary_n_townsman", "trp_swadian_town_walker_m_average"),
				(troop_set_slot, "trp_temp_array_a", ":troop", -1),
				(troop_set_slot, "trp_temp_array_b", ":troop", -1),
				(troop_set_slot, "trp_temp_array_c", ":troop", -1),
			(try_end),
			(create_text_overlay, reg0, "@Troop Assignments", 98320),
			(overlay_set_color, reg0, 4294967295),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 680),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Split Troops into Secondary Divisions", 32784),
			(position_set_x, 1, 500),
			(position_set_y, 1, 650),
			(overlay_set_position, reg0, 1),
			(create_text_overlay, reg0, "@Troops by^ Primary Division", 16),
			(position_set_x, 1, 170),
			(position_set_y, 1, 600),
			(overlay_set_position, reg0, 1),
			(position_set_x, 2, 800),
			(position_set_y, 2, 800),
			(create_text_overlay, reg0, "@# in^Main Division", 16),
			(position_set_x, 1, 352),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 2),
			(create_text_overlay, reg0, "@Show/^Hide", 16),
			(position_set_x, 1, 425),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 2),
			(create_text_overlay, reg0, "@# in^Secondary Division", 16),
			(position_set_x, 1, 630),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 2),
			(create_text_overlay, reg0, "@Secondary^Division", 16),
			(position_set_x, 1, 755),
			(overlay_set_position, reg0, 1),
			(overlay_set_size, reg0, 2),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_bugdet_report_container", 0, 131072),
			(position_set_x, 1, 105),
			(position_set_y, 1, 80),
			(overlay_set_position, "$g_presentation_obj_bugdet_report_container", 1),
			(position_set_x, 1, 750),
			(position_set_y, 1, 500),
			(overlay_set_area_size, "$g_presentation_obj_bugdet_report_container", 1),
			(set_container_overlay, "$g_presentation_obj_bugdet_report_container"),
			(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
			(assign, ":var_3", 0),
			(try_for_range, ":number", 0, 9),
				(assign, ":value", ":num_companion_stacks_main_party"),
				(try_for_range, ":troop", 0, ":value"),
					(party_stack_get_troop_id, ":party_stack_troop_id_main_party_troop", "p_main_party", ":troop"),
					(neq, ":party_stack_troop_id_main_party_troop", "trp_player"),
					(neg|troop_is_hero, ":party_stack_troop_id_main_party_troop"),
					(troop_get_class, ":class_party_stack_troop_id_main_party_troop", ":party_stack_troop_id_main_party_troop"),
					(eq, ":class_party_stack_troop_id_main_party_troop", ":number"),
					(val_add, ":var_3", 1),
					(assign, ":value", 0),
				(try_end),
			(try_end),
			(assign, ":var_8", 20),
			(store_mul, ":value_2", ":num_companion_stacks_main_party", ":var_8"),
			(store_mul, ":value_3", ":var_3", 3),
			(val_mul, ":value_3", ":var_8"),
			(val_add, ":value_2", ":value_3"),
			(try_for_range, ":number", 0, 9),
				(assign, ":value_4", 0),
				(assign, ":value_5", 0),
				(assign, ":var_13", ":value_2"),
				(try_for_range, ":troop", 0, ":num_companion_stacks_main_party"),
					(party_stack_get_troop_id, ":party_stack_troop_id_main_party_troop", "p_main_party", ":troop"),
					(neq, ":party_stack_troop_id_main_party_troop", "trp_player"),
					(neg|troop_is_hero, ":party_stack_troop_id_main_party_troop"),
					(troop_get_class, ":class_party_stack_troop_id_main_party_troop", ":party_stack_troop_id_main_party_troop"),
					(eq, ":class_party_stack_troop_id_main_party_troop", ":number"),
					(party_stack_get_size, ":party_stack_size_main_party_troop", "p_main_party", ":troop"),
					(party_stack_get_num_wounded, ":party_stack_num_wounded_main_party_troop", "p_main_party", ":troop"),
					(val_sub, ":party_stack_size_main_party_troop", ":party_stack_num_wounded_main_party_troop"),
					(gt, ":party_stack_size_main_party_troop", 0),
					(assign, ":value_4", 1),
					(val_sub, ":value_2", ":var_8"),
					(try_begin),
						(eq, ":value_5", 1),
						(create_mesh_overlay, reg0, "mesh_white_plane"),
						(position_set_x, 1, 36200),
						(position_set_y, 1, 1000),
						(overlay_set_size, reg0, 1),
						(position_set_x, 1, 15),
						(position_set_y, 1, ":value_2"),
						(overlay_set_position, reg0, 1),
						(overlay_set_color, reg0, 16777215),
						(overlay_set_alpha, reg0, 80),
						(assign, ":value_5", 0),
					(else_try),
						(assign, ":value_5", 1),
					(try_end),
					(str_store_troop_name, 1, ":party_stack_troop_id_main_party_troop"),
					(create_text_overlay, reg0, 1),
					(position_set_x, 2, 900),
					(position_set_y, 2, 900),
					(overlay_set_size, reg0, 2),
					(position_set_x, 1, 15),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(assign, reg0, ":party_stack_size_main_party_troop"),
					(str_store_string, 1, "str_reg0"),
					(create_text_overlay, reg0, 1),
					(position_set_x, 1, 240),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(overlay_set_size, reg0, 2),
					(create_check_box_overlay, reg0, "mesh_checkbox_off", "mesh_checkbox_on"),
					(position_set_x, 1, 315),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(create_slider_overlay, reg0, 0, 51),
					(position_set_x, 1, 465),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(position_set_x, 1, 500),
					(position_set_y, 1, 500),
					(overlay_set_size, reg0, 1),
					(troop_set_slot, "trp_temp_array_a", ":party_stack_troop_id_main_party_troop", reg0),
					(create_text_overlay, reg0, "@{!}% to split"),
					(position_set_x, 1, 700),
					(position_set_y, 1, 700),
					(overlay_set_size, reg0, 1),
					(position_set_x, 1, 465),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(str_clear, 0),
					(create_text_overlay, reg0, 0),
					(overlay_set_size, reg0, 2),
					(position_set_x, 1, 520),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(create_combo_button_overlay, reg0),
					(try_for_range, ":number_2", 0, 9),
						(str_store_class_name, 0, ":number_2"),
						(overlay_add_item, reg0, 0),
					(try_end),
					(overlay_add_item, reg0, "@{!}- Disabled -"),
					(position_set_x, 1, 700),
					(position_set_y, 1, ":value_2"),
					(overlay_set_position, reg0, 1),
					(position_set_x, 1, 600),
					(position_set_y, 1, 600),
					(overlay_set_size, reg0, 1),
					(overlay_set_val, reg0, 9),
					(troop_get_slot, ":party_stack_troop_id_main_party_troop_temp_decision_seed", ":party_stack_troop_id_main_party_troop", slot_troop_temp_decision_seed),
					(troop_get_slot, ":party_stack_troop_id_main_party_troop_set_decision_seed", ":party_stack_troop_id_main_party_troop", slot_troop_set_decision_seed),
					(assign, ":value_6", 0),
					(try_begin),
						(this_or_next|gt, ":party_stack_troop_id_main_party_troop_temp_decision_seed", 0),
						(is_between, ":party_stack_troop_id_main_party_troop_set_decision_seed", 1, 9),
						(assign, ":value_6", 1),
					(try_end),
					(troop_get_slot, ":temp_array_a_party_stack_troop_id_main_party_troop", "trp_temp_array_a", ":party_stack_troop_id_main_party_troop"),
					(store_add, ":value", ":temp_array_a_party_stack_troop_id_main_party_troop", 4),
					(try_for_range, ":value_7", ":temp_array_a_party_stack_troop_id_main_party_troop", ":value"),
						(overlay_set_display, ":value_7", ":value_6"),
					(try_end),
					(eq, ":value_6", 1),
					(store_sub, ":value_7", ":temp_array_a_party_stack_troop_id_main_party_troop", 1),
					(overlay_set_val, ":value_7", 1),
					(try_begin),
						(is_between, ":party_stack_troop_id_main_party_troop_set_decision_seed", 0, 9),
						(val_add, ":value_7", 4),
						(overlay_set_val, ":value_7", ":party_stack_troop_id_main_party_troop_set_decision_seed"),
					(try_end),
					(gt, ":party_stack_troop_id_main_party_troop_temp_decision_seed", 0),
					(overlay_set_val, ":temp_array_a_party_stack_troop_id_main_party_troop", ":party_stack_troop_id_main_party_troop_temp_decision_seed"),
					(store_add, ":value_7", ":temp_array_a_party_stack_troop_id_main_party_troop", 1),
					(assign, reg0, ":party_stack_troop_id_main_party_troop_temp_decision_seed"),
					(overlay_set_text, ":value_7", "str_reg0_percent"),
					(store_mul, ":value_8", ":party_stack_troop_id_main_party_troop_temp_decision_seed", ":party_stack_size_main_party_troop"),
					(val_div, ":value_8", 100),
					(val_sub, ":party_stack_size_main_party_troop", ":value_8"),
					(val_sub, ":value_7", 3),
					(assign, reg0, ":party_stack_size_main_party_troop"),
					(overlay_set_text, ":value_7", "str_reg0"),
					(val_add, ":value_7", 4),
					(assign, reg0, ":value_8"),
					(overlay_set_text, ":value_7", "str_reg0"),
				(try_end),
				(eq, ":value_4", 1),
				(str_store_class_name, 1, ":number"),
				(create_text_overlay, reg0, 1, 65536),
				(position_set_x, 1, 1000),
				(position_set_y, 1, 1000),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":var_13"),
				(overlay_set_position, reg0, 1),
				(val_sub, ":value_2", ":var_8"),
				(create_mesh_overlay, reg0, "mesh_white_plane"),
				(position_set_x, 1, 37000),
				(position_set_y, 1, 150),
				(overlay_set_size, reg0, 1),
				(position_set_x, 1, 5),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(overlay_set_color, reg0, 0),
				(val_sub, ":value_2", ":var_8"),
				(val_sub, ":value_2", ":var_8"),
			(try_end),
			(set_container_overlay, -1),
			(create_check_box_overlay, "$g_presentation_obj_custom_battle_designer_20", "mesh_checkbox_off", "mesh_checkbox_on"),
			(position_set_x, 1, 830),
			(position_set_y, 1, 680),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_20", 1),
			(party_get_slot, ":main_party_town_player_odds", "p_main_party", slot_town_player_odds),
			(overlay_set_val, "$g_presentation_obj_custom_battle_designer_20", ":main_party_town_player_odds"),
			(str_store_string, 0, "@Disabled"),
			(str_store_string, 1, "@Split Active"),
			(str_store_string_reg, 2, ":main_party_town_player_odds"),
			(create_text_overlay, reg0, 2),
			(position_set_x, 1, 850),
			(position_set_y, 1, 675),
			(overlay_set_position, reg0, 1),
			(create_game_button_overlay, "$g_presentation_obj_battle_25", "@Clear All"),
			(position_set_x, 1, 420),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_battle_25", 1),
			(create_game_button_overlay, "$g_presentation_obj_battle_26", "@Discard Changes"),
			(position_set_x, 1, 580),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_battle_26", 1),
			(create_game_button_overlay, "$g_presentation_obj_battle_27", "@Save"),
			(position_set_x, 1, 740),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_battle_27", 1),
			(create_game_button_overlay, "$g_presentation_obj_battle_28", "@Done"),
			(position_set_x, 1, 900),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_battle_28", 1),
			(presentation_set_duration, 999999)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(presentation_set_duration, 0),
				(party_set_slot, "p_main_party", slot_town_player_odds, 0),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_28"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_27"),
				(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
				(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
					(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
					(troop_get_slot, ":temp_array_b_party_stack_troop_id_main_party_number", "trp_temp_array_b", ":party_stack_troop_id_main_party_number"),
					(try_begin),
						(gt, ":temp_array_b_party_stack_troop_id_main_party_number", -1),
						(troop_set_slot, ":party_stack_troop_id_main_party_number", slot_troop_temp_decision_seed, ":temp_array_b_party_stack_troop_id_main_party_number"),
					(try_end),
					(troop_get_slot, ":temp_array_c_party_stack_troop_id_main_party_number", "trp_temp_array_c", ":party_stack_troop_id_main_party_number"),
					(try_begin),
						(gt, ":temp_array_c_party_stack_troop_id_main_party_number", -1),
						(troop_set_slot, ":party_stack_troop_id_main_party_number", slot_troop_set_decision_seed, ":temp_array_c_party_stack_troop_id_main_party_number"),
					(try_end),
				(try_end),
				(party_set_slot, "p_main_party", slot_town_player_odds, 1),
				(overlay_set_val, "$g_presentation_obj_custom_battle_designer_20", 1),
				(store_add, ":value", "$g_presentation_obj_custom_battle_designer_20", 1),
				(overlay_set_text, ":value", "@Split Active"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_26"),
				(start_presentation, "prsnt_prebattle_custom_divisions"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_battle_25"),
				(try_for_range, ":party_stack_troop_id_main_party_number", "trp_mercenary_n_townsman", "trp_swadian_town_walker_m_average"),
					(troop_set_slot, ":party_stack_troop_id_main_party_number", slot_troop_set_decision_seed, -1),
					(troop_set_slot, ":party_stack_troop_id_main_party_number", slot_troop_temp_decision_seed, -1),
				(try_end),
				(party_set_slot, "p_main_party", slot_town_player_odds, 0),
				(start_presentation, "prsnt_prebattle_custom_divisions"),
			(else_try),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_20"),
				(str_store_string, 1, "@Split Active"),
				(str_store_string, 0, "@Disabled"),
				(str_store_string_reg, 2, ":trigger_param_2"),
				(store_add, ":value", ":trigger_param_1", 1),
				(overlay_set_text, ":value", 2),
				(party_set_slot, "p_main_party", slot_town_player_odds, ":trigger_param_2"),
			(else_try),
				(party_get_num_companion_stacks, ":num_companion_stacks_main_party", "p_main_party"),
				(try_for_range, ":number", 0, ":num_companion_stacks_main_party"),
					(party_stack_get_troop_id, ":party_stack_troop_id_main_party_number", "p_main_party", ":number"),
					(troop_get_slot, ":value", "trp_temp_array_a", ":party_stack_troop_id_main_party_number"),
					(eq, ":trigger_param_1", ":value"),
					(is_between, ":trigger_param_2", 0, 51),
					(troop_set_slot, "trp_temp_array_b", ":party_stack_troop_id_main_party_number", ":trigger_param_2"),
					(overlay_set_val, ":trigger_param_1", ":trigger_param_2"),
					(store_add, ":value_2", ":value", 1),
					(assign, reg0, ":trigger_param_2"),
					(overlay_set_text, ":value_2", "str_reg0_percent"),
					(party_stack_get_size, ":party_stack_size_main_party_number", "p_main_party", ":number"),
					(party_stack_get_num_wounded, ":party_stack_num_wounded_main_party_number", "p_main_party", ":number"),
					(val_sub, ":party_stack_size_main_party_number", ":party_stack_num_wounded_main_party_number"),
					(store_mul, ":value_3", ":trigger_param_2", ":party_stack_size_main_party_number"),
					(val_div, ":value_3", 100),
					(val_sub, ":party_stack_size_main_party_number", ":value_3"),
					(val_sub, ":value_2", 3),
					(assign, reg0, ":party_stack_size_main_party_number"),
					(overlay_set_text, ":value_2", "str_reg0"),
					(val_add, ":value_2", 4),
					(assign, reg0, ":value_3"),
					(overlay_set_text, ":value_2", "str_reg0"),
				(else_try),
					(val_sub, ":value", 1),
					(eq, ":trigger_param_1", ":value"),
					(store_add, ":value_4", ":value", 1),
					(store_add, ":value_5", ":value", 5),
					(try_for_range, ":value_2", ":value_4", ":value_5"),
						(overlay_set_display, ":value_2", ":trigger_param_2"),
					(try_end),
				(else_try),
					(val_add, ":value", 4),
					(eq, ":trigger_param_1", ":value"),
					(troop_set_slot, "trp_temp_array_c", ":party_stack_troop_id_main_party_number", ":trigger_param_2"),
				(try_end),
			(try_end)
		])
	]),

	("taragoth_lords_report", 0, mesh_background_general, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(create_text_overlay, reg0, "@CURRENT COMMANDER'S REPORT!", 4),
			(position_set_x, 1, 50),
			(position_set_y, 1, 650),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 1500),
			(position_set_y, 1, 1500),
			(overlay_set_size, reg0, 1),
			(assign, ":value", 40),
			(assign, ":value_2", 580),
			(position_set_x, 1, 50),
			(str_store_troop_name, 19, "$enlisted_lord"),
			(create_text_overlay, reg0, "@Your Commander: {s19}", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(call_script, "script_troop_get_player_relation", "$enlisted_lord"),
			(create_text_overlay, reg0, "@Commander Relation: {reg0}", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(store_faction_of_troop, reg1, "$enlisted_lord"),
			(str_store_faction_name, 20, reg1),
			(create_text_overlay, reg0, "@Enlisted Faction: {s20}", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(str_store_troop_name, 21, "$player_cur_troop"),
			(create_text_overlay, reg0, "@Current Rank: {s21}", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(quest_get_slot, ":freelancer_enlisted_object_state", "qst_freelancer_enlisted", slot_quest_object_state),
			(troop_get_xp, ":xp_player", "trp_player"),
			(val_sub, ":xp_player", ":freelancer_enlisted_object_state"),
			(str_store_string, 1, "@N/A"),
			(try_begin),
				(troop_get_upgrade_troop, ":upgrade_troop_player_cur_troop_0", "$player_cur_troop", 0),
				(gt, ":upgrade_troop_player_cur_troop_0", 1),
				(quest_get_slot, reg0, "qst_freelancer_enlisted", slot_quest_target_dna),
				(val_sub, reg0, ":xp_player"),
				(val_max, reg0, 0),
				(str_store_string, 1, "str_reg0"),
			(try_end),
			(create_text_overlay, reg0, "@Experience to next promotion: {s1}", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(store_current_day, ":current_day"),
			(quest_get_slot, ":freelancer_enlisted_target_state", "qst_freelancer_enlisted", slot_quest_target_state),
			(store_sub, ":value_3", ":current_day", ":freelancer_enlisted_target_state"),
			(assign, reg20, ":value_3"),
			(create_text_overlay, reg0, "@Days in service: {reg20}", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(store_character_level, ":character_level_player_cur_troop", "$player_cur_troop"),
			(store_mul, ":value_4", 10, ":character_level_player_cur_troop"),
			(assign, reg23, ":value_4"),
			(create_text_overlay, reg0, "@Current Wage: {reg23} denars.", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(quest_get_slot, ":freelancer_enlisted_target_item", "qst_freelancer_enlisted", slot_quest_target_item),
			(str_store_date, 25, ":freelancer_enlisted_target_item"),
			(create_text_overlay, reg0, "@Next Pay/Promotion day: {s25}", 4),
			(position_set_y, 1, ":value_2"),
			(overlay_set_position, reg0, 1),
			(val_sub, ":value_2", ":value"),
			(store_party_size_wo_prisoners, ":party_size_wo_prisoners_enlisted_party", "$enlisted_party"),
			(assign, reg26, ":party_size_wo_prisoners_enlisted_party"),
			(create_text_overlay, reg0, "@Army size: {reg26}", 4),
			(position_set_x, 1, 800),
			(position_set_y, 1, 60),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 900),
			(position_set_y, 1, 900),
			(overlay_set_size, reg0, 1),
			(create_text_overlay, reg0, "@Commander's Army", 4),
			(position_set_x, 1, 500),
			(position_set_y, 1, 430),
			(overlay_set_position, reg0, 1),
			(create_mesh_overlay, reg0, "mesh_pic_camp"),
			(position_set_x, 1, 450),
			(position_set_y, 1, 380),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 500),
			(position_set_y, 1, 500),
			(overlay_set_size, reg0, 1),
			(store_faction_of_troop, ":faction_of_troop_enlisted_lord", "$enlisted_lord"),
			(try_begin),
				(eq, ":faction_of_troop_enlisted_lord", "fac_kingdom_1"),
				(create_mesh_overlay, reg0, "mesh_pic_arms_swadian"),
			(else_try),
				(eq, ":faction_of_troop_enlisted_lord", "fac_kingdom_2"),
				(create_mesh_overlay, reg0, "mesh_pic_arms_vaegir"),
			(else_try),
				(eq, ":faction_of_troop_enlisted_lord", "fac_kingdom_3"),
				(create_mesh_overlay, reg0, "mesh_pic_arms_khergit"),
			(else_try),
				(eq, ":faction_of_troop_enlisted_lord", "fac_kingdom_4"),
				(create_mesh_overlay, reg0, "mesh_pic_arms_nord"),
			(else_try),
				(eq, ":faction_of_troop_enlisted_lord", "fac_kingdom_5"),
				(create_mesh_overlay, reg0, "mesh_pic_arms_rhodok"),
			(else_try),
				(eq, ":faction_of_troop_enlisted_lord", "fac_kingdom_6"),
				(create_mesh_overlay, reg0, "mesh_pic_sarranid_arms"),
			(try_end),
			(position_set_x, 1, 180),
			(position_set_y, 1, 80),
			(overlay_set_position, reg0, 1),
			(position_set_x, 1, 600),
			(position_set_y, 1, 600),
			(overlay_set_size, reg0, 1),
			(str_clear, 0),
			(create_text_overlay, "$g_presentation_obj_bugdet_report_container", 0, 131072),
			(position_set_x, 1, 560),
			(position_set_y, 1, 100),
			(overlay_set_position, "$g_presentation_obj_bugdet_report_container", 1),
			(position_set_x, 1, 400),
			(position_set_y, 1, 300),
			(overlay_set_area_size, "$g_presentation_obj_bugdet_report_container", 1),
			(set_container_overlay, "$g_presentation_obj_bugdet_report_container"),
			(assign, ":value", 40),
			(party_get_num_companion_stacks, ":num_companion_stacks_l_enlisted_party", "$enlisted_party"),
			(store_mul, ":value_2", ":num_companion_stacks_l_enlisted_party", ":value"),
			(try_for_range, ":number", 1, ":num_companion_stacks_l_enlisted_party"),
				(party_stack_get_troop_id, ":party_stack_troop_id_enlisted_party_number", "$enlisted_party", ":number"),
				(party_stack_get_size, ":party_stack_size_enlisted_party_number", "$enlisted_party", ":number"),
				(party_stack_get_num_wounded, ":party_stack_num_wounded_enlisted_party_number", "$enlisted_party", ":number"),
				(val_sub, ":party_stack_size_enlisted_party_number", ":party_stack_num_wounded_enlisted_party_number"),
				(str_store_troop_name, 1, ":party_stack_troop_id_enlisted_party_number"),
				(create_text_overlay, reg0, 1),
				(position_set_x, 1, 25),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(assign, reg0, ":party_stack_size_enlisted_party_number"),
				(create_text_overlay, reg0, "str_reg0"),
				(position_set_x, 1, 325),
				(position_set_y, 1, ":value_2"),
				(overlay_set_position, reg0, 1),
				(position_set_x, 1, 900),
				(position_set_y, 1, 900),
				(overlay_set_size, reg0, 1),
				(val_sub, ":value_2", ":value"),
			(try_end),
			(set_container_overlay, -1),
			(create_game_button_overlay, "$g_presentation_obj_custom_battle_designer_19", "@Done", 16),
			(position_set_x, 1, 500),
			(position_set_y, 1, 25),
			(overlay_set_position, "$g_presentation_obj_custom_battle_designer_19", 1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_presentation_obj_custom_battle_designer_19"),
				(presentation_set_duration, 0),
			(try_end)
		])
	]),

	("equipment_overview", 0, mesh_lco_background_split, 
	[(ti_on_presentation_load,
		[
			(call_script, "script_lco_initialize_presentation"),
			(call_script, "script_lco_create_label", "str_lco_i_title_companions", 250, 714, 1000, 16),
			(str_store_troop_name, 40, "trp_player"),
			(call_script, "script_lco_create_label", "str_lco_s40", 750, 714, 1000, 16),
			(str_clear, 40),
			(call_script, "script_lco_create_mesh", "mesh_pic_camp", -300, 138, 750, 750),
			(call_script, "script_lco_create_mesh", "mesh_pic_messenger", 110, 138, 750, 750),
			(call_script, "script_lco_create_label", "str_lco_i_ae_with", 275, 175, 750, 0),
			(call_script, "script_lco_create_label", "str_lco_i_ae_with", 275, 175, 750, 0),
			(call_script, "script_lco_create_checkbox", "str_lco_i_ae_with_horses", 275, 150, "$g_lco_auto_horses"),
			(assign, "$g_lco_cb_0", reg0),
			(call_script, "script_lco_create_checkbox", "str_lco_i_ae_with_armors", 375, 150, "$g_lco_auto_armors"),
			(assign, "$g_lco_cb_1", reg0),
			(call_script, "script_lco_create_checkbox", "str_lco_i_ae_with_shields", 275, 125, "$g_lco_auto_shields"),
			(assign, "$g_lco_cb_2", reg0),
			(call_script, "script_lco_create_button", "str_lco_i_ae_companion", 355, 75, 190, 42),
			(assign, "$g_lco_auto_equip", reg0),
			(call_script, "script_lco_create_button", "str_lco_i_ae_everyone", 355, 25, 190, 42),
			(assign, "$g_lco_auto_equip_all", reg0),
			(call_script, "script_lco_create_label", "str_lco_i_hero_panel_title", 25, 652, 750, 0),
			(call_script, "script_lco_create_label", "str_lco_i_hero_panel_title", 25, 652, 750, 0),
			(call_script, "script_lco_create_container", 0, 125, 250, 527, 1),
			(store_mul, ":value", "$g_lco_heroes", 25),
			(val_sub, ":value", 25),
			(val_max, ":value", 500),
			(try_for_range, ":number", 0, "$g_lco_heroes"),
				(troop_get_slot, ":companions_overview_number", "trp_companions_overview", ":number"),
				(store_add, ":value_2", "$g_lco_heroes", ":number"),
				(troop_set_slot, "trp_companions_overview", ":value_2", ":companions_overview_number"),
				(store_mul, ":value_3", ":number", 25),
				(store_sub, ":value_3", ":value", ":value_3"),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 25, ":value_3", 310, 300),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
			(try_end),
			(store_mul, ":value_3", "$g_lco_active_hero", 25),
			(store_sub, ":value_3", ":value", ":value_3"),
			(call_script, "script_lco_create_mesh", "mesh_lco_panel_down", 25, ":value_3", 310, 300),
			(assign, "$g_lco_active_panel", reg0),
			(val_add, ":value", 1),
			(try_for_range, ":number", 0, "$g_lco_heroes"),
				(store_add, ":value_2", "$g_lco_heroes", ":number"),
				(troop_get_slot, ":companions_overview_number", "trp_companions_overview", ":value_2"),
				(store_mul, ":value_3", ":number", 25),
				(store_sub, ":value_3", ":value", ":value_3"),
				(call_script, "script_lco_troop_name_to_s40", ":companions_overview_number"),
				(call_script, "script_lco_create_label", "str_lco_s40", 30, ":value_3", 750, 0),
			(try_end),
			(str_clear, 40),
			(set_container_overlay, -1),
			(store_mul, ":number", "$g_lco_heroes", 2),
			(call_script, "script_lco_create_label", "str_lco_i_weapons", 272, 650, 750, 0),
			(call_script, "script_lco_create_label", "str_lco_i_weapons", 272, 650, 750, 0),
			(try_for_range, reg1, 0, 4),
				(store_mul, ":value_3", reg1, 25),
				(store_sub, ":value_3", 625, ":value_3"),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 272, ":value_3", 310, 300),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
				(val_add, ":number", 1),
			(try_end),
			(call_script, "script_lco_create_label", "str_lco_i_armor", 272, 500, 750, 0),
			(call_script, "script_lco_create_label", "str_lco_i_armor", 272, 500, 750, 0),
			(try_for_range, reg1, 0, 4),
				(store_mul, ":value_3", reg1, 25),
				(store_sub, ":value_3", 475, ":value_3"),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 272, ":value_3", 310, 300),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
				(val_add, ":number", 1),
			(try_end),
			(call_script, "script_lco_create_label", "str_lco_i_horse", 272, 350, 750, 0),
			(call_script, "script_lco_create_label", "str_lco_i_horse", 272, 350, 750, 0),
			(call_script, "script_lco_create_mesh", "mesh_lco_panel", 272, 325, 310, 300),
			(troop_set_slot, "trp_companions_overview", ":number", reg0),
			(val_add, ":number", 1),
			(call_script, "script_lco_create_label", "str_lco_i_books", 272, 275, 750, 0),
			(call_script, "script_lco_create_label", "str_lco_i_books", 272, 275, 750, 0),
			(try_for_range, reg1, 0, 2),
				(store_mul, ":value_3", reg1, 25),
				(store_sub, ":value_3", 250, ":value_3"),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 272, ":value_3", 310, 300),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
				(val_add, ":number", 1),
			(try_end),
			(str_clear, 40),
			(try_for_range, reg1, 0, 4),
				(store_mul, ":value_3", reg1, 25),
				(store_sub, ":value_3", 626, ":value_3"),
				(call_script, "script_lco_create_label", 40, 277, ":value_3", 750, 0),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
				(val_add, ":number", 1),
			(try_end),
			(try_for_range, reg1, 0, 4),
				(store_mul, ":value_3", reg1, 25),
				(store_sub, ":value_3", 476, ":value_3"),
				(call_script, "script_lco_create_label", 40, 277, ":value_3", 750, 0),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
				(val_add, ":number", 1),
			(try_end),
			(call_script, "script_lco_create_label", 40, 277, 326, 750, 0),
			(troop_set_slot, "trp_companions_overview", ":number", reg0),
			(val_add, ":number", 1),
			(try_for_range, reg1, 0, 2),
				(store_mul, ":value_3", reg1, 25),
				(store_sub, ":value_3", 251, ":value_3"),
				(call_script, "script_lco_create_label", 40, 277, ":value_3", 750, 0),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
				(val_add, ":number", 1),
			(try_end),
			(call_script, "script_lco_create_label", "str_lco_i_weapons", 512, 650, 750, 0),
			(call_script, "script_lco_create_label", "str_lco_i_weapons", 512, 650, 750, 0),
			(try_for_range, reg1, 0, 4),
				(store_mul, ":value_3", reg1, 25),
				(store_sub, ":value_3", 625, ":value_3"),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 512, ":value_3", 310, 300),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
				(val_add, ":number", 1),
			(try_end),
			(call_script, "script_lco_create_label", "str_lco_i_armor", 512, 500, 750, 0),
			(call_script, "script_lco_create_label", "str_lco_i_armor", 512, 500, 750, 0),
			(try_for_range, reg1, 0, 4),
				(store_mul, ":value_3", reg1, 25),
				(store_sub, ":value_3", 475, ":value_3"),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 512, ":value_3", 310, 300),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
				(val_add, ":number", 1),
			(try_end),
			(call_script, "script_lco_create_label", "str_lco_i_horse", 512, 350, 750, 0),
			(call_script, "script_lco_create_label", "str_lco_i_horse", 512, 350, 750, 0),
			(call_script, "script_lco_create_mesh", "mesh_lco_panel", 512, 325, 310, 300),
			(troop_set_slot, "trp_companions_overview", ":number", reg0),
			(val_add, ":number", 1),
			(try_for_range, reg1, 0, 4),
				(store_mul, ":value_3", reg1, 25),
				(store_sub, ":value_3", 626, ":value_3"),
				(call_script, "script_lco_create_label", 40, 517, ":value_3", 750, 0),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
				(val_add, ":number", 1),
			(try_end),
			(try_for_range, reg1, 0, 4),
				(store_mul, ":value_3", reg1, 25),
				(store_sub, ":value_3", 476, ":value_3"),
				(call_script, "script_lco_create_label", 40, 517, ":value_3", 750, 0),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
				(val_add, ":number", 1),
			(try_end),
			(call_script, "script_lco_create_label", 40, 517, 326, 750, 0),
			(troop_set_slot, "trp_companions_overview", ":number", reg0),
			(val_add, ":number", 1),
			(call_script, "script_lco_create_label", "str_lco_i_inventory", 750, 652, 750, 0),
			(call_script, "script_lco_create_label", "str_lco_i_inventory", 750, 652, 750, 0),
			(call_script, "script_lco_create_image_button", "mesh_lco_sort_inventory", "mesh_lco_sort_inventory_down", 935, 655, 200, 200),
			(assign, "$g_lco_sort_inventory", reg0),
			(call_script, "script_lco_create_container", 750, 125, 215, 527, 1),
			(store_mul, ":value_4", "$g_lco_inv_slots", 25),
			(val_sub, ":value_4", 25),
			(val_max, ":value_4", 500),
			(try_for_range, reg1, 0, "$g_lco_inv_slots"),
				(store_mul, ":value_3", reg1, 25),
				(store_sub, ":value_3", ":value_4", ":value_3"),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 0, ":value_3", 300, 300),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
				(val_add, ":number", 1),
			(try_end),
			(try_for_range, reg1, 0, "$g_lco_inv_slots"),
				(store_mul, ":value_3", reg1, 25),
				(store_sub, ":value_3", ":value_4", ":value_3"),
				(val_add, ":value_3", 1),
				(call_script, "script_lco_create_label", "str_empty_string", 5, ":value_3", 750, 0),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
				(val_add, ":number", 1),
			(try_end),
			(set_container_overlay, -1),
			(call_script, "script_lco_create_label", "str_lco_i_discard", 512, 275, 750, 0),
			(call_script, "script_lco_create_label", "str_lco_i_discard", 512, 275, 750, 0),
			(call_script, "script_lco_create_button", "str_lco_i_retrieve", 605, 25, 190, 42),
			(assign, "$g_lco_retrieve", reg0),
			(call_script, "script_lco_create_container", 515, 75, 200, 202, 1),
			(store_mul, ":value_4", "$g_lco_garb_slots", 25),
			(val_sub, ":value_4", 25),
			(val_max, ":value_4", 175),
			(try_for_range, reg1, 0, "$g_lco_garb_slots"),
				(store_mul, ":value_3", reg1, 25),
				(store_sub, ":value_3", ":value_4", ":value_3"),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 0, ":value_3", 282, 300),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
				(val_add, ":number", 1),
			(try_end),
			(val_add, ":value_4", 1),
			(try_for_range, reg1, 0, "$g_lco_garb_slots"),
				(store_mul, ":value_3", reg1, 25),
				(store_sub, ":value_3", ":value_4", ":value_3"),
				(call_script, "script_lco_create_label", "str_empty_string", 5, ":value_3", 750, 0),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
				(val_add, ":number", 1),
			(try_end),
			(set_container_overlay, -1),
			(call_script, "script_lco_create_mesh", "mesh_lco_gold_icon", 775, 82, 250, 250),
			(store_troop_gold, reg60, "trp_player"),
			(call_script, "script_lco_create_label", "str_lco_i_denars", 810, 90, 850, 0),
			(overlay_set_color, reg0, 16776960),
			(call_script, "script_lco_create_label", "str_lco_i_denars", 810, 90, 850, 0),
			(call_script, "script_lco_create_label", "str_lco_i_denars", 810, 90, 850, 0),
			(call_script, "script_lco_create_container", 0, 0, 225, 27, 1),
			(assign, "$g_lco_dragging_panel", reg0),
			(overlay_set_display, "$g_lco_dragging_panel", 0),
			(call_script, "script_lco_create_mesh", "mesh_lco_panel", 0, 0, 310, 300),
			(call_script, "script_lco_create_label", 40, 5, 1, 750, 0),
			(assign, "$g_lco_dragging_text", reg0),
			(set_container_overlay, -1),
			(call_script, "script_lco_fill_hero_panels"),
			(call_script, "script_lco_fill_player_panels")
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_lco_return"),
				(try_begin),
					(eq, "$g_lco_dragging", 1),
					(call_script, "script_lco_cancel_drag_item"),
				(try_end),
				(try_begin),
					(eq, "$g_lco_dragging", 1),
					(display_message, "str_lco_error_drop_first", 0x00ff4040),
				(else_try),
					(call_script, "script_lco_clear_all_items", "$g_lco_garbage_troop"),
					(assign, "$g_lco_garbage_troop", "trp_companions_discard"),
					(jump_to_menu, "mnu_lco_auto_return"),
					(presentation_set_duration, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_retrieve"),
				(call_script, "script_lco_retrieve_discarded"),
				(call_script, "script_lco_fill_player_panels"),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_sort_inventory"),
				(troop_sort_inventory, "trp_player"),
				(call_script, "script_lco_fill_player_panels"),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_cb_0"),
				(assign, "$g_lco_auto_horses", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_cb_1"),
				(assign, "$g_lco_auto_armors", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_cb_2"),
				(assign, "$g_lco_auto_shields", ":trigger_param_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_inc_0"),
				(assign, "$g_lco_include_companions", ":trigger_param_2"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_inc_1"),
				(assign, "$g_lco_include_lords", ":trigger_param_2"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_inc_2"),
				(assign, "$g_lco_include_regulars", ":trigger_param_2"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_switch_page_0"),
				(assign, "$g_lco_page", 0),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_switch_page_1"),
				(assign, "$g_lco_page", 1),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_switch_page_2"),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_auto_equip"),
				(try_begin),
					(store_add, ":value", "$g_lco_heroes", "$g_lco_active_hero"),
					(troop_get_slot, ":companions_overview_value", "trp_companions_overview", ":value"),
					(call_script, "script_cf_lco_controllable", ":companions_overview_value"),
					(call_script, "script_lco_backup_inventory", ":companions_overview_value"),
					(call_script, "script_lco_hero_grab_equipment", ":companions_overview_value"),
					(troop_equip_items, ":companions_overview_value"),
					(call_script, "script_lco_hero_return_equipment", ":companions_overview_value"),
					(call_script, "script_lco_retrieve_inventory", ":companions_overview_value"),
					(troop_get_type, reg60, ":companions_overview_value"),
					(str_store_troop_name, 41, ":companions_overview_value"),
					(display_message, "str_lco_message_hero_ae"),
					(call_script, "script_lco_fill_hero_panels"),
					(call_script, "script_lco_fill_player_panels"),
				(else_try),
					(display_message, "str_lco_drop_error_control", 0x00ff4040),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_auto_equip_all"),
				(store_add, ":value_2", "$g_lco_heroes", "$g_lco_heroes"),
				(try_for_range, ":value", "$g_lco_heroes", ":value_2"),
					(troop_get_slot, ":companions_overview_value", "trp_companions_overview", ":value"),
					(call_script, "script_cf_lco_controllable", ":companions_overview_value"),
					(call_script, "script_lco_backup_inventory", ":companions_overview_value"),
					(call_script, "script_lco_hero_grab_equipment", ":companions_overview_value"),
					(troop_equip_items, ":companions_overview_value"),
					(call_script, "script_lco_hero_return_equipment", ":companions_overview_value"),
					(call_script, "script_lco_retrieve_inventory", ":companions_overview_value"),
				(try_end),
				(display_message, "str_lco_message_all_heroes_ae"),
				(call_script, "script_lco_fill_hero_panels"),
				(call_script, "script_lco_fill_player_panels"),
			(try_end)
		]),

		(ti_on_presentation_mouse_press,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_2", 0),
				(try_begin),
					(eq, "$g_lco_panel_found", 0),
					(try_for_range, ":number", 0, "$g_lco_heroes"),
						(troop_slot_eq, "trp_companions_overview", ":number", ":trigger_param_1"),
						(assign, "$g_lco_panel_found", 1),
						(try_begin),
							(this_or_next|key_is_down, 29),
							(key_is_down, 157),
							(try_begin),
								(eq, "$g_lco_dragging", 1),
								(store_add, ":value", "$g_lco_heroes", ":number"),
								(troop_get_slot, ":companions_overview_value", "trp_companions_overview", ":value"),
								(call_script, "script_cf_lco_controllable", ":companions_overview_value"),
								(try_begin),
									(call_script, "script_cf_lco_auto_offer_item", ":companions_overview_value", "$g_lco_drag_item", "$g_lco_drag_modifier", "$g_lco_drag_quantity"),
									(try_begin),
										(ge, reg0, 0),
										(assign, "$g_lco_drag_item", reg0),
										(assign, "$g_lco_drag_modifier", reg1),
										(assign, "$g_lco_drag_quantity", reg2),
										(assign, "$g_lco_drag_quantity_max", reg3),
										(call_script, "script_lco_item_name_to_s41", "$g_lco_drag_item", "$g_lco_drag_modifier", "$g_lco_drag_quantity", "$g_lco_drag_quantity_max"),
										(overlay_set_text, "$g_lco_dragging_text", 41),
									(else_try),
										(assign, "$g_lco_drag_item", -1),
										(assign, "$g_lco_drag_modifier", 0),
										(assign, "$g_lco_drag_quantity", 0),
										(assign, "$g_lco_drag_quantity_max", 0),
										(overlay_set_display, "$g_lco_dragging_panel", 0),
										(assign, "$g_lco_dragging", 0),
									(try_end),
									(call_script, "script_lco_fill_hero_panels"),
									(call_script, "script_lco_fill_player_panels"),
								(else_try),
									(str_store_troop_name, 40, ":companions_overview_value"),
									(call_script, "script_lco_item_name_to_s41", "$g_lco_drag_item", "$g_lco_drag_modifier", "$g_lco_drag_quantity", "$g_lco_drag_quantity_max"),
									(str_store_string, 40, "str_lco_message_hero_no_need"),
									(display_message, 0x00000028, 0x00ff4040),
								(try_end),
							(try_end),
						(else_try),
							(this_or_next|key_is_down, 56),
							(key_is_down, 184),
							(call_script, "script_lco_set_active_hero", ":number"),
							(store_add, ":value", "$g_lco_heroes", ":number"),
							(troop_get_slot, "$g_lco_target", "trp_companions_overview", ":value"),
							(assign, "$g_lco_operation", 2),
							(jump_to_menu, "mnu_lco_auto_return"),
							(presentation_set_duration, 0),
						(else_try),
							(call_script, "script_lco_set_active_hero", ":number"),
						(try_end),
					(try_end),
				(try_end),
				(try_begin),
					(eq, "$g_lco_panel_found", 0),
					(call_script, "script_cf_lco_is_active_panel", ":trigger_param_1"),
					(assign, "$g_lco_panel_found", 1),
					(call_script, "script_lco_get_slot_details_for_panel", ":trigger_param_1"),
					(assign, ":var_6", reg0),
					(assign, ":var_7", reg1),
					(assign, ":value_2", reg2),
					(assign, ":value_3", reg3),
					(assign, ":value_4", reg4),
					(assign, ":value_5", reg5),
					(try_begin),
						(eq, "$g_lco_dragging", 0),
						(try_begin),
							(ge, ":value_2", 0),
							(try_begin),
								(this_or_next|key_is_down, 29),
								(key_is_down, 157),
								(try_begin),
									(eq, ":var_6", "trp_player"),
									(store_add, ":value", "$g_lco_heroes", "$g_lco_active_hero"),
									(troop_get_slot, ":companions_overview_value", "trp_companions_overview", ":value"),
									(try_begin),
										(call_script, "script_cf_lco_auto_offer_item", ":companions_overview_value", ":value_2", ":value_3", ":value_4"),
										(try_begin),
											(ge, reg0, 0),
											(troop_set_inventory_slot, ":var_6", ":var_7", reg0),
											(troop_set_inventory_slot_modifier, ":var_6", ":var_7", reg1),
										(else_try),
											(troop_set_inventory_slot, ":var_6", ":var_7", -1),
										(try_end),
										(call_script, "script_lco_fill_hero_panels"),
										(call_script, "script_lco_fill_player_panels"),
									(else_try),
										(str_store_troop_name, 40, ":companions_overview_value"),
										(call_script, "script_lco_item_name_to_s41", ":value_2", ":value_3", ":value_4", ":value_5"),
										(str_store_string, 40, "str_lco_message_hero_no_need"),
										(display_message, 0x00000028, 0x00ff4040),
									(try_end),
								(else_try),
									(assign, ":value_6", 0),
									(try_begin),
										(call_script, "script_cf_lco_controllable", ":var_6"),
										(troop_get_inventory_capacity, ":inventory_capacity_player", "trp_player"),
										(try_for_range, ":number", 10, ":inventory_capacity_player"),
											(eq, ":value_6", 0),
											(troop_get_inventory_slot, ":inventory_slot_player_number", "trp_player", ":number"),
											(lt, ":inventory_slot_player_number", 0),
											(troop_set_inventory_slot, "trp_player", ":number", ":value_2"),
											(troop_set_inventory_slot_modifier, "trp_player", ":number", ":value_3"),
											(try_begin),
												(gt, ":value_4", 0),
												(troop_inventory_slot_set_item_amount, ":value_4"),
											(try_end),
											(troop_set_inventory_slot, ":var_6", ":var_7", -1),
											(assign, ":value_6", 1),
											(assign, ":inventory_capacity_player", 0),
										(try_end),
										(try_begin),
											(eq, ":value_6", 0),
											(display_message, "str_lco_error_inv_full", 0x00ff4040),
										(else_try),
											(call_script, "script_lco_fill_hero_panels"),
											(call_script, "script_lco_fill_player_panels"),
										(try_end),
									(else_try),
										(str_store_troop_name, 40, ":companions_overview_value"),
										(display_message, "str_lco_drop_error_control", 0x00ff4040),
									(try_end),
								(try_end),
							(else_try),
								(this_or_next|key_is_down, 56),
								(key_is_down, 184),
								(try_begin),
									(call_script, "script_cf_lco_controllable", ":var_6"),
									(neq, ":var_6", "$g_lco_garbage_troop"),
									(call_script, "script_lco_discard_item", ":value_2", ":value_3", ":value_4"),
									(troop_set_inventory_slot, ":var_6", ":var_7", -1),
									(call_script, "script_lco_fill_hero_panels"),
									(call_script, "script_lco_fill_player_panels"),
								(try_end),
							(else_try),
								(this_or_next|key_is_down, 42),
								(key_is_down, 54),
								(eq, ":var_6", "trp_player"),
								(assign, ":value_7", "$g_lco_heroes"),
								(assign, ":value_8", 0),
								(try_for_range, ":number", 0, ":value_7"),
									(store_add, ":value", "$g_lco_heroes", ":number"),
									(troop_get_slot, ":companions_overview_value", "trp_companions_overview", ":value"),
									(call_script, "script_cf_lco_auto_offer_item", ":companions_overview_value", ":value_2", ":value_3", ":value_4"),
									(str_store_troop_name, 40, ":companions_overview_value"),
									(troop_get_type, reg4, ":companions_overview_value"),
									(call_script, "script_lco_item_name_to_s41", ":value_2", ":value_3", ":value_4", ":value_5"),
									(try_begin),
										(ge, reg0, 0),
										(str_store_string, 39, 41),
										(call_script, "script_lco_item_name_to_s41", reg0, reg1, reg2, reg3),
										(display_message, "str_lco_message_hero_replaced"),
									(else_try),
										(display_message, "str_lco_message_hero_equipped"),
										(assign, ":value_7", 0),
									(try_end),
									(assign, ":value_2", reg0),
									(assign, ":value_3", reg1),
									(assign, ":value_4", reg2),
									(assign, ":value_5", reg3),
									(assign, ":value_8", 1),
								(try_end),
								(try_begin),
									(ge, ":value_2", 0),
									(troop_set_inventory_slot, ":var_6", ":var_7", ":value_2"),
									(troop_set_inventory_slot_modifier, ":var_6", ":var_7", ":value_2"),
								(else_try),
									(troop_set_inventory_slot, ":var_6", ":var_7", -1),
								(try_end),
								(try_begin),
									(eq, ":value_8", 1),
									(call_script, "script_lco_fill_hero_panels"),
									(call_script, "script_lco_fill_player_panels"),
								(else_try),
									(call_script, "script_lco_item_name_to_s41", ":value_2", ":value_3", ":value_4", ":value_5"),
									(display_message, "str_lco_message_nobody_needs", 0x00ff4040),
								(try_end),
							(else_try),
								(call_script, "script_lco_drag_item", ":var_6", ":var_7"),
								(call_script, "script_lco_fill_hero_panels"),
								(call_script, "script_lco_fill_player_panels"),
							(try_end),
						(try_end),
					(else_try),
						(try_begin),
							(call_script, "script_cf_lco_can_drop_item", ":var_6", ":var_7", "$g_lco_drag_item", "$g_lco_drag_modifier"),
							(call_script, "script_lco_drop_item", ":var_6", ":var_7"),
							(call_script, "script_lco_fill_hero_panels"),
							(call_script, "script_lco_fill_player_panels"),
						(else_try),
							(display_message, reg0, 0x00ff4040),
						(try_end),
					(try_end),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(set_fixed_point_multiplier, 1000),
			(assign, "$g_lco_panel_found", 0),
			(try_begin),
				(key_clicked, 1),
				(try_begin),
					(eq, "$g_lco_dragging", 1),
					(call_script, "script_lco_cancel_drag_item"),
				(try_end),
				(try_begin),
					(eq, "$g_lco_dragging", 1),
					(display_message, "str_lco_error_drop_first", 0x00ff4040),
				(else_try),
					(call_script, "script_lco_clear_all_items", "$g_lco_garbage_troop"),
					(assign, "$g_lco_garbage_troop", "trp_companions_discard"),
					(jump_to_menu, "mnu_lco_auto_return"),
					(presentation_set_duration, 0),
				(try_end),
			(try_end),
			(try_begin),
				(key_clicked, 15),
				(try_begin),
					(this_or_next|key_is_down, 42),
					(key_is_down, 54),
					(store_add, ":value", "$g_lco_active_hero", "$g_lco_heroes"),
					(val_sub, ":value", 1),
					(val_mod, ":value", "$g_lco_heroes"),
					(call_script, "script_lco_set_active_hero", ":value"),
				(else_try),
					(this_or_next|key_is_down, 29),
					(key_is_down, 157),
					(assign, "$g_lco_page", 0),
					(presentation_set_duration, 0),
				(else_try),
					(neg|key_is_down, 56),
					(neg|key_is_down, 184),
					(store_add, ":value", "$g_lco_active_hero", 1),
					(val_mod, ":value", "$g_lco_heroes"),
					(call_script, "script_lco_set_active_hero", ":value"),
				(try_end),
			(try_end),
			(try_begin),
				(key_clicked, 225),
				(eq, "$g_lco_dragging", 1),
				(call_script, "script_lco_cancel_drag_item"),
				(eq, "$g_lco_dragging", 0),
				(call_script, "script_lco_fill_hero_panels"),
				(call_script, "script_lco_fill_player_panels"),
			(try_end),
			(try_begin),
				(eq, "$g_lco_dragging", 1),
				(mouse_get_position, 60),
				(position_get_x, reg10, 60),
				(position_get_y, reg11, 60),
				(val_add, reg10, 15),
				(val_sub, reg11, 40),
				(position_set_x, 60, reg10),
				(position_set_y, 60, reg11),
				(overlay_set_position, "$g_lco_dragging_panel", 60),
			(try_end),
			(try_begin),
				(eq, "$g_lco_popup_active", 1),
				(mouse_get_position, 60),
				(position_get_y, reg11, 60),
				(val_sub, reg11, 90),
				(position_set_y, 60, reg11),
				(show_item_details_with_modifier, "$g_lco_popup_item", "$g_lco_popup_modifier", 60, 1),
			(try_end)
		]),

		(ti_on_presentation_mouse_enter_leave,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_2", 1),
				(try_begin),
					(eq, "$g_lco_popup_overlay", ":trigger_param_1"),
					(try_begin),
						(eq, "$g_lco_popup_active", 1),
						(assign, "$g_lco_popup_active", 0),
						(close_item_details),
					(try_end),
				(try_end),
			(else_try),
				(call_script, "script_cf_lco_is_active_panel", ":trigger_param_1"),
				(call_script, "script_lco_get_slot_details_for_panel", ":trigger_param_1"),
				(try_begin),
					(ge, reg2, 0),
					(assign, "$g_lco_popup_active", 1),
					(assign, "$g_lco_popup_overlay", ":trigger_param_1"),
					(assign, "$g_lco_popup_item", reg2),
					(assign, "$g_lco_popup_modifier", reg3),
				(else_try),
					(eq, "$g_lco_popup_active", 1),
					(assign, "$g_lco_popup_active", 0),
					(close_item_details),
				(try_end),
			(try_end)
		])
	]),

	("companions_overview", 0, mesh_lco_background, 
	[(ti_on_presentation_load,
		[
			(call_script, "script_lco_initialize_presentation"),
			(call_script, "script_lco_create_mesh", "mesh_pic_camp", 0, 0, 1000, 1000),
			(call_script, "script_lco_create_button", "str_lco_i_character", 355, 25, 190, 42),
			(assign, "$g_lco_dialog", reg0),
			(store_mul, ":value", "$g_lco_heroes", 25),
			(val_add, ":value", 2),
			(assign, ":value_2", 0),
			(try_begin),
				(lt, ":value", 525),
				(store_sub, ":value_2", 525, ":value"),
			(try_end),
			(store_mul, ":value_3", "$g_lco_heroes", 25),
			(val_max, ":value_3", 525),
			(val_sub, ":value_3", 25),
			(call_script, "script_lco_create_label", "str_lco_i_hero_panel_title", 25, 652, 750, 0),
			(call_script, "script_lco_create_label", "str_lco_i_hero_panel_title", 25, 652, 750, 0),
			(call_script, "script_lco_create_container", 25, 125, 925, 527, 1),
			(assign, "$g_lco_main_container", reg0),
			(try_for_range, ":number", 0, "$g_lco_heroes"),
				(troop_get_slot, ":companions_overview_number", "trp_companions_overview", ":number"),
				(store_add, ":value_4", "$g_lco_heroes", ":number"),
				(troop_set_slot, "trp_companions_overview", ":value_4", ":companions_overview_number"),
				(store_mul, ":value_5", ":number", 25),
				(store_sub, ":value_5", ":value_3", ":value_5"),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 0, ":value_5", 310, 300),
				(troop_set_slot, "trp_companions_overview", ":number", reg0),
			(try_end),
			(store_mul, ":value_5", "$g_lco_active_hero", 25),
			(store_sub, ":value_5", ":value_3", ":value_5"),
			(call_script, "script_lco_create_mesh", "mesh_lco_panel_down", 0, ":value_5", 310, 300),
			(assign, "$g_lco_active_panel", reg0),
			(val_add, ":value_3", 1),
			(try_for_range, ":number", 0, "$g_lco_heroes"),
				(store_add, ":value_4", "$g_lco_heroes", ":number"),
				(troop_get_slot, ":companions_overview_number", "trp_companions_overview", ":value_4"),
				(store_mul, ":value_5", ":number", 25),
				(store_sub, ":value_5", ":value_3", ":value_5"),
				(call_script, "script_lco_troop_name_to_s40", ":companions_overview_number"),
				(call_script, "script_lco_create_label", "str_lco_s40", 5, ":value_5", 750, 0),
			(try_end),
			(call_script, "script_lco_create_container", 225, ":value_2", 725, ":value", 0),
			(assign, "$g_lco_attributes_1", reg0),
			(call_script, "script_lco_create_container", 225, ":value_2", 725, ":value", 0),
			(assign, "$g_lco_attributes_2", reg0),
			(set_container_overlay, "$g_lco_attributes_1"),
			(try_for_range, ":number", 0, "$g_lco_heroes"),
				(store_add, ":value_4", "$g_lco_heroes", ":number"),
				(troop_get_slot, ":companions_overview_number", "trp_companions_overview", ":value_4"),
				(store_sub, ":value_5", "$g_lco_heroes", ":number"),
				(val_sub, ":value_5", 1),
				(val_mul, ":value_5", 25),
				(store_add, ":value_6", ":value_5", 1),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 0, ":value_5", 353, 300),
				(store_character_level, reg40, ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 20, ":value_6"),
				(troop_get_xp, reg40, ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 65, ":value_6"),
				(call_script, "script_lco_xp_to_next_level", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 125, ":value_6"),
				(store_troop_health, reg40, ":companions_overview_number", 1),
				(store_troop_health, reg42, ":companions_overview_number", 0),
				(store_mul, reg41, reg40, 10000),
				(val_div, reg41, reg42),
				(val_add, reg41, 50),
				(val_div, reg41, 100),
				(call_script, "script_lco_text_label", "str_lco_reg40_41", 180, ":value_6"),
				(try_begin),
					(eq, ":companions_overview_number", "trp_player"),
					(assign, reg40, 100),
				(else_try),
					(call_script, "script_npc_morale", ":companions_overview_number"),
					(assign, reg40, reg0),
				(try_end),
				(call_script, "script_lco_text_label", "str_lco_reg40", 225, ":value_6"),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 255, ":value_5", 183, 300),
				(store_attribute_level, reg40, ":companions_overview_number", 0),
				(call_script, "script_lco_text_label", "str_lco_reg40", 275, ":value_6"),
				(store_attribute_level, reg40, ":companions_overview_number", 1),
				(call_script, "script_lco_text_label", "str_lco_reg40", 305, ":value_6"),
				(store_attribute_level, reg40, ":companions_overview_number", 2),
				(call_script, "script_lco_text_label", "str_lco_reg40", 335, ":value_6"),
				(store_attribute_level, reg40, ":companions_overview_number", 3),
				(call_script, "script_lco_text_label", "str_lco_reg40", 365, ":value_6"),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 390, ":value_5", 183, 300),
				(store_skill_level, reg40, "skl_ironflesh", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 410, ":value_6"),
				(store_skill_level, reg40, "skl_power_strike", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 440, ":value_6"),
				(store_skill_level, reg40, "skl_power_throw", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 470, ":value_6"),
				(store_skill_level, reg40, "skl_power_draw", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 500, ":value_6"),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 525, ":value_5", 268, 300),
				(store_skill_level, reg40, "skl_weapon_master", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 545, ":value_6"),
				(store_skill_level, reg40, "skl_shield", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 575, ":value_6"),
				(store_skill_level, reg40, "skl_athletics", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 605, ":value_6"),
				(store_skill_level, reg40, "skl_riding", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 635, ":value_6"),
				(store_skill_level, reg40, "skl_horse_archery", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 665, ":value_6"),
				(store_skill_level, reg40, "skl_looting", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 695, ":value_6"),
			(try_end),
			(set_container_overlay, "$g_lco_attributes_2"),
			(try_for_range, ":number", 0, "$g_lco_heroes"),
				(store_add, ":value_4", "$g_lco_heroes", ":number"),
				(troop_get_slot, ":companions_overview_number", "trp_companions_overview", ":value_4"),
				(store_sub, ":value_5", "$g_lco_heroes", ":number"),
				(val_mul, ":value_5", 25),
				(val_sub, ":value_5", 25),
				(store_add, ":value_6", ":value_5", 1),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 0, ":value_5", 486, 300),
				(store_skill_level, reg40, "skl_trainer", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 20, ":value_6"),
				(store_skill_level, reg40, "skl_tracking", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 50, ":value_6"),
				(store_skill_level, reg40, "skl_tactics", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 80, ":value_6"),
				(store_skill_level, reg40, "skl_pathfinding", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 110, ":value_6"),
				(store_skill_level, reg40, "skl_spotting", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 140, ":value_6"),
				(store_skill_level, reg40, "skl_inventory_management", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 170, ":value_6"),
				(store_skill_level, reg40, "skl_wound_treatment", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 200, ":value_6"),
				(store_skill_level, reg40, "skl_surgery", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 230, ":value_6"),
				(store_skill_level, reg40, "skl_first_aid", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 260, ":value_6"),
				(store_skill_level, reg40, "skl_engineer", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 290, ":value_6"),
				(store_skill_level, reg40, "skl_persuasion", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 320, ":value_6"),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 350, ":value_5", 141, 300),
				(store_skill_level, reg40, "skl_prisoner_management", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 370, ":value_6"),
				(store_skill_level, reg40, "skl_leadership", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 400, ":value_6"),
				(store_skill_level, reg40, "skl_trade", ":companions_overview_number"),
				(call_script, "script_lco_text_label", "str_lco_reg40", 430, ":value_6"),
				(call_script, "script_lco_create_mesh", "mesh_lco_panel", 455, ":value_5", 353, 300),
				(store_proficiency_level, reg40, ":companions_overview_number", 0),
				(call_script, "script_lco_text_label", "str_lco_reg40", 480, ":value_6"),
				(store_proficiency_level, reg40, ":companions_overview_number", 1),
				(call_script, "script_lco_text_label", "str_lco_reg40", 520, ":value_6"),
				(store_proficiency_level, reg40, ":companions_overview_number", 2),
				(call_script, "script_lco_text_label", "str_lco_reg40", 560, ":value_6"),
				(store_proficiency_level, reg40, ":companions_overview_number", 3),
				(call_script, "script_lco_text_label", "str_lco_reg40", 600, ":value_6"),
				(store_proficiency_level, reg40, ":companions_overview_number", 4),
				(call_script, "script_lco_text_label", "str_lco_reg40", 640, ":value_6"),
				(store_proficiency_level, reg40, ":companions_overview_number", 5),
				(call_script, "script_lco_text_label", "str_lco_reg40", 680, ":value_6"),
			(try_end),
			(set_container_overlay, -1),
			(call_script, "script_lco_create_container", 250, 655, 730, 95, 1),
			(assign, "$g_lco_titles_1", reg0),
			(str_store_string, 0, "str_lco_c_level"),
			(call_script, "script_lco_text_caption", "str_s0", 20, 10),
			(str_store_string, 0, "str_lco_c_xp"),
			(call_script, "script_lco_text_caption", "str_s0", 65, 10),
			(str_store_string, 0, "str_lco_c_xp2next_level"),
			(call_script, "script_lco_text_caption", "str_s0", 125, 10),
			(str_store_string, 0, "str_lco_c_hp"),
			(call_script, "script_lco_text_caption", "str_s0", 180, 10),
			(str_store_string, 0, "str_lco_c_morale"),
			(call_script, "script_lco_text_caption", "str_s0", 225, 10),
			(str_store_string, 0, "str_lco_c_str"),
			(call_script, "script_lco_text_caption", "str_s0", 275, 10),
			(str_store_string, 0, "str_lco_c_agi"),
			(call_script, "script_lco_text_caption", "str_s0", 305, 10),
			(str_store_string, 0, "str_lco_c_int"),
			(call_script, "script_lco_text_caption", "str_s0", 335, 10),
			(str_store_string, 0, "str_lco_c_cha"),
			(call_script, "script_lco_text_caption", "str_s0", 365, 10),
			(str_store_string, 0, "str_lco_c_ironflesh"),
			(call_script, "script_lco_text_caption", "str_s0", 410, 10),
			(str_store_string, 0, "str_lco_c_pstrike"),
			(call_script, "script_lco_text_caption", "str_s0", 440, 10),
			(str_store_string, 0, "str_lco_c_pthrow"),
			(call_script, "script_lco_text_caption", "str_s0", 470, 10),
			(str_store_string, 0, "str_lco_c_pdraw"),
			(call_script, "script_lco_text_caption", "str_s0", 500, 10),
			(str_store_string, 0, "str_lco_c_wmaster"),
			(call_script, "script_lco_text_caption", "str_s0", 545, 10),
			(str_store_string, 0, "str_lco_c_shield"),
			(call_script, "script_lco_text_caption", "str_s0", 575, 10),
			(str_store_string, 0, "str_lco_c_athletics"),
			(call_script, "script_lco_text_caption", "str_s0", 605, 10),
			(str_store_string, 0, "str_lco_c_riding"),
			(call_script, "script_lco_text_caption", "str_s0", 635, 10),
			(str_store_string, 0, "str_lco_c_harchery"),
			(call_script, "script_lco_text_caption", "str_s0", 665, 10),
			(str_store_string, 0, "str_lco_c_looting"),
			(call_script, "script_lco_text_caption", "str_s0", 695, 10),
			(set_container_overlay, -1),
			(call_script, "script_lco_create_container", 250, 655, 730, 95, 1),
			(assign, "$g_lco_titles_2", reg0),
			(str_store_string, 0, "str_lco_c_trainer"),
			(call_script, "script_lco_text_caption", "str_s0", 20, 10),
			(str_store_string, 0, "str_lco_c_tracking"),
			(call_script, "script_lco_text_caption", "str_s0", 50, 10),
			(str_store_string, 0, "str_lco_c_tactics"),
			(call_script, "script_lco_text_caption", "str_s0", 80, 10),
			(str_store_string, 0, "str_lco_c_pathfinding"),
			(call_script, "script_lco_text_caption", "str_s0", 110, 10),
			(str_store_string, 0, "str_lco_c_spotting"),
			(call_script, "script_lco_text_caption", "str_s0", 140, 10),
			(str_store_string, 0, "str_lco_c_invmanage"),
			(call_script, "script_lco_text_caption", "str_s0", 170, 10),
			(str_store_string, 0, "str_lco_c_woundtreat"),
			(call_script, "script_lco_text_caption", "str_s0", 200, 10),
			(str_store_string, 0, "str_lco_c_surgery"),
			(call_script, "script_lco_text_caption", "str_s0", 230, 10),
			(str_store_string, 0, "str_lco_c_firstaid"),
			(call_script, "script_lco_text_caption", "str_s0", 260, 10),
			(str_store_string, 0, "str_lco_c_engineer"),
			(call_script, "script_lco_text_caption", "str_s0", 290, 10),
			(str_store_string, 0, "str_lco_c_persuasion"),
			(call_script, "script_lco_text_caption", "str_s0", 320, 10),
			(str_store_string, 0, "str_lco_c_pmanage"),
			(call_script, "script_lco_text_caption", "str_s0", 370, 10),
			(str_store_string, 0, "str_lco_c_leadership"),
			(call_script, "script_lco_text_caption", "str_s0", 400, 10),
			(str_store_string, 0, "str_lco_c_trade"),
			(call_script, "script_lco_text_caption", "str_s0", 430, 10),
			(str_store_string, 0, "str_lco_c_1hw"),
			(call_script, "script_lco_text_caption", "str_s0", 480, 10),
			(str_store_string, 0, "str_lco_c_2hw"),
			(call_script, "script_lco_text_caption", "str_s0", 520, 10),
			(str_store_string, 0, "str_lco_c_polearms"),
			(call_script, "script_lco_text_caption", "str_s0", 560, 10),
			(str_store_string, 0, "str_lco_c_bows"),
			(call_script, "script_lco_text_caption", "str_s0", 600, 10),
			(str_store_string, 0, "str_lco_c_xbows"),
			(call_script, "script_lco_text_caption", "str_s0", 640, 10),
			(str_store_string, 0, "str_lco_c_throwing"),
			(call_script, "script_lco_text_caption", "str_s0", 680, 10),
			(set_container_overlay, -1),
			(try_begin),
				(eq, "$g_lco_page", 0),
				(overlay_set_display, "$g_lco_titles_1", 1),
				(overlay_set_display, "$g_lco_attributes_1", 1),
				(overlay_set_display, "$g_lco_titles_2", 0),
				(overlay_set_display, "$g_lco_attributes_2", 0),
			(else_try),
				(overlay_set_display, "$g_lco_titles_1", 0),
				(overlay_set_display, "$g_lco_attributes_1", 0),
				(overlay_set_display, "$g_lco_titles_2", 1),
				(overlay_set_display, "$g_lco_attributes_2", 1),
			(try_end)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(eq, ":trigger_param_1", "$g_lco_return"),
				(call_script, "script_lco_clear_all_items", "$g_lco_garbage_troop"),
				(assign, "$g_lco_garbage_troop", "trp_companions_discard"),
				(jump_to_menu, "mnu_lco_auto_return"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_dialog"),
				(try_begin),
					(gt, "$g_lco_heroes", 0),
					(store_add, ":value", "$g_lco_heroes", "$g_lco_active_hero"),
					(troop_get_slot, "$g_lco_target", "trp_companions_overview", ":value"),
					(assign, "$g_lco_operation", 2),
					(jump_to_menu, "mnu_lco_auto_return"),
					(presentation_set_duration, 0),
				(try_end),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_inc_0"),
				(assign, "$g_lco_include_companions", ":trigger_param_2"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_inc_1"),
				(assign, "$g_lco_include_lords", ":trigger_param_2"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_inc_2"),
				(assign, "$g_lco_include_regulars", ":trigger_param_2"),
				(presentation_set_duration, 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_switch_page_0"),
				(neq, "$g_lco_page", 0),
				(assign, "$g_lco_page", 0),
				(position_set_x, 60, 25),
				(position_set_y, 60, 685),
				(overlay_set_position, "$g_lco_selected_page", 60),
				(overlay_set_display, "$g_lco_titles_1", 1),
				(overlay_set_display, "$g_lco_attributes_1", 1),
				(overlay_set_display, "$g_lco_titles_2", 0),
				(overlay_set_display, "$g_lco_attributes_2", 0),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_switch_page_1"),
				(neq, "$g_lco_page", 1),
				(assign, "$g_lco_page", 1),
				(position_set_x, 60, 55),
				(position_set_y, 60, 685),
				(overlay_set_position, "$g_lco_selected_page", 60),
				(overlay_set_display, "$g_lco_titles_1", 0),
				(overlay_set_display, "$g_lco_attributes_1", 0),
				(overlay_set_display, "$g_lco_titles_2", 1),
				(overlay_set_display, "$g_lco_attributes_2", 1),
			(else_try),
				(eq, ":trigger_param_1", "$g_lco_switch_page_2"),
				(assign, "$g_lco_page", 2),
				(presentation_set_duration, 0),
			(try_end)
		]),

		(ti_on_presentation_run,
		[
			(try_begin),
				(key_clicked, 1),
				(call_script, "script_lco_clear_all_items", "$g_lco_garbage_troop"),
				(assign, "$g_lco_garbage_troop", "trp_companions_discard"),
				(jump_to_menu, "mnu_lco_auto_return"),
				(presentation_set_duration, 0),
			(try_end),
			(try_begin),
				(key_clicked, 15),
				(try_begin),
					(this_or_next|key_is_down, 29),
					(key_is_down, 157),
					(assign, "$g_lco_page", 2),
					(presentation_set_duration, 0),
				(else_try),
					(neg|key_is_down, 56),
					(neg|key_is_down, 184),
					(val_add, "$g_lco_page", 1),
					(val_mod, "$g_lco_page", 2),
					(try_begin),
						(eq, "$g_lco_page", 0),
						(position_set_x, 60, 25),
						(position_set_y, 60, 685),
						(overlay_set_position, "$g_lco_selected_page", 60),
						(overlay_set_display, "$g_lco_titles_1", 1),
						(overlay_set_display, "$g_lco_attributes_1", 1),
						(overlay_set_display, "$g_lco_titles_2", 0),
						(overlay_set_display, "$g_lco_attributes_2", 0),
					(else_try),
						(position_set_x, 60, 55),
						(position_set_y, 60, 685),
						(overlay_set_position, "$g_lco_selected_page", 60),
						(overlay_set_display, "$g_lco_titles_1", 0),
						(overlay_set_display, "$g_lco_attributes_1", 0),
						(overlay_set_display, "$g_lco_titles_2", 1),
						(overlay_set_display, "$g_lco_attributes_2", 1),
					(try_end),
				(try_end),
			(try_end)
		]),

		(ti_on_presentation_mouse_press,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(set_fixed_point_multiplier, 1000),
			(try_begin),
				(eq, ":trigger_param_2", 0),
				(try_begin),
					(try_for_range, ":number", 0, "$g_lco_heroes"),
						(troop_slot_eq, "trp_companions_overview", ":number", ":trigger_param_1"),
						(assign, "$g_lco_active_hero", ":number"),
						(set_container_overlay, "$g_lco_main_container"),
						(store_mul, ":value", "$g_lco_active_hero", 25),
						(assign, ":var_5", 525),
						(store_mul, ":value_2", "$g_lco_heroes", 25),
						(val_max, ":value_2", ":var_5"),
						(val_sub, ":value_2", 25),
						(store_sub, ":value", ":value_2", ":value"),
						(position_set_x, 60, 0),
						(position_set_y, 60, ":value"),
						(overlay_set_position, "$g_lco_active_panel", 60),
						(try_begin),
							(this_or_next|key_is_down, 56),
							(key_is_down, 184),
							(store_add, ":value_3", "$g_lco_heroes", ":number"),
							(troop_get_slot, "$g_lco_target", "trp_companions_overview", ":value_3"),
							(assign, "$g_lco_operation", 2),
							(jump_to_menu, "mnu_lco_auto_return"),
							(presentation_set_duration, 0),
						(try_end),
					(try_end),
				(try_end),
			(try_end)
		])
	]),

	("kmt_lord_holdings", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(assign, ":var_1", 25),
			(store_add, ":value", ":var_1", 190),
			(store_add, ":value_2", ":value", 55),
			(store_add, ":value_3", ":value_2", 105),
			(store_add, ":value_4", ":value_3", 150),
			(store_add, ":value_5", ":value_4", 110),
			(store_add, ":value_6", ":value_5", 165),
			(assign, "$gpu_storage", "trp_tpe_presobj"),
			(try_begin),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_renown, 0),
				(call_script, "script_gpu_create_mesh", "mesh_pic_map_calradia_half", 0, 0, 1000, 1300),
				(overlay_set_alpha, reg1, 0),
			(try_end),
			(call_script, "script_gpu_draw_line", 950, 510, 25, 115, 10526880),
			(overlay_set_alpha, reg1, 119),
			(call_script, "script_gpu_draw_line", 950, 30, 25, 625, 1508608),
			(overlay_set_alpha, reg1, 204),
			(call_script, "script_gpu_draw_line", 950, 30, 25, 85, 1508608),
			(overlay_set_alpha, reg1, 204),
			(call_script, "script_gpu_create_game_button", "str_kmt_done_button", 500, 25, 1),
			(call_script, "script_gpu_create_text_label", "str_kmt_title_holdings", 837, 693, 5, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 5, 150),
			(call_script, "script_gpu_create_checkbox", 30, 56, "str_kmt_opt_remove_background", 6, 7),
			(assign, ":value_7", 655),
			(call_script, "script_gpu_draw_line", 950, 2, 25, ":value_7", 4278190080),
			(store_sub, ":value_8", ":value_7", 13),
			(call_script, "script_gpu_create_text_label", "str_kmt_title_names", ":var_1", ":value_8", 0, 3),
			(call_script, "script_gpu_resize_object", 0, 75),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_create_text_label", "str_kmt_title_relations", ":value", ":value_8", 0, 1),
			(call_script, "script_gpu_resize_object", 0, 75),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_create_text_label", "str_kmt_title_towns", ":value_2", ":value_8", 0, 3),
			(call_script, "script_gpu_resize_object", 0, 75),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_create_text_label", "str_kmt_title_castles", ":value_3", ":value_8", 0, 3),
			(call_script, "script_gpu_resize_object", 0, 75),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_create_text_label", "str_kmt_title_villages", ":value_4", ":value_8", 0, 3),
			(call_script, "script_gpu_resize_object", 0, 75),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_create_text_label", "str_kmt_title_friends", ":value_5", ":value_8", 0, 3),
			(call_script, "script_gpu_resize_object", 0, 75),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_create_text_label", "str_kmt_title_enemies", ":value_6", ":value_8", 0, 3),
			(call_script, "script_gpu_resize_object", 0, 75),
			(overlay_set_color, reg1, 4294967295),
			(val_sub, ":value_7", 30),
			(call_script, "script_gpu_draw_line", 950, 2, 25, ":value_7", 4278190080),
			(position_set_x, 1, 190),
			(position_set_y, 1, 675),
			(create_combo_label_overlay, reg1),
			(overlay_set_position, reg1, 1),
			(overlay_add_item, reg1, "@Player's Kingdom"),
			(overlay_add_item, reg1, "@Kingdom of Swadia"),
			(overlay_add_item, reg1, "@Kingdom of Vaegirs"),
			(overlay_add_item, reg1, "@Khergit Khanate"),
			(overlay_add_item, reg1, "@Kingdom of Nords"),
			(overlay_add_item, reg1, "@Kingdom of Rhodoks"),
			(overlay_add_item, reg1, "@Sarranid Sultanate"),
			(troop_set_slot, "trp_tpe_presobj", slot_troop_state, reg1),
			(troop_get_slot, ":tpe_presobj_last_talk_time", "trp_tpe_presobj", slot_troop_last_talk_time),
			(overlay_set_val, reg1, ":tpe_presobj_last_talk_time"),
			(try_begin),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_last_talk_time, 0),
				(assign, ":value_9", "fac_player_supporters_faction"),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_last_talk_time, 1),
				(assign, ":value_9", "fac_kingdom_1"),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_last_talk_time, 2),
				(assign, ":value_9", "fac_kingdom_2"),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_last_talk_time, 3),
				(assign, ":value_9", "fac_kingdom_3"),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_last_talk_time, 4),
				(assign, ":value_9", "fac_kingdom_4"),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_last_talk_time, 5),
				(assign, ":value_9", "fac_kingdom_5"),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_last_talk_time, 6),
				(assign, ":value_9", "fac_kingdom_6"),
			(try_end),
			(call_script, "script_gpu_container_heading", 0, 115, 1000, 485, 2),
			(assign, ":var_12", 0),
			(try_for_range, ":troop", "trp_kingdom_heroes_including_player_begin", "trp_knight_1_1_wife"),
				(try_begin),
					(eq, ":troop", "trp_kingdom_heroes_including_player_begin"),
					(assign, ":value_10", "trp_player"),
					(assign, ":value_11", "$players_kingdom"),
				(else_try),
					(assign, ":value_10", ":troop"),
					(store_faction_of_troop, ":value_11", ":value_10"),
				(try_end),
				(eq, ":value_11", ":value_9"),
				(val_add, ":var_12", 1),
			(try_end),
			(store_mul, ":value_12", ":var_12", 265),
			(assign, ":value_7", ":value_12"),
			(assign, ":var_17", 0),
			(assign, ":var_18", 0),
			(assign, ":var_19", 0),
			(try_for_range, ":value_10", "trp_kingdom_heroes_including_player_begin", "trp_knight_1_1_wife"),
				(assign, ":value_13", 1),
				(try_begin),
					(eq, ":value_10", "trp_kingdom_heroes_including_player_begin"),
					(assign, ":troop", "trp_player"),
					(assign, ":value_11", "$players_kingdom"),
				(else_try),
					(assign, ":troop", ":value_10"),
					(store_faction_of_troop, ":value_11", ":troop"),
				(try_end),
				(eq, ":value_11", ":value_9"),
				(str_store_troop_name, 25, ":troop"),
				(call_script, "script_gpu_create_text_label", "str_kmt_s25", ":var_1", ":value_7", 0, 4),
				(call_script, "script_gpu_resize_object", 0, 75),
				(overlay_set_color, reg1, 65547),
				(call_script, "script_troop_get_player_relation", ":troop"),
				(call_script, "script_gpu_create_text_label", "str_kmt_relation_to_you_reg0", ":value", ":value_7", 0, 2),
				(call_script, "script_gpu_resize_object", 0, 75),
				(assign, ":value_14", 0),
				(try_for_range, ":party", "p_town_1", "p_castle_1"),
					(party_slot_eq, ":party", slot_town_lord, ":troop"),
					(str_store_party_name, 25, ":party"),
					(store_mul, ":value_15", ":value_14", 20),
					(store_sub, ":value_16", ":value_7", ":value_15"),
					(call_script, "script_gpu_create_text_label", "str_kmt_s25", ":value_2", ":value_16", 0, 4),
					(call_script, "script_gpu_resize_object", 0, 75),
					(val_add, ":value_14", 1),
					(val_add, ":var_17", 1),
					(lt, ":value_13", ":value_14"),
					(assign, ":value_13", ":value_14"),
				(try_end),
				(assign, ":value_14", 0),
				(try_for_range, ":party", "p_castle_1", "p_village_1"),
					(party_slot_eq, ":party", slot_town_lord, ":troop"),
					(str_store_party_name, 25, ":party"),
					(store_mul, ":value_15", ":value_14", 20),
					(store_sub, ":value_16", ":value_7", ":value_15"),
					(call_script, "script_gpu_create_text_label", "str_kmt_s25", ":value_3", ":value_16", 0, 4),
					(call_script, "script_gpu_resize_object", 0, 75),
					(val_add, ":value_14", 1),
					(val_add, ":var_18", 1),
					(lt, ":value_13", ":value_14"),
					(assign, ":value_13", ":value_14"),
				(try_end),
				(assign, ":value_14", 0),
				(try_for_range, ":party", "p_village_1", "p_salt_mine"),
					(party_slot_eq, ":party", slot_town_lord, ":troop"),
					(str_store_party_name, 25, ":party"),
					(store_mul, ":value_15", ":value_14", 20),
					(store_sub, ":value_16", ":value_7", ":value_15"),
					(call_script, "script_gpu_create_text_label", "str_kmt_s25", ":value_4", ":value_16", 0, 4),
					(call_script, "script_gpu_resize_object", 0, 75),
					(val_add, ":value_14", 1),
					(val_add, ":var_19", 1),
					(lt, ":value_13", ":value_14"),
					(assign, ":value_13", ":value_14"),
				(try_end),
				(assign, ":value_14", 0),
				(try_for_range, ":troop_2", "trp_npc1", "trp_knight_1_1_wife"),
					(troop_slot_eq, ":troop_2", slot_troop_occupation, 2),
					(neq, ":troop_2", ":troop"),
					(call_script, "script_troop_get_relation_with_troop", ":troop_2", ":troop"),
					(assign, ":value_17", reg0),
					(ge, ":value_17", 24),
					(str_store_troop_name, 25, ":troop_2"),
					(store_mul, ":value_15", ":value_14", 20),
					(store_sub, ":value_16", ":value_7", ":value_15"),
					(call_script, "script_gpu_create_text_label", "str_kmt_s25", ":value_5", ":value_16", 0, 4),
					(call_script, "script_gpu_resize_object", 0, 75),
					(val_add, ":value_14", 1),
					(lt, ":value_13", ":value_14"),
					(assign, ":value_13", ":value_14"),
				(try_end),
				(assign, ":value_14", 0),
				(try_for_range, ":troop_2", "trp_npc1", "trp_knight_1_1_wife"),
					(troop_slot_eq, ":troop_2", slot_troop_occupation, 2),
					(neq, ":troop_2", ":troop"),
					(call_script, "script_troop_get_relation_with_troop", ":troop_2", ":troop"),
					(assign, ":value_17", reg0),
					(lt, ":value_17", -10),
					(str_store_troop_name, 25, ":troop_2"),
					(store_mul, ":value_15", ":value_14", 20),
					(store_sub, ":value_16", ":value_7", ":value_15"),
					(call_script, "script_gpu_create_text_label", "str_kmt_s25", ":value_6", ":value_16", 0, 4),
					(call_script, "script_gpu_resize_object", 0, 75),
					(val_add, ":value_14", 1),
					(lt, ":value_13", ":value_14"),
					(assign, ":value_13", ":value_14"),
				(try_end),
				(store_mul, ":value_18", ":value_13", 20),
				(val_sub, ":value_7", ":value_18"),
				(call_script, "script_gpu_draw_line", 946, 2, 27, ":value_7", 1315860),
				(val_sub, ":value_7", 20),
			(try_end),
			(set_container_overlay, -1),
			(assign, ":value_7", 115),
			(call_script, "script_gpu_draw_line", 950, 2, 25, ":value_7", 4278190080),
			(store_sub, ":value_8", ":value_7", 13),
			(assign, reg0, ":var_12"),
			(call_script, "script_gpu_create_text_label", "str_kmt_footer_lords", ":var_1", ":value_8", 0, 3),
			(call_script, "script_gpu_resize_object", 0, 75),
			(overlay_set_color, reg1, 4294967295),
			(assign, reg0, ":var_17"),
			(call_script, "script_gpu_create_text_label", "str_kmt_footer_towns", ":value_2", ":value_8", 0, 3),
			(call_script, "script_gpu_resize_object", 0, 75),
			(overlay_set_color, reg1, 4294967295),
			(assign, reg0, ":var_18"),
			(call_script, "script_gpu_create_text_label", "str_kmt_footer_castles", ":value_3", ":value_8", 0, 3),
			(call_script, "script_gpu_resize_object", 0, 75),
			(overlay_set_color, reg1, 4294967295),
			(assign, reg0, ":var_19"),
			(call_script, "script_gpu_create_text_label", "str_kmt_footer_villages", ":value_4", ":value_8", 0, 3),
			(call_script, "script_gpu_resize_object", 0, 75),
			(overlay_set_color, reg1, 4294967295),
			(val_sub, ":value_7", 30),
			(call_script, "script_gpu_draw_line", 950, 2, 25, ":value_7", 4278190080),
			(call_script, "script_gpu_draw_line", 2, 570, 25, 85, 4278190080),
			(call_script, "script_gpu_draw_line", 2, 570, 973, 85, 4278190080)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(ge, 1, 2),
				(assign, reg1, ":trigger_param_1"),
				(assign, reg2, ":trigger_param_2"),
				(display_message, "@DEBUG (KMT): Object clicked is {reg1}.  Value is {reg2}."),
			(try_end),
			(try_begin),
				(troop_slot_eq, "trp_tpe_presobj", 1, ":trigger_param_1"),
				(presentation_set_duration, 0),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_party_template, ":trigger_param_1"),
				(troop_set_slot, "trp_tpe_presobj", slot_troop_renown, ":trigger_param_2"),
				(start_presentation, "prsnt_kmt_lord_holdings"),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_state, ":trigger_param_1"),
				(troop_set_slot, "trp_tpe_presobj", slot_troop_last_talk_time, ":trigger_param_2"),
				(start_presentation, "prsnt_kmt_lord_holdings"),
			(try_end)
		])
	]),

	("ccp_character_creation", 0, mesh_load_window, 
	[(ti_on_presentation_load,
		[
			(presentation_set_duration, 999999),
			(set_fixed_point_multiplier, 1000),
			(call_script, "script_gpu_create_mesh", "mesh_character_creator", 0, 0, 1000, 1325),
			(overlay_set_alpha, reg1, 0),
			(assign, "$gpu_storage", "trp_tpe_presobj"),
			(call_script, "script_gpu_create_game_button", "str_ccp_label_done", 890, 15, 1),
			(call_script, "script_gpu_create_game_button", "str_ccp_label_back", 715, 15, 44),
			(call_script, "script_gpu_create_game_button", "str_ccp_label_default", 105, 15, 2),
			(assign, ":var_1", 75),
			(assign, ":var_2", 122),
			(call_script, "script_gpu_create_text_label", "str_ccp_label_gender", ":var_2", 650, 6, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_create_text_label", "str_ccp_label_father", ":var_2", 590, 7, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_create_text_label", "str_ccp_label_earlylife", ":var_2", 530, 8, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_create_text_label", "str_ccp_label_later", ":var_2", 470, 9, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_create_text_label", "str_ccp_label_reason", ":var_2", 410, 10, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 6, ":var_1"),
			(call_script, "script_gpu_resize_object", 7, ":var_1"),
			(call_script, "script_gpu_resize_object", 8, ":var_1"),
			(call_script, "script_gpu_resize_object", 9, ":var_1"),
			(call_script, "script_gpu_resize_object", 10, ":var_1"),
			(position_set_x, 1, 150),
			(position_set_y, 1, 610),
			(create_combo_button_overlay, reg1),
			(overlay_set_position, reg1, 1),
			(overlay_add_item, reg1, "@male"),
			(overlay_add_item, reg1, "@female"),
			(overlay_set_val, reg1, "$character_gender"),
			(troop_set_slot, "trp_tpe_presobj", slot_troop_wealth, reg1),
			(call_script, "script_gpu_resize_object", 11, ":var_1"),
			(position_set_y, 1, 550),
			(create_combo_button_overlay, reg1),
			(overlay_set_position, reg1, 1),
			(overlay_add_item, reg1, "@a septon"),
			(overlay_add_item, reg1, "@a thief"),
			(overlay_add_item, reg1, "@a bard"),
			(overlay_add_item, reg1, "@a hunter"),
			(overlay_add_item, reg1, "@a man-at-arms"),
			(overlay_add_item, reg1, "@a travelling merchant"),
			(overlay_add_item, reg1, "@a landless knight"),
			(overlay_set_val, reg1, "$background_type"),
			(troop_set_slot, "trp_tpe_presobj", slot_troop_cur_center, reg1),
			(call_script, "script_gpu_resize_object", 12, ":var_1"),
			(position_set_y, 1, 490),
			(create_combo_button_overlay, reg1),
			(overlay_set_position, reg1, 1),
			(overlay_add_item, reg1, "@a novice"),
			(overlay_add_item, reg1, "@a noble in training"),
			(overlay_add_item, reg1, "@a courtier"),
			(overlay_add_item, reg1, "@a mummer"),
			(overlay_add_item, reg1, "@a shop assistant"),
			(overlay_add_item, reg1, "@a bards apprentice"),
			(overlay_add_item, reg1, "@a street urchin"),
			(overlay_add_item, reg1, "@a craftsman's apprentice"),
			(overlay_add_item, reg1, "@a page at a nobleman's court"),
			(overlay_set_val, reg1, "$background_answer_2"),
			(troop_set_slot, "trp_tpe_presobj", slot_troop_banner_scene_prop, reg1),
			(call_script, "script_gpu_resize_object", 13, ":var_1"),
			(position_set_y, 1, 430),
			(create_combo_button_overlay, reg1),
			(overlay_set_position, reg1, 1),
			(try_begin),
				(eq, "$character_gender", 0),
				(overlay_add_item, reg1, "@a squire"),
			(else_try),
				(eq, "$character_gender", 1),
				(overlay_add_item, reg1, "@a lady-in-waiting"),
			(try_end),
			(overlay_add_item, reg1, "@an acolyte"),
			(overlay_add_item, reg1, "@a bard"),
			(overlay_add_item, reg1, "@a begging brother"),
			(overlay_add_item, reg1, "@a goods peddler"),
			(overlay_add_item, reg1, "@a blacksmith"),
			(overlay_add_item, reg1, "@a game poacher"),
			(overlay_add_item, reg1, "@a sellsword"),
			(overlay_add_item, reg1, "@a scribe"),
			(overlay_add_item, reg1, "@a thief"),
			(overlay_add_item, reg1, "@a farmer"),
			(overlay_add_item, reg1, "@a outlaw"),
			(overlay_add_item, reg1, "@a horse trainer"),
			(overlay_set_val, reg1, "$background_answer_3"),
			(troop_set_slot, "trp_tpe_presobj", slot_troop_original_faction, reg1),
			(call_script, "script_gpu_resize_object", 14, ":var_1"),
			(position_set_y, 1, 370),
			(create_combo_button_overlay, reg1),
			(overlay_set_position, reg1, 1),
			(overlay_add_item, reg1, "@lust for money and power"),
			(overlay_add_item, reg1, "@being forced out of your home"),
			(overlay_add_item, reg1, "@religious fervor"),
			(overlay_add_item, reg1, "@wanderlust"),
			(overlay_add_item, reg1, "@the loss of a loved one"),
			(overlay_add_item, reg1, "@personal revenge"),
			(overlay_add_item, reg1, "@sense of duty"),
			(overlay_set_val, reg1, "$background_answer_4"),
			(troop_set_slot, "trp_tpe_presobj", 15, reg1),
			(call_script, "script_gpu_resize_object", 15, ":var_1"),
			(call_script, "script_ccp_get_character_background_text"),
			(create_text_overlay, reg1, "@{s1}", 10240),
			(position_set_x, 1, 255),
			(position_set_y, 1, 90),
			(overlay_set_position, reg1, 1),
			(position_set_x, 1, 470),
			(position_set_y, 1, 585),
			(overlay_set_area_size, reg1, 1),
			(troop_set_slot, "trp_tpe_presobj", slot_troop_does_not_give_quest, "$g_fog"),
			(call_script, "script_gpu_create_checkbox_white", 755, 460, "str_ccp_label_fog_of_war", 19, 20),
			(troop_set_slot, "trp_tpe_presobj", 23, "$g_gether_npcs"),
			(call_script, "script_gpu_create_checkbox_white", 755, 495, "str_ccp_label_gather_npcs", 22, 23),
			(call_script, "script_ccp_initialize_faction_items"),
			(assign, ":var_3", 290),
			(store_sub, ":value", ":var_3", 25),
			(assign, ":var_5", 55),
			(assign, ":var_6", 100),
			(assign, ":var_7", 145),
			(assign, ":var_8", 190),
			(str_clear, 31),
			(call_script, "script_gpu_create_text_label", "str_ccp_str", ":var_5", ":var_3", 27, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 27, ":var_1"),
			(call_script, "script_gpu_create_text_label", "str_ccp_empty", ":var_5", ":value", 28, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 28, ":var_1"),
			(call_script, "script_gpu_create_text_label", "str_ccp_agi", ":var_6", ":var_3", 29, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 29, ":var_1"),
			(call_script, "script_gpu_create_text_label", "str_ccp_empty", ":var_6", ":value", 30, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 30, ":var_1"),
			(call_script, "script_gpu_create_text_label", "str_ccp_int", ":var_7", ":var_3", 31, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 31, ":var_1"),
			(call_script, "script_gpu_create_text_label", "str_ccp_empty", ":var_7", ":value", 32, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 32, ":var_1"),
			(call_script, "script_gpu_create_text_label", "str_ccp_cha", ":var_8", ":var_3", 33, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 33, ":var_1"),
			(call_script, "script_gpu_create_text_label", "str_ccp_empty", ":var_8", ":value", 34, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 34, ":var_1"),
			(assign, ":var_9", 65),
			(assign, ":var_10", 25),
			(assign, ":var_11", 300),
			(assign, ":var_12", 20),
			(assign, ":var_13", 5),
			(call_script, "script_gpu_container_heading", 0, 60, 220, 195, 43),
			(call_script, "script_gpu_create_text_label", "str_ccp_zero", ":var_10", ":var_11", 35, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 35, ":var_1"),
			(val_sub, ":var_11", ":var_13"),
			(store_sub, ":value_2", ":var_11", 5),
			(store_sub, ":value_3", ":var_9", 22),
			(call_script, "script_gpu_create_mesh", "mesh_golden_coins", ":value_3", ":value_2", 250, 250),
			(val_sub, ":var_11", ":var_12"),
			(call_script, "script_gpu_create_text_label", "str_ccp_zero", ":var_10", ":var_11", 36, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 36, ":var_1"),
			(val_sub, ":var_11", ":var_13"),
			(store_sub, ":value_2", ":var_11", 5),
			(store_sub, ":value_3", ":var_9", 22),
			(call_script, "script_gpu_create_mesh", "mesh_status_renown", ":value_3", ":value_2", 250, 250),
			(val_sub, ":var_11", ":var_12"),
			(call_script, "script_gpu_create_text_label", "str_ccp_zero", ":var_10", ":var_11", 37, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 37, ":var_1"),
			(val_sub, ":var_11", ":var_13"),
			(store_sub, ":value_3", ":var_9", 5),
			(call_script, "script_gpu_create_mesh", "mesh_weapon_onehand", ":value_3", ":var_11", 150, 150),
			(val_sub, ":var_11", ":var_12"),
			(call_script, "script_gpu_create_text_label", "str_ccp_zero", ":var_10", ":var_11", 38, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 38, ":var_1"),
			(val_sub, ":var_11", ":var_13"),
			(call_script, "script_gpu_create_mesh", "mesh_weapon_twohand", ":var_9", ":var_11", 150, 150),
			(val_sub, ":var_11", ":var_12"),
			(call_script, "script_gpu_create_text_label", "str_ccp_zero", ":var_10", ":var_11", 39, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 39, ":var_1"),
			(val_sub, ":var_11", ":var_13"),
			(store_sub, ":value_3", ":var_9", 2),
			(call_script, "script_gpu_create_mesh", "mesh_weapon_polearm", ":value_3", ":var_11", 200, 200),
			(val_sub, ":var_11", ":var_12"),
			(call_script, "script_gpu_create_text_label", "str_ccp_zero", ":var_10", ":var_11", 40, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 40, ":var_1"),
			(val_sub, ":var_11", ":var_13"),
			(store_sub, ":value_3", ":var_9", 10),
			(call_script, "script_gpu_create_mesh", "mesh_weapon_bow", ":value_3", ":var_11", 250, 250),
			(val_sub, ":var_11", ":var_12"),
			(call_script, "script_gpu_create_text_label", "str_ccp_zero", ":var_10", ":var_11", 41, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 41, ":var_1"),
			(val_sub, ":var_11", ":var_13"),
			(store_sub, ":value_3", ":var_9", 3),
			(call_script, "script_gpu_create_mesh", "mesh_weapon_crossbow", ":value_3", ":var_11", 250, 250),
			(val_sub, ":var_11", ":var_12"),
			(call_script, "script_gpu_create_text_label", "str_ccp_zero", ":var_10", ":var_11", 42, 1),
			(overlay_set_color, reg1, 4294967295),
			(call_script, "script_gpu_resize_object", 42, ":var_1"),
			(val_sub, ":var_11", ":var_13"),
			(store_sub, ":value_3", ":var_9", 3),
			(call_script, "script_gpu_create_mesh", "mesh_weapon_thorwing", ":value_3", ":var_11", 150, 150),
			(call_script, "script_ccp_generate_skill_set", 0),
			(set_container_overlay, -1)
		]),

		(ti_on_presentation_event_state_change,
		[
			(store_trigger_param_1, ":trigger_param_1"),
			(store_trigger_param_2, ":trigger_param_2"),
			(try_begin),
				(troop_slot_eq, "trp_tpe_presobj", 1, ":trigger_param_1"),
				(call_script, "script_ccp_end_presentation_begin_game"),
				(try_begin),
					(presentation_set_duration, 0),
					(jump_to_menu, "mnu_auto_return"),
				(try_end),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", 44, ":trigger_param_1"),
				(presentation_set_duration, 0),
				(jump_to_menu, "mnu_start_game_options"),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_occupation, ":trigger_param_1"),
				(call_script, "script_ccp_default_settings"),
				(start_presentation, "prsnt_ccp_character_creation"),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_state, ":trigger_param_1"),
				(store_random_in_range, "$character_gender", 0, 2),
				(store_random_in_range, "$background_type", 0, 6),
				(store_random_in_range, "$background_answer_2", 0, 5),
				(store_random_in_range, "$background_answer_3", 0, 6),
				(store_random_in_range, "$background_answer_4", 0, 5),
				(store_random_in_range, reg21, 0, 5),
				(troop_set_slot, "trp_tpe_presobj", slot_troop_last_quest_betrayed, reg21),
				(start_presentation, "prsnt_ccp_character_creation"),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_wealth, ":trigger_param_1"),
				(assign, "$character_gender", ":trigger_param_2"),
				(start_presentation, "prsnt_ccp_character_creation"),
				(ge, 0, 2),
				(assign, reg1, ":trigger_param_2"),
				(display_message, "@Gender option changed to option {reg1}."),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_cur_center, ":trigger_param_1"),
				(assign, "$background_type", ":trigger_param_2"),
				(start_presentation, "prsnt_ccp_character_creation"),
				(ge, 0, 2),
				(assign, reg1, ":trigger_param_2"),
				(display_message, "@Father background option changed to option {reg1}."),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_banner_scene_prop, ":trigger_param_1"),
				(assign, "$background_answer_2", ":trigger_param_2"),
				(start_presentation, "prsnt_ccp_character_creation"),
				(ge, 0, 2),
				(assign, reg1, ":trigger_param_2"),
				(display_message, "@Early life option changed to option {reg1}."),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_original_faction, ":trigger_param_1"),
				(assign, "$background_answer_3", ":trigger_param_2"),
				(start_presentation, "prsnt_ccp_character_creation"),
				(ge, 0, 2),
				(assign, reg1, ":trigger_param_2"),
				(display_message, "@Later life option changed to option {reg1}."),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", 15, ":trigger_param_1"),
				(assign, "$background_answer_4", ":trigger_param_2"),
				(start_presentation, "prsnt_ccp_character_creation"),
				(ge, 0, 2),
				(assign, reg1, ":trigger_param_2"),
				(display_message, "@Reason option changed to option {reg1}."),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_player_order_object, ":trigger_param_1"),
				(troop_set_slot, "trp_tpe_presobj", slot_troop_age, ":trigger_param_2"),
				(try_begin),
					(eq, ":trigger_param_2", 0),
					(assign, "$troop_trees", "trp_troop_tree_2"),
				(else_try),
					(eq, ":trigger_param_2", 1),
					(assign, "$troop_trees", "trp_troop_tree_1"),
				(else_try),
					(eq, ":trigger_param_2", 2),
					(assign, "$troop_trees", "trp_troop_tree_0"),
				(else_try),
					(display_message, "@ERROR: No valid troop tree selection found."),
				(try_end),
				(start_presentation, "prsnt_ccp_character_creation"),
				(ge, 0, 1),
				(assign, reg1, ":trigger_param_2"),
				(display_message, "@Troop tree changed to option {reg1?Expanded or Reworked:Native} Trees [ {reg1} ]."),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_age_appearance, ":trigger_param_1"),
				(assign, "$g_fog", ":trigger_param_2"),
				(call_script, "script_initialize_fog"),
				(troop_set_slot, "trp_tpe_presobj", slot_troop_does_not_give_quest, ":trigger_param_2"),
				(ge, 0, 1),
				(assign, reg1, ":trigger_param_2"),
				(display_message, "@Option: Fog of War has been {reg1?ENABLED:turned off} [ {reg1} ]."),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_player_relation, ":trigger_param_1"),
				(assign, "$g_gether_npcs", ":trigger_param_2"),
				(troop_set_slot, "trp_tpe_presobj", 23, ":trigger_param_2"),
				(ge, 0, 1),
				(assign, reg1, ":trigger_param_2"),
				(display_message, "@Option: Gathering companions has been {reg1?ENABLED:turned off} [ {reg1} ]."),
			(else_try),
				(troop_slot_eq, "trp_tpe_presobj", slot_troop_last_quest, ":trigger_param_1"),
				(troop_set_slot, "trp_tpe_presobj", slot_troop_last_quest_betrayed, ":trigger_param_2"),
				(start_presentation, "prsnt_ccp_character_creation"),
				(ge, 0, 1),
				(assign, reg1, ":trigger_param_2"),
				(store_add, ":value", "fac_player_supporters_faction", ":trigger_param_2"),
				(val_add, ":value", 1),
				(str_store_faction_name, 2, ":value"),
				(display_message, "@Option: Starting region has been set to {s2} [{reg1}]."),
			(try_end)
		])
	]),

]